<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Go代码风格指南介绍。"><title>Go Code Style Guide Introduction</title>
<link rel=canonical href=https://arlettebrook.github.io/p/go-code-style-guide-introduction/><link rel=stylesheet href=/scss/style.min.505938c6c688784167a9f82747dd1fc8c9c6c9e2137f29599d0e43e8740344b5.css><meta property='og:title' content="Go Code Style Guide Introduction"><meta property='og:description' content="Go代码风格指南介绍。"><meta property='og:url' content='https://arlettebrook.github.io/p/go-code-style-guide-introduction/'><meta property='og:site_name' content="Arlettebrook's blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Go代码约定'><meta property='article:published_time' content='2024-05-21T14:48:21+08:00'><meta property='article:modified_time' content='2024-05-21T14:48:21+08:00'><meta name=twitter:site content="@arlettebrook"><meta name=twitter:creator content="@arlettebrook"><meta name=twitter:title content="Go Code Style Guide Introduction"><meta name=twitter:description content="Go代码风格指南介绍。"><link rel="shortcut icon" href=/img/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-9MKLLVPEER"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9MKLLVPEER")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><div id=article-toolbar style=position:sticky;top:5px;z-index:1000><a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>返回</span></a></div><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#go代码约定>Go代码约定</a><ol><li><a href=#版权声明>版权声明</a><ol><li><a href=#apache-license-version-20>Apache License, Version 2.0</a></li><li><a href=#mit-license>MIT License</a></li><li><a href=#其它说明>其它说明</a></li></ol></li><li><a href=#项目结构>项目结构</a><ol><li><a href=#命令行应用>命令行应用</a></li></ol></li><li><a href=#导入标准库第三方或其它包>导入标准库、第三方或其它包</a></li><li><a href=#注释规范>注释规范</a><ol><li><a href=#包级别>包级别</a></li><li><a href=#结构接口及其它类型>结构、接口及其它类型</a></li><li><a href=#函数与方法>函数与方法</a></li><li><a href=#其它说明-1>其它说明</a></li></ol></li><li><a href=#命名规则>命名规则</a><ol><li><a href=#文件名>文件名</a></li><li><a href=#函数或方法>函数或方法</a></li><li><a href=#常量>常量</a></li><li><a href=#变量>变量</a></li></ol></li><li><a href=#声明语句>声明语句</a><ol><li><a href=#函数或方法-1>函数或方法</a></li></ol></li><li><a href=#代码指导>代码指导</a><ol><li><a href=#基本约束>基本约束</a></li></ol></li><li><a href=#测试用例>测试用例</a><ol><li><a href=#使用示例>使用示例</a></li></ol></li></ol></li><li><a href=#更多go代码风格指南>更多go代码风格指南</a></li><li><a href=#总结>总结</a></li><li><a href=#参考>参考</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/go/ style=background-color:#f97300;color:#fff>Go
</a><a href=/categories/%E7%BC%96%E7%A8%8B/ style=background-color:#41b06e;color:#fff>编程</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/go-code-style-guide-introduction/>Go Code Style Guide Introduction</a></h2><h3 class=article-subtitle>Go代码风格指南介绍。</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 21, 2024</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 10 分钟</time></div></footer></div></header><section class=article-content><hr><h2 id=go代码约定>Go代码约定</h2><p>Go代码约定是<a class=link href=https://github.com/unknwon target=_blank rel=noopener>@unknwon</a>为 Go 编程语言制定的 100% 固执己见和偏执的代码约定。它可能与<a class=link href=https://github.com/golang/go/wiki/CodeReviewComments target=_blank rel=noopener>Go 代码审查注释</a>或任何其他指南兼容，也可能不兼容。</p><p>总之，以下介绍的的约定，在大部分Go开源项目中都遵循。</p><h3 id=版权声明>版权声明</h3><p>作为开源项目，必须有相应的开源许可证才能算是真正的开源。在选择了一个开源许可证之后，需要在源文件中进行相应的版权声明才能生效。以下分别以 <a class=link href=http://www.apache.org/licenses/LICENSE-2.0 target=_blank rel=noopener>Apache License, Version 2.0</a> 和 MIT 授权许可为例。</p><h4 id=apache-license-version-20>Apache License, Version 2.0</h4><p>该许可证要求在<strong>所有</strong>的源文件中的头部放置以下内容才能算协议对该文件有效：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Copyright [yyyy] [name of copyright owner] [&lt;联系方式&gt;]
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Licensed under the Apache License, Version 2.0 (the &#34;License&#34;): you may
</span></span></span><span class=line><span class=cl><span class=c1>// not use this file except in compliance with the License. You may obtain
</span></span></span><span class=line><span class=cl><span class=c1>// a copy of the License at
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>//     http://www.apache.org/licenses/LICENSE-2.0
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Unless required by applicable law or agreed to in writing, software
</span></span></span><span class=line><span class=cl><span class=c1>// distributed under the License is distributed on an &#34;AS IS&#34; BASIS, WITHOUT
</span></span></span><span class=line><span class=cl><span class=c1>// WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
</span></span></span><span class=line><span class=cl><span class=c1>// License for the specific language governing permissions and limitations
</span></span></span><span class=line><span class=cl><span class=c1>// under the License.
</span></span></span></code></pre></td></tr></table></div></div><p>其中，<code>[yyyy]</code> 表示该源文件创建的年份。紧随其后的是 <code>[name of copyright owner]</code>，即版权所有者。如果为个人项目，就写个人名称；若为团队项目，则宜写团队名称。<code>[&lt;联系方式>]</code>：联系方式，通常为邮箱。</p><p>示例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Copyright 2013-2023 The Cobra Authors
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);
</span></span></span><span class=line><span class=cl><span class=c1>// you may not use this file except in compliance with the License.
</span></span></span><span class=line><span class=cl><span class=c1>// You may obtain a copy of the License at
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>//      http://www.apache.org/licenses/LICENSE-2.0
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Unless required by applicable law or agreed to in writing, software
</span></span></span><span class=line><span class=cl><span class=c1>// distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
</span></span></span><span class=line><span class=cl><span class=c1>// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
</span></span></span><span class=line><span class=cl><span class=c1>// See the License for the specific language governing permissions and
</span></span></span><span class=line><span class=cl><span class=c1>// limitations under the License.
</span></span></span></code></pre></td></tr></table></div></div><h4 id=mit-license>MIT License</h4><p>一般使用 MIT 授权的项目，需在源文件头部增加以下内容：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Copyright [yyyy] [name of copyright owner] [&lt;联系方式&gt;]. All rights reserved.
</span></span></span><span class=line><span class=cl><span class=c1>// Use of this source code is governed by a MIT-style
</span></span></span><span class=line><span class=cl><span class=c1>// license that can be found in the LICENSE file.
</span></span></span></code></pre></td></tr></table></div></div><p>其中，年份、版权所有者的名称以及联系方式填写规则与 Apache License, Version 2.0 的一样。</p><p>示例:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-GO data-lang=GO><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>Copyright © 2024 arlettebrook &lt;arlettebrook@proton.me&gt;
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>Permission is hereby granted, free of charge, to any person obtaining a copy
</span></span></span><span class=line><span class=cl><span class=cm>of this software and associated documentation files (the &#34;Software&#34;), to deal
</span></span></span><span class=line><span class=cl><span class=cm>in the Software without restriction, including without limitation the rights
</span></span></span><span class=line><span class=cl><span class=cm>to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
</span></span></span><span class=line><span class=cl><span class=cm>copies of the Software, and to permit persons to whom the Software is
</span></span></span><span class=line><span class=cl><span class=cm>furnished to do so, subject to the following conditions:
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>The above copyright notice and this permission notice shall be included in
</span></span></span><span class=line><span class=cl><span class=cm>all copies or substantial portions of the Software.
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>THE SOFTWARE IS PROVIDED &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
</span></span></span><span class=line><span class=cl><span class=cm>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
</span></span></span><span class=line><span class=cl><span class=cm>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
</span></span></span><span class=line><span class=cl><span class=cm>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
</span></span></span><span class=line><span class=cl><span class=cm>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
</span></span></span><span class=line><span class=cl><span class=cm>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
</span></span></span><span class=line><span class=cl><span class=cm>THE SOFTWARE.
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hello, world!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=其它说明>其它说明</h4><ul><li><p>其它类型的开源许可证基本上都可参照以上两种方案。</p></li><li><p>如果存在不同作者或组织对同个源文件的修改，在协议兼容的情况下，可将首行变为多行，按照先后次序排放：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// Copyright 2011 Gary Burd
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// Copyright 2013 Unknwon
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>在 README 文件最后中需要说明项目所采用的开源许可证：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl> ## 授权许可
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> 本项目采用 MIT 开源授权许可证，完整的授权说明已放置在 [<span class=nt>LICENSE</span>](<span class=na>LICENSE</span>) 文件中。
</span></span></code></pre></td></tr></table></div></div></li></ul><p>开源协议介绍<a class=link href=https://arlettebrook.github.io/p/open-source-license-introduction/ target=_blank rel=noopener>参考</a>.</p><h3 id=项目结构>项目结构</h3><p>以下为一般项目结构，根据不同的 Web 框架习惯，可使用括号内的文字替换；根据不同的项目类型和需求，可自由增删某些结构：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>- templates <span class=o>(</span>views<span class=o>)</span>          <span class=c1># 模板文件</span>
</span></span><span class=line><span class=cl>- public <span class=o>(</span>static<span class=o>)</span>            <span class=c1># 静态文件</span>
</span></span><span class=line><span class=cl>	- css                    
</span></span><span class=line><span class=cl>	- fonts                  
</span></span><span class=line><span class=cl>	- img                    
</span></span><span class=line><span class=cl>	- js                     
</span></span><span class=line><span class=cl>- routes                     <span class=c1># 路由逻辑处理</span>
</span></span><span class=line><span class=cl>- models					 <span class=c1># 数据逻辑层</span>
</span></span><span class=line><span class=cl>- pkg                        <span class=c1># 子模块</span>
</span></span><span class=line><span class=cl>	- setting                <span class=c1># 应用配置存取</span>
</span></span><span class=line><span class=cl>- cmd                        <span class=c1># 命令行程序命令</span>
</span></span><span class=line><span class=cl>- conf                       <span class=c1># 默认配置</span>
</span></span><span class=line><span class=cl>	- locale                 <span class=c1># i18n 本地化文件</span>
</span></span><span class=line><span class=cl>- custom                     <span class=c1># 自定义配置</span>
</span></span><span class=line><span class=cl>- data                       <span class=c1># 应用生成数据文件</span>
</span></span><span class=line><span class=cl>- log                        <span class=c1># 应用生成日志文件</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=命令行应用>命令行应用</h4><p>当应用类型为命令行应用时，需要将命令相关文件存放于 <code>/cmd</code> 目录下，并为每个命令创建一个单独的源文件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>/cmd
</span></span><span class=line><span class=cl>	dump.go
</span></span><span class=line><span class=cl>	fix.go
</span></span><span class=line><span class=cl>	serve.go
</span></span><span class=line><span class=cl>	update.go
</span></span><span class=line><span class=cl>	web.go
</span></span></code></pre></td></tr></table></div></div><h3 id=导入标准库第三方或其它包>导入标准库、第三方或其它包</h3><p>除标准库外，Go 语言的导入路径基本上依赖代码托管平台上的 URL 路径，因此一个源文件需要导入的包有 4 种分类：标准库、第三方包、组织内其它包和当前包的子包。</p><p>基本规则：</p><ul><li>如果同时存在 2 种及以上，则需要使用<strong>分组</strong>来导入。每个分类使用一个分组，采用空行作为分区之间的分割。</li><li>在非测试文件（<code>*_test.go</code>）中，禁止使用 <code>.</code> 来简化导入包的对象调用。</li><li>禁止使用相对路径导入（<code>./subpackage</code>），所有导入路径必须符合 <code>go get</code> 标准。</li></ul><p>下面是一个完整的示例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;html/template&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;net/http&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/codegangsta/cli&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;gopkg.in/macaron.v1&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/gogits/git&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/gogits/gfm&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/gogits/gogs/routers&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/gogits/gogs/routers/repo&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/gogits/gogs/routers/user&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>通常我们都不需要关注，包是如何分组的。只需要运行<code>goimports</code>命令，即可自动导入，自动分组。</p><p>在许多ide中，建议不要使用自带的导入。它们分组不是很准确，建议使用<code>goimports</code>。如：在GoLand中，我们只需要在File Watchers中勾选<code>goimports</code>命令，即可实现自动导入、分组。</p><h3 id=注释规范>注释规范</h3><ul><li>所有<strong>导出对象</strong>都需要注释说明其用途；非导出对象<strong>根据情况</strong>进行注释。</li><li>如果对象可数且无明确指定数量的情况下，一律使用单数形式和一般进行时描述；否则使用复数形式。</li><li>包、函数、方法和类型的注释说明都是一个完整的句子。</li><li>句子类型的注释首字母均需大写；短语类型的注释首字母需小写。</li><li>注释的单行长度不能超过 80 个字符。</li></ul><h4 id=包级别>包级别</h4><ul><li><p>包级别的注释就是对包的介绍，只需在同个包的任一源文件中说明即可有效。</p></li><li><p>对于 <code>main</code> 包，一般只有一行简短的注释用以说明包的用途，且以项目名称开头：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// Gogs (Go Git Service) is a painless self-hosted Git Service.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=kn>package</span> <span class=nx>main</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>对于一个复杂项目的子包，一般情况下不需要包级别注释，除非是代表某个特定功能的模块。</p></li><li><p>对于简单的非 <code>main</code> 包，也可用一行注释概括。</p></li><li><p>对于相对功能复杂的非 <code>main</code> 包，一般都会增加一些使用示例或基本说明，且以 <code>Package &lt;name></code> 开头：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm> Package regexp implements a simple library for regular expressions.
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm> The syntax of the regular expressions accepted is:
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>     regexp:
</span></span></span><span class=line><span class=cl><span class=cm>         concatenation { &#39;|&#39; concatenation }
</span></span></span><span class=line><span class=cl><span class=cm>     concatenation:
</span></span></span><span class=line><span class=cl><span class=cm>         { closure }
</span></span></span><span class=line><span class=cl><span class=cm>     closure:
</span></span></span><span class=line><span class=cl><span class=cm>         term [ &#39;*&#39; | &#39;+&#39; | &#39;?&#39; ]
</span></span></span><span class=line><span class=cl><span class=cm>     term:
</span></span></span><span class=line><span class=cl><span class=cm>         &#39;^&#39;
</span></span></span><span class=line><span class=cl><span class=cm>         &#39;$&#39;
</span></span></span><span class=line><span class=cl><span class=cm>         &#39;.&#39;
</span></span></span><span class=line><span class=cl><span class=cm>         character
</span></span></span><span class=line><span class=cl><span class=cm>         &#39;[&#39; [ &#39;^&#39; ] character-ranges &#39;]&#39;
</span></span></span><span class=line><span class=cl><span class=cm>         &#39;(&#39; regexp &#39;)&#39;
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl> <span class=kn>package</span> <span class=nx>regexp</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>特别复杂的包说明，可单独创建 <a class=link href=https://github.com/robfig/cron/blob/master/doc.go target=_blank rel=noopener></a>文件来加以说明。</p><ul><li><code>doc.go</code>专门书写该go文件所在包的<strong>文档介绍</strong>。</li></ul></li></ul><h4 id=结构接口及其它类型>结构、接口及其它类型</h4><ul><li><p>类型的定义一般都以单数形式描述：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// Request represents a request to run a command.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=kd>type</span> <span class=nx>Request</span> <span class=kd>struct</span> <span class=p>{</span> <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>如果为接口，则一般以以下形式描述：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// FileInfo is the interface that describes a file and is returned by Stat and Lstat.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=kd>type</span> <span class=nx>FileInfo</span> <span class=kd>interface</span> <span class=p>{</span> <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h4 id=函数与方法>函数与方法</h4><ul><li><p>函数与方法的注释需以函数或方法的名称作为开头：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// Post returns *BeegoHttpRequest with POST method.
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>如果一句话不足以说明全部问题，则可换行继续进行更加细致的描述：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// Copy copies file from source to target path.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// It returns false and error when error occurs in underlying function calls.
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>若函数或方法为判断类型（返回值主要为 <code>bool</code> 类型），则以 <code>&lt;name> returns true if</code> 开头：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// HasPrefix returns true if name has any string in given slice as prefix.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=kd>func</span> <span class=nf>HasPrefix</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>prefixes</span> <span class=p>[]</span><span class=kt>string</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span> <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h4 id=其它说明-1>其它说明</h4><ul><li><p>当某个部分等待完成时，可用 <code>TODO:</code> 开头的注释来提醒维护人员。</p></li><li><p>当某个部分存在已知问题进行需要修复或改进时，可用 <code>FIXME:</code> 开头的注释来提醒维护人员。</p></li><li><p>当需要特别说明某个问题时，可用 <code>NOTE:</code> 开头的注释：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> // NOTE: os.Chmod and os.Chtimes don&#39;t recognize symbolic link,
</span></span><span class=line><span class=cl> // which will lead &#34;no such file or directory&#34; error.
</span></span><span class=line><span class=cl> return os.Symlink(target, dest)
</span></span></code></pre></td></tr></table></div></div><p>注意：<code>NOTE:</code>部分ide不支持高亮。</p></li></ul><h3 id=命名规则>命名规则</h3><h4 id=文件名>文件名</h4><ul><li>整个应用或包的主入口文件应当是 <code>main.go</code> 或与<strong>应用名称简写</strong>相同。例如：<code>Gogs</code> 的主入口文件名为 <code>gogs.go</code>。</li></ul><h4 id=函数或方法>函数或方法</h4><ul><li><p>若函数或方法为判断类型（返回值主要为 <code>bool</code> 类型），则名称应以 <code>Has</code>, <code>Is</code>, <code>Can</code> 或 <code>Allow</code> 等判断性动词开头：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=kd>func</span> <span class=nf>HasPrefix</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>prefixes</span> <span class=p>[]</span><span class=kt>string</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=nf>IsEntry</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>entries</span> <span class=p>[]</span><span class=kt>string</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=nf>CanManage</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=nf>AllowGitHook</span><span class=p>()</span> <span class=kt>bool</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h4 id=常量>常量</h4><ul><li><p>常量均需使用全部大写字母组成，并使用下划线分词：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=kd>const</span> <span class=nx>APP_VER</span> <span class=p>=</span> <span class=s>&#34;0.7.0.1110 Beta&#34;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>如果是枚举类型的常量，需要先创建相应类型：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=kd>type</span> <span class=nx>Scheme</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl> 	<span class=nx>HTTP</span>  <span class=nx>Scheme</span> <span class=p>=</span> <span class=s>&#34;http&#34;</span>
</span></span><span class=line><span class=cl> 	<span class=nx>HTTPS</span> <span class=nx>Scheme</span> <span class=p>=</span> <span class=s>&#34;https&#34;</span>
</span></span><span class=line><span class=cl> <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>如果模块的功能较为复杂、常量名称容易混淆的情况下，为了更好地区分枚举类型，可以使用完整的前缀：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=kd>type</span> <span class=nx>PullRequestStatus</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl> 	<span class=nx>PULL_REQUEST_STATUS_CONFLICT</span> <span class=nx>PullRequestStatus</span> <span class=p>=</span> <span class=kc>iota</span>
</span></span><span class=line><span class=cl> 	<span class=nx>PULL_REQUEST_STATUS_CHECKING</span>
</span></span><span class=line><span class=cl> 	<span class=nx>PULL_REQUEST_STATUS_MERGEABLE</span>
</span></span><span class=line><span class=cl> <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h4 id=变量>变量</h4><ul><li><p>变量命名基本上遵循相应的英文表达或简写。</p></li><li><p>在相对简单的环境（对象数量少、针对性强）中，可以将一些名称由完整单词简写为单个字母，例如：</p><ul><li><code>user</code> 可以简写为 <code>u</code></li><li><code>userID</code> 可以简写 <code>uid</code></li></ul></li><li><p>若变量类型为 <code>bool</code> 类型，则名称应以 <code>Has</code>, <code>Is</code>, <code>Can</code> 或 <code>Allow</code> 开头：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl> <span class=k>var</span> <span class=n>isExist</span> <span class=ne>bool</span>
</span></span><span class=line><span class=cl> <span class=k>var</span> <span class=n>hasConflict</span> <span class=ne>bool</span>
</span></span><span class=line><span class=cl> <span class=k>var</span> <span class=n>canManage</span> <span class=ne>bool</span>
</span></span><span class=line><span class=cl> <span class=k>var</span> <span class=n>allowGitHook</span> <span class=ne>bool</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>上面的规则也适用于结构体字段定义：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// Webhook represents a web hook object.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=kd>type</span> <span class=nx>Webhook</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> 	<span class=nx>ID</span>           <span class=kt>int64</span> <span class=s>`xorm:&#34;pk autoincr&#34;`</span>
</span></span><span class=line><span class=cl> 	<span class=nx>RepoID</span>       <span class=kt>int64</span>
</span></span><span class=line><span class=cl> 	<span class=nx>OrgID</span>        <span class=kt>int64</span>
</span></span><span class=line><span class=cl> 	<span class=nx>URL</span>          <span class=kt>string</span> <span class=s>`xorm:&#34;url TEXT&#34;`</span>
</span></span><span class=line><span class=cl> 	<span class=nx>ContentType</span>  <span class=nx>HookContentType</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Secret</span>       <span class=kt>string</span> <span class=s>`xorm:&#34;TEXT&#34;`</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Events</span>       <span class=kt>string</span> <span class=s>`xorm:&#34;TEXT&#34;`</span>
</span></span><span class=line><span class=cl> 	<span class=o>*</span><span class=nx>HookEvent</span>   <span class=s>`xorm:&#34;-&#34;`</span>
</span></span><span class=line><span class=cl> 	<span class=nx>IsSSL</span>        <span class=kt>bool</span> <span class=s>`xorm:&#34;is_ssl&#34;`</span>
</span></span><span class=line><span class=cl> 	<span class=nx>IsActive</span>     <span class=kt>bool</span>
</span></span><span class=line><span class=cl> 	<span class=nx>HookTaskType</span> <span class=nx>HookTaskType</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Meta</span>         <span class=kt>string</span>     <span class=s>`xorm:&#34;TEXT&#34;`</span> <span class=c1>// store hook-specific attributes
</span></span></span><span class=line><span class=cl><span class=c1></span> 	<span class=nx>LastStatus</span>   <span class=nx>HookStatus</span> <span class=c1>// Last delivery status
</span></span></span><span class=line><span class=cl><span class=c1></span> 	<span class=nx>Created</span>      <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>  <span class=s>`xorm:&#34;CREATED&#34;`</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Updated</span>      <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>  <span class=s>`xorm:&#34;UPDATED&#34;`</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h5 id=变量命名惯例>变量命名惯例</h5><p>变量名称一般遵循驼峰法，但遇到特有名词时，需要遵循以下规则：</p><ul><li>如果变量为私有，且特有名词为首个单词，则使用小写，如 <code>apiClient</code>。</li><li>其它情况都应当使用该名词原有的写法，如 <code>APIClient</code>、<code>GET</code>、<code>UserID</code>。</li></ul><p>下面列举了一些常见的特有名词：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-GO data-lang=GO><span class=line><span class=cl><span class=c1>// A GonicMapper that contains a list of common initialisms taken from golang/lint
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>LintGonicMapper</span> <span class=p>=</span> <span class=nx>GonicMapper</span><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;API&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;ASCII&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;CPU&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;CSS&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;DNS&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;EOF&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;GUID&#34;</span><span class=p>:</span>  <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;HTML&#34;</span><span class=p>:</span>  <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;HTTP&#34;</span><span class=p>:</span>  <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;HTTPS&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;ID&#34;</span><span class=p>:</span>    <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;IP&#34;</span><span class=p>:</span>    <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;JSON&#34;</span><span class=p>:</span>  <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;LHS&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;QPS&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;RAM&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;RHS&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;RPC&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;SLA&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;SMTP&#34;</span><span class=p>:</span>  <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;SSH&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;TLS&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;TTL&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;UI&#34;</span><span class=p>:</span>    <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;UID&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;UUID&#34;</span><span class=p>:</span>  <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;URI&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;URL&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;UTF8&#34;</span><span class=p>:</span>  <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;VM&#34;</span><span class=p>:</span>    <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;XML&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;XSRF&#34;</span><span class=p>:</span>  <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;XSS&#34;</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=声明语句>声明语句</h3><h4 id=函数或方法-1>函数或方法</h4><p>函数或方法的参数排列顺序遵循以下几点原则（从左到右）：</p><ol><li>参数的重要程度与逻辑顺序</li><li>简单类型优先于复杂类型</li><li>尽可能将同种类型的参数放在相邻位置，则只需写一次类型</li></ol><p>示例:</p><p>以下声明语句，<code>User</code> 类型要复杂于 <code>string</code> 类型，但由于 <code>Repository</code> 是 <code>User</code> 的附属品，首先确定 <code>User</code> 才能继而确定 <code>Repository</code>。因此，<code>User</code> 的顺序要优先于 <code>repoName</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>IsRepositoryExist</span><span class=p>(</span><span class=nx>user</span> <span class=o>*</span><span class=nx>User</span><span class=p>,</span> <span class=nx>repoName</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=kt>bool</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span> <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div><p>​</p><h3 id=代码指导>代码指导</h3><h4 id=基本约束>基本约束</h4><ul><li><p>所有应用的 <code>main</code> 包需要有 <code>APP_VER</code> 常量表示版本，格式为 <code>X.Y.Z.Date [Status]</code>，例如：<code>0.7.6.1112 Beta</code>。</p></li><li><p>单独的库需要有函数 <code>Version</code> 返回库版本号的字符串，格式为 <code>X.Y.Z[.Date]</code>。</p></li><li><p>当单行代码超过 80 个字符时，就要考虑分行。分行的规则是以参数为单位将从较长的参数开始换行，以此类推直到每行长度合适：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=nf>So</span><span class=p>(</span><span class=nx>z</span><span class=p>.</span><span class=nf>ExtractTo</span><span class=p>(</span>
</span></span><span class=line><span class=cl> 	<span class=nx>path</span><span class=p>.</span><span class=nf>Join</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nf>TempDir</span><span class=p>(),</span> <span class=s>&#34;testdata/test2&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl> 	<span class=s>&#34;dir/&#34;</span><span class=p>,</span> <span class=s>&#34;dir/bar&#34;</span><span class=p>,</span> <span class=s>&#34;readonly&#34;</span><span class=p>),</span> <span class=nx>ShouldBeNil</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>当单行声明语句超过 80 个字符时，就要考虑分行。分行的规则是将参数按类型分组，紧接着的声明语句的是一个空行，以便和函数体区别：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// NewNode initializes and returns a new Node representation.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=kd>func</span> <span class=nf>NewNode</span><span class=p>(</span>
</span></span><span class=line><span class=cl> 	<span class=nx>importPath</span><span class=p>,</span> <span class=nx>downloadUrl</span> <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 	<span class=nx>tp</span> <span class=nx>RevisionType</span><span class=p>,</span> <span class=nx>val</span> <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 	<span class=nx>isGetDeps</span> <span class=kt>bool</span><span class=p>)</span> <span class=o>*</span><span class=nx>Node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> 	<span class=nx>n</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>Node</span><span class=p>{</span>
</span></span><span class=line><span class=cl> 		<span class=nx>Pkg</span><span class=p>:</span> <span class=nx>Pkg</span><span class=p>{</span>
</span></span><span class=line><span class=cl> 			<span class=nx>ImportPath</span><span class=p>:</span> <span class=nx>importPath</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 			<span class=nx>RootPath</span><span class=p>:</span>   <span class=nf>GetRootPath</span><span class=p>(</span><span class=nx>importPath</span><span class=p>),</span>
</span></span><span class=line><span class=cl> 			<span class=nx>Type</span><span class=p>:</span>       <span class=nx>tp</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 			<span class=nx>Value</span><span class=p>:</span>      <span class=nx>val</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 		<span class=p>},</span>
</span></span><span class=line><span class=cl> 		<span class=nx>DownloadURL</span><span class=p>:</span> <span class=nx>downloadUrl</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 		<span class=nx>IsGetDeps</span><span class=p>:</span>   <span class=nx>isGetDeps</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 	<span class=p>}</span>
</span></span><span class=line><span class=cl> 	<span class=nx>n</span><span class=p>.</span><span class=nx>InstallPath</span> <span class=p>=</span> <span class=nx>path</span><span class=p>.</span><span class=nf>Join</span><span class=p>(</span><span class=nx>setting</span><span class=p>.</span><span class=nx>InstallRepoPath</span><span class=p>,</span> <span class=nx>n</span><span class=p>.</span><span class=nx>RootPath</span><span class=p>)</span> <span class=o>+</span> <span class=nx>n</span><span class=p>.</span><span class=nf>ValSuffix</span><span class=p>()</span>
</span></span><span class=line><span class=cl> 	<span class=k>return</span> <span class=nx>n</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>分组声明一般需要按照功能来区分，而不是将所有类型都分在一组：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl> 	<span class=c1>// Default section name.
</span></span></span><span class=line><span class=cl><span class=c1></span> 	<span class=nx>DEFAULT_SECTION</span> <span class=p>=</span> <span class=s>&#34;DEFAULT&#34;</span>
</span></span><span class=line><span class=cl> 	<span class=c1>// Maximum allowed depth when recursively substituing variable names.
</span></span></span><span class=line><span class=cl><span class=c1></span> 	<span class=nx>_DEPTH_VALUES</span> <span class=p>=</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl> <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kd>type</span> <span class=nx>ParseError</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl> 	<span class=nx>ERR_SECTION_NOT_FOUND</span> <span class=nx>ParseError</span> <span class=p>=</span> <span class=kc>iota</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl> 	<span class=nx>ERR_KEY_NOT_FOUND</span>
</span></span><span class=line><span class=cl> 	<span class=nx>ERR_BLANK_SECTION_NAME</span>
</span></span><span class=line><span class=cl> 	<span class=nx>ERR_COULD_NOT_PARSE</span>
</span></span><span class=line><span class=cl> <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>当一个源文件中存在多个相对独立的部分时，为方便区分，需使用由 <a class=link href=http://www.network-science.de/ascii/ target=_blank rel=noopener>ASCII Generator</a> 提供的句型字符标注（示例：<code>Comment</code>）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// _________                                       __
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// \_   ___ \  ____   _____   _____   ____   _____/  |_
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// /    \  \/ /  _ \ /     \ /     \_/ __ \ /    \   __\
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// \     \___(  &lt;_&gt; )  Y Y  \  Y Y  \  ___/|   |  \  |
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//  \______  /\____/|__|_|  /__|_|  /\___  &gt;___|  /__|
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//         \/             \/      \/     \/     \/
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>函数或方法的顺序一般需要按照依赖关系由浅入深由上至下排序，即最底层的函数出现在最前面。例如，下方的代码，函数 <code>ExecCmdDirBytes</code> 属于最底层的函数，它被 <code>ExecCmdDir</code> 函数调用，而 <code>ExecCmdDir</code> 又被 <code>ExecCmd</code> 调用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=c1>// ExecCmdDirBytes executes system command in given directory
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// and return stdout, stderr in bytes type, along with possible error.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=kd>func</span> <span class=nf>ExecCmdDirBytes</span><span class=p>(</span><span class=nx>dir</span><span class=p>,</span> <span class=nx>cmdName</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>args</span> <span class=o>...</span><span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=p>[]</span><span class=kt>byte</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> 	<span class=o>...</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=c1>// ExecCmdDir executes system command in given directory
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// and return stdout, stderr in string type, along with possible error.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=kd>func</span> <span class=nf>ExecCmdDir</span><span class=p>(</span><span class=nx>dir</span><span class=p>,</span> <span class=nx>cmdName</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>args</span> <span class=o>...</span><span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=kt>string</span><span class=p>,</span> <span class=kt>string</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> 	<span class=nx>bufOut</span><span class=p>,</span> <span class=nx>bufErr</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>ExecCmdDirBytes</span><span class=p>(</span><span class=nx>dir</span><span class=p>,</span> <span class=nx>cmdName</span><span class=p>,</span> <span class=nx>args</span><span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl> 	<span class=k>return</span> <span class=nb>string</span><span class=p>(</span><span class=nx>bufOut</span><span class=p>),</span> <span class=nb>string</span><span class=p>(</span><span class=nx>bufErr</span><span class=p>),</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=c1>// ExecCmd executes system command
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// and return stdout, stderr in string type, along with possible error.
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=kd>func</span> <span class=nf>ExecCmd</span><span class=p>(</span><span class=nx>cmdName</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>args</span> <span class=o>...</span><span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=kt>string</span><span class=p>,</span> <span class=kt>string</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> 	<span class=k>return</span> <span class=nf>ExecCmdDir</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>,</span> <span class=nx>cmdName</span><span class=p>,</span> <span class=nx>args</span><span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>结构附带的方法应置于结构定义之后，按照所对应操作的字段顺序摆放方法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=kd>type</span> <span class=nx>Webhook</span> <span class=kd>struct</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=p>(</span><span class=nx>w</span> <span class=o>*</span><span class=nx>Webhook</span><span class=p>)</span> <span class=nf>GetEvent</span><span class=p>()</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=p>(</span><span class=nx>w</span> <span class=o>*</span><span class=nx>Webhook</span><span class=p>)</span> <span class=nf>SaveEvent</span><span class=p>()</span> <span class=kt>error</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=p>(</span><span class=nx>w</span> <span class=o>*</span><span class=nx>Webhook</span><span class=p>)</span> <span class=nf>HasPushEvent</span><span class=p>()</span> <span class=kt>bool</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>如果一个结构拥有对应操作函数，大体上按照 <code>CRUD</code> 的顺序放置结构定义之后：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=kd>func</span> <span class=nf>CreateWebhook</span><span class=p>(</span><span class=nx>w</span> <span class=o>*</span><span class=nx>Webhook</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=nf>GetWebhookById</span><span class=p>(</span><span class=nx>hookId</span> <span class=kt>int64</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>Webhook</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=nf>UpdateWebhook</span><span class=p>(</span><span class=nx>w</span> <span class=o>*</span><span class=nx>Webhook</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=nf>DeleteWebhook</span><span class=p>(</span><span class=nx>hookId</span> <span class=kt>int64</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>如果一个结构拥有以 <code>Has</code>、<code>Is</code>、<code>Can</code> 或 <code>Allow</code> 开头的函数或方法，则应将它们至于所有其它函数及方法之前；这些函数或方法以 <code>Has</code>、<code>Is</code>、<code>Can</code>、<code>Allow</code> 的顺序排序。</p></li><li><p>变量的定义要放置在相关函数之前：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=kd>var</span> <span class=nx>CmdDump</span> <span class=p>=</span> <span class=nx>cli</span><span class=p>.</span><span class=nx>Command</span><span class=p>{</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Name</span><span class=p>:</span>  <span class=s>&#34;dump&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 	<span class=o>...</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Action</span><span class=p>:</span> <span class=nx>runDump</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Flags</span><span class=p>:</span>  <span class=p>[]</span><span class=nx>cli</span><span class=p>.</span><span class=nx>Flag</span><span class=p>{},</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kd>func</span> <span class=nf>runDump</span><span class=p>(</span><span class=o>*</span><span class=nx>cli</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>{</span> <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>在初始化结构时，尽可能使用一一对应方式：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl> <span class=nf>AddHookTask</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>HookTask</span><span class=p>{</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Type</span><span class=p>:</span>        <span class=nx>HTT_WEBHOOK</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Url</span><span class=p>:</span>         <span class=nx>w</span><span class=p>.</span><span class=nx>Url</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 	<span class=nx>Payload</span><span class=p>:</span>     <span class=nx>p</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 	<span class=nx>ContentType</span><span class=p>:</span> <span class=nx>w</span><span class=p>.</span><span class=nx>ContentType</span><span class=p>,</span>
</span></span><span class=line><span class=cl> 	<span class=nx>IsSsl</span><span class=p>:</span>       <span class=nx>w</span><span class=p>.</span><span class=nx>IsSsl</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=测试用例>测试用例</h3><ul><li>单元测试都必须使用 <a class=link href=http://goconvey.co/ target=_blank rel=noopener>GoConvey</a> 编写，且辅助包覆盖率必须在 80% 以上。</li></ul><h4 id=使用示例>使用示例</h4><ul><li>为辅助包书写使用示例的时，文件名均命名为 <code>example_test.go</code>。</li><li>测试用例的函数名称必须以 <code>Test_</code> 开头，例如：<code>Test_Logger</code>。</li><li>如果为方法书写测试用例，则需要以 <code>Text_&lt;Struct>_&lt;Method></code> 的形式命名，例如：<code>Test_Macaron_Run</code>。</li><li>或者用驼峰命名。</li></ul><hr><h2 id=更多go代码风格指南>更多go代码风格指南</h2><ol><li><a class=link href=https://golang.org/doc/effective_go.html target=_blank rel=noopener>Effective Go</a></li><li><a class=link href=https://go.dev/wiki/CommonMistakes target=_blank rel=noopener>Go Common Mistakes</a></li><li><a class=link href=https://go.dev/wiki/CodeReviewComments target=_blank rel=noopener>Go Code Review Comments</a></li><li><a class=link href=https://github.com/uber-go/guide target=_blank rel=noopener>The Uber Go Style Guide</a></li></ol><hr><h2 id=总结>总结</h2><p>本文简单介绍了在编写go程序时，应该遵循的一些风格、约定。尽管内容有很多，不过我们也不必着急，目前许多go的IDE都会帮我们检查这些规范。</p><hr><h2 id=参考>参考</h2><blockquote><ol><li>原作者：<a class=link href=https://github.com/unknwon/go-code-convention target=_blank rel=noopener>go-code-convention</a></li></ol></blockquote></section><footer class=article-footer><section class=article-tags><a href=/tags/go%E4%BB%A3%E7%A0%81%E7%BA%A6%E5%AE%9A/>Go代码约定</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/go-figure-introduction/><div class=article-details><h2 class=article-title>Go-figure Introduction</h2></div></a></article><article><a href=/p/batch-del-cf-dns-record/><div class=article-details><h2 class=article-title>Batch Del CF DNS Record</h2></div></a></article><article><a href=/p/template-introduction/><div class=article-details><h2 class=article-title>Template Introduction</h2></div></a></article><article><a href=/p/openapi-and-swagger-introduction/><div class=article-details><h2 class=article-title>Openapi And Swagger Introduction</h2></div></a></article><article><a href=/p/gin-introduction/><div class=article-details><h2 class=article-title>Gin Introduction</h2></div></a></article></div></div></aside><script src=//unpkg.com/@waline/client@v2/dist/waline.js></script><link href=//unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({comment:!0,copyright:!1,dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://unpkg.com/@waline/emojis@1.0.1/weibo"],lang:"zh-cn",locale:{admin:"👻Hi",placeholder:"🎉留下你的脚印..."},pageview:!0,reaction:!0,requiredMeta:["nick"],serverURL:"https://waline.nek.us.kg/"})</script><footer class=site-footer><section class=copyright>Copyright &copy;
2020 -
2024 <b><a href=https://github.com/arlettebrook target=_blank rel=noopener>@Arlettebrook</a></b></section><section class=powerby>博客内容遵循<b><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-hans target=_blank rel=noopener> 知识共享 署名-非商业性-相同方式共享4.0国际协议</a></b><br>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.25.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>