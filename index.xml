<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Arlettebrook's blog</title><link>https://arlettebrook.github.io/</link><description>Recent content on Arlettebrook's blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Arlettebrook</copyright><lastBuildDate>Fri, 02 Aug 2024 15:50:02 +0800</lastBuildDate><atom:link href="https://arlettebrook.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>Go-figure Introduction</title><link>https://arlettebrook.github.io/p/go-figure-introduction/</link><pubDate>Fri, 02 Aug 2024 15:50:02 +0800</pubDate><guid>https://arlettebrook.github.io/p/go-figure-introduction/</guid><description>&lt;hr>
&lt;h2 id="ä»‹ç»">
&lt;a href="#%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
ä»‹ç»
&lt;/h2>&lt;p>&lt;a class="link" href="https://github.com/common-nighthawk/go-figure" target="_blank" rel="noopener"
>go-figure&lt;/a>å¯ä»æ–‡æœ¬æ‰“å°å‡ºç²¾ç¾çš„ ASCII è‰ºæœ¯å›¾ã€‚å®ƒæ”¯æŒ&lt;a class="link" href="http://www.figlet.org/" target="_blank" rel="noopener"
>FIGlet&lt;/a>æ–‡ä»¶åŠå…¶å¤§éƒ¨åˆ†åŠŸèƒ½ã€‚&lt;/p>
&lt;p>è¿™ä¸ªåŒ…çš„çµæ„Ÿæ¥è‡ªäº Ruby gem &lt;a class="link" href="https://github.com/miketierney/artii" target="_blank" rel="noopener"
>artii&lt;/a>ï¼Œä½†æ˜¯æ˜¯ä»å¤´å¼€å§‹æ„å»ºï¼Œå¹¶ä¸”å…·æœ‰ä¸åŒçš„åŠŸèƒ½é›†ã€‚&lt;/p>
&lt;p>&lt;strong>å®ƒåœ¨goè¯­è¨€ä¸­é€šå¸¸ç”¨äºåœ¨ç»ˆç«¯ä¸­ç”Ÿæˆ ASCII è‰ºæœ¯å­—ã€‚è¯¥åº“æä¾›äº†å¤šç§å­—ä½“å’Œæ ·å¼ï¼Œè®©ç”¨æˆ·å¯ä»¥è½»æ¾åœ°åˆ›å»ºè§†è§‰ä¸Šå¸å¼•äººçš„æ–‡æœ¬è¾“å‡ºã€‚&lt;/strong>&lt;/p>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>é¦–å…ˆï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… &lt;code>go-figure&lt;/code> åŒ…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">go get -u github.com/common-nighthawk/go-figure
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>åŸºæœ¬ä½¿ç”¨&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/common-nighthawk/go-figure&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">myFigure&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello World&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">myFigure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ&lt;code>NewFigure&lt;/code> å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å›¾å½¢å¯¹è±¡ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ˜¾ç¤ºçš„æ–‡æœ¬ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ä½“åç§°ï¼ˆé»˜è®¤ä¸ºæ ‡å‡†å­—ä½“ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸¥æ ¼æ¨¡å¼å¼€å…³ï¼ˆtrueï¼šéASCIIå­—ç¬¦æŠ¥é”™ï¼Œåä¹‹ç”¨?æ›¿ä»£ï¼‰ã€‚&lt;code>Print&lt;/code> æ–¹æ³•å°†å›¾å½¢æ‰“å°åˆ°æ§åˆ¶å°ã€‚&lt;/p>
&lt;p>è¿è¡Œä¸Šé¢ä»£ç è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> _ _ _ _ _ _
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> ___ __ __ ___ _ __ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> __&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> / _ &lt;span class="se">\ &lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> / _ &lt;span class="se">\ &lt;/span> &lt;span class="se">\ \ &lt;/span>/&lt;span class="se">\ &lt;/span>/ / / _ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>__&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> / _&lt;span class="sb">`&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span> _ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> __/ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="se">\ &lt;/span>V V / &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__/ &lt;span class="se">\_&lt;/span>/&lt;span class="se">\_&lt;/span>/ &lt;span class="se">\_&lt;/span>__/ &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>_,_&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="åˆ›å»ºfigureå¯¹è±¡">
&lt;a href="#%e5%88%9b%e5%bb%bafigure%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
åˆ›å»º&lt;code>figure&lt;/code>å¯¹è±¡
&lt;/h2>&lt;p>æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥åˆ›å»ºå›¾å½¢å¯¹è±¡ã€‚å®ƒä»¬æ˜¯ï¼š &lt;code>func NewFigure&lt;/code>ã€ &lt;code>func NewColorFigure&lt;/code>å’Œ &lt;code>func NewFigureWithFont&lt;/code>ã€‚&lt;/p>
&lt;p>æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æ¥å—ä»¥ä¸‹å‚æ•°ï¼šæ–‡æœ¬ã€å­—ä½“å’Œä¸¥æ ¼æ¨¡å¼ã€‚â€œcolorâ€æ„é€ å‡½æ•°æ¥å—é¢œè‰²ä½œä¸ºé™„åŠ å‚æ•°ã€‚â€œwith fontâ€ä»¥ä¸åŒæ–¹å¼æŒ‡å®šå­—ä½“ã€‚å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">phrase&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fontName&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strict&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">figure&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewColorFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">phrase&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fontName&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">color&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strict&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">figure&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewFigureWithFont&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">phrase&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">reader&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Reader&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strict&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">figure&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>&lt;code>NewFigure&lt;/code>åªéœ€è¦å­—ä½“çš„åç§°ï¼Œå¹¶ä½¿ç”¨å­˜å‚¨åœ¨ bindata æ­¤åŒ…ä¸­é™„å¸¦çš„å­—ä½“æ–‡ä»¶ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¦‚æœä¼ é€’äº†å­—ä½“åç§°çš„ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™æä¾›é»˜è®¤å€¼ï¼ˆæ ‡å‡†å­—ä½“ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯æœ‰æ•ˆçš„:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">myFigure&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Foo Bar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// go-figure/font.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// const defaultFont = &amp;#34;standard&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">myFigure&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Foo Bar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;standard&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è¯·æ³¨æ„å­—ä½“åç§°åŒºåˆ†å¤§å°å†™ã€‚&lt;/p>
&lt;details>
&lt;summary>é»˜è®¤æ”¯æŒçš„å­—ä½“å¦‚ä¸‹ï¼ˆç”¨ç©ºæ ¼åˆ†éš”ï¼‰ï¼š&lt;/summary>
&lt;p align='center' style="color:green">
3-d
3x5
5lineoblique
acrobatic
alligator
alligator2
alphabet
avatar
banner
banner3-D
banner3
banner4
barbwire
basic
bell
big
bigchief
binary
block
bubble
bulbhead
calgphy2
caligraphy
catwalk
chunky
coinstak
colossal
computer
contessa
contrast
cosmic
cosmike
cricket
cursive
cyberlarge
cybermedium
cybersmall
diamond
digital
doh
doom
dotmatrix
drpepper
eftichess
eftifont
eftipiti
eftirobot
eftitalic
eftiwall
eftiwater
epic
fender
fourtops
fuzzy
goofy
gothic
graffiti
hollywood
invita
isometric1
isometric2
isometric3
isometric4
italic
ivrit
jazmine
jerusalem
katakana
kban
larry3d
lcd
lean
letters
linux
lockergnome
madrid
marquee
maxfour
mike
mini
mirror
mnemonic
morse
moscow
nancyj-fancy
nancyj-underlined
nancyj
nipples
ntgreek
o8
ogre
pawp
peaks
pebbles
pepper
poison
puffy
pyramid
rectangles
relief
relief2
rev
roman
rot13
rounded
rowancap
rozzo
runic
runyc
sblood
script
serifcap
shadow
short
slant
slide
slscript
small
smisome1
smkeyboard
smscript
smshadow
smslant
smtengwar
speed
stampatello
standard
starwars
stellar
stop
straight
tanja
tengwar
term
thick
thin
threepoint
ticks
ticksslant
tinker-toy
tombstone
trek
tsalagi
twopoint
univers
usaflag
wavy
weird
&lt;/p>
&lt;!-- DO NOT EDIT THIS SECTION -->
&lt;!-- START_SECTION:data-section -->
&lt;/details>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>NewFigureWithFont&lt;/code>ï¼Œç›´æ¥æ¥å—å­—ä½“æ–‡ä»¶çš„&lt;code>reader&lt;/code>ã€‚è¿™å…è®¸æ‚¨ BYOFï¼ˆè‡ªå¸¦å­—ä½“ï¼‰ã€‚æä¾› flf çš„&lt;code>io.Reader&lt;/code>å³å¯ã€‚&lt;/p>
&lt;ul>
&lt;li>å­—ä½“æ–‡ä»¶å¯ä»¥åœ¨&lt;a class="link" href="https://github.com/common-nighthawk/go-figure/tree/master/fonts" target="_blank" rel="noopener"
>å­—ä½“æ–‡ä»¶å¤¹&lt;/a> å’Œ&lt;a class="link" href="http://www.figlet.org/fontdb.cgi" target="_blank" rel="noopener"
>figlet.org&lt;/a>ä¸Šæ‰¾åˆ°ã€‚&lt;/li>
&lt;li>ä¸€èˆ¬ä¸ç”¨ï¼Œé»˜è®¤æä¾›çš„å­—ä½“å¤Ÿç”¨äº†ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>NewColorFigure&lt;/code>å¯ä»¥åˆ¶ä½œè‰²å½©é²œè‰³çš„å›¾å½¢ï¼ç›®å‰æ”¯æŒçš„é¢œè‰²æœ‰ï¼šè“è‰²blueï¼Œé’è‰²cyanï¼Œç°è‰²grayï¼Œç»¿è‰²greenï¼Œç´«è‰²purpleï¼Œçº¢è‰²redï¼Œç™½è‰²whiteï¼Œé»„è‰²yellowã€‚&lt;/p>
&lt;ul>
&lt;li>ç¤ºä¾‹ï¼š&lt;code>figure.NewColorFigure(&amp;quot;Hello World&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;cyan&amp;quot;, true).Print()&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ä¸¥æ ¼æ¨¡å¼è§„å®šå¦‚ä½•å¤„ç†æ ‡å‡† ASCII ä»¥å¤–çš„å­—ç¬¦ã€‚è®¾ç½®ä¸º true æ—¶ï¼Œé ASCII å­—ç¬¦ï¼ˆå­—ç¬¦ä»£ç  32-127 ä¹‹å¤–ï¼‰å°†å¯¼è‡´ç¨‹åºå´©æºƒã€‚è®¾ç½®ä¸º false æ—¶ï¼Œè¿™äº›å­—ç¬¦å°†è¢«æ›¿æ¢ä¸ºé—®å·ï¼ˆâ€œï¼Ÿâ€ï¼‰ã€‚æ¯ä¸ªç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;code>figure.NewFigure(&amp;quot;Foo ğŸ‘ Bar&amp;quot;, &amp;quot;alphabet&amp;quot;, true).Print()&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">2016/12/01 19:35:38 invalid input.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>figure.NewFigure(&amp;quot;Foo ğŸ‘ Bar&amp;quot;, &amp;quot;alphabet&amp;quot;, false).Print()&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl"> _____ ___ ____
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span> ___&lt;span class="p">|&lt;/span> ___ ___ &lt;span class="p">|&lt;/span>__ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> __ &lt;span class="o">)&lt;/span> __ _ _ __
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ / _ &lt;span class="se">\ &lt;/span> / _ &lt;span class="se">\ &lt;/span> / / &lt;span class="p">|&lt;/span> _ &lt;span class="se">\ &lt;/span> / _&lt;span class="sb">`&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>__&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span> _&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__/ &lt;span class="se">\_&lt;/span>__/ &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span>____/ &lt;span class="se">\_&lt;/span>_,_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="æ‰“å°figureå¯¹è±¡">
&lt;a href="#%e6%89%93%e5%8d%b0figure%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
æ‰“å°&lt;code>figure&lt;/code>å¯¹è±¡
&lt;/h2>&lt;p>è°ƒç”¨&lt;code>figure&lt;/code>å¯¹è±¡çš„&lt;code>Print&lt;/code>æ–¹æ³•å³å¯å°†å¯¹åº”è‰ºæœ¯å­—è¾“å‡ºçš„ç»ˆç«¯ã€‚æ²¡æœ‰è¿”å›å€¼ã€‚&lt;code>myFigure.Print()&lt;/code>&lt;/p>
&lt;h3 id="é»˜è®¤å­—ä½“æ¨è">
&lt;a href="#%e9%bb%98%e8%ae%a4%e5%ad%97%e4%bd%93%e6%8e%a8%e8%8d%90" class="header-anchor">#&lt;/a>
é»˜è®¤å­—ä½“æ¨è
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;code>figure.NewFigure(&amp;quot;Arlettebrook&amp;quot;, &amp;quot;standard&amp;quot;, true).Print()&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl"> _ _ _ _ _ _
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> / &lt;span class="se">\ &lt;/span> _ __ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>__ _ __ ___ ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> __
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> / _ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="s1">&amp;#39;__| | | / _ \ | __| | __| / _ \ | &amp;#39;&lt;/span>_ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>__&lt;span class="p">|&lt;/span> / _ &lt;span class="se">\ &lt;/span> / _ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>/ /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> / ___ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> __/ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ &lt;span class="p">|&lt;/span> __/ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &amp;lt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /_/ &lt;span class="se">\_\ &lt;/span>&lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_.__/ &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__/ &lt;span class="se">\_&lt;/span>__/ &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span>&lt;span class="se">\_\
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>figure.NewFigure(&amp;quot;Arlettebrook&amp;quot;, &amp;quot;doom&amp;quot;, true).Print()&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl"> ___ _ _ _ _ _
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> / _ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ /_&lt;span class="se">\ \ &lt;/span>_ __ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>__ _ __ ___ ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> __
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> _ &lt;span class="o">||&lt;/span> &lt;span class="s1">&amp;#39;__|| | / _ \| __|| __| / _ \| &amp;#39;&lt;/span>_ &lt;span class="se">\ &lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>__&lt;span class="p">|&lt;/span> / _ &lt;span class="se">\ &lt;/span> / _ &lt;span class="se">\ &lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>/ /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">||&lt;/span> __/&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ &lt;span class="p">|&lt;/span> __/&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="o">||&lt;/span> &amp;lt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">\_&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_/&lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__&lt;span class="o">||&lt;/span>_.__/ &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__/ &lt;span class="se">\_&lt;/span>__/ &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span>&lt;span class="se">\_\
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>figure.NewFigure(&amp;quot;Arlettebrook&amp;quot;, &amp;quot;puffy&amp;quot;, true).Print()&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_____&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nf">_&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="p">)&lt;/span>&lt;span class="nf">_&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="p">)&lt;/span>&lt;span class="nf">_&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">__&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">__&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">,&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)|&lt;/span> &lt;span class="p">,&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">__&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">__&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">|(&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">__&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">__&lt;/span>&lt;span class="s">`\| | | | /&amp;#39;__`&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="s">`\ ( &amp;#39;__) /&amp;#39;_`&lt;/span>&lt;span class="err">\&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="s">`\ | , &amp;lt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">| | | || | | | ( ___/| |_ | |_ ( ___/| |_) )| | ( (_) )( (_) )| |\`&lt;/span>\
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">___&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="s">`\____)`&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">__&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="s">`\__)`&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">____&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">__&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="s">`\___/&amp;#39;`&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">___&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>figure.NewFigure(&amp;quot;Arlettebrook&amp;quot;, &amp;quot;big&amp;quot;, true).Print()&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl"> _ _ _ _ _
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /&lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> / &lt;span class="se">\ &lt;/span> _ __ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>__ _ __ ___ ___ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> __
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> / /&lt;span class="se">\ \ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="s1">&amp;#39;__| | | / _ \ | __| | __| / _ \ | &amp;#39;&lt;/span>_ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>__&lt;span class="p">|&lt;/span> / _ &lt;span class="se">\ &lt;/span> / _ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>/ /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> / ____ &lt;span class="se">\ &lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> __/ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_ &lt;span class="p">|&lt;/span> __/ &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &amp;lt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /_/ &lt;span class="se">\_\ &lt;/span>&lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_.__/ &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="se">\_&lt;/span>__/ &lt;span class="se">\_&lt;/span>__/ &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span>&lt;span class="se">\_\
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>figure.NewFigure(&amp;quot;Arlettebrook&amp;quot;, &amp;quot;rounded&amp;quot;, true).Print()&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_______&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nf">_&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nx">_______&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_______&lt;/span> &lt;span class="nx">____&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">_____&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="nx">_____&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">__&lt;/span> &lt;span class="nx">____&lt;/span> &lt;span class="nx">___&lt;/span> &lt;span class="nx">___&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">_&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="nx">___&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nx">___&lt;/span>&lt;span class="p">)|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">___&lt;/span> &lt;span class="p">|(&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">)|&lt;/span> &lt;span class="nx">___&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="err">\&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nx">___&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="err">\&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="err">\&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">____&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">____&lt;/span>&lt;span class="o">||&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">)|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nf">_&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">||&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)|&lt;/span>&lt;span class="nx">_____&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="nx">__&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="nx">__&lt;/span>&lt;span class="p">)|&lt;/span>&lt;span class="nx">_____&lt;/span>&lt;span class="p">)|&lt;/span>&lt;span class="nx">____&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="nx">___&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="nx">___&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ›´å¤šæ ·å¼&lt;a class="link" href="http://www.figlet.org/fontdb.cgi" target="_blank" rel="noopener"
>å‚è€ƒ&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="é«˜çº§ç”¨æ³•">
&lt;a href="#%e9%ab%98%e7%ba%a7%e7%94%a8%e6%b3%95" class="header-anchor">#&lt;/a>
é«˜çº§ç”¨æ³•
&lt;/h2>&lt;h3 id="åŠ¨ç”»æ•ˆæœ">
&lt;a href="#%e5%8a%a8%e7%94%bb%e6%95%88%e6%9e%9c" class="header-anchor">#&lt;/a>
åŠ¨ç”»æ•ˆæœ
&lt;/h3>&lt;p>&lt;code>go-figure&lt;/code> è¿˜æ”¯æŒç®€å•çš„åŠ¨ç”»æ•ˆæœï¼Œå¦‚é—ªçƒã€æ»šåŠ¨å’Œè·³èˆã€‚&lt;/p>
&lt;h4 id="é—ªçƒ">
&lt;a href="#%e9%97%aa%e7%83%81" class="header-anchor">#&lt;/a>
é—ªçƒ
&lt;/h4>&lt;p>é—ªçƒç”¨åˆ°çš„æ–¹æ³•æ˜¯ï¼š&lt;code>func (fig figure) Blink(duration, timeOn, timeOff int)&lt;/code>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>&lt;code>duration&lt;/code>&lt;/strong>: åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚æ•´ä¸ªé—ªçƒè¿‡ç¨‹å°†æŒç»­è¿™ä¹ˆé•¿æ—¶é—´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>timeOn&lt;/code>&lt;/strong>: æ–‡å­—äº®èµ·çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œæ–‡å­—å°†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>timeOff&lt;/code>&lt;/strong>: æ–‡å­—ç†„ç­çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œæ–‡å­—å°†ä»å±å¹•ä¸Šæ¶ˆå¤±ã€‚å¦‚æœ &lt;code>timeOff&lt;/code> è®¾ç½®ä¸º -1ï¼Œé—ªçƒçš„é—´éš”å°†ä¸ &lt;code>timeOn&lt;/code> ç›¸åŒï¼Œä»è€Œå®ç°å‡åŒ€çš„é—ªçƒæ•ˆæœã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewColorFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello World&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;cyan&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Blink&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é—ªçƒã€æ»šåŠ¨å’Œè·³èˆå®Œæˆä¹‹åï¼Œä¸ä¼šæ‰“å°è‰ºæœ¯å­—ï¼Œå†æ¬¡è°ƒç”¨&lt;code>Print&lt;/code>æ–¹æ³•æ‰“å°ï¼Œæ•ˆæœæ›´å¥½ã€‚&lt;/p>
&lt;h4 id="æ»šåŠ¨">
&lt;a href="#%e6%bb%9a%e5%8a%a8" class="header-anchor">#&lt;/a>
æ»šåŠ¨
&lt;/h4>&lt;p>æ»šåŠ¨ç”¨åˆ°çš„æ–¹æ³•æ˜¯ï¼š&lt;code>func (fig figure) Scroll(duration, stillness int, direction string) &lt;/code>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>&lt;code>duration&lt;/code>&lt;/strong>: åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚æ•´ä¸ªæ»šåŠ¨è¿‡ç¨‹å°†æŒç»­è¿™ä¹ˆé•¿æ—¶é—´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>stillness&lt;/code>&lt;/strong>: æ–‡å­—åœ¨ç§»åŠ¨å‰é™æ­¢çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚æ—¶é—´è¶ŠçŸ­ï¼Œæ»šåŠ¨é€Ÿåº¦è¶Šå¿«ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>direction&lt;/code>&lt;/strong>: æ»šåŠ¨çš„æ–¹å‘ï¼Œå¯ä»¥æ˜¯ &amp;ldquo;left&amp;rdquo; æˆ– &amp;ldquo;right&amp;rdquo;ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ã€‚å¦‚æœæä¾›çš„æ–¹å‘æ— æ•ˆï¼Œå°†é»˜è®¤ä¸º &amp;ldquo;left&amp;rdquo;ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewColorFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello World&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;cyan&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Scroll&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;left&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="è·³èˆ">
&lt;a href="#%e8%b7%b3%e8%88%9e" class="header-anchor">#&lt;/a>
è·³èˆ
&lt;/h4>&lt;p>è·³èˆç”¨åˆ°çš„æ–¹æ³•æ˜¯ï¼š&lt;code>func (fig figure) Dance(duration, freeze int)&lt;/code>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ•ˆæœä¸æ˜¯ç‰¹åˆ«å¥½ã€‚ä¸æ¨èä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>duration&lt;/code>&lt;/strong>: åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚æ•´ä¸ªè·³èˆè¿‡ç¨‹å°†æŒç»­è¿™ä¹ˆé•¿æ—¶é—´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>freeze&lt;/code>&lt;/strong>: æ¯æ¬¡è·³èˆå§¿åŠ¿ä¹‹é—´çš„åœé¡¿æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚æ—¶é—´è¶ŠçŸ­ï¼ŒåŠ¨ä½œå˜åŒ–è¶Šå¿«ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewColorFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello World&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;cyan&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Dance&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">300&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è¾“å‡ºåˆ°å…¶ä»–åœ°æ–¹">
&lt;a href="#%e8%be%93%e5%87%ba%e5%88%b0%e5%85%b6%e4%bb%96%e5%9c%b0%e6%96%b9" class="header-anchor">#&lt;/a>
è¾“å‡ºåˆ°å…¶ä»–åœ°æ–¹
&lt;/h3>&lt;p>å¦‚æœæƒ³å°†è¾“å‡ºå†™å…¥æ–‡ä»¶æˆ–å…¶ä»– &lt;code>io.Writer&lt;/code>ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>Write&lt;/code> æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fig&lt;/span> &lt;span class="nx">figure&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š&lt;code>w&lt;/code>æ˜¯ä¸€ä¸ªå®ç° io.Writer æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•çš„å€¼ã€‚ &lt;code>fig&lt;/code>æ˜¯å°†è¦å†™å…¥çš„å›¾å½¢ã€‚æ²¡æœ‰é¢œè‰²ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å†™å…¥æ–‡ä»¶:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewColorFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello world&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;cyan&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">colorFigure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OpenFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./demo.txt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">O_WRONLY&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">O_CREATE&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">O_APPEND&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mo">0666&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panicf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;OpenFile error: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">File&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panicf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Close file error: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}(&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">colorFigure&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å“åº”è¯·æ±‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/hi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newFigure&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewFigure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Arlettebrook&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">figure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">newFigure&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;HTTP serve Start running...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ListenAndServe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;localhost:8080&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panicf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Start HTTP serve error: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯åŠ¨ç¨‹åºä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® &lt;a class="link" href="http://localhost:8080/hi" target="_blank" rel="noopener"
>http://localhost:8080/hi&lt;/a> å³å¯è¾“å‡ºæŒ‡å®šè‰ºæœ¯å­—ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/common-nighthawk/go-figure" target="_blank" rel="noopener"
>go-figureå®˜æ–¹ä»“åº“&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote></description></item><item><title>Batch Del CF DNS Record</title><link>https://arlettebrook.github.io/p/batch-del-cf-dns-record/</link><pubDate>Mon, 22 Jul 2024 23:55:50 +0800</pubDate><guid>https://arlettebrook.github.io/p/batch-del-cf-dns-record/</guid><description>&lt;h1 id="batch-del-cf-dns-record">
&lt;a href="#batch-del-cf-dns-record" class="header-anchor">#&lt;/a>
batch-del-cf-dns-record
&lt;/h1>&lt;blockquote>
&lt;p>Batch delete cloudflare DNS recordsã€‚æ‰¹é‡åˆ é™¤cloudflare dnsè®°å½•ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="ä»‹ç»">
&lt;a href="#%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
ä»‹ç»
&lt;/h2>&lt;p>å½“æˆ‘ä»¬å°†åŸŸåè§£æåˆ°&lt;em>Cloudflare&lt;/em>æ—¶ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œç³»ç»Ÿå¯èƒ½ä¼šè‡ªåŠ¨å¯¼å…¥å‡ ç™¾æ¡ä¸é‚£ä¹ˆæ­£ç¡®çš„è§£æ&lt;em>è®°å½•&lt;/em>ï¼Œè®©äººæŠ“ç‹‚ã€‚&lt;/p>
&lt;p>è¿™äº›&lt;em>è®°å½•&lt;/em>åœ¨ç•Œé¢ä¸­æ— æ³•å¿«é€Ÿ&lt;em>åˆ é™¤&lt;/em>ï¼Œä¹Ÿä¸æ”¯æŒè·³è¿‡å¯¼å…¥ &amp;hellip;&lt;/p>
&lt;p>æ‰‹åŠ¨åˆ é™¤åˆè¿‡äºéº»çƒ¦ã€‚&lt;/p>
&lt;p>ç½‘ä¸Šçœ‹äº†ä¸€ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;em>Cloudflare&lt;/em> çš„APIåŠŸèƒ½æ¥å®ç°&lt;em>æ‰¹é‡åˆ é™¤&lt;/em>è§£æã€‚å› æ­¤å†™äº†ä¸€ä¸ªGoç‰ˆæœ¬çš„è„šæœ¬ã€‚ä»…ä¾›å‚è€ƒã€‚&lt;/p>
&lt;p>åœ°å€æ˜¯: &lt;a class="link" href="https://github.com/arlettebrook/batch-del-cf-dns-record" target="_blank" rel="noopener"
>https://github.com/arlettebrook/batch-del-cf-dns-record&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="å¦‚ä½•ä½¿ç”¨">
&lt;a href="#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¦‚ä½•ä½¿ç”¨
&lt;/h2>&lt;p>&lt;strong>å¸®åŠ©ä¿¡æ¯&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ ./batch-del-cf-dns-record.exe --help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage of Batch-del-cf-dns-record:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -l, --log_level string Log level &lt;span class="o">(&lt;/span>default &lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -a, --api_token string Cloudflare API Token
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -z, --zone_id string Cloudflare Zone ID
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pflag: &lt;span class="nb">help&lt;/span> requested
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å‰ææ¡ä»¶">
&lt;a href="#%e5%89%8d%e6%8f%90%e6%9d%a1%e4%bb%b6" class="header-anchor">#&lt;/a>
å‰ææ¡ä»¶
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>ç™»å½•cloudflareè´¦å·&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿›å…¥è¦åˆ é™¤DNSè®°å½•åŸŸåçš„é¦–é¡µ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ»‘åŠ¨åˆ°åº•éƒ¨å³ä¸‹è§’ï¼Œæœ‰ä¸€ä¸ªæˆ‘ä»¬éœ€è¦çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåŒºåŸŸID(&lt;code>zone_id&lt;/code>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœ€åä¸€ä¸ªå‚æ•°ï¼š&lt;code>api_token&lt;/code>&lt;/p>
&lt;ul>
&lt;li>ç‚¹å‡»ä¸‹é¢çš„&lt;a class="link" href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" rel="noopener"
>è·å–æ‚¨çš„APIä»¤ç‰Œ&lt;/a>ï¼Œåˆ›å»ºä»¤ç‰Œ&lt;/li>
&lt;li>åˆ›å»ºä¸€ä¸ªç¼–è¾‘åŒºåŸŸçš„DNSä»¤ç‰Œã€‚&lt;/li>
&lt;li>è¿™ä¸ªä»¤ç‰Œå°±æ˜¯&lt;code>api_token&lt;/code>&lt;/li>
&lt;li>ä½¿ç”¨å®Œæˆä¹‹åå¯ä»¥åˆ é™¤&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="æºç è¿è¡Œ">
&lt;a href="#%e6%ba%90%e7%a0%81%e8%bf%90%e8%a1%8c" class="header-anchor">#&lt;/a>
æºç è¿è¡Œ
&lt;/h3>&lt;p>&lt;strong>å‰ææ¡ä»¶&lt;/strong>ï¼šéœ€è¦Goç¯å¢ƒ&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">git clone https://github.com/arlettebrook/batch-del-cf-dns-record.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è¿›å…¥é¡¹ç›®ï¼Œå®‰è£…ä¾èµ–ï¼Œè¿è¡Œ&lt;code>main.go&lt;/code>å¹¶æŒ‡å®šå‚æ•°å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> batch-del-cf-dns-record
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go mod tidy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go run main.go -a api_token -z zone_id
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="äºŒè¿›åˆ¶æ–‡ä»¶è¿è¡Œæ¨è">
&lt;a href="#%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e8%bf%90%e8%a1%8c%e6%8e%a8%e8%8d%90" class="header-anchor">#&lt;/a>
äºŒè¿›åˆ¶æ–‡ä»¶è¿è¡Œ[æ¨è]
&lt;/h3>&lt;p>&lt;strong>æ³¨æ„&lt;/strong>ï¼šåªæä¾›äº†Windowsç‰ˆæœ¬çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå…¶ä»–ç³»ç»Ÿè‡ªè¡Œç¼–è¯‘ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å‰å¾€&lt;a class="link" href="https://github.com/arlettebrook/batch-del-cf-dns-record/releases/latest" target="_blank" rel="noopener"
>å‘å¸ƒé¡µé¢&lt;/a>ä¸‹è½½ï¼Œæœ€æ–°Windowsç‰ˆæœ¬ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨&lt;strong>Windowsç»ˆç«¯&lt;/strong>ä¸­è¿è¡Œ&lt;code>batch-del-cf-dns-record.exe&lt;/code>å¹¶æŒ‡å®šå‚æ•°å³å¯:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">batch-del-cf-dns-record.exe -a api_token -z zone_id
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¦‚æœæ˜¯bashä¹‹ç±»çš„ç»ˆç«¯ï¼Œè¿è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">./batch-del-cf-dns-record.exe -a api_token -z zone_id
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="æ³¨æ„äº‹é¡¹">
&lt;a href="#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" class="header-anchor">#&lt;/a>
æ³¨æ„äº‹é¡¹
&lt;/h2>&lt;ul>
&lt;li>å¦‚æœæ˜¯TLSæ¡æ‰‹è¶…æ—¶ï¼Œé‡æ–°è¿è¡Œå³å¯ã€‚&lt;/li>
&lt;/ul></description></item><item><title>Vim Introduction</title><link>https://arlettebrook.github.io/p/vim-introduction/</link><pubDate>Thu, 30 May 2024 21:52:12 +0800</pubDate><guid>https://arlettebrook.github.io/p/vim-introduction/</guid><description>&lt;hr>
&lt;h2 id="å®‰è£…vim">
&lt;a href="#%e5%ae%89%e8%a3%85vim" class="header-anchor">#&lt;/a>
å®‰è£…vim
&lt;/h2>&lt;p>&lt;a class="link" href="https://github.com/vim/vim" target="_blank" rel="noopener"
>Vim&lt;/a> ï¼ˆ&lt;a class="link" href="https://www.vim.org/" target="_blank" rel="noopener"
>å®˜ç½‘&lt;/a>ï¼‰ æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šå®‰è£…å’Œä½¿ç”¨ã€‚ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ä¸åŒç³»ç»Ÿä¸Šå®‰è£… Vim çš„æ–¹æ³•ï¼š&lt;/p>
&lt;h3 id="åœ¨-linux-ä¸Šå®‰è£…-vim">
&lt;a href="#%e5%9c%a8-linux-%e4%b8%8a%e5%ae%89%e8%a3%85-vim" class="header-anchor">#&lt;/a>
åœ¨ Linux ä¸Šå®‰è£… Vim
&lt;/h3>&lt;p>å¤§å¤šæ•° Linux å‘è¡Œç‰ˆéƒ½åœ¨å…¶è½¯ä»¶åŒ…ç®¡ç†å™¨ä¸­åŒ…å« Vimã€‚å¯ä»¥ä½¿ç”¨åŒ…ç®¡ç†å™¨æ¥å®‰è£…å®ƒã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Debian/Ubuntu ç³»åˆ—&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install vim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>CentOS&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo yum install vim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="åœ¨-macos-ä¸Šå®‰è£…-vim">
&lt;a href="#%e5%9c%a8-macos-%e4%b8%8a%e5%ae%89%e8%a3%85-vim" class="header-anchor">#&lt;/a>
åœ¨ macOS ä¸Šå®‰è£… Vim
&lt;/h3>&lt;p>macOS é€šå¸¸é¢„è£…äº† Vimï¼Œä½†å¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚ä½ å¯ä»¥ä½¿ç”¨ Homebrew æ¥å®‰è£…æˆ–æ›´æ–° Vimã€‚&lt;/p>
&lt;p>ä½¿ç”¨ Homebrew å®‰è£…&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç¡®ä¿ Homebrew å·²å®‰è£…ã€‚ä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£… Homebrewï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/bin/bash -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä½¿ç”¨ Homebrew å®‰è£… Vimï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">brew update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">brew install vim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="åœ¨-windows-ä¸Šå®‰è£…-vim">
&lt;a href="#%e5%9c%a8-windows-%e4%b8%8a%e5%ae%89%e8%a3%85-vim" class="header-anchor">#&lt;/a>
&lt;strong>åœ¨ Windows ä¸Šå®‰è£… Vim&lt;/strong>
&lt;/h3>&lt;p>åœ¨ Windows ä¸Šï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•å®‰è£… Vimï¼š&lt;/p>
&lt;p>&lt;strong>ç›´æ¥ä¸‹è½½å®‰è£…ç¨‹åº&lt;/strong>:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>è®¿é—® &lt;a class="link" href="https://www.vim.org/download.php" target="_blank" rel="noopener"
>Vim å®˜æ–¹ä¸‹è½½é¡µé¢&lt;/a>ã€‚æ¨è&lt;a class="link" href="https://github.com/vim/vim-win32-installer/releases/latest" target="_blank" rel="noopener"
>vim-win32-installer&lt;/a>ï¼ˆä¼šåŠæ—¶æä¾›æœ€æ–°ç¼–è¯‘ç‰ˆï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ &amp;ldquo;PC: MS-DOS and MS-Windows&amp;rdquo; éƒ¨åˆ†ï¼Œä¸‹è½½é€‚ç”¨äº Windows çš„å®‰è£…ç¨‹åºï¼ˆé€šå¸¸æ˜¯ &lt;code>gvim&lt;/code> å®‰è£…ç¨‹åºï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿è¡Œä¸‹è½½çš„å®‰è£…ç¨‹åºï¼ŒæŒ‰ç…§æç¤ºå®Œæˆå®‰è£…ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰è£…å®Œæˆä¹‹åå»ºè®®æ·»åŠ å¦‚ä¸‹ä¸¤ä¸ªç¯å¢ƒå˜é‡ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Pathç¯å¢ƒå˜é‡ï¼šæ·»åŠ çš„å€¼ä¸ºvimå®‰è£…è·¯å¾„é‡Œé¢çš„å…·ä½“ç‰ˆæœ¬ã€‚å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>D:\Vim\vim91&lt;/code> or &lt;code>%VIM%\vim91&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240531122127080.png"
width="930"
height="375"
srcset="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240531122127080_hu05a0e34d1eba5ad560312f13394693eb_30274_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240531122127080_hu05a0e34d1eba5ad560312f13394693eb_30274_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240531122127080"
class="gallery-image"
data-flex-grow="248"
data-flex-basis="595px"
>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ç¯å¢ƒå˜é‡VIMï¼šå€¼ä¸ºvimçš„å®‰è£…è·¯å¾„ã€‚å¦‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240531122015284.png"
width="930"
height="375"
srcset="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240531122015284_hua4ef87cb928a3886ca7ee8a8cfe7fb50_18966_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240531122015284_hua4ef87cb928a3886ca7ee8a8cfe7fb50_18966_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240531122015284"
class="gallery-image"
data-flex-grow="248"
data-flex-basis="595px"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>Windowsç‰ˆæœ¬çš„vimæä¾›äº†å¸è½½ç¨‹åºã€‚åœ¨ç¨‹åºå’ŒåŠŸèƒ½ä¸­æ‰¾åˆ°å³å¯å¸è½½ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Windowså®‰è£…ç»“æŸåï¼Œä½ ä¼šå‘ç°å¼€å§‹èœå•ä¸­æœ‰å¥½å¤šVimï¼Œè€Œä¸”åå­—éƒ½ä¸ä¸€æ ·ã€‚&lt;/p>
&lt;p>ä»–ä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>æœ‰gå’Œæ²¡æœ‰g
gVim æ˜¯åœ¨windowsä¸‹çš„Guiå›¾å½¢ç”¨æˆ·ç•Œé¢çš„çš„ vim (GUI Vim)ï¼Œæ”¯æŒwindowsçš„ä¸€äº›å¿«æ·æ–¹å¼ï¼Œæ”¯æŒé¼ æ ‡æ“ä½œ
vim æ˜¯åœ¨windowsä¸‹çš„ç±»ä¼¼linux vi ç¼–è¾‘çš„ç•Œé¢ï¼Œåªèƒ½ç”¨é”®ç›˜æ“ä½œã€‚
vimçš„æ“ä½œæŒ‡ä»¤åŒæ—¶é€‚ç”¨äºgVim&lt;/li>
&lt;li>Vim, Vim Diff, Vim Easy, Vim Read-only
Diff æ˜¯ç”¨æ¥å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶å†…å®¹ç”¨çš„ï¼Œç›´æ¥æ‰“å¼€æŒºæ²¡ç”¨çš„ï¼Œä¸è¿‡ç›´æ¥æ‹–2ä¸ªæ–‡ä»¶åˆ°å¿«æ·æ–¹å¼ä¸Šå€’æ˜¯å¯è¡Œï¼›
Easyå¯åŠ¨çš„æ—¶å€™æ˜¯insertæ¨¡å¼ï¼Œé€‚åˆæ™®é€šwindowsç”¨æˆ·çš„ä¹ æƒ¯ï¼›
Read-Onlyçš„ç”¨é€”ï¼šæ¯”å¦‚ç”¨read-onlyæ‰“å¼€å·²ç»ç”¨vimæ‰“å¼€è¿‡çš„æ–‡ä»¶ï¼Œå°±ä¸ä¼šæç¤ºè®©äººçƒ¦èºçš„.swpæ–‡ä»¶å­˜åœ¨çš„é—®é¢˜ï¼›&lt;/li>
&lt;/ol>
&lt;h3 id="é€šç”¨æ–¹æ³•ç¼–è¯‘å®‰è£…-vim">
&lt;a href="#%e9%80%9a%e7%94%a8%e6%96%b9%e6%b3%95%e7%bc%96%e8%af%91%e5%ae%89%e8%a3%85-vim" class="header-anchor">#&lt;/a>
é€šç”¨æ–¹æ³•ï¼šç¼–è¯‘å®‰è£… Vim
&lt;/h3>&lt;p>å¦‚æœä½ å¸Œæœ›å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Vim æˆ–è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹ï¼Œå¯ä»¥ä»æºä»£ç ç¼–è¯‘å®‰è£…ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å®‰è£…å¿…è¦çš„ä¾èµ–é¡¹ï¼ˆä»¥ Ubuntu ä¸ºä¾‹ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install git make ncurses-dev gcc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å…‹éš† Vim çš„æºä»£ç ä»“åº“ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/vim/vim.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> vim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>é…ç½®å¹¶ç¼–è¯‘ Vimï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">./configure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å®‰è£… Vimï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo make install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="åœ¨ideä¸­å®‰è£…vimæ’ä»¶">
&lt;a href="#%e5%9c%a8ide%e4%b8%ad%e5%ae%89%e8%a3%85vim%e6%8f%92%e4%bb%b6" class="header-anchor">#&lt;/a>
åœ¨IDEä¸­å®‰è£…vimæ’ä»¶
&lt;/h3>&lt;p>è®¸å¤šç°ä»£é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰æä¾›äº† Vim æ¨¡æ‹Ÿæ’ä»¶ã€‚æˆ‘ä»¬åœ¨äº«å— IDE å¼ºå¤§åŠŸèƒ½çš„åŒæ—¶ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨Vimçš„ç¼–è¾‘é£æ ¼ã€‚&lt;/p>
&lt;p>è¦åœ¨IDEä¸­å®‰è£…vimæ’ä»¶ï¼Œåªéœ€è¦åœ¨å¯¹åº”IDEçš„æ’ä»¶å¸‚åœºæœç´¢å®‰è£…å³å¯ï¼Œæˆ‘å¸¸ç”¨çš„ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>JetBrainsç³»åˆ—&lt;/strong>ï¼šIdeaVim
&lt;ul>
&lt;li>å¯ä»¥é…ç½® &lt;code>~/.ideavimrc&lt;/code> æ–‡ä»¶æ¥ä¸ªæ€§åŒ–è®¾ç½®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Visual Studio Code (VS Code)&lt;/strong>ï¼šVim
&lt;ul>
&lt;li>å¯é€šè¿‡ &lt;code>settings.json&lt;/code> æ–‡ä»¶è¿›è¡Œé…ç½®å’Œè‡ªå®šä¹‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Sublime Text&lt;/strong>ï¼šVintageous
&lt;ul>
&lt;li>å¯ä»¥é€šè¿‡ Sublime Text çš„è®¾ç½®è¿›è¡Œé…ç½®å’Œè‡ªå®šä¹‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>â€¦â€¦&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="é…ç½®vim">
&lt;a href="#%e9%85%8d%e7%bd%aevim" class="header-anchor">#&lt;/a>
é…ç½®vim
&lt;/h2>&lt;p>Vim æ˜¯ä¸€ä¸ªé«˜åº¦å¯é…ç½®çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¯ä»¥é€šè¿‡ç¼–è¾‘å…¶é…ç½®æ–‡ä»¶æ¥è°ƒæ•´å’Œæ‰©å±•å…¶åŠŸèƒ½ã€‚&lt;/p>
&lt;h3 id="é…ç½®æ–‡ä»¶ä»‹ç»">
&lt;a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
é…ç½®æ–‡ä»¶ä»‹ç»
&lt;/h3>&lt;p>Vimæ²¡æœ‰æä¾›å›¾å½¢åŒ–çš„é…ç½®ç•Œé¢ï¼Œé…ç½®Viméƒ½æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆ&lt;code>.vimrc&lt;/code>ï¼‰å®ç°çš„ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åœ¨ Unix æˆ– Linux ç³»ç»Ÿä¸­ï¼Œ&lt;code>.vimrc&lt;/code> æ–‡ä»¶é€šå¸¸ä½äºç”¨æˆ·çš„ä¸»ç›®å½•ä¸­ï¼Œä¾‹å¦‚ &lt;code>~/.vimrc&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œ&lt;code>.vimrc&lt;/code> æ–‡ä»¶å¯ä»¥æ”¾åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œä¾‹å¦‚ &lt;code>C:\Users\&amp;lt;username&amp;gt;\_vimrc&lt;/code>ï¼Œæˆ–è€… &lt;code>C:\Users\&amp;lt;username&amp;gt;\.vimrc&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>**æ€»ç»“ï¼šVimé…ç½®æ–‡ä»¶éƒ½åœ¨ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹ï¼Œåç§°éƒ½å¯ä»¥ç”¨&lt;code>.vimrc&lt;/code>è¡¨ç¤ºã€‚**æ²¡æœ‰æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œç›´æ¥ä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è¦ä¿®æ”¹é…ç½®ï¼Œå°±åœ¨&lt;code>.vimrc&lt;/code>æ–‡ä»¶ä¸­ä¿®æ”¹å°±è¡Œã€‚&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;em>&lt;strong>æ³¨æ„äº‹é¡¹&lt;/strong>&lt;/em>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ³¨é‡Šæ˜¯ä»¥&lt;code>&amp;quot;&lt;/code>å¼€å¤´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>éƒ¨åˆ†vimæ’ä»¶ç‰ˆçš„é…ç½®æ–‡ä»¶åå¹¶ä¸æ˜¯&lt;code>.vimrc&lt;/code>ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚ideavimï¼š&lt;code>~/.ideavimr&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è¿™é‡Œæ€»ç»“ä¸€ä¸‹git bashå†…ç½®çš„vimæ’ä»¶ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è¯¥vimç‰ˆæœ¬ä¹Ÿå¯ä»¥ç”¨&lt;code>~/.vimrc&lt;/code>è¿›è¡Œé…ç½®å€¼ã€‚&lt;/p>
&lt;ul>
&lt;li>é»˜è®¤çš„é…ç½®æ–‡ä»¶åœ¨&lt;code>gitå®‰è£…ä½ç½®/etc/vimrc&lt;/code>ã€‚åªè¯»ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å¦‚æœæœŸæœ›git bashä¸ä½¿ç”¨å†…ç½®çš„vimæ’ä»¶&lt;/strong>ï¼Œä½¿ç”¨çš„æ˜¯è‡ªå·±å®‰è£…çš„vimç‰ˆæœ¬ï¼š&lt;/p>
&lt;ul>
&lt;li>å¯ä»¥ä¿®æ”¹git bashçš„é…ç½®æ–‡ä»¶&lt;code>.bashrc&lt;/code>ï¼Œæ·»åŠ vimçš„å®‰è£…ä½ç½®ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/d/vim/vim91:&lt;/span>&lt;span class="nv">$PATH&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>åŸç†ï¼šä½¿è‡ªå·±å®‰è£…çš„vimç‰ˆæœ¬ä¼˜å…ˆçº§æœ€é«˜ã€‚å…ˆåŠ è½½ã€‚å°½ç®¡æˆ‘åœ¨PATHå˜é‡ä¸­æ·»åŠ äº†è‡ªå·±å®‰è£…çš„vimç‰ˆæœ¬è·¯å¾„ï¼Œä½†æ˜¯æ— æ³•ä¿è¯è°çš„ä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥ä½¿ç”¨äº†ä¸Šé¢åŠæ³•ï¼Œä½¿è‡ªå·±å®‰è£…çš„vimç‰ˆæœ¬ä¼˜å…ˆçº§æœ€é«˜ã€‚å…ˆåŠ è½½ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="å¸¸è§çš„-vim-é…ç½®é¡¹">
&lt;a href="#%e5%b8%b8%e8%a7%81%e7%9a%84-vim-%e9%85%8d%e7%bd%ae%e9%a1%b9" class="header-anchor">#&lt;/a>
å¸¸è§çš„ Vim é…ç½®é¡¹
&lt;/h3>&lt;p>&lt;code>.vimrc&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>åŸºæœ¬è®¾ç½®&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filetype on &lt;span class="s2">&amp;#34;å¼€å¯æ–‡ä»¶ç±»å‹ä¾¦æµ‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">filetype indent on &amp;#34;&lt;/span>é€‚åº”ä¸åŒè¯­è¨€çš„ç¼©è¿›
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">syntax &lt;span class="nb">enable&lt;/span> &lt;span class="s2">&amp;#34;å¼€å¯è¯­æ³•é«˜äº®åŠŸèƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">syntax on &amp;#34;&lt;/span>å…è®¸ä½¿ç”¨ç”¨æˆ·é…è‰²
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>æ˜¾ç¤ºè®¾ç½®&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> &lt;span class="nv">shortmess&lt;/span>&lt;span class="o">=&lt;/span>atI &lt;span class="s2">&amp;#34;ä¸æ˜¾ç¤ºå¯åŠ¨æç¤ºä¿¡æ¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set laststatus=2 &amp;#34;&lt;/span>æ€»æ˜¯æ˜¾ç¤ºçŠ¶æ€æ ,å‘½ä»¤è¡Œï¼ˆåœ¨çŠ¶æ€è¡Œä¸‹ï¼‰çš„é«˜åº¦ï¼Œé»˜è®¤ä¸º1ï¼Œè¿™é‡Œæ˜¯2ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; æˆ‘çš„çŠ¶æ€è¡Œæ˜¾ç¤ºçš„å†…å®¹ï¼ˆåŒ…æ‹¬æ–‡ä»¶ç±»å‹å’Œè§£ç ï¼‰åç»­ç”¨æ’ä»¶ç¾åŒ–ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nb">set&lt;/span> &lt;span class="nv">statusline&lt;/span>&lt;span class="o">=&lt;/span>%F%m%r%h%w&lt;span class="se">\ &lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="nv">FORMAT&lt;/span>&lt;span class="o">=&lt;/span>%&lt;span class="o">{&lt;/span>&lt;span class="p">&amp;amp;&lt;/span>ff&lt;span class="o">}]&lt;/span>&lt;span class="se">\ &lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="nv">TYPE&lt;/span>&lt;span class="o">=&lt;/span>%Y&lt;span class="o">]&lt;/span>&lt;span class="se">\ &lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="nv">POS&lt;/span>&lt;span class="o">=&lt;/span>%l,%v&lt;span class="o">][&lt;/span>%p%%&lt;span class="o">]&lt;/span>&lt;span class="se">\ &lt;/span>%&lt;span class="o">{&lt;/span>strftime&lt;span class="o">(&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>%d/%m/%y&lt;span class="se">\ &lt;/span>-&lt;span class="se">\ &lt;/span>%H:%M&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="o">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;set statusline=[%F]%y%r%m%*%=[Line:%l/%L,Column:%c][%p%%]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nb">set&lt;/span> &lt;span class="nv">cmdheight&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="s2">&amp;#34; å‘½ä»¤è¡Œï¼ˆåœ¨çŠ¶æ€è¡Œä¸‹ï¼‰çš„é«˜åº¦ï¼Œé»˜è®¤ä¸º1ï¼Œè¿™é‡Œæ˜¯2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set ruler &amp;#34;&lt;/span>æ˜¾ç¤ºå…‰æ ‡ä½ç½®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> number &lt;span class="s2">&amp;#34;æ˜¾ç¤ºè¡Œå·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nb">set&lt;/span> cursorline &lt;span class="s2">&amp;#34;é«˜äº®æ˜¾ç¤ºå½“å‰è¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nb">set&lt;/span> cursorcolumn &lt;span class="s2">&amp;#34;é«˜äº®æ˜¾ç¤ºå½“å‰åˆ—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set hlsearch &amp;#34;&lt;/span> é«˜äº®æœç´¢ç»“æœ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> incsearch &lt;span class="s2">&amp;#34;è¾¹è¾“è¾¹é«˜äº®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set ignorecase &amp;#34;&lt;/span>æœç´¢æ—¶å¿½ç•¥å¤§å°å†™
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> smartcase &lt;span class="s2">&amp;#34; æ™ºèƒ½å¤§å°å†™åŒ¹é…
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nb">set&lt;/span> relativenumber &lt;span class="s2">&amp;#34;å…¶ä»–è¡Œæ˜¾ç¤ºç›¸å¯¹è¡Œå·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set scrolloff=5 &amp;#34;&lt;/span>å‚ç›´æ»šåŠ¨æ—¶å…‰æ ‡è·åº•éƒ¨ä½ç½®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>ç¼–ç è®¾ç½®&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> &lt;span class="nv">fileencodings&lt;/span>&lt;span class="o">=&lt;/span>utf-8,gb2312,gbk,gb18030,cp936 &lt;span class="s2">&amp;#34; æ£€æµ‹æ–‡ä»¶ç¼–ç ,å°†fileencodingè®¾ç½®ä¸ºæœ€ç»ˆç¼–ç 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set fileencoding=utf-8 &amp;#34;&lt;/span> ä¿å­˜æ—¶çš„æ–‡ä»¶ç¼–ç 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> &lt;span class="nv">termencoding&lt;/span>&lt;span class="o">=&lt;/span>utf-8 &lt;span class="s2">&amp;#34; ç»ˆç«¯çš„è¾“å‡ºå­—ç¬¦ç¼–ç 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set encoding=utf-8 &amp;#34;&lt;/span> VIMæ‰“å¼€æ–‡ä»¶ä½¿ç”¨çš„å†…éƒ¨ç¼–ç 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>ç¼–è¾‘è®¾ç½®&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> expandtab &lt;span class="s2">&amp;#34;æ‰©å±•åˆ¶è¡¨ç¬¦ä¸ºç©ºæ ¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set tabstop=4 &amp;#34;&lt;/span>åˆ¶è¡¨ç¬¦å ç©ºæ ¼æ•°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> &lt;span class="nv">softtabstop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">4&lt;/span> &lt;span class="s2">&amp;#34;å°†è¿ç»­æ•°é‡çš„ç©ºæ ¼è§†ä¸ºä¸€ä¸ªåˆ¶è¡¨ç¬¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set shiftwidth=4 &amp;#34;&lt;/span>è‡ªåŠ¨ç¼©è¿›æ‰€ä½¿ç”¨çš„ç©ºæ ¼æ•°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> &lt;span class="nv">textwidth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">80&lt;/span> &lt;span class="s2">&amp;#34;è®¾ç½®ä¸€è¡Œå†…å®¹çš„å®½åº¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set linebreak &amp;#34;&lt;/span>é˜²æ­¢å•è¯å†…éƒ¨æŠ˜è¡Œ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> &lt;span class="nv">wrapmargin&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="s2">&amp;#34;æŒ‡å®šæŠ˜è¡Œå¤„ä¸å³è¾¹ç¼˜ç©ºæ ¼æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set smarttab &amp;#34;&lt;/span>ä½¿ç”¨æ™ºèƒ½åˆ¶è¡¨ç¬¦
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> smartindent &lt;span class="s2">&amp;#34;æ™ºèƒ½ç¼©è¿›(å¥½å¤„æ˜¯ä¿®æ”¹ä»£ç æ—¶ä¼šæ ¹æ®ä»£ç è§„åˆ™è‡ªåŠ¨ç¼©è¿›ï¼Œåå¤„æ˜¯å½“ç”¨`:n,m&amp;gt;`å¯¹é½å·¦ä¾§çš„æ³¨é‡Šå°†ä¸ä¼šè¢«ç§»åŠ¨)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nb">set&lt;/span> autoindent &lt;span class="s2">&amp;#34;è‡ªåŠ¨ç¼©è¿›(è¿™ä¸¤ä¸ªå·®ä¸å¤šï¼Œæ„Ÿè§‰åœ¨å¤§æ‹¬å·è‡ªåŠ¨é…å¯¹æ—¶ï¼Œç”¨æ™ºèƒ½ç¼©è¿›å¥½ç‚¹)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set wildmenu &amp;#34;&lt;/span>vimå‘½ä»¤è‡ªåŠ¨è¡¥å…¨
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> autochdir &lt;span class="s2">&amp;#34;è‡ªåŠ¨å®šä½å½“å‰ç›®å½•ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set wrap &amp;#34;&lt;/span>å¯ç”¨è‡ªåŠ¨æ¢è¡Œ&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set autoread &amp;#34;&lt;/span>æ–‡ä»¶æ”¹åŠ¨æ—¶è‡ªåŠ¨è½½å…¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> &lt;span class="nv">t_Co&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">256&lt;/span> &lt;span class="s2">&amp;#34;terminal Color æ”¯æŒ256è‰²(é»˜è®¤æ˜¯8è‰²)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">hi comment ctermfg=6 &amp;#34;&lt;/span>è®¾ç½®æ³¨é‡Šé¢œè‰²
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> magic &lt;span class="s2">&amp;#34; è®¾ç½®é­”æœ¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set guioptions-=T &amp;#34;&lt;/span> éšè—guiå·¥å…·æ 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> guioptions-&lt;span class="o">=&lt;/span>m &lt;span class="s2">&amp;#34; éšè—guièœå•æ 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set guioptions-=r &amp;#34;&lt;/span> åˆ å»guiæ»šåŠ¨æ¡&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> ä½¿ç”¨æ›´å‹å¥½çš„é¢œè‰²æ–¹æ¡ˆ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">colorscheme desert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; è®¾ç½®èƒŒæ™¯è‰²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set background=dark
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> æ˜¾ç¤ºå‘½ä»¤è¾“å…¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> showcmd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;è®¾ç½®guiå­—ä½“
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">set guifont=Courier\ New:h20
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> è®¾ç½®å®½é«˜
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;set lines=15 columns=50
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> å¯ç”¨çœŸå½©è‰²é¢œè‰²æ”¯æŒï¼Œè®©é…è‰²æ–¹æ¡ˆæ˜¾ç¤ºæ›´å¥½ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> termguicolors
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„é…ç½®äº†ä¸Šé¢å¤§éƒ¨åˆ†è®¾ç½®ï¼Œåœ¨å¤§å¤šæ•°ä¸»é¢˜ä¸­åªéœ€è¦åœ¨&lt;code>vim-plug&lt;/code>åé¢é€‰æ‹©é¢œè‰²æ–¹æ¡ˆ&lt;code>colorscheme&lt;/code>å³å¯ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ’ä»¶ä½¿ç”¨">
&lt;a href="#%e6%8f%92%e4%bb%b6%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
æ’ä»¶ä½¿ç”¨
&lt;/h2>&lt;p>Vim çš„åŠŸèƒ½å¯ä»¥é€šè¿‡æ’ä»¶è¿›ä¸€æ­¥æ‰©å±•ã€‚ä½¿ç”¨æ’ä»¶å¯ä»¥å¢å¼ºVimçš„åŠŸèƒ½ï¼Œå¦‚è¯­æ³•é«˜äº®ã€ä»£ç è¡¥å…¨ã€æ–‡ä»¶æµè§ˆå™¨ã€ç‰ˆæœ¬æ§åˆ¶é›†æˆã€æ¨¡ç³Šæœç´¢ç­‰ã€‚&lt;/p>
&lt;p>ä¸ºäº†æ–¹ä¾¿å®‰è£…ï¼Œæ›´æ–°ï¼Œåˆ é™¤æ’ä»¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨æ’ä»¶ç®¡ç†å™¨è¿›è¡Œæ’ä»¶ç®¡ç†ã€‚&lt;/p>
&lt;p>æ¨èä½¿ç”¨çš„æ’ä»¶ç®¡ç†å™¨æ˜¯&lt;a class="link" href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener"
>vim-plug&lt;/a>ã€‚ä¸å…¶ä»–æ’ä»¶ç®¡ç†å™¨ï¼ˆå¦‚ Vundle å’Œ Pathogenï¼‰ç›¸æ¯”ï¼Œ&lt;code>vim-plug&lt;/code> æä¾›äº†æ›´å¿«çš„æ€§èƒ½å’Œæ›´å¤šçš„åŠŸèƒ½ï¼Œå¦‚å¹¶è¡Œå®‰è£…æ’ä»¶ã€å»¶è¿ŸåŠ è½½æ’ä»¶ã€ä½¿ç”¨ç®€å•ç­‰ã€‚&lt;/p>
&lt;h3 id="å®‰è£…-vim-plug">
&lt;a href="#%e5%ae%89%e8%a3%85-vim-plug" class="header-anchor">#&lt;/a>
å®‰è£… &lt;code>vim-plug&lt;/code>
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>ä¸‹è½½å¹¶å®‰è£… &lt;code>vim-plug&lt;/code>&lt;/strong>ï¼š åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿™ä¼šå°† &lt;code>vim-plug&lt;/code> ä¸‹è½½åˆ°ä½ çš„ Vim è‡ªåŠ¨åŠ è½½ç›®å½•ä¸‹ï¼š&lt;/p>
&lt;p>Linuxï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl -fLo ~/.vim/autoload/plug.vim --create-dirs &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Windowsï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -fLo ~/vimfiles/autoload/plug.vim --create-dirs &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šéœ€è¦æ‹¥æœ‰curlå‘½ä»¤ï¼Œå¹¶ä¸”ç»ˆç«¯èƒ½å¤Ÿè®¿é—®å¤–ç½‘ã€‚&lt;/p>
&lt;p>å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥æ‰‹åŠ¨ä¸‹è½½&lt;a class="link" href="https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim" target="_blank" rel="noopener"
>plug.vim&lt;/a>ï¼Œå¹¶å°†æ–‡ä»¶æ”¾åœ¨ windows ä¸­çš„ &lt;code>~/vimfiles/autoload&lt;/code> æˆ– Linux ä¸­çš„ &lt;code>~/.vim/autoload&lt;/code> æ–‡ä»¶å¤¹å†…ï¼Œæ²¡æœ‰æ‰‹åŠ¨åˆ›å»ºã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="æ’ä»¶æ¨è">
&lt;a href="#%e6%8f%92%e4%bb%b6%e6%8e%a8%e8%8d%90" class="header-anchor">#&lt;/a>
æ’ä»¶æ¨è
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>çŠ¶æ€æ å’Œä¸»é¢˜&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/itchyny/lightline.vim" target="_blank" rel="noopener"
>lightline.vim&lt;/a>ï¼šè½»é‡çº§çŠ¶æ€æ æ’ä»¶ã€‚&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/vim-airline/vim-airline" target="_blank" rel="noopener"
>vim-airline&lt;/a>ï¼šé«˜çº§çŠ¶æ€æ æ’ä»¶ï¼Œæä¾›ä¸°å¯Œçš„åŠŸèƒ½å’Œç¾è§‚çš„ä¸»é¢˜ã€‚&lt;/li>
&lt;li>**&lt;a class="link" href="https://github.com/dracula/dracula-theme" target="_blank" rel="noopener"
>dracula-theme&lt;/a>**ä¸»é¢˜&lt;/li>
&lt;li>**&lt;a class="link" href="https://github.com/kaicataldo/material.vim" target="_blank" rel="noopener"
>material.vim&lt;/a>**ä¸»é¢˜&lt;/li>
&lt;li>**&lt;a class="link" href="https://github.com/tribela/vim-transparent" target="_blank" rel="noopener"
>vim-transparent&lt;/a>**&lt;strong>ç»ˆç«¯é€æ˜&lt;/strong>ã€‚
&lt;ul>
&lt;li>è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥é…ç½®è®©å…¶ä»–æ’ä»¶ä¹Ÿé€æ˜ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/ajmwagar/vim-deus" target="_blank" rel="noopener"
>vim-deus&lt;/a>ä¸»é¢˜&lt;/li>
&lt;li>é…ç½®ä¸»é¢˜å»ºè®®éƒ½é…ç½®&lt;code>set termguicolors&lt;/code>&amp;quot; &lt;strong>å¯ç”¨çœŸå½©è‰²é¢œè‰²æ”¯æŒ&lt;/strong>ï¼Œ&lt;strong>è®©é…è‰²æ–¹æ¡ˆæ˜¾ç¤ºæ›´å¥½ã€‚ä¼šè®©ç»ˆç«¯é€æ˜æ•ˆæœæ›´å¥½ã€‚&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœå–œæ¬¢ç”¨gvim(æˆ‘ç”¨sublmeçš„&lt;a class="link" href="#%e5%9c%a8IDE%e4%b8%ad%e5%ae%89%e8%a3%85vim%e6%8f%92%e4%bb%b6" >Vimæ’ä»¶&lt;/a>)ã€‚å¯ä»¥ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å…¨å±æ˜¾ç¤ºï¼š&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/derekmcloughlin/gvimfullscreen_win32" target="_blank" rel="noopener"
>gvimfullscreen_win32&lt;/a>
32ä½ç³»ç»Ÿ:
- ä¸‹è½½&lt;code>gvimfullscreen.dll&lt;/code>
- å°†å…¶æ”¾å…¥&lt;code>gvim.exe&lt;/code>åŒç›®å½•çš„æ–‡ä»¶å¤¹ä¸‹
- é…ç½®æ–‡ä»¶ä¸­&lt;code>map &amp;lt;F11&amp;gt; &amp;lt;Esc&amp;gt;:call libcallnr(&amp;quot;gvimfullscreen.dll&amp;quot;, &amp;quot;ToggleFullScreen&amp;quot;, 0)&amp;lt;CR&amp;gt;&lt;/code>&lt;/p>
&lt;p>64ä½ç³»ç»ŸåŒä¸Š, ç”¨&lt;code>gvimfullscreen_64&lt;/code>ä»£æ›¿&lt;/p>
&lt;p>ç°åœ¨ä½ å°±å¯ä»¥ç”¨&lt;code>&amp;lt;F11&amp;gt;&lt;/code>æ¥è¿›è¡Œå…¨å±æ“ä½œ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€æ˜æ˜¾ç¤º&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/mattn/vimtweak" target="_blank" rel="noopener"
>vimtweak&lt;/a>&lt;/p>
&lt;p>æ–¹æ³•åŸºæœ¬åŒä¸Š, é€‰æ‹©&lt;code>vimtweak32.dll&lt;/code>æˆ–&lt;code>vimtweak64.dll&lt;/code>æ”¾å…¥æ–‡ä»¶å¤¹, åœ¨vimrcä¸­&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">au GUIEnter * call libcallnr&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;vimtweak64.dll&amp;#34;&lt;/span>, &lt;span class="s2">&amp;#34;SetAlpha&amp;#34;&lt;/span>, 200&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­æ•°å€¼200å¯ä»¥é€‰æ‹©0-255, 255ä¸ºä¸é€æ˜&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>ä¸€ç»„é»˜è®¤é…ç½®ï¼ˆæ¯ä¸ªäººéƒ½åŒæ„é»˜è®¤çš„é…ç½®ï¼‰ï¼š&lt;a class="link" href="https://github.com/tpope/vim-sensible" target="_blank" rel="noopener"
>vim-sensible&lt;/a>ï¼šæ’ä»¶çš„åŠŸèƒ½ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>'backspace'&lt;/code>ï¼šåœ¨æ’å…¥æ¨¡å¼ä¸‹æŒ‰é€€æ ¼é”®å¯åˆ é™¤ä»»ä½•å†…å®¹ã€‚é»˜è®¤åªèƒ½åˆ é™¤æ–°æ·»åŠ çš„ã€‚&lt;/li>
&lt;li>&lt;code>'incsearch'&lt;/code>ï¼šæŒ‰å›è½¦é”®ä¹‹å‰å¼€å§‹æœç´¢ã€‚&lt;/li>
&lt;li>&lt;code>'listchars'&lt;/code>ï¼šä½¿&lt;code>:set list&lt;/code>ï¼ˆå¯è§ç©ºç™½ï¼‰æ›´æ¼‚äº®ã€‚&lt;/li>
&lt;li>&lt;code>'scrolloff'&lt;/code>ï¼šå§‹ç»ˆåœ¨å…‰æ ‡ä¸Šæ–¹/ä¸‹æ–¹æ˜¾ç¤ºè‡³å°‘ä¸€è¡Œã€‚&lt;/li>
&lt;li>&lt;code>'autoread'&lt;/code>ï¼šè‡ªåŠ¨åŠ è½½æ–‡ä»¶æ›´æ”¹ã€‚æ‚¨å¯ä»¥æŒ‰ æ’¤æ¶ˆ&lt;code>u&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>runtime! macros/matchit.vim&lt;/code>ï¼šåŠ è½½ Vim é™„å¸¦çš„ matchit.vim ç‰ˆæœ¬ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ–‡ä»¶æµè§ˆå’Œå¯¼èˆª&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/preservim/nerdtree" target="_blank" rel="noopener"
>NERDTree&lt;/a>ï¼šæ–‡ä»¶ç³»ç»Ÿæµè§ˆå™¨ï¼Œæä¾›æ ‘çŠ¶ç›®å½•è§†å›¾ã€‚
&lt;ul>
&lt;li>ä¹Ÿå¯ä»¥ç”¨å†…ç½®çš„&lt;code>:Vex&lt;/code>æµè§ˆç›®å½•ã€‚å®ƒæ²¡æœ‰ç›®å½•æ ‘ç»“æ„ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/junegunn/fzf.vim" target="_blank" rel="noopener"
>fzf.vim&lt;/a>ï¼šæ¨¡ç³ŠæŸ¥æ‰¾å·¥å…·ï¼ŒåŸºäº &lt;code>fzf&lt;/code> å‘½ä»¤è¡Œå·¥å…·ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è¯­æ³•é«˜äº®å’Œè¯­æ³•æ£€æŸ¥&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/sheerun/vim-polyglot" target="_blank" rel="noopener"
>vim-polyglot&lt;/a>ï¼šæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•é«˜äº®ã€‚&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/dense-analysis/ale" target="_blank" rel="noopener"
>ALE&lt;/a>ï¼šå¼‚æ­¥è¯­æ³•æ£€æŸ¥å’Œä¿®å¤å·¥å…·ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä»£ç è¡¥å…¨&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/ycm-core/YouCompleteMe" target="_blank" rel="noopener"
>YouCompleteMe&lt;/a>ï¼šå¼ºå¤§çš„ä»£ç è¡¥å…¨æ’ä»¶ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ã€‚&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/neoclide/coc.nvim" target="_blank" rel="noopener"
>coc.nvim&lt;/a>ï¼šåŸºäº VSCode æ’ä»¶çš„ä»£ç è¡¥å…¨å’Œè¯­è¨€æœåŠ¡å™¨æ”¯æŒã€‚&lt;/li>
&lt;li>&lt;strong>æ²¡æ‰“ç®—ç”¨vimå†™ä»£ç ï¼Œæ²¡èŠ±æ—¶é—´å»é…ç½®&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç‰ˆæœ¬æ§åˆ¶&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/tpope/vim-fugitive" target="_blank" rel="noopener"
>vim-fugitive&lt;/a>ï¼šGit é›†æˆæ’ä»¶ï¼Œæä¾›å¼ºå¤§çš„ Git æ“ä½œæ”¯æŒã€‚&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/airblade/vim-gitgutter" target="_blank" rel="noopener"
>gitgutter&lt;/a>ï¼šåœ¨ç¼–è¾‘å™¨ä¸­æ˜¾ç¤º Git çš„æ”¹åŠ¨ä¿¡æ¯ã€‚&lt;/li>
&lt;li>éƒ½æ˜¯åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨gitï¼Œæˆ‘æ²¡æœ‰é…ç½®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å…¶ä»–å®ç”¨æ’ä»¶&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/machakann/vim-highlightedyank" target="_blank" rel="noopener"
>vim-highlightedyank&lt;/a>ï¼šè®©å¤åˆ¶åŒºåŸŸé«˜äº®ã€‚ï¼ˆideavimå†…ç½®æ’ä»¶ã€‚ï¼‰&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/jiangmiao/auto-pairs" target="_blank" rel="noopener"
>auto-pairs&lt;/a>ï¼šæˆå¯¹æ·»åŠ ã€åˆ é™¤ã€é«˜äº®æ‹¬å·ã€‚&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/tpope/vim-surround" target="_blank" rel="noopener"
>surround.vim&lt;/a>ï¼šè½»æ¾æ“ä½œæˆå¯¹ç¬¦å·ï¼ˆä¾‹å¦‚å¼•å·ã€æ‹¬å·ï¼‰ã€‚
&lt;ul>
&lt;li>auto-pairsçš„æ‰©å±•ã€‚æˆå¯¹ä¿®æ”¹æ‹¬å·ä¸ºåˆ«çš„æ‹¬å·ã€‚å¦‚&lt;code>cs&amp;quot;'&lt;/code>å°†æˆå¯¹&lt;code>&amp;quot;&lt;/code>æ”¹ä¸º&lt;code>'&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/tpope/vim-commentary" target="_blank" rel="noopener"
>commentary.vim&lt;/a>ï¼šå¿«é€Ÿæ³¨é‡Šå’Œå–æ¶ˆæ³¨é‡Šä»£ç ã€‚
&lt;ul>
&lt;li>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œç§»åŠ¨å…‰æ ‡åˆ°è¦æ³¨é‡Šçš„è¡Œï¼Œç„¶åä½¿ç”¨ &lt;code>gcc&lt;/code> æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šå½“å‰è¡Œã€‚&lt;/li>
&lt;li>åœ¨å¯è§†æ¨¡å¼ä¸‹ï¼Œé€‰æ‹©è¦æ³¨é‡Šçš„ä»£ç å—ï¼Œç„¶åä½¿ç”¨ &lt;code>gc&lt;/code> æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šé€‰å®šçš„ä»£ç ã€‚&lt;/li>
&lt;li>&lt;strong>å¾ˆæ™ºèƒ½ï¼Œå¥½ç”¨ã€‚&lt;/strong>ï¼ˆideavimå†…ç½®æ’ä»¶ã€‚ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="é…ç½®æ’ä»¶">
&lt;a href="#%e9%85%8d%e7%bd%ae%e6%8f%92%e4%bb%b6" class="header-anchor">#&lt;/a>
é…ç½®æ’ä»¶
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>ç¼–è¾‘ &lt;code>.vimrc&lt;/code> æ–‡ä»¶ï¼Œæ·»åŠ æ’ä»¶ç®¡ç†å™¨é…ç½®&lt;/strong>ï¼š&lt;/p>
&lt;p>windwosä¸ºä¾‹ï¼Œå°†æ’ä»¶å®‰è£…ä½ç½®ä¿å­˜åœ¨&lt;code>$VIM/vimfiles/plugged&lt;/code>ï¼Œå°†ä¸‹é¢ä»£ç è¿½åŠ åˆ°&lt;code>.vimrc&lt;/code>ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>æ’ä»¶vim-plug&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; åˆå§‹åŒ– vim-plug
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> Linuxä¸Šé»˜è®¤
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; call plug#begin()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> windowsä¸Šè‡ªå®šä¹‰æ’ä»¶å®‰è£…ä½ç½®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">call plug#begin&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;$VIM/vimfiles/plugged&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; The default plugin directory will be as follows:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> - Vim &lt;span class="o">(&lt;/span>Linux/macOS&lt;span class="o">)&lt;/span>: &lt;span class="s1">&amp;#39;~/.vim/plugged&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; - Vim (Windows): &amp;#39;~/vimfiles/plugged&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> - Neovim &lt;span class="o">(&lt;/span>Linux/macOS/Windows&lt;span class="o">)&lt;/span>: stdpath&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;data&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span> . &lt;span class="s1">&amp;#39;/plugged&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; You can specify a custom plugin directory by passing it as the argument
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> - e.g. &lt;span class="sb">`&lt;/span>call plug#begin&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;~/.vim/plugged&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; - Avoid using standard Vim directory names like &amp;#39;plugin&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> æ·»åŠ æ’ä»¶åˆ—è¡¨,ç¡®ä¿ä½¿ç”¨çš„æ˜¯å•å¼•å·ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; Plug &amp;#39;tpope/vim-sensible&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> Plug &lt;span class="s1">&amp;#39;scrooloose/nerdtree&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; Plug &amp;#39;itchyny/lightline.vim&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> Call plug#end to update &lt;span class="p">&amp;amp;&lt;/span>runtimepath and initialize the plugin system.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; - It automatically executes `filetype plugin indent on` and `syntax enable`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> ç»“æŸæ’ä»¶é…ç½®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">call plug#end&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; You can revert the settings after the call like so:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> filetype indent off &lt;span class="s2">&amp;#34; Disable file-type-specific indentation
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> syntax off &lt;span class="s2">&amp;#34; Disable syntax highlighting
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;æ’ä»¶vim-plugç»“æŸ&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ·»åŠ æ’ä»¶&lt;/strong>ï¼šæˆ‘ä»¬åªéœ€è¦å°†æ’ä»¶æ·»åŠ åˆ°&lt;code>Plug ''&lt;/code>é‡Œé¢å³å¯ï¼Œåˆ«å¿˜è®°å–æ¶ˆæ³¨é‡Šã€‚æ’ä»¶åä¸€èˆ¬ä¸ºä¸º&lt;code>githubä½œè€…/ä»“åº“å&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å®‰è£…æ’ä»¶&lt;/strong>ï¼šæ‰“å¼€vimè¿è¡Œ&lt;code>:PlugInstall&lt;/code>å‘½ä»¤æ¥å®‰è£… &lt;code>.vimrc&lt;/code> ä¸­å®šä¹‰çš„æ’ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ›´æ–°æ’ä»¶&lt;/strong>ï¼š è¦æ›´æ–°æ‰€æœ‰æ’ä»¶ï¼Œè¿è¡Œï¼š&lt;code>:PlugUpdate&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ¸…é™¤æœªä½¿ç”¨çš„æ’ä»¶&lt;/strong>ï¼š å¦‚æœä½ ä»é…ç½®ä¸­ç§»é™¤äº†ä¸€äº›æ’ä»¶ï¼Œå¯ä»¥è¿è¡Œ&lt;code>:PlugClean&lt;/code>å‘½ä»¤æ¥åˆ é™¤æœªä½¿ç”¨çš„æ’ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ£€æŸ¥æ’ä»¶çŠ¶æ€&lt;/strong>ï¼š è¦æ£€æŸ¥æ’ä»¶çš„çŠ¶æ€å’Œç‰ˆæœ¬ï¼Œè¿è¡Œ&lt;code>:PlugStatus&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>Done&lt;/code>è¡¨ç¤ºæˆåŠŸï¼Œ&lt;code>:q&lt;/code>é€€å‡ºæ’ä»¶ç®¡ç†å™¨ã€‚å¤±è´¥é€€å‡ºé‡è¯•ã€‚æˆ–Ré‡è¯•ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ’ä»¶å®‰è£…æˆåŠŸç¤ºä¾‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601130425059.png"
width="1920"
height="1080"
srcset="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601130425059_huee49f788443b9dc26c2bb4e8763bb219_1388323_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601130425059_huee49f788443b9dc26c2bb4e8763bb219_1388323_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt=":PlugInstall"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="æ•ˆæœå±•ç¤º">
&lt;a href="#%e6%95%88%e6%9e%9c%e5%b1%95%e7%a4%ba" class="header-anchor">#&lt;/a>
&lt;strong>æ•ˆæœå±•ç¤º&lt;/strong>
&lt;/h2>&lt;p>vimé…ç½®æ•ˆæœï¼š&lt;/p>
&lt;p>materialï¼šdefaultï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601115134165.png"
width="1920"
height="1080"
srcset="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601115134165_huee49f788443b9dc26c2bb4e8763bb219_1505492_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601115134165_huee49f788443b9dc26c2bb4e8763bb219_1505492_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="materialï¼šdefault"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>materialï¼špalenightï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601115622541.png"
width="1920"
height="1080"
srcset="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601115622541_huee49f788443b9dc26c2bb4e8763bb219_1509648_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601115622541_huee49f788443b9dc26c2bb4e8763bb219_1509648_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="materialï¼špalenight"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>åŒºåˆ«ä¸æ˜¯å¾ˆå¤§ã€‚&lt;/p>
&lt;p>deusï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601120120263.png"
width="1920"
height="1080"
srcset="https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601120120263_huee49f788443b9dc26c2bb4e8763bb219_1510375_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/vim-introduction/index.assets/image-20240601120120263_huee49f788443b9dc26c2bb4e8763bb219_1510375_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="deus"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>æˆ‘çš„&lt;a class="link" href="https://github.com/arlettebrook/arlettebrook/tree/main/vim.cfg" target="_blank" rel="noopener"
>å®Œæ•´é…ç½®&lt;/a>ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ‰©å±•">
&lt;a href="#%e6%89%a9%e5%b1%95" class="header-anchor">#&lt;/a>
æ‰©å±•
&lt;/h2>&lt;h3 id="è‡ªå®šä¹‰å¿«æ·é”®">
&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%bf%ab%e6%8d%b7%e9%94%ae" class="header-anchor">#&lt;/a>
è‡ªå®šä¹‰å¿«æ·é”®
&lt;/h3>&lt;p>åœ¨Vimä¸­è‡ªå®šä¹‰å¿«æ·é”®ï¼Œå…¶å®å°±åˆ›å»ºå¿«æ·é”®ä¸å‘½ä»¤ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚&lt;/p>
&lt;p>ç”¨åˆ°çš„å‘½ä»¤æ˜¯&lt;code>map&lt;/code>æˆ–&lt;code>noremap&lt;/code>ã€‚æ³¨æ„ï¼šè¦å°†å‘½ä»¤é…ç½®åœ¨&lt;code>.vimrc&lt;/code>ä¸­ã€‚&lt;/p>
&lt;p>æ ¼å¼ï¼š&lt;code>æ˜ å°„å‘½ä»¤ è‡ªå®šä¹‰å¿«æ·é”® å‘½ä»¤&lt;/code>ï¼Œä¸­é—´ç”¨ç©ºæ ¼åˆ†éš”å¼€ã€‚&lt;/p>
&lt;p>å‰é¢æœ‰&lt;code>n, i, v, c&lt;/code>ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºå¯¹åº”çš„æ¨¡å¼ã€‚å¦‚&lt;code>nmap&lt;/code>æˆ–&lt;code>nnoremap&lt;/code>è¡¨ç¤ºNormalæ¨¡å¼ä¸‹çš„æ˜ å°„å…³ç³»ã€‚æ²¡æœ‰è¡¨ç¤ºæ‰€æœ‰æ¨¡å¼çš„æ˜ å°„å…³ç³»ã€‚&lt;/p>
&lt;p>&lt;strong>äºŒè€…åŒºåˆ«&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>map&lt;/code>ä¼šé€’å½’è§£ææ˜ å°„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>noremap&lt;/code>ä¸ä¼šé€’å½’è§£ææ˜ å°„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ„æ€æ˜¯å¦‚æœå‘½ä»¤ä¸­æœ‰åˆ«çš„æ˜ å°„ï¼Œä¸€ä¸ªä¼šè§£æï¼Œä¸€ä¸ªä¸ä¼šã€‚å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">nmap yy dd &lt;span class="c1"># ä¿®æ”¹äº†é»˜è®¤æ˜ å°„ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nnoremap ,y &lt;span class="s2">&amp;#34;*yy # ä¼šæ‰§è¡Œå¤åˆ¶ä¸€è¡Œå‘½ä»¤åˆ°å‰ªåˆ‡æ¿ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">nmap ,d &amp;#34;&lt;/span>*yy &lt;span class="c1"># ä¼šåˆ é™¤ä¸€è¡Œå‘½ä»¤åˆ°å‰ªåˆ‡æ¿ã€‚è§£æäº†yyæ˜ å°„ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>çœ‹éœ€æ±‚ä½¿ç”¨ï¼Œæ˜¯å¦éœ€è¦é€’å½’æ˜ å°„ã€‚æ²¡æœ‰éœ€æ±‚æ¨èä½¿ç”¨&lt;code>noremap&lt;/code>åˆ›å»ºæ˜ å°„ï¼Œé˜²æ­¢æ˜ å°„å¤šäº†ï¼Œé€’å½’è§£æï¼Œå¯¼è‡´æ— é™å¾ªç¯æˆ–æ„å¤–è¡Œä¸ºã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>æ³¨æ„äº‹é¡¹ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å½“è‡ªå®šä¹‰çš„å¿«æ·é”®ä¸vimé¢„å®šä¹‰çš„å¿«æ·é”®å†²çªæ—¶ï¼Œè‡ªå®šä¹‰çš„å¿«æ·é”®ä¼šè¦†ç›–é¢„å®šä¹‰çš„å¿«æ·é”®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŸ¥çœ‹è‡ªå®šä¹‰çš„å¿«æ·é”®&lt;code>:map&lt;/code>ã€‚æˆ–è€…æŸ¥çœ‹&lt;code>.vimrc&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ &lt;code>:verbose map&lt;/code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„æ˜ å°„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ˜ å°„æ˜¯åœ¨å“ªé‡Œå®šä¹‰çš„ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å–æ¶ˆè‡ªå®šä¹‰çš„å¿«æ·é”®ï¼šåœ¨è‡ªå®šä¹‰å¿«æ·é”®çš„åé¢æ·»åŠ &lt;code>u+è‡ªå®šä¹‰çš„å¿«æ·é”®&lt;/code>ã€‚å¦‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nnoremap ,y &lt;span class="s2">&amp;#34;*yy # è‡ªå®šä¹‰å¿«æ·é”®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">unnoremap ,y # å–æ¶ˆå¿«æ·é”®
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å¸¸ç”¨é”®è¡¨ç¤ºæ³•&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>æ™®é€šå­—ç¬¦&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ç›´æ¥è¾“å…¥å­—æ¯ã€æ•°å­—ã€ç¬¦å·ã€‚ä¾‹å¦‚ï¼š&lt;code>a&lt;/code>, &lt;code>b&lt;/code>, &lt;code>1&lt;/code>, &lt;code>2&lt;/code>, &lt;code>#&lt;/code>, &lt;code>*&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ§åˆ¶é”®&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ &lt;code>&amp;lt;Ctrl&amp;gt;&lt;/code>ï¼ˆæˆ– &lt;code>&amp;lt;C&amp;gt;&lt;/code>ï¼‰è¡¨ç¤ºæ§åˆ¶é”®ã€‚ä¾‹å¦‚ï¼š&lt;code>&amp;lt;C-a&amp;gt;&lt;/code> è¡¨ç¤º &lt;code>Ctrl+a&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åŠŸèƒ½é”®&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ &lt;code>&amp;lt;F1&amp;gt;&lt;/code> åˆ° &lt;code>&amp;lt;F12&amp;gt;&lt;/code> è¡¨ç¤ºåŠŸèƒ½é”®ã€‚ä¾‹å¦‚ï¼š&lt;code>&amp;lt;F2&amp;gt;&lt;/code> è¡¨ç¤ºåŠŸèƒ½é”® &lt;code>F2&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç‰¹æ®Šé”®&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨å°–æ‹¬å·åŒ…å›´çš„ç‰¹æ®Šé”®è¡¨ç¤ºæ³•ã€‚ä¾‹å¦‚ï¼š
&lt;ul>
&lt;li>&lt;code>&amp;lt;Esc&amp;gt;&lt;/code>ï¼šEscape é”®&lt;/li>
&lt;li>&lt;code>&amp;lt;CR&amp;gt;&lt;/code>ï¼šå›è½¦é”®ï¼ˆEnterï¼‰&lt;/li>
&lt;li>&lt;code>&amp;lt;Tab&amp;gt;&lt;/code>ï¼šåˆ¶è¡¨ç¬¦é”®ï¼ˆTabï¼‰&lt;/li>
&lt;li>&lt;code>&amp;lt;Space&amp;gt;&lt;/code>ï¼šç©ºæ ¼é”®ï¼ˆSpaceï¼‰&lt;/li>
&lt;li>&lt;code>&amp;lt;BS&amp;gt;&lt;/code>ï¼šé€€æ ¼é”®ï¼ˆBackspaceï¼‰&lt;/li>
&lt;li>&lt;code>&amp;lt;Del&amp;gt;&lt;/code>ï¼šåˆ é™¤é”®ï¼ˆDeleteï¼‰&lt;/li>
&lt;li>&lt;code>&amp;lt;Up&amp;gt;&lt;/code>ï¼šä¸Šç®­å¤´é”®&lt;/li>
&lt;li>&lt;code>&amp;lt;Down&amp;gt;&lt;/code>ï¼šä¸‹ç®­å¤´é”®&lt;/li>
&lt;li>&lt;code>&amp;lt;Left&amp;gt;&lt;/code>ï¼šå·¦ç®­å¤´é”®&lt;/li>
&lt;li>&lt;code>&amp;lt;Right&amp;gt;&lt;/code>ï¼šå³ç®­å¤´é”®&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç»„åˆé”®&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>å¯ä»¥ç»„åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š&lt;code>&amp;lt;C-Space&amp;gt;&lt;/code> è¡¨ç¤º &lt;code>Ctrl+Space&lt;/code>ï¼Œ&lt;code>&amp;lt;C-Left&amp;gt;&lt;/code> è¡¨ç¤º &lt;code>Ctrl+Left&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Leader&lt;/strong> é”®&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ä½¿ç”¨ &lt;code>&amp;lt;leader&amp;gt;&lt;/code> é”®å¯ä»¥é¿å…ä¸é»˜è®¤å¿«æ·é”®å†²çªã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;code>&amp;lt;leader&amp;gt;&lt;/code> é”®æ˜¯åæ–œæ  &lt;code>\&lt;/code>ï¼Œä½†ä½ å¯ä»¥åœ¨ &lt;code>.vimrc&lt;/code> ä¸­é‡æ–°å®šä¹‰å®ƒï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">let&lt;/span> &lt;span class="nv">mapleader&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ç„¶åä½ å¯ä»¥ä½¿ç”¨ &lt;code>&amp;lt;leader&amp;gt;&lt;/code> é”®åˆ›å»ºè‡ªå®šä¹‰å¿«æ·é”®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">nnoremap &amp;lt;leader&amp;gt;y &lt;span class="s2">&amp;#34;*yy
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·ï¼Œä½ çš„è‡ªå®šä¹‰å¿«æ·é”®å°†ä½¿ç”¨ &lt;code>,y&lt;/code> æ¥è§¦å‘ï¼Œå¹¶ä¸”&lt;code>&amp;lt;leader&amp;gt;&lt;/code>å¯ä»¥æ›´æ”¹ä¸ºä½ å–œæ¬¢ä½†ä¸å†²çªçš„é”®ã€‚é€—å·è·Ÿåæ–œæ å°±æ˜¯ï¼Œä¸è¿‡æˆ‘æ›´å–œæ¬¢ç”¨é€—å·ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>ç¤ºä¾‹ï¼šåœ¨vimä¸­æ²¡æœ‰å¿«æ·é”®åˆ é™¤å…‰æ ‡åé¢çš„å­—ç¬¦ã€‚æˆ‘ä»¬æ¥è‡ªå®šä¹‰æ˜ å°„å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; ctrl-kï¼šåˆ é™¤å…‰æ ‡åé¢çš„å­—ç¬¦ï¼Œéƒ¨åˆ†ç‰ˆæœ¬ä¸æ”¯æŒ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">nnoremap &amp;lt;C-k&amp;gt; D
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">inoremap &amp;lt;C-k&amp;gt; &amp;lt;Esc&amp;gt;lC
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">vnoremap &amp;lt;C-k&amp;gt; d
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> å®šä¹‰åˆ é™¤å…‰æ ‡åæ‰€æœ‰å­—ç¬¦çš„å‡½æ•°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span>! DeleteAfterCursor&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34; è·å–å½“å‰å…‰æ ‡åœ¨å‘½ä»¤è¡Œä¸­çš„ä½ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> let current_pos = getcmdpos()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&lt;/span> è·å–å½“å‰å‘½ä»¤è¡Œçš„å†…å®¹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">let&lt;/span> &lt;span class="nv">cmdline&lt;/span> &lt;span class="o">=&lt;/span> getcmdline&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34; æˆªå–å­—ç¬¦ä¸²ï¼Œè·å–å…‰æ ‡å‰çš„éƒ¨åˆ†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> let new_cmdline = strpart(cmdline, 0, current_pos - 1)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&lt;/span> è®¾ç½®æ–°çš„å‘½ä»¤è¡Œå†…å®¹ï¼Œåªä¿ç•™å…‰æ ‡å‰çš„éƒ¨åˆ†ï¼Œå»æ‰å…‰æ ‡ä½ç½®åŠå…¶åçš„æ‰€æœ‰å­—ç¬¦
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> call setcmdline&lt;span class="o">(&lt;/span>new_cmdline&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">endfunction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹æ˜ å°„ &amp;lt;C-k&amp;gt; ä¸ºåˆ é™¤å…‰æ ‡åçš„æ‰€æœ‰å­—ç¬¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span> ç”¨è¡¨è¾¾å¼å¯„å­˜å™¨è°ƒç”¨åˆ é™¤å‡½æ•°ï¼Œæœ€åå›è½¦
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cnoremap &amp;lt;C-k&amp;gt; &amp;lt;C-r&amp;gt;&lt;span class="o">=&lt;/span>DeleteAfterCursor&lt;span class="o">()&lt;/span>&amp;lt;CR&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ä¸Šé¢çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å®ç°äº†ç»ˆç«¯åœ¨Emacsæ¨¡å¼ä¸‹çš„&lt;code>ctrl-k&lt;/code>å¿«æ·é”®ã€‚ä½†æ˜¯åªèƒ½åœ¨vimä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”vimç‰ˆæœ¬éœ€è¦æ”¯æŒè¡¨è¾¾å¼å¯„å­˜å™¨ã€‚&lt;/p>
&lt;p>å¦‚æœç»ˆç«¯çš„ç¼–è¾‘æ¨¡å¼ä¸ºviï¼Œä¾æ—§ä¸èƒ½è§£å†³é—®é¢˜ã€‚åœ¨insertæ¨¡å¼ä¸‹ä¸èƒ½ä½¿ç”¨&lt;code>ctl-k&lt;/code>å¿«æ·é”®ã€‚éœ€è¦ä¿®æ”¹ç»ˆç«¯çš„æ˜ å°„å…³ç³»&lt;code>.inputrc&lt;/code>ã€‚ä¸è¿‡å¤Ÿç”¨äº†ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;strong>é…ç½®å¤åˆ¶ã€ç²˜è´´ã€å‰ªåˆ‡å¿«æ·é”®&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34; é…ç½®å¤åˆ¶ã€ç²˜è´´ã€å‰ªåˆ‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">vnoremap &amp;lt;C-c&amp;gt; &amp;#34;&lt;/span>*y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">inoremap &amp;lt;C-v&amp;gt; &amp;lt;C-r&amp;gt;*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cnoremap &amp;lt;C-v&amp;gt; &amp;lt;C-r&amp;gt;*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vnoremap &amp;lt;C-v&amp;gt; &lt;span class="s2">&amp;#34;*p
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">vnoremap &amp;lt;C-x&amp;gt; &amp;#34;&lt;/span>*d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ä¸è¦é…ç½®æ™®é€šæ¨¡å¼ä¸‹çš„&lt;code>ctrl-v&lt;/code>ï¼Œå®ƒæ˜¯å¯è§†å—çš„å¿«æ·é”®ï¼Œå¯ä»¥é…ç½®visualæ¨¡å¼çš„ï¼Œéœ€è¦æŒ‰ä¸¤æ¬¡æ‰èƒ½ç²˜è´´ã€‚ä¸è¿‡å¤Ÿç”¨äº†ã€‚&lt;/p>
&lt;p>&lt;strong>å‘½ä»¤å‚è€ƒ&lt;/strong>ï¼š&lt;a class="link" href="https://arlettebrook.github.io/p/vim-common-commands/" target="_blank" rel="noopener"
>Vim Common Commands&lt;/a>&lt;/p></description></item><item><title>Terminal And Shell Introduction</title><link>https://arlettebrook.github.io/p/terminal-and-shell-introduction/</link><pubDate>Mon, 27 May 2024 15:17:13 +0800</pubDate><guid>https://arlettebrook.github.io/p/terminal-and-shell-introduction/</guid><description>&lt;hr>
&lt;h2 id="æ¦‚å¿µ">
&lt;a href="#%e6%a6%82%e5%bf%b5" class="header-anchor">#&lt;/a>
æ¦‚å¿µ
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>ç»ˆç«¯&lt;/strong>ï¼šå‘½ä»¤è¡Œ&lt;strong>äº¤äº’ç•Œé¢&lt;/strong>ã€‚å¦‚ï¼š
&lt;ul>
&lt;li>windows terminalã€windtermã€FinalShellã€‚PowerShellã€‚&lt;/li>
&lt;li>æ§åˆ¶å°ï¼šä¸€ç§ç‰¹æ®Šçš„ç»ˆç«¯ã€‚èŒƒå›´æ›´å¹¿ï¼Œæ—¢å¯ä»¥æŒ‡ç¡¬ä»¶ä¹Ÿå¯ä»¥æŒ‡è½¯ä»¶å·¥å…·ï¼Œå¸¸ç”¨äº&lt;strong>ç³»ç»Ÿç®¡ç†&lt;/strong>å’Œ&lt;strong>ç›‘æ§&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>TTY&lt;/strong>ï¼šç»ˆç«¯çš„&lt;strong>æ–‡æœ¬è¾“å…¥è¾“å‡ºæ¥å£&lt;/strong>ã€‚å¯ä»¥ç†è§£ä¸ºå°±æ˜¯ç»ˆç«¯ã€‚ä¸æ·±å…¥äº†è§£ğŸ˜‚ã€‚&lt;/li>
&lt;li>&lt;strong>Shell&lt;/strong>ï¼šå‘½ä»¤è¡Œ&lt;strong>è§£é‡Šå™¨&lt;/strong>ã€‚å¦‚ï¼š
&lt;ul>
&lt;li>Bashã€Zshã€PowerShellã€git bashã€‚&lt;/li>
&lt;li>ç»ˆç«¯é€šè¿‡TTYä¸Shellé€šä¿¡ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æ¨èæ–‡ç« ï¼š&lt;a class="link" href="https://prinsss.github.io/the-difference-between-cli-terminal-shell-tty/" target="_blank" rel="noopener"
>å‘½ä»¤è¡Œç•Œé¢ (CLI)ã€ç»ˆç«¯ (Terminal)ã€Shellã€TTYï¼Œå‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Ÿ&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="zshå®‰è£…">
&lt;a href="#zsh%e5%ae%89%e8%a3%85" class="header-anchor">#&lt;/a>
zshå®‰è£…
&lt;/h2>&lt;p>Bashæ˜¯Linuxç³»ç»Ÿå†…ç½®çš„shellï¼Œæä¾›äº†å¼ºå¤§çš„å‘½ä»¤è¡Œç¼–è¾‘ã€è„šæœ¬ç¼–å†™å’Œå‘½ä»¤å†å²åŠŸèƒ½ï¼Œå¹¿æ³›ç”¨äº Linux å’Œ macOS ç³»ç»Ÿä¸­ã€‚æ˜¯ç›®å‰æœ€æµè¡Œçš„ Shell ä¹‹ä¸€ã€‚&lt;/p>
&lt;p>è€Œ&lt;strong>Zsh&lt;/strong> æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Shellï¼Œå…·æœ‰æ¯” Bash æ›´å¤šçš„ç‰¹æ€§ï¼Œå¦‚æ›´é«˜çº§çš„è‡ªåŠ¨è¡¥å…¨ã€æ›´å¼ºå¤§çš„è„šæœ¬èƒ½åŠ›å’Œæ›´ä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼Œè¿˜æä¾›äº†è¯¸å¦‚å…±äº«å†å²ã€æ‹¼å†™æ ¡æ­£ã€ä¸»é¢˜æ”¯æŒå’Œæ’ä»¶ç³»ç»Ÿç­‰&lt;strong>å¢å¼ºåŠŸèƒ½&lt;/strong>ï¼Œä½¿å…¶æˆä¸ºé«˜çº§ç”¨æˆ·å’Œå¼€å‘è€…çš„é¦–é€‰ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥ä»‹ç»å¦‚ä½•å®‰è£…ï¼š&lt;/p>
&lt;h3 id="windowsä¸Šå®‰è£…">
&lt;a href="#windows%e4%b8%8a%e5%ae%89%e8%a3%85" class="header-anchor">#&lt;/a>
windowsä¸Šå®‰è£…
&lt;/h3>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šwindowsä¸Šå®‰è£…zshæ˜¯å»ºç«‹åœ¨git bashåŸºç¡€ä¸Šçš„ã€‚&lt;/p>
&lt;p>æ‰€ä»¥åªæœ‰å®‰è£…äº†gitï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨windowsä¸Šä½¿ç”¨zshã€‚&lt;/p>
&lt;p>å®‰è£…gitï¼š&lt;a class="link" href="https://git-scm.com/downloads" target="_blank" rel="noopener"
>gitå®˜ç½‘&lt;/a>ã€‚&lt;/p>
&lt;p>ä¸ªäººä½“éªŒï¼šåˆ©ç”¨ä¸Šé¢æ–¹æ³•åœ¨windowsä¸Šä½¿ç”¨zshï¼Œæ•ˆæœä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘ç”µè„‘é…ç½®ä½çš„åŸå› ï¼šæ¯æ¬¡åˆ©ç”¨git bashå¯åŠ¨zshéƒ½å¾ˆæ…¢ã€‚æ‰€ä»¥windowsä¸Šæˆ‘ç”¨çš„shellä¸€ç›´éƒ½æ˜¯git bashã€‚&lt;/p>
&lt;/blockquote>
&lt;ol>
&lt;li>
&lt;p>ä¸‹è½½zshå¯¹åº”çš„windowsç‰ˆæœ¬ï¼Œå®˜æ–¹å¹¶æ²¡æœ‰æä¾›ï¼Œç”±MSYS2æä¾›ã€‚ï¼ˆå®˜æ–¹ä¸‹è½½éœ€è¦ç”¨åŒ…ç®¡ç†å·¥å…·ï¼‰&lt;/p>
&lt;ol>
&lt;li>&lt;em>MSYS2&lt;/em> æ˜¯é’ˆå¯¹Windows çš„è½¯ä»¶åˆ†å‘å’Œæ„å»ºå¹³å°ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>windowsä¸Šå¦‚æœæ²¡æœ‰åŒ…ç®¡ç†å·¥å…·ï¼Œåªèƒ½å»è¿™é‡Œä¸‹è½½ï¼š&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://packages.msys2.org/package/zsh?repo=msys&amp;amp;variant=x86_64" target="_blank" rel="noopener"
>åœ°å€&lt;/a>ã€&lt;a class="link" href="https://arlettebrook.github.io/docs/zsh-5.9-2-x86_64.pkg.tar.zst" >å¤‡ç”¨&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318211226752.png"
width="1805"
height="1004"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318211226752_hub9924f94a57f81d5a3f9ba3704840859_162646_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318211226752_hub9924f94a57f81d5a3f9ba3704840859_162646_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318211226752"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="431px"
>&lt;/p>
&lt;p>åç»­æ•™ç¨‹æ˜¯ä»¥æ–‡ä»¶ä¸‹è½½ä¸ºä¾‹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸‹è½½å®Œæˆä¹‹åå°†å‹ç¼©åŒ…è§£å‹ï¼Œç”¨rarå°±å¯ä»¥è§£å‹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†è§£å‹çš„å†…å®¹å…¨éƒ¨å‰ªåˆ‡åˆ°gitçš„å®‰è£…ç›®å½•ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>éœ€è¦æƒé™çš„è¯å°±æˆæƒï¼ˆå¯èƒ½éœ€è¦å¤šæ¬¡æˆæƒï¼‰ï¼Œé‡åçš„è¯ç›´æ¥è¦†ç›–ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318211742512.png"
width="1123"
height="569"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318211742512_hu0d0d9fcf86c988e4e9d5ae9475f1bc04_305509_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318211742512_hu0d0d9fcf86c988e4e9d5ae9475f1bc04_305509_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="zshå®‰è£…"
class="gallery-image"
data-flex-grow="197"
data-flex-basis="473px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰“å¼€ &lt;code>Git Bash&lt;/code> æ ‡ç­¾é¡µæˆ–è€…ç›´æ¥å³é”®æ‰“å¼€ &lt;code>Git bash&lt;/code> è¾“å…¥ &lt;code>zsh&lt;/code>ï¼Œå‡ºç°ä¸‹å›¾åˆ™å®‰è£…æˆåŠŸï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318211859689.png"
width="1464"
height="619"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318211859689_hu888a0765c6558b2f5b304f38d42d14d9_183280_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318211859689_hu888a0765c6558b2f5b304f38d42d14d9_183280_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="zshå®‰è£…æˆåŠŸ"
class="gallery-image"
data-flex-grow="236"
data-flex-basis="567px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æš‚æ—¶å…ˆä¸è¿›è¡Œå…¶ä»–è®¾ç½®ï¼Œç›´æ¥è¾“å…¥ &lt;code>0&lt;/code> ç»“æŸå¹¶ç”Ÿæˆ &lt;code>.zshrc&lt;/code> é…ç½®æ–‡ä»¶å³å¯ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>è¯¥æ–‡ä»¶åœ¨å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œwin+rè¾“å…¥.å›è½¦è¿›å…¥å°±æ˜¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç”±äºç°åœ¨æ²¡æœ‰å®‰è£… &lt;code>zsh&lt;/code> ä¸»é¢˜ï¼Œå¯ä»¥è¿™æ ·åŒºåˆ† &lt;code>bash&lt;/code> å’Œ &lt;code>zsh&lt;/code>ï¼Œ&lt;code>bash&lt;/code>çš„å…‰æ ‡åœ¨ç¬¬äºŒè¡Œï¼Œ&lt;code>zsh&lt;/code>çš„å…‰æ ‡åœ¨åŒä¸€è¡Œï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318212921004.png"
width="1122"
height="353"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318212921004_huaa3a3d2a895f8ba462c747670bfa2bbe_107053_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318212921004_huaa3a3d2a895f8ba462c747670bfa2bbe_107053_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318212921004"
class="gallery-image"
data-flex-grow="317"
data-flex-basis="762px"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è®¾ç½®é»˜è®¤å¯åŠ¨&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ¯æ¬¡æ‰“å¼€ &lt;code>Git Bash&lt;/code> ç»ˆç«¯ï¼Œä½ ä¼šå‘ç°é»˜è®¤è¿˜æ˜¯ &lt;code>Bash&lt;/code> ï¼Œè€Œä¸æ˜¯ &lt;code>Zsh&lt;/code>ï¼Œå¯ä»¥é€šè¿‡ç¼–è¾‘ &lt;code>Bash&lt;/code> ç»ˆç«¯çš„é…ç½®æ–‡ä»¶ &lt;code>.bashrc&lt;/code> æ¥å®ç°é»˜è®¤ä½¿ç”¨ &lt;code>Zsh&lt;/code>ï¼Œåœ¨ &lt;code>Git Bash&lt;/code> ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim ~/.bashrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Vim&lt;/code> é»˜è®¤æ˜¯å‘½ä»¤æ¨¡å¼ï¼Œä½ å¯ä»¥ç›´æ¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å°†é…ç½®å†…å®¹ç²˜è´´è¿›å»ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -t &lt;span class="m">1&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="c1">#1è¡¨ç¤ºæ ‡å‡†è¾“å‡ºï¼Œç”¨äºåˆ¤æ–­æ ‡å‡†è¾“å‡ºæ˜¯å¦è¿æ¥åˆ°ç»ˆç«¯ï¼ˆttyï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ‰§è¡Œ zsh å‘½ä»¤æ¥åˆ‡æ¢ä¸º Zsh Shellã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exec&lt;/span> zsh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318213908476.png"
width="512"
height="81"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318213908476_hu1e5990fd6da39c6510ea70d89bf2b8f4_6754_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318213908476_hu1e5990fd6da39c6510ea70d89bf2b8f4_6754_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318213908476"
class="gallery-image"
data-flex-grow="632"
data-flex-basis="1517px"
>&lt;/p>
&lt;p>åé¢æ˜¯vimçš„å¸¸ç”¨å‘½ä»¤ï¼Œ&lt;code>aã€shift+insertã€escã€+:wq&lt;/code>æœ€åæŒ‰å›è½¦é”®ï¼Œä¿å­˜é€€å‡º&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318214206109.png"
width="688"
height="574"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318214206109_hu931784de102814e41646c4d584a25f97_58094_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318214206109_hu931784de102814e41646c4d584a25f97_58094_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318214206109"
class="gallery-image"
data-flex-grow="119"
data-flex-basis="287px"
>&lt;/p>
&lt;p>æ³¨æ„ï¼šæ³¨é‡Šï¼ˆ#ï¼‰è°ƒè¿™ä¸‰è¡Œä»£ç ï¼Œå¯åŠ¨git bashæ—¶å°±ä¸ä¼šå¯ç”¨zshã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>ä¹‹åå†æ‰“å¼€ &lt;code>Git Bash&lt;/code> ç»ˆç«¯ï¼Œé»˜è®¤å°±ä¼šä½¿ç”¨ &lt;code>Zsh&lt;/code> äº†ã€‚ç¬¬ä¸€æ¬¡å¯èƒ½æœ‰ä¸€ä¸ªè­¦å‘Šï¼šå¤§æ¦‚æ˜¯æ‰¾ä¸åˆ° &lt;code>~/bash_profile&lt;/code> ç­‰ä¸€äº›æ–‡ä»¶ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä»¥åä¸ä¼šå†å‡ºç°äº†ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318214357006.png"
width="1354"
height="303"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318214357006_hufd137b992942db01eb4ba2ae0522f34e_39071_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318214357006_hufd137b992942db01eb4ba2ae0522f34e_39071_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318214357006"
class="gallery-image"
data-flex-grow="446"
data-flex-basis="1072px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è‡³æ­¤windowsä¸Šå®‰è£…zshå®Œæˆã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="linuxä¸Šå®‰è£…">
&lt;a href="#linux%e4%b8%8a%e5%ae%89%e8%a3%85" class="header-anchor">#&lt;/a>
Linuxä¸Šå®‰è£…
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>å‡†å¤‡ï¼š&lt;/p>
&lt;p>æŸ¥çœ‹å½“å‰ shell&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-SHELL" data-lang="SHELL">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$SHELL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$0&lt;/span> &lt;span class="c1"># or&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318234623575.png"
width="504"
height="94"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318234623575_hu6eabb1d7bd44ae1fe519b45cc99cdfaf_10368_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318234623575_hu6eabb1d7bd44ae1fe519b45cc99cdfaf_10368_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318234623575"
class="gallery-image"
data-flex-grow="536"
data-flex-basis="1286px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰è£… zsh&lt;/p>
&lt;p>CentOSï¼šè¦ç®¡ç†å‘˜èº«ä»½&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum install -y zsh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Ubuntuï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt install -y zsh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318235111316.png"
width="1449"
height="636"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318235111316_hu2bed67af52d98caf3d11136dc6de7739_97734_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318235111316_hu2bed67af52d98caf3d11136dc6de7739_97734_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318235111316"
class="gallery-image"
data-flex-grow="227"
data-flex-basis="546px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;em>å°†zshæ›¿æ¢ä¸ºé»˜è®¤shell&lt;/em>&lt;/p>
&lt;ol>
&lt;li>ä¸º root è®¾ç½®é»˜è®¤ shell&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chsh -s /bin/zsh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿”å›ç»“æœå¦‚ä¸‹ï¼Œè¡¨ç¤ºåˆ‡æ¢å®Œæˆï¼ˆä¸‹è½½å®‰è£… oh-my-zsh æˆåŠŸåä¹Ÿä¼šæç¤ºåˆ‡æ¢ï¼‰&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318235425237-1710777267767-1.png"
width="837"
height="139"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318235425237-1710777267767-1_huf140ac723ea08623c53dd917a2bbf634_32603_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318235425237-1710777267767-1_huf140ac723ea08623c53dd917a2bbf634_32603_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318235425237"
class="gallery-image"
data-flex-grow="602"
data-flex-basis="1445px"
>&lt;/p>
&lt;ol start="2">
&lt;li>
&lt;p>ä¸ºç‰¹å®šç”¨æˆ·è®¾ç½®é»˜è®¤ shell&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo chsh -s /bin/zsh &amp;lt;username&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;lt;username&amp;gt; æ›¿æ¢ä¸ºå®é™…ç”¨æˆ·å&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;em>åœ¨ CentOS 8 ä¸­å¯èƒ½æŠ¥é”™ Command not foundï¼Œæ‰§è¡Œ&lt;/em> &lt;code>sudo dnf install util-linux-user&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>é‡æ–°ç™»å½•shellä¹‹åï¼Œé»˜è®¤å°±æ˜¯zsh&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319000037682.png"
width="1055"
height="150"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319000037682_hu41e05cc99389c4a9c4d54b707fa6ef54_27255_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319000037682_hu41e05cc99389c4a9c4d54b707fa6ef54_27255_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240319000037682"
class="gallery-image"
data-flex-grow="703"
data-flex-basis="1688px"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>è‡³æ­¤Linuxå®‰è£…zshå®Œæˆã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="å®‰è£…-oh-my-zsh">
&lt;a href="#%e5%ae%89%e8%a3%85-oh-my-zsh" class="header-anchor">#&lt;/a>
å®‰è£… Oh My Zsh
&lt;/h3>&lt;blockquote>
&lt;blockquote>
&lt;p>æˆåŠŸå®‰è£…äº†zshï¼Œè¿˜éœ€è¦å®‰è£…Oh My Zshï¼Œå®ƒå¯¹zshè¿›è¡Œäº†æ‰©å±•ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨zshäº†ï¼Œè€Œä¸æ˜¯bashçš„åŸå› ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ³¨æ„ï¼šä»¥ä¸‹æ–¹æ³•åŒé€‚ç”¨äºå®‰è£…äº†zshçš„ç¯å¢ƒï¼Œå¦‚Linuxã€‚&lt;/p>
&lt;/blockquote>
&lt;ol>
&lt;li>
&lt;p>åœ¨å®‰è£…å¥½ &lt;code>Zsh&lt;/code> ç»ˆç«¯ä¹‹åï¼Œçœ‹èµ·æ¥è·Ÿ &lt;code>Bash&lt;/code> ç»ˆç«¯å¹¶æ— å¤ªå¤§çš„åŒºåˆ«ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰è¿›è¡Œè®¾ç½®ã€‚è€Œ &lt;code>Oh My Zsh&lt;/code> å¯ä»¥ç”¨äºç®¡ç† &lt;code>Zsh&lt;/code>é…ç½®ã€‚å®ƒæ†ç»‘äº†æ•°åƒä¸ªæœ‰ç”¨çš„åŠŸèƒ½ã€åŠ©æ‰‹ã€æ’ä»¶ã€ä¸»é¢˜ç­‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®˜æ–¹ï¼š &lt;a class="link" href="https://github.com/ohmyzsh/ohmyzsh" target="_blank" rel="noopener"
>https://github.com/ohmyzsh/ohmyzsh&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤å¹¶æŒ‰å›è½¦æ‰§è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sh -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è¿™æ¡å‘½ä»¤å›½å†…éœ€è¦å¼€ä»£ç†ï¼Œä¸”æ¨¡å¼ä¸ºTunç»ˆç«¯æ‰èƒ½è®¿é—®ã€‚å®˜æ–¹æœ‰æä¾›å›½å†…çš„ä¸‹è½½åœ°å€ï¼Œå¤±è´¥å¤šè¯•å‡ æ¬¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sh -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>curl -fsSL https://install.ohmyz.sh/&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è¿˜éœ€è¦æœ‰curlä»¥åŠgitå·¥å…·ï¼Œæˆ‘MinGWé»˜è®¤å®‰è£…äº†curlå‘½ä»¤ï¼Œå¦‚æœå¤±è´¥å¯ä»¥ä¸‹è½½ohmyzshå®‰è£…è„šæœ¬æœ¬åœ°è¿è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sh ./install.sh &lt;span class="c1">#ç¦»çº¿å®‰è£…,æ³¨æ„è¦è¿›å…¥è„šæœ¬çš„ä¸‹è½½ä½ç½®&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å‡ºç°ä¸‹å›¾çš„å†…å®¹å°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œæˆ–é•¿æ—¶é—´æ²¡æœ‰å“åº”ï¼Œå¤šè¯•å‡ æ¬¡å³å¯ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318223757028.png"
width="1139"
height="591"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318223757028_huad0b7df38215d3d38bab2d1533fb0332_323810_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318223757028_huad0b7df38215d3d38bab2d1533fb0332_323810_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="windowsæˆåŠŸå®‰è£…ohmyzsh"
class="gallery-image"
data-flex-grow="192"
data-flex-basis="462px"
>&lt;/p>
&lt;blockquote>
&lt;p>æœ€åä¸€è¡Œçš„ &lt;code>ERROR&lt;/code> å¯ä»¥å¿½ç•¥ï¼Œwindowsæ­£å¸¸ï¼ŒLinuxæ²¡æœ‰&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;p>â€‹ &lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319000513971.png"
width="1453"
height="680"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319000513971_huabb79a28aae75544a980d294d720869d_182993_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319000513971_huabb79a28aae75544a980d294d720869d_182993_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="LinuxæˆåŠŸå®‰è£…ohmyzsh"
class="gallery-image"
data-flex-grow="213"
data-flex-basis="512px"
>&lt;/p>
&lt;h4 id="é…ç½®-zsh">
&lt;a href="#%e9%85%8d%e7%bd%ae-zsh" class="header-anchor">#&lt;/a>
é…ç½® zsh
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>&lt;code>Zsh&lt;/code>çš„é…ç½®æ–‡ä»¶åœ¨ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œæ–‡ä»¶åæ˜¯ &lt;code>.zshrc&lt;/code>ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å¯¹ &lt;code>Zsh&lt;/code>è¿›è¡Œä¸€äº›å®šåˆ¶åŒ–é…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¾‘å¹¶ä¿å­˜é…ç½®æ–‡ä»¶ä¹‹åï¼Œå¹¶ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰ç»ˆç«¯é‡æ–°æ‰“å¼€ï¼Œæˆ–è€…ä½¿ç”¨å‘½ä»¤è®©é…ç½®ç”Ÿæ•ˆï¼š&lt;/p>
&lt;p>sourceå¯ä»¥æ›¿æ¢æˆ.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. ~/.zshrc &lt;span class="c1"># or&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h5 id="é…ç½®ä¸»é¢˜">
&lt;a href="#%e9%85%8d%e7%bd%ae%e4%b8%bb%e9%a2%98" class="header-anchor">#&lt;/a>
&lt;strong>é…ç½®ä¸»é¢˜&lt;/strong>
&lt;/h5>&lt;ol>
&lt;li>
&lt;p>å°±æ˜¯å¯¹.zshrcé…ç½®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>Oh My Zsh&lt;/code> å®‰è£…é»˜ä¹‹åï¼Œé»˜è®¤ä½¿ç”¨ä¸»é¢˜æ˜¯ &lt;code>robbyrussell&lt;/code>ï¼Œå¯ä»¥ä¿®æ”¹ &lt;code>.zshrc&lt;/code> é…ç½®ä¸­çš„ &lt;code>ZSH_THEME&lt;/code> å­—æ®µï¼Œæ‰€æœ‰å¯ç”¨ä¸»é¢˜å¯å‚è€ƒ&lt;a class="link" href="https://github.com/ohmyzsh/ohmyzsh/wiki/Themes" target="_blank" rel="noopener"
>ohmyzshå®˜æ–¹ä¸»é¢˜é¡µé¢&lt;/a>ï¼Œè¿™é‡Œå…ˆé…ç½®ä¸€ä¸‹æˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„ä¸»é¢˜ï¼šgentoo or eastwood or daveverwer or bira&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318225618165.png"
width="1416"
height="645"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318225618165_huef769454bc107dc852ce76255764dbbe_224565_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318225618165_huef769454bc107dc852ce76255764dbbe_224565_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ä¿®æ”¹ä¸»é¢˜"
class="gallery-image"
data-flex-grow="219"
data-flex-basis="526px"
>&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/bira.jpg"
width="1650"
height="1110"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/bira_hu1442ac57ea79dc6d09823129d334f3f8_101939_480x0_resize_q75_box.jpg 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/bira_hu1442ac57ea79dc6d09823129d334f3f8_101939_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="biraä¸»é¢˜"
class="gallery-image"
data-flex-grow="148"
data-flex-basis="356px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„ï¼š&lt;code>ZSH_THEME&lt;/code>åªèƒ½ä¿®æ”¹ä¸ºå®˜æ–¹æä¾›çš„ä¸»é¢˜åï¼Œç„¶åé‡æ–°åŠ è½½&lt;code>.zshrc&lt;/code>æ–‡ä»¶ï¼Œå°±èƒ½ä¿®æ”¹ä¸ºæŒ‡å®šçš„ä¸»é¢˜ã€‚&lt;/p>
&lt;ol>
&lt;li>å®˜æ–¹æä¾›çš„ä¸»é¢˜éƒ½ä¿å­˜åœ¨&lt;code>~/.oh-my-zsh/themes&lt;/code>ç›®å½•ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸»é¢˜ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h5 id="é…ç½®æ’ä»¶">
&lt;a href="#%e9%85%8d%e7%bd%ae%e6%8f%92%e4%bb%b6" class="header-anchor">#&lt;/a>
&lt;strong>é…ç½®æ’ä»¶&lt;/strong>
&lt;/h5>&lt;ol>
&lt;li>
&lt;p>æ’ä»¶Oh My Zsh é™„å¸¦äº†å¤§é‡æ’ä»¶ä¾›æ‚¨ä½¿ç”¨ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹&lt;a class="link" href="https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins" target="_blank" rel="noopener"
>æ’ä»¶&lt;/a>ç›®å½•å’Œ/æˆ–&lt;a class="link" href="https://github.com/ohmyzsh/ohmyzsh/wiki/Plugins" target="_blank" rel="noopener"
>wiki&lt;/a>ï¼Œäº†è§£å½“å‰å¯ç”¨çš„å†…å®¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡ä½¿ç”¨æ’ä»¶ï¼Œå¯ä»¥è®© &lt;code>Zsh&lt;/code> çš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œ&lt;code>Zsh&lt;/code> å’Œ &lt;code>Oh My Zsh&lt;/code> è‡ªå¸¦äº†ä¸€äº›å®ç”¨çš„æ’ä»¶ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½å…¶ä»–çš„æ’ä»¶ã€‚ å¦‚ &lt;code>Zsh&lt;/code> è‡ªå¸¦ &lt;code>Git&lt;/code> æ’ä»¶ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œæ˜¾ç¤º &lt;code>Git&lt;/code> ç›¸å…³çš„ä¿¡æ¯ï¼Œå¹¶æä¾›äº†ä¸€äº›æ“ä½œ &lt;code>Git&lt;/code> çš„åˆ«åï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">gaa&lt;/span> &lt;span class="o">=&lt;/span> git add --all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">gcmsg&lt;/span> &lt;span class="o">=&lt;/span> git commit -m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ga&lt;/span> &lt;span class="o">=&lt;/span> git add
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">gst&lt;/span> &lt;span class="o">=&lt;/span> git status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">gp&lt;/span> &lt;span class="o">=&lt;/span> git push
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318230853061.png"
width="1005"
height="193"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318230853061_hu25160011d60cf4d886eefedb303c67fd_51614_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318230853061_hu25160011d60cf4d886eefedb303c67fd_51614_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318230853061"
class="gallery-image"
data-flex-grow="520"
data-flex-basis="1249px"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h6 id="è‡ªåŠ¨è¡¥å…¨">
&lt;a href="#%e8%87%aa%e5%8a%a8%e8%a1%a5%e5%85%a8" class="header-anchor">#&lt;/a>
&lt;strong>è‡ªåŠ¨è¡¥å…¨&lt;/strong>
&lt;/h6>&lt;ol>
&lt;li>
&lt;p>&lt;code>zsh-autosuggestions&lt;/code> æ’ä»¶ï¼Œå¯ä»¥åœ¨ä½ å†å²æŒ‡ä»¤ä¸­æ‰¾åˆ°ä¸ä½ å½“å‰è¾“å…¥æŒ‡ä»¤åŒ¹é…çš„è®°å½•ï¼Œå¹¶é«˜äº®æ˜¾ç¤ºï¼Œå¦‚æœæƒ³ç›´æ¥ä½¿ç”¨ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å³æ–¹å‘é”®è¡¥å…¨ã€‚ å®‰è£…æ’ä»¶ï¼Œåœ¨ç»ˆç«¯åˆ†åˆ«æ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤ï¼šå®˜æ–¹&lt;a class="link" href="https://github.com/zsh-users/zsh-autosuggestions" target="_blank" rel="noopener"
>zsh-autosuggestions&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/.oh-my-zsh/custom/plugins
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#æŒ‡å®šäº†å…‹éš†çš„ä½ç½®ï¼Œå°±æ˜¯ä»€ä¹ˆåˆ‡æ¢çš„åœ°æ–¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/zsh-users/zsh-autosuggestions &lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH_CUSTOM&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.oh-my-zsh/custom&lt;/span>&lt;span class="si">}&lt;/span>/plugins/zsh-autosuggestions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ’ä»¶ä¸‹è½½å®Œæˆä¹‹åï¼Œç¼–è¾‘ &lt;code>~/.zshrc&lt;/code> é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹æ’ä»¶ç›¸å…³é…ç½®é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ’ä»¶ä¸‹è½½å®Œæˆä¹‹åï¼Œç¼–è¾‘ &lt;code>~/.zshrc&lt;/code> é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹æ’ä»¶ç›¸å…³é…ç½®é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318232212520.png"
width="1030"
height="276"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318232212520_hu60e5cfc85ad4aa44992b56b8a46f4def_60716_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318232212520_hu60e5cfc85ad4aa44992b56b8a46f4def_60716_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318232212520"
class="gallery-image"
data-flex-grow="373"
data-flex-basis="895px"
>&lt;/p>
&lt;p>&lt;em>è¯·æ³¨æ„ï¼Œæ’ä»¶ç”±ç©ºæ ¼ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦&amp;hellip;ï¼‰åˆ†éš”ã€‚&lt;strong>è¯·å‹¿&lt;/strong>åœ¨å®ƒä»¬ä¹‹é—´ä½¿ç”¨é€—å·ï¼Œå¦åˆ™ä¼šæŸåã€‚&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¿å­˜é€€å‡ºä¹‹åï¼Œè®°å¾—ä½¿ç”¨å‘½ä»¤ &lt;code>source ~/.zshrc&lt;/code> é‡è½½é…ç½®ã€‚è¯¥æ’ä»¶ç”Ÿæ•ˆä¹‹åï¼Œåœ¨ä½¿ç”¨å‘½ä»¤çš„æ—¶å€™ï¼Œå°±ä¼šåŒ¹é…æˆ‘ä»¬ä½¿ç”¨çš„å‘½ä»¤ï¼Œå³é”®å¯ä»¥ç›´æ¥è¡¥å…¨ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318232512528.png"
width="719"
height="65"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318232512528_hu33a13ebc7a5392d3e95df131e5ca4c30_6189_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318232512528_hu33a13ebc7a5392d3e95df131e5ca4c30_6189_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318232512528"
class="gallery-image"
data-flex-grow="1106"
data-flex-basis="2654px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœä½ ä¸å–œæ¬¢æç¤ºé»˜è®¤çš„æµ…ç°è‰²ï¼Œå¯ä»¥åœ¨ &lt;code>~/.zshrc&lt;/code> ä¸­ä¿®æ”¹ï¼ˆæ²¡æœ‰é…ç½®é¡¹å°±æ·»åŠ ï¼‰ï¼Œæ›´å¤šé…ç½®å¯ä»¥å‚è€ƒ&lt;a class="link" href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fzsh-users%2Fzsh-autosuggestions%23suggestion-highlight-style" target="_blank" rel="noopener"
>zsh-autosuggestionså®˜æ–¹æ–‡æ¡£&lt;/a>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;fg=#9fc5e8&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h6 id="ç›®å½•è·³è½¬">
&lt;a href="#%e7%9b%ae%e5%bd%95%e8%b7%b3%e8%bd%ac" class="header-anchor">#&lt;/a>
&lt;strong>ç›®å½•è·³è½¬&lt;/strong>
&lt;/h6>&lt;ol>
&lt;li>
&lt;p>&lt;code>Zsh&lt;/code> è‡ªå¸¦æœ‰ä¸€ä¸ªæ’ä»¶ &lt;code>z&lt;/code>ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨è®¿é—®è¿‡çš„ç›®å½•ä¸­å¿«é€Ÿè·³è½¬ï¼Œå°†è¯¥æ’ä»¶é…ç½®åˆ° &lt;code>~/.zshrc&lt;/code> æ–‡ä»¶ä¸­å³å¯ä½¿ç”¨ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318232841685.png"
width="827"
height="417"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318232841685_hu52be7fb4b48f942c9e20043399c70353_68900_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318232841685_hu52be7fb4b48f942c9e20043399c70353_68900_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318232841685"
class="gallery-image"
data-flex-grow="198"
data-flex-basis="475px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¿å­˜é€€å‡ºä¹‹åï¼Œé‡è½½é…ç½®ï¼Œéšæ„è¿›å…¥ä¸€äº›ç›®å½•ï¼Œä¹‹åå†ä½¿ç”¨å‘½ä»¤ &lt;code>z&lt;/code> å°±å¯ä»¥å®ç°å¿«é€Ÿè·³è½¬ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318233202252.png"
width="985"
height="194"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318233202252_hu1605e0b8e4c38e2a71d1cb2b9776b308_70157_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318233202252_hu1605e0b8e4c38e2a71d1cb2b9776b308_70157_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318233202252"
class="gallery-image"
data-flex-grow="507"
data-flex-basis="1218px"
>&lt;/p>
&lt;blockquote>
&lt;p>æˆ–è®¸ç›¸æ¯”äº &lt;code>z&lt;/code>ï¼Œæ›´å¤šäººä¼šé€‰æ‹©ä½¿ç”¨ &lt;code>autojump&lt;/code>ï¼Œå¦‚æœæ˜¯ &lt;code>Mac&lt;/code> æˆ–è€… &lt;code>Linux&lt;/code> æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œ&lt;code>Windows&lt;/code> å°±ä¸å¤ªå»ºè®®æŠ˜è…¾äº†ã€‚&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;h6 id="å…¶ä»–æ’ä»¶">
&lt;a href="#%e5%85%b6%e4%bb%96%e6%8f%92%e4%bb%b6" class="header-anchor">#&lt;/a>
&lt;strong>å…¶ä»–æ’ä»¶&lt;/strong>
&lt;/h6>&lt;ol>
&lt;li>
&lt;p>&lt;code>zsh-syntax-highlighting&lt;/code>ï¼šè¿™ä¸ªæ’ä»¶å¯ä»¥è¯†åˆ«çš„ &lt;code>shell&lt;/code> å‘½ä»¤å¹¶é«˜äº®æ˜¾ç¤º&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git &lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH_CUSTOM&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.oh-my-zsh&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="p">/custom&lt;/span>&lt;span class="si">}&lt;/span>/plugins/zsh-syntax-highlighting
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319002900060.png"
width="1010"
height="455"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319002900060_hu53735137fd792790a8c7ae0e70edb371_83209_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319002900060_hu53735137fd792790a8c7ae0e70edb371_83209_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240319002900060"
class="gallery-image"
data-flex-grow="221"
data-flex-basis="532px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/zsh-users/zsh-completions" target="_blank" rel="noopener"
>zsh-completions&lt;/a>ï¼šé¢å¤–çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œç”¨äºè¡¥å…… zsh ä¸­å°šä¸æ”¯æŒçš„å‘½ä»¤è¡¥å…¨ï¼Œè¯¥é¡¹ç›®å°†åœ¨å®Œå–„æ—¶åˆå¹¶åˆ° zshã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl"> git clone https://github.com/zsh-users/zsh-completions &lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH_CUSTOM&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.oh-my-zsh&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="p">/custom&lt;/span>&lt;span class="si">}&lt;/span>/plugins/zsh-completions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶ååœ¨&lt;code>.zshrc&lt;/code>æ–‡ä»¶é‡Œé¢çš„&lt;code>source &amp;quot;$ZSH/oh-my-zsh.sh&amp;quot;&lt;/code>è¿™ä¸€è¡Œå‰æ·»åŠ ä»¥ä¸‹ä»£ç &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">fpath&lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH_CUSTOM&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.oh-my-zsh&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="p">/custom&lt;/span>&lt;span class="si">}&lt;/span>/plugins/zsh-completions/src
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319004250240.png"
width="1342"
height="553"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319004250240_huf5e790ff3f5b1ccb45b3ad89c80b769a_128207_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240319004250240_huf5e790ff3f5b1ccb45b3ad89c80b769a_128207_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240319004250240"
class="gallery-image"
data-flex-grow="242"
data-flex-basis="582px"
>&lt;/p>
&lt;p>Note: adding it as a regular Oh My ZSH! plugin will not work properly (see &lt;a class="link" href="https://github.com/zsh-users/zsh-completions/issues/603" target="_blank" rel="noopener"
>#603&lt;/a>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Incremental completion on zshï¼šå¢å¼ºçš„å®æ—¶è‡ªåŠ¨å‘½ä»¤è¡¥å…¨æ’ä»¶ï¼š&lt;a class="link" href="https://mimosa-pudica.net/zsh-incremental.html" target="_blank" rel="noopener"
>Incremental completion on zsh&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>*è¯¥æ’ä»¶å¯¹æ€§èƒ½ä¼¼ä¹æœ‰ä¸€ç‚¹ç‚¹å½±å“ï¼Œè¯·æ ¹æ®éœ€è¦å¯ç”¨ã€‚*å…¶å®ä½¿ç”¨é»˜è®¤çš„è‡ªåŠ¨è¡¥é½ï¼ˆtabï¼‰å¤Ÿç”¨äº†ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä½œç”¨å¦‚å›¾ï¼š&lt;/p>
&lt;p>â€‹ &lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/zsh.gif"
width="404"
height="204"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/zsh_hu5636cf9d5e0f936b681997f757b3864e_42534_480x0_resize_box_1.gif 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/zsh_hu5636cf9d5e0f936b681997f757b3864e_42534_1024x0_resize_box_1.gif 1024w"
loading="lazy"
alt="incr"
class="gallery-image"
data-flex-grow="198"
data-flex-basis="475px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>é…ç½®åˆ«å&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>Zsh&lt;/code> çš„ &lt;code>alias&lt;/code> é…ç½®é¡¹å¯ä»¥è‡ªå®šä¹‰å‘½ä»¤åˆ«åï¼Œåœ¨ä½¿ç”¨ä¸€äº›æ¯”è¾ƒå¤æ‚çš„å‘½ä»¤æ—¶ï¼Œä½¿ç”¨åˆ«åå¯ä»¥æé«˜æ•ˆç‡ï¼Œè¿™é‡Œä¸¾ä¾‹æ·»åŠ ä¸€ä¸ª &lt;code>Git&lt;/code> æ—¥å¿—çš„åˆ«åï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> &lt;span class="nv">gli&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;git log --color --graph --pretty=format:&amp;#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&amp;#39; --abbrev-commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ç­‰å·ä¸¤è¾¹ä¸è¦æœ‰ç©ºæ ¼&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="shellä½¿ç”¨">
&lt;a href="#shell%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
Shellä½¿ç”¨
&lt;/h2>&lt;p>åœ¨ä¸åŒçš„ç»ˆç«¯ä¸­æˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸åŒçš„Shellæ¥ä½¿ç”¨ã€‚å¦‚ï¼š&lt;/p>
&lt;ol>
&lt;li>åœ¨&lt;a class="link" href="#Linux%e4%b8%8a%e5%ae%89%e8%a3%85" >Linuxå®‰è£…zsh&lt;/a>ä¸­æˆ‘ä»¬å°±æŒ‡å®šäº†Linuxç»ˆç«¯çš„é»˜è®¤Shellä¸ºzshã€‚&lt;/li>
&lt;li>åœ¨ç¨åä»‹ç»çš„[Windows Terminal](#Windows Terminal)ä¸­ï¼Œä¹Ÿä¼šæŒ‡å®šWindows Terminalç»ˆç«¯çš„é»˜è®¤Shellä¸ºGit bashã€‚&lt;/li>
&lt;li>ä¸‹é¢ä»‹ç»åœ¨IDEç»ˆç«¯ä¸­è®¾ç½®è‡ªå·±çš„Shellã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="è®¾ç½®ideç»ˆç«¯çš„shellä¸ºgit-bash">
&lt;a href="#%e8%ae%be%e7%bd%aeide%e7%bb%88%e7%ab%af%e7%9a%84shell%e4%b8%bagit-bash" class="header-anchor">#&lt;/a>
è®¾ç½®IDEç»ˆç«¯çš„Shellä¸ºgit bash
&lt;/h3>&lt;p>å¦‚æœä½ æŒ‰ç…§ä¸Šé¢çš„æ•™ç¨‹æˆåŠŸåœ¨windowsä¸Šå®‰è£…äº†zshï¼Œé‚£ä¹ˆè®¾ç½®Shellä¸ºgit bashï¼Œä¹Ÿå°±æ˜¯è®¾ç½®ä¸ºzshã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šæ²¡æœ‰å®‰è£…zshçš„æƒ…å†µä¸‹ä¹Ÿèƒ½è®¾ç½®ä¸ºgit bashã€‚&lt;strong>ä¼˜ç‚¹ï¼šé«˜äº®ã€ä¸ªäººçˆ±å¥½&lt;/strong>ã€‚&lt;/p>
&lt;p>è¿™é‡Œä»¥golandå¼€å‘å·¥å…·ä¸ºä¾‹ï¼ŒjetBrainså…¨ç³»åˆ—å·®ä¸å¤šï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>è¿›å…¥è®¾ç½®æ‰¾åˆ°ç»ˆç«¯&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318220456766.png"
width="800"
height="471"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318220456766_huf6661fe7348dbc56cdcf4082cea67043_42129_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318220456766_huf6661fe7348dbc56cdcf4082cea67043_42129_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318220456766"
class="gallery-image"
data-flex-grow="169"
data-flex-basis="407px"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318220625318.png"
width="1472"
height="1069"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318220625318_hu2734f748d7e96269c0f105fe59f8f0bc_156571_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318220625318_hu2734f748d7e96269c0f105fe59f8f0bc_156571_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318220625318"
class="gallery-image"
data-flex-grow="137"
data-flex-basis="330px"
>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Shell pathä¸ºgitå®‰è£…è·¯å¾„é‡Œé¢çš„&lt;code>bin\bash.exe&lt;/code>,&lt;strong>æ³¨æ„ä¸æ˜¯git-bash&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ³¨æ„ï¼šè¿˜éœ€è¦ä¸º&lt;code>bash.exe&lt;/code>å‘½ä»¤æŒ‡å®šå¯åŠ¨å‚æ•°&lt;code>--login -i&lt;/code>ï¼š&lt;/p>
&lt;p>å›¾ä¸­æ²¡æœ‰åŠ å…¥ï¼ŒåæœŸå‘ç°çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>æ„æ€æ˜¯å¯åŠ¨ç™»å½•Shellï¼Œå¹¶ä¸”äº¤äº’è¿è¡Œã€‚&lt;/p>
&lt;p>ä½œç”¨ï¼šè¿™ä¸ªç¯å¢ƒä¸‹git bashä¸ä¼šå‡ºç°ä¹±ç ï¼Œæ–‡ä»¶ã€ç›®å½•é«˜äº®ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>æœ€ååº”ç”¨å³å¯ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>å…¶ä»–ç±»ä¼¼çš„IDEé…ç½®å·®ä¸å¤šï¼š&lt;/p>
&lt;ol>
&lt;li>vscode&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318221601747.png"
width="1907"
height="577"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318221601747_huf882f54ccc6ea14d13611a8e87d42e56_61223_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318221601747_huf882f54ccc6ea14d13611a8e87d42e56_61223_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318221601747"
class="gallery-image"
data-flex-grow="330"
data-flex-basis="793px"
>&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318221642366.png"
width="1220"
height="320"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318221642366_hucdeb05991bdd3b9b060ad7f96779cb43_53500_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318221642366_hucdeb05991bdd3b9b060ad7f96779cb43_53500_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318221642366"
class="gallery-image"
data-flex-grow="381"
data-flex-basis="915px"
>&lt;/p>
&lt;p>vscodeé»˜è®¤ä¸ºgit bashè®¾ç½®äº†å¯åŠ¨å‚æ•°ï¼Œå¾ˆæ–¹ä¾¿ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="terminalä½¿ç”¨">
&lt;a href="#terminal%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
Terminalä½¿ç”¨
&lt;/h2>&lt;h3 id="windows-terminal">
&lt;a href="#windows-terminal" class="header-anchor">#&lt;/a>
Windows Terminal
&lt;/h3>&lt;p>&lt;strong>Windows Terminal&lt;/strong>å¯ä»¥ç†è§£ä¸ºï¼šæ˜¯cmdçª—å£å’ŒPowerShellç»ˆç«¯çš„å¢å¼ºç‰ˆï¼Œå®ƒå°†windowsç¯å¢ƒä¸‹çš„ç»ˆç«¯ï¼ˆcmdã€PowerShellï¼‰éƒ½é›†æˆåœ¨äº†ä¸€èµ·ã€‚æˆ‘ä»¬åªéœ€è¦æŒ‡å®šå¯¹åº”çš„Shellï¼ˆcmdã€PowerShellã€git bashï¼‰ï¼Œå³å¯ä½¿ç”¨ã€‚&lt;a class="link" href="https://learn.microsoft.com/zh-cn/windows/terminal/" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡æ¡£&lt;/a>ã€‚&lt;/p>
&lt;p>&lt;strong>ä¸»è¦ç‰¹æ€§&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å¤šé€‰é¡¹å¡æ”¯æŒ&lt;/strong>ï¼š
&lt;ul>
&lt;li>ä¸€ä¸ªçª—å£ç®¡ç†å¤šä¸ªShellã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ä¸°å¯Œçš„è‡ªå®šä¹‰é€‰é¡¹&lt;/strong>ï¼š
&lt;ul>
&lt;li>æä¾›äº†å¤šç§è‡ªå®šä¹‰é€‰é¡¹ï¼ŒåŒ…æ‹¬æ›´æ”¹èƒŒæ™¯é¢œè‰²ã€å­—ä½“ã€é€æ˜åº¦ã€ä¸»é¢˜ç­‰ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®ä¸ªäººå–œå¥½å®šåˆ¶ç•Œé¢ã€‚&lt;/li>
&lt;li>åŒä¸€å¥—é…ç½®åº”ç”¨äºä¸åŒShellã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>GPU åŠ é€Ÿçš„æ–‡æœ¬æ¸²æŸ“&lt;/strong>ï¼š
&lt;ul>
&lt;li>åˆ©ç”¨ DirectWrite å’Œ DirectX æä¾› GPU åŠ é€Ÿçš„æ–‡æœ¬æ¸²æŸ“ï¼Œç¡®ä¿å¿«é€Ÿã€æµç•…çš„æ–‡æœ¬æ˜¾ç¤ºå’Œæ»šåŠ¨ä½“éªŒã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>æ”¯æŒå¤šç§å‘½ä»¤è¡Œå·¥å…·å’Œ Shell&lt;/strong>ï¼š
&lt;ul>
&lt;li>æ”¯æŒ PowerShellã€CMDï¼ˆCommand Promptï¼‰ã€Windows Subsystem for Linuxï¼ˆWSLï¼‰ä»¥åŠä»»ä½•å…¶ä»–ä½ å–œæ¬¢çš„å‘½ä»¤è¡Œå·¥å…·ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Unicode å’Œ UTF-8 å­—ç¬¦æ”¯æŒ&lt;/strong>:
&lt;ul>
&lt;li>å®Œæ•´æ”¯æŒ Unicode å’Œ UTF-8 å­—ç¬¦é›†ï¼ŒåŒ…æ‹¬ emoji å’Œå¤æ‚å­—ç¬¦ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>JSON é…ç½®æ–‡ä»¶&lt;/strong>ï¼š
&lt;ul>
&lt;li>ä½¿ç”¨ JSON æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œå…è®¸ç”¨æˆ·çµæ´»åœ°å®šä¹‰è®¾ç½®ï¼Œå¦‚å¯åŠ¨å‘½ä»¤ã€é»˜è®¤ Shellã€å¤–è§‚ç­‰ã€‚
&lt;ul>
&lt;li>å½“ç„¶ä¹Ÿæä¾›äº†å›¾å½¢åŒ–ç•Œé¢ä¿®æ”¹é…ç½®(æ²¡æœ‰éœ€è¦åœ¨Microsoft Storeä¸­å‡çº§åˆ°æœ€æ–°ç‰ˆ)ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>å¯æ‰©å±•æ€§å’Œç¬¬ä¸‰æ–¹å·¥å…·æ”¯æŒ&lt;/strong>ï¼š
&lt;ul>
&lt;li>å¯ä»¥é€šè¿‡æ‰©å±•å’Œæ’ä»¶è¿›ä¸€æ­¥å¢å¼ºåŠŸèƒ½ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹å·¥å…·é›†æˆã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="å®‰è£…">
&lt;a href="#%e5%ae%89%e8%a3%85" class="header-anchor">#&lt;/a>
å®‰è£…
&lt;/h4>&lt;p>Win11ç³»ç»Ÿè‡ªå¸¦Windows Terminalç»ˆç«¯ï¼Œå¹¶ä¸”ä»Windows 11 22H2 ç‰ˆæœ¬å¼€å§‹ï¼ŒWindows Terminal å°†&lt;a class="link" href="https://devblogs.microsoft.com/commandline/windows-terminal-is-now-the-default-in-windows-11/" target="_blank" rel="noopener"
>æ­£å¼æˆä¸º&lt;/a> Windows 11 çš„&lt;strong>é»˜è®¤ç»ˆç«¯&lt;/strong>ã€‚&lt;/p>
&lt;p>å¯¹äºWin10ç³»ç»Ÿéœ€è¦é¢å¤–å®‰è£…ï¼Œæœ€ä½è¦æ±‚æ˜¯Windows 10 2004ï¼ˆå†…éƒ¨ç‰ˆæœ¬ 19041ï¼‰æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>å®‰è£…æ–¹æ³•ï¼š&lt;/p>
&lt;ul>
&lt;li>æ¨èä»Microsoft Storeä¸­ä¸‹è½½å®‰è£…ã€‚ä¼šè‡ªåŠ¨æ›´æ–°ã€‚&lt;/li>
&lt;li>å¦‚æœæ— æ³•ä» Microsoft Store å®‰è£… Windows Terminalï¼Œå¯ä»¥ä»&lt;a class="link" href="https://github.com/microsoft/terminal" target="_blank" rel="noopener"
>githubä»“åº“&lt;/a>çš„&lt;a class="link" href="https://github.com/microsoft/terminal/releases" target="_blank" rel="noopener"
>å‘å¸ƒé¡µé¢&lt;/a>æ‰‹åŠ¨ä¸‹è½½å·²å‘å¸ƒçš„ç‰ˆæœ¬ã€‚
&lt;ul>
&lt;li>å¯ä»¥ä¸‹è½½MSIX Bundle æ–‡ä»¶ï¼ŒåŒå‡»å®‰è£…ã€‚è¿™ç§æ–¹å¼ä¸èƒ½æŒ‡å®šå®‰è£…ä½ç½®ã€‚&lt;/li>
&lt;li>æˆ–è€…æ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿé€‰æ‹©å¯¹åº”çš„å‹ç¼©åŒ…ï¼Œä¸€èˆ¬x64ã€‚
&lt;ul>
&lt;li>è§£å‹åˆ°å“ªé‡Œå°±å®‰è£…åˆ°å“ªé‡Œï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®pathç¯å¢ƒå˜é‡ï¼Œå€¼ä¸ºå®‰è£…ç›®å½•ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>å¯åŠ¨ï¼šåœ¨è¿è¡Œæ¡†ä¸­è¾“å…¥&lt;code>wt&lt;/code>ï¼Œèƒ½æ­£å¸¸å¯åŠ¨ï¼Œè¯æ˜å®‰è£…æˆåŠŸã€‚&lt;/p>
&lt;p>åœ¨å®‰è£…æˆåŠŸä¹‹åï¼Œå»ºè®®å°†Windows Terminalè®¾ç½®ä¸ºé»˜è®¤çš„ç»ˆç«¯åº”ç”¨ç¨‹åºã€‚ç”±Windowså†³å®šï¼Œä¸€èˆ¬å¯åŠ¨çš„ä¹Ÿæ˜¯wtã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240530144500889.png"
width="1670"
height="884"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240530144500889_hu5c28ba441e20ef93d783c5969675f06c_104476_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240530144500889_hu5c28ba441e20ef93d783c5969675f06c_104476_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Windows Terminal"
class="gallery-image"
data-flex-grow="188"
data-flex-basis="453px"
>&lt;/p>
&lt;blockquote>
&lt;p>æ¨èæ–‡ç« ï¼š&lt;a class="link" href="https://blog.csdn.net/2201_75372778/article/details/131342522" target="_blank" rel="noopener"
>Windowsç»ˆç«¯ï¼ˆwindows terminalï¼‰ä»ä¸‹è½½åˆ°è¿è¡Œ&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h4 id="ä¿®æ”¹é»˜è®¤shellä¸ºgit-bash">
&lt;a href="#%e4%bf%ae%e6%94%b9%e9%bb%98%e8%ae%a4shell%e4%b8%bagit-bash" class="header-anchor">#&lt;/a>
ä¿®æ”¹é»˜è®¤Shellä¸ºGit Bash
&lt;/h4>&lt;p>å¯ä»¥æ ¹æ®è‡ªå·±çš„çˆ±å¥½åˆ¤æ–­æ˜¯å¦ä¿®æ”¹ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ¯æ¬¡æ‰“å¼€ &lt;code>Windows Terminal&lt;/code> é»˜è®¤ä½¿ç”¨çš„æ˜¯ &lt;code>Windows PowerShell&lt;/code>ï¼Œè¦æ”¹ä¸ºé»˜è®¤ä½¿ç”¨ &lt;code>Git Bash&lt;/code>ï¼Œåœ¨è®¾ç½®é‡Œé¢è¿›è¡Œè®¾ç½®å³å¯ã€‚åœ¨æ›´å¤šé€‰é¡¹ä¸­ç‚¹å‡»è®¾ç½®ï¼Œæˆ–è€…å³é”®æ ‡é¢˜æ ç©ºç™½å¤„å†ç‚¹å‡»è®¾ç½®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œç‚¹å‡»æ·»åŠ æ–°é…ç½®æ–‡ä»¶â€”â€”æ–°å»ºç©ºé…ç½®æ–‡ä»¶ï¼Œç„¶åå¡«å…¥ä½ çš„git bashæ‰€åœ¨ä½ç½®ã€‚ç¤ºä¾‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240527215848919.png"
width="1670"
height="884"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240527215848919_hue33feb461e1b62e1666cdf423128b31a_100869_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240527215848919_hue33feb461e1b62e1666cdf423128b31a_100869_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="git bash"
class="gallery-image"
data-flex-grow="188"
data-flex-basis="453px"
>&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æŒ‡å®šçš„git bashæ˜¯&lt;code>bin&lt;/code>ç›®å½•ä¸‹çš„bash.exeã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¹¶ä¸”éœ€è¦æŒ‡å®šå¯åŠ¨å‚æ•°&lt;code>--login -i&lt;/code>&lt;/p>
&lt;p>æ„æ€æ˜¯å¯åŠ¨ç™»å½•Shellï¼Œå¹¶ä¸”äº¤äº’è¿è¡Œã€‚&lt;/p>
&lt;p>ä½œç”¨ï¼šè¿™ä¸ªç¯å¢ƒä¸‹git bashä¸ä¼šå‡ºç°ä¹±ç ï¼Œæ–‡ä»¶ã€ç›®å½•é«˜äº®ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>æœ€åï¼Œåœ¨å¯åŠ¨é€‰é¡¹å¡ä¸­è®¾ç½® &lt;code>Git Bash&lt;/code> ä¸ºé»˜è®¤ç»ˆç«¯å¹¶ä¿å­˜é…ç½®ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318215555385.png"
width="1134"
height="574"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318215555385_hu06bad4b213c0bb8ac286672d2aa6ada1_171583_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240318215555385_hu06bad4b213c0bb8ac286672d2aa6ada1_171583_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240318215555385"
class="gallery-image"
data-flex-grow="197"
data-flex-basis="474px"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="ç¾åŒ–">
&lt;a href="#%e7%be%8e%e5%8c%96" class="header-anchor">#&lt;/a>
ç¾åŒ–
&lt;/h4>&lt;p>æˆ‘åœ¨windowsç¯å¢ƒä¸‹ä½¿ç”¨çš„Shellä¸€èˆ¬æ˜¯git bashï¼Œå¯å®šåˆ¶åŒ–å¹¶ä¸é«˜ï¼Œé…ç½®çš„zshä¹Ÿæ²¡æœ‰ä½¿ç”¨ï¼Œä¸è¿‡å¯¹æˆ‘æ¥è¯´å¤Ÿç”¨äº†ã€‚&lt;/p>
&lt;p>æ•ˆæœå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240527230837406.png"
width="1920"
height="1080"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240527230837406_hu46ee813704bb24e925e0f9e86ec4586f_1485751_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/image-20240527230837406_hu46ee813704bb24e925e0f9e86ec4586f_1485751_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240527230837406"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>è¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»å¦‚ä½•å®ç°çš„äº†ï¼ŒWindows Terminaléƒ½æä¾›äº†å›¾å½¢åŒ–é…ç½®ã€‚&lt;/p>
&lt;p>æˆ‘é‡åˆ°çš„é—®é¢˜ï¼šæ€»ç»“ä¸€ä¸‹ï¼šWindows terminalé›†æˆgit-bashï¼Œåˆ é™¤åˆ°å¤´çš„æ—¶å€™çª—å£æ€»æ˜¯é—ªçƒï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è§£å†³åŠæ³•ï¼šæ–°å»ºä¸€ä¸ª~/.inputrc æ–‡ä»¶ï¼Œè¾“å…¥set bell-style noneï¼ˆå¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ä¹Ÿèµ·ä½œç”¨ï¼‰ï¼Œä¿å­˜ï¼›é‡å¯terminalï¼Œé—®é¢˜è§£å†³ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>.inputrc&lt;/code>æ˜¯æ§åˆ¶å‘½ä»¤è¡Œç•Œé¢ï¼ˆç»ˆç«¯ï¼‰è¡Œä¸ºçš„é…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¥å¥‡çš„æ˜¯æˆ‘åªè¦åˆ›å»ºäº†è¿™ä¸ªç©ºæ–‡ä»¶ï¼ŒWindows terminalçš„git bashï¼Œåˆ é™¤åˆ°å¤´ä¹‹åå°±ä¸ä¼šé—ªçƒäº†ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>set bell-style none&lt;/code>ï¼šå…³é—­ç»ˆç«¯æç¤ºéŸ³ã€‚&lt;/li>
&lt;li>&lt;code>set bell-style visible&lt;/code>ï¼šä½¿ç”¨å¯è§æç¤ºè€Œä¸æ˜¯å£°éŸ³ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>set editing-mode vi&lt;/code>ï¼šå°†ç¼–è¾‘æ¨¡å¼è®¾ç½®ä¸º Vi æ¨¡å¼ã€‚é»˜è®¤ä¸ºï¼š Emacs æ¨¡å¼ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç»ˆç«¯çš„ç¼–è¾‘æ¨¡å¼ä¸»è¦æœ‰viå’Œemacsä¸¤ç§æ¨¡å¼ï¼ŒåŒºåˆ«å°±æ˜¯å¿«æ·é”®ä¸åŒã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¦‚æœä½ ä¼švimï¼Œå¼ºçƒˆå»ºè®®ä¿®æ”¹ä¸ºviæ¨¡å¼ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ¨èæ–‡ç« ï¼š&lt;a class="link" href="https://arlettebrook.github.io/p/vim-common-commands/" target="_blank" rel="noopener"
>vim-common-commands&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>ä¿®æ”¹ä¹‹ååœ¨insertæ¨¡å¼ä¸‹Emacsæ¨¡å¼çš„éƒ¨åˆ†å¿«æ·é”®&lt;strong>ä¾ç„¶å¯ä»¥ä½¿ç”¨&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Emacsæ¨¡å¼å¸¸ç”¨å‘½ä»¤ï¼š&lt;/p>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼š&lt;strong>ä¸åŒç»ˆç«¯éƒ¨åˆ†å¿«æ·é”®å¯ç”¨ã€‚&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å…‰æ ‡ç§»åŠ¨&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>Ctrl + A&lt;/code>ï¼šç§»åŠ¨åˆ°è¡Œé¦–&lt;/li>
&lt;li>&lt;code>Ctrl + E&lt;/code>ï¼šç§»åŠ¨åˆ°è¡Œå°¾&lt;/li>
&lt;li>&lt;code>Ctrl + B&lt;/code>ï¼šå‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦&lt;/li>
&lt;li>&lt;code>Ctrl + F&lt;/code>ï¼šå‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦&lt;/li>
&lt;li>&lt;code>Alt + B&lt;/code>ï¼šå‘å·¦ç§»åŠ¨ä¸€ä¸ªè¯&lt;/li>
&lt;li>&lt;code>Alt + F&lt;/code>ï¼šå‘å³ç§»åŠ¨ä¸€ä¸ªè¯&lt;/li>
&lt;li>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>æ–‡æœ¬ç¼–è¾‘&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>Ctrl + K&lt;/code>ï¼šåˆ é™¤ä»å…‰æ ‡ä½ç½®åˆ°è¡Œå°¾çš„æ–‡æœ¬&lt;/li>
&lt;li>&lt;code>Ctrl + U&lt;/code>ï¼šåˆ é™¤ä»å…‰æ ‡ä½ç½®åˆ°è¡Œé¦–çš„æ–‡æœ¬&lt;/li>
&lt;li>&lt;code>Ctrl + W&lt;/code>ï¼šåˆ é™¤å…‰æ ‡ä½ç½®ä¹‹å‰çš„ä¸€ä¸ªè¯&lt;/li>
&lt;li>&lt;code>Alt + D&lt;/code>ï¼šåˆ é™¤å…‰æ ‡ä½ç½®ä¹‹åçš„ä¸€ä¸ªè¯&lt;/li>
&lt;li>&lt;code>Ctrl + Y&lt;/code>ï¼šç²˜è´´ï¼ˆæ¢å¤ï¼‰ä¸Šæ¬¡åˆ é™¤çš„æ–‡æœ¬&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>å…¶ä»–æ“ä½œ&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>Ctrl + L&lt;/code>ï¼šæ¸…å±å¹¶é‡æ–°æ˜¾ç¤ºå½“å‰è¡Œ&lt;/li>
&lt;li>&lt;code>Ctrl + R&lt;/code>ï¼šæœç´¢å‘½ä»¤å†å²&lt;/li>
&lt;li>&lt;code>esc+backspace&lt;/code>ï¼šåˆ é™¤ä¸€ä¸ªå•è¯ã€‚&lt;/li>
&lt;li>&lt;code>ctrl+P&lt;/code>ï¼šä¸Šä¸€æ¡å†å²å‘½ä»¤&lt;/li>
&lt;li>&lt;code>ctrl+n&lt;/code>:ä¸‹ä¸€æ¡å†å²å‘½ä»¤&lt;/li>
&lt;li>&lt;code>ctrl+j&lt;/code>ï¼šå›è½¦&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>è¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»æ§åˆ¶ç»ˆç«¯è¡Œä¸ºçš„é€‰é¡¹äº†ã€‚èƒ½é…ç½®ç»ˆç«¯çš„ç¼–è¾‘æ¨¡å¼ã€æç¤ºéŸ³ã€è¡¥ç¼ºè¡Œä¸ºã€å¿«æ·é”®ç­‰ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>æ­¤å¤–å¦‚æœä½ å–œæ¬¢ä½¿ç”¨PowerShellä¹Ÿå¯ä»¥ä½¿ç”¨&lt;a class="link" href="https://ohmyposh.dev/" target="_blank" rel="noopener"
>Oh My Posh&lt;/a>ç¾åŒ–å®ƒï¼Œè·Ÿå‰é¢ä»‹ç»çš„Oh My Zshå·®ä¸å¤šã€‚&lt;/p>
&lt;p>æ¨èæ–‡ç« ï¼š&lt;a class="link" href="https://blog.sunguoqi.com/posts/oh-my-posh/" target="_blank" rel="noopener"
>Oh My Posh | Windows Terminal ç¾åŒ–æŒ‡å—&lt;/a>&lt;/p>
&lt;h3 id="windterm">
&lt;a href="#windterm" class="header-anchor">#&lt;/a>
WindTerm
&lt;/h3>&lt;p>&lt;a class="link" href="https://github.com/kingToolbox/WindTerm" target="_blank" rel="noopener"
>WindTerm&lt;/a>æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„ç»ˆç«¯åº”ç”¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ SSH/Telnet/Serial/Shell/Sftp å®¢æˆ·ç«¯ã€‚é€šå¸¸ç”¨äº&lt;strong>è¿œç¨‹è¿æ¥&lt;/strong>ã€‚ç±»ä¼¼äºFinalShellï¼Œå®ƒæœ‰çš„åŠŸèƒ½ï¼ŒWindTermåŒæ ·æ”¯æŒï¼Œå¹¶ä¸”æ‹¥æœ‰æ›´å¤šçš„é…è‰²æ–¹æ¡ˆï¼Œç›´æ¥ä¸Šå›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/WindTerm-dark.png"
width="2560"
height="1520"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/WindTerm-dark_huab2f69f062de70eaa15c1469f0e2930e_435465_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/WindTerm-dark_huab2f69f062de70eaa15c1469f0e2930e_435465_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="WindTerm-dark"
class="gallery-image"
data-flex-grow="168"
data-flex-basis="404px"
>&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/WindTerm_DigeWhite_Theme.png"
width="2560"
height="1520"
srcset="https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/WindTerm_DigeWhite_Theme_hu7fdcaec243e45adecf0edd95a0d6522f_339075_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/terminal-and-shell-introduction/index.assets/WindTerm_DigeWhite_Theme_hu7fdcaec243e45adecf0edd95a0d6522f_339075_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="WindTerm_DigeWhite_Theme"
class="gallery-image"
data-flex-grow="168"
data-flex-basis="404px"
>&lt;/p>
&lt;h4 id="å®‰è£…-1">
&lt;a href="#%e5%ae%89%e8%a3%85-1" class="header-anchor">#&lt;/a>
å®‰è£…
&lt;/h4>&lt;p>WindTermæ˜¯ä¸€æ¬¾éƒ¨åˆ†å¼€æºçš„è½¯ä»¶ï¼Œç°ç›®å‰(2024/5/28)ä»å­˜åœ¨éƒ¨åˆ†å°é—®é¢˜ï¼Œä¸è¿‡ä¸å½±å“æ­£å¸¸ä½¿ç”¨ã€‚&lt;/p>
&lt;p>å®‰è£…å¯ä»¥ä»&lt;a class="link" href="https://github.com/kingToolbox/WindTerm" target="_blank" rel="noopener"
>githubä»“åº“&lt;/a>çš„&lt;a class="link" href="https://github.com/kingToolbox/WindTerm/releases" target="_blank" rel="noopener"
>å‘å¸ƒé¡µé¢&lt;/a>æ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿæ‰‹åŠ¨ä¸‹è½½å·²å‘å¸ƒçš„ç‰ˆæœ¬ã€‚&lt;/p>
&lt;h4 id="ä½¿ç”¨">
&lt;a href="#%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
ä½¿ç”¨
&lt;/h4>&lt;p>ä½¿ç”¨WindTermä¹Ÿå¾ˆç®€å•ï¼Œè¯­è¨€æ”¯æŒä¸­æ–‡ã€‚èŠ±ç‚¹æ—¶é—´å°±èƒ½å­¦ä¼šã€‚&lt;/p>
&lt;p>WindTermåœ¨windowsç¯å¢ƒä¸‹å»ºè®®å°†é»˜è®¤çš„shellä¿®æ”¹ä¸ºgit bashã€‚ä¸ªäººçˆ±å¥½ã€‚&lt;/p>
&lt;p>Windows Terminalå’ŒWindTermä¸¤æ¬¾ç»ˆç«¯åº”ç”¨éƒ½å»ºè®®å®‰è£…ï¼Œå„æœ‰å„çš„ä¼˜ç‚¹å’Œç”¨å›¾ã€‚ä¸è¿‡æˆ‘ä¸€èˆ¬ä½¿ç”¨WindTermå¤šä¸€ç‚¹ï¼Œå› ä¸ºWindows Terminalæœ‰çš„åŠŸèƒ½WindTerméƒ½æœ‰ï¼Œå¹¶ä¸”åè€…æœ‰æ›´å¥½çš„é…è‰²æ–¹æ¡ˆï¼Œæ”¯æŒæ–‡ä»¶ä¼ è¾“ï¼Œå†…ç½®è¿œç¨‹è¿æ¥ã€‚&lt;/p>
&lt;p>å®‰è£…Windows Terminalä¸»è¦æ˜¯å› ä¸ºWindows Terminalé›†æˆäº†Win10çš„cmdã€PowerShellç»ˆç«¯ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ul>
&lt;li>åŸæ–‡åœ°å€: &lt;a class="link" href="https://juejin.cn/post/7229507721795993661" target="_blank" rel="noopener"
>https://juejin.cn/post/7229507721795993661&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote></description></item><item><title>Vim Common Commands</title><link>https://arlettebrook.github.io/p/vim-common-commands/</link><pubDate>Mon, 27 May 2024 00:43:37 +0800</pubDate><guid>https://arlettebrook.github.io/p/vim-common-commands/</guid><description>&lt;hr>
&lt;h2 id="ç®€ä»‹">
&lt;a href="#%e7%ae%80%e4%bb%8b" class="header-anchor">#&lt;/a>
ç®€ä»‹
&lt;/h2>&lt;p>Vimæ˜¯ä¸€ä¸ªé«˜åº¦å¯é…ç½®çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¸»è¦ç”¨äºç¼–å†™å’Œç¼–è¾‘æ–‡æœ¬å’Œæºä»£ç ã€‚å®ƒæœ€åˆç”±Bram Moolenaaråœ¨1991å¹´å‘å¸ƒï¼Œè‡³ä»Šå·²ç»æˆä¸ºäº†è®¸å¤šç¨‹åºå‘˜å’Œç³»ç»Ÿç®¡ç†å‘˜çš„é¦–é€‰å·¥å…·ã€‚&lt;/p>
&lt;p>Vimçš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é«˜åº¦å¯é…ç½®ï¼šVimå…·æœ‰å¤§é‡çš„å‘½ä»¤å’Œé€‰é¡¹ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚è¿›è¡Œå®šåˆ¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‘½ä»¤æ¨¡å¼ï¼ˆCOMMAND)ï¼šVimåœ¨é»˜è®¤æƒ…å†µä¸‹å¤„äºå‘½ä»¤æ¨¡å¼ï¼Œç”¨æˆ·éœ€è¦é€šè¿‡é”®ç›˜è¾“å…¥å‘½ä»¤æ¥è¿›è¡Œæ–‡æœ¬ç¼–è¾‘ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ’å…¥æ¨¡å¼(INSERT)ï¼šåœ¨æ’å…¥æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥æ–‡æœ¬å†…å®¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ™®é€šæ¨¡å¼(NORMAL)ï¼šæ™®é€šæ¨¡å¼æ˜¯Vimçš„é»˜è®¤æ¨¡å¼ï¼Œå¯ä»¥è¿›è¡Œå…‰æ ‡ç§»åŠ¨ã€åˆ é™¤å­—ç¬¦ç­‰æ“ä½œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ï¼ˆ&lt;strong>è¡¥å……&lt;/strong>ï¼‰å¯è§†æ¨¡å¼ï¼ˆVISUAL)ï¼šå…è®¸ç”¨æˆ·ä»¥å¯è§†æ–¹å¼é€‰æ‹©å’Œæ“ä½œæ–‡æœ¬ã€‚Visual æ¨¡å¼æœ‰ä¸‰ç§ç±»å‹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>å­—ç¬¦æ¨¡å¼ï¼ˆVisual modeï¼‰&lt;/strong>ï¼šç”¨äºé€‰æ‹©å­—ç¬¦ã€‚&lt;code>v&lt;/code>å‘½ä»¤è¿›å…¥ã€‚&lt;/li>
&lt;li>&lt;strong>è¡Œæ¨¡å¼ï¼ˆVisual Line modeï¼‰&lt;/strong>ï¼šç”¨äºé€‰æ‹©æ•´è¡Œã€‚&lt;code>V&lt;/code>å‘½ä»¤è¿›å…¥ã€‚&lt;/li>
&lt;li>&lt;strong>å—æ¨¡å¼ï¼ˆVisual Block modeï¼‰&lt;/strong>ï¼šç”¨äºé€‰æ‹©æ–‡æœ¬å—ï¼ˆçŸ©å½¢åŒºåŸŸï¼‰ã€‚&lt;code>ctrl+v&lt;/code>å‘½ä»¤è¿›å…¥ã€‚&lt;/li>
&lt;li>å¯ä»¥ä¸&lt;code>p, y, d, c, r, &amp;lt;, &amp;gt;, ~, gU, gu&lt;/code>ç­‰å‘½ä»¤ç»„åˆä½¿ç”¨ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>å¤§é‡å¿«æ·é”®ï¼šVimå…·æœ‰å¤§é‡çš„å¿«æ·é”®ï¼Œå¯ä»¥æé«˜ç¼–è¾‘æ•ˆç‡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®è®°å½•ï¼šVimæ”¯æŒå®è®°å½•ï¼Œå¯ä»¥å½•åˆ¶ä¸€ç³»åˆ—é”®ç›˜æ“ä½œå¹¶é‡å¤æ‰§è¡Œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ’ä»¶æ”¯æŒï¼šVimæ”¯æŒå¤§é‡çš„æ’ä»¶ï¼Œå¯ä»¥æ‰©å±•å…¶åŠŸèƒ½ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>åœ¨Linuxå’ŒUnixç³»ç»Ÿä¸­ï¼ŒVimé€šå¸¸å·²ç»é¢„è£…ã€‚Windowsç³»ç»Ÿåˆ™éœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚å¯¹äºåˆæ¬¡ä½¿ç”¨Vimçš„ç”¨æˆ·ï¼Œå»ºè®®å…ˆå­¦ä¹ ä¸€äº›åŸºç¡€æ“ä½œå‘½ä»¤ï¼Œå¹¶é€šè¿‡äº’è”ç½‘ä¸Šçš„èµ„æºæ¥æ·±å…¥äº†è§£å®ƒçš„ä½¿ç”¨æ–¹æ³•å’Œé«˜çº§åŠŸèƒ½ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æç¤ºï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é˜…è¯»æœ¬æ–‡éœ€è¦&lt;strong>æœ‰ä¸€å®šçš„vimäº†è§£&lt;/strong>ï¼Œè¿˜è¦æ‹¥æœ‰vimç¯å¢ƒï¼Œå¹¶ä¸”ä½ åº”è¯¥ä¸€è¾¹é˜…è¯»ï¼Œ&lt;strong>ä¸€è¾¹å®æ“&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœä½ è§‰å¾—æœ¬æ•™ç¨‹å•°å—¦ï¼Œä½ å¯ä»¥è¿è¡Œ&lt;code>vimtutor&lt;/code>å­¦ä¹ å®˜æ–¹æä¾›çš„tutoræ•™ç¨‹ã€‚æœ‰çš„vimç‰ˆæœ¬æ˜¯ä¸­æ–‡æ•™ç¨‹ã€‚å¦‚æœä½ çš„ä¸æ˜¯å¯ä»¥ç½‘ä¸Šæœç´¢ã€‚&lt;a class="link" href="https://arlettebrook.github.io/docs/vimtutor.txt" >å¤‡ç”¨(1.7ä¸­æ–‡ç‰ˆï¼‰&lt;/a>ï¼ˆä¸‹è½½ä¹‹åç”¨vimæ‰“å¼€é˜…è¯»ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“ç„¶å¼ºçƒˆå»ºè®®ä½ å­¦ä¹ å®Œæœ¬æ•™ç¨‹ä¹‹åå»è¿‡ä¸€è¾¹&lt;code>vimtutor&lt;/code>ï¼Œå®ƒå¯ä»¥è®©ä½ è¾¹å­¦è¾¹ç»ƒã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h3 id="å²ä¸Šæœ€å¥½ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨vim">
&lt;a href="#%e5%8f%b2%e4%b8%8a%e6%9c%80%e5%a5%bd%e7%94%a8%e7%9a%84%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8vim" class="header-anchor">#&lt;/a>
å²ä¸Šæœ€å¥½ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨VIM
&lt;/h3>&lt;p>å¯¹äºvi/vimåªæ˜¯ç‚¹è¯„ä¸€ç‚¹ï¼šè¿™æ˜¯ä¸€ä¸ªä½ ä¸éœ€è¦ä½¿ç”¨é¼ æ ‡ï¼Œä¸éœ€ä½¿ç”¨å°é”®ç›˜ï¼Œåªéœ€è¦ä½¿ç”¨å¤§é”®ç›˜å°±å¯ä»¥å®Œæˆå¾ˆå¤šå¤æ‚åŠŸèƒ½æ–‡æœ¬ç¼–è¾‘çš„ç¼–è¾‘å™¨ã€‚ä¸ç„¶ä¸»æµIDEä¹Ÿä¸ä¼šæœ‰vimæ’ä»¶ï¼Œå¦‚ï¼šjetbrainså…¨ç³»åˆ—éƒ½æ”¯æŒçš„&lt;a class="link" href="https://github.com/JetBrains/ideavim" target="_blank" rel="noopener"
>ideavimæ’ä»¶&lt;/a>ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å­¦ä¹  &lt;a class="link" href="http://www.vim.org/" target="_blank" rel="noopener"
>vim&lt;/a> å¹¶ä¸”å…¶ä¼šæˆä¸ºä½ æœ€åä¸€ä¸ªä½¿ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚æ²¡æœ‰æ¯”è¿™ä¸ªæ›´å¥½çš„æ–‡æœ¬ç¼–è¾‘å™¨äº†ï¼Œéå¸¸åœ°éš¾å­¦ï¼Œä½†æ˜¯å´ä¸å¯æ€è®®åœ°å¥½ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>vimçš„å­¦ä¹ æ›²çº¿ç›¸å½“çš„å¤§ï¼ˆå‚çœ‹&lt;a class="link" href="http://coolshell.cn/articles/3125.html" target="_blank" rel="noopener"
>å„ç§æ–‡æœ¬ç¼–è¾‘å™¨çš„å­¦ä¹ æ›²çº¿&lt;/a>ï¼‰ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ ä¸€å¼€å§‹çœ‹åˆ°çš„æ˜¯ä¸€å¤§å †VIMçš„å‘½ä»¤åˆ†ç±»ï¼Œä½ ä¸€å®šä¼šå¯¹è¿™ä¸ªç¼–è¾‘å™¨å¤±å»å…´è¶£çš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸‹é¢çš„æ–‡ç« ç¿»è¯‘è‡ªã€Š&lt;a class="link" href="http://yannesposito.com/Scratch/en/blog/Learn-Vim-Progressively/" target="_blank" rel="noopener"
>Learn Vim Progressively&lt;/a>ã€‹ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯ç»™æ–°æ‰‹æœ€å¥½çš„VIMçš„å‡çº§æ•™ç¨‹äº†ï¼Œæ²¡æœ‰åˆ—ä¸¾æ‰€æœ‰çš„å‘½ä»¤ï¼Œåªæ˜¯åˆ—ä¸¾äº†é‚£äº›æœ€æœ‰ç”¨çš„å‘½ä»¤ã€‚éå¸¸ä¸é”™ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è­¦å‘Šï¼š&lt;/p>
&lt;ul>
&lt;li>å­¦ä¹ vimåœ¨å¼€å§‹æ—¶æ˜¯ç—›è‹¦çš„ã€‚&lt;/li>
&lt;li>éœ€è¦æ—¶é—´&lt;/li>
&lt;li>éœ€è¦ä¸æ–­åœ°ç»ƒä¹ ï¼Œå°±åƒä½ å­¦ä¹ ä¸€ä¸ªä¹å™¨ä¸€æ ·ã€‚&lt;/li>
&lt;li>ä¸è¦æœŸæœ›ä½ èƒ½åœ¨3å¤©å†…æŠŠvimç»ƒå¾—æ¯”åˆ«çš„ç¼–è¾‘å™¨æ›´æœ‰æ•ˆç‡ã€‚&lt;/li>
&lt;li>äº‹å®ä¸Šï¼Œä½ éœ€è¦2å‘¨æ—¶é—´çš„è‹¦ç»ƒï¼Œè€Œä¸æ˜¯3å¤©ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å°†å¸¸ç”¨å‘½ä»¤æ€»ç»“ä¸ºå››ä¸ªæ­¥éª¤ï¼š&lt;/p>
&lt;ol>
&lt;li>å­˜æ´»&lt;/li>
&lt;li>æ„Ÿè§‰è‰¯å¥½&lt;/li>
&lt;li>è§‰å¾—æ›´å¥½ï¼Œæ›´å¼ºï¼Œæ›´å¿«&lt;/li>
&lt;li>ä½¿ç”¨VIMçš„è¶…èƒ½åŠ›&lt;/li>
&lt;/ol>
&lt;p>å½“ä½ èµ°å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ ä¼šæˆä¸ºä¸€ä¸ªvimçš„ superstarã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;div align="center" style='color:red'>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æ­£æ–‡å¼€å§‹â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
&lt;/div>
&lt;h2 id="vimå¸¸ç”¨å‘½ä»¤æ€»ç»“">
&lt;a href="#vim%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
vimå¸¸ç”¨å‘½ä»¤æ€»ç»“
&lt;/h2>&lt;h3 id="ç¬¬ä¸€çº§--å­˜æ´»">
&lt;a href="#%e7%ac%ac%e4%b8%80%e7%ba%a7--%e5%ad%98%e6%b4%bb" class="header-anchor">#&lt;/a>
ç¬¬ä¸€çº§ â€“ å­˜æ´»
&lt;/h3>&lt;p>åœ¨Normalæ¨¡å¼ä¸‹ã€ç”¨vimæ­£å¸¸æ‰“å¼€çš„æ–‡ä»¶éƒ½ä¼šè¿›å…¥è¯¥æ™®é€šæ¨¡å¼ã€‘çš„å¸¸ç”¨å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">i &lt;span class="c1">#è¿›å…¥Insert æ¨¡å¼ï¼ŒæŒ‰ ESC å›åˆ° Normal æ¨¡å¼ï¼Œå…‰æ ‡å¤„æ’å…¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># I: è¡Œé¦–æ’å…¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">a &lt;span class="c1">#è¿›å…¥Insert æ¨¡å¼ï¼ŒæŒ‰ ESC å›åˆ° Normal æ¨¡å¼ï¼Œå…‰æ ‡åæ’å…¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Aï¼šè¡Œå°¾æ’å…¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x &lt;span class="c1">#åˆ é™¤å…‰æ ‡åçš„ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶å°†åˆ é™¤çš„å­˜åˆ°å‰ªåˆ‡æ¿é‡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Xï¼šåˆ é™¤å…‰æ ‡å‰çš„ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶å°†åˆ é™¤çš„å­˜åˆ°å‰ªåˆ‡æ¿é‡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dd &lt;span class="c1">#åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œï¼Œå¹¶å°†åˆ é™¤çš„å­˜åˆ°å‰ªåˆ‡æ¿é‡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Dï¼šåˆ é™¤å…‰æ ‡åé¢çš„æ‰€æœ‰å­—ç¬¦ï¼Œå¹¶å°†åˆ é™¤çš„å­˜åˆ°å‰ªåˆ‡æ¿é‡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">p &lt;span class="c1">#ç²˜è´´å‰ªåˆ‡æ¿ï¼Œåœ¨å…‰æ ‡åç²˜è´´ï¼ŒPï¼šå…‰æ ‡å¤„ç²˜è´´ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:qï¼ &lt;span class="c1"># å¼ºåˆ¶é€€å‡ºvimã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">esc &lt;span class="c1"># é€€å‡ºå‘½ä»¤ã€å›åˆ°normalæ¨¡å¼ã€‚è¾“å…¥çš„å‘½ä»¤æ²¡æ•ˆæœï¼Œå°±ç‚¹å®ƒï¼Œç›´åˆ°èµ·ä½œç”¨ä¸ºæ­¢ã€‚ä¸ctrl+cç­‰æ•ˆã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#æ¨è&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hjkl &lt;span class="c1">#å¼ºä¾‹æ¨èä½¿ç”¨å…¶ç§»åŠ¨å…‰æ ‡ï¼Œä½†ä¸å¿…éœ€ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…‰æ ‡é”® (â†â†“â†‘â†’). æ³¨: j å°±åƒä¸‹ç®­å¤´ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å—å…‰æ ‡ï¼Œæ‰€åœ¨çš„ä½ç½®ç”±å¤´éƒ¨å†³å®šã€‚å¤´éƒ¨å°±æ˜¯å…‰æ ‡æ‰€åœ¨ä½ç½®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å…‰æ ‡åæ˜¯æŒ‡éš”ä¸€ä¸ªå­—ç¬¦ï¼Œå°±æ˜¯å—å…‰æ ‡çš„å°¾éƒ¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤å‘½ä»¤éƒ½ä¼šå°†åˆ é™¤çš„å­˜åˆ°å‰ªåˆ‡æ¿é‡Œï¼Œä½†&lt;strong>åªæœ‰vimå‘½ä»¤åˆ é™¤çš„ï¼Œç²˜è´´på‘½ä»¤æ‰èƒ½ç²˜è´´ï¼ˆä¸vimç‰ˆæœ¬æœ‰å…³ï¼‰ã€‚&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>å¦‚æœè¦ç²˜è´´ç³»ç»Ÿçš„å‰ªåˆ‡æ¿å†…å®¹ç”¨&lt;code>shift+insert&lt;/code>ï¼šå°†åœ¨å…‰æ ‡å¤„ç²˜è´´ç³»ç»Ÿå‰ªåˆ‡æ¿å†…å®¹ã€‚
&lt;ul>
&lt;li>å…¶ä»–å¯èƒ½ç»ˆç«¯éœ€è¦è¿›å…¥INSERTæ¨¡å¼ã€‚&lt;/li>
&lt;li>æ³¨æ„ä¸åŒçš„ç»ˆç«¯å¯åŠ¨ä¸åŒçš„vimç‰ˆæœ¬ï¼Œpç²˜è´´å‘½ä»¤æ•ˆæœå¯èƒ½ä¸ä¸€æ ·ã€‚åˆ é™¤å‘½ä»¤æœ‰çš„ä¼šè¿›å‰ªåˆ‡æ¿ï¼Œæœ‰çš„ä¸ä¼šï¼Œä½†æ˜¯pèƒ½ç²˜è´´ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æˆ‘çš„ç¯å¢ƒï¼šideavimæ’ä»¶ã€‚&lt;/li>
&lt;li>è¡¥å……ï¼šï¼ˆåé¢å­¦ä¹ ä¹‹åçŸ¥é“ï¼šç²˜è´´æ•ˆæœæ˜¯ä¸é»˜è®¤&lt;a class="link" href="#%e5%af%84%e5%ad%98%e5%99%a8" >å¯„å­˜å™¨&lt;/a>æœ‰å…³ç³»ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ç²˜è´´å‘½ä»¤åœ¨ç²˜è´´ä¸€è¡Œå†…å®¹æ—¶ï¼ˆideavimï¼‰ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœå…‰æ ‡æ‰€åœ¨ä½ç½®æ˜¯ç©ºè¡Œï¼Œå°†ç²˜è´´åˆ°è¯¥è¡Œã€‚pä¸Pæ•ˆæœä¸€æ ·&lt;/li>
&lt;li>å¦‚æœå…‰æ ‡æ‰€ä»¥ä½ç½®ä¸ä¸ºç©ºè¡Œï¼Œpå°†ç²˜è´´åˆ°ä¸‹ä¸€è¡Œï¼ŒPå°†ç²˜è´´åˆ°ä¸Šä¸€è¡Œã€‚&lt;/li>
&lt;li>ä¹Ÿå°±æ˜¯ä»¥è¡Œä¸ºå•ä½ï¼špï¼šåœ¨å…‰æ ‡åç²˜è´´ï¼ŒPï¼šå…‰æ ‡å¤„ç²˜è´´ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Windowsç‰ˆæœ¬vimç²˜è´´å‘½ä»¤è¡Œï¼Œæ— è®ºæ˜¯ä¸æ˜¯ç©ºè¡Œï¼Œpä¼šç²˜è´´åˆ°ä¸‹ä¸€è¡Œï¼ŒPä¼šç²˜è´´åˆ°ä¸Šä¸€è¡Œã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ä½ èƒ½åœ¨vimå¹¸å­˜ä¸‹æ¥åªéœ€è¦ä¸Šè¿°çš„é‚£å‡ ä¸ªå‘½ä»¤ï¼Œä½ å°±å¯ä»¥ç¼–è¾‘æ–‡æœ¬äº†ï¼Œä½ ä¸€å®šè¦æŠŠè¿™äº›å‘½ä»¤ç»ƒæˆä¸€ç§ä¸‹æ„è¯†çš„çŠ¶æ€ã€‚äºæ˜¯ä½ å°±å¯ä»¥å¼€å§‹è¿›é˜¶åˆ°ç¬¬äºŒçº§äº†ã€‚&lt;/p>
&lt;p>åœ¨å‘½ä»¤æ¨¡å¼ã€è¾“å…¥&lt;code>:&lt;/code>è¿›å…¥è¯¥æ¨¡å¼ï¼Œè¾“å…¥çš„å‘½ä»¤éƒ½éœ€è¦æ•²å›è½¦ã€‘ä¸‹çš„å¸¸ç”¨å‘½ä»¤ï¼ˆæ‰©å±•ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä½¿ç”¨vimæä¾›çš„åœ¨çº¿å¸®åŠ©ç³»ç»Ÿ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:help &amp;lt;command&amp;gt; &lt;span class="c1"># æ˜¾ç¤ºç›¸å…³å‘½ä»¤çš„å¸®åŠ©ã€‚ä½ ä¹Ÿå¯ä»¥å°±è¾“å…¥ :help è€Œä¸è·Ÿå‘½ä»¤ã€‚æˆ–è€…é”®ç›˜ä¸Šçš„HELPã€‚æˆ–è€…F1ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¦‚æœæ‰“å¼€çš„æ˜¯vimå†…ç½®çš„å¸®åŠ©æ–‡æ¡£ï¼Œå¯ä»¥ç”¨ctrl+w wåœ¨æ–‡æ¡£å’Œvimç¼–è¾‘çª—å£ä¹‹é—´è·³è½¬ã€‚ä¸èµ·ä½œç”¨å¤šç‚¹å‡ ä¸‹ã€‚å…¶å®æ˜¯åˆ†å±åˆ‡æ¢å¿«æ·é”®ã€‚åç»­ä»‹ç»ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># é€‰ä¸­å¸®åŠ©æ–‡æ¡£:qé€€å‡ºã€‚é€‰æ‹©ç¼–è¾‘çª—å£:q!å°†ä¼šå…³é—­æ‰€æœ‰çª—å£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:q &lt;span class="c1"># åªé€€å‡ºå‘½ä»¤ï¼Œå¯ä»¥é€€å‡ºæœªä¿®æ”¹çš„æ–‡ä»¶ã€é€€å‡ºå¸®åŠ©ç­‰é€€å‡ºä½œç”¨ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç¬¬äºŒçº§--æ„Ÿè§‰è‰¯å¥½">
&lt;a href="#%e7%ac%ac%e4%ba%8c%e7%ba%a7--%e6%84%9f%e8%a7%89%e8%89%af%e5%a5%bd" class="header-anchor">#&lt;/a>
ç¬¬äºŒçº§ â€“ æ„Ÿè§‰è‰¯å¥½
&lt;/h3>&lt;p>vimå¸¸ç”¨å‘½ä»¤ï¼ˆéš¾åº¦ä¸€ä¸‹å°±ä¸Šæ¥äº†ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.å„ç§æ’å…¥æ¨¡å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> o &lt;span class="c1">#åœ¨å…‰æ ‡æ‰€åœ¨è¡Œåæ’å…¥ä¸€ä¸ªç©ºè¡Œï¼Œä»Normalæ¨¡å¼è¿›å…¥Insertæ¨¡å¼ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> O &lt;span class="c1">#åœ¨å…‰æ ‡æ‰€åœ¨è¡Œå‰æ’å…¥ä¸€ä¸ªç©ºè¡Œï¼Œä»Normalæ¨¡å¼è¿›å…¥Insertæ¨¡å¼ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cw &lt;span class="c1">#å‘åå‰ªåˆ‡å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„åŒç±»å‹å­—ç¬¦ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ–è€…ä¸€ä¸²æ ‡ç‚¹ç¬¦å·ï¼Œå¹¶ä»Normalæ¨¡å¼è¿›å…¥Insertæ¨¡å¼ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> s &lt;span class="c1"># è¯¥å‘½ä»¤ä¸xå‘½ä»¤åŠŸèƒ½ä¸€æ ·ï¼ŒåŒºåˆ«ï¼šä¼šè¿›å…¥insertæ¨¡å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#2.ç®€å•çš„ç§»åŠ¨å…‰æ ‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">0&lt;/span> &lt;span class="c1">#æ•°å­—0åˆ°æ‰€åœ¨è¡Œå¤´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="c1">#åˆ°æ‰€åœ¨è¡Œå°¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ^ &lt;span class="c1">#åˆ°æ‰€åœ¨è¡Œé¦–ä¸æ˜¯ç©ºç™½çš„åœ°æ–¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> g_ &lt;span class="c1">#åˆ°æ‰€åœ¨è¡Œå°¾ä¸æ˜¯ç©ºç™½çš„åœ°æ–¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åŒ¹é…æœç´¢è·³è½¬ &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /pattern &lt;span class="c1">#å›è½¦æœç´¢ pattern çš„å­—ç¬¦ä¸²,å¦‚æœæœç´¢å‡ºå¤šä¸ªåŒ¹é…ï¼Œå¯æŒ‰né”®åˆ°ä¸‹ä¸€ä¸ªï¼ŒNä¸Šä¸€ä¸ªã€‚åŒ¹é…ä¹‹åä¸€ç›´å­˜åœ¨ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ?pattern &lt;span class="c1"># é€†å‘æœç´¢è·³è½¬åˆ°æŒ‡å®šå­—ç¬¦ï¼Œctrl+oç›¸å¯¹äºå¤§å†™çš„N&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set hls &lt;span class="c1"># å¼€å¯é«˜äº®æ˜¾ç¤ºï¼šhave light searchã€‚é»˜è®¤å…³é—­&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set hlsearch &lt;span class="c1"># å¼€å¯é«˜äº®æ˜¾ç¤º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set nohls &lt;span class="c1"># å…³é—­é«˜äº®æ˜¾ç¤º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :nohlsearch &lt;span class="c1"># ä¸´æ—¶å…³é—­é«˜äº®æ˜¾ç¤º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :nohls &lt;span class="c1">#ä¸´æ—¶å…³é—­é«˜äº®æ˜¾ç¤ºï¼Œåœ¨æ¬¡æœç´¢æˆ–è€…nä¼šå‡ºç°é«˜äº®æ˜¾ç¤º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set incsearch &lt;span class="c1"># åŠ¨æ€æ˜¾ç¤ºæœç´¢ç»“æœï¼Œé€šå¸¸é…åˆé«˜äº®ä½¿ç”¨ã€‚é»˜è®¤å…³é—­&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set is &lt;span class="c1"># åŠ¨æ€æ˜¾ç¤ºæœç´¢ç»“æœï¼Œé€šå¸¸é…åˆé«˜äº®ä½¿ç”¨ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set noincsearch &lt;span class="c1"># å…³é—­åŠ¨æ€æ˜¾ç¤ºæœç´¢ç»“æœï¼Œé€šå¸¸é…åˆé«˜äº®ä½¿ç”¨ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set nois &lt;span class="c1"># å…³é—­åŠ¨æ€æ˜¾ç¤ºæœç´¢ç»“æœï¼Œé€šå¸¸é…åˆé«˜äº®ä½¿ç”¨ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set hls is
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set nohls nois
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># å¯ä»¥å°†setå‘½ä»¤ä¿å­˜åˆ°vimçš„é…ç½®æ–‡ä»¶ä¸­è®©å…¶æ°¸ä¹…ç”Ÿæ•ˆã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åŒ¹é…çš„æ—¶å€™ï¼šé»˜è®¤æ²¡æœ‰æœ‰å¿½ç•¥å¤§å°å†™ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set ic &lt;span class="c1"># ignore case&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :set noic &lt;span class="c1"># no ignore case ä¸å¿½ç•¥å¤§å°å†™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /æœç´¢çš„å­—ç¬¦&lt;span class="se">\c&lt;/span> &lt;span class="c1"># ä¸´æ—¶å¿½ç•¥å¤§å°å†™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#3.æ‹·è´/ç²˜è´´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> p &lt;span class="c1">#å…‰æ ‡åç²˜è´´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> P &lt;span class="c1">#å…‰æ ‡å‡ºç²˜è´´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> yy &lt;span class="c1">#å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Y &lt;span class="c1"># ä¸yyç­‰æ•ˆã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#4.æ’¤é”€/æ¢å¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> u &lt;span class="c1">#æ’¤é”€ ç›¸å¯¹äºctrl+z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctrl+r &lt;span class="c1"># æ¢å¤æ’¤é”€ï¼Œç›¸å¯¹äºctrl+shift+z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#5.æ‰“å¼€/ä¿å­˜/é€€å‡º/å¦å­˜ä¸º/æ¸…ç©º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :e &amp;lt;path/to/file&amp;gt; &lt;span class="c1">#æ‰“å¼€æŒ‡å®šæ–‡ä»¶ï¼Œä¸å­˜åœ¨ä¼šåˆ›å»ºï¼Œeæ˜¯editçš„ç¼©å†™ã€‚ideavimç‰ˆæœ¬ä¸å­˜åœ¨æ‰“ä¸å¼€ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :e! &lt;span class="c1"># æ”¾å¼ƒæ‰€æœ‰çš„æ›´æ”¹ï¼Œé‡æ–°åŠ è½½å½“å‰æ–‡ä»¶ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :bn &lt;span class="c1">#ä½ å¯ä»¥åŒæ—¶æ‰“å¼€å¾ˆå¤šæ–‡ä»¶ï¼Œä½¿ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤æ¥åˆ‡æ¢ä¸‹ä¸€ä¸ªæˆ–ä¸Šä¸€ä¸ªæ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :bp &lt;span class="c1">#ä¸Šä¸€ä¸ªæ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#å†’å·åå¯ä»¥åŠ æ•°å­—ï¼Œ:2bnè¡¨ç¤ºä¸‹2ä¸ªæ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :w &lt;span class="c1">#ä¿å­˜ï¼Œwæ­»writeçš„ç¼©å†™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#æŒ‡å®šæ–‡ä»¶åå°±æ˜¯å¦å­˜ä¸ºï¼Œåé¢åŠ !: å¼ºåˆ¶ä¿å­˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :sav &amp;lt;path/to/file&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#äºŒè€…åŒºåˆ«ï¼šåè€…å°†ä¿®æ”¹ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œå¹¶æ‰“å¼€æŒ‡å®šæ–‡ä»¶ï¼Œå¯ä»¥ç»§ç»­ç¼–è¾‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ—§æ–‡ä»¶çš„ä¿®æ”¹ä¼šè¢«æŠ›å¼ƒæ‰ï¼Œsavæ˜¯saveasçš„ç¼©å†™ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :wq &lt;span class="c1">#ä¿å­˜é€€å‡ºï¼Œéšä¾¿é‚£ä¸ªéƒ½è¡Œã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :wq! &lt;span class="c1"># å¼ºåˆ¶ä¿å­˜å¹¶é€€å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :wa &lt;span class="c1"># ä¿å­˜æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :wqa &lt;span class="c1"># ä¿å­˜æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶å¹¶é€€å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åé¢åŠ ï¼éƒ½æ˜¯å¼ºåˆ¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :x &lt;span class="c1">#ä¿å­˜é€€å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ZZ &lt;span class="c1">#ä¿å­˜é€€å‡ºï¼Œæ•ˆæœä¸€æ ·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> zz &lt;span class="c1"># å¦‚æœå¯èƒ½ï¼Œå°†è¯¥è¡Œæ°´å¹³å±…ä¸­ã€‚ç­‰äºä¸Mã€‚mæ˜¯æ ‡è®°ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :q &lt;span class="c1">#é€€å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :q! &lt;span class="c1">#å¼ºåˆ¶é€€å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :qa! &lt;span class="c1">#å¼ºè¡Œé€€å‡ºæ‰€æœ‰çš„æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶ï¼Œå°±ç®—åˆ«çš„æ–‡ä»¶æœ‰æ›´æ”¹ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :%d &lt;span class="c1">#åˆ é™¤æ–‡ä»¶æ‰€æœ‰å†…å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¾ˆå¥½ï¼ŒèŠ±ç‚¹æ—¶é—´ç†Ÿæ‚‰ä¸€ä¸‹ä¸Šé¢çš„å‘½ä»¤ï¼Œä¸€æ—¦ä½ æŒæ¡ä»–ä»¬äº†ï¼Œä½ å°±å‡ ä¹å¯ä»¥å¹²å…¶å®ƒç¼–è¾‘å™¨éƒ½èƒ½å¹²çš„äº‹äº†ã€‚ä½†æ˜¯åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œä½ è¿˜æ˜¯è§‰å¾—ä½¿ç”¨vimè¿˜æ˜¯æœ‰ç‚¹ç¬¨æ‹™ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œä½ å¯ä»¥è¿›é˜¶åˆ°ç¬¬ä¸‰çº§äº†ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>c&lt;/code>å‘½ä»¤æ˜¯ä¸€ä¸ªç»„åˆå‘½ä»¤ï¼Œä¸då‘½ä»¤ç±»ä¼¼ï¼Œéƒ½æ˜¯åˆ é™¤å‘½ä»¤ï¼ŒåŒºåˆ«æ˜¯cå‘½ä»¤ä½¿ç”¨ä¹‹åä¼š&lt;strong>è¿›å…¥insertæ¨¡å¼&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>C&lt;/code>ä¸&lt;code>D&lt;/code>å‘½ä»¤ä¸€æ ·ï¼Œä»å…‰æ ‡ä½ç½®åˆ é™¤åˆ°è¡Œå°¾éƒ¨ï¼ŒåŒºåˆ«Dä¸ä¼šè¿›å…¥insertæ¨¡å¼ã€‚&lt;/li>
&lt;li>&lt;code>cc&lt;/code>æ¸…ç©ºå…‰æ ‡æ‰€åœ¨è¡Œå¹¶è¿›å…¥insertï¼Œä¸&lt;code>dd&lt;/code>åŒºåˆ«ï¼šä¸ä¼šåˆ é™¤è¯¥è¡Œï¼Œåªæ˜¯æ¸…ç©ºåˆ°å‰ªåˆ‡æ¿ã€‚&lt;/li>
&lt;li>&lt;code>w&lt;/code>å…‰æ ‡ç§»åŠ¨åˆ°ä¸åŒç±»å­—ç¬¦çš„å¤´éƒ¨ï¼ˆå¯¹ç©ºæ ¼å­—ç¬¦ä¼šå¿½ç•¥ï¼Œ&lt;strong>å°±æ˜¯ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´&lt;/strong>ï¼‰ï¼Œ
&lt;ul>
&lt;li>æœ‰å¤§å†™å‘½ä»¤ï¼Œç§»åŠ¨å­—ç¬¦èŒƒå›´æ›´å¹¿ã€‚å°±æ˜¯å¯¹åŒç±»å‹å­—ç¬¦åˆ¤æ–­æ›´å¹¿ã€‚&lt;/li>
&lt;li>&lt;code>cw&lt;/code>ä»å…‰æ ‡å¤„&lt;strong>åˆ é™¤åˆ°ä¸åŒç±»å­—ç¬¦çš„å¤´éƒ¨&lt;/strong>ï¼ˆä¸ä¼šå¿½ç•¥ç©ºæ ¼å­—ç¬¦ï¼‰ã€‚&lt;code>dw&lt;/code>ä¼šå¿½ç•¥ç©ºæ ¼ã€‚
&lt;ul>
&lt;li>æ¨èä½¿ç”¨&lt;code>de&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>ciw&lt;/code>åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„åŒç±»å­—ç¬¦ï¼Œå¹¶è¿›å…¥insertæ¨¡å¼ã€‚&lt;code>diw&lt;/code>ä¸ä¼šè¿›å…¥insertæ¨¡å¼ã€‚
&lt;ul>
&lt;li>&lt;code>caw&lt;/code>åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„åŒç±»å­—ç¬¦ï¼Œå¹¶åˆ é™¤åé¢çš„æ‰€ä»¥ç©ºæ ¼ã€‚&lt;/li>
&lt;li>&lt;strong>è¿™ç§ç±»å‹&lt;/strong>ï¼Œéƒ½æ˜¯åˆ é™¤ä¸€ä¸ªå•è¯ï¼Œä½†æ˜¯ä¸èƒ½ä¸eç»„åˆã€‚å¦‚caeã€‚ä¸‰ä¸ªçš„ä¸èƒ½ä¸eç»„åˆï¼Œç”¨wã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>e&lt;/code>ç§»åŠ¨åˆ°ä¸åŒç±»å­—ç¬¦çš„å°¾éƒ¨ï¼ˆå¿½ç•¥ç©ºæ ¼å­—ç¬¦ï¼‰ï¼Œå¦‚æœè‡ªèº«ä¸åœ¨åŒç±»å­—ç¬¦çš„å°¾éƒ¨ä¼šå…ˆç§»åŠ¨åˆ°å°¾éƒ¨ï¼Œåœ¨å¾€ä¸‹è·³è½¬ã€‚
&lt;ul>
&lt;li>æ³¨æ„ï¼šå°¾éƒ¨æ˜¯æŒ‡å…‰æ ‡åœ¨åŒç±»å­—ç¬¦çš„æœ€åä¸€ä¸ªå•è¯å‰é¢ã€‚&lt;/li>
&lt;li>&lt;code>ce&lt;/code>åˆ é™¤å•è¯å¹¶è¿›å…¥insertæ¨¡å¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>c0&lt;/code>ä»å…‰æ ‡ä½ç½®åˆ é™¤åˆ°è¡Œå¤´éƒ¨ã€‚&lt;/li>
&lt;li>&lt;code>c$&lt;/code>ä»å…‰æ ‡ä½ç½®åˆ é™¤åˆ°è¡Œå°¾éƒ¨ã€‚
&lt;ul>
&lt;li>å½“ç„¶ä¹Ÿå¯ä»¥ç»„åˆ&lt;code>c^&lt;/code>, &lt;code>cg_&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>ctå­—ç¬¦&lt;/code>åˆ é™¤å…‰æ ‡åˆ°ç¬¬ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¹‹é—´çš„å­—ç¬¦ï¼ˆåˆ é™¤åˆ°æŒ‡å®šçš„å­—ç¬¦ï¼‰ï¼Œå¹¶è¿›å…¥insertæ¨¡å¼ã€‚&lt;/li>
&lt;li>&lt;code>%&lt;/code>ä¼šåœ¨æœ€è¿‘æ‹¬å·ä¹‹é—´æ¥å›è·³è½¬ã€‚
&lt;ul>
&lt;li>&lt;code>d%&lt;/code>å…‰æ ‡åœ¨æ‹¬å·ä¸Šï¼Œä¼šåˆ é™¤æ‹¬å·åŠæ‹¬å·å†…çš„å†…å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ„å‘³ç€då‘½ä»¤ä¹Ÿå¯ä»¥å’Œä¸Šé¢ç»„åˆï¼ŒåŒºåˆ«å°±æ˜¯ä¸ä¼šè¿›å…¥insertæ¨¡å¼ã€‚
&lt;ul>
&lt;li>å‰é¢åŠ æ•°å­—è¡¨ç¤ºé‡å¤å‡ æ¬¡ã€‚
&lt;ul>
&lt;li>&lt;code>2w&lt;/code>å…‰æ ‡ç§»åŠ¨ä¸¤æ¬¡ä¸åŒç±»å­—ç¬¦ã€‚æ³¨æ„wå‘½ä»¤æ²¡æœ‰å…¶ä»–å‘½ä»¤ç»„åˆæ—¶ä¼šå¿½ç•¥ç©ºæ ¼ã€‚åŠ æ•°å­—ä¹Ÿä¼šå¿½ç•¥ã€‚&lt;/li>
&lt;li>&lt;code>2dd&lt;/code>ç±»å‹åˆ é™¤ä¸¤è¡Œã€‚&lt;code>2cc&lt;/code>åˆ é™¤ä¹‹åè¿›å…¥insertæ¨¡å¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>y&lt;/code>å‘½ä»¤ä¹Ÿæ˜¯ä¸€ä¸ªç»„åˆå‘½ä»¤ï¼Œç”¨äºä¸å¤åˆ¶ç›¸å…³çš„å‘½ä»¤ã€‚éœ€è¦é…åˆå…¶ä»–å‘½ä»¤ä½¿ç”¨ï¼Œå¦‚ï¼šï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>yy&lt;/code>å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œã€‚
&lt;ul>
&lt;li>&lt;code>3yy&lt;/code>è¡¨ç¤ºè¿ç»­å¤åˆ¶ä¸‰è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>yw&lt;/code>å¤åˆ¶åˆ°ä¸åŒç±»å­—ç¬¦çš„å‰é¢ï¼Œä¸ä¼šå¿½ç•¥ç©ºæ ¼ã€‚ç©ºæ ¼å±äºå­—ç¬¦ï¼ˆå°±æ˜¯å¤åˆ¶ä¸€ä¸ªå•è¯ï¼‰ã€‚
&lt;ul>
&lt;li>&lt;code>yiw&lt;/code>å¤åˆ¶æ‰€åœ¨çš„å­—ç¬¦ï¼Œå°±æ˜¯å¤åˆ¶å®Œæ•´å•è¯ã€‚&lt;/li>
&lt;li>&lt;code>yaw&lt;/code>å¤åˆ¶å®Œæ•´å•è¯åŒ…æ‹¬å•è¯åé¢çš„ç©ºæ ¼ï¼Œä¸åŒ…æ‹¬å‰é¢çš„ï¼Œä¸èƒ½ä¸eç»„åˆã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>y0&lt;/code>: ä»å…‰æ ‡ä½ç½®å¤åˆ¶åˆ°è¡Œå¤´ï¼Œ&lt;code>y^&lt;/code>ä¸åŒ…æ‹¬ç©ºæ ¼ã€‚&lt;/li>
&lt;li>&lt;code>y$&lt;/code>: ä»å…‰æ ‡ä½ç½®å¤åˆ¶åˆ°è¡Œå°¾ï¼Œ&lt;code>yg_&lt;/code>ä¸åŒ…æ‹¬ç©ºæ ¼ã€‚&lt;/li>
&lt;li>&lt;code>v&lt;/code>è¿›å…¥å¯è§†æ¨¡å¼ä¹‹åç§»åŠ¨å…‰æ ‡ï¼Œé€‰æ‹©æ–‡æœ¬ä¹‹åï¼Œ&lt;code>y&lt;/code>å‘½ä»¤å¯ä»¥å¤åˆ¶é€‰ä¸­çš„æ–‡æœ¬ï¼Œè‡ªåŠ¨è¿”å›normalã€‚&lt;code>c&lt;/code>ä¼šè¿›å…¥insertæ¨¡å¼ã€‚
&lt;ul>
&lt;li>æ„å‘³ç€å‰é¢çš„ç»„åˆå‘½ä»¤éƒ½å¯ä»¥ä¸visualæ¨¡å¼é…åˆä½¿ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>ytå­—ç¬¦&lt;/code>ä»å…‰æ ‡ä½ç½®å¤åˆ¶åˆ°æŒ‡å®šå­—ç¬¦ä¹‹é—´çš„å­—ç¬¦ã€‚&lt;/li>
&lt;li>&lt;code>y%&lt;/code>å¦‚æœå…‰æ ‡åœ¨æ‹¬å·ä¸Šï¼Œå°†å¤åˆ¶æ‹¬å·åŠæ‹¬å·å†…çš„å†…å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>u&lt;/code>å‘½ä»¤ç›¸å¯¹äº&lt;code>ctrl+z&lt;/code>æ’¤é”€å‘½ä»¤ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>u&lt;/code>å‘½ä»¤ä¼šå°†å…‰æ ‡ç§»åŠ¨åˆ°æœ€è¿‘ä¿®æ”¹çš„åœ°æ–¹ï¼Œå¦‚æœå…‰æ ‡æ‰€åœ¨ä½ç½®æ­£æ˜¯æœ€è¿‘ä¿®æ”¹çš„åœ°æ–¹ï¼Œå°†æ‰§è¡Œæ’¤é”€æ“ä½œã€‚(ä¸vimç‰ˆæœ¬æœ‰å…³ï¼Œæœ‰çš„ç›´æ¥æ’¤é”€)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>U&lt;/code>æ’¤é”€å¯¹å½“å‰è¡Œçš„æ‰€æœ‰æ›´æ”¹,ä»¥è¡Œä¸ºå•ä½ï¼Œ&lt;strong>æ’¤é”€åˆ°insertä¹‹å‰çš„çŠ¶æ€&lt;/strong>ã€‚éƒ¨åˆ†vimç‰ˆæœ¬ä¸èƒ½ä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ctrl+u&lt;/code>ï¼š&lt;/p>
&lt;ul>
&lt;li>normalæ¨¡å¼ä¸‹ï¼šå…‰æ ‡å‘ä¸Šç§»åŠ¨åŠé¡µã€‚&lt;/li>
&lt;li>insertæ¨¡å¼ä¸‹ï¼šä¸Emacsæ¨¡å¼ä¸€æ ·ã€‚&lt;/li>
&lt;li>commandæ¨¡å¼ä¸‹ï¼šä¸Emacsæ¨¡å¼ä¸€æ ·ï¼Œä½†æ˜¯ä¸ä¼šåˆ é™¤&lt;code>:&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="ç¬¬ä¸‰çº§--æ›´å¥½æ›´å¼ºæ›´å¿«">
&lt;a href="#%e7%ac%ac%e4%b8%89%e7%ba%a7--%e6%9b%b4%e5%a5%bd%e6%9b%b4%e5%bc%ba%e6%9b%b4%e5%bf%ab" class="header-anchor">#&lt;/a>
ç¬¬ä¸‰çº§ â€“ æ›´å¥½ï¼Œæ›´å¼ºï¼Œæ›´å¿«
&lt;/h3>&lt;p>å…ˆæ­å–œä½ ï¼ä½ å¹²çš„å¾ˆä¸é”™ã€‚æˆ‘ä»¬å¯ä»¥å¼€å§‹ä¸€äº›æ›´ä¸ºæœ‰è¶£çš„äº‹äº†ã€‚&lt;/p>
&lt;p>è¿™é‡Œä½ å°†ä¼šå­¦åˆ°ä»¥ä¸‹å¸¸ç”¨vimå¸¸ç”¨å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.é‡å¤å‘½ä»¤ã€æ›´å¥½ã€‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . &lt;span class="c1">#é‡å¤ä¸Šä¸€æ¬¡å‘½ä»¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> N&amp;lt;command&amp;gt; &lt;span class="c1">#æ•°å­—Né‡å¤åé¢çš„å‘½ä»¤Nè¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#æ¼”ç¤ºï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2dd &lt;span class="c1">#åˆ é™¤ä¸¤è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3p &lt;span class="c1">#ç²˜è´´å‰ªåˆ‡æ¿3æ¬¡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 10iide &lt;span class="o">[&lt;/span>Esc&lt;span class="o">]&lt;/span> &lt;span class="c1">#å…‰æ ‡æ‰€åœ¨å­—ç¬¦å‰æ’å…¥10ä¸ªideå­—ç¬¦ä¸²ï¼Œå¯ä»¥æ¢æˆaå°±æ˜¯åé¢ï¼Œæ•ˆæœæ›´å¥½&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . &lt;span class="c1">#é‡å¤ä¸Šä¸€æ¬¡æ’å…¥10ideå‘½ä»¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3. &lt;span class="c1">#æ’å…¥3ä¸ªideï¼Œè¿™é‡Œä¸æ˜¯30ä¸ªideï¼Œè¦æ³¨æ„ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#2.å…‰æ ‡ç§»åŠ¨ã€æ›´å¼ºã€‘ï¼šä½ è¦è®©ä½ çš„å…‰æ ‡ç§»åŠ¨æ›´æœ‰æ•ˆç‡ï¼Œä½ ä¸€å®šè¦äº†è§£ä¸‹é¢çš„è¿™äº›å‘½ä»¤ï¼Œåƒä¸‡åˆ«è·³è¿‡ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :N &lt;span class="c1">#å…‰æ ‡åˆ°æ•°å­—Nè¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> NG &lt;span class="c1">#åŒç†å…‰æ ‡åˆ°æ•°å­—Nè¡Œï¼Œç­‰åŒäºNgg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ctrl+g &lt;span class="c1"># æ˜¾ç¤ºæ–‡ä»¶çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡Œå·ï¼Œç™¾åˆ†æ¯”ï¼Œéƒ¨åˆ†vimç‰ˆæœ¬èµ·ä½œç”¨ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gg &lt;span class="c1">#å…‰æ ‡åˆ°ç¬¬ä¸€è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> G &lt;span class="c1">#å…‰æ ‡åˆ°æœ€åä¸€è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> w &lt;span class="c1">#å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä¸åŒç±»å‹çš„å­—ç¬¦çš„å¼€å¤´ï¼Œå°±æ˜¯ç§»åŠ¨åˆ°ä¸åŒç±»å‹çš„å­—ç¬¦å‰ï¼Œå¿½ç•¥ç©ºæ ¼å­—ç¬¦ã€‚å°±æ˜¯è·³è½¬åˆ°ä¸‹ä¸€ä¸ªå•è¯å‰ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> e &lt;span class="c1">#å…‰æ ‡ç§»åŠ¨åˆ° å½“å‰ æˆ–è€… ä¸‹ä¸€ä¸ª ä¸åŒç±»å‹çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¸Šã€‚æ•ˆæœï¼šç§»åŠ¨åˆ°å½“å‰åŒç±»å‹å­—ç¬¦çš„æœ«å°¾ æˆ–è€… ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä¸åŒç±»å‹å­—ç¬¦çš„æœ«å°¾ã€‚ã€è·³è¿‡å•è¯ã€‘å¿½ç•¥ç©ºæ ¼å­—ç¬¦ã€‚å°±æ˜¯è·³è½¬åˆ°æœ¬å•è¯æˆ–ä¸‹ä¸€ä¸ªå•è¯æœ«å°¾ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä»–ä»¬çš„å¤§å†™å‘½ä»¤ï¼Œç§»åŠ¨èŒƒå›´æ›´å¹¿ï¼Œå°±æ˜¯å¯¹åŒç±»å‹å­—ç¬¦åˆ¤æ–­æ›´å¹¿ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#æœ€å¼ºçš„å…‰æ ‡ç§»åŠ¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> % &lt;span class="c1">#åŒ¹é…æ‹¬å·ç§»åŠ¨ï¼Œè‡ªå·±ä½“ä¼šï¼Œè¶…çº§å¥½ç”¨ã€‚æ”¯æŒ(, {, [ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="c1"># åŒ¹é…å…‰æ ‡å½“å‰æ‰€åœ¨çš„å•è¯ï¼Œç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="se">\#&lt;/span> &lt;span class="c1"># åŒ¹é…å…‰æ ‡å½“å‰æ‰€åœ¨çš„å•è¯ï¼Œç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯ï¼Œå®é™…\æ²¡æœ‰ï¼Œè¿™é‡Œæ˜¯è½¬ä¹‰ä½œç”¨ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#äºŒè€…åŒ¹é…ä¹‹åéƒ½å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œèµ·åˆ°åˆ‡æ¢çš„ä½œç”¨ï¼Œnä¸‹ä¸€ä¸ªåŒç†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#æ›´å¿«&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;start position&amp;gt;&amp;lt;command&amp;gt;&amp;lt;end position&amp;gt; &lt;span class="c1">#å…‰æ ‡çš„ç§»åŠ¨ä¸å‘½ä»¤çš„è”åŠ¨ï¼Œç»„åˆå‘½ä»¤é€šå¸¸ä¸å…‰æ ‡ç§»åŠ¨å‘½ä»¤ç»„åˆä½¿ç”¨ï¼Œå®˜æ–¹è§£é‡Šæ˜¯æ“ä½œåŠ åŠ¨ä½œã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#æ¼”ç¤º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0y$ &lt;span class="c1">#æ‹·è´å½“å‰è¡Œï¼Œä¸€èˆ¬ç”¨yyï¼Œ0è¡Œé¦–ï¼Œyæ‹·è´ï¼Œ$è¡Œå°¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ye &lt;span class="c1">#æ‹·è´å½“å‰åŒç±»å‹å­—ç¬¦çš„æœ«å°¾ï¼Œyæ‹·è´ï¼Œeè·³åˆ°åŒç±»å‹å­—ç¬¦æœ«å°¾ï¼Œä¸ywæ•ˆæœä¸€æ ·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ³¨æ„è¿™ä¸¤ä¸ªè¦è€ƒè™‘å…‰æ ‡çš„ä½ç½®ï¼Œå…‰æ ‡å¿…é¡»åœ¨å•è¯çš„å¤´éƒ¨ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç”¨yiw,æ— è®ºå…‰æ ‡åœ¨å“ªé‡Œï¼Œåªè¦åœ¨å•è¯ä¸Šï¼Œå°±èƒ½å¤åˆ¶æ•´ä¸ªå•è¯ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># yawå¤åˆ¶å®Œæ•´å•è¯åŒ…æ‹¬å•è¯åé¢çš„ç©ºæ ¼ï¼Œä¸åŒ…æ‹¬å‰é¢çš„ï¼Œä¸èƒ½ä¸eç»„åˆã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dw &lt;span class="c1">#åˆ é™¤å½“å‰åŒç±»å‹å­—ç¬¦&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> d$ &lt;span class="c1">#ä»å½“å‰åˆ é™¤åˆ°è¡Œå°¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> d0 &lt;span class="c1">#ä»å½“å‰åˆ é™¤åˆ°è¡Œé¦–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dgg &lt;span class="c1">#ä»å½“å‰åˆ é™¤åˆ°æ–‡ä»¶å¼€å¤´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dG &lt;span class="c1">#ä»å½“å‰åˆ é™¤åˆ°æ–‡ä»¶æœ«å°¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :%d &lt;span class="c1"># æ¸…ç©ºæ•´ä¸ªæ–‡ä»¶å†…å®¹ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :e! &lt;span class="c1"># å¿½ç•¥æ‰€æœ‰ä¿®æ”¹ï¼Œé‡æ–°åŠ è½½å½“å‰æ–‡ä»¶ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#æ›´å¤šå¯ç»„åˆå‘½ä»¤d (åˆ é™¤ )ã€v (å¯è§†åŒ–çš„é€‰æ‹©)ã€gU (å˜å¤§å†™)ã€gu (å˜å°å†™)ã€yï¼ˆå¤åˆ¶ï¼‰ã€cï¼ˆåˆ é™¤è¿›å…¥insertï¼‰ç­‰ç­‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç¤ºä¾‹ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> y2/apple &lt;span class="c1"># å¤åˆ¶ä¸¤ä¸ªappleä¹‹é—´çš„å†…å®¹ï¼Œä¸åŒ…æ‹¬æœ€åä¸€ä¸ªappleã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gUiw &lt;span class="c1"># å°†å…‰æ ‡æ‰€åœ¨å•è¯è½¬å¤§å†™ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> diw &lt;span class="c1"># åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨å•è¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#dä¸Šé¢æ¼”ç¤ºäº†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#å¯è§†åŒ–é€‰æ‹©æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å‘½ä»¤ï¼Œä½ å¯ä»¥å…ˆæŒ‰vï¼Œç„¶åç§»åŠ¨å…‰æ ‡ï¼Œä½ å°±ä¼šçœ‹åˆ°æ–‡æœ¬è¢«é€‰æ‹©ï¼Œç„¶åï¼Œä½ å¯èƒ½dï¼Œä¹Ÿå¯yï¼Œä¹Ÿå¯ä»¥å˜å¤§å†™ç­‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#æ³¨æ„å˜å¤§å°å†™è¦æœ‰å¯¹è±¡æ‰èƒ½å˜ï¼Œä¸ç„¶å‡ºé”™ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>è¡¥å……&lt;/strong>ï¼ˆè¿™éƒ¨åˆ†å¯ä»¥æœ€ååœ¨çœ‹ï¼Œæˆ–çœ‹vimtutoråœ¨æ¥ï¼‰ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>rå­—ç¬¦&lt;/code>ï¼šæ›¿æ¢å…‰æ ‡åçš„å­—ç¬¦ä¸ºæŒ‡å®šå­—ç¬¦ã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>R&lt;/code>è¿ç»­æ›¿æ¢å…‰æ ‡åçš„å­—ç¬¦ã€‚escé€€å‡ºã€‚&lt;/li>
&lt;li>&lt;code>:r è¾“å…¥æµ&lt;/code>å¯ä»¥æå–æ–‡ä»¶ï¼ˆæŒ‡å®šè·¯å¾„ï¼‰ï¼Œæˆ–è€…è¾“å…¥æµçš„å†…å®¹åˆ°å…‰æ ‡ä½ç½®åé¢ï¼Œå¦‚ï¼š&lt;code>:r !ls&lt;/code>ï¼šå°†åœ¨å…‰æ ‡åæ’å…¥&lt;code>ls&lt;/code>å‘½ä»¤çš„è¾“å‡ºã€‚
&lt;ol>
&lt;li>ç”¨äºæå–æ–‡ä»¶å†…å®¹åˆ°å…‰æ ‡å&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>è¾“å…¥ &lt;strong>:s/old/new/g&lt;/strong> å¯ä»¥æ›¿æ¢å…‰æ ‡æ‰€åœ¨è¡Œçš„oldå­—ç¬¦ä¸²ä¸ºnewå­—ç¬¦ä¸²ã€‚gè¡¨ç¤ºæ›¿æ¢åŒºå…¨éƒ¨ï¼Œæ²¡æœ‰åªæ›¿æ¢ç¬¬ä¸€ä¸ª&lt;/p>
&lt;p>è¦æ›¿æ¢ä¸¤è¡Œä¹‹é—´å‡ºç°çš„æ¯ä¸ªåŒ¹é…ä¸²ï¼Œè¯·
è¾“å…¥ :#,#s/old/new/g å…¶ä¸­ #,# ä»£è¡¨çš„æ˜¯æ›¿æ¢æ“ä½œçš„è‹¥å¹²è¡Œä¸­é¦–å°¾ä¸¤è¡Œçš„è¡Œå·ã€‚
è¾“å…¥ :%s/old/new/g åˆ™æ˜¯æ›¿æ¢æ•´ä¸ªæ–‡ä»¶ä¸­çš„æ¯ä¸ªåŒ¹é…ä¸²ã€‚
è¾“å…¥ :%s/old/new/gc ä¼šæ‰¾åˆ°æ•´ä¸ªæ–‡ä»¶ä¸­çš„æ¯ä¸ªåŒ¹é…ä¸²ï¼Œå¹¶ä¸”å¯¹æ¯ä¸ªåŒ¹é…ä¸²æç¤ºæ˜¯å¦è¿›è¡Œæ›¿æ¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>:!å¤–éƒ¨å‘½ä»¤&lt;/code>æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼Œå¦‚&lt;code>:!ls&lt;/code>ï¼Œæ”¯æŒæ‰€æœ‰çš„å¤–éƒ¨å‘½ä»¤ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>vimæ”¯æŒä¿å­˜ä¸€ä¸ªæ–‡ä»¶çš„éƒ¨åˆ†å†…å®¹ï¼š&lt;/p>
&lt;ol>
&lt;li>è¿›å…¥å¯è§†æ¨¡å¼ä¹‹åï¼Œé€‰ä¸­è¦ä¿å­˜çš„éƒ¨åˆ†ï¼Œç„¶åæŒ‰ : å­—ç¬¦ã€‚å°†çœ‹åˆ°å±å¹•åº•éƒ¨ä¼šå‡ºç° :&amp;rsquo;&amp;lt;,&amp;rsquo;&amp;gt; ã€‚åœ¨åé¢è¾“å…¥å¦å­˜ä¸ºæ–‡ä»¶å‘½ä»¤å³å¯&lt;code>w æ–‡ä»¶å&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨&lt;code>tab&lt;/code>é”®è¡¥å…¨å‘½ä»¤ï¼Œ&lt;code>ctrl+d&lt;/code>æ˜¾ç¤ºèƒ½è¡¥å…¨çš„å‘½ä»¤ã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>ctrl+u&lt;/code>æ¸…ç©ºå…‰æ ‡å‰çš„å­—ç¬¦ï¼Œé™¤äº†&lt;code>:&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>få­—ç¬¦&lt;/code>å…‰æ ‡å‘å‰ç§»åŠ¨åˆ°æŒ‡å®šå­—ç¬¦å‰ã€‚&lt;code>Få­—ç¬¦&lt;/code>åå‘ã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>tå­—ç¬¦&lt;/code>å…‰æ ‡å‘å‰ç§»åŠ¨åˆ°æŒ‡å®šå­—ç¬¦çš„å‰ä¸€ä¸ªå­—ç¬¦å‰ã€‚&lt;code>Tå­—ç¬¦&lt;/code>åå‘ã€‚&lt;/li>
&lt;li>åœ¨ä½¿ç”¨è¿™ä¸ªä¸¤ä¸ªå‘½ä»¤ä¹‹å&lt;code>;&lt;/code>å…‰æ ‡è·³è½¬åˆ°ä¸‹ä¸€ä¸ªç›¸åŒå­—ç¬¦ï¼Œ&lt;code>,&lt;/code>ä¸Šä¸€ä¸ªã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>gf&lt;/code>å°†å…‰æ ‡æ‰€åœ¨è¡Œæ–‡æœ¬å†…å®¹ä½œä¸ºæ–‡ä»¶æ‰“å¼€ï¼Œä¼šè‡ªåŠ¨å…‰æ ‡å½“å‰æ–‡ä»¶ï¼ˆå‰æå·²ç»ä¿å­˜ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>H&lt;/code>å…‰æ ‡ç§»åŠ¨åˆ°å…‰æ ‡å»è¿‡çš„å±å¹•æœ€é«˜è¡Œï¼Œ&lt;code>L&lt;/code>å±å¹•çš„æœ€ä½è¡Œã€‚ï¼ˆä¸ç‰ˆæœ¬æœ‰å…³ï¼‰&lt;/p>
&lt;ol>
&lt;li>&lt;code>J&lt;/code>åˆ é™¤æœ«å°¾çš„æ¢è¡Œç¬¦ï¼Œ&lt;code>ctrl-j&lt;/code>æ¢è¡Œã€å›è½¦çš„æ„æ€ï¼Œï¼ˆé‡è¦ï¼‰å¯„å­˜å™¨ä¸­ç”¨&lt;code>^J&lt;/code>è¡¨ç¤ºã€‚&lt;/li>
&lt;li>&lt;code>K&lt;/code>æŸ¥çœ‹å…‰æ ‡æ‰€åœ¨å•è¯çš„&lt;code>man&lt;/code>é¡µé¢ã€‚ï¼ˆideavimä¸æ”¯æŒï¼‰&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>b&lt;/code>ä¸&lt;code>w&lt;/code>å‘½ä»¤åå‘ã€‚&lt;code>B&lt;/code>èŒƒå›´æ›´å¹¿ã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>ge&lt;/code>ä¸&lt;code>e&lt;/code>å‘½ä»¤åå‘ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ctrl+u&lt;/code>normalæ¨¡å¼ä¸‹å…‰æ ‡&lt;strong>å‘ä¸Šç§»åŠ¨åŠé¡µ&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ctrl+b&lt;/code>å…‰æ ‡&lt;strong>å‘ä¸Šç§»åŠ¨å·®ä¸å¤šä¸€é¡µ&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ctrl+f&lt;/code>&lt;strong>å‘ä¸‹ç§»åŠ¨ä¸€é¡µ&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ctrl+d&lt;/code>&lt;strong>å‘ä¸‹ç§»åŠ¨åŠé¡µ&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>M&lt;/code>å…‰æ ‡ç§»åŠ¨åˆ°å±å¹•ä¸­é—´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>(&lt;/code>å‘ä¸Šç§»åŠ¨åˆ°å¥å­çš„å¼€å¤´&lt;/p>
&lt;ol>
&lt;li>&lt;code>)&lt;/code>å‘ä¸‹ç§»åŠ¨åˆ°å¥å­çš„å¼€å¤´&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>{&lt;/code>å‘ä¸Šç§»åŠ¨åˆ°æ®µè½çš„å¼€å¤´ã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>}&lt;/code>å‘ä¸‹ç§»åŠ¨åˆ°æ®µè½çš„å¼€å¤´ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>da(&lt;/code>åˆ é™¤æ‹¬å·åŠæ‹¬å·å†…çš„å†…å®¹ã€‚æ‹¬å·å¯ä»¥æ¢æˆ&lt;code>&amp;quot;, ', (, ), {, }, [, ].&lt;/code>ä¸­çš„ä¸€ä¸ªï¼Œåˆ é™¤å¯¹åº”çš„æ‹¬å·ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>di(&lt;/code>åˆ é™¤ä¸åŒ…æ‹¬æ‹¬å·ã€‚æ‹¬å·å¯ä»¥æ¢æˆ&lt;code>&amp;quot;, ', (, ), {, }, [, ].&lt;/code>ä¸­çš„ä¸€ä¸ªï¼Œåˆ é™¤å¯¹åº”çš„æ‹¬å·å†…å®¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>iä¸åŒ…æ‹¬æ‹¬å·ï¼ŒaåŒ…æ‹¬æ‹¬å·ã€‚&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>&amp;gt;&amp;gt;&lt;/code>å‘åç¼©è¿›å…‰æ ‡æ‰€åœ¨è¡Œã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>&amp;lt;&amp;lt;&lt;/code>åå‘ç¼©è¿›&lt;/li>
&lt;li>&lt;code>.&lt;/code>å‘½ä»¤é‡å¤ä¸Šä¸€æ¬¡å‘½ä»¤ã€‚ï¼ˆéƒ¨åˆ†å‘½ä»¤ä¸å¯é‡å¤ï¼šå¦‚&lt;code>2j&lt;/code>)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>gUç§»åŠ¨å…‰æ ‡å‘½ä»¤&lt;/code>é€‰ä¸­çš„å­—ç¬¦è½¬å¤§å†™ã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>guç§»åŠ¨å…‰æ ‡å‘½ä»¤&lt;/code>é€‰ä¸­çš„å­—ç¬¦è½¬å°å†™&lt;/li>
&lt;li>&lt;code>~&lt;/code>å°†å…‰æ ‡åçš„å­—ç¬¦å¤§å°å†™äº’è½¬ï¼Œå¯ä»¥é€‰ä¸­å¤šä¸ªäº’è½¬ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>åœ¨insertæ¨¡å¼ä¸‹&lt;code>ctrl-o&lt;/code>ä¼šä¸´æ—¶è¿›å…¥Normalæ¨¡å¼ï¼Œæ‰§è¡Œåˆ«çš„å‘½ä»¤ä¹‹åä¼šï¼Œè‡ªåŠ¨è¿”å›insertæ¨¡å¼ã€‚&lt;/p>
&lt;ol>
&lt;li>å¯ç”¨äºåˆ é™¤å…‰æ ‡åçš„å•è¯ç»§ç»­ç¼–è¾‘ï¼šå¦‚ï¼š&lt;code>ctrl-o de&lt;/code>&lt;/li>
&lt;li>viæ¨¡å¼ä¸­ä¸å¯ä»¥ä½¿ç”¨ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>åœ¨insertæ¨¡å¼ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>ctrl-w&lt;/code>å‘å…‰æ ‡å‰åˆ é™¤åˆ°åŒç±»å­—ç¬¦ã€‚å¿½ç•¥ç©ºæ ¼ï¼Œå°±æ˜¯åˆ é™¤ä¸€ä¸ªå•è¯ã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>ctrl-u&lt;/code>å…¨éƒ¨åˆ é™¤ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ctrl-h&lt;/code>ç­‰åŒäºé€€æ ¼é”®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>vimåœ¨insertæ¨¡å¼ä¸‹æ²¡æœ‰æä¾›å‘ååˆ é™¤å­—ç¬¦çš„å‘½ä»¤&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h3 id="ç¬¬å››çº§--vim-è¶…èƒ½åŠ›">
&lt;a href="#%e7%ac%ac%e5%9b%9b%e7%ba%a7--vim-%e8%b6%85%e8%83%bd%e5%8a%9b" class="header-anchor">#&lt;/a>
ç¬¬å››çº§ â€“ Vim è¶…èƒ½åŠ›
&lt;/h3>&lt;p>ä½ åªéœ€è¦æŒæ¡å‰é¢çš„å‘½ä»¤ï¼Œä½ å°±å¯ä»¥å¾ˆèˆ’æœçš„ä½¿ç”¨VIMäº†ã€‚ä½†æ˜¯ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å‘ä½ ä»‹ç»çš„æ˜¯VIMæ€æ‰‹çº§çš„åŠŸèƒ½ã€‚ä¸‹é¢è¿™äº›åŠŸèƒ½æ˜¯æˆ‘åªç”¨vimçš„åŸå› ã€‚&lt;/p>
&lt;p>å…¶å®æ˜¯å¯¹ä¸Šé¢çš„å‘½ä»¤å†æ¬¡å¤ä¹ ğŸ˜‚ï¼ˆä¸åœ¨è§£é‡Šå…¶ä½œç”¨ï¼Œå¦‚æœä½ è¿˜çœ‹ä¸æ‡‚ï¼Œè¯æ˜ç»ƒå¾—è¿˜ä¸å¤Ÿã€‚ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">g_
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">f&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="c1"># F&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">, or &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tï¼Œ &lt;span class="c1"># T&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">, or &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3f,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dt,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ct,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">df&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cf&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ye
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yt&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yf&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dt&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">df&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cf&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ct&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">P
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">diw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">daw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ciw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">caw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yiw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yaw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¦‚æœä½ æä¸æ˜ç™½ä¸Šé¢çš„å¤æ‚ç»„åˆå‘½ä»¤ï¼Œå¯ä»¥çœ‹væ¨¡å¼é€‰æ‹©çš„æ˜¯é‚£ä¸ªéƒ¨åˆ†ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">viw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vaw
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>è¡¥å……&lt;/strong>ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>&amp;lt;motion&amp;gt;i&amp;lt;option&amp;gt;&lt;/code>ã€&lt;code>&amp;lt;motion&amp;gt;a&amp;lt;object&amp;gt;&lt;/code>æ ¹æ®åŠ¨ä½œï¼ˆmotionï¼‰ã€èŒƒå›´ï¼ˆiã€aï¼‰æ“ä½œå¯¹è±¡ï¼ˆobjectï¼‰ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>motionåŠ¨ä½œï¼šå¸¸ç”¨ï¼šd, c, v, y,&lt;/p>
&lt;ul>
&lt;li>
&lt;p>iä¸açš„åŒºåˆ«ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å¯¹äºç©ºæ ¼&lt;/strong>iä¼šå¿½ç•¥ï¼Œaä¼šä¿ç•™&lt;strong>åé¢&lt;/strong>çš„ä½¿ç”¨ç©ºæ ¼ã€‚&lt;/li>
&lt;li>å…¶ä»–å­—ç¬¦ï¼š&lt;strong>iä¸åŒ…æ‹¬ï¼ŒaåŒ…æ‹¬ã€‚&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>objectï¼šæ“ä½œå¯¹è±¡ï¼Œå¸¸ç”¨ï¼š&lt;/p>
&lt;ul>
&lt;li>wï¼šä¸€ä¸ªå•è¯ã€‚&lt;/li>
&lt;li>sï¼šä¸€ä¸ªå¥å­ï¼ˆä¸åŒ…æ‹¬ç¼©è¿›ã€å‰åç©ºç™½ï¼‰ã€‚&lt;/li>
&lt;li>pï¼šä¸€ä¸ªæ®µè½ï¼ˆåŒ…æ‹¬ç¼©è¿›ï¼Œå‰åç©ºç™½ï¼‰ã€‚&lt;/li>
&lt;li>å…¶ä»–å­—ç¬¦ï¼š&lt;code>&amp;quot;, ', (, ), {, }, [, ].&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„ï¼šæ˜¯å‘åæœç´¢åŒ…è£¹å…‰æ ‡çš„å¯¹è±¡ã€‚æ²¡æœ‰ï¼Œåªæœ‰&lt;code>&amp;quot;&lt;/code>å¯¹è±¡ä¼šå‘å†…æŸ¥æ‰¾ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>
&lt;p>ç¤ºä¾‹ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªå­—ç¬¦ä¸² &lt;code>(map (+) (&amp;quot;foo&amp;quot;))&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è€Œå…‰æ ‡é”®åœ¨ç¬¬ä¸€ä¸ª &lt;code>o &lt;/code>çš„ä½ç½®ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>vi&amp;quot;&lt;/code> â†’ ä¼šé€‰æ‹© &lt;code>foo&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>&lt;code>va&amp;quot;&lt;/code> â†’ ä¼šé€‰æ‹© &lt;code>&amp;quot;foo&amp;quot;&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>vi)&lt;/code> â†’ ä¼šé€‰æ‹© &lt;code>&amp;quot;foo&amp;quot;&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>&lt;code>va(&lt;/code> â†’ ä¼šé€‰æ‹©&lt;code>(&amp;quot;foo&amp;quot;)&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>v2i)&lt;/code> â†’ ä¼šé€‰æ‹© &lt;code>map (+) (&amp;quot;foo&amp;quot;)&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>&lt;code>v2a)&lt;/code> â†’ ä¼šé€‰æ‹© &lt;code>(map (+) (&amp;quot;foo&amp;quot;))&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å…‰æ ‡åœ¨&lt;code>a&lt;/code>ä½ç½®ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>vi&amp;quot;&lt;/code> â†’ ä¼šé€‰æ‹© &lt;code>foo&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>va&amp;quot;&lt;/code> â†’ ä¼šé€‰æ‹© &lt;code>&amp;quot;foo&amp;quot;&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>vi)&lt;/code> â†’ ä¼šé€‰æ‹© &lt;code>map (+) (&amp;quot;foo&amp;quot;)&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>va(&lt;/code> â†’ ä¼šé€‰æ‹© &lt;code>(map (+) (&amp;quot;foo&amp;quot;))&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>v2i)&lt;/code>ã€&lt;code>v2a)&lt;/code>ä¸¤ä¸ªæ— æ³•é€‰ä¸­ï¼Œä¸ä¼šå‘å†…æŸ¥æ‰¾ã€‚&lt;/p>
&lt;ul>
&lt;li>åªæœ‰&lt;code>&amp;quot;&lt;/code>ä¼šã€‚å¹¶ä¸è€ƒè™‘æ•°é‡ã€‚&lt;code>v2i&amp;quot;&lt;/code>â†’ ä¼šé€‰æ‹© &lt;code>foo&lt;/code>, ä¸&lt;code>vi&amp;quot;&lt;/code>ç­‰æ•ˆã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¯è§†ï¼ˆVISUALï¼‰æ¨¡å¼æ“ä½œï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>ctrl+v&lt;/code>è¿›å…¥å¯è§†æ¨¡å¼çš„å—æ¨¡å¼ï¼ˆWindowså ç”¨ï¼Œç”¨&lt;code>ctrl+q&lt;/code>ä»£æ›¿ï¼‰ã€‚&lt;code>v&lt;/code>å­—ç¬¦æ¨¡å¼ï¼Œ&lt;code>V&lt;/code>è¡Œæ¨¡å¼ã€‚&lt;/li>
&lt;li>ä»¥ä¸Šæ¨¡å¼å¯ä»¥é…åˆå…¶ä»–ç§»åŠ¨åŠ¨ä½œä½¿ç”¨ï¼Œå¦‚&lt;code>0&lt;/code>, &lt;code>ctrl+f&lt;/code> , &lt;code>$&lt;/code>æ–¹ä¾¿é€‰æ‹©ã€‚å¦‚ï¼š
&lt;ul>
&lt;li>é€‰æ‹©å¤šè¡Œï¼Œ&lt;code>J&lt;/code>å‘½ä»¤æ‰¹é‡&lt;strong>ç§»é™¤é€‰æ‹©è¡Œçš„æ¢è¡Œç¬¦&lt;/strong>ã€‚&lt;/li>
&lt;li>å‘åç¼©è¿›&lt;code>&amp;gt;&lt;/code>é€‰ä¸­çš„æ–‡æœ¬ï¼Œ&lt;code>&amp;lt;&lt;/code>å‘å‰ã€‚
&lt;ul>
&lt;li>é€‰ä¸­ä¹‹å&lt;code>=&lt;/code>è‡ªåŠ¨ç»™ç¼©è¿›ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å—æ¨¡å¼è¿˜å¯ä»¥æ‰¹é‡ä¿®æ”¹å¤šè¡Œã€‚å…¸å‹çš„æ“ä½œï¼Œå¦‚ï¼š
&lt;ul>
&lt;li>&lt;strong>æ·»åŠ æ³¨é‡Š&lt;/strong>ï¼š &lt;code>0 ctrl+v ctrl+d é€‰ä¸­è¦æ³¨é‡Šçš„ I # ESC&lt;/code>
&lt;ul>
&lt;li>æ³¨é‡Šåªèƒ½ç”¨è¡Œé¦–æ’å…¥ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æœ«å°¾æ·»åŠ åˆ†å·ï¼š&lt;code>$ ctrl+v ctrl+d é€‰æ‹©è¦ä¿®æ”¹çš„ A ; esc &lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ³¨æ„ï¼šåªæœ‰å—æ¨¡å¼å¯ä»¥æ‰¹é‡ä¿®æ”¹ã€‚å¹¶ä¸”åªæœ‰åœ¨å—å¤´æˆ–è€…å—å°¾å¯ä»¥ä¿®æ”¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è‡ªåŠ¨è¡¥å…¨&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨insertæ¨¡å¼ä¸‹ï¼Œè¾“å…¥ä¸€ä¸ªè¯çš„å¼€å¤´ï¼Œç„¶åæŒ‰&lt;code>ctrl+n&lt;/code>or&lt;code>ctrl+p&lt;/code>è‡ªåŠ¨è¡¥å…¨å°±å‡ºç°äº†ã€‚&lt;/li>
&lt;li>å¦‚æœæœ‰å¤šä¸ªï¼Œnæ˜¯ä¸‹ä¸€ä¸ªï¼Œpæ˜¯ä¸Šä¸€ä¸ªã€‚&lt;/li>
&lt;li>åœ¨ideavimä¸­æ˜¯ä»£ç æç¤ºã€‚&lt;/li>
&lt;li>é€‰ä¸­ä¹‹åï¼Œç»§ç»­è¾“å…¥ï¼Œä¸ç”¨å›è½¦ç¡®å®šã€‚ideavimä»£ç ä¸­éœ€è¦å›è½¦ç¡®å®šã€‚&lt;/li>
&lt;li>å…·ä½“çœ‹æƒ…å†µã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h4 id="æ ‡è®°">
&lt;a href="#%e6%a0%87%e8%ae%b0" class="header-anchor">#&lt;/a>
æ ‡è®°
&lt;/h4>&lt;p>åœ¨ Vim ä¸­ï¼Œ&lt;code>m&lt;/code> å‘½ä»¤ç”¨äºè®¾ç½®æ ‡è®°ï¼ˆmarkï¼‰ã€‚æ ‡è®°æ˜¯ Vim æä¾›çš„ä¸€ç§åŠŸèƒ½ï¼Œç”¨äºåœ¨æ–‡ä»¶ä¸­è®°ä½ç‰¹å®šçš„ä½ç½®ï¼Œä»¥ä¾¿ä»¥åå¿«é€Ÿè·³è½¬åˆ°è¿™äº›ä½ç½®ã€‚æ ‡è®°å¯ä»¥æ˜¯å±€éƒ¨æ ‡è®°ï¼ˆä»…åœ¨å½“å‰æ–‡ä»¶ä¸­æœ‰æ•ˆï¼‰æˆ–å…¨å±€æ ‡è®°ï¼ˆåœ¨æ‰€æœ‰æ–‡ä»¶ä¸­æœ‰æ•ˆï¼‰ã€‚ä»¥ä¸‹æ˜¯ &lt;code>m&lt;/code> å‘½ä»¤çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•ï¼š&lt;/p>
&lt;p>&lt;strong>è®¾ç½®æ ‡è®°&lt;/strong>ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>è®¾ç½®å±€éƒ¨æ ‡è®°&lt;/strong>ï¼š
&lt;ul>
&lt;li>æ“ä½œï¼šåœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ &lt;code>m&lt;/code> ç„¶åæŒ‰ä¸€ä¸ªå°å†™å­—æ¯ï¼ˆä¾‹å¦‚ &lt;code>a&lt;/code>ï¼‰ã€‚&lt;/li>
&lt;li>ä¾‹å­ï¼šæŒ‰ &lt;code>ma&lt;/code> åœ¨å½“å‰å…‰æ ‡ä½ç½®è®¾ç½®æ ‡è®° &lt;code>a&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>è®¾ç½®å…¨å±€æ ‡è®°&lt;/strong>ï¼š
&lt;ul>
&lt;li>æ“ä½œï¼šåœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ &lt;code>m&lt;/code> ç„¶åæŒ‰ä¸€ä¸ªå¤§å†™å­—æ¯ï¼ˆä¾‹å¦‚ &lt;code>A&lt;/code>ï¼‰ã€‚&lt;/li>
&lt;li>ä¾‹å­ï¼šæŒ‰ &lt;code>mA&lt;/code> åœ¨å½“å‰å…‰æ ‡ä½ç½®è®¾ç½®å…¨å±€æ ‡è®° &lt;code>A&lt;/code>ã€‚&lt;/li>
&lt;li>åœ¨ideavimä¸­ä¼šæœ‰é«˜äº®ã€‚&lt;/li>
&lt;li>0-9å­—ç¬¦ä¹Ÿè¡¨ç¤ºå…¨å±€æ ‡è®°ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>m&lt;/code>å‘½ä»¤æ˜¯&lt;code>:mark æ ‡è®°å­—ç¬¦&lt;/code>çš„å¿«æ·é”®ã€‚
&lt;ol>
&lt;li>åŒºåˆ«æ˜¯&lt;code>m&lt;/code>ä¼šè®°å½•å…‰æ ‡çš„åˆ—ä½ç½®ï¼Œ&lt;code>:mark&lt;/code>ä¸ä¼šï¼Œå®ƒçš„åˆ—å·å§‹ç»ˆä¸º0ã€‚&lt;/li>
&lt;li>æ‰€ä»¥&lt;code>:mark&lt;/code>è·³è½¬åªä¼šåˆ°æ ‡è®°è¡Œçš„å¤´éƒ¨ã€‚ä¸ä¼šè·³è½¬åˆ°æ ‡è®°è¡Œå…‰æ ‡çš„ä½ç½®ã€‚&lt;/li>
&lt;li>ä¸€èˆ¬ä½¿ç”¨&lt;code>m&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>æ³¨æ„ï¼š
&lt;ol>
&lt;li>æ ‡è®°å­—ç¬¦åªæœ‰ä¸€ä¸ªã€‚
&lt;ol>
&lt;li>æ ‡è®°å­—ç¬¦å¸¸ç”¨çš„å­—æ¯ã€æ•°å­—ã€‚å…¶ä»–çš„éƒ¨åˆ†èƒ½ç”¨ã€‚ä¸ç”¨è€ƒè™‘ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>æ ‡è®°ä¿¡æ¯åŒ…æ‹¬æ ‡è®°å­—ç¬¦ã€å…‰æ ‡çš„è¡Œå·ã€åˆ—å·ä»¥åŠè¡Œçš„æ–‡æœ¬å†…å®¹ã€‚&lt;/li>
&lt;li>åç»­è®¾ç½®å­˜åœ¨çš„æ ‡è®°ä¼šè¦†ç›–ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>è·³è½¬åˆ°æ ‡è®°&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>' æ ‡è®°å­—ç¬¦&lt;/code>ï¼šè‡ªåŠ¨è·³è½¬åˆ°æ ‡è®°è¡Œçš„è¡Œå¤´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>`` æ ‡è®°å­—ç¬¦`ï¼šè‡ªåŠ¨è·³è½¬åˆ°æ ‡è®°è¡Œçš„å…‰æ ‡ä½ç½®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>'a&lt;/code>ï¼šè·³è½¬åˆ°å±€éƒ¨æ ‡è®°açš„è¡Œå¤´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>``A`è·³è½¬åˆ°å…¨å±€æ ‡è®°Aæ‰€åœ¨è¡Œå…‰æ ‡çš„ä½ç½®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è·³è½¬æ ‡è®°çš„å¼€å¤´å¦‚ä½•æœ‰ç©ºæ ¼ï¼Œéƒ½ä¼šå¿½ç•¥ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æŸ¥çœ‹æ ‡è®°&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>:marks&lt;/code>ï¼šæ˜¾ç¤ºæ‰€æœ‰å·²è®¾ç½®çš„æ ‡è®°åŠå…¶å…‰æ ‡ä½ç½®ã€è¡Œæ–‡æœ¬å†…å®¹ã€‚&lt;/li>
&lt;li>ä½¿ç”¨&lt;code>:mark&lt;/code>æ ‡è®°çš„è¡Œï¼Œå…‰æ ‡çš„åˆ—å·ä¸º0ã€‚æ‰€ä»¥`` `ä¹Ÿåªèƒ½è·³åˆ°æ ‡è®°è¡Œå¤´ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>åˆ é™¤æ ‡è®°&lt;/strong>ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åˆ é™¤æŒ‡å®šæ ‡è®°ï¼š&lt;code>:delmarks ...æ ‡è®°å­—ç¬¦&lt;/code>&lt;/p>
&lt;ol>
&lt;li>åé¢å¯ä»¥è·Ÿå¤šä¸ªæ ‡è®°å­—ç¬¦ï¼Œç”¨ä¸ç”¨ç©ºæ ¼éš”å¼€éƒ½è¡Œã€‚å¦‚ï¼š &lt;code>:delmarks ab&lt;/code> åˆ é™¤æ ‡è®° &lt;code>a&lt;/code> å’Œ &lt;code>b&lt;/code>ã€‚&lt;/li>
&lt;li>è¿˜å¯ä»¥åˆ é™¤èŒƒå›´å†…æ ‡è®°ï¼šå¦‚ï¼š &lt;code>:delmarks a-d&lt;/code> åˆ é™¤æ ‡è®° &lt;code>a&lt;/code> åˆ° &lt;code>d&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤æ‰€æœ‰æ ‡è®°ï¼š&lt;code>:delmarks!&lt;/code>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ³¨æ„è¯¥å‘½ä»¤åªèƒ½åˆ é™¤ç”¨æˆ·è®¾ç½®çš„æ‰€æœ‰æœ¬åœ°æ ‡è®°ï¼Œå¹¶ä¸”å†…ç½®çš„ç‰¹æ®Šæ ‡è®°ã€å…¨å±€æ ‡è®°ä¸èƒ½åˆ é™¤ã€‚å¦‚&lt;code>', &amp;lt;, &amp;gt;&lt;/code>ã€‚ï¼ˆæˆ‘å¿«å´©æºƒäº†ğŸ˜­ï¼‰&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ä¸Šé¢çš„ä¸‰ä¸ªå†…ç½®ç‰¹æ®Šæ ‡è®°ï¼Œä¸å»ºè®®ç”¨æ¥åšæ ‡è®°ã€‚ä»–ä»¬å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä»–ä»¬æ˜¯åŠ¨æ€ç”Ÿæˆçš„å†…ç½®ç‰¹æ®Šæ ‡è®°ï¼Œæ— æ³•åˆ é™¤ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;lt; # å¯è¡¨ç¤ºä¸Šæ¬¡visualæ¨¡å¼é€‰æ‹©çš„è¡Œå¤´ã€‚è¿˜å¯è¡¨ç¤ºæ ‡è®°çš„è¡Œå¤´ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&lt;/span>&amp;gt; &lt;span class="c1"># å¯è¡¨ç¤ºä¸Šæ¬¡visualæ¨¡å¼é€‰æ‹©çš„æœ«å°¾çš„è¡Œå¤´ã€‚è¿˜å¯ä»¥è¡¨ç¤ºæ ‡è®°çš„è¡Œå¤´ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>&amp;lt; &lt;span class="c1"># å¯è¡¨ç¤ºä¸Šæ¬¡visualæ¨¡å¼é€‰æ‹©å¼€å§‹çš„ä½ç½®ã€‚è¿˜å¯è¡¨ç¤ºæ ‡è®°è¡Œé¼ æ ‡çš„ä½ç½®ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>&amp;gt; &lt;span class="c1"># å¯è¡¨ç¤ºä¸Šæ¬¡visualæ¨¡å¼é€‰æ‹©çš„æœ«å°¾ã€‚è¿˜å¯è¡¨ç¤ºæ ‡è®°è¡Œé¼ æ ‡çš„ä½ç½®ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä¸ç”¨ä»–ä»¬åšæ ‡è®°ã€‚é€šå¸¸ç”¨åœ¨visualæ¨¡å¼ä¸­ï¼Œä¼šåŠ¨æ€è‡ªåŠ¨ç”Ÿæˆã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä¾‹å­ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:&lt;span class="s1">&amp;#39;&amp;lt;,&amp;#39;&lt;/span>&amp;gt;y å¤åˆ¶ä¸Šæ¬¡é€‰æ‹©çš„å†…å®¹ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:&lt;span class="s1">&amp;#39;&amp;lt;,&amp;#39;&lt;/span>&amp;gt;d åˆ é™¤ä¸Šæ¬¡é€‰æ‹©çš„å†…å®¹ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="c1"># è·³åˆ°å…‰æ ‡ä¸Šæ¬¡æ‰€åœ¨çš„è¡Œå¤´ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">é…åˆæ ‡è®°å¯ä»¥å®ç°æ¥å›ä¸¤ä¸ªæ ‡è®°è¡Œå¤´ä¹‹é—´è·³è½¬
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">``&lt;/span> &lt;span class="c1"># è·³è½¬åˆ°å…‰æ ‡ä¸Šæ¬¡æ‰€åœ¨çš„ç¡®åˆ‡ä½ç½®ï¼ˆè¡Œå’Œåˆ—ï¼‰ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">é…åˆæ ‡è®°å¯ä»¥å®ç°æ¥å›ä¸¤ä¸ªæ ‡è®°å…‰æ ‡ç¡®åˆ‡ä½ç½®ä¹‹é—´è·³è½¬
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æ„å‘³ç€ï¼š&lt;span class="sb">`&lt;/span> &lt;span class="err">&amp;#39;&lt;/span> åšçš„æ ‡è®°ä¼šéšæ—¶æ”¹å˜ã€‚ä¸ç”¨ä»–ä»¬åšæ ‡è®°ï¼Œä¼šåŠ¨æ€è‡ªåŠ¨ç”Ÿæˆã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç±»ä¼¼å‘½ä»¤ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Ctrl-o&lt;/code>ï¼šè·³è½¬åˆ°ä¸Šä¸€ä¸ªä½ç½®ã€‚&lt;/li>
&lt;li>&lt;code>Ctrl-i&lt;/code>ï¼šè·³è½¬åˆ°ä¸‹ä¸€ä¸ªä½ç½®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>å…¨å±€æ ‡è®°éœ€è¦æŒ‡å®šæ ‡è®°å­—ç¬¦æ‰èƒ½åˆ é™¤ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>Vim å†…ç½®çš„ç‰¹æ®Šæ ‡è®°æ˜¯ Vim è‡ªåŠ¨ç®¡ç†çš„ï¼Œç”¨äºè®°å½•ç‰¹å®šçš„ç¼–è¾‘ä½ç½®å’Œé€‰æ‹©èŒƒå›´ã€‚è¿™äº›æ ‡è®°ä¸èƒ½æ‰‹åŠ¨åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸ºç‰¹å®šåŠŸèƒ½è®¾è®¡çš„ï¼Œå¹¶ä¸”åœ¨ç›¸åº”æ“ä½œæ—¶ä¼šåŠ¨æ€æ›´æ–°ã€‚ç”¨æˆ·å¯ä»¥åˆ é™¤è‡ªå·±è®¾ç½®çš„æ ‡è®°ï¼Œä½†ä¸èƒ½åˆ é™¤è¿™äº›å†…ç½®ç‰¹æ®Šæ ‡è®°ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="å¯„å­˜å™¨">
&lt;a href="#%e5%af%84%e5%ad%98%e5%99%a8" class="header-anchor">#&lt;/a>
å¯„å­˜å™¨
&lt;/h4>&lt;p>åœ¨ Vim ä¸­ï¼Œå¯„å­˜å™¨ï¼ˆregisterï¼‰æ˜¯ä¸€ä¸ª&lt;strong>ä¸´æ—¶å­˜å‚¨ä½ç½®&lt;/strong>ï¼Œç”¨äº&lt;strong>å­˜å‚¨å’Œæ£€ç´¢æ–‡æœ¬ã€å‘½ä»¤ã€å®ç­‰&lt;/strong>ã€‚å¯„å­˜å™¨çš„ä½¿ç”¨å¯ä»¥å¤§å¤§æé«˜ç¼–è¾‘æ•ˆç‡ã€‚ä»¥ä¸‹æ˜¯å¯¹å¯„å­˜å™¨çš„è¯¦ç»†ä»‹ç»å’Œä½¿ç”¨æ–¹æ³•ï¼š&lt;/p>
&lt;p>&lt;strong>å¯„å­˜å™¨çš„åˆ†ç±»&lt;/strong>ï¼š&lt;/p>
&lt;p>Vim ä¸­æœ‰å¤šç§ç±»å‹çš„å¯„å­˜å™¨ï¼Œæ¯ç§ç±»å‹éƒ½æœ‰ç‰¹å®šçš„ç”¨é€”ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>æ— åå¯„å­˜å™¨&lt;/strong>ï¼ˆ&lt;code>&amp;quot;&lt;/code>ï¼‰Unnamed Registerï¼š
&lt;ul>
&lt;li>é»˜è®¤å¯„å­˜å™¨ï¼Œæ‰€æœ‰çš„åˆ é™¤ï¼ˆ&lt;code>d&lt;/code>ï¼‰ã€å¤åˆ¶ï¼ˆ&lt;code>y&lt;/code>ï¼‰ã€ç²˜è´´ï¼ˆ&lt;code>p&lt;/code>ï¼‰æ“ä½œéƒ½ä¸æ­¤å¯„å­˜å™¨å…³è”ã€‚&lt;strong>ç¼“å­˜æœ€åä¸€æ¬¡æ“ä½œå†…å®¹&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>å…·åå¯„å­˜å™¨&lt;/strong>ï¼ˆ&lt;code>a&lt;/code> åˆ° &lt;code>z&lt;/code> å’Œ &lt;code>A&lt;/code> åˆ° &lt;code>Z&lt;/code>ï¼‰Named Registerï¼š
&lt;ul>
&lt;li>ç”¨äºå­˜å‚¨ç”¨æˆ·æŒ‡å®šçš„æ–‡æœ¬æˆ–å®ã€‚&lt;/li>
&lt;li>å°å†™å­—æ¯ï¼ˆ&lt;code>a&lt;/code> åˆ° &lt;code>z&lt;/code>ï¼‰ï¼š&lt;strong>è¦†ç›–å­˜å‚¨&lt;/strong>ã€‚&lt;/li>
&lt;li>å¤§å†™å­—æ¯ï¼ˆ&lt;code>A&lt;/code> åˆ° &lt;code>Z&lt;/code>ï¼‰ï¼š&lt;strong>è¿½åŠ å­˜å‚¨&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>å‰ªè´´æ¿å¯„å­˜å™¨&lt;/strong>ï¼ˆ&lt;code>*&lt;/code> æˆ– &lt;code>+&lt;/code>ï¼‰selection and dropï¼š
&lt;ul>
&lt;li>ç”¨äºä¸ç³»ç»Ÿå‰ªè´´æ¿äº¤äº’ã€‚äºŒè€…å¯ä»¥ç”»ç­‰å·ï¼ŒåŒºåˆ«ï¼š&lt;/li>
&lt;li>&lt;code>*&lt;/code>ï¼šä¸é€‰æ‹©å‰ªè´´æ¿ï¼ˆprimary selectionï¼‰äº¤äº’ï¼ˆåœ¨ X Window ç³»ç»Ÿä¸­ï¼‰ã€‚&lt;/li>
&lt;li>&lt;code>+&lt;/code>ï¼šä¸ç³»ç»Ÿå‰ªè´´æ¿ï¼ˆclipboardï¼‰äº¤äº’ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>æ•°å­—å¯„å­˜å™¨&lt;/strong>ï¼ˆ&lt;code>0&lt;/code> åˆ° &lt;code>9&lt;/code>ï¼‰numberedï¼š
&lt;ul>
&lt;li>è‡ªåŠ¨å­˜å‚¨æœ€è¿‘çš„åˆ é™¤æ–‡æœ¬ã€‚&lt;/li>
&lt;li>&lt;code>0&lt;/code>ï¼šæœ€è¿‘çš„å¤åˆ¶ï¼ˆ&lt;code>yank&lt;/code>ï¼‰æ“ä½œã€‚&lt;/li>
&lt;li>&lt;code>1&lt;/code> åˆ° &lt;code>9&lt;/code>ï¼šæœ€è¿‘çš„åˆ é™¤ï¼ˆ&lt;code>delete&lt;/code>ï¼‰æ“ä½œï¼Œ&lt;code>1&lt;/code> æ˜¯æœ€æ–°çš„ï¼Œ&lt;code>9&lt;/code> æ˜¯æœ€æ—§çš„ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>è¯»å–ï¼ˆå‘½ä»¤ï¼‰å¯„å­˜å™¨&lt;/strong>ï¼ˆ&lt;code>:&lt;/code>ï¼‰ï¼š
&lt;ul>
&lt;li>å­˜å‚¨æœ€è¿‘çš„å‘½ä»¤è¡Œè¾“å…¥ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>æœç´¢å¯„å­˜å™¨&lt;/strong>ï¼ˆ&lt;code>/&lt;/code>ï¼‰last search patternï¼š
&lt;ul>
&lt;li>å­˜å‚¨æœ€è¿‘çš„æœç´¢æ¨¡å¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>å°åˆ é™¤å¯„å­˜å™¨&lt;/strong>ï¼ˆ&lt;code>-&lt;/code>ï¼‰small deleteï¼š
&lt;ul>
&lt;li>ç”¨äºå­˜å‚¨å°äºä¸€è¡Œçš„åˆ é™¤æ“ä½œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>é»‘æ´å¯„å­˜å™¨&lt;/strong>ï¼ˆ&lt;code>_&lt;/code>ï¼‰black holeï¼š
&lt;ul>
&lt;li>ä¸¢å¼ƒå†™å…¥å…¶ä¸­çš„ä»»ä½•å†…å®¹ï¼Œä¸å¯¹å…¶è¿›è¡Œå­˜å‚¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>è¡¨è¾¾å¼å¯„å­˜å™¨&lt;/strong>ï¼ˆ&lt;code>=&lt;/code>ï¼‰expressionï¼š
&lt;ul>
&lt;li>å…è®¸ä½ è¾“å…¥æ•°å­¦è¿ç®—è¿›è¡Œè®¡ç®—ã€‚&lt;/li>
&lt;li>åªèƒ½åœ¨Insertå’ŒCommandæ¨¡å¼ä½¿ç”¨ï¼Œä¸”éƒ¨åˆ†ç‰ˆæœ¬ä¸æ”¯æŒã€‚&lt;/li>
&lt;li>å¦‚ï¼šinsertæ¨¡å¼ä¸‹ï¼š&lt;code>ctrl-r =2+2 enter&lt;/code>ç»“æœä¸º4ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>åªè¯»å¯„å­˜å™¨&lt;/strong>read onlyï¼š
&lt;ul>
&lt;li>å‘½ä»¤å¯„å­˜å™¨&lt;code>:&lt;/code>&lt;/li>
&lt;li>ç‚¹å¯„å­˜å™¨&lt;code>.&lt;/code>ï¼šä¸Šæ¬¡insertæ¨¡å¼æ’å…¥çš„æ–‡æœ¬å†…å®¹ã€‚&lt;/li>
&lt;li>æœç´¢å¯„å­˜å™¨&lt;code>/&lt;/code>&lt;/li>
&lt;li>å½“å‰æ–‡ä»¶åå¯„å­˜å™¨&lt;code>%&lt;/code>&lt;/li>
&lt;li>ä¸Šä¸€ä¸ªæ–‡ä»¶åå¯„å­˜å™¨&lt;code>#&lt;/code>&lt;/li>
&lt;li>è¿™äº›å¯„å­˜å™¨éƒ½åªèƒ½è¯»ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>ä½¿ç”¨å¯„å­˜å™¨&lt;/strong>ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>æŸ¥çœ‹å¯„å­˜å™¨å†…å®¹&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>:reg&lt;/code> æˆ– &lt;code>:registers&lt;/code>&lt;/strong>ï¼šæŸ¥çœ‹æ‰€æœ‰å¯„å­˜å™¨çš„å†…å®¹ã€‚
&lt;ul>
&lt;li>ä¾‹å­ï¼šè¾“å…¥ &lt;code>:reg&lt;/code> æŸ¥çœ‹æ‰€æœ‰å¯„å­˜å™¨çš„å†…å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>&lt;code>:reg {register}&lt;/code>&lt;/strong>ï¼šæŸ¥çœ‹æŒ‡å®šå¯„å­˜å™¨çš„å†…å®¹ã€‚
&lt;ul>
&lt;li>å¯„å­˜å™¨å¯ä»¥æœ‰å¤šä¸ªï¼Œç”¨ä¸ç”¨ç©ºæ ¼éš”å¼€éƒ½è¡Œã€‚&lt;code>:reg 01 2&lt;/code>æŸ¥çœ‹å¯„å­˜å™¨0, 1, 2çš„å†…å®¹ã€‚&lt;/li>
&lt;li>ä¾‹å­ï¼šè¾“å…¥ &lt;code>:reg a&lt;/code> æŸ¥çœ‹å¯„å­˜å™¨ &lt;code>a&lt;/code> çš„å†…å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å¼•ç”¨å¯„å­˜å™¨&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨Nomalæ¨¡å¼ä¸‹å¯„å­˜å™¨å¯ä»¥é€šè¿‡&lt;strong>åœ¨åå­—å‰åŠ åŒå¼•å·æ¥å¼•ç”¨&lt;/strong>ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code>&amp;quot;a&lt;/code> æ¥è®¿é—®åœ¨ &lt;code>a&lt;/code> å¯„å­˜å™¨ä¸­çš„å†…å®¹ã€‚&lt;/li>
&lt;li>åœ¨Commandæˆ–Insertæ¨¡å¼ä¸‹å¯„å­˜å™¨å¯ä»¥é€šè¿‡&lt;code>ctrl-r åå­—&lt;/code>æ¥å¼•ç”¨ã€‚
&lt;ul>
&lt;li>æ³¨æ„åœ¨è¿™ä¸¤ä¸ªæ¨¡å¼ä¸‹å¼•ç”¨çš„å¯„å­˜å™¨ä¼š&lt;strong>ç«‹å³è¾“å‡ºå…¶å­˜å‚¨çš„å†…å®¹&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å¤åˆ¶åˆ°å¯„å­˜å™¨&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;quot;{register}y{motion}&lt;/code>ï¼šå¤åˆ¶æ–‡æœ¬åˆ°æŒ‡å®šå¯„å­˜å™¨ã€‚
&lt;ul>
&lt;li>ä¾‹å­ï¼šè¾“å…¥ &lt;code>&amp;quot;ayiw&lt;/code> å°†å½“å‰å•è¯å¤åˆ¶åˆ°å¯„å­˜å™¨ &lt;code>a&lt;/code> ä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç²˜è´´å¯„å­˜å™¨å†…å®¹&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;quot;{register}p&lt;/code> æˆ– &lt;code>&amp;quot;{register}P&lt;/code>ï¼šç²˜è´´å¯„å­˜å™¨å†…å®¹ã€‚
&lt;ul>
&lt;li>&lt;code>p&lt;/code> åœ¨å…‰æ ‡åç²˜è´´ï¼Œ&lt;code>P&lt;/code> åœ¨å…‰æ ‡å‰ç²˜è´´ã€‚&lt;/li>
&lt;li>ä¾‹å­ï¼šè¾“å…¥ &lt;code>&amp;quot;ap&lt;/code> å°†å¯„å­˜å™¨ &lt;code>a&lt;/code> çš„å†…å®¹ç²˜è´´åˆ°å…‰æ ‡åã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åˆ é™¤åˆ°å¯„å­˜å™¨&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;quot;{register}d{motion}&lt;/code>ï¼šåˆ é™¤æ–‡æœ¬å¹¶å­˜å‚¨åˆ°æŒ‡å®šå¯„å­˜å™¨ã€‚
&lt;ul>
&lt;li>ä¾‹å­ï¼šè¾“å…¥ &lt;code>&amp;quot;adiw&lt;/code> åˆ é™¤å½“å‰å•è¯å¹¶å°†å…¶å­˜å‚¨åˆ°å¯„å­˜å™¨ &lt;code>a&lt;/code> ä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="#%e5%ae%8f%e5%bd%95%e5%88%b6" >å½•åˆ¶å®&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>æ³¨æ„äº‹é¡¹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ— åå¯„å­˜å™¨ï¼šæ˜¯é»˜è®¤çš„å¯„å­˜å™¨ã€‚dã€cã€sã€xï¼Œyï¼Œpè¿™äº›æ“ä½œçš„æ–‡æœ¬ï¼Œéƒ½åœ¨&lt;code>&amp;quot;&amp;quot;&lt;/code>æ— åå¯„å­˜å™¨ä¸­ï¼ˆ&lt;strong>å­˜å‚¨æœ€åä¸€æ¬¡æ“ä½œå†…å®¹&lt;/strong>ï¼‰ã€‚é™¤éä¿®æ”¹é»˜è®¤å¯„å­˜å™¨ã€‚&lt;/p>
&lt;ol>
&lt;li>æ„å‘³ç€åˆ é™¤çš„å¯ä»¥ä½¿ç”¨på‘½ä»¤ç²˜è´´ï¼Œå› ä¸ºé»˜è®¤ä»æ— åå¯„å­˜å™¨å–å€¼ã€‚&lt;/li>
&lt;li>é»˜è®¤å¯„å­˜å™¨å¦‚æœæ˜¯æ— åå¯„å­˜å™¨ï¼Œpç²˜è´´å‘½ä»¤ä¸èƒ½ç²˜è´´å‰ªåˆ‡æ¿å†…å®¹ã€‚è¦å¼•ç”¨å‰ªåˆ‡æ¿å¯„å­˜å™¨&lt;code>*&lt;/code>æˆ–&lt;code>+&lt;/code>æ‰èƒ½ç²˜è´´ã€‚&lt;/li>
&lt;li>è‡ªç„¶åœ¨vimä¸­å¤åˆ¶ã€åˆ é™¤çš„ä¹Ÿå°±ä¸èƒ½è¿›å‰ªåˆ‡æ¿ã€‚éœ€è¦æŒ‡å®šå‰ªåˆ‡æ¿å¯„å­˜å™¨ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>æ•°å­—å¯„å­˜å™¨ï¼šç”¨äºå­˜å‚¨æœ€è¿‘å¤åˆ¶ã€åˆ é™¤çš„å†…å®¹ï¼Œåˆ é™¤çš„è¦ä»¥è¡Œä¸ºå•ä½æ‰ä¼šå­˜å‚¨ï¼Œå¦åˆ™åˆ é™¤çš„å­˜å‚¨åˆ°&lt;code>-&lt;/code>å¯„å­˜å™¨ã€‚å¤åˆ¶çš„ä¸å½±å“ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¤åˆ¶ç”¨0å­˜å‚¨ã€‚å¤åˆ¶çš„åªæœ‰0å’Œæ— åå¯„å­˜å™¨å­˜å‚¨ã€‚åè€…å¾ˆå¿«å¤±æ•ˆã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤ç”¨1-9å­˜å‚¨ã€‚æ•°å­—è¶Šå¤§ï¼Œåˆ é™¤çš„æ—¶é—´è¶Šä¹…ã€‚&lt;/p>
&lt;ul>
&lt;li>æ„å‘³ç€æŒ‡å®šå¯„å­˜å™¨ï¼Œå¯ä»¥è®¿é—®åˆ é™¤çš„å†…å®¹:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;2p # ç²˜è´´ç¬¬äºŒæ¡åˆ é™¤çš„å†…å®¹ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ•°å­—å¯„å­˜å™¨ä¸å¯ä»¥è¢«è‡ªå®šä¹‰çš„å…·åä¹Ÿå°±æ˜¯å­—æ¯å¯„å­˜å™¨æ›¿ä»£ã€‚&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å…·åä¹Ÿå°±æ˜¯å­—æ¯å¯„å­˜å™¨å­˜åœ¨çš„æ„ä¹‰æ˜¯å›ºåŒ–éœ€è¦é¢‘ç¹å‰ªåˆ‡çš„å†…å®¹ï¼Œä¸ä¼šå› ä¸ºæ“ä½œé¢‘ç¹è¢«è¦†ç›–ã€‚&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æˆ‘ä»¬ä¸€èˆ¬æ“ä½œå…·åå¯„å­˜å™¨ï¼šå¤åˆ¶ï¼Œç²˜è´´ï¼Œåˆ é™¤ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯„å­˜å™¨åªå¯ä»¥è¦†ç›–ï¼Œä¸å¯ä»¥åˆ é™¤ï¼Œç”±vimè‡ªèº«ç®¡ç†ç”Ÿå‘½å‘¨æœŸã€‚ä¸æ˜¯æ°¸ä¹…å­˜åœ¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯è·¨æ–‡ä»¶ä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>&lt;strong>å¯„å­˜å™¨çš„æ„ä¹‰&lt;/strong>ï¼š&lt;/p>
&lt;p>é¦–å…ˆï¼Œå¯„å­˜å™¨æ˜¯å¯ä»¥&lt;strong>è·¨æ–‡æœ¬æ–‡ä»¶ä½¿ç”¨&lt;/strong>çš„ï¼Œåªæœ‰&lt;strong>æœ‰åˆ é™¤åŠ¨ä½œéƒ½ä¼šè‡ªåŠ¨è®°å½•åˆ°1-9æ•°å­—å¯„å­˜å™¨&lt;/strong>ï¼Œ&lt;strong>0å­˜å‚¨å¤åˆ¶åŠ¨ä½œ&lt;/strong>ï¼Œè€Œè¿™äº›å¯„å­˜å™¨æ˜¯åŠ¨æ€çš„ï¼Œä¼šå˜åŒ–çš„ï¼Œå¦‚æœæ“ä½œåŠ¨ä½œå¾ˆå¤šï¼Œæœ‰ä¸€äº›æ“ä½œæ˜¯éœ€è¦é¢‘ç¹ä½¿ç”¨çš„ï¼Œé‚£ä¹ˆï¼Œä½¿ç”¨&lt;strong>è‡ªå®šä¹‰å…·åå¯„å­˜å™¨ä¼šå¤§å¤§çš„æé«˜æˆ‘ä»¬çš„æ•ˆç‡&lt;/strong>ï¼Œå› ä¸ºå­—æ¯å¯„å­˜å™¨æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œé™¤éä½ åˆ é™¤äº†è¿™ä¸ªå¯„å­˜å™¨ã€‚&lt;/p>
&lt;p>å†æ¬¡ï¼Œæˆ‘ä»¬å¦‚æœæœ‰æŸäº›æ–‡ä»¶è¯¯ä¿®æ”¹äº†ï¼Œæˆ–è€…æœ‰éæ³•å…¥ä¾µï¼Œå¦‚æœæ¶æ„é—¯å…¥è€…æ²¡æœ‰åˆ é™¤æ‰€æœ‰å¯„å­˜å™¨çš„å†…å®¹ï¼Œæˆ‘ä»¬æœ‰å¯èƒ½è¿½è¸ªåˆ°å®ƒçš„ä¿®æ”¹è½¨è¿¹ã€‚&lt;/p>
&lt;p>æœ€åï¼Œå¤šè¯´ä¸€å¥ï¼Œå¯„å­˜å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å¾ˆé•¿çš„ï¼Œå³ä½¿æœåŠ¡å™¨é‡å¯ä»€ä¹ˆçš„ï¼Œåªè¦èƒ½æ­£å¸¸è¿›å…¥ç³»ç»Ÿï¼Œå¯„å­˜å™¨é‡Œçš„å†…å®¹éƒ½æ˜¯ä¸€ç›´å­˜åœ¨çš„ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>Vim çš„å¯„å­˜å™¨åŠŸèƒ½å¼ºå¤§è€Œçµæ´»ï¼Œé€šè¿‡ç†Ÿç»ƒæŒæ¡å¯„å­˜å™¨çš„ä½¿ç”¨ï¼Œå¯ä»¥æå¤§åœ°æå‡ç¼–è¾‘æ•ˆç‡ã€‚å¯„å­˜å™¨ä¸ä»…å¯ä»¥ç”¨äºåŸºæœ¬çš„å¤åˆ¶å’Œç²˜è´´ï¼Œè¿˜å¯ä»¥å­˜å‚¨å®ã€å‘½ä»¤ç­‰ï¼Œæ›´å¥½åœ°ç®¡ç†å’Œé‡ç”¨ç¼–è¾‘å†…å®¹ã€‚&lt;/p>
&lt;h4 id="å®å½•åˆ¶">
&lt;a href="#%e5%ae%8f%e5%bd%95%e5%88%b6" class="header-anchor">#&lt;/a>
å®å½•åˆ¶
&lt;/h4>&lt;p>åœ¨ Vim ä¸­ï¼Œå®æ˜¯ä¸€ç»„è®°å½•çš„&lt;strong>æŒ‰é”®åºåˆ—&lt;/strong>ï¼Œå¯ä»¥é‡å¤æ‰§è¡Œä»¥è‡ªåŠ¨åŒ–é‡å¤æ€§çš„ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨å®çš„è¯¦ç»†æ­¥éª¤å’Œç›¸å…³å‘½ä»¤ï¼š&lt;/p>
&lt;p>&lt;strong>å®å½•åˆ¶&lt;/strong>å…¶å®å°±æ˜¯è®°å½•å®åˆ°&lt;a class="link" href="#%e5%af%84%e5%ad%98%e5%99%a8" >å¯„å­˜å™¨&lt;/a>ï¼ˆéƒ½æ˜¯åœ¨&lt;strong>æ™®é€šæ¨¡å¼&lt;/strong>ä¸‹å¼€å§‹ã€ç»“æŸï¼‰ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>&lt;code>q{register}&lt;/code>&lt;/strong>ï¼šåœ¨Normalæ¨¡å¼ä¸‹ï¼Œå¼€å§‹å½•åˆ¶å®åˆ°æŒ‡å®šå¯„å­˜å™¨ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¾‹å­ï¼šæŒ‰ &lt;code>qa&lt;/code> å¼€å§‹å½•åˆ¶å®åˆ°å¯„å­˜å™¨ &lt;code>a&lt;/code> ä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¼€å§‹å½•åˆ¶ä¹‹åå¯ä»¥ä»»æ„æ‰§è¡Œvimå‘½ä»¤ã€‚è¿›è¡Œä½ å¸Œæœ›å½•åˆ¶çš„æ‰€æœ‰æŒ‰é”®æ“ä½œã€‚Vim ä¼šè®°å½•è¿™äº›æŒ‰é”®ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¾‹å­ï¼šè¾“å…¥ä¸€ç³»åˆ—ç¼–è¾‘å‘½ä»¤ï¼Œå¦‚æ’å…¥æ–‡æœ¬ã€åˆ é™¤æ–‡æœ¬ã€ç§»åŠ¨å…‰æ ‡ç­‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>q&lt;/code>&lt;/strong>ï¼šç»“æŸå½•åˆ¶å®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>@{register}&lt;/code>&lt;/strong>ï¼šæ‰§è¡Œå­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­çš„å®ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¾‹å­ï¼šæŒ‰ &lt;code>@a&lt;/code> æ‰§è¡Œå¯„å­˜å™¨ &lt;code>a&lt;/code> ä¸­çš„å®ã€‚&lt;/li>
&lt;li>ï¼ˆideavimç›®å‰ä¸æ”¯æŒæ‰§è¡Œå®ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>@@&lt;/code>&lt;/strong>ï¼šé‡å¤æ‰§è¡Œä¸Šä¸€æ¬¡æ‰§è¡Œçš„å®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¤šæ¬¡æ‰§è¡Œå®ï¼š&lt;/p>
&lt;ul>
&lt;li>æ“ä½œï¼šåœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œè¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œç„¶åæŒ‰ &lt;code>@&lt;/code> å’Œå¯„å­˜å™¨å­—æ¯é”®ã€‚
&lt;ul>
&lt;li>&lt;code>10@@&lt;/code>æ‰§è¡Œ10ä¸Šæ¬¡æ‰§è¡Œçš„å®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä¾‹å­ï¼šæŒ‰ &lt;code>10@a&lt;/code> å°†å® &lt;code>a&lt;/code> æ‰§è¡Œ 10 æ¬¡ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>ç¼–è¾‘å’ŒæŸ¥çœ‹å®&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;strong>æŸ¥çœ‹å®å†…å®¹&lt;/strong>ï¼š
&lt;ul>
&lt;li>æ“ä½œï¼šåœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œè¾“å…¥ &lt;code>:reg&lt;/code> æŸ¥çœ‹æ‰€æœ‰å¯„å­˜å™¨çš„å†…å®¹ï¼ŒåŒ…æ‹¬å®ã€‚&lt;/li>
&lt;li>ä¾‹å­ï¼šè¾“å…¥ &lt;code>:reg a&lt;/code> æŸ¥çœ‹å¯„å­˜å™¨ &lt;code>a&lt;/code> çš„å†…å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ç¼–è¾‘å®å†…å®¹&lt;/strong>ï¼š
&lt;ul>
&lt;li>æ“ä½œï¼šå°†å®å†…å®¹å¤åˆ¶åˆ°ä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œç¼–è¾‘ï¼Œç„¶åå°†å…¶ç²˜è´´å›å¯„å­˜å™¨ã€‚&lt;/li>
&lt;li>ä¾‹å­ï¼š
&lt;ol>
&lt;li>è¾“å…¥ &lt;code>:let @a='your edited macro'&lt;/code>ï¼Œå°† &lt;code>'your edited macro'&lt;/code> æ›¿æ¢ä¸ºç¼–è¾‘åçš„å®å†…å®¹ã€‚&lt;/li>
&lt;li>æˆ–è€…ï¼Œå…ˆç”¨ &lt;code>:put a&lt;/code> å°†å¯„å­˜å™¨å†…å®¹ç²˜è´´åˆ°ç¼“å†²åŒºï¼Œç¼–è¾‘åç”¨ &lt;code>:let @a=join(getline(1, &amp;quot;$&amp;quot;), &amp;quot;\n&amp;quot;)&lt;/code> ä¿å­˜ä¿®æ”¹ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>å®ä¾‹1&lt;/strong>ï¼š&lt;/p>
&lt;p>å‡è®¾ä½ æƒ³å½•åˆ¶ä¸€ä¸ªå®ï¼Œç”¨äºåœ¨æ¯è¡Œçš„æœ«å°¾æ·»åŠ ä¸€ä¸ªåˆ†å·ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>å¼€å§‹å½•åˆ¶&lt;/strong>ï¼š
&lt;ul>
&lt;li>æŒ‰ &lt;code>qa&lt;/code> å¼€å§‹å½•åˆ¶å®åˆ°å¯„å­˜å™¨ &lt;code>a&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>è¿›è¡Œæ“ä½œ&lt;/strong>ï¼š
&lt;ul>
&lt;li>æŒ‰ &lt;code>$&lt;/code> ç§»åŠ¨åˆ°è¡Œå°¾ã€‚&lt;/li>
&lt;li>æŒ‰ &lt;code>a;&lt;/code> åœ¨è¡Œå°¾æ’å…¥åˆ†å·ã€‚&lt;/li>
&lt;li>æŒ‰ &lt;code>Esc&lt;/code> é€€å‡ºæ’å…¥æ¨¡å¼ã€‚&lt;/li>
&lt;li>æŒ‰ &lt;code>j&lt;/code> ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ç»“æŸå½•åˆ¶&lt;/strong>ï¼š
&lt;ul>
&lt;li>æŒ‰ &lt;code>q&lt;/code> ç»“æŸå®å½•åˆ¶ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>æ‰§è¡Œå®&lt;/strong>ï¼š
&lt;ul>
&lt;li>æŒ‰ &lt;code>@a&lt;/code> æ‰§è¡Œå®ï¼Œåœ¨å½“å‰è¡Œæœ«å°¾æ·»åŠ åˆ†å·å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>å¤šæ¬¡æ‰§è¡Œå®&lt;/strong>ï¼š
&lt;ul>
&lt;li>æŒ‰ &lt;code>10@a&lt;/code> æ‰§è¡Œå® 10 æ¬¡ï¼Œæ¯æ¬¡åœ¨è¡Œæœ«å°¾æ·»åŠ åˆ†å·å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;code>ctrl-a&lt;/code>ä¼šå¯¹å…‰æ ‡æ‰€åœ¨æ•°å­—åŠ 1.&lt;/p>
&lt;p>ç¤ºä¾‹2ï¼š&lt;/p>
&lt;p>åœ¨ä¸€ä¸ªåªæœ‰ä¸€è¡Œä¸”è¿™ä¸€è¡Œåªæœ‰â€œ1â€çš„æ–‡æœ¬ä¸­ï¼Œé”®å…¥å¦‚ä¸‹å‘½ä»¤ï¼š&lt;/p>
&lt;p>&lt;code>qaYp&amp;lt;C-a&amp;gt;q&lt;/code>&lt;/p>
&lt;p>è§£é‡Šï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>qa&lt;/code> å¼€å§‹å½•åˆ¶ã€‚&lt;/li>
&lt;li>&lt;code>Yp&lt;/code> å¤åˆ¶è¡Œå¹¶ç²˜è´´ã€‚&lt;/li>
&lt;li>&lt;code>&amp;lt;C-a&amp;gt;&lt;/code> å¢åŠ 1ã€‚&lt;/li>
&lt;li>&lt;code>q&lt;/code> åœæ­¢å½•åˆ¶ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;code>@a&lt;/code> â†’ åœ¨1ä¸‹é¢å†™ä¸‹ 2&lt;/p>
&lt;p>&lt;code>@@&lt;/code> â†’ åœ¨2 æ­£é¢å†™ä¸‹3&lt;/p>
&lt;p>ç°åœ¨åš &lt;code>100@@&lt;/code> ä¼šåˆ›å»ºæ–°çš„100è¡Œï¼Œå¹¶æŠŠæ•°æ®å¢åŠ åˆ° 103.&lt;/p>
&lt;p>é€šè¿‡ä½¿ç”¨å®ï¼Œä½ å¯ä»¥åœ¨ Vim ä¸­æœ‰æ•ˆåœ°è‡ªåŠ¨åŒ–é‡å¤æ€§ä»»åŠ¡ï¼Œæé«˜ç¼–è¾‘æ•ˆç‡ã€‚å½•åˆ¶ã€æ‰§è¡Œå’Œç¼–è¾‘å®çš„çµæ´»æ€§ä½¿å¾—å®ƒä»¬æˆä¸ºå¼ºå¤§çš„å·¥å…·ï¼Œé€‚ç”¨äºå„ç§ç¼–è¾‘åœºæ™¯ã€‚&lt;/p>
&lt;h4 id="åˆ†å±">
&lt;a href="#%e5%88%86%e5%b1%8f" class="header-anchor">#&lt;/a>
åˆ†å±
&lt;/h4>&lt;p>åœ¨ Vim ä¸­ï¼Œåˆ†å±ï¼ˆsplit screenï¼‰åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå…è®¸ä½ åœ¨åŒä¸€ä¸ª Vim ä¼šè¯ä¸­åŒæ—¶æŸ¥çœ‹å’Œç¼–è¾‘å¤šä¸ªæ–‡ä»¶æˆ–åŒä¸€ä¸ªæ–‡ä»¶çš„ä¸åŒéƒ¨åˆ†ã€‚ä»¥ä¸‹æ˜¯ Vim åˆ†å±æ“ä½œçš„è¯¦ç»†ä»‹ç»ï¼š&lt;/p>
&lt;p>&lt;strong>åˆ†ç±»&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>æ°´å¹³åˆ†å±ï¼šå‘½ä»¤ï¼š&lt;code>:sp [file]&lt;/code>or&lt;code>:split [file]&lt;/code>ï¼š
&lt;ul>
&lt;li>æŒ‡å®šæ–‡ä»¶æ°´å¹³åˆ†å±ï¼Œæ²¡æœ‰æŒ‡å®šä¸ºå½“å‰æ–‡ä»¶ã€‚&lt;/li>
&lt;li>å¿«æ·é”®ï¼š&lt;code>ctrl+w s&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å‚ç›´åˆ†å±ï¼šå‘½ä»¤ï¼š&lt;code>:vsp [file]&lt;/code>or &lt;code>:vsplit [file]&lt;/code> ï¼š
&lt;ul>
&lt;li>æŒ‡å®šæ–‡ä»¶é‡ç½®åˆ†å±ï¼Œæ²¡æœ‰æŒ‡å®šé»˜è®¤ä¸ºå½“å‰æ–‡ä»¶ã€‚&lt;/li>
&lt;li>å¿«æ·é”®ï¼š&lt;code>ctrl+w v&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>æ“ä½œï¼ˆæœ€åä¸€ä¸ªå¿«æ·é”®å¯ä»¥åˆ†å¼€æŒ‰ï¼‰ï¼š&lt;/p>
&lt;ul>
&lt;li>åˆ†å±çª—å£è·Ÿæ™®é€šçª—å£ä¸€æ¨¡ä¸€æ ·ï¼Œå¯ä»¥æ‰§è¡Œvimçš„æ‰€æœ‰çš„å‘½ä»¤ã€‚
&lt;ul>
&lt;li>åˆ†å±çš„çª—å£è¿˜å¯ä»¥ç»§ç»­åˆ†å±ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>åˆ‡æ¢åˆ°å…¶ä»–çª—å£&lt;/strong>
&lt;ul>
&lt;li>&lt;code>ctrl+w w&lt;/code>ä¸åŒåˆ†å±çª—å£ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚&lt;/li>
&lt;li>&lt;code>Ctrl-w h&lt;/code>ï¼šåˆ‡æ¢åˆ°å·¦è¾¹çš„çª—å£ã€‚&lt;/li>
&lt;li>&lt;code>Ctrl-w j&lt;/code>ï¼šåˆ‡æ¢åˆ°ä¸‹é¢çš„çª—å£ã€‚&lt;/li>
&lt;li>&lt;code>Ctrl-w k&lt;/code>ï¼šåˆ‡æ¢åˆ°ä¸Šé¢çš„çª—å£ã€‚&lt;/li>
&lt;li>&lt;code>Ctrl-w l&lt;/code>ï¼šåˆ‡æ¢åˆ°å³è¾¹çš„çª—å£ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>è°ƒæ•´çª—å£é«˜åº¦&lt;/strong>ï¼ˆéƒ¨åˆ†vimç‰ˆæœ¬ä¸èµ·ä½œç”¨ï¼‰ï¼š
&lt;ul>
&lt;li>&lt;code>Ctrl-w +&lt;/code>ï¼šå¢åŠ å½“å‰çª—å£é«˜åº¦ã€‚&lt;/li>
&lt;li>&lt;code>Ctrl-w -&lt;/code>ï¼šå‡å°‘å½“å‰çª—å£é«˜åº¦ã€‚&lt;/li>
&lt;li>&lt;code>Ctrl-w =&lt;/code>ï¼šä½¿æ‰€æœ‰çª—å£ç­‰é«˜ã€‚&lt;/li>
&lt;li>&lt;code>ctrl-w _&lt;/code>ï¼šæœ€å¤§åŒ–å½“å‰æ°´å¹³çª—å£ã€‚&lt;/li>
&lt;li>&lt;code>ctrl-w |&lt;/code>ï¼šæœ€å¤§åŒ–å½“å‰å‚ç›´çª—å£ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>è°ƒæ•´çª—å£å®½åº¦&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>Ctrl-w &amp;gt;&lt;/code>ï¼šå¢åŠ å½“å‰çª—å£å®½åº¦ã€‚&lt;/li>
&lt;li>&lt;code>Ctrl-w &amp;lt;&lt;/code>ï¼šå‡å°‘å½“å‰çª—å£å®½åº¦ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>å…³é—­å½“å‰çª—å£&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>:q&lt;/code> æˆ– &lt;code>:quit&lt;/code>ï¼šå…³é—­å½“å‰çª—å£ã€‚&lt;/li>
&lt;li>&lt;strong>å¿«æ·é”®&lt;/strong>ï¼š&lt;code>Ctrl-w c&lt;/code> æˆ– &lt;code>Ctrl-w q&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>å…³é—­å…¶ä»–çª—å£&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>:only&lt;/code>ï¼šå…³é—­é™¤äº†å½“å‰çª—å£ä¹‹å¤–çš„æ‰€æœ‰çª—å£ã€‚&lt;/li>
&lt;li>&lt;strong>å¿«æ·é”®&lt;/strong>ï¼š&lt;code>Ctrl-w o&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>äº¤æ¢çª—å£ä½ç½®&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>Ctrl-w r&lt;/code>ï¼šæ—‹è½¬çª—å£å¸ƒå±€ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>æ‹†åˆ†åˆ°æ ‡ç­¾é¡µ&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>:tab split&lt;/code>ï¼šåœ¨æ–°æ ‡ç­¾é¡µä¸­æ°´å¹³åˆ†å±å½“å‰æ–‡ä»¶ã€‚&lt;/li>
&lt;li>&lt;code>:tab vsplit&lt;/code>ï¼šåœ¨æ–°æ ‡ç­¾é¡µä¸­å‚ç›´åˆ†å±å½“å‰æ–‡ä»¶ã€‚&lt;/li>
&lt;li>æˆ‘æµ‹è¯•äºŒè€…æ•ˆæœä¸€æ ·ï¼Œå°±æ˜¯å°†æŒ‡å®šæ–‡ä»¶ï¼Œé»˜è®¤å½“å‰æ–‡ä»¶æ‹†åˆ†åˆ°æ ‡ç­¾é¡µä¸­ã€‚è·Ÿæµè§ˆå™¨æ ‡ç­¾é¡µç±»ä¼¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>vimæ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œé»˜è®¤ä¸ä¼šåˆ†å±ï¼Œæ˜¯ä»¥å¤šçª—å£çš„æ–¹å¼æ‰“å¼€ï¼Œå¯ä»¥ä½¿ç”¨&lt;code>bn, bp&lt;/code>åˆ‡æ¢ã€‚
&lt;ul>
&lt;li>&lt;code>-o[n]&lt;/code>é€‰é¡¹:æŒ‡å®šæ‰“å¼€çš„åˆ†å±çª—å£æ•°é‡ï¼Œé»˜è®¤nä¸º1ä¸ªï¼Œé»˜è®¤æ°´å¹³åˆ†å±ã€‚
&lt;ul>
&lt;li>å¯ä»¥ä¸ç”¨æŒ‡å®šnï¼Œæ ¹æ®åé¢çš„æ–‡ä»¶æ•°æ¥ç¡®å®šåˆ†å±ã€‚&lt;/li>
&lt;li>å¦‚æœnä¸æ–‡ä»¶æ•°ä¸ç­‰ï¼Œnæœ‰å‡ ä¸ªå°±åˆ†å‡ å±ï¼Œå¤šå‡ºçš„æ–‡ä»¶åˆ°åˆ†åˆ«ä¸€ä¸ªå®Œæ•´çš„çª—å£ä¸­ã€‚&lt;/li>
&lt;li>&lt;code>-O&lt;/code>å‚ç›´åˆ†å±ã€‚åé¢æœ‰å‡ ä¸ªæ–‡ä»¶ï¼Œå°±å‡ ä¸ªå‚ç›´åˆ†å±ã€‚ï¼ˆnä¸æ–‡ä»¶æ•°ç›¸ç­‰çš„æƒ…å†µï¼‰ã€‚ä¸ç­‰åˆ†å±æ•°ç”±nå†³å®šï¼Œå¤šçš„æ–‡ä»¶åˆ†åˆ«å•ç‹¬ä¸€ä¸ªçª—å£ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="ç»“æŸè¯­">
&lt;a href="#%e7%bb%93%e6%9d%9f%e8%af%ad" class="header-anchor">#&lt;/a>
ç»“æŸè¯­
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>ä¸Šé¢æ˜¯ä½œè€…æœ€å¸¸ç”¨çš„90%çš„å‘½ä»¤ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æˆ‘å»ºè®®ä½ æ¯å¤©éƒ½å­¦1åˆ°2ä¸ªæ–°çš„å‘½ä»¤ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ä¸¤åˆ°ä¸‰å‘¨åï¼Œä½ ä¼šæ„Ÿåˆ°vimçš„å¼ºå¤§çš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœ‰æ—¶å€™ï¼Œå­¦ä¹ VIMå°±åƒæ˜¯åœ¨æ­»èƒŒä¸€äº›ä¸œè¥¿ã€‚&lt;/p>
&lt;ul>
&lt;li>å®˜æ–¹å»ºè®®ï¼šè¦åœ¨ä½¿ç”¨ä¸­å­¦ä¹ ï¼Œè€Œä¸æ˜¯åœ¨è®°å¿†ä¸­å­¦ä¹ ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¹¸è¿çš„æ˜¯ï¼Œvimæœ‰å¾ˆå¤šå¾ˆä¸é”™çš„å·¥å…·å’Œä¼˜ç§€çš„æ–‡æ¡£ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿è¡Œvimtutorç›´åˆ°ä½ ç†Ÿæ‚‰äº†é‚£äº›åŸºæœ¬å‘½ä»¤ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å…¶å®åœ¨çº¿å¸®åŠ©æ–‡æ¡£ä¸­ä½ åº”è¯¥è¦ä»”ç»†é˜…è¯»çš„æ˜¯ &lt;code>:help usr_02.txt&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½ ä¼šå­¦ä¹ åˆ°è¯¸å¦‚ &lt;code>!ï¼Œ&lt;/code> ç›®å½•ï¼Œå¯„å­˜å™¨ï¼Œæ’ä»¶ç­‰å¾ˆå¤šå…¶å®ƒçš„åŠŸèƒ½ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å­¦ä¹ vimå°±åƒå­¦å¼¹é’¢ç´ä¸€æ ·ï¼Œä¸€æ—¦å­¦ä¼šï¼Œå—ç›Šæ— ç©·ã€‚&lt;/p>
&lt;div align="center" style='color:red'>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æ­£æ–‡ç»“æŸâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
&lt;/div>
&lt;h2 id="æ‰©å±•">
&lt;a href="#%e6%89%a9%e5%b1%95" class="header-anchor">#&lt;/a>
æ‰©å±•
&lt;/h2>&lt;p>æ›´å¤šå†…å®¹å‚è€ƒ&lt;a class="link" href="https://arlettebrook.github.io/p/vim-introduction/" target="_blank" rel="noopener"
>vim-introduction&lt;/a>ã€‚&lt;/p>
&lt;h3 id="ç›®å½•æ“ä½œ">
&lt;a href="#%e7%9b%ae%e5%bd%95%e6%93%8d%e4%bd%9c" class="header-anchor">#&lt;/a>
ç›®å½•æ“ä½œ
&lt;/h3>&lt;p>Vim è‡ªå¸¦çš„ &lt;code>netrw&lt;/code> æ’ä»¶æä¾›äº†æ–‡ä»¶æµè§ˆå™¨åŠŸèƒ½ï¼Œå¯ä»¥ç”¨æ¥&lt;strong>æµè§ˆã€æ“ä½œç›®å½•å’Œæ–‡ä»¶&lt;/strong>ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>æ‰“å¼€ç›®å½•æµè§ˆ&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">:Explore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:Ex &lt;span class="c1"># ç®€å†™&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ä¼šå…³é—­å½“å‰æ–‡ä»¶ã€‚&lt;/li>
&lt;li>ç”¨vimç§»åŠ¨å‘½ä»¤ç§»åŠ¨ï¼Œå›è½¦æ‰“å¼€æ–‡ä»¶æˆ–å‘½ä»¤ã€‚&lt;/li>
&lt;li>&lt;code>:q&lt;/code>é€€å‡ºæµè§ˆã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åœ¨å‚ç›´åˆ†å±çª—å£ä¸­æ‰“å¼€ç›®å½•æµè§ˆå™¨&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">:Vexplore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:Vex &lt;span class="c1"># ç®€å†™&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>åˆ†å±å‘½ä»¤éƒ½å¯ä»¥ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åœ¨æ°´å¹³åˆ†å±çª—å£ä¸­æ‰“å¼€ç›®å½•æµè§ˆå™¨&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">:Sexplore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:Sex &lt;span class="c1"># ç®€å†™&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>æµè§ˆæŒ‡å®šç›®å½•&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">:Explore /path/to/directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:Vex /path/to/directory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>éƒ¨åˆ†vimç‰ˆæœ¬ä¸å¸¦è¯¥ç›®å½•æµè§ˆæ’ä»¶ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>åŸæ–‡åœ°å€&lt;a class="link" href="https://blog.csdn.net/niushuai666/article/details/7275406" target="_blank" rel="noopener"
>Vimç®€æ˜æ•™ç¨‹ã€CoolShellã€‘&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.51cto.com/u_15966109/6082781" target="_blank" rel="noopener"
>vimçš„å¯„å­˜å™¨è¯¦è§£&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://segmentfault.com/a/1190000038477576" target="_blank" rel="noopener"
>(è¯‘)Vim å¯„å­˜å™¨ï¼šç”±æµ…å…¥æ·±&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Template Introduction</title><link>https://arlettebrook.github.io/p/template-introduction/</link><pubDate>Sun, 26 May 2024 14:00:53 +0800</pubDate><guid>https://arlettebrook.github.io/p/template-introduction/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>æ¨¡æ¿æ¸²æŸ“æ˜¯æŒ‡æ ¹æ®ç‰¹å®šçš„&lt;strong>æ¨¡æ¿è¯­æ³•&lt;/strong>ï¼Œå°†è¿™äº›æ¨¡æ¿æ¸²æŸ“æˆæ–‡æœ¬ï¼Œé€šå¸¸ç”¨äºç”Ÿæˆ &lt;strong>HTML&lt;/strong>ã€&lt;strong>é‚®ä»¶&lt;/strong>ã€&lt;strong>é…ç½®æ–‡ä»¶&lt;/strong>ç­‰ã€‚åœ¨Goè¯­è¨€ä¸­æä¾›äº†ä¸¤ä¸ªæ ‡å‡†åº“æ¥æ¸²æŸ“æ¨¡æ¿ï¼Œå®ƒä»¬éƒ½å…·æœ‰ç›¸åŒçš„æ¨¡æ¿è¯­æ³•ï¼Œåˆ†åˆ«æ˜¯&lt;code>text/template&lt;/code> å’Œ &lt;code>html/template&lt;/code> ï¼Œæ¥ä¸‹æ¥å°†ä»‹ç»è¿™ä¸¤ä¸ªæ ‡å‡†åº“å¦‚ä½•ä½¿ç”¨ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>äºŒè€…éƒ½æ˜¯goè¯­è¨€çš„æ ‡å‡†åº“ï¼Œç›´æ¥ä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//&amp;#34;html/template&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Hello, {{.Name}}! Your message is: {{.Message}}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;World&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;&amp;lt;script&amp;gt;alert(&amp;#39;XSS&amp;#39;);&amp;lt;/script&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Parsing template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Excuting templete: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨templateåº“å¾ˆç®€å•ï¼Œåªéœ€è¦åˆ›å»º&lt;code>Template&lt;/code>å¯¹è±¡ï¼ˆæ¨¡æ¿ä¸æ˜¯æ–‡ä»¶éœ€è¦æŒ‡å®šæ¨¡æ¿çš„åç§°ï¼‰ï¼Œè°ƒ&lt;code>Parse&lt;/code>æ–¹æ³•è§£ææ¨¡æ¿ï¼Œæœ€åè°ƒ&lt;code>Execute&lt;/code>æ–¹æ³•æŒ‡å®šè¾“å‡ºçš„åœ°æ–¹å’Œæ•°æ®ï¼Œå°±èƒ½æ¸²æŸ“æ¨¡æ¿ã€‚&lt;/p>
&lt;p>æ¨¡æ¿æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œç”±æ¨¡æ¿è¯­æ³•ç»„æˆã€‚æ¨¡æ¿è¯­æ³•éƒ½åŒ…å«åœ¨&lt;code>{{&lt;/code>å’Œ&lt;code>}}&lt;/code>ä¸­é—´ï¼Œå…¶ä¸­&lt;code>{{.}}&lt;/code>ä¸­çš„ç‚¹è¡¨ç¤ºå½“å‰å¯¹è±¡ã€‚è¾“å‡ºçš„åœ°æ–¹æ˜¯ä¸€ä¸ª&lt;code>io.Writer&lt;/code>ã€‚æ•°æ®å¸¸ç”¨çš„æ˜¯ç»“æ„ä½“å¯¹è±¡æˆ–mapç±»å‹ã€‚æ¸²æŸ“æ¨¡æ¿æ˜¯æ ¹æ®æ¨¡æ¿è¯­æ³•&lt;strong>å°†æ•°æ®ç»‘å®šåˆ°æ¨¡æ¿ä¸­&lt;/strong>ã€‚&lt;/p>
&lt;p>ä¸Šé¢ç¨‹åºè¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hello, World! Your message is: &amp;lt;script&amp;gt;alert&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;XSS&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="p">;&lt;/span>&amp;lt;/script&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨é‡Šæ‰&lt;code>&amp;quot;text/template&amp;quot;&lt;/code>æ¢æˆ&lt;code>&amp;quot;html/template&amp;quot;&lt;/code>è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hello, World! Your message is: &lt;span class="p">&amp;amp;&lt;/span>lt&lt;span class="p">;&lt;/span>script&lt;span class="p">&amp;amp;&lt;/span>gt&lt;span class="p">;&lt;/span>alert&lt;span class="o">(&lt;/span>&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="c1">#39;XSS&amp;amp;#39;);&amp;amp;lt;/script&amp;amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>äºŒè€…çš„ä¸»è¦åŒºåˆ«å°±æ˜¯&lt;code>html/template&lt;/code>ä¼šå°†&lt;strong>æ¸²æŸ“çš„HTMLå†…å®¹è½¬ä¹‰&lt;/strong>ã€‚æ„æ€å°±æ˜¯è®©ç»‘å®šçš„HTMLæ•°æ®å˜æˆæ™®é€šæ–‡æœ¬ï¼Œå¤±å»å…¶åŸæ¥çš„ä½œç”¨ï¼Œèƒ½å¤Ÿé˜²æ­¢&lt;strong>è·¨ç«™è„šæœ¬æ”»å‡»&lt;/strong> (XSS)ã€‚å› æ­¤å½“æˆ‘ä»¬çš„æ¨¡æ¿æ˜¯HTMLæ—¶ï¼Œæ¨èä½¿ç”¨&lt;code>html/template&lt;/code>åŒ…æ¸²æŸ“ï¼Œå¹¶ä¸”è¯¥åŒ…ä¹Ÿæ˜¯ä¸“é—¨ä¸ºæ¸²æŸ“HTMLæ¨¡æ¿å‡†å¤‡çš„ï¼Œç¡®ä¿ç”Ÿæˆçš„ HTML æ˜¯å®‰å…¨çš„ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="templateä»‹ç»">
&lt;a href="#template%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
templateä»‹ç»
&lt;/h2>&lt;p>åœ¨ Go è¯­è¨€ä¸­ï¼Œ&lt;code>text/template&lt;/code> å’Œ &lt;code>html/template&lt;/code> éƒ½æ˜¯ç”¨äºæ¨¡æ¿å¤„ç†çš„åŒ…ï¼Œå®ƒä»¬åœ¨åŠŸèƒ½ä¸Šæœ‰è®¸å¤šç›¸ä¼¼ä¹‹å¤„ï¼Œä½†ä¹Ÿæœ‰é‡è¦çš„åŒºåˆ«ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç† HTML æ—¶ã€‚&lt;/p>
&lt;p>&lt;strong>ä½œç”¨&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>text/template&lt;/code>&lt;/strong>ï¼šé€‚ç”¨äºç”Ÿæˆçº¯æ–‡æœ¬å†…å®¹ï¼Œæ¯”å¦‚é‚®ä»¶ã€æ—¥å¿—ã€é…ç½®æ–‡ä»¶ç­‰ã€‚è¿™äº›å†…å®¹ä¸æ¶‰åŠ HTML å®‰å…¨æ€§é—®é¢˜ã€‚&lt;/li>
&lt;li>&lt;strong>&lt;code>html/template&lt;/code>&lt;/strong>ï¼šä¸“é—¨ç”¨äºç”Ÿæˆ HTML å†…å®¹ï¼Œæä¾›äº†é˜²æ­¢ XSS æ”»å‡»çš„ä¿æŠ¤æœºåˆ¶ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å…±åŒç‚¹&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ¨¡æ¿è§£æ&lt;/strong>ï¼šä¸¤ä¸ªåŒ…éƒ½ä½¿ç”¨ç±»ä¼¼çš„è¯­æ³•æ¥è§£ææ¨¡æ¿ï¼Œæ”¯æŒæ¡ä»¶è¯­å¥ã€å¾ªç¯ã€è‡ªå®šä¹‰å‡½æ•°ç­‰ã€‚&lt;/li>
&lt;li>&lt;strong>æ•°æ®ç»‘å®š&lt;/strong>ï¼šéƒ½å¯ä»¥å°†ç»“æ„ä½“ã€æ˜ å°„ç­‰æ•°æ®ç»‘å®šåˆ°æ¨¡æ¿ä¸­ï¼Œä»è€Œç”ŸæˆåŠ¨æ€å†…å®¹ã€‚&lt;/li>
&lt;li>&lt;strong>æ¨¡æ¿æ‰§è¡Œ&lt;/strong>ï¼šéƒ½ä½¿ç”¨ &lt;code>Execute&lt;/code> å’Œ &lt;code>ExecuteTemplate&lt;/code> æ–¹æ³•æ¥æ‰§è¡Œæ¨¡æ¿ï¼Œå°†ç»“æœè¾“å‡ºåˆ° &lt;code>io.Writer&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ä¸åŒç‚¹&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä¸»è¦åŒºåˆ«ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨æ¨¡æ¿ä¸­æ’å…¥ç”¨æˆ·æä¾›çš„æ•°æ®æ—¶ï¼Œ&lt;code>html/template&lt;/code> ä¼šè‡ªåŠ¨å¯¹è¿™äº›æ•°æ®è¿›è¡Œ &lt;strong>HTML è½¬ä¹‰&lt;/strong>ï¼Œç¡®ä¿ç”Ÿæˆçš„ HTML æ˜¯å®‰å…¨çš„ï¼Œèƒ½å¤Ÿé˜²æ­¢&lt;strong>è·¨ç«™è„šæœ¬æ”»å‡»&lt;/strong> (XSS)ã€‚è€Œ&lt;code>text/template&lt;/code>åŒ…ä¸ä¼šã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å†…ç½®çš„æ¨¡æ¿å‡½æ•°åŒåï¼Œä½†åŠŸèƒ½å¯èƒ½ä¸ä¸€æ ·ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;blockquote>
&lt;p>è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ï¼šå¤§æ¦‚æ„æ€æ˜¯è„šæœ¬ä¸æ˜¯è‡ªå·±ç½‘ç«™æä¾›çš„ï¼Œæ˜¯åˆ«äººæ¶æ„æ”¾åˆ°ä½ ç½‘ç«™ä¸Šçš„ã€‚&lt;/p>
&lt;p>å½“ç”¨æˆ·è®¿é—®ä½ çš„ç½‘ç«™æ—¶ï¼Œæ¶æ„è„šæœ¬å°±ä¼šè¿è¡Œã€‚&lt;/p>
&lt;p>æ¶æ„è„šæœ¬å¯èƒ½åšçš„äº‹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>çªƒå– Cookie å’Œä¼šè¯ä¿¡æ¯&lt;/strong>ï¼š æ”»å‡»è€…å¯ä»¥é€šè¿‡æ¶æ„è„šæœ¬çªƒå–ç”¨æˆ·çš„ Cookie å’Œä¼šè¯ä¿¡æ¯ï¼Œä»è€Œå†’å……ç”¨æˆ·è¿›è¡Œæ“ä½œã€‚&lt;/li>
&lt;li>&lt;strong>åŠ«æŒç”¨æˆ·ä¼šè¯&lt;/strong>ï¼š æ”»å‡»è€…å¯ä»¥åˆ©ç”¨çªƒå–çš„ä¼šè¯ä¿¡æ¯ï¼ŒåŠ«æŒç”¨æˆ·çš„ä¼šè¯ï¼Œè¿›è¡Œæ¶æ„æ“ä½œã€‚&lt;/li>
&lt;li>&lt;strong>ä¼ªé€ è¯·æ±‚&lt;/strong>ï¼š æ¶æ„è„šæœ¬å¯ä»¥åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å‘èµ·ä¼ªé€ è¯·æ±‚ï¼Œæ‰§è¡Œä¸€äº›ç”¨æˆ·æœªæˆæƒçš„æ“ä½œã€‚&lt;/li>
&lt;li>&lt;strong>ä¼ æ’­è •è™«&lt;/strong>ï¼š æ¶æ„è„šæœ¬å¯ä»¥é€šè¿‡ XSS æ¼æ´ä¼ æ’­è •è™«ï¼Œè‡ªåŠ¨æ„ŸæŸ“è®¿é—®å—å®³é¡µé¢çš„ç”¨æˆ·ã€‚&lt;/li>
&lt;li>&lt;strong>è™šå‡å†…å®¹&lt;/strong>ï¼š æ¶æ„è„šæœ¬å¯ä»¥ä¿®æ”¹é¡µé¢å†…å®¹ï¼Œæ˜¾ç¤ºè™šå‡ä¿¡æ¯æ¬ºéª—ç”¨æˆ·ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>é˜²å¾¡XSSæ”»å‡»&lt;/strong>ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>è¾“å‡ºç¼–ç &lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åœ¨å°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¾“å‡ºåˆ° HTML å†…å®¹æ—¶ï¼Œè¿›è¡Œ HTML è½¬ä¹‰ï¼Œé˜²æ­¢æ¶æ„è„šæœ¬æ³¨å…¥ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>html/template&lt;/code>åŒ…å°±ä¼šè‡ªåŠ¨è½¬ä¹‰HTMLå†…å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>åœ¨å±æ€§ä¸­è¾“å‡ºæ•°æ®æ—¶ï¼Œå¯¹æ•°æ®è¿›è¡Œå±æ€§è½¬ä¹‰ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è¾“å…¥éªŒè¯&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œä¸¥æ ¼éªŒè¯å’Œè¿‡æ»¤ï¼Œåªå…è®¸ç¬¦åˆé¢„æœŸæ ¼å¼çš„æ•°æ®é€šè¿‡ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨å®‰å…¨çš„ JavaScript&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>é¿å…ç›´æ¥ä½¿ç”¨ &lt;code>innerHTML&lt;/code>ï¼Œæ”¹ç”¨ &lt;code>textContent&lt;/code> æˆ–å…¶ä»–å®‰å…¨çš„ DOM æ“ä½œæ–¹æ³•ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å†…å®¹å®‰å…¨ç­–ç•¥ (Content Security Policy, CSP)&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é…ç½® CSP å¤´ï¼Œé€šè¿‡ç™½åå•æœºåˆ¶é™åˆ¶å…è®¸æ‰§è¡Œçš„è„šæœ¬æ¥æºï¼Œå‡å°‘ XSS æ”»å‡»çš„é£é™©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">Content-Security-Policy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">script-src &amp;#39;self&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="templateä½¿ç”¨">
&lt;a href="#template%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
templateä½¿ç”¨
&lt;/h2>&lt;p>æå‰ä»‹ç»æ¨¡æ¿è¯­æ³•ä¸­çš„&lt;strong>å®šä¹‰æ¨¡æ¿&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ¨¡æ¿å°±æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²æˆ–ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“ä¸ºä¸€ä¸²å­—ç¬¦ä¸²æ—¶ï¼Œå¯èƒ½æ˜¯ä¸»æ¨¡æ¿ï¼Œä¹Ÿå¯èƒ½æ˜¯å­æ¨¡æ¿ã€‚&lt;/p>
&lt;ul>
&lt;li>æ²¡æœ‰å®šä¹‰å­æ¨¡æ¿æ—¶ï¼Œæ˜¯ä¸»æ¨¡æ¿ã€‚åä¹‹å°±æ˜¯å­æ¨¡æ¿ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å½“ä¸ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œ&lt;strong>ç›¸å¯¹æ–‡ä»¶&lt;/strong>ï¼Œæ–‡ä»¶åå°±æ˜¯ä¸»æ¨¡æ¿ã€‚&lt;/p>
&lt;ul>
&lt;li>é€šå¸¸ä¼šå°†&lt;code>ç›®å½•/æ–‡ä»¶å&lt;/code>è®¾ä¸ºè¯¥æ–‡ä»¶çš„å­æ¨¡æ¿ï¼Œä»¥è¡¨ç¤ºä¸»æ¨¡æ¿ã€‚&lt;strong>é˜²æ­¢ä¸åŒç›®å½•å‡ºç°åŒåæ–‡ä»¶&lt;/strong>ã€‚æ­¤æ—¶æ¸²æŸ“æ•´ä¸ªæ–‡ä»¶ï¼Œå°±éœ€è¦æŒ‡å®šå­æ¨¡æ¿åã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å®šä¹‰å­æ¨¡æ¿ï¼šç”¨defineå†…ç½®æ¨¡æ¿å‡½æ•°ï¼Œåé¢æ›´å­æ¨¡æ¿åï¼Œæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œç”¨åŒå¼•å·æ‹¬èµ·æ¥ã€‚ç»“æŸç”¨endå‡½æ•°æ ‡è¯†ã€‚ä¸­é—´å°±æ˜¯å­æ¨¡æ¿çš„å†…å®¹ã€‚å¦‚ï¼š&lt;/p>
&lt;p>&lt;code>templates/default/index.tmpl&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="o">{{&lt;/span> define &lt;span class="s2">&amp;#34;default/index.tmpl&amp;#34;&lt;/span> &lt;span class="o">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hello, &lt;span class="o">{{&lt;/span> .Name &lt;span class="o">}}&lt;/span>! Your message is: &lt;span class="o">{{&lt;/span> .Message &lt;span class="o">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{{&lt;/span> end &lt;span class="o">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­¤æ—¶æ¸²æŸ“è¿™ä¸ªæ–‡ä»¶ï¼Œå°±éœ€è¦ç”¨æŒ‡å®šæ¨¡æ¿åçš„æ–¹æ³•ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>æ›´å¤šå†…å®¹&lt;a class="link" href="#define" >å‚è€ƒ&lt;/a>ã€‚&lt;/p>
&lt;h3 id="æ¸²æŸ“templateå¯¹è±¡">
&lt;a href="#%e6%b8%b2%e6%9f%93template%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
æ¸²æŸ“Templateå¯¹è±¡
&lt;/h3>&lt;p>æ¸²æŸ“Templateå¯¹è±¡å°±æ˜¯æ¸²æŸ“æ¨¡æ¿ï¼Œç”¨åˆ°çš„æ–¹æ³•æ˜¯&lt;code>func (t *Template) Execute(wr io.Writer, data any) error&lt;/code>æˆ–&lt;code>func (t *Template) ExecuteTemplate(wr io.Writer, name string, data any) error&lt;/code>ã€‚&lt;/p>
&lt;p>äºŒè€…çš„åŒºåˆ«æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>Execute&lt;/code>æ–¹æ³•ç”¨äºæ¸²æŸ“&lt;strong>ä¸»æ¨¡æ¿&lt;/strong>ã€‚&lt;/p>
&lt;ul>
&lt;li>åªæœ‰ä¸€ä¸ªæ¨¡æ¿ï¼Œè¿™ä¸ªæ¨¡æ¿å°±æ˜¯ä¸»æ¨¡æ¿ã€‚&lt;/li>
&lt;li>æœ‰å¤šä¸ªæ¨¡æ¿æ—¶ï¼Œå®šä¹‰æˆ–è§£ææ¨¡æ¿æ—¶æœ€å…ˆåˆ›å»ºçš„é‚£ä¸ªæ¨¡æ¿ï¼Œæˆ–æ˜¯&lt;strong>æ‰§è¡Œæ—¶ä½œä¸ºå…¥å£ç‚¹çš„æ¨¡æ¿&lt;/strong>ï¼ˆ&lt;strong>æ²¡æœ‰æŒ‡å®šæ¨¡æ¿åçš„éƒ½ä¼šå…ˆæ¸²æŸ“&lt;/strong>ï¼‰ï¼Œ&lt;strong>æœ€å…ˆæ¸²æŸ“çš„æ¨¡æ¿å°±æ˜¯ä¸»æ¨¡æ¿&lt;/strong>ã€‚&lt;/li>
&lt;li>&lt;code>ExecuteTemplate&lt;/code>æ–¹æ³•ç”¨äºæ¸²æŸ“æŒ‡å®šæ¨¡æ¿åçš„æ¨¡æ¿ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ€»ç»“ï¼š&lt;/p>
&lt;ul>
&lt;li>åªæœ‰ä¸€ä¸ªæ¨¡æ¿ç”¨&lt;code>Execute&lt;/code>æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨&lt;code>ExecuteTemplate&lt;/code>æ–¹æ³•ï¼Œå½“éœ€è¦æŒ‡å®šæ¨¡æ¿åã€‚&lt;/li>
&lt;li>æœ‰å¤šä¸ªæ¨¡æ¿ç”¨&lt;code>ExecuteTemplate&lt;/code>æ–¹æ³•ï¼Œéœ€è¦æŒ‡å®šæ¨¡æ¿åã€‚å¦‚æœæ­¤æ—¶ç”¨&lt;code>Execute&lt;/code>æ–¹æ³•&lt;strong>å°†åªæ¸²æŸ“ä¸»æ¨¡æ¿&lt;/strong>ã€‚&lt;/li>
&lt;li>ç”¨&lt;code>func (t *Template) DefinedTemplates() string&lt;/code>æ–¹æ³•å¯ä»¥æŸ¥çœ‹å®šä¹‰çš„æ‰€ä»¥æ¨¡æ¿ã€‚è¿”å›çš„å­—ç¬¦ä¸²æ ¼å¼ä¸º&lt;code>; defined templates are:...&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="åˆ›å»ºtemplateå¯¹è±¡">
&lt;a href="#%e5%88%9b%e5%bb%batemplate%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
åˆ›å»ºTemplateå¯¹è±¡
&lt;/h3>&lt;p>åˆ›å»º&lt;code>Template&lt;/code>å¯¹è±¡çš„æ–¹æ³•ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š&lt;/p>
&lt;p>&lt;strong>è§£æå¹¶åˆ›å»ºTemplateå¯¹è±¡&lt;/strong>ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>&lt;code>template.ParseFiles&lt;/code>&lt;/strong>ï¼š ä»æ–‡ä»¶ä¸­è§£ææ¨¡æ¿å¹¶åˆ›å»ºTemplateå¯¹è±¡ï¼Œå¯ä»¥ä¸€æ¬¡è§£æä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseFiles&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;templates/file1.tmpl&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;templates/file2.tmpl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// handle error
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>template.ParseGlob&lt;/code>&lt;/strong>ï¼š ä½¿ç”¨é€šé…ç¬¦æ¨¡å¼è§£æä¸€ç»„æ¨¡æ¿æ–‡ä»¶å¹¶åˆ›å»ºTemplateå¯¹è±¡ã€‚ï¼ˆ&lt;strong>å¸¸ç”¨&lt;/strong>ï¼‰&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ‰€æœ‰æ¨¡æ¿éƒ½æ”¾åœ¨templatesç›®å½•ä¸‹ï¼ˆæ²¡æœ‰åˆ†ç±»ä¿å­˜ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseGlob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;templates/*.tmpl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// handle error
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ‰€æœ‰æ¨¡æ¿éƒ½æ”¾åœ¨templatesç›®å½•ä¸‹å¹¶&lt;strong>åˆ†ç±»ä¿å­˜&lt;/strong>ï¼š&lt;/p>
&lt;p>éœ€è¦å¤šåŒ¹é…ä¸€çº§åˆ†ç±»ç›®å½•ï¼Œç›®å½•ç”¨&lt;code>/**/&lt;/code>è¡¨ç¤ºè¯¥çº§ç›®å½•ï¼ˆåªèƒ½åŒ¹é…ä¸€çº§ï¼‰ã€‚ä¸¤çº§ç”¨&lt;code>/**/**&lt;/code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseGlob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;templates/**/*.tmpl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// handle error
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†åŒ¹é…templatesç›®å½•ä¸‹çš„æ‰€æœ‰ä¸€çº§ç›®å½•ä¸‹çš„æ‰€æœ‰&lt;code>*.tmpl&lt;/code>æ–‡ä»¶ã€‚&lt;/p>
&lt;p>åˆ†ç›®å½•ä¿å­˜ï¼Œä¸ºé˜²æ­¢ä¸åŒç›®å½•å‡ºç°åŒæ–‡ä»¶åï¼Œé€ æˆæ¨¡æ¿ä¸¢å¤±ï¼Œé€šå¸¸ä¼šå°†&lt;code>ç›®å½•/æ–‡ä»¶å&lt;/code>è®¾ä¸ºè¯¥æ–‡ä»¶çš„å­æ¨¡æ¿ï¼Œä»¥è¡¨ç¤ºä¸»æ¨¡æ¿ã€‚&lt;strong>é˜²æ­¢ä¸åŒç›®å½•å‡ºç°åŒåæ–‡ä»¶&lt;/strong>ã€‚&lt;strong>æ­¤æ—¶æ¸²æŸ“æ•´ä¸ªæ–‡ä»¶ï¼Œå°±éœ€è¦æŒ‡å®šå­æ¨¡æ¿åã€‚&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>åˆ›å»ºç©ºçš„å‘½åæ¨¡æ¿å¯¹è±¡&lt;/strong>ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>&lt;code>template.New&lt;/code>&lt;/strong>ï¼š åˆ›å»ºä¸€ä¸ªå‘½åæ¨¡æ¿çš„åŸºç¡€æ¨¡æ¿å¯¹è±¡ï¼Œä¸ä¼šè§£æä»»ä½•æ¨¡æ¿å†…å®¹ã€‚
&lt;ul>
&lt;li>åˆ›å»ºå‘½åæ¨¡æ¿å¯¹è±¡ä¹‹åï¼Œè¿˜éœ€è¦è§£ææ¨¡æ¿æ‰èƒ½ä½¿ç”¨ã€‚&lt;/li>
&lt;li>é€šå¸¸ä¸&lt;code>Parse&lt;/code>ï¼ˆ&lt;strong>å¸¸ç”¨&lt;/strong>ï¼‰ã€&lt;code>ParseFiles&lt;/code>ã€&lt;code>ParseGlob&lt;/code>ç­‰æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚&lt;strong>ä½¿ç”¨æ–¹æ³•ä¸åŒåå‡½æ•°ä¸€ç›´&lt;/strong>ã€‚åªè¦æ˜¯Templateå¯¹è±¡éƒ½èƒ½ä½¿ç”¨è¿™å‡ ä¸ªæ–¹æ³•ã€‚&lt;/li>
&lt;li>&lt;strong>åŒºåˆ«æ˜¯&lt;/strong>ï¼š
&lt;ul>
&lt;li>ç”¨&lt;code>New&lt;/code>æ–¹æ³•åˆ›å»ºç©ºçš„å‘½åæ¨¡æ¿åï¼ˆè¿™æ¨¡æ¿å°±æ˜¯ä¸»æ¨¡æ¿ï¼‰ï¼Œåœ¨ç”¨&lt;code>Parse&lt;/code>ç­‰æ–¹æ³•è§£ææ¨¡æ¿ï¼š
&lt;ul>
&lt;li>å¦‚æœè§£æçš„æ¨¡æ¿æ²¡æœ‰å‘½åä¸”éç©ºï¼Œåˆ™ä¼š&lt;strong>è¦†ç›–ä¸»æ¨¡æ¿&lt;/strong>çš„å†…å®¹ã€‚&lt;/li>
&lt;li>å¦‚æœè§£æçš„æ¨¡æ¿æœ‰å‘½åï¼Œåˆ™ä¼šä¸ºä¸»æ¨¡æ¿æ·»åŠ å­æ¨¡æ¿ã€‚&lt;/li>
&lt;li>ä»¥ä¸Šæƒ…å†µä¸ºå­—ç¬¦ä¸²æ¨¡æ¿ã€‚&lt;/li>
&lt;li>è§£ææ–‡ä»¶éƒ½æ˜¯ä¸ºä¸»æ¨¡æ¿&lt;strong>æ·»åŠ å­æ¨¡æ¿&lt;/strong>ã€‚å› ä¸ºæ–‡ä»¶åé»˜è®¤ä¸ºä¸€ä¸ªæ¨¡æ¿åã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>&lt;code>template.Must&lt;/code>&lt;/strong>ï¼š æ˜¯ä¸€ä¸ªå¸®åŠ©å‡½æ•°ï¼Œç”¨äºåŒ…è£…è§£æå‡½æ•°ï¼ˆå¦‚&lt;code>Parse&lt;/code>ã€&lt;code>ParseFiles&lt;/code>ã€&lt;code>ParseGlob&lt;/code>ç­‰ï¼‰çš„è¿”å›å€¼ã€‚å¦‚æœè§£æè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå®ƒä¼šå¯¼è‡´ç¨‹åºåœ¨è¿è¡Œæ—¶å´©æºƒã€‚&lt;strong>å¸¸ç”¨äºç®€åŒ–åˆ›å»ºæ¨¡æ¿å¯¹è±¡ä»£ç &lt;/strong>ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡æ¿å¹¶è§£æå†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello, {{.Name}}!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç›´æ¥è§£ææ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä½¿ç”¨å¸®åŠ©å‡½æ•°ç®€åŒ–åˆ›å»ºæ¨¡æ¿å¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello, {{.Name}}!&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä»å¤šä¸ªæ–‡ä»¶è§£ææ¨¡æ¿
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseFiles&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example1.tmpl&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;example2.tmpl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä½¿ç”¨é€šé…ç¬¦ä»æ–‡ä»¶å¤¹è§£ææ¨¡æ¿
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseGlob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;templates/*.tmpl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç®€åŒ–åˆ›å»ºæ¨¡æ¿å¯¹è±¡ï¼Œè§£æå¤±è´¥ä¼šè‡ªåŠ¨æŠ›å‡ºpanic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseGlob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;templates/**/*.tmpl&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ‰§è¡Œæ¨¡æ¿
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;Name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;World&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="æ¨¡æ¿è¯­æ³•ä»‹ç»">
&lt;a href="#%e6%a8%a1%e6%9d%bf%e8%af%ad%e6%b3%95%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
æ¨¡æ¿è¯­æ³•ä»‹ç»
&lt;/h2>&lt;h3 id="åŸºç¡€è¯­æ³•">
&lt;a href="#%e5%9f%ba%e7%a1%80%e8%af%ad%e6%b3%95" class="header-anchor">#&lt;/a>
åŸºç¡€è¯­æ³•
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>æ¨¡æ¿è¯­æ³•éƒ½åŒ…å«åœ¨&lt;code>{{&lt;/code>å’Œ&lt;code>}}&lt;/code>ä¸­é—´ã€‚&lt;code>{{.}}&lt;/code>ï¼šç‚¹è¡¨ç¤ºå½“å‰å¯¹è±¡ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ•°æ®æ˜¯ç»“æ„ä½“å¯¹è±¡æ—¶ï¼Œç›´æ¥ç”¨&lt;code>.å±æ€§å&lt;/code>è®¿é—®å±æ€§ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ•°æ®æ˜¯æ˜ å°„æ—¶ï¼Œç›´æ¥ç”¨&lt;code>.é”®å&lt;/code>è®¿é—®å€¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é”®åæˆ–å±æ€§åè¦ä¸€ä¸€å¯¹åº”ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä»¥ä¸Šä¸¤ä¸ªå¯ä»¥äº’ç›¸åµŒå¥—è®¿é—®ã€‚ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//&amp;#34;html/template&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Age&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Other&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nx">any&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">å§“åï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.user.Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">å¹´é¾„ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.user.Age&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">QQ: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.user.Other.QQ&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">å­¦æ ¡ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.user.Other.school&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;ç”¨æˆ·ä¿¡æ¯&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jack&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Age&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Other&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;QQ&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9527&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;school&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;é‡é¸¡å¤§å­¦&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Excuting templete: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ç”¨æˆ·ä¿¡æ¯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å§“åï¼šJack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å¹´é¾„ï¼š18
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">QQ: &lt;span class="m">9527&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å­¦æ ¡ï¼šé‡é¸¡å¤§å­¦
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ•°æ®æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œå¦‚intã€boolã€stringã€‚ç›´æ¥ç”¨&lt;code>.&lt;/code>è¡¨ç¤ºå€¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ•°æ®æ˜¯åˆ‡ç‰‡ã€æ•°ç»„ã€æ˜ å°„ç­‰é›†åˆç±»å‹æ—¶ï¼Œéœ€è¦éå†å¯¹è±¡ã€‚ï¼ˆç¨åä»‹ç»ï¼‰&lt;/p>
&lt;ul>
&lt;li>æ³¨æ„æ˜ å°„æœ‰ä¸¤ç§æ–¹æ³•è®¿é—®å€¼ï¼š&lt;code>.é”®å&lt;/code>æˆ–è€…&lt;code>å¾ªç¯éå†&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ ¼å¼:&lt;/strong> &lt;code>{{ æ¨¡æ¿è¡¨è¾¾å¼ }}&lt;/code>ã€‚æ¨¡æ¿è¡¨è¾¾å¼ä¸æ‹¬å·ä¹‹é—´å»ºè®®ç”¨ç©ºæ ¼éš”å¼€ã€‚å¦‚æœæœ‰ç©ºæ ¼æ¸²æŸ“æ—¶ä¼šè‡ªåŠ¨ç§»é™¤ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ¨¡æ¿è¡¨è¾¾å¼å¯ä»¥æ˜¯&lt;code>.&lt;/code>ã€å‡½æ•°ã€å˜é‡ç­‰ç»„æˆã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¡¨ç¤ºå¼å¦‚æœæ²¡æœ‰å€¼ï¼Œæ¸²æŸ“åä¼šç”¨&lt;code>&amp;lt;no value&amp;gt;&lt;/code>è¡¨ç¤ºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ä¸¤ä¸ªæ‹¬å·å†…æ·»åŠ &lt;code>-&lt;/code>ï¼ˆ&lt;strong>ä¸æ‹¬å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¸è¡¨è¾¾å¼ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼&lt;/strong>ï¼‰è¡¨ç¤º&lt;strong>åˆ é™¤ç©ºç™½&lt;/strong>ã€‚&lt;/p>
&lt;ul>
&lt;li>åˆ é™¤çš„æ˜¯æ¸²æŸ“ç»“æœä¸å‘¨å›´å­—ç¬¦ä¹‹é—´çš„ç©ºç™½ã€‚&lt;/li>
&lt;li>&lt;code>-&lt;/code>åœ¨é‚£è¾¹å°±è¡¨ç¤ºåˆ é™¤é‚£è¾¹ä¸å­—ç¬¦ä¹‹é—´çš„ç©ºç™½ã€‚éƒ½æœ‰è¡¨ç¤ºå·¦å³ä¸¤è¾¹å­—ç¬¦éƒ½åˆ é™¤ã€‚&lt;/li>
&lt;li>ç©ºç™½æŒ‡ç©ºæ ¼ã€æ¢è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="s">&amp;#34;{{ 23 -}} &amp;lt; {{ 45 }}&amp;#34;&lt;/span> &lt;span class="c1">// è¾“å‡º23&amp;lt; 45
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="s">&amp;#34;{{ 23 -}} &amp;lt; {{- 45 }}&amp;#34;&lt;/span> &lt;span class="c1">// è¾“å‡º23&amp;lt;45
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ³¨é‡Šæ ¼å¼:&lt;/strong> &lt;code>{{/* æ³¨é‡Šå†…å®¹ */}}&lt;/code>ã€‚&lt;strong>æ³¨æ„&lt;code>/&lt;/code>ä¸æ‹¬å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼&lt;/strong>ã€‚æ‰§è¡Œæ—¶ä¼šå¿½ç•¥ã€‚å¯ä»¥å¤šè¡Œã€‚æ³¨é‡Šä¸èƒ½åµŒå¥—ã€‚*ä¸æ³¨é‡Šå†…å®¹å¯ä»¥æ²¡æœ‰ç©ºæ ¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="#template%e4%bd%bf%e7%94%a8" >&lt;strong>å®šä¹‰æ¨¡æ¿&lt;/strong>&lt;/a>å‰é¢å·²ç»ä»‹ç»äº†ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è¡¥å……&lt;/strong>ï¼šå®šä¹‰å­æ¨¡æ¿è¯­å¥å¦‚æœç‹¬å ä¸€è¡Œï¼Œè™½ç„¶&lt;strong>æ¸²æŸ“åä¸ºç©º&lt;/strong>ï¼Œä½†æ˜¯ä¼š&lt;strong>ç‹¬å ä¸€ç©ºè¡Œ&lt;/strong>ï¼Œæ³¨é‡Šä¹Ÿä¼šï¼Œåé¢çš„å®šä¹‰å˜é‡ä¹Ÿæ˜¯ã€‚&lt;/li>
&lt;li>ä¸ºä¸å½±å“æ¸²æŸ“ä¹‹åçš„ç»“æ„ï¼Œ&lt;strong>å¯ä»¥å°†ä»–ä»¬ä¸å†…å®¹å†™åœ¨ä¸€è¡Œ&lt;/strong>ã€‚è¿™æ ·å³ä½¿æ³¨é‡Šæ¢è¡Œä¹Ÿ&lt;strong>ä¸ä¼šå ä¸€ç©ºè¡Œ&lt;/strong>ã€‚æ¨¡æ¿è¯­æ³•ä¸å…¶ä»–å†…å®¹ä¹‹é—´ä¹Ÿä¸è¦æœ‰ç©ºæ ¼ï¼Œå¦åˆ™æ¸²æŸ“ä¹‹åä¼šä¿ç•™ç©ºæ ¼ã€‚&lt;/li>
&lt;li>&lt;strong>åæ¥&lt;/strong>æ‰çŸ¥é“&lt;strong>åˆ é™¤ç©ºæ ¼çš„ä½œç”¨&lt;/strong>ã€‚&lt;strong>æœ€ä¼˜è§£å†³æ–¹æ¡ˆ&lt;/strong>ï¼šä½¿ç”¨ç”¨&lt;code>-&lt;/code>å¯ä»¥&lt;strong>åˆ é™¤ç©ºæ ¼ã€æ¢è¡Œ&lt;/strong>ã€‚&lt;strong>èƒ½è¾¾åˆ°ç¾è§‚è€Œä¸å½±å“æ¸²æŸ“ç»“æœ&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ¨¡æ¿å˜é‡&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åœ¨æ¨¡ç‰ˆä¸­å¯ä»¥è‡ªå®šä¹‰å˜é‡, ç±»ä¼¼golangä½¿ç”¨:=ç¬¦å·å®šä¹‰å˜é‡ï¼Œç”¨æ¥ä¿å­˜ä¼ å…¥æ¨¡æ¿çš„æ•°æ®æˆ–å…¶ä»–è¯­å¥ç”Ÿæˆçš„ç»“æœã€‚è¯­æ³•ä¸ºï¼š&lt;code>{{ $å˜é‡å := æ•°æ® }}&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸ºå­˜åœ¨çš„å˜é‡èµ‹å€¼&lt;code>{{ $å˜é‡å = æ•°æ® }}&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¼•ç”¨å˜é‡&lt;code>{{ $å˜é‡å }}&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ•°æ®å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼ˆç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼‰ã€æ•´å‹ã€è¡¨è¾¾å¼çš„å€¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¼•ç”¨å˜é‡å¯ä»¥ä¸è¡¨è¾¾å¼ç»„åˆä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸Šé¢ç¤ºä¾‹å¯ä¿®æ”¹ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//&amp;#34;text/template&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Age&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Other&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nx">any&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">define&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;aaa&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s"> &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$other&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.user.Other&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">å§“åï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.user.Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="cm">{{/* è¿™æ˜¯æ³¨é‡Š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">æ¢è¡Œäº† */}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">å¹´é¾„ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.user.Age&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">QQ: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$other&lt;/span>&lt;span class="na">.QQ&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">å­¦æ ¡ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$other&lt;/span>&lt;span class="na">.school&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ExecuteTemplate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;aaa&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;ç”¨æˆ·ä¿¡æ¯&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jack&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Age&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Other&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;QQ&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9527&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;school&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;é‡é¸¡å¤§å­¦&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Excuting templete: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ç”¨æˆ·ä¿¡æ¯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å§“åï¼šJack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å¹´é¾„ï¼š18
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">QQ: &lt;span class="m">9527&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å­¦æ ¡ï¼šé‡é¸¡å¤§å­¦
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å¯¹æ¯”ä¸€ä¸‹æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ï¼ˆå®šä¹‰å­æ¨¡å—çš„å¤´éƒ¨ç‹¬å ä¸€ç©ºè¡Œï¼Œè§£å†³åŠæ³•ï¼šä¸titleåŒè¡Œä¸”åœ¨å‰é¢ï¼‰&lt;/p>
&lt;p>&lt;strong>å¯ä»¥ä¸ç”¨ä¿®æ”¹ç»“æ„ï¼Œä½¿ç”¨&lt;code>-&lt;/code>åˆ é™¤ç©ºç™½&lt;/strong>ã€‚&lt;strong>æ¨èä½¿ç”¨&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="æµç¨‹æ§åˆ¶è¯­å¥">
&lt;a href="#%e6%b5%81%e7%a8%8b%e6%8e%a7%e5%88%b6%e8%af%ad%e5%8f%a5" class="header-anchor">#&lt;/a>
æµç¨‹æ§åˆ¶è¯­å¥
&lt;/h3>&lt;p>ä»‹ç»æµç¨‹æ§åˆ¶è¯­å¥å‰ï¼Œå…ˆä»‹ç»&lt;strong>æ¯”è¾ƒå‡½æ•°&lt;/strong>ï¼ˆä¹Ÿå«é€»è¾‘è¿ç®—å‡½æ•°ï¼‰ã€‚&lt;strong>å°†é€»è¾‘è¿ç®—å°è£…æˆäº†å‡½æ•°å½¢å¼&lt;/strong>ã€‚&lt;/p>
&lt;p>å¸¸ç”¨çš„æ¯”è¾ƒå‡½æ•°å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>eqï¼šç­‰äº&lt;/li>
&lt;li>neï¼šä¸ç­‰äº&lt;/li>
&lt;li>ltï¼šå°äº&lt;/li>
&lt;li>leï¼šå°äºç­‰äº&lt;/li>
&lt;li>gtï¼šå¤§äº&lt;/li>
&lt;li>geï¼šå¤§äºè°ƒç”¨&lt;/li>
&lt;/ul>
&lt;p>æ¯”è¾ƒå‡½æ•°åé¢è·Ÿä¸¤ä¸ªå¯æ¯”è¾ƒçš„å‚æ•°ï¼Œç”¨ç©ºæ ¼åˆ†éš”å¼€ã€‚è¿”å›trueæˆ–è€…falseï¼Œå¯¹åº”ç±»å‹çš„é›¶å€¼ä¸ºfalseï¼Œå…¶ä½™ä¸ºtrueã€‚å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="nx">lt&lt;/span> &lt;span class="mi">22&lt;/span> &lt;span class="mi">33&lt;/span> &lt;span class="p">}}&lt;/span> &lt;span class="c1">// è¾“å‡ºtrue
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{{&lt;/span> &lt;span class="nx">ge&lt;/span> &lt;span class="mi">22&lt;/span> &lt;span class="mi">33&lt;/span> &lt;span class="p">}}&lt;/span> &lt;span class="c1">// è¾“å‡ºfalse
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¯”è¾ƒå‡½æ•°å¯ä»¥ä¸æ¡ä»¶åˆ¤æ–­ï¼ˆifè¯­å¥ï¼‰ç»„åˆä½¿ç”¨ã€‚&lt;/p>
&lt;p>æ¨¡ç‰ˆè¯­æ³•çš„æµç¨‹æ§åˆ¶è¯­å¥ä¸»è¦æŒ‡if/range/withä¸‰ç§è¯­å¥ã€‚&lt;/p>
&lt;h4 id="æ¡ä»¶åˆ¤æ–­">
&lt;a href="#%e6%9d%a1%e4%bb%b6%e5%88%a4%e6%96%ad" class="header-anchor">#&lt;/a>
æ¡ä»¶åˆ¤æ–­
&lt;/h4>&lt;p>&lt;code>if&lt;/code>ï¼ˆ &lt;code>else&lt;/code>, &lt;code>else if&lt;/code>ï¼‰è¯­å¥ç”¨äºæ ¹æ®æ¡ä»¶æ¥&lt;strong>æ§åˆ¶æ¨¡æ¿çš„è¾“å‡º&lt;/strong>ã€‚å¯ä»¥ä½¿ç”¨&lt;code>else&lt;/code>å’Œ&lt;code>else if&lt;/code>æ¥å¤„ç†å…¶ä»–æƒ…å†µã€‚&lt;/p>
&lt;p>&lt;strong>æ ¼å¼&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{if condition}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- å½“conditionä¸ºtrueæ—¶è¾“å‡ºçš„å†…å®¹ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{else if otherCondition}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- å½“otherConditionä¸ºtrueæ—¶è¾“å‡ºçš„å†…å®¹ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{else}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- å½“conditionå’ŒotherConditionéƒ½ä¸ºfalseæ—¶è¾“å‡ºçš„å†…å®¹ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>if&lt;/code>è¯­å¥åé¢è·Ÿ&lt;code>end&lt;/code>è¡¨ç¤ºç»“æŸã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;bufio&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/cast&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">ErrExit&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;exit&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`ä½ çš„æˆç»©ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">lt&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">60&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">ä¸åŠæ ¼&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">eq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">60&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">åˆšå¥½åŠæ ¼&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">åŠæ ¼äº†&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ReadScore&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;è¯·è¾“å…¥ä½ çš„æˆç»©ï¼ˆqï¼šé€€å‡ºï¼‰ï¼š&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">bufio&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewReader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdin&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;fail to read string: %w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Contains&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToLower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="s">&amp;#34;q&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrExit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">score&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToIntE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">TrimSpace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;conversion to integer failed %w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">score&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">DisplayGrade&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Template&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;fail to execute template: %w&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">score&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">ReadScore&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ErrExit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Exit successful&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to read score: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">DisplayGrade&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">score&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to diaplay grade: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¯·è¾“å…¥ä½ çš„æˆç»©ï¼ˆqï¼šé€€å‡ºï¼‰ï¼š55
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä½ çš„æˆç»©ï¼šä¸åŠæ ¼
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¯·è¾“å…¥ä½ çš„æˆç»©ï¼ˆqï¼šé€€å‡ºï¼‰ï¼š60
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä½ çš„æˆç»©ï¼šåˆšå¥½åŠæ ¼
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¯·è¾“å…¥ä½ çš„æˆç»©ï¼ˆqï¼šé€€å‡ºï¼‰ï¼š60
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä½ çš„æˆç»©ï¼šåˆšå¥½åŠæ ¼
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¯·è¾“å…¥ä½ çš„æˆç»©ï¼ˆqï¼šé€€å‡ºï¼‰ï¼šq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/06/04 15:44:17 Exit successful
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å¾ªç¯">
&lt;a href="#%e5%be%aa%e7%8e%af" class="header-anchor">#&lt;/a>
å¾ªç¯
&lt;/h4>&lt;p>å¾ªç¯&lt;code>range&lt;/code>è¯­å¥ç”¨äºè¿­ä»£æ•°ç»„ã€åˆ‡ç‰‡ã€æ˜ å°„ç­‰é›†åˆç±»å‹çš„æ•°æ®ã€‚è·Ÿgoè¯­è¨€çš„&lt;code>for-range&lt;/code>å·®ä¸å¤šï¼Œç”šè‡³æ¯”goè¯­è¨€æ›´ç®€æ´ã€‚&lt;/p>
&lt;p>&lt;strong>æ ¼å¼&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="k">range&lt;/span> &lt;span class="nx">é›†åˆç±»å‹æ•°æ®&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{.}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éå†é›†åˆç±»å‹æ•°æ®ä¹‹åï¼Œå¯ä»¥ç”¨&lt;code>.&lt;/code>è®¿é—®æ¯ä¸€ä¸ª&lt;strong>é›†åˆå…ƒç´ çš„å€¼&lt;/strong>ã€‚&lt;/p>
&lt;p>&lt;strong>æ³¨æ„&lt;/strong>ï¼š&lt;code>range&lt;/code>èŒƒå›´å†…ï¼Œ&lt;code>.&lt;/code>çš„ä½œç”¨åŸŸä»…åœ¨&lt;code>range&lt;/code>èŒƒå›´å†…ï¼Œ&lt;strong>æ— æ³•è®¿é—®å¤–éƒ¨å¯¹è±¡&lt;/strong>ã€‚&lt;/p>
&lt;p>å¦‚æœéœ€è¦è®¿é—®ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå˜é‡æ¥æ”¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="k">range&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="nx">element&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">é›†åˆç±»å‹æ•°æ®&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Index&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{{&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">}},&lt;/span> &lt;span class="nx">Value&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{{&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="nx">element&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">}}&lt;/span> &lt;span class="c1">// çœ‹æƒ…å†µæ˜¯å¦ä½¿ç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">æ²¡æœ‰æ•°æ®å¯éå†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>range&lt;/code>è¯­å¥åé¢è·Ÿ&lt;code>end&lt;/code>è¡¨ç¤ºç»“æŸã€‚å®ƒä»¬ä¹‹é—´è¿˜å¯ä»¥åµŒå…¥&lt;code>else&lt;/code>è¯­å¥ï¼Œå½“é›†åˆç±»å‹æ•°æ®é•¿åº¦ä¸º0æ—¶å°†æ‰§è¡Œ&lt;code>else&lt;/code>è¯­å¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="k">range&lt;/span> &lt;span class="nx">é›†åˆç±»å‹æ•°æ®&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{.}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">}}&lt;/span> &lt;span class="c1">// çœ‹æƒ…å†µæ˜¯å¦ä½¿ç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">æ²¡æœ‰æ•°æ®å¯éå†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸&lt;code>if&lt;/code>è¯­å¥ç»„åˆä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="k">range&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">Items&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">IsActive&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Active&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{{.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">No&lt;/span> &lt;span class="nx">items&lt;/span> &lt;span class="nx">found&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹1ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{define &amp;#34;userList&amp;#34;}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{range .Users}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{if .Active}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active user: {{.Name}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{else}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Inactive user: {{.Name}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{end}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{else}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>No users found.&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{end}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹2ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`çˆ±å¥½ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">æ²¡æœ‰ä»»ä½•çˆ±å¥½&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;çœ‹ç”µå½±&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;è·‘æ­¥&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;æ‰“ç¯®çƒ&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;çœ‹å°è¯´&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assertExecErr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to execute template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertExecErr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;\n----------------------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertExecErr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;\n----------------------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl2&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`çˆ±å¥½2ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$index&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$value&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">Index: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">, Value: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$value&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">æ²¡æœ‰ä»»ä½•çˆ±å¥½&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example2&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertExecErr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;\n----------------------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertExecErr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">çˆ±å¥½ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">çœ‹ç”µå½±
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è·‘æ­¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æ‰“ç¯®çƒ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">çœ‹å°è¯´
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">çˆ±å¥½ï¼šæ²¡æœ‰ä»»ä½•çˆ±å¥½
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">çˆ±å¥½2ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Index: 0, Value: çœ‹ç”µå½±
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Index: 1, Value: è·‘æ­¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Index: 2, Value: æ‰“ç¯®çƒ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Index: 3, Value: çœ‹å°è¯´
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">çˆ±å¥½2ï¼šæ²¡æœ‰ä»»ä½•çˆ±å¥½
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å˜é‡å£°æ˜with-define-block">
&lt;a href="#%e5%8f%98%e9%87%8f%e5%a3%b0%e6%98%8ewith-define-block" class="header-anchor">#&lt;/a>
å˜é‡å£°æ˜ï¼ˆ&lt;code>with&lt;/code>, &lt;code>define&lt;/code>, &lt;code>block&lt;/code>ï¼‰
&lt;/h4>&lt;h5 id="with">
&lt;a href="#with" class="header-anchor">#&lt;/a>
with
&lt;/h5>&lt;p>&lt;code>with&lt;/code>è¯­å¥ç”¨äº&lt;strong>é‡å®šä¹‰æ¨¡æ¿çš„ä½œç”¨åŸŸ&lt;/strong>ã€‚å¸¸ç”¨äº&lt;strong>ç¼©çŸ­é•¿çš„å­—æ®µè®¿é—®è·¯å¾„&lt;/strong>ã€‚å°±æ˜¯å¯ä»¥&lt;strong>ç¼©çŸ­ç»“æ„ä½“å¯¹è±¡å±æ€§çš„è®¿é—®è·¯å¾„&lt;/strong>ã€‚ç®€å•ç†è§£ï¼šé‡å®šä¹‰&lt;code>.&lt;/code>çš„ä½œç”¨åŸŸï¼ˆ&lt;code>var . := .User&lt;/code>ï¼‰ï¼šå°†å½“å‰å¯¹è±¡çš„&lt;code>User&lt;/code>å±æ€§å¤åˆ¶ç»™&lt;code>.&lt;/code>ã€‚å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è®¿é—®Dataç»“æ„ä½“ä¸‹çš„userå±æ€§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{{.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Email&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{{.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Email&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ä½¿ç”¨with
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{{&lt;/span>&lt;span class="nx">with&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{{.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Email&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{{.&lt;/span>&lt;span class="nx">Email&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æ³¨æ„&lt;/strong>ï¼šrangeå’Œwithè¯­å¥éƒ½æ”¹å˜äº†ç‚¹ï¼ˆ.ï¼‰å¼•ç”¨çš„æ•°æ®ï¼Œé‚£ä¹ˆå¦‚æœæƒ³è¦åœ¨rangeå’Œwithè¯­å¥ä¸­å¼•ç”¨æ¨¡ç‰ˆå‚æ•°ï¼Œè¯·å…ˆå°†ï¼ˆç‚¹ï¼ˆ.ï¼‰èµ‹å€¼ç»™ä¸€ä¸ªè‡ªå®šä¹‰å˜é‡, ç„¶ååœ¨rangeå’Œwithä¸­é€šè¿‡è‡ªå®šä¹‰å˜é‡ï¼Œå¼•ç”¨æ¨¡ç‰ˆå‚æ•°ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Email&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Data&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">User&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`ç”¨æˆ·ä¿¡æ¯ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.User&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">å§“å: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">é‚®ç®±ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">Data&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Email&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;arlettebrook@proton.me&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to execute template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ç”¨æˆ·ä¿¡æ¯ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å§“å: arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">é‚®ç®±ï¼šarlettebrook@proton.me
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="define">
&lt;a href="#define" class="header-anchor">#&lt;/a>
define
&lt;/h5>&lt;p>&lt;code>define&lt;/code>è¯­å¥ç”¨äºå®šä¹‰ä¸€ä¸ªæ¨¡æ¿ï¼Œé€šå¸¸ç”¨äº&lt;strong>å¤ç”¨æ¨¡æ¿ç‰‡æ®µ&lt;/strong>ï¼Œå®ç°&lt;strong>æ¨¡æ¿åµŒå¥—&lt;/strong>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;templateName&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;!&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="nx">æ¨¡æ¿å†…å®¹&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨&lt;code>template&lt;/code>æ¥å¼•ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">template&lt;/span> &lt;span class="s">&amp;#34;templateName&amp;#34;&lt;/span> &lt;span class="p">.}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>templateå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯&lt;strong>æ¨¡æ¿åå­—&lt;/strong>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å½“å‰&lt;strong>æ¨¡æ¿å‚æ•°&lt;/strong>, åœ¨å­æ¨¡æ¿å†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡&lt;strong>ç‚¹( . )&lt;/strong>ï¼Œå¼•ç”¨æ¨¡æ¿å‚æ•°ã€‚&lt;/p>
&lt;p>å½“å­æ¨¡æ¿æ²¡æœ‰å‚æ•°æ—¶ï¼Œ&lt;code>.&lt;/code>æ˜¯å¯é€‰çš„ã€‚&lt;/p>
&lt;p>&lt;strong>æ³¨æ„&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>å¼•å…¥å­æ¨¡æ¿å¸¦å‚æ•°çš„æ—¶å€™åˆ«å¿˜è®°æœ€åçš„&lt;code>.&lt;/code>ã€‚&lt;strong>ç”¨äºä¼ é€’æ¨¡æ¿å‚æ•°&lt;/strong>ã€‚&lt;/li>
&lt;li>å®šä¹‰å­æ¨¡ç‰ˆä¸èƒ½åµŒå¥—ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Email&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Data&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">User&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">info&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">define&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;userinfo.tmpl&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.User&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">å§“å: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">é‚®ç®±ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Email&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`ç”¨æˆ·ä¿¡æ¯ï¼š&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="k">template&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;userinfo.tmpl&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">info&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to parse template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">Data&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Email&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;arlettebrook@proton.me&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to execute template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ç”¨æˆ·ä¿¡æ¯&lt;/span>&lt;span class="err">ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">å§“å&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">arlettebrook&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">é‚®ç®±&lt;/span>&lt;span class="err">ï¼š&lt;/span>&lt;span class="nx">arlettebrook&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">proton&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">me&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æ¨¡æ¿ç®¡ç†&lt;/strong>&lt;/p>
&lt;p>ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°†æ¨¡æ¿ä»£ç å®šä¹‰åœ¨ä¸€ä¸ªå˜é‡æˆ–è€…å¸¸é‡ä¸­ï¼Œè¿™ä¸ªåªæ˜¯ç”¨äºæ¼”ç¤ºï¼Œå®é™…é¡¹ç›®ä¸­æ¨¡æ¿ä»£ç é€šå¸¸éå¸¸å¤šï¼Œå»ºè®®å¤§å®¶æŒ‰å¦‚ä¸‹æ–¹å¼ç»„ç»‡æ¨¡æ¿ä»£ç ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸€ä¸ªæ¨¡æ¿çš„æ¨¡æ¿ä»£ç ï¼Œä¿å­˜åœ¨ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ä¸­ï¼Œæ¨¡æ¿æ–‡ä»¶ååç¼€ä¸ºtplæˆ–tmplæˆ–è€…å…¶ä»–ï¼Œå¦‚htmlã€‚ç¼–ç æ–¹å¼æ˜¯utf-8ã€‚&lt;/li>
&lt;li>æ‰€æœ‰çš„æ¨¡æ¿ä»£ç éƒ½å®šä¹‰åœ¨å­æ¨¡æ¿ä¸­ï¼Œæ–¹ä¾¿æ ¹æ®æ¨¡æ¿åå­—è¿›è¡Œæ¸²æŸ“ã€‚&lt;/li>
&lt;li>æ‰€ä»¥æ¨¡æ¿éƒ½å»ºè®®æ”¾åœ¨templatesç›®å½•ä¸‹ã€‚ä½¿ç”¨&lt;code>ParseGlob&lt;/code>åŒ¹é…æ¨¡å¼æ‰¹é‡è§£ææ¨¡æ¿å¹¶åˆ›å»ºæ¨¡æ¿å¯¹è±¡ã€‚&lt;/li>
&lt;li>å¯ä»¥å°†å…¬å…±çš„å­æ¨¡æ¿å®šä¹‰åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­&lt;code>common.tpl&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;p>æ¨¡æ¿ç›®å½•templatesï¼Œ ä¸‹é¢åˆ†åˆ«æŒ‰&lt;strong>åŠŸèƒ½æ¨¡å—&lt;/strong>åˆ›å»ºä¸åŒçš„æ¨¡æ¿æ–‡ä»¶ã€‚&lt;/p>
&lt;p>åˆ›å»ºå…¬å…±æ¨¡æ¿æ–‡ä»¶: templates/common.tplã€‚ ä¸»è¦ç”¨äºä¿å­˜ä¸€äº›å…¬å…±çš„æ¨¡æ¿å®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;common1&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">è¿™é‡Œæ˜¯å…±äº«æ¨¡å—1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;common2&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">è¿™é‡Œæ˜¯å…±äº«æ¨¡å—2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºmod1æ¨¡å—çš„æ¨¡æ¿æ–‡ä»¶: templates/mod1.tplï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;mod1&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">è¿™é‡Œæ˜¯æ¨¡å—1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nx">template&lt;/span> &lt;span class="s">&amp;#34;common1&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºmod2æ¨¡å—çš„æ¨¡æ¿æ–‡ä»¶: templates/mod2.tplï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;mod2&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">è¿™é‡Œæ˜¯æ¨¡å—2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nx">template&lt;/span> &lt;span class="s">&amp;#34;common2&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¸²æŸ“æ¨¡æ¿ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//åˆ›å»ºtemplateå¯¹è±¡ï¼Œå¹¶ä¸”åŠ è½½templatesç›®å½•ä¸‹é¢æ‰€æœ‰çš„tplæ¨¡æ¿æ–‡ä»¶ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseGlob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;templates/*.tpl&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ¸²æŸ“mod1å­æ¨¡æ¿
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ExecuteTemplate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;mod1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ¸²æŸ“mod2å­æ¨¡æ¿
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ExecuteTemplate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;mod2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¿™é‡Œæ˜¯æ¨¡å—1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¿™é‡Œæ˜¯å…±äº«æ¨¡å—1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¿™é‡Œæ˜¯æ¨¡å—2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">è¿™é‡Œæ˜¯å…±äº«æ¨¡å—2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="block">
&lt;a href="#block" class="header-anchor">#&lt;/a>
block
&lt;/h5>&lt;p>&lt;code>block&lt;/code>è¯­å¥ç”¨äºå®šä¹‰ä¸€ä¸ª&lt;strong>å¯é‡å†™çš„æ¨¡æ¿å—&lt;/strong>ã€‚é€šå¸¸ç”¨äºåµŒå¥—æ¨¡æ¿æˆ–å¸ƒå±€æ¨¡æ¿ã€‚æ„æ€å°±æ˜¯ï¼šæ²¡æœ‰é‡å†™çš„æ¨¡æ¿å°†ä½¿ç”¨é»˜è®¤æ¨¡æ¿æ¸²æŸ“ã€‚&lt;/p>
&lt;p>æ ¼å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;base&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Base&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{{&lt;/span>&lt;span class="nx">block&lt;/span> &lt;span class="s">&amp;#34;content&amp;#34;&lt;/span> &lt;span class="p">.}}&lt;/span>&lt;span class="nx">Default&lt;/span> &lt;span class="nx">content&lt;/span>&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å­æ¨¡æ¿å¯ä»¥é‡å†™&lt;code>block&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;content&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Custom&lt;/span> &lt;span class="nx">content&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;home&amp;#34;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">template&lt;/span> &lt;span class="s">&amp;#34;base&amp;#34;&lt;/span> &lt;span class="p">.}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„äº‹é¡¹ï¼š&lt;/p>
&lt;ol>
&lt;li>å®šä¹‰&lt;strong>å¯é‡å†™çš„æ¨¡æ¿å—&lt;/strong>ï¼Œç”¨&lt;code>block&lt;/code>è¯­å¥ï¼Œåé¢è·Ÿä¸¤ä¸ªå‚æ•°ï¼šé‡å†™çš„æ¨¡å—åå’Œä¼ é€’çš„æ¨¡æ¿å‚æ•°ï¼ˆ&lt;code>.&lt;/code>ï¼‰ã€‚&lt;strong>äºŒä¸­ç¼ºä¸€ä¸å¯&lt;/strong>ã€‚
&lt;ul>
&lt;li>&lt;code>block&lt;/code>è¯­å¥é€šå¸¸ä¸åœ¨&lt;code>define&lt;/code>è¯­å¥ç»„åˆä½¿ç”¨ï¼Œ&lt;strong>ç”¨äºåœ¨å®šä¹‰æ¨¡æ¿ä¸­å®šä¹‰å¯é‡å†™çš„æ¨¡æ¿&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>é‡å†™æ¨¡æ¿ç”¨&lt;code>define&lt;/code>è¯­å¥ã€‚è¯­æ³•æ ¼å¼ä¸å®šä¹‰æ¨¡æ¿ä¸€æ ·ã€‚
&lt;ul>
&lt;li>éœ€è¦æ³¨æ„çš„æ˜¯ä¸èƒ½åµŒå¥—&lt;code>define&lt;/code>è¯­å¥ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>é‡å†™æ¨¡æ¿&lt;/strong>ä¸å®šä¹‰é‡å†™æ¨¡æ¿&lt;strong>ä¸èƒ½åœ¨åŒä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ä¸­&lt;/strong>ã€‚&lt;/li>
&lt;li>ç¡®ä¿&lt;code>define&lt;/code>è¯­å¥åœ¨æ¨¡æ¿æ–‡ä»¶çš„é¡¶å±‚å®šä¹‰ã€‚&lt;/li>
&lt;li>&lt;code>block&lt;/code>è¯­å¥ä»…åœ¨goç‰ˆæœ¬1.19æˆ–æ›´é«˜ç‰ˆæœ¬ä»¥ä¸Šæ”¯æŒ&lt;code>text/template&lt;/code>å’Œ&lt;code>html/template&lt;/code>ï¼Œä»¥å¤–ç‰ˆæœ¬ä»…æ”¯æŒ&lt;code>html/template&lt;/code>åŒ…æˆ–éƒ½ä¸æ”¯æŒã€‚&lt;/li>
&lt;/ol>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;p>templates/default/base.tmplï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;base&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">default&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Hello&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{{.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">}}!&lt;/span> &lt;span class="nx">Your&lt;/span> &lt;span class="nx">message&lt;/span> &lt;span class="nx">is&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{{.&lt;/span>&lt;span class="nx">Message&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="nx">block&lt;/span> &lt;span class="s">&amp;#34;custom&amp;#34;&lt;/span> &lt;span class="p">.&lt;/span> &lt;span class="p">}}&lt;/span>&lt;span class="nx">custom&lt;/span> &lt;span class="nx">template&lt;/span> &lt;span class="p">{{&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span> &lt;span class="p">}}&lt;/span> &lt;span class="p">{{&lt;/span> &lt;span class="nx">end&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nx">end&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>templates/default/index.tmplï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;custom&amp;#34;&lt;/span> &lt;span class="p">}}&lt;/span> &lt;span class="o">==&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">custom&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="p">=&lt;/span> &lt;span class="p">{{&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">Message&lt;/span> &lt;span class="p">}}&lt;/span> &lt;span class="p">{{&lt;/span> &lt;span class="nx">end&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="nx">define&lt;/span> &lt;span class="s">&amp;#34;default/index.tmpl&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="nx">template&lt;/span> &lt;span class="s">&amp;#34;base&amp;#34;&lt;/span> &lt;span class="p">.}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nx">end&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>main.goï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseGlob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;templates/**/*.tmpl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to parse template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Jack&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;ä½ å¥½&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ExecuteTemplate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;default/index.tmpl&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to execute template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default/index.tmpl: Hello, Jack! Your message is: &lt;span class="nv">ä½ å¥½&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">===&lt;/span>custom &lt;span class="nv">template&lt;/span>&lt;span class="o">===&lt;/span> ä½ å¥½
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®ç°é‡å†™æ¨¡æ¿ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ¨¡æ¿å‡½æ•°ä»‹ç»">
&lt;a href="#%e6%a8%a1%e6%9d%bf%e5%87%bd%e6%95%b0%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
æ¨¡æ¿å‡½æ•°ä»‹ç»
&lt;/h2>&lt;p>goçš„æ¨¡æ¿å¼•æ“ä¸ºæˆ‘ä»¬æä¾›äº†å‡½æ•°æœºåˆ¶ï¼Œæ–¹é¢æˆ‘ä»¬åœ¨å¤„ç†æ¨¡æ¿æ—¶æ‰§è¡Œä¸€äº›ç‰¹å®šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ ¼å¼åŒ–è¾“å‡ºå†…å®¹ã€å­—æ¯å¤§å°å†™è½¬æ¢ç­‰ç­‰ã€‚&lt;/p>
&lt;h3 id="æ¨¡æ¿å‡½æ•°è°ƒç”¨è¯­æ³•">
&lt;a href="#%e6%a8%a1%e6%9d%bf%e5%87%bd%e6%95%b0%e8%b0%83%e7%94%a8%e8%af%ad%e6%b3%95" class="header-anchor">#&lt;/a>
æ¨¡æ¿å‡½æ•°è°ƒç”¨è¯­æ³•
&lt;/h3>&lt;p>è¯­æ³•æ ¼å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">functionName&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">Argument&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Argumentå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼Œå‚æ•°ç›´æ¥ç”¨ç©ºæ ¼åˆ†éš”ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šæ¨¡æ¿è¯­æ³•éƒ½æ˜¯åœ¨&lt;code>{{}}&lt;/code>ä¸­çš„ï¼Œå‡½æ•°è°ƒç”¨ä¹Ÿæ˜¯ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="nx">html&lt;/span> &lt;span class="s">&amp;#34;&amp;lt;script&amp;gt;alert(&amp;#39;XSS&amp;#39;);&amp;lt;/script&amp;gt;&amp;#34;&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>htmlé¢„å®šä¹‰å‡½æ•°ï¼Œå°†htmlå†…å®¹è¿›è¡Œè½¬ä¹‰ï¼Œé˜²æ­¢XSSæ”»å‡»ã€‚&lt;/p>
&lt;p>æ¸²æŸ“å°†è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">lt&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="nx">script&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">gt&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="nf">alert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="err">#&lt;/span>&lt;span class="mi">39&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="nx">XSS&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="err">#&lt;/span>&lt;span class="mi">39&lt;/span>&lt;span class="p">;);&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">lt&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">script&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">gt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¤šä¸ªå‡½æ•°å‚æ•°çš„ç¤ºä¾‹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="nx">printf&lt;/span> &lt;span class="s">&amp;#34;%s: %d&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;å¹´é¾„&amp;#34;&lt;/span> &lt;span class="mi">18&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>printfå‡½æ•°ä¸»è¦ç”¨äºæ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²ï¼Œæ˜¯fmt.Sprintfå‡½æ•°çš„åˆ«åï¼Œç”¨æ³•è·Ÿfmt.Sprintfå‡½æ•°ä¸€æ ·ï¼ŒåŒºåˆ«å°±æ˜¯æ¨¡æ¿å‡½æ•°çš„å‚æ•°ç”¨ç©ºæ ¼éš”å¼€ã€‚&lt;/p>
&lt;p>è¿™é‡Œä¸ºprintfå‡½æ•°ä¼ é€’äº†3ä¸ªå‚æ•°ã€‚&lt;/p>
&lt;p>æ¸²æŸ“å°†è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">å¹´é¾„: &lt;span class="m">18&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é¢„å®šä¹‰æ¨¡æ¿å‡½æ•°">
&lt;a href="#%e9%a2%84%e5%ae%9a%e4%b9%89%e6%a8%a1%e6%9d%bf%e5%87%bd%e6%95%b0" class="header-anchor">#&lt;/a>
é¢„å®šä¹‰æ¨¡æ¿å‡½æ•°
&lt;/h3>&lt;p>é¢„å®šä¹‰æ¨¡æ¿å‡½æ•°ä¹Ÿå¯ä»¥å«å†…ç½®æ¨¡æ¿å‡½æ•°ï¼Œæ˜¯æ¨¡æ¿å¼•æ“é¢„å®šä¹‰å¥½äº†çš„ï¼Œå¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸­æ‹¿æ¥ä½¿ç”¨ã€‚ä¸‹é¢ä»‹ç»å¸¸ç”¨çš„å†…ç½®å‡½æ•°ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å‰é¢ä»‹ç»çš„&lt;a class="link" href="#%e6%b5%81%e7%a8%8b%e6%8e%a7%e5%88%b6%e8%af%ad%e5%8f%a5" >æ¯”è¾ƒå‡½æ•°&lt;/a>ï¼ˆå…³ç³»è¿ç®—å‡½æ•°ï¼‰ä¹Ÿæ˜¯å±äºé¢„å®šä¹‰å‡½æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¹Ÿå°†é€»è¾‘è¿ç®—å°è£…æˆäº†å‡½æ•°å½¢å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">and è¡¨è¾¾å¼1 è¡¨è¾¾å¼2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¡¨è¾¾å¼1å’Œè¡¨è¾¾å¼2éƒ½ä¸ºçœŸçš„æ—¶å€™è¿”å›true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">or è¡¨è¾¾å¼1 è¡¨è¾¾å¼2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¡¨è¾¾å¼1å’Œè¡¨è¾¾å¼2å…¶ä¸­ä¸€ä¸ªä¸ºçœŸçš„æ—¶å€™è¿”å›true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">not è¡¨è¾¾å¼
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¡¨è¾¾å¼ä¸ºfalseåˆ™è¿”å›true, åä¹‹è¿”å›false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®˜ç½‘è§£é‡Šçœ‹ä¸æ˜ç™½ï¼Œå·®ä¸å¤šå°±æ˜¯ä¸Šé¢çš„æ„æ€ã€‚&lt;/p>
&lt;p>&lt;strong>æç¤º&lt;/strong>: å…³ç³»è¿ç®—å’Œé€»è¾‘è¿ç®—å‡½æ•°é€šå¸¸è·Ÿ&lt;code>if&lt;/code>è¯­å¥ä¸€èµ·ä½¿ç”¨ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">{{$x := 100}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//ç­‰ä»·äº$x == 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{if eq $x 100}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...ä»£ç ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//ç­‰ä»·äº$x &amp;lt; 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{if lt $x 500}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...ä»£ç ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//ç­‰ä»·äº$x &amp;gt;= 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{if ge $x 500}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...ä»£ç ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//ç­‰ä»·äº$x &amp;gt; 50 &amp;amp;&amp;amp; $x &amp;lt; 200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//è¿™é‡Œè°ƒç”¨äº†andå‡½æ•°å’Œgtã€ltä¸‰ä¸ªå‡½æ•°ï¼Œ gtå’Œltå‡½æ•°çš„ç»“æœä½œä¸ºandçš„å‚æ•°ï¼Œgtå’Œltå‡½æ•°è°ƒç”¨åˆ†åˆ«ç”¨æ‹¬å·åŒ…æ‹¬èµ·æ¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{if and (gt $x 50) (lt $x 200)}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...ä»£ç ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{$y := 200}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//ç­‰ä»·äº$x &amp;gt; 100 || $y &amp;gt; 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{if or (gt $x 100) (gt $y 100)}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...ä»£ç ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ›´å¤šå†…ç½®å‡½æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">len
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¿”å›å®ƒçš„å‚æ•°çš„æ•´æ•°ç±»å‹é•¿åº¦ï¼Œå¯ä»¥è®¡ç®—æ•°ç»„é•¿åº¦ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> æ•°ç»„å¤§å°: {{len .}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //æ¨¡æ¿å‚æ•°å®šä¹‰å¦‚ä¸‹ï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> a := []int{1,2,3,4}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> æ¸²æŸ“è¾“å‡º:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> æ•°ç»„å¤§å°: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">index
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¿”å›å…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆé€šå¸¸ä¸ºæ•°ç»„ã€åˆ‡ç‰‡æˆ–æ˜ å°„ï¼‰çš„ç¬¬ N ä¸ªå…ƒç´ ï¼ŒN ç”±åç»­å‚æ•°æŒ‡å®šã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å¦‚&amp;#34;index x 1 2 3&amp;#34;è¿”å›x[1][2][3]çš„å€¼ï¼›æ¯ä¸ªè¢«ç´¢å¼•çš„ä¸»ä½“å¿…é¡»æ˜¯æ•°ç»„ã€åˆ‡ç‰‡æˆ–è€…å­—å…¸ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data := []string{&amp;#34;first&amp;#34;, &amp;#34;second&amp;#34;, &amp;#34;third&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tmpl := `Second element: {{ index . 1 }}`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> æ¸²æŸ“è¾“å‡ºï¼šSecond element: second
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">print
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å³fmt.Sprint
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">printf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å³fmt.Sprintf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">println
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å³fmt.Sprintln
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ä¸»è¦ç”¨äºæ ¼å¼åŒ–å­—ç¬¦ä¸²,æ˜¯go fmt.Sprintfå‡½æ•°çš„åˆ«åï¼Œå‰é¢çš„ä¾‹å­å·²ç»ä»‹ç»ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¿”å›ä¸å…¶å‚æ•°çš„æ–‡æœ¬è¡¨ç¤ºå½¢å¼ç­‰æ•ˆçš„è½¬ä¹‰HTMLã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å°†å…¶å‚æ•°ä½œä¸ºå®‰å…¨çš„ HTML è¾“å‡ºã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¿™ä¸ªå‡½æ•°åœ¨html/templateä¸­ä¸å¯ç”¨ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">urlquery
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ä»¥é€‚åˆåµŒå…¥åˆ°ç½‘å€æŸ¥è¯¢ä¸­çš„å½¢å¼è¿”å›å…¶å‚æ•°çš„æ–‡æœ¬è¡¨ç¤ºçš„è½¬ä¹‰å€¼ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å°†å…¶å‚æ•°ç¼–ç ä¸º URL æŸ¥è¯¢å‚æ•°ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¿™ä¸ªå‡½æ•°åœ¨html/templateä¸­ä¸å¯ç”¨ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ä¸»è¦ç”¨äºurlç¼–ç ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /search?keyword={{urlquery &amp;#34;æœç´¢å…³é”®è¯&amp;#34;}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /search?keyword=%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E8%AF%8D
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¿”å›ä¸å…¶å‚æ•°çš„æ–‡æœ¬è¡¨ç¤ºå½¢å¼ç­‰æ•ˆçš„è½¬ä¹‰JavaScriptã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å°†å…¶å‚æ•°ä½œä¸ºå®‰å…¨çš„ JavaScript è¾“å‡ºã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ js &amp;#34;&amp;lt;script&amp;gt;alert(&amp;#39;Hello, World!&amp;#39;);&amp;lt;/script&amp;gt;&amp;#34; }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> æ¸²æŸ“è¾“å‡ºï¼š
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \u003Cscript\u003Ealert(\&amp;#39;Hello, World!\&amp;#39;);\u003C/script\u003E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">call
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è°ƒç”¨å…¶ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„å‡½æ•°ï¼Œå…¶ä½™å‚æ•°ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> æ‰§è¡Œç»“æœæ˜¯è°ƒç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„è¿”å›å€¼ï¼Œè¯¥å‚æ•°å¿…é¡»æ˜¯å‡½æ•°ç±»å‹ï¼Œå…¶ä½™å‚æ•°ä½œä¸ºè°ƒç”¨è¯¥å‡½æ•°çš„å‚æ•°ï¼›
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å¦‚&amp;#34;call .X.Y 1 2&amp;#34;ç­‰ä»·äºgoè¯­è¨€é‡Œçš„dot.X.Y(1, 2)ï¼›
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å…¶ä¸­Yæ˜¯å‡½æ•°ç±»å‹çš„å­—æ®µæˆ–è€…å­—å…¸çš„å€¼ï¼Œæˆ–è€…å…¶ä»–ç±»ä¼¼æƒ…å†µï¼›
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> callçš„ç¬¬ä¸€ä¸ªå‚æ•°çš„æ‰§è¡Œç»“æœå¿…é¡»æ˜¯å‡½æ•°ç±»å‹çš„å€¼ï¼ˆå’Œé¢„å®šä¹‰å‡½æ•°å¦‚printæ˜æ˜¾ä¸åŒï¼‰ï¼›
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> è¯¥å‡½æ•°ç±»å‹å€¼å¿…é¡»æœ‰1åˆ°2ä¸ªè¿”å›å€¼ï¼Œå¦‚æœæœ‰2ä¸ªåˆ™åä¸€ä¸ªå¿…é¡»æ˜¯erroræ¥å£ç±»å‹ï¼›
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å¦‚æœæœ‰2ä¸ªè¿”å›å€¼çš„æ–¹æ³•è¿”å›çš„errorénilï¼Œæ¨¡æ¿æ‰§è¡Œä¼šä¸­æ–­å¹¶è¿”å›ç»™è°ƒç”¨æ¨¡æ¿æ‰§è¡Œè€…è¯¥é”™è¯¯ï¼›
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>callç¤ºä¾‹(å¯ä»¥å…ˆçœ‹&lt;a class="link" href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e6%a8%a1%e6%9d%bf%e5%87%bd%e6%95%b0" >è‡ªå®šä¹‰æ¨¡æ¿å‡½æ•°&lt;/a>éƒ¨åˆ†ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">sayHello&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello, %s!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tmpl&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">`&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">call&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Gopher&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Funcs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FuncMap&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;sayHello&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">sayHello&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sayHello&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">Hello, Gopher!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="ç®¡é“pipeline">
&lt;a href="#%e7%ae%a1%e9%81%93pipeline" class="header-anchor">#&lt;/a>
ç®¡é“(pipeline)
&lt;/h3>&lt;p>pipeline ç¿»è¯‘è¿‡æ¥å¯ä»¥ç§°ä¸ºç®¡é“æˆ–è€…æµæ°´çº¿ï¼Œ pipelineè¿ç®—çš„ä½œç”¨æ˜¯å°†å¤šä¸ªå‡½æ•°è°ƒç”¨æˆ–è€…å€¼ä¸²èµ·æ¥ï¼Œä»å·¦å¾€å³æ‰§è¡Œï¼Œå·¦è¾¹æ‰§è¡Œçš„ç»“æœä¼šä¼ é€’ç»™å³è¾¹ï¼Œå½¢æˆä¸€ä¸ªä»»åŠ¡æµæ°´ã€‚&lt;/p>
&lt;p>pipelineè¿ç®—ç¬¦ï¼š| (ç«–çº¿)&lt;/p>
&lt;p>è¯­æ³•æ ¼å¼:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">command1 &lt;span class="p">|&lt;/span> command2 &lt;span class="p">|&lt;/span> command3 ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>commandå¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹1ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="s">&amp;#34;&amp;lt;script&amp;gt;alert(&amp;#39;XSS&amp;#39;);&amp;lt;/script&amp;gt;&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">html&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæ„æ€å°±æ˜¯å°†ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ä¼ é€’ç»™htmlå‡½æ•°ã€‚&lt;/p>
&lt;p>æ¸²æŸ“å°†è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">&amp;amp;lt;script&amp;amp;gt;alert(&amp;amp;#39;XSS&amp;amp;#39;);&amp;amp;lt;/script&amp;amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹2ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">{{ &amp;#34;å…³é”®è¯&amp;#34; | html | urlquery }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä¾‹å­å°±æ˜¯å…ˆå°† &lt;strong>&amp;ldquo;å…³é”®è¯&amp;rdquo;&lt;/strong> ä¼ é€’ç»™htmlå‡½æ•°è½¬ä¹‰ä¸‹htmlæ ‡ç­¾ï¼Œç„¶ååœ¨å°†htmlæ‰§è¡Œç»“æœä¼ é€’ç»™urlqueryå‡½æ•°è¿›è¡Œurlç¼–ç ã€‚&lt;/p>
&lt;p>æ¸²æŸ“å°†è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">%E5%85%B3%E9%94%AE%E8%AF%8D
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šå¦‚æœå‡½æ•°æœ‰å¤šä¸ªå‚æ•°ï¼Œpipelineè¿ç®—ä¼š&lt;strong>å°†å€¼ä¼ é€’ç»™å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°&lt;/strong>, ä¾‹å¦‚: &lt;code>{{ 100 | printf &amp;quot;value=%d&amp;quot; }}&lt;/code>, è¿™é‡Œå°†100ä¼ é€’ç»™printfå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚&lt;/p>
&lt;h3 id="è‡ªå®šä¹‰æ¨¡æ¿å‡½æ•°">
&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e6%a8%a1%e6%9d%bf%e5%87%bd%e6%95%b0" class="header-anchor">#&lt;/a>
è‡ªå®šä¹‰æ¨¡æ¿å‡½æ•°
&lt;/h3>&lt;p>å†…ç½®çš„æ¨¡æ¿å‡½æ•°ä½¿ç”¨æœ‰é™ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰æ¨¡æ¿å‡½æ•°ã€‚&lt;/p>
&lt;p>&lt;strong>æ­¥éª¤&lt;/strong>ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†è‡ªå®šä¹‰å‡½æ•°æ˜ å°„åˆ°æ¨¡æ¿å¼•æ“ä¸­ã€‚ç”¨&lt;code>FuncMap&lt;/code>å‡½æ•°æ˜ å°„ã€‚æœ¬è´¨æ˜¯mapç±»å‹ã€‚å¯ä»¥æ˜ å°„å¤šä¸ªã€‚&lt;/p>
&lt;ul>
&lt;li>é”®å€¼éƒ½æ˜¯è‡ªå®šä¹‰çš„å‡½æ•°åã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æœ€åè°ƒç”¨&lt;code>Funcs&lt;/code>æ–¹æ³•ï¼Œå°†æ˜ å°„æ·»åŠ åˆ°æ¨¡æ¿ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„è¯·åœ¨è§£æå‰å®Œæˆä»¥ä¸Šæ“ä½œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ›å»ºæ¨¡æ¿å¹¶æ·»åŠ è‡ªå®šä¹‰å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Funcs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">funcMap&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è§£æåŒ¹é…æŒ‡å®šæ¨¡å¼çš„æ¨¡æ¿æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">t&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseGlob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;templates/*.tmpl&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">or&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ›å»ºæ¨¡æ¿å¹¶è§£æ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Funcs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">funcMap&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ToUpper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToUpper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Repeat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">word&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">count&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Repeat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">word&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">count&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Data&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Word&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Count&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">funcMap&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FuncMap&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;ToUpper&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">ToUpper&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Repeat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Repeat&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">ToUpper&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Message&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">Repeat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Word&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Count&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">Data&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;hello, world!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Word&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Go&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Count&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Funcs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">funcMap&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to execute template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HELLO, WORLD!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GoGoGo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ä¿®æ”¹é»˜è®¤çš„æ ‡è¯†ç¬¦">
&lt;a href="#%e4%bf%ae%e6%94%b9%e9%bb%98%e8%ae%a4%e7%9a%84%e6%a0%87%e8%af%86%e7%ac%a6" class="header-anchor">#&lt;/a>
ä¿®æ”¹é»˜è®¤çš„æ ‡è¯†ç¬¦
&lt;/h2>&lt;p>Goæ ‡å‡†åº“çš„æ¨¡æ¿å¼•æ“ä½¿ç”¨çš„èŠ±æ‹¬å·&lt;code>{{&lt;/code>å’Œ&lt;code>}}&lt;/code>ä½œä¸ºæ ‡è¯†ï¼Œè€Œè®¸å¤šå‰ç«¯æ¡†æ¶ï¼ˆå¦‚&lt;code>Vue&lt;/code>å’Œ &lt;code>AngularJS&lt;/code>ï¼‰ä¹Ÿä½¿ç”¨&lt;code>{{&lt;/code>å’Œ&lt;code>}}&lt;/code>ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åŒæ—¶ä½¿ç”¨Goè¯­è¨€æ¨¡æ¿å¼•æ“å’Œä»¥ä¸Šå‰ç«¯æ¡†æ¶æ—¶å°±ä¼šå‡ºç°å†²çªï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ ‡è¯†ç¬¦ï¼Œä¿®æ”¹å‰ç«¯çš„æˆ–è€…ä¿®æ”¹Goè¯­è¨€çš„ã€‚è¿™é‡Œæ¼”ç¤ºå¦‚ä½•ä¿®æ”¹Goè¯­è¨€æ¨¡æ¿å¼•æ“é»˜è®¤çš„æ ‡è¯†ç¬¦ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`{[ printf &amp;#34;==%s==&amp;#34; . ]}`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Must&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Delims&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;{[&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;]}&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨åˆ°çš„æ–¹æ³•æ˜¯&lt;code>Delims&lt;/code>ï¼Œåˆ†åˆ«æ¥æ”¶ä¸¤ç«¯çš„åˆ†éš”ç¬¦ä¸ºå‚æ•°ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="åº”ç”¨">
&lt;a href="#%e5%ba%94%e7%94%a8" class="header-anchor">#&lt;/a>
åº”ç”¨
&lt;/h2>&lt;p>åœ¨Goè¯­è¨€ä¸­ï¼Œ&lt;code>text/template&lt;/code>å’Œ&lt;code>html/template&lt;/code>åŒ…ç”¨äºç”Ÿæˆæ–‡æœ¬å’ŒHTMLè¾“å‡ºï¼Œå¸¸è§çš„åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;strong>&lt;code>text/template&lt;/code>åŒ…&lt;/strong>ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>ç”Ÿæˆé…ç½®æ–‡ä»¶&lt;/strong>ï¼š&lt;/p>
&lt;p>é€šè¿‡æ¨¡æ¿ç”ŸæˆåŠ¨æ€é…ç½®æ–‡ä»¶ï¼Œå¦‚YAMLã€JSONç­‰æ ¼å¼ï¼Œç”¨äºä¸åŒç¯å¢ƒçš„é…ç½®ç®¡ç†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> apiVersion: v1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> kind: ConfigMap
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> metadata:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> name: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> data:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> key: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Value&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> `&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Value&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;example-config&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Value&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;example-value&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç”Ÿæˆä»£ç &lt;/strong>ï¼š&lt;/p>
&lt;p>è‡ªåŠ¨ç”Ÿæˆä»£ç æ–‡ä»¶ï¼Œå¦‚ç”ŸæˆCRUDä»£ç ã€æ¥å£å®ç°ä»£ç ç­‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;crud&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> package main
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> type &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s"> struct {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> ID int
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> Name string
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> func (&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Receiver&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s"> *&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">) Create() {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> // Create logic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> func (&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Receiver&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s"> *&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">) Read() {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> // Read logic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> func (&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Receiver&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s"> *&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">) Update() {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> // Update logic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> func (&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Receiver&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s"> *&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">) Delete() {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> // Delete logic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> `&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Receiver&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;User&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Receiver&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;u&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç”Ÿæˆæ–‡æ¡£&lt;/strong>ï¼š&lt;/p>
&lt;p>ç”ŸæˆæŠ¥å‘Šã€é‚®ä»¶ã€æ—¥å¿—ç­‰æ–‡æœ¬æ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;text/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;report&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> Report:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> Name: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> Date: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Date&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> Summary: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Summary&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> `&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Date&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Summary&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;John Doe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Date&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;2024-06-10&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Summary&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;This is a summary of the report.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>&lt;code>html/template&lt;/code>åŒ…&lt;/strong>ï¼š&lt;/p>
&lt;p>&lt;code>html/template&lt;/code>åŒ…ä¸“é—¨ç”¨äºç”Ÿæˆå®‰å…¨çš„HTMLå†…å®¹ï¼Œé˜²æ­¢XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§åº”ç”¨ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>ç”ŸæˆåŠ¨æ€ç½‘é¡µ&lt;/strong>ï¼š&lt;/p>
&lt;p>æ ¹æ®ç”¨æˆ·è¾“å…¥æˆ–æ•°æ®åº“å†…å®¹åŠ¨æ€ç”ŸæˆHTMLé¡µé¢ï¼Œé€‚ç”¨äºWebåº”ç”¨çš„å‰ç«¯å±•ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Email&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;!DOCTYPE html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;head&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;title&amp;gt;User Page&amp;lt;/title&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/head&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;body&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;h1&amp;gt;Hello, &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;lt;/h1&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;p&amp;gt;Email: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Email&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/body&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> `&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusInternalServerError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">user&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Alice&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Email&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;alice@example.com&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusInternalServerError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">handler&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ListenAndServe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç”Ÿæˆé‚®ä»¶å†…å®¹&lt;/strong>ï¼š&lt;/p>
&lt;p>ç”ŸæˆåŒ…å«HTMLæ ¼å¼çš„é‚®ä»¶å†…å®¹ï¼Œç”¨äºå‘é€åŠ¨æ€é‚®ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;bytes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/smtp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;email&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;body&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;h1&amp;gt;Hello, &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;lt;/h1&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;p&amp;gt;Thank you for joining our service.&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/body&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> `&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">body&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Buffer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Alice&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">auth&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">smtp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PlainAuth&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;your-email@example.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;your-email-password&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;smtp.example.com&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">smtp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SendMail&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;smtp.example.com:587&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">auth&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;your-email@example.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;recipient@example.com&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="nx">body&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Bytes&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Email sent successfully!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç”ŸæˆHTMLæŠ¥å‘Š&lt;/strong>ï¼š&lt;/p>
&lt;p>æ ¹æ®æ¨¡æ¿ç”ŸæˆåŒ…å«åŠ¨æ€å†…å®¹çš„HTMLæŠ¥å‘Šï¼Œé€‚ç”¨äºç”Ÿæˆåˆ†æç»“æœã€ç»Ÿè®¡æ•°æ®å±•ç¤ºç­‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;report&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;!DOCTYPE html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;head&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;title&amp;gt;Report&amp;lt;/title&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/head&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;body&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;h1&amp;gt;Report Summary&amp;lt;/h1&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;p&amp;gt;Name: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;p&amp;gt;Date: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Date&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;p&amp;gt;Summary: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Summary&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/body&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> `&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Date&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Summary&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;John Doe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Date&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;2024-06-10&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Summary&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;This is a summary of the report.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">tmpl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h3>&lt;ul>
&lt;li>&lt;code>text/template&lt;/code>ä¸»è¦ç”¨äºç”Ÿæˆçº¯æ–‡æœ¬å†…å®¹ï¼Œå¦‚é…ç½®æ–‡ä»¶ã€ä»£ç ã€æ–‡æ¡£ç­‰ã€‚&lt;/li>
&lt;li>&lt;code>html/template&lt;/code>ä¸»è¦ç”¨äºç”Ÿæˆå®‰å…¨çš„HTMLå†…å®¹ï¼Œå¦‚åŠ¨æ€ç½‘é¡µã€é‚®ä»¶å†…å®¹ã€HTMLæŠ¥å‘Šç­‰ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸¤ä¸ªåŒ…éƒ½é€šè¿‡æ¨¡æ¿æä¾›äº†å¼ºå¤§çš„æ–‡æœ¬å¤„ç†åŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©é€‚ç”¨çš„åŒ…æ¥ç”Ÿæˆæ‰€éœ€çš„è¾“å‡ºã€‚&lt;/p>
&lt;hr>
&lt;h2 id="è¡¥å……">
&lt;a href="#%e8%a1%a5%e5%85%85" class="header-anchor">#&lt;/a>
è¡¥å……
&lt;/h2>&lt;h3 id="ä¸è½¬ä¹‰htmlå†…å®¹">
&lt;a href="#%e4%b8%8d%e8%bd%ac%e4%b9%89html%e5%86%85%e5%ae%b9" class="header-anchor">#&lt;/a>
ä¸è½¬ä¹‰HTMLå†…å®¹
&lt;/h3>&lt;p>å¦‚æœä½ éœ€è¦å®‰å…¨åœ°æ˜¾ç¤ºç”¨æˆ·è¾“å…¥çš„ HTML å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>æ˜ç¡®ä¿¡ä»»çš„å†…å®¹&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å½“æˆ‘ä»¬ä½¿ç”¨&lt;code>html/template&lt;/code>åŒ…æ¸²æŸ“æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬ä¹‰HTMLå†…å®¹ï¼Œå¦‚æœä¸å¸Œæœ›è½¬ä¹‰HTMLå†…å®¹ï¼Œå¯ä»¥å°†è¦æ¸²æŸ“çš„HTMLå†…å®¹å®šä¹‰ä¸º&lt;code>template.HTML&lt;/code>ç±»å‹ï¼ˆæœ¬è´¨å°±æ˜¯å­—ç¬¦ä¸²ï¼‰ï¼Œè¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨è½¬ä¹‰HTMLå†…å®¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¯¹äºå®Œå…¨å¯ä¿¡çš„å†…å®¹ï¼Œæ‰èƒ½ä½¿ç”¨ &lt;code>template.HTML&lt;/code>ï¼Œä»¥é˜²æ­¢XSSæ”»å‡»ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯¹åº”çš„ä¿¡ä»»JavaScriptç±»å‹&lt;code>template.JS&lt;/code> ï¼šä¸ä¼šè‡ªåŠ¨è½¬ä¹‰ä¸ºå®‰å…¨çš„jsä»£ç ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//&amp;#34;text/template&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Hello, {{.Name}}! Your message is: {{.Message}}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HTML&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;World&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;&amp;lt;script&amp;gt;alert(&amp;#39;XSS&amp;#39;);&amp;lt;/script&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Parsing template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Excuting templete: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hello, World! Your message is: &amp;lt;script&amp;gt;alert&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;XSS&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="p">;&lt;/span>&amp;lt;/script&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨ HTML ç™½åå•&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¦‚æœç”¨æˆ·æä¾›çš„å†…å®¹éœ€è¦éƒ¨åˆ† HTML æ ‡ç­¾ï¼Œå¯ä»¥ä½¿ç”¨ HTML è§£æåº“å°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹è¿‡æ»¤ï¼Œåªå…è®¸ç‰¹å®šçš„æ ‡ç­¾å’Œå±æ€§é€šè¿‡ã€‚è¿™å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¦‚ &lt;a class="link" href="https://github.com/microcosm-cc/bluemonday" target="_blank" rel="noopener"
>bluemonday&lt;/a> æ¥å®ç°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/microcosm-cc/bluemonday&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">sanitizeHTML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">input&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HTML&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">p&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">bluemonday&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">UGCPolicy&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// ä½¿ç”¨é»˜è®¤çš„ç”¨æˆ·ç”Ÿæˆå†…å®¹ç­–ç•¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">sanitized&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sanitize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">input&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HTML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sanitized&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`Hello, &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">! Your message is: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Message&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HTML&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;World&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">sanitizeHTML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;lt;strong&amp;gt;Bold Text&amp;lt;/strong&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;&amp;lt;script&amp;gt;alert(&amp;#39;XSS&amp;#39;);&amp;lt;/script&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;parsing template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;executing template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Hello&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">World&lt;/span>&lt;span class="p">!&lt;/span> &lt;span class="nx">Your&lt;/span> &lt;span class="nx">message&lt;/span> &lt;span class="nx">is&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">strong&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">Bold&lt;/span> &lt;span class="nx">Text&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">strong&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨ Markdown&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ Markdownï¼Œå°†ç”¨æˆ·è¾“å…¥çš„ Markdown è½¬æ¢ä¸ºå®‰å…¨çš„ HTMLã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºå…è®¸ç”¨æˆ·ä½¿ç”¨ç®€å•æ ‡è®°è¯­è¨€æ ¼å¼åŒ–å†…å®¹çš„åœºæ™¯ã€‚ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“æ˜¯&lt;a class="link" href="https://github.com/russross/blackfriday" target="_blank" rel="noopener"
>blackfriday&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/russross/blackfriday/v2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">markdownToHTML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">input&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HTML&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">output&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">blackfriday&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">input&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HTML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">output&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">tmpl&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`Hello, &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">! Your message is: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Message&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HTML&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;World&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">markdownToHTML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;**Bold Text**\n\n&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;&amp;lt;script&amp;gt;alert(&amp;#39;XSS&amp;#39;);&amp;lt;/script&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;example&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tmpl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;parsing template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;executing template: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Hello&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">World&lt;/span>&lt;span class="p">!&lt;/span> &lt;span class="nx">Your&lt;/span> &lt;span class="nx">message&lt;/span> &lt;span class="nx">is&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nx">strong&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">Bold&lt;/span> &lt;span class="nx">Text&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">strong&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nx">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nf">alert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">lsquo&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="nx">XSS&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">rsquo&lt;/span>&lt;span class="p">;);&amp;lt;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">script&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä»»ä½•è„šæœ¬æ ‡ç­¾æˆ–å…¶ä»–æ½œåœ¨çš„ XSS æ”»å‡»å†…å®¹éƒ½ä¼šè¢«è½¬ä¹‰ï¼Œç¡®ä¿ç”Ÿæˆçš„ HTML æ˜¯å®‰å…¨çš„ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>æ€»ç»“&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ˜ç¡®ä¿¡ä»»çš„å†…å®¹&lt;/strong>ï¼šå¯¹äºå®Œå…¨å¯ä¿¡çš„å†…å®¹ï¼Œä½¿ç”¨ &lt;code>template.HTML&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;strong>ä½¿ç”¨ HTML ç™½åå•&lt;/strong>ï¼šä½¿ç”¨ HTML è§£æåº“ï¼Œå¦‚ &lt;code>bluemonday&lt;/code>ï¼Œè¿‡æ»¤ç”¨æˆ·è¾“å…¥ï¼Œåªå…è®¸ç‰¹å®šçš„æ ‡ç­¾å’Œå±æ€§ã€‚&lt;/li>
&lt;li>&lt;strong>ä½¿ç”¨ Markdown&lt;/strong>ï¼šå°†ç”¨æˆ·è¾“å…¥çš„ Markdown è½¬æ¢ä¸ºå®‰å…¨çš„ HTMLï¼Œé¿å…ç›´æ¥åµŒå…¥ç”¨æˆ·æä¾›çš„ HTMLã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™å‡ ç§æ–¹æ³•å¯ä»¥åœ¨ä¿è¯å®‰å…¨æ€§çš„å‰æä¸‹ï¼Œå…è®¸ä¸€å®šç¨‹åº¦çš„ HTML å†…å®¹æ˜¾ç¤ºã€‚é€‰æ‹©å…·ä½“æ–¹æ³•æ—¶ï¼Œåº”æ ¹æ®åº”ç”¨åœºæ™¯å’Œå®‰å…¨éœ€æ±‚åšå‡ºé€‚å½“é€‰æ‹©ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://www.tizi365.com/archives/85.html" target="_blank" rel="noopener"
>Golangæ¨¡æ¿å¼•æ“å¿«é€Ÿå…¥é—¨æ•™ç¨‹&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.liwenzhou.com/posts/Go/template/" target="_blank" rel="noopener"
>Goè¯­è¨€æ ‡å‡†åº“ä¹‹http/template&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Openapi And Swagger Introduction</title><link>https://arlettebrook.github.io/p/openapi-and-swagger-introduction/</link><pubDate>Wed, 22 May 2024 21:43:36 +0800</pubDate><guid>https://arlettebrook.github.io/p/openapi-and-swagger-introduction/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œå¾€å¾€éœ€è¦ç¼–å†™ç¨‹åºçš„ API æ–‡æ¡£ï¼Œå°¤å…¶æ˜¯ Web åç«¯å¼€å‘è€…ï¼Œåœ¨è·Ÿå‰ç«¯å¯¹æ¥ HTTP æ¥å£çš„æ—¶å€™ï¼Œä¸€ä¸ªå¥½çš„ API æ–‡æ¡£èƒ½å¤Ÿå¤§å¤§æé«˜åä½œæ•ˆç‡ï¼Œé™ä½æ²Ÿé€šæˆæœ¬ï¼Œæœ¬æ–‡å°±æ¥èŠèŠå¦‚ä½•ä½¿ç”¨ OpenAPI æ„å»º HTTP æ¥å£æ–‡æ¡£ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="openapi">
&lt;a href="#openapi" class="header-anchor">#&lt;/a>
OpenAPI
&lt;/h2>&lt;h3 id="ä»€ä¹ˆæ˜¯-openapi">
&lt;a href="#%e4%bb%80%e4%b9%88%e6%98%af-openapi" class="header-anchor">#&lt;/a>
ä»€ä¹ˆæ˜¯ OpenAPI
&lt;/h3>&lt;p>OpenAPI æ˜¯è§„èŒƒåŒ–æè¿° API é¢†åŸŸåº”ç”¨æœ€å¹¿æ³›çš„&lt;strong>è¡Œä¸šæ ‡å‡†&lt;/strong>ï¼Œç”± &lt;a class="link" href="https://www.openapis.org/" target="_blank" rel="noopener"
>OpenAPI Initiative(OAI)&lt;/a> å®šä¹‰å¹¶ç»´æŠ¤ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ Linux åŸºé‡‘ä¼šä¸‹çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ã€‚é€šå¸¸æˆ‘ä»¬æ‰€è¯´çš„ OpenAPI å…¨ç§°åº”è¯¥æ˜¯ OpenAPI Specification(OpenAPI è§„èŒƒï¼Œç®€ç§° OSA)ï¼Œå®ƒä½¿ç”¨è§„å®šçš„æ ¼å¼æ¥æè¿° HTTP RESTful API çš„å®šä¹‰ï¼Œä»¥æ­¤æ¥è§„èŒƒ RESTful æœåŠ¡å¼€å‘è¿‡ç¨‹ã€‚ä½¿ç”¨ JSON æˆ– YAML æ¥æè¿°ä¸€ä¸ªæ ‡å‡†çš„ã€ä¸ç¼–ç¨‹è¯­è¨€æ— å…³çš„ HTTP API æ¥å£ã€‚OpenAPI è§„èŒƒæœ€åˆåŸºäº SmartBear Software åœ¨ 2015 å¹´æèµ çš„ &lt;a class="link" href="https://swagger.io/resources/open-api/" target="_blank" rel="noopener"
>Swagger è§„èŒƒ&lt;/a>æ¼”å˜è€Œæ¥ï¼Œç›®å‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯ &lt;a class="link" href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md" target="_blank" rel="noopener"
>v3.1.0&lt;/a>ã€‚&lt;/p>
&lt;p>ç®€å•æ¥è¯´ï¼ŒOpenAPI å°±æ˜¯ç”¨æ¥å®šä¹‰ HTTP æ¥å£æ–‡æ¡£çš„ä¸€ç§è§„èŒƒï¼Œå¤§å®¶éƒ½æŒ‰ç…§åŒä¸€å¥—è§„èŒƒæ¥ç¼–å†™æ¥å£æ–‡æ¡£ï¼Œèƒ½å¤Ÿæå¤§çš„å‡å°‘æ²Ÿé€šæˆæœ¬ã€‚&lt;/p>
&lt;h3 id="openapi-è§„èŒƒåŸºæœ¬ä¿¡æ¯">
&lt;a href="#openapi-%e8%a7%84%e8%8c%83%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af" class="header-anchor">#&lt;/a>
OpenAPI è§„èŒƒåŸºæœ¬ä¿¡æ¯
&lt;/h3>&lt;p>OpenAPI è§„èŒƒå†…å®¹åŒ…å«éå¸¸å¤šçš„ç»†èŠ‚ï¼Œæœ¬æ–‡æ— æ³•ä¸€ä¸€è®²è§£ï¼Œè¿™é‡Œä»…ä»‹ç»å¸¸è§çš„åŸºæœ¬ä¿¡æ¯ï¼Œä»¥ YAML ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚YAML æ˜¯ JSON çš„è¶…é›†ï¼Œåœ¨ OpenAPI è§„èŒƒä¸­å®šä¹‰çš„æ‰€æœ‰è¯­æ³•ï¼Œä¸¤è€…ä¹‹é—´æ˜¯å¯ä»¥äº’ç›¸è½¬æ¢çš„ï¼Œå¦‚æœæ‰‹åŠ¨ç¼–å†™ï¼Œå»ºè®®ç¼–å†™ YAML æ ¼å¼ï¼Œæ›´ä¸ºæ˜“è¯»ã€‚&lt;/p>
&lt;p>OpenAPI æ–‡æ¡£ç¼–å†™åœ¨ä¸€ä¸ª &lt;code>.json&lt;/code> æˆ– &lt;code>.yaml&lt;/code> ä¸­ï¼Œæ¨èå°†å…¶å‘½åä¸º &lt;code>openapi.json&lt;/code> æˆ– &lt;code>openapi.yaml&lt;/code>ï¼ŒOpenAPI æ–‡æ¡£å…¶å®å°±æ˜¯ä¸€ä¸ªå•ä¸€çš„ JSON å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«ç¬¦åˆ &lt;a class="link" href="https://spec.openapis.org/oas/latest.html" target="_blank" rel="noopener"
>OpenAPI è§„èŒƒ&lt;/a>ä¸­å®šä¹‰çš„ç»“æ„å­—æ®µã€‚&lt;/p>
&lt;p>OpenAPI è§„èŒƒåŸºæœ¬ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å­—æ®µå&lt;/th>
&lt;th>ç±»å‹&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>openapi&lt;/td>
&lt;td>string&lt;/td>
&lt;td>å¿…é€‰ï¼Œå¿…é¡»æ˜¯ OpenAPI å·²å‘å¸ƒçš„åˆæ³•ç‰ˆæœ¬ï¼Œå¦‚ &lt;code>3.0.1&lt;/code>ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>info&lt;/td>
&lt;td>object&lt;/td>
&lt;td>å¿…é€‰ï¼Œæ­¤å­—æ®µæä¾› API ç›¸å…³çš„å…ƒæ•°æ®ï¼ˆå¦‚æè¿°ã€ä½œè€…å’Œè”ç³»ä¿¡æ¯ï¼‰ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>servers&lt;/td>
&lt;td>array[object]&lt;/td>
&lt;td>è¿™æ˜¯ä¸€ä¸ª Server å¯¹è±¡çš„æ•°ç»„ï¼Œæä¾›åˆ°æœåŠ¡å™¨çš„è¿æ¥ä¿¡æ¯ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>paths&lt;/td>
&lt;td>object&lt;/td>
&lt;td>å¿…é€‰ï¼ŒAPI æä¾›çš„å¯ç”¨çš„è·¯å¾„å’Œæ“ä½œã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>components&lt;/td>
&lt;td>object&lt;/td>
&lt;td>ä¸€ä¸ªåŒ…å«å¤šç§ç»“æ„çš„å…ƒç´ ï¼Œå¯å¤ç”¨ç»„ä»¶ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>security&lt;/td>
&lt;td>array&lt;/td>
&lt;td>å£°æ˜ API ä½¿ç”¨çš„å®‰å…¨è®¤è¯æœºåˆ¶ï¼Œç›®å‰æ”¯æŒ &lt;code>HTTP Basic Auth&lt;/code>ã€&lt;code>HTTP Bearer Auth&lt;/code>ã€&lt;code>ApiKey Auth&lt;/code> ä»¥åŠ &lt;code>OAuth2&lt;/code>ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tags&lt;/td>
&lt;td>array&lt;/td>
&lt;td>æä¾›æ ‡ç­¾å¯ä»¥ä¸º API å½’ç±»ï¼Œæ¯ä¸ªæ ‡ç­¾åéƒ½åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>externalDocs&lt;/td>
&lt;td>object&lt;/td>
&lt;td>é™„åŠ çš„æ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡æ‰©å±•å±æ€§æ¥æ‰©å±•æ–‡æ¡£ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä¸€ä¸ª YAML æ ¼å¼çš„ OpenAPI æ–‡æ¡£ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">openapi&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3.1.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">info&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Tic Tac Toe&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> This API allows writing down marks on a Tic Tac Toe board
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> and requesting the state of the board or of individual squares.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1.0.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># æ­¤ä¸º API æ¥å£æ–‡æ¡£ç‰ˆæœ¬ï¼Œä¸ openapi ç‰ˆæœ¬æ— å…³&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Gameplay&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">paths&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Whole board operations&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">/board&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">get&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">summary&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Get the whole board&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Retrieves the current state of the board and the winner.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">Gameplay&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">operationId&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">get-board&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">responses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;200&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;OK&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">content&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">application/json&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">schema&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">$ref&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;#/components/schemas/status&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Single square operations&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="l">/board/{row}/{column}:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">parameters&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">$ref&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;#/components/parameters/rowParam&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">$ref&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;#/components/parameters/columnParam&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">get&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">summary&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Get a single board square&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Retrieves the requested square.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">Gameplay&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">operationId&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">get-square&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">responses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;200&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;OK&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">content&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">application/json&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">schema&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">$ref&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;#/components/schemas/mark&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;400&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">The provided parameters are incorrect&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">content&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">text/html&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">schema&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">$ref&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;#/components/schemas/errorMessage&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">example&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Illegal coordinates&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šç¤ºä¾‹å®Œæ•´æ–‡æ¡£&lt;a class="link" href="https://oai.github.io/Documentation/examples/tictactoe.yaml" target="_blank" rel="noopener"
>åœ¨æ­¤&lt;/a>ï¼Œå…·ä½“è¯­æ³•æˆ‘å°±ä¸åœ¨è¿™é‡Œä»‹ç»äº†ã€‚å¦‚æœä½ å¼€å‘è¿‡ API æ¥å£ï¼Œç›¸ä¿¡èƒ½çœ‹æ‡‚æ–‡æ¡£å¤§éƒ¨åˆ†å†…å®¹æ‰€ä»£è¡¨çš„å«ä¹‰ã€‚&lt;strong>ä¸å¿…å®Œå…¨æŒæ¡å…¶è¯­æ³•ï¼Œè¿™å¹¶ä¸ä¼šå¯¹é˜…è¯»æœ¬æ–‡æ¥ä¸‹æ¥çš„å†…å®¹é€ æˆå›°æ‰°&lt;/strong>ï¼Œå› ä¸ºç¨åæˆ‘ä¼šä»‹ç»å¦‚ä½•é€šè¿‡ä»£ç æ³¨é‡Šçš„æ–¹å¼è‡ªåŠ¨ç”Ÿæˆæ­¤æ–‡æ¡£ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³æ‰‹åŠ¨ç¼–å†™ OpenAPI æ–‡æ¡£ï¼Œé‚£ä¹ˆæˆ‘è¿˜æ˜¯æ¨èä½ é˜…è¯»ä¸‹ &lt;a class="link" href="https://spec.openapis.org/oas/latest.html" target="_blank" rel="noopener"
>OpenAPI è§„èŒƒ&lt;/a>ï¼Œè¿™é‡Œæœ‰ä¸€ä»½&lt;a class="link" href="https://openapi.apifox.cn/" target="_blank" rel="noopener"
>ä¸­æ–‡ç‰ˆçš„è§„èŒƒ&lt;/a>ã€‚é˜…è¯»è§„èŒƒæ˜¯ä¸€ä¸ªæ¯”è¾ƒæ¯ç‡¥çš„è¿‡ç¨‹ï¼Œå¦‚æœä½ æ²¡æœ‰è€å¿ƒè¯»å®Œï¼Œå¼ºçƒˆå»ºè®®é˜…è¯» &lt;a class="link" href="https://oai.github.io/Documentation/" target="_blank" rel="noopener"
>OpenAPI è§„èŒƒå…¥é—¨&lt;/a>ï¼Œç›¸è¾ƒäºå®Œæ•´ç‰ˆçš„è§„èŒƒè¦ç²¾ç®€å¾—å¤šï¼Œå¹¶ä¸”è®²è§£æ›´åŠ æ˜“äºç†è§£ã€‚&lt;/p>
&lt;p>å¦å¤–è¿˜æ¨èè®¿é—® &lt;a class="link" href="https://openapi-map.apihandyman.io/" target="_blank" rel="noopener"
>OpenAPI Map&lt;/a> ç½‘ç«™æ¥æŒæ¡ OpenAPI è§„èŒƒï¼Œè¯¥ç½‘ç«™ä»¥æ€ç»´å¯¼å›¾çš„å½¢å¼å±•ç°è§„èŒƒçš„æ ¼å¼ä»¥åŠè¯´æ˜ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/openapi-map.png"
width="2940"
height="1678"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/openapi-map_hudb4f51bb2f8bce2a084d37b76def6aa2_332185_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/openapi-map_hudb4f51bb2f8bce2a084d37b76def6aa2_332185_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="OpenAPI Map"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="420px"
>&lt;/p>
&lt;hr>
&lt;h2 id="openapitools">
&lt;a href="#openapitools" class="header-anchor">#&lt;/a>
OpenAPI.Tools
&lt;/h2>&lt;p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº† OpenAPI è§„èŒƒï¼Œæ¥ä¸‹æ¥è¦åšä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯äº†è§£ OpenAPI å¼€æ”¾äº†å“ªäº›èƒ½åŠ›ã€‚&lt;/p>
&lt;p>æœ‰ä¸€ä¸ªå« &lt;a class="link" href="https://openapi.tools/" target="_blank" rel="noopener"
>OpenAPI.Tools&lt;/a> çš„ç½‘ç«™ï¼Œåˆ†ç±»æ•´ç†å¹¶è®°å½•äº†ç¤¾åŒºå›´ç»• OpenAPI è§„èŒƒå¼€å‘çš„æµè¡Œå·¥å…·ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/openapi-tool-types.png"
width="2654"
height="1220"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/openapi-tool-types_hue30a3c9c74b7e77978f3be591373dd5a_502117_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/openapi-tool-types_hue30a3c9c74b7e77978f3be591373dd5a_502117_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Tool Types"
class="gallery-image"
data-flex-grow="217"
data-flex-basis="522px"
>&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°åˆ—è¡¨ä¸­æœ‰å¾ˆå¤šåˆ†ç±»ï¼Œåœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼Œæœ€ç»å¸¸ä½¿ç”¨çš„æœ‰ä¸‰ç±»ï¼š&lt;/p>
&lt;h3 id="æ–‡æ¡£ç¼–è¾‘å™¨">
&lt;a href="#%e6%96%87%e6%a1%a3%e7%bc%96%e8%be%91%e5%99%a8" class="header-anchor">#&lt;/a>
æ–‡æ¡£ç¼–è¾‘å™¨
&lt;/h3>&lt;p>æ–‡æ¡£ç¼–è¾‘å™¨æ–¹ä¾¿æˆ‘ä»¬ç”¨æ¥ç¼–å†™ç¬¦åˆ OpenAPI è§„èŒƒçš„æ–‡æ¡£ï¼Œæœ‰åŠ©äºæé«˜ç¼–å†™æ–‡æ¡£çš„æ•ˆç‡ï¼Œå°±åƒ &lt;a class="link" href="https://code.visualstudio.com/" target="_blank" rel="noopener"
>VS Code&lt;/a> èƒ½å¤Ÿæ–¹ä¾¿æˆ‘ä»¬ç¼–å†™ä»£ç ä¸€æ ·ã€‚&lt;/p>
&lt;p>æ–‡æ¡£ç¼–è¾‘å™¨æœ‰ä¸¤ç§ï¼š&lt;a class="link" href="https://openapi.tools/#text-editors" target="_blank" rel="noopener"
>æ–‡æœ¬ç¼–è¾‘å™¨&lt;/a> ä»¥åŠ &lt;a class="link" href="https://openapi.tools/#gui-editors" target="_blank" rel="noopener"
>å›¾å½¢ç¼–è¾‘å™¨&lt;/a>ã€‚&lt;/p>
&lt;p>æ–‡æœ¬ç¼–è¾‘å™¨æ¨èä½¿ç”¨åœ¨çº¿çš„ &lt;a class="link" href="https://editor.swagger.io/" target="_blank" rel="noopener"
>Swagger Editor&lt;/a>ï¼Œèƒ½å¤Ÿå®ç°æ ¼å¼æ ¡éªŒå’Œå®æ—¶é¢„è§ˆ Swagger äº¤äº’å¼ API æ–‡æ¡£åŠŸèƒ½ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/swagger-editor.png"
width="2940"
height="1838"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/swagger-editor_hu50c8be478a0cc503116512d3818232f0_751043_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/swagger-editor_hu50c8be478a0cc503116512d3818232f0_751043_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Swagger Editor"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;p>å¦‚æœä½ ä¹ æƒ¯ä½¿ç”¨ &lt;code>VS Code&lt;/code>ï¼Œä¹Ÿæœ‰&lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=42Crunch.vscode-openapi" target="_blank" rel="noopener"
>ç›¸åº”æ’ä»¶&lt;/a>å¯ä¾›ä½¿ç”¨ã€‚&lt;/p>
&lt;p>å›¾å½¢ç¼–è¾‘å™¨çš„å¥½å¤„æ˜¯èƒ½å¤Ÿä»¥å¯è§†åŒ–çš„å½¢å¼ç¼–è¾‘å†…å®¹ï¼Œä¸äº†è§£ OpenAPI è§„èŒƒè¯­æ³•ä¹Ÿèƒ½ç¼–è¾‘ã€‚å¯ä»¥æ ¹æ®è‡ªå·±å–œå¥½æ¥è¿›è¡Œé€‰æ‹©ï¼Œå¦‚ &lt;a class="link" href="https://stoplight.io/studio" target="_blank" rel="noopener"
>Stoplight Studio&lt;/a>ã€&lt;a class="link" href="https://apigit.com/zh-CN" target="_blank" rel="noopener"
>APIGit&lt;/a> ç­‰ã€‚&lt;/p>
&lt;h3 id="mock-æœåŠ¡å™¨">
&lt;a href="#mock-%e6%9c%8d%e5%8a%a1%e5%99%a8" class="header-anchor">#&lt;/a>
Mock æœåŠ¡å™¨
&lt;/h3>&lt;p>å½“æˆ‘ä»¬ä½¿ç”¨ OpenAPI è§„èŒƒæ¥è¿›è¡Œæ¥å£å¼€å‘æ—¶ï¼Œå¾€å¾€é‡‡ç”¨æ–‡æ¡£å…ˆè¡Œçš„ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯å‰åç«¯åœ¨å¼€å‘ä»£ç å‰ï¼Œå…ˆå®šä¹‰å¥½æ¥å£æ–‡æ¡£ï¼Œå†è¿›è¡Œä»£ç çš„ç¼–å†™ã€‚æ­¤æ—¶å‰ç«¯å¦‚æœæƒ³æµ‹è¯•æ¥å£å¯ç”¨æ€§ï¼Œè€Œåç«¯ä»£ç è¿˜æ²¡æœ‰ç¼–å†™å®Œæˆï¼Œ&lt;a class="link" href="https://openapi.tools/#mock" target="_blank" rel="noopener"
>Mock æœåŠ¡å™¨&lt;/a>å°±æ´¾ä¸Šç”¨åœºäº†ã€‚Mock æœåŠ¡å™¨èƒ½å¤Ÿæ ¹æ®æ‰€æä¾›çš„ OpenAPI æ¥å£æ–‡æ¡£ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ¨¡æ‹Ÿçš„ Web Serverã€‚ä½¿ç”¨ Mock æœåŠ¡å™¨èƒ½å¤Ÿè½»æ¾æ¨¡æ‹ŸçœŸå®çš„åç«¯æ¥å£ï¼Œæ–¹ä¾¿å‰ç«¯åŒå­¦è¿›è¡Œæ¥å£è°ƒè¯•ã€‚&lt;/p>
&lt;p>ä¸Šé¢æåˆ°çš„ &lt;a class="link" href="https://apigit.com/zh-CN/why-apigit/mock-server" target="_blank" rel="noopener"
>APIGit&lt;/a> ä¹ŸåŒæ—¶å…·å¤‡æ­¤åŠŸèƒ½ã€‚&lt;/p>
&lt;h3 id="ä»£ç ç”Ÿæˆå™¨">
&lt;a href="#%e4%bb%a3%e7%a0%81%e7%94%9f%e6%88%90%e5%99%a8" class="header-anchor">#&lt;/a>
ä»£ç ç”Ÿæˆå™¨
&lt;/h3>&lt;p>è¿˜æœ‰ä¸€ç§å¾ˆå®ç”¨çš„å·¥å…·æ˜¯ä»£ç ç”Ÿæˆå™¨ï¼Œä»£ç ç”Ÿæˆå™¨æœ‰ä¸¤ç§ç±»å‹ï¼šä¸€ç§æ˜¯ä»ä»£ç /æ³¨é‡Šç”Ÿæˆ OpenAPI æ–‡æ¡£ï¼Œå¦ä¸€ç§æ˜¯ä» OpenAPI æ–‡æ¡£ç”Ÿæˆä»£ç ã€‚&lt;/p>
&lt;p>è¿™ç±»å·¥å…·åŒæ ·éå¸¸å¤šï¼Œä¸”æ›´ä¸ºå®ç”¨ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä»½å†™å¥½äº†çš„ Go Web Server ä»£ç ï¼Œæƒ³è¦è‡ªåŠ¨ç”Ÿæˆä¸€ä»½ OpenAPI æ–‡æ¡£ï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;a class="link" href="https://github.com/go-swagger/go-swagger" target="_blank" rel="noopener"
>go-swagger&lt;/a> è¿™ä¸ªå·¥å…·æ¥ç”Ÿæˆä¸€ä»½ &lt;code>openapi.yaml&lt;/code> æ–‡æ¡£ã€‚&lt;/p>
&lt;p>è€Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä»½ &lt;code>openapi.yaml&lt;/code> æ–‡æ¡£ï¼Œå°±å¯ä»¥åˆ©ç”¨ &lt;code>go-swagger&lt;/code> ç”Ÿæˆä¸€ä»½ Go SDK ä»£ç ï¼Œç”šè‡³å®ƒè¿˜èƒ½æ ¹æ®è¿™ä»½ OpenAPI æ–‡æ¡£ç”Ÿæˆ Go Web Server çš„æ¡†æ¶ä»£ç ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å¯¹åº”çš„æ¥å£é‡Œé¢å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å³å¯ã€‚&lt;/p>
&lt;p>ä¸ä»… Go è¯­è¨€æœ‰è¿™æ ·çš„å·¥å…·ï¼Œåƒ &lt;a class="link" href="https://swagger.io/tools/swagger-codegen/" target="_blank" rel="noopener"
>Swagger Codegen&lt;/a> å’Œ &lt;a class="link" href="https://github.com/openapitools/openapi-generator" target="_blank" rel="noopener"
>OpenAPI Generator&lt;/a> è¿™ç±»å·¥å…·æ›´æ˜¯æ”¯æŒå‡ ä¹æ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€ã€‚&lt;/p>
&lt;p>ä»£ç ç”Ÿæˆå™¨æ˜¯å¼€å‘è€…åº”è¯¥ç€é‡å…³æ³¨çš„å·¥å…·ï¼Œä½¿ç”¨è¿™äº›å·¥å…·å¯ä»¥å‡å°‘å¤§é‡æ‰‹åŠ¨ä¸”é‡å¤çš„å·¥ä½œï¼Œä½ å¯ä»¥&lt;a class="link" href="https://openapi.tools/#sdk" target="_blank" rel="noopener"
>åœ¨æ­¤&lt;/a>çœ‹ä¸‹æœ‰æ²¡æœ‰æ„Ÿå…´è¶£çš„é¡¹ç›®ä¾›ä½ ä½¿ç”¨ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="swagger">
&lt;a href="#swagger" class="header-anchor">#&lt;/a>
&lt;strong>Swagger&lt;/strong>
&lt;/h2>&lt;h3 id="ä»€ä¹ˆæ˜¯-swagger">
&lt;a href="#%e4%bb%80%e4%b9%88%e6%98%af-swagger" class="header-anchor">#&lt;/a>
ä»€ä¹ˆæ˜¯ Swagger
&lt;/h3>&lt;p>Swagger æ˜¯ä¸€å¥—å›´ç»• OpenAPI è§„èŒƒæ‰€æ„å»ºçš„å¼€æºå·¥å…·é›†ï¼Œæä¾›äº†å¼ºå¤§å’Œæ˜“äºä½¿ç”¨çš„å·¥å…·æ¥å……åˆ†åˆ©ç”¨ OpenAPI è§„èŒƒï¼ŒSwagger å·¥å…·é›†ç”±æœ€åˆçš„ Swagger è§„èŒƒèƒŒåçš„å›¢é˜Ÿæ‰€å¼€å‘ã€‚&lt;/p>
&lt;p>Swagger å·¥å…·é›†æä¾›äº† API è®¾è®¡ã€å¼€å‘ã€æµ‹è¯•ã€æ²»ç†å’Œç›‘æ§ç­‰èƒ½åŠ›ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„å·¥å…·åŒ…å«å¦‚ä¸‹ä¸‰ä¸ªï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://swagger.io/tools/swagger-codegen/" target="_blank" rel="noopener"
>Swagger Codegen&lt;/a>ï¼šæ ¹æ® OpenAPI è§„èŒƒå®šä¹‰ç”ŸæˆæœåŠ¡å™¨å­˜æ ¹å’Œå®¢æˆ·ç«¯ SDKã€‚&lt;/li>
&lt;li>&lt;a class="link" href="https://swagger.io/tools/swagger-editor/" target="_blank" rel="noopener"
>Swagger Editor&lt;/a>ï¼šåŸºäºæµè§ˆå™¨çš„åœ¨çº¿ OpenAPI è§„èŒƒç¼–è¾‘å™¨ã€‚&lt;/li>
&lt;li>&lt;a class="link" href="https://swagger.io/tools/swagger-ui/" target="_blank" rel="noopener"
>Swagger UI&lt;/a>ï¼šä»¥ UI ç•Œé¢çš„æ–¹å¼å¯è§†åŒ–å±•ç¤º OpenAPI è§„èŒƒå®šä¹‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­è¿›è¡Œäº¤äº’ã€‚&lt;/li>
&lt;/ul>
&lt;p>å½“ç„¶ Swagger ä¹Ÿæœ‰ä¸ºä¼ä¸šç”¨æˆ·æä¾›çš„æ”¶è´¹ç‰ˆæœ¬å·¥å…·ï¼Œå¦‚ &lt;a class="link" href="https://swagger.io/tools/swaggerhub/enterprise/" target="_blank" rel="noopener"
>SwaggerHub Enterprise&lt;/a>ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œäº†è§£ã€‚&lt;/p>
&lt;h3 id="swagger-å’Œ-openapi-çš„å…³ç³»">
&lt;a href="#swagger-%e5%92%8c-openapi-%e7%9a%84%e5%85%b3%e7%b3%bb" class="header-anchor">#&lt;/a>
Swagger å’Œ OpenAPI çš„å…³ç³»
&lt;/h3>&lt;p>è®²åˆ°äº† Swaggerï¼Œå°±ä¸å¾—ä¸æåŠ Swagger å’Œ OpenAPI çš„è”ç³»ä¸åŒºåˆ«ï¼Œå› ä¸ºè¿™äºŒè€…ç»å¸¸åœ¨ä¸€èµ·å‡ºç°ã€‚&lt;/p>
&lt;p>å‰æ–‡ä¹Ÿè¯´è¿‡ OpenAPI è§„èŒƒæ˜¯åŸºäº Swagger è§„èŒƒæ¼”å˜è€Œæ¥çš„ï¼Œä½†å…¶å®äºŒè€…å¹¶ä¸ç›¸ç­‰ã€‚&lt;/p>
&lt;p>åœ¨ OpenAPI å°šæœªå‡ºç°ä¹‹å‰ï¼ŒSwagger ä»£è¡¨äº† Swagger è§„èŒƒä»¥åŠä¸€ç³»åˆ—å›´ç»• Swagger è§„èŒƒçš„å¼€æºå·¥å…·é›†ã€‚Swagger è§„èŒƒæœ€åä¸€ä¸ªç‰ˆæœ¬æ˜¯ &lt;a class="link" href="https://swagger.io/specification/v2/" target="_blank" rel="noopener"
>2.0&lt;/a>ï¼Œä¹‹åå°±æèµ ç»™äº† OAI å¹¶è¢«é‡æ–°å‘½åä¸º OpenAPI è§„èŒƒï¼Œæ‰€ä»¥ OpenAPI è§„èŒƒç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯ 2.0ï¼Œä¹Ÿå°±æ˜¯ Swagger è§„èŒƒ 2.0ï¼Œè€Œç”± OAI è¿™ä¸ªç»„ç»‡å‘å¸ƒçš„ç¬¬ä¸€ä¸ª OpenAPI è§„èŒƒæ­£å¼ç‰ˆæœ¬æ˜¯ &lt;a class="link" href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.0.md" target="_blank" rel="noopener"
>3.0.0&lt;/a>ã€‚&lt;/p>
&lt;p>ç°åœ¨ï¼ŒSwagger è§„èŒƒå·²è¢« OpenAPI è§„èŒƒå®Œå…¨æ¥ç®¡å¹¶å–ä»£ã€‚OpenAPI ä»£è¡¨äº† OpenAPI è§„èŒƒä»¥åŠä¸€ç³»åˆ—ç”Ÿæ€ï¼Œè€Œ Swagger åˆ™æ˜¯è¿™ä¸ªç”Ÿæ€ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ Swagger å›¢é˜Ÿå›´ç»• OpenAPI è§„èŒƒæ‰€å¼€å‘çš„ä¸€ç³»åˆ—å·¥å…·é›†ã€‚&lt;/p>
&lt;p>Swagger æ˜¯ OpenAPI ç”Ÿæ€ä¸­éå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå› ä¸ºå®ƒç»™å‡ºäº†ä¸€æ•´å¥—æ–¹æ¡ˆï¼Œä¸”éå¸¸æµè¡Œã€‚&lt;/p>
&lt;p>Swagger å’Œ OpenAPI äºŒè€… LOGO å¯¹æ¯”å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/swagger-openapi.png"
width="1030"
height="318"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/swagger-openapi_hu9cf2fd8781eb4410d052f1a4d31c4f66_31928_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/swagger-openapi_hu9cf2fd8781eb4410d052f1a4d31c4f66_31928_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Swagger-OpenAPI-LOGO"
class="gallery-image"
data-flex-grow="323"
data-flex-basis="777px"
>&lt;/p>
&lt;p>å¸Œæœ›ä½ ä¸‹æ¬¡å†è§åˆ°è¿™ä¸¤ä¸ª LOGO æ—¶èƒ½æ¸…æ™°åˆ†è¾¨å‡ºäºŒè€…ï¼Œè€Œä¸è¢«æ··æ·†ã€‚&lt;/p>
&lt;h2 id="ä»¥-go-è¯­è¨€ä¸ºä¾‹è®²è§£-openapi-åœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨">
&lt;a href="#%e4%bb%a5-go-%e8%af%ad%e8%a8%80%e4%b8%ba%e4%be%8b%e8%ae%b2%e8%a7%a3-openapi-%e5%9c%a8%e5%ae%9e%e9%99%85%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ba%94%e7%94%a8" class="header-anchor">#&lt;/a>
ä»¥ Go è¯­è¨€ä¸ºä¾‹è®²è§£ OpenAPI åœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨
&lt;/h2>&lt;p>å‰æ–‡ä»‹ç»äº†ç¼–å†™ OpenAPI æ–‡æ¡£çš„ä¸¤ç§ç¼–è¾‘å™¨ï¼šæ–‡æœ¬ç¼–è¾‘å™¨ä»¥åŠå›¾å½¢ç¼–è¾‘å™¨ã€‚åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œåç«¯å¯ä»¥å…ˆä½¿ç”¨è¿™ç±»ç¼–è¾‘å™¨å¦‚ Swagger Editor ç¼–å†™å‡º OpenAPI æ–‡æ¡£ï¼Œç„¶åå°†è¿™ä»½æ–‡æ¡£äº¤ç»™å‰ç«¯ï¼Œå‰ç«¯æ‹¿åˆ° OpenAPI æ–‡æ¡£åå°†å…¶å¯¼å…¥åˆ° Swagger Editorï¼Œå°±å¯ä»¥åœ¨çº¿é˜…è¯»æ¥å£æ–‡æ¡£å¹¶ä¸ä¹‹è¿›è¡Œäº¤äº’ï¼Œä¹‹åå‰åç«¯å°±å¯ä»¥å¹¶è¡Œå¼€å‘äº†ã€‚&lt;/p>
&lt;p>è¿™æ ·çš„å·¥ä½œæµçœ‹èµ·æ¥ä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¸è¿‡ç¼–å†™ OpenAPI æ–‡æ¡£æ¯•ç«Ÿæ˜¯ä¸ªè‹¦åŠ›æ´»ï¼Œä¸ä»…æœ‰å¤§é‡çš„é‡å¤å·¥ä½œï¼Œè¿˜è¦æ±‚å¼€å‘è€…ç†Ÿç»ƒæŒæ¡ OpenAPI è§„èŒƒè¯­æ³•ã€‚è¿™å¯¹äºâ€œçˆ±å·æ‡’â€çš„å¼€å‘è€…æ˜¾ç„¶æ˜¯æ— æ³•æ¥å—çš„ï¼Œå°±åƒæ®µå­é‡Œè¯´çš„ï¼Œç¨‹åºå‘˜æœ€è®¨åŒä¸¤ä»¶äº‹ï¼š1. å†™æ–‡æ¡£ï¼Œ2. åˆ«äººä¸å†™æ–‡æ¡£ã€‚è€Œè¿™ä¸ªé—®é¢˜çš„è§£æ³•ï¼Œå½“ç„¶å°±æ˜¯å‰æ–‡æåˆ°çš„ä»£ç ç”Ÿæˆå™¨ã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨-swag-ç”Ÿæˆ-swagger-æ–‡æ¡£">
&lt;a href="#%e4%bd%bf%e7%94%a8-swag-%e7%94%9f%e6%88%90-swagger-%e6%96%87%e6%a1%a3" class="header-anchor">#&lt;/a>
ä½¿ç”¨ Swag ç”Ÿæˆ Swagger æ–‡æ¡£
&lt;/h3>&lt;p>åœ¨ Go è¯­è¨€ç”Ÿæ€é‡Œï¼Œç›®å‰æœ‰ä¸¤ä¸ªæ¯”è¾ƒæµè¡Œçš„å¼€æºå·¥å…·å¯ä»¥ç”Ÿæˆ Swagger æ–‡æ¡£ï¼Œåˆ†åˆ«æ˜¯ &lt;a class="link" href="https://github.com/go-swagger/go-swagger" target="_blank" rel="noopener"
>go-swagger&lt;/a> å’Œ &lt;a class="link" href="https://github.com/swaggo/swag" target="_blank" rel="noopener"
>swag&lt;/a>ã€‚å®ƒä»¬éƒ½èƒ½æ ¹æ®ä»£ç ä¸­çš„æ³¨é‡Šç”Ÿæˆ Swagger æ–‡æ¡£ï¼Œgo-swagger ä½œä¸ºä¸€æ¬¾ OpenAPI.Tools æ¨èçš„å·¥å…·ï¼Œå…¶åŠŸèƒ½æ¯” swag æ›´åŠ å¼ºå¤§ä¸” Github Star æ•°é‡ä¹Ÿæ›´é«˜ã€‚&lt;/p>
&lt;p>ä¸è¿‡æœ¬æ–‡å°†é€‰æ‹© swag æ¥è¿›è¡Œä»‹ç»ï¼Œä¸€æ˜¯å› ä¸º swag æ¯”è¾ƒè½»é‡ï¼Œæ›´é€‚åˆå¾®æœåŠ¡å¼€å‘ï¼›äºŒæ˜¯å¦‚æœä½¿ç”¨ swagï¼Œé‚£ä¹ˆæ³¨é‡Šä»£ç ä¼šç¦»æ¥å£ä»£ç æ›´è¿‘ï¼Œå‡çº§æ—¶æ–¹ä¾¿ç»´æŠ¤ã€‚å¦‚æœä½ æœ‰æ›´é«˜çº§çš„éœ€æ±‚ï¼Œå¦‚æ ¹æ® Swagger æ–‡æ¡£ç”Ÿæˆå®¢æˆ·ç«¯ SDKï¼ŒæœåŠ¡ç«¯å­˜æ ¹ç­‰ï¼Œåˆ™æ¨èä½¿ç”¨ go-swaggerã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šåœ¨è¿™é‡Œæˆ‘ä¸€ç›´æåˆ°çš„éƒ½æ˜¯ç”Ÿæˆ Swagger æ–‡æ¡£ï¼Œè€Œæ²¡æœ‰è¯´æ˜¯ OpenAPI æ–‡æ¡£ã€‚å› ä¸ºæ— è®ºæ˜¯ swag è¿˜æ˜¯åŠŸèƒ½æ›´å¼ºå¤§çš„ go-swaggerï¼Œå®ƒä»¬ç›®å‰éƒ½ä»…æ”¯æŒç”Ÿæˆ OpenAPI 2.0 æ–‡æ¡£ï¼Œå¹¶ä¸æ”¯æŒç”Ÿæˆ OpenAPI 3.0+ æ–‡æ¡£ï¼Œè€Œ OpenAPI 2.0 ç‰ˆæœ¬æˆ‘ä»¬æ›´ä¹ æƒ¯ç§°å…¶ä¸º Swagger æ–‡æ¡£ã€‚&lt;/p>
&lt;/blockquote>
&lt;h4 id="å®‰è£…-swag">
&lt;a href="#%e5%ae%89%e8%a3%85-swag" class="header-anchor">#&lt;/a>
å®‰è£… Swag
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go install github.com/swaggo/swag/cmd/swag@latest &lt;span class="c1"># å®‰è£…&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ swag --version &lt;span class="c1"># æŸ¥çœ‹ç‰ˆæœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swag version v1.8.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="swag-å‘½ä»¤è¡Œå·¥å…·">
&lt;a href="#swag-%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%b7%a5%e5%85%b7" class="header-anchor">#&lt;/a>
Swag å‘½ä»¤è¡Œå·¥å…·
&lt;/h4>&lt;p>swag éå¸¸ç®€æ´ï¼Œä»…æä¾›äº†ä¸¤ä¸ªä¸»è¦å‘½ä»¤ &lt;code>init&lt;/code> å’Œ &lt;code>fmt&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ swag -h &lt;span class="c1"># æŸ¥çœ‹å¸®åŠ©&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> swag - Automatically generate RESTful API documentation with Swagger 2.0 &lt;span class="k">for&lt;/span> Go.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USAGE:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> swag &lt;span class="o">[&lt;/span>global options&lt;span class="o">]&lt;/span> &lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> options&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>arguments...&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">VERSION:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> v1.8.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">COMMANDS:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> init, i Create docs.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt, f format swag comments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> help, h Shows a list of commands or &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> one &lt;span class="nb">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GLOBAL OPTIONS:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --help, -h show &lt;span class="nb">help&lt;/span> &lt;span class="o">(&lt;/span>default: &lt;span class="nb">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --version, -v print the version &lt;span class="o">(&lt;/span>default: &lt;span class="nb">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>åœ¨åŒ…å« &lt;code>main.go&lt;/code> æ–‡ä»¶ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰çš„é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ &lt;code>swag init&lt;/code> å‘½ä»¤ï¼Œå°†ä¼šè§£æ swag æ³¨é‡Šå¹¶ç”Ÿæˆ &lt;code>docs/&lt;/code> ç›®å½•ä»¥åŠ &lt;code>/docs/docs.go&lt;/code>ã€&lt;code>docs/swagger.json&lt;/code>ã€&lt;code>docs/swagger.yaml&lt;/code> ä¸‰ä¸ªæ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ swag init -h &lt;span class="c1"># æŸ¥çœ‹ init å­å‘½ä»¤ä½¿ç”¨æ–¹æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> swag init - Create docs.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USAGE:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> swag init &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> options&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>arguments...&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OPTIONS:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --quiet, -q ä¸åœ¨æ§åˆ¶å°è¾“å‡ºæ—¥å¿— &lt;span class="o">(&lt;/span>default: &lt;span class="nb">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --generalInfo value, -g value API é€šç”¨ä¿¡æ¯æ‰€åœ¨çš„ Go æºæ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„åˆ™åŸºäº API è§£æç›®å½• &lt;span class="o">(&lt;/span>default: &lt;span class="s2">&amp;#34;main.go&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --dir value, -d value API è§£æç›®å½•ï¼Œå¤šä¸ªç›®å½•å¯ç”¨é€—å·åˆ†éš” &lt;span class="o">(&lt;/span>default: &lt;span class="s2">&amp;#34;./&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --exclude value è§£ææ‰«ææ—¶æ’é™¤çš„ç›®å½•ï¼Œå¤šä¸ªç›®å½•å¯ç”¨é€—å·åˆ†éš”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --propertyStrategy value, -p value ç»“æ„ä½“å­—æ®µå‘½åè§„åˆ™ï¼Œä¸‰ç§ï¼šsnake_caseï¼ŒcamelCaseï¼ŒPascalCase &lt;span class="o">(&lt;/span>default: &lt;span class="s2">&amp;#34;camelCase&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --output value, -o value æ‰€æœ‰ç”Ÿæˆæ–‡ä»¶çš„è¾“å‡ºç›®å½•ï¼ˆswagger.json, swagger.yaml and docs.goï¼‰&lt;span class="o">(&lt;/span>default:&lt;span class="s2">&amp;#34;./docs&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --outputTypes value, --ot value ç”Ÿæˆæ–‡ä»¶çš„è¾“å‡ºç±»å‹ï¼ˆdocs.go, swagger.json, swagger.yamlï¼‰ä¸‰ç§ï¼šgo,json,yaml &lt;span class="o">(&lt;/span>default: &lt;span class="s2">&amp;#34;go,json,yaml&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --parseDependency, --pd è§£æä¾èµ–ç›®å½•ä¸­çš„ Go æ–‡ä»¶ &lt;span class="o">(&lt;/span>default: &lt;span class="nb">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --markdownFiles value, --md value æŒ‡å®š API çš„æè¿°ä¿¡æ¯æ‰€ä½¿ç”¨çš„ Markdown æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œé»˜è®¤ç¦ç”¨
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --parseInternal è§£æ internal åŒ…ä¸­çš„ Go æ–‡ä»¶ &lt;span class="o">(&lt;/span>default: &lt;span class="nb">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --generatedTime è¾“å‡ºæ—¶é—´æˆ³åˆ°è¾“å‡ºæ–‡ä»¶ &lt;span class="sb">`&lt;/span>docs.go&lt;span class="sb">`&lt;/span> é¡¶éƒ¨ &lt;span class="o">(&lt;/span>default: &lt;span class="nb">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --parseDepth value ä¾èµ–é¡¹è§£ææ·±åº¦ &lt;span class="o">(&lt;/span>default: 100&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --requiredByDefault é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºæ‰€æœ‰å­—æ®µè®¾ç½® &lt;span class="sb">`&lt;/span>required&lt;span class="sb">`&lt;/span> éªŒè¯ &lt;span class="o">(&lt;/span>default: &lt;span class="nb">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --instanceName value è®¾ç½®æ–‡æ¡£å®ä¾‹å &lt;span class="o">(&lt;/span>default: &lt;span class="s2">&amp;#34;swagger&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --parseGoList é€šè¿‡ &lt;span class="s1">&amp;#39;go list&amp;#39;&lt;/span> è§£æä¾èµ–å…³ç³» &lt;span class="o">(&lt;/span>default: &lt;span class="nb">true&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --tags value, -t value é€—å·åˆ†éš”çš„æ ‡ç­¾åˆ—è¡¨ï¼Œç”¨äºè¿‡æ»¤æŒ‡å®šæ ‡ç­¾ç”Ÿæˆ API æ–‡æ¡£ã€‚ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¦‚æœæ ‡ç­¾å‰ç¼€æ˜¯ &lt;span class="s1">&amp;#39;!&amp;#39;&lt;/span> å­—ç¬¦ï¼Œé‚£ä¹ˆå¸¦æœ‰è¯¥æ ‡è®°çš„ API å°†è¢«æ’é™¤
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --help, -h æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ &lt;span class="o">(&lt;/span>default: &lt;span class="nb">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šä»¥ä¸Š &lt;code>swag init&lt;/code> å‘½ä»¤å¯é€‰å‚æ•°ä»‹ç»ç•¥æœ‰åˆ å‡ï¼Œåªåˆ—å‡ºäº†å¸¸ç”¨é€‰é¡¹ï¼Œæ›´å®Œæ•´çš„æ–‡æ¡£è¯·å‚è€ƒ&lt;a class="link" href="https://github.com/swaggo/swag/blob/master/README.md#swag-cli" target="_blank" rel="noopener"
>å®˜æ–¹ä»“åº“&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>swag fmt&lt;/code> å‘½ä»¤å¯ä»¥æ ¼å¼åŒ– swag æ³¨é‡Šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ swag fmt -h &lt;span class="c1"># æŸ¥çœ‹ fmt å­å‘½ä»¤ä½¿ç”¨æ–¹æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> swag fmt - format swag comments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USAGE:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> swag fmt &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> options&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>arguments...&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OPTIONS:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --dir value, -d value API è§£æç›®å½•ï¼Œå¤šä¸ªç›®å½•å¯ç”¨é€—å·åˆ†éš” &lt;span class="o">(&lt;/span>default: &lt;span class="s2">&amp;#34;./&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --exclude value è§£ææ‰«ææ—¶æ’é™¤çš„ç›®å½•ï¼Œå¤šä¸ªç›®å½•å¯ç”¨é€—å·åˆ†éš”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --generalInfo value, -g value API é€šç”¨ä¿¡æ¯æ‰€åœ¨çš„ Go æºæ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„åˆ™åŸºäº API è§£æç›®å½• &lt;span class="o">(&lt;/span>default: &lt;span class="s2">&amp;#34;main.go&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --help, -h æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ &lt;span class="o">(&lt;/span>default: &lt;span class="nb">false&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="åœ¨-gin-ä¸­ä½¿ç”¨-swag">
&lt;a href="#%e5%9c%a8-gin-%e4%b8%ad%e4%bd%bf%e7%94%a8-swag" class="header-anchor">#&lt;/a>
åœ¨ Gin ä¸­ä½¿ç”¨ Swag
&lt;/h4>&lt;p>åœ¨ &lt;a class="link" href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener"
>gin&lt;/a> æ¡†æ¶èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ swagï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å‡†å¤‡é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.sum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ main.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åˆå§‹åŒ–é¡¹ç›®&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go mod init gin-swag
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ç¼–å†™ &lt;code>main.go&lt;/code> ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Helloworld godoc
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Summary è¯¥æ“ä½œçš„ç®€çŸ­æ‘˜è¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Description æ“ä½œè¡Œä¸ºçš„è¯¦ç»†è¯´æ˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Tags example
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Accept json
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Produce json
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Success 200 {string} string &amp;#34;Hello World!&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Router /example/helloworld [get]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">Helloworld&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">g&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Hello World!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @title Swagger Example API
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @version 1.0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @schemes http
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @host localhost:8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @BasePath /api/v1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @tag.name example
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @tag.description ç¤ºä¾‹æ¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/api/v1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/example&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/helloworld&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Helloworld&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»£ç ä¸­çš„æ³¨é‡Šéƒ¨åˆ†å³ä¸º swag çš„æ³¨é‡Šè¯­æ³•ï¼Œç¨åé€šè¿‡è¿™äº›æ³¨é‡Šç”Ÿæˆ Swagger æ–‡æ¡£ã€‚&lt;/p>
&lt;p>å…¶ä¸­é€šç”¨ API ä¿¡æ¯éƒ¨åˆ†æ³¨é‡Šå«ä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ³¨é‡Š&lt;/th>
&lt;th>è¯´æ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>@title&lt;/td>
&lt;td>å¿…å¡«ï¼Œåº”ç”¨ç¨‹åºçš„åç§°ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@version&lt;/td>
&lt;td>å¿…å¡«ï¼Œæä¾›åº”ç”¨ç¨‹åº API çš„ç‰ˆæœ¬ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@schemes&lt;/td>
&lt;td>ç”¨ç©ºæ ¼åˆ†éš”çš„è¯·æ±‚ä¼ è¾“åè®®ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@host&lt;/td>
&lt;td>è¿è¡Œ API çš„ä¸»æœºï¼ˆä¸»æœºåæˆ– IP åœ°å€ï¼‰ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@BasePath&lt;/td>
&lt;td>è¿è¡Œ API çš„åŸºæœ¬è·¯å¾„ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@tag.name&lt;/td>
&lt;td>æ ‡ç­¾çš„åç§°ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@tag.description&lt;/td>
&lt;td>æ ‡ç­¾çš„æè¿°ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>è¿˜æœ‰ä¸€éƒ¨åˆ†æ³¨é‡Šä»£è¡¨äº† API æ“ä½œï¼Œå…¶å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ³¨é‡Š&lt;/th>
&lt;th>è¯´æ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>@Summary&lt;/td>
&lt;td>è¯¥æ“ä½œçš„ç®€çŸ­æ‘˜è¦ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@Description&lt;/td>
&lt;td>æ“ä½œè¡Œä¸ºçš„è¯¦ç»†è¯´æ˜ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@Tags&lt;/td>
&lt;td>è¯¥ API æ“ä½œçš„æ ‡ç­¾åˆ—è¡¨ï¼Œå¤šä¸ªæ ‡ç­¾ä»¥é€—å·åˆ†éš”ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@Accept&lt;/td>
&lt;td>API å¯ä»¥æ¥æ”¶çš„å‚æ•° MIME ç±»å‹åˆ—è¡¨ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@Produce&lt;/td>
&lt;td>API å¯ä»¥ç”Ÿæˆçš„å‚æ•° MIME ç±»å‹åˆ—è¡¨ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@Success&lt;/td>
&lt;td>æˆåŠŸå“åº”ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>@Router&lt;/td>
&lt;td>è·¯ç”±è·¯å¾„å®šä¹‰ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä»¥ä¸Šè¿™äº›æ³¨é‡Šæœ€ç»ˆéƒ½ä¼šå¯¹åº”åˆ° OpenAPI 2.0 è§„èŒƒçš„æŸä¸ªå­—æ®µä¸Šã€‚æ›´å¤šè¯´æ˜è¯·å‚è€ƒ&lt;a class="link" href="https://github.com/swaggo/swag#declarative-comments-format" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡æ¡£&lt;/a>ï¼Œå¹¶ä¸”å®˜æ–¹ä¹Ÿæä¾›äº†&lt;a class="link" href="https://github.com/swaggo/swag/blob/master/README_zh-CN.md#%e5%a3%b0%e6%98%8e%e5%bc%8f%e6%b3%a8%e9%87%8a%e6%a0%bc%e5%bc%8f" target="_blank" rel="noopener"
>ä¸­æ–‡æ–‡æ¡£&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½¿ç”¨ swag æ ¹æ®æ³¨é‡Šç”Ÿæˆ Swagger æ–‡æ¡£ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼ˆ&lt;code>.&lt;/code>ï¼‰æ‰§è¡Œ &lt;code>swag init&lt;/code>ï¼Œå°†å¾—åˆ°æ–°çš„ç›®å½•ç»“æ„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ docs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ docs.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ swagger.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ swagger.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.sum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ main.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç° &lt;code>swag init&lt;/code> ç”Ÿæˆçš„ä¸‰ä¸ªæ–‡ä»¶ &lt;code>docs.go&lt;/code>ã€&lt;code>swagger.json&lt;/code>ã€&lt;code>swagger.yaml&lt;/code> é»˜è®¤éƒ½åœ¨ &lt;code>docs/&lt;/code> ç›®å½•ä¸‹ã€‚&lt;/p>
&lt;p>å…¶ä¸­ &lt;code>swagger.json&lt;/code>ã€&lt;code>swagger.yaml&lt;/code> æ­£æ˜¯ç¬¦åˆ OpenAPI 2.0 è§„èŒƒçš„ JSON å’Œ YAML æ¥å£æ–‡æ¡£ï¼Œä¾‹å¦‚ &lt;code>swagger.yaml&lt;/code> å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">basePath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/api/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">localhost:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">info&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">contact&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Swagger Example API&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;1.0&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">paths&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">/example/helloworld&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">get&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">consumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">application/json&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">æ“ä½œè¡Œä¸ºçš„è¯¦ç»†è¯´æ˜&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">produces&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">application/json&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">responses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;200&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Hello World!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">schema&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">string&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">summary&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">è¯¥æ“ä½œçš„ç®€çŸ­æ‘˜è¦&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">example&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">schemes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">swagger&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2.0&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ç¤ºä¾‹æ¥å£&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">example&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹æ¯”ä¸Šé¢ä»£ç ä¸­çš„æ³¨é‡Šï¼Œå¾ˆå®¹æ˜“å°†å…¶å¯¹åº”èµ·æ¥ï¼Œç›¸æ¯”äºç›´æ¥ç¼–å†™ YAML æ ¼å¼æ–‡æ¡£ï¼Œæ˜¾ç„¶åœ¨ä»£ç ä¸­ç¼–å†™æ³¨é‡Šæ›´ä¸ºç®€å•ã€‚&lt;/p>
&lt;p>å°†å…¶å¤åˆ¶åˆ° Swagger Editor ç¼–è¾‘å™¨ä¸­å³å¯æŸ¥çœ‹ Swagger UI é¢„è§ˆã€‚æˆ–è€…åœ¨GoLand IDEä¸­ç›´æ¥æ‰“å¼€ï¼Œå³ä¾§ä¼šå‡ºç° Swagger UI é¢„è§ˆã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swag-example-swagger-editor.png"
width="2940"
height="1838"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swag-example-swagger-editor_hu50c8be478a0cc503116512d3818232f0_349132_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swag-example-swagger-editor_hu50c8be478a0cc503116512d3818232f0_349132_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Swagger UI"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>â€‹ &lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/image-20240522235024654.png"
width="1920"
height="1079"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/image-20240522235024654_hu48363c004fdfc3e553ff145f99c5c8b9_187189_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/image-20240522235024654_hu48363c004fdfc3e553ff145f99c5c8b9_187189_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Swagger UI"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="427px"
>&lt;/p>
&lt;h4 id="å°†-gin-ä½œä¸º-swagger-ui-æœåŠ¡å™¨">
&lt;a href="#%e5%b0%86-gin-%e4%bd%9c%e4%b8%ba-swagger-ui-%e6%9c%8d%e5%8a%a1%e5%99%a8" class="header-anchor">#&lt;/a>
å°† Gin ä½œä¸º Swagger UI æœåŠ¡å™¨
&lt;/h4>&lt;p>ä¸Šé¢æˆ‘ä»¬é€šè¿‡ swag ç”Ÿæˆäº† Swagger æ–‡æ¡£ï¼Œå¹¶æ‰‹åŠ¨å°†ç”Ÿæˆçš„ &lt;code>swagger.yaml&lt;/code> å¤åˆ¶åˆ° Swagger Editor ç¼–è¾‘å™¨è¿›è¡Œ Swagger UI é¢„è§ˆã€‚ä¸è¿‡è¿™ä¹ˆåšæ˜¾ç„¶æœ‰ç‚¹éº»çƒ¦ï¼Œå¥½åœ¨ swag ä½œè€…ä¹Ÿè€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥ä»–åˆæä¾›äº†å¦å¤–ä¸¤ä¸ªé¡¹ç›® &lt;a class="link" href="https://github.com/swaggo/gin-swagger" target="_blank" rel="noopener"
>gin-swagger&lt;/a> å’Œ &lt;a class="link" href="https://github.com/swaggo/files" target="_blank" rel="noopener"
>files&lt;/a>ï¼Œèƒ½å¤Ÿç›´æ¥å°† gin ä½œä¸º Swagger UI æœåŠ¡å™¨ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½å°† &lt;code>swagger.yaml&lt;/code> æ‰‹åŠ¨å¤åˆ¶åˆ° Swagger Editor ç¼–è¾‘å™¨æ‰èƒ½å®ç° Swagger UI é¢„è§ˆã€‚&lt;/p>
&lt;p>ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ä¸‹è½½ gin-swaggerã€files:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/swaggo/swag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go get -u github.com/swaggo/gin-swagger
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go get -u github.com/swaggo/files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åœ¨ä»£ç ä¸­å¯¼å…¥ gin-swaggerã€files(å¯ä»¥ç›´æ¥æ³¨å†Œswaggeræ–‡æ¡£è·¯ç”±ï¼ŒIDEä¼šè‡ªåŠ¨å¯¼å…¥ï¼‰:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nx">ginSwagger&lt;/span> &lt;span class="s">&amp;#34;github.com/swaggo/gin-swagger&amp;#34;&lt;/span> &lt;span class="c1">// gin-swagger middleware
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kn">import&lt;/span> &lt;span class="nx">swaggerFiles&lt;/span> &lt;span class="s">&amp;#34;github.com/swaggo/files&amp;#34;&lt;/span> &lt;span class="c1">// swagger embed files
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æ³¨æ„ï¼šåœ¨æ³¨å†Œè·¯ç”±æ—¶ï¼Œè¿˜éœ€è¦ç©ºå¯¼å…¥docsã€‚&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ³¨å†Œ Swagger æ–‡æ¡£è·¯ç”±åœ°å€:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/swagger/*any&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ginSwagger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WrapHandler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">swaggerFiles&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Handler&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">swaggerFiles&lt;/span> &lt;span class="s">&amp;#34;github.com/swaggo/files&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ginSwagger&lt;/span> &lt;span class="s">&amp;#34;github.com/swaggo/gin-swagger&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="s">&amp;#34;github.com/arlettebrook/learn/docs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Helloworld godoc
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Summary è¯¥æ“ä½œçš„ç®€çŸ­æ‘˜è¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Description æ“ä½œè¡Œä¸ºçš„è¯¦ç»†è¯´æ˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Tags example
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Accept json
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Produce json
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Success 200 {string} string &amp;#34;Hello World!&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Router /example/helloworld [get]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">Helloworld&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">g&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Hello World!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @title Swagger Example API
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @version 1.0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @schemes http
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @host localhost:8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @BasePath /api/v1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @tag.name example
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @tag.description ç¤ºä¾‹æ¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/api/v1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/example&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/helloworld&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Helloworld&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/swagger/*any&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ginSwagger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WrapHandler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">swaggerFiles&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Handler&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ‰§è¡Œ &lt;code>go run main.go&lt;/code> å¯åŠ¨æœåŠ¡ï¼Œè®¿é—® &lt;code>http://localhost:8080/swagger/index.html&lt;/code> å³å¯æŸ¥çœ‹ Swagger UI äº¤äº’å¼æ–‡æ¡£ç•Œé¢ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger.png"
width="2940"
height="1838"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger_hu50c8be478a0cc503116512d3818232f0_196290_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger_hu50c8be478a0cc503116512d3818232f0_196290_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Swagger UI"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>â€‹&lt;/p>
&lt;p>è¿™ä¸ªæœ¬åœ°çš„ Swagger UI æœåŠ¡å™¨åŒæ ·æ”¯æŒäº¤äº’å¼æ“ä½œã€‚&lt;/p>
&lt;p>å±•å¼€ &lt;code>/example/helloworld&lt;/code> è¿™ä¸ªæ¥å£ï¼Œç‚¹å‡» &lt;code>Try it out&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-try-it-out.png"
width="2940"
height="1838"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-try-it-out_hu50c8be478a0cc503116512d3818232f0_250895_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-try-it-out_hu50c8be478a0cc503116512d3818232f0_250895_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Try it out"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;p>æ¥ç€ï¼Œç‚¹å‡» &lt;code>Execute&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-execute.png"
width="2940"
height="1838"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-execute_hu50c8be478a0cc503116512d3818232f0_250672_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-execute_hu50c8be478a0cc503116512d3818232f0_250672_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Execute"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;p>Swagger UI å°†ä¼šæ ¹æ®æ–‡æ¡£çš„ &lt;code>Base URL&lt;/code> å»è¯·æ±‚çœŸæ­£çš„æ¥å£ï¼ˆåŒæ—¶è¿˜ä¼šç»™å‡º cURL å‘é€è¯·æ±‚çš„å‘½ä»¤ï¼Œæ–¹ä¾¿å¤åˆ¶ä½¿ç”¨ï¼‰ï¼Œå¹¶å°†å“åº”ç»“æœå±•ç¤ºå‡ºæ¥ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-action.jpg"
width="2910"
height="3180"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-action_hu322d2d6e2c1db2da0ec1bf30df36bb57_679751_480x0_resize_q75_box.jpg 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-action_hu322d2d6e2c1db2da0ec1bf30df36bb57_679751_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Swagger UI"
class="gallery-image"
data-flex-grow="91"
data-flex-basis="219px"
>&lt;/p>
&lt;p>åŒæ—¶åç«¯æœåŠ¡å™¨èƒ½å¤Ÿæ‰“å°å‡ºè¯·æ±‚è®°å½•ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-helloworld.png"
width="2782"
height="788"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-helloworld_huc999c3ba0617e79974778dde457ebd0f_178928_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/gin-swagger-helloworld_huc999c3ba0617e79974778dde457ebd0f_178928_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Server"
class="gallery-image"
data-flex-grow="353"
data-flex-basis="847px"
>&lt;/p>
&lt;p>ä¸å‰ç«¯å¯¹æ¥æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ¥å£æ–‡æ¡£åœ°å€ç»™åˆ°å‰ç«¯ï¼Œå‰ç«¯å°±å¯ä»¥æ ¹æ®è¿™ä¸ª Swagger UI ç•Œé¢è¿›è¡Œæ¥å£æŸ¥é˜…å’Œè°ƒè¯•äº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚&lt;/p>
&lt;h4 id="è®©-swag-æ”¯æŒå¤šç‰ˆæœ¬-api-æ–‡æ¡£">
&lt;a href="#%e8%ae%a9-swag-%e6%94%af%e6%8c%81%e5%a4%9a%e7%89%88%e6%9c%ac-api-%e6%96%87%e6%a1%a3" class="header-anchor">#&lt;/a>
è®© Swag æ”¯æŒå¤šç‰ˆæœ¬ API æ–‡æ¡£
&lt;/h4>&lt;p>å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¼šæ¯”è¿™ä¸ªåªæœ‰ä¸€ä¸ªæ¥å£çš„ demo å¤æ‚å¾—å¤šï¼ŒåŒæ—¶ API ä¹Ÿå¯èƒ½ä¼šæ”¯æŒå¤šç‰ˆæœ¬ï¼Œæ¯”å¦‚ &lt;code>/api/v1&lt;/code>ã€&lt;code>/api/v2&lt;/code>ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥åˆ†åˆ«ç”Ÿæˆ &lt;code>v1&lt;/code>ã€&lt;code>v2&lt;/code> ä¸¤ä¸ªç‰ˆæœ¬çš„ API æ–‡æ¡£ï¼Œè¿™æ ·å¯ä»¥å°†ä¸åŒç‰ˆæœ¬çš„æ¥å£åˆ†å¼€å±•ç¤ºï¼Œæ›´åŠ æ¸…æ™°ã€‚&lt;/p>
&lt;p>å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">swag init -g internal/api/controller/v1/docs.go --exclude internal/api/controller/v2 --instanceName v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swag init -g internal/api/controller/v2/docs.go --exclude internal/api/controller/v1 --instanceName v2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ &lt;code>-g&lt;/code> å‚æ•°æŒ‡æ˜ API é€šç”¨æ³¨é‡Šä¿¡æ¯æ‰€åœ¨çš„ Go æºæ–‡ä»¶è·¯å¾„ï¼Œå¤§å‹é¡¹ç›®ä¸­ä¸ºäº†ä¿æŒä»£ç æ¶æ„æ•´æ´ï¼Œè¿™äº›æ³¨é‡Šåº”è¯¥ç‹¬ç«‹äºä¸€ä¸ªæ–‡ä»¶&lt;code>docs.go&lt;/code>ï¼Œè€Œä¸æ˜¯ç›´æ¥å†™åœ¨ &lt;code>main.go&lt;/code> ä¸­ã€‚&lt;/p>
&lt;p>&lt;code>--exclude&lt;/code> å‚æ•°æŒ‡æ˜ç”Ÿæˆ Swagger æ–‡æ¡£æ—¶ï¼Œéœ€è¦æ’é™¤çš„ç›®å½•ã€‚å¯ä»¥å‘ç°ï¼Œåœ¨ç”Ÿæˆ &lt;code>v1&lt;/code> ç‰ˆæœ¬æ¥å£æ–‡æ¡£æ—¶ï¼Œæˆ‘æ’é™¤äº† &lt;code>v2&lt;/code> æ¥å£ç›®å½•ï¼Œåœ¨ç”Ÿæˆ &lt;code>v2&lt;/code> ç‰ˆæœ¬æ¥å£æ–‡æ¡£æ—¶ï¼Œæ’é™¤äº† &lt;code>v1&lt;/code> æ¥å£ç›®å½•ï¼Œè¿™æ ·å°±å®ç°äº†å¤šç‰ˆæœ¬æ¥å£åˆ†ç¦»ã€‚&lt;/p>
&lt;p>åˆ«å¿˜äº†æ³¨å†Œè·¯ç”±ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/swagger/v1/*any&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ginSwagger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WrapHandler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">swaggerFiles&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewHandler&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">ginSwagger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">InstanceName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;v1&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/swagger/v1/*any&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ginSwagger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WrapHandler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">swaggerFiles&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewHandler&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">ginSwagger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">InstanceName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;v1&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŠ€å·§ï¼šæ¯æ¬¡ä¿®æ”¹swaggeræ³¨é‡Šï¼Œéƒ½éœ€è¦é‡æ–°è¿è¡Œ&lt;code>swag init&lt;/code>å‘½ä»¤ï¼Œå¹¶ä¸”è¿™é‡Œçš„å‘½ä»¤è¿˜å¾ˆå¤æ‚ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨makeå‘½ä»¤ï¼Œå¸®æˆ‘ä»¬ç®€åŒ–æ„å»ºswaggeræ–‡æ¡£å‘½ä»¤ã€‚Makefileæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">run&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">run&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">swag&lt;/span>-&lt;span class="n">fmt&lt;/span> &lt;span class="n">swag&lt;/span>-&lt;span class="n">init&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">swag&lt;/span>-&lt;span class="n">fmt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">swag-fmt&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> swag fmt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">swag&lt;/span>-&lt;span class="n">init&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">swag-init&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">swag&lt;/span>-&lt;span class="n">fmt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> swag init -g internal/api/controller/v1/docs.go --exclude internal/api/controller/v2 --instanceName v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> swag init -g internal/api/controller/v2/docs.go --exclude internal/api/controller/v1 --instanceName v2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ&lt;code>make&lt;/code>å‘½ä»¤å³å¯è‡ªåŠ¨è¿è¡Œæ ¼å¼åŒ–ã€ç”Ÿæˆswaggerræ–‡æ¡£å’Œå¯åŠ¨ginæ¡†æ¶ã€‚ä¸æ”¯æŒçƒ­é‡è½½ï¼Œä¿®æ”¹æºç ä¹‹åéœ€è¦é‡æ–°è¿è¡Œ&lt;code>make&lt;/code>å‘½ä»¤ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½¿ç”¨&lt;code>air&lt;/code>çƒ­é‡è½½ï¼Œè‡ªåŠ¨è¿è¡Œswagæ„å»ºå‘½ä»¤ï¼š&lt;/p>
&lt;p>é»˜è®¤æƒ…å†µä¸‹airå¹¶ä¸æ”¯æŒè‡ªåŠ¨è¿è¡Œswagå‘½ä»¤ï¼Œéœ€è¦ä¿®æ”¹é»˜è®¤é…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ air init &lt;span class="c1"># ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">pre_cmd = [&amp;#34;swag fmt&amp;#34;, &amp;#34;swag init -g internal/api/controller/v1/docs.go --exclude internal/api/controller/v2 --instanceName v1&amp;#34;, &amp;#34;swag init -g internal/api/controller/v2/docs.go --exclude internal/api/controller/v1 --instanceName v2&amp;#34;]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">exclude_dir = [&amp;#34;assets&amp;#34;, &amp;#34;tmp&amp;#34;, &amp;#34;vendor&amp;#34;, &amp;#34;testdata&amp;#34;,&amp;#34;docs&amp;#34;]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šåˆ«å¿˜è®°å¿½ç•¥&lt;code>docs&lt;/code>ç›®å½•ï¼Œé˜²æ­¢çƒ­é‡è½½æ­»å¾ªç¯ã€‚&lt;/p>
&lt;p>ä¹‹åæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿è¡Œ&lt;code>air&lt;/code>å‘½ä»¤å³å¯è‡ªåŠ¨æ„å»ºswaggeræ–‡æ¡£ä»¥åŠå¯åŠ¨ginæ¡†æ¶ã€‚å¹¶ä¸”ä½¿ç”¨&lt;code>air&lt;/code>å‘½ä»¤å¯åŠ¨ä¹‹åï¼Œæ¯æ¬¡ä¿®æ”¹æ³¨é‡Šå’Œä»£ç ï¼Œéƒ½ä¸éœ€è¦é‡æ–°å¯åŠ¨ç¨‹åºã€‚airå½“æ£€æµ‹åˆ°æ–‡ä»¶ä¿®æ”¹æ—¶ä¼šè‡ªåŠ¨é‡è½½ï¼Œè¿è¡Œæ„å»ºå‘½ä»¤ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>å‚è€ƒï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.liaoxuefeng.com/wiki/1599771213037600" target="_blank" rel="noopener"
>å»–é›ªå³°Makefileæ•™ç¨‹&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.zhaixue.cc/makefile/makefile-ival.html" target="_blank" rel="noopener"
>Makefile ç®€æ˜æ•™ç¨‹&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://arlettebrook.github.io/p/gin-introduction/#air%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" target="_blank" rel="noopener"
>airåŸºæœ¬ä½¿ç”¨&lt;/a>&lt;/li>
&lt;li>å®Œæ•´ç¤ºä¾‹ä»£ç ï¼š&lt;a class="link" href="https://github.com/jianghushinian/swag-example" target="_blank" rel="noopener"
>swag-example&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="swag-ä½¿ç”¨å»ºè®®">
&lt;a href="#swag-%e4%bd%bf%e7%94%a8%e5%bb%ba%e8%ae%ae" class="header-anchor">#&lt;/a>
Swag ä½¿ç”¨å»ºè®®
&lt;/h4>&lt;p>åœ¨å‰æ–‡ä»‹ç»çš„ swag ä½¿ç”¨æµç¨‹ä¸­ï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬æ˜¯å…ˆç¼–å†™çš„ä»£ç ï¼Œç„¶åå†ç”Ÿæˆçš„ Swagger æ–‡æ¡£ï¼Œæœ€åå°†è¿™ä»½æ–‡æ¡£äº¤ç»™å‰ç«¯ä½¿ç”¨ã€‚&lt;/p>
&lt;p>è¿™æ˜¾ç„¶è¿èƒŒäº†ã€Œæ–‡æ¡£å…ˆè¡Œã€çš„æ€æƒ³ï¼Œå®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ—¶å€™æ˜¯å…ˆè·Ÿå‰ç«¯çº¦å®šå¥½æ¥å£ï¼Œç„¶ååç«¯æä¾› Swagger æ–‡æ¡£ä¾›å‰ç«¯ä½¿ç”¨ï¼Œæœ€åæ‰æ˜¯å‰åç«¯ç¼–ç é˜¶æ®µã€‚&lt;/p>
&lt;p>è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€ç›´æ¥çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸ä½¿ç”¨ swag å·¥å…·ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ Swagger Editor è¿™ç§ç¼–è¾‘å™¨æ‰‹å†™ Swagger æ–‡æ¡£ï¼Œè¿™æ ·å°±èƒ½å®ç°æ–‡æ¡£å…ˆè¡Œäº†ã€‚&lt;/p>
&lt;p>ä½†è¿™åˆè¿èƒŒäº† OpenAPI ç»™å‡ºçš„ã€Œæœ€ä½³å®è·µã€ï¼Œæ¨èè‡ªåŠ¨ç”Ÿæˆ Swagger æ–‡æ¡£ï¼Œè€Œéæ‰‹åŠ¨ç¼–å†™ã€‚&lt;/p>
&lt;p>æˆ‘è‡ªå·±çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œä¾æ—§é€‰æ‹©ä½¿ç”¨ swag å·¥å…·ï¼Œä¸è¿‡åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œå…ˆå†™æ¥å£çš„æ¡†æ¶ä»£ç ï¼Œè€Œä¸å†™å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿™æ ·å°±èƒ½å¤Ÿå…ˆé€šè¿‡æ¥å£æ³¨é‡Šç”Ÿæˆ Swagger æ–‡æ¡£ï¼Œä¾›å‰ç«¯ä½¿ç”¨ï¼Œç„¶åå†ç¼–å†™ä¸šåŠ¡ä»£ç ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œè¾ƒä¸ºé—æ†¾çš„æ˜¯ï¼Œç›®å‰ï¼ˆ2024-5-23ï¼‰ swag ç”Ÿæˆçš„æ–‡æ¡£æ˜¯ OpenAPI 2.0 ç‰ˆæœ¬ï¼Œå¹¶ä¸èƒ½ç›´æ¥ç”Ÿæˆ OpenAPI 3.0 ç‰ˆæœ¬ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ OpenAPI 3.0 ç‰ˆæœ¬çš„æ–‡æ¡£ï¼Œä¸€ä¸ªå˜é€šçš„æ–¹æ³•æ˜¯ä½¿ç”¨å·¥å…·å°† OpenAPI 2.0 æ–‡æ¡£è½¬æ¢æˆ OpenAPI 3.0ï¼Œå¦‚å‰æ–‡æåˆ°çš„ Swagger Editor å°±æ”¯æŒæ­¤æ“ä½œã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨-redoc-é£æ ¼çš„-api-æ–‡æ¡£">
&lt;a href="#%e4%bd%bf%e7%94%a8-redoc-%e9%a3%8e%e6%a0%bc%e7%9a%84-api-%e6%96%87%e6%a1%a3" class="header-anchor">#&lt;/a>
ä½¿ç”¨ ReDoc é£æ ¼çš„ API æ–‡æ¡£
&lt;/h3>&lt;p>ä¹Ÿè®¸ç›¸è¾ƒäº Swagger UI å¤šå¹´ä¸å˜çš„ç•Œé¢é£æ ¼ï¼Œä½ æ›´å–œæ¬¢ ReDoc é£æ ¼çš„ UIï¼Œé‚£ä¹ˆ &lt;a class="link" href="https://github.com/mvrilo/go-redoc" target="_blank" rel="noopener"
>go-redoc&lt;/a> æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¸é”™çš„é€‰æ‹©ã€‚&lt;/p>
&lt;p>åœ¨ gin ä¸­ä½¿ç”¨ go-redoc éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†å¦‚ä¸‹å¥—è·¯ä»£ç åŠ å…¥åˆ°æˆ‘ä»¬çš„ &lt;code>main.go&lt;/code> æ–‡ä»¶ä¸­å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/mvrilo/go-redoc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ginRedoc&lt;/span> &lt;span class="s">&amp;#34;github.com/mvrilo/go-redoc/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">doc&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">redoc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Redoc&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Title&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Example API&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Description&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Example API Description&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SpecFile&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;./openapi.json&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// &amp;#34;./openapi.yaml&amp;#34; OpenAPIæ–‡æ¡£è·¯å¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">SpecPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;/openapi.json&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// &amp;#34;/openapi.yaml&amp;#34; OpenAPIæ–‡æ¡£èµ„æºè·¯å¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">DocsPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;/docs&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// æ–‡æ¡£è®¿é—®è·¯å¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ginRedoc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">doc&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿˜æœ‰åˆ«å¿˜äº†æ·»åŠ ä¾èµ–ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">u&lt;/span> &lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mvrilo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">redoc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">u&lt;/span> &lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">mvrilo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">redoc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/mvrilo/go-redoc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ginRedoc&lt;/span> &lt;span class="s">&amp;#34;github.com/mvrilo/go-redoc/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">swaggerFiles&lt;/span> &lt;span class="s">&amp;#34;github.com/swaggo/files&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ginSwagger&lt;/span> &lt;span class="s">&amp;#34;github.com/swaggo/gin-swagger&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="s">&amp;#34;github.com/arlettebrook/learn/docs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Helloworld godoc
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Summary è¯¥æ“ä½œçš„ç®€çŸ­æ‘˜è¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Description æ“ä½œè¡Œä¸ºçš„è¯¦ç»†è¯´æ˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Tags example
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Accept json
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Produce json
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Success 200 {string} string &amp;#34;Hello World!&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @Router /example/helloworld [get]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">Helloworld&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">g&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Hello World!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @title Swagger Example API
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @version v1.0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @schemes http
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @host localhost:8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @BasePath /api/v1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @tag.name example
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// @tag.description ç¤ºä¾‹æ¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">doc&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">redoc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Redoc&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Title&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;ReDoc Example API&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Description&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;ReDoc Example API Description&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SpecFile&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;./docs/swagger.json&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SpecPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;/swagger.json&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DocsPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;/redoc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ginRedoc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">doc&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/api/v1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/example&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/helloworld&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Helloworld&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/swagger/v1/*any&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ginSwagger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WrapHandler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">swaggerFiles&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Handler&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//r.GET(&amp;#34;/swagger/v2/*any&amp;#34;, ginSwagger.WrapHandler(swaggerFiles.Handler, ginSwagger.InstanceName(&amp;#34;v1&amp;#34;)))
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;localhost:8080&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œ &lt;code>go run main.go&lt;/code> å¯åŠ¨æœåŠ¡ï¼Œè®¿é—®&lt;a class="link" href="http://localhost:8080/redoc" target="_blank" rel="noopener"
>http://localhost:8080/redoc&lt;/a>å³å¯æŸ¥çœ‹ Redoc UIã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/redoc.png"
width="2940"
height="1838"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/redoc_hu50c8be478a0cc503116512d3818232f0_235710_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/redoc_hu50c8be478a0cc503116512d3818232f0_235710_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ReDoc"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;p>ä¸è¿‡ï¼Œç›¸è¾ƒäº Swagger UIï¼ŒRedoc UI æœ‰ä¸ªå¼Šç«¯æ˜¯ä¸èƒ½å®ç°äº¤äº’å¼æ“ä½œï¼Œå¦‚æœä»…ä»¥æ­¤ä½œä¸ºæ–‡æ¡£æŸ¥é˜…å·¥å…·ï¼Œæ²¡æœ‰äº¤äº’å¼æ“ä½œçš„éœ€æ±‚ï¼Œé‚£ä¹ˆè¿˜æ˜¯æ¯”è¾ƒæ¨èä½¿ç”¨çš„ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ›´å…ˆè¿›çš„-api-å·¥å…·">
&lt;a href="#%e6%9b%b4%e5%85%88%e8%bf%9b%e7%9a%84-api-%e5%b7%a5%e5%85%b7" class="header-anchor">#&lt;/a>
æ›´å…ˆè¿›çš„ API å·¥å…·
&lt;/h2>&lt;p>é™¤äº† OpenAPI.Tools æ¨èçš„å¼€æºå·¥å…·ï¼Œç¤¾åŒºä¸­å…¶å®è¿˜æœ‰å¾ˆå¤šå…¶ä»–ä¼˜ç§€å·¥å…·å€¼å¾—å°è¯•ä½¿ç”¨ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œè¦æ¨èçš„ä¸€æ¬¾å›½äº§å·¥å…· &lt;a class="link" href="https://www.apifox.com/" target="_blank" rel="noopener"
>Apifox&lt;/a>ï¼Œå®˜æ–¹å°†å…¶å®šä¹‰ä¸º Apifox = Postman + Swagger + Mock + JMeterï¼Œé›† API è®¾è®¡/å¼€å‘/æµ‹è¯• äºä¸€èº«ã€‚&lt;/p>
&lt;p>Apifox å¯è°“ä¸€ç«™å¼å›¾å½¢åŒ–å·¥å…·ï¼Œå…¶åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå°±åƒå‰æ–‡æåˆ°çš„ APIGit åŒæ—¶å…·å¤‡äº†ç¼–è¾‘å™¨å’Œ Mock æœåŠ¡å™¨çš„åŠŸèƒ½ï¼ŒApifox æœ‰è¿‡ä¹‹è€Œæ— ä¸åŠã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/apifox.png"
width="2600"
height="1646"
srcset="https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/apifox_hue3e0bd39a9272ba90dc255573fbc4cc5_383072_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/openapi-and-swagger-introduction/index.assets/apifox_hue3e0bd39a9272ba90dc255573fbc4cc5_383072_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Apifox"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="379px"
>&lt;/p>
&lt;p>å›¾å½¢åŒ–å·¥å…·ä¸Šæ‰‹éš¾åº¦ä¸å¤§ï¼ŒåŠ ä¸Š Apifox æœ¬èº«ç”±å›½å†…å¼€å‘ï¼Œéå¸¸å®¹æ˜“ä¸Šæ‰‹ï¼Œæ‰€ä»¥æœ¬æ–‡ä¹Ÿå°±ä¸æ·±å…¥ä»‹ç»äº†ï¼Œä½ å¯ä»¥è§‚çœ‹å®˜æ–¹æ•™ç¨‹ &lt;a class="link" href="https://www.apifox.cn/help/#_21-%e5%88%86%e9%92%9f%e5%ad%a6%e4%bc%9a-apifox-%f0%9f%91%8d" target="_blank" rel="noopener"
>21 åˆ†é’Ÿå­¦ä¼š Apifox&lt;/a> æ¥å­¦ä¹ ä½¿ç”¨ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="https://www.apipost.cn/" target="_blank" rel="noopener"
>Apipost&lt;/a>ä¹Ÿæ˜¯è·Ÿå®ƒå·®ä¸å¤šçš„æ¥å£æµ‹è¯•å·¥å…·ï¼Œä¸è¿‡æˆ‘æ›´å–œæ¬¢apipostï¼Œå› ä¸ºå®ƒä¸ç™»å½•çš„æƒ…å†µä¸‹ï¼Œç¦»çº¿å¯ä»¥ä½¿ç”¨ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>OpenAPI å®˜ç½‘ï¼š &lt;a class="link" href="https://www.openapis.org/" target="_blank" rel="noopener"
>https://www.openapis.org/&lt;/a>&lt;/li>
&lt;li>OpenAPI å…¥é—¨ï¼š &lt;a class="link" href="https://oai.github.io/Documentation/" target="_blank" rel="noopener"
>https://oai.github.io/Documentation/&lt;/a>&lt;/li>
&lt;li>OpenAPI è§„èŒƒï¼š &lt;a class="link" href="https://spec.openapis.org/oas/latest.html" target="_blank" rel="noopener"
>https://spec.openapis.org/oas/latest.html&lt;/a>&lt;/li>
&lt;li>OpenAPI è§„èŒƒä¸­æ–‡ç‰ˆï¼š &lt;a class="link" href="https://openapi.apifox.cn/" target="_blank" rel="noopener"
>https://openapi.apifox.cn/&lt;/a>&lt;/li>
&lt;li>OpenAPI è§„èŒƒæ€ç»´å¯¼å›¾ç‰ˆï¼š &lt;a class="link" href="https://openapi-map.apihandyman.io/" target="_blank" rel="noopener"
>https://openapi-map.apihandyman.io/&lt;/a>&lt;/li>
&lt;li>OpenAPI.Toolsï¼š &lt;a class="link" href="https://openapi.tools/" target="_blank" rel="noopener"
>https://openapi.tools/&lt;/a>&lt;/li>
&lt;li>Swagger å®˜ç½‘ï¼š &lt;a class="link" href="https://swagger.io/" target="_blank" rel="noopener"
>https://swagger.io/&lt;/a>&lt;/li>
&lt;li>swagï¼š &lt;a class="link" href="https://github.com/swaggo/swag" target="_blank" rel="noopener"
>https://github.com/swaggo/swag&lt;/a>&lt;/li>
&lt;li>swag-exampleï¼š &lt;a class="link" href="https://github.com/jianghushinian/swag-example" target="_blank" rel="noopener"
>https://github.com/jianghushinian/swag-example&lt;/a>&lt;/li>
&lt;li>go-redocï¼š &lt;a class="link" href="https://github.com/mvrilo/go-redoc" target="_blank" rel="noopener"
>https://github.com/mvrilo/go-redoc&lt;/a>&lt;/li>
&lt;li>åŸæ–‡ï¼š&lt;a class="link" href="https://jianghushinian.cn/2023/02/12/build-api-documentation-using-openapi/" target="_blank" rel="noopener"
>ä½¿ç”¨ OpenAPI æ„å»º API æ–‡æ¡£&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Gin Introduction</title><link>https://arlettebrook.github.io/p/gin-introduction/</link><pubDate>Tue, 21 May 2024 17:58:00 +0800</pubDate><guid>https://arlettebrook.github.io/p/gin-introduction/</guid><description>&lt;hr>
&lt;h2 id="ginä»‹ç»">
&lt;a href="#gin%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
Ginä»‹ç»
&lt;/h2>&lt;p>Gin æ˜¯ä¸€ä¸ªç”¨ Golangç¼–å†™çš„é«˜æ€§èƒ½çš„web æ¡†æ¶, ç”±äº&lt;a class="link" href="https://github.com/julienschmidt/httprouter" target="_blank" rel="noopener"
>httpè·¯ç”±&lt;/a>çš„ä¼˜åŒ–ï¼Œè¿è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œé€Ÿåº¦æé«˜äº†è¿‘ 40 å€ã€‚ Ginçš„ç‰¹ç‚¹å°±æ˜¯å°è£…ä¼˜é›…ã€APIå‹å¥½ã€‚&lt;/p>
&lt;p>Gin æœ€æ“…é•¿çš„å°±æ˜¯APIæ¥å£çš„é«˜å¹¶å‘ï¼Œå¦‚æœé¡¹ç›®çš„è§„æ¨¡ä¸å¤§ï¼Œä¸šåŠ¡ç›¸å¯¹ç®€å•ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¹Ÿæ¨èæ‚¨ä½¿ç”¨ Ginã€‚&lt;/p>
&lt;p>å½“æŸä¸ªæ¥å£çš„æ€§èƒ½é­åˆ°è¾ƒå¤§æŒ‘æˆ˜çš„æ—¶å€™ï¼Œè¿™ä¸ªè¿˜æ˜¯å¯ä»¥è€ƒè™‘ä½¿ç”¨ Gin é‡å†™æ¥å£ã€‚&lt;/p>
&lt;p>Gin ä¹Ÿæ˜¯ä¸€ä¸ªæµè¡Œçš„ golang Web æ¡†æ¶ï¼ŒGithub Strat é‡å·²ç»è¶…è¿‡äº† 75k[2024/05/21]ã€‚&lt;/p>
&lt;p>Ginçš„ä¸€äº›ç‰¹æ€§ï¼š&lt;/p>
&lt;ul>
&lt;li>å¿«é€Ÿ
åŸºäº Radix æ ‘çš„è·¯ç”±ï¼Œå°å†…å­˜å ç”¨ã€‚æ²¡æœ‰åå°„ã€‚å¯é¢„æµ‹çš„ API æ€§èƒ½ã€‚&lt;/li>
&lt;li>æ”¯æŒä¸­é—´ä»¶
ä¼ å…¥çš„ HTTP è¯·æ±‚å¯ä»¥ç”±ä¸€ç³»åˆ—ä¸­é—´ä»¶å’Œæœ€ç»ˆæ“ä½œæ¥å¤„ç†ã€‚ ä¾‹å¦‚ï¼šLoggerï¼ŒAuthorizationï¼ŒGZIPï¼Œæœ€ç»ˆæ“ä½œ DBã€‚&lt;/li>
&lt;li>Crash å¤„ç†
Gin å¯ä»¥ catch ä¸€ä¸ªå‘ç”Ÿåœ¨ HTTP è¯·æ±‚ä¸­çš„ panic å¹¶ recover å®ƒã€‚è¿™æ ·ï¼Œä½ çš„æœåŠ¡å™¨å°†å§‹ç»ˆå¯ç”¨ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å‘ Sentry æŠ¥å‘Šè¿™ä¸ª panicï¼&lt;/li>
&lt;li>JSON éªŒè¯
Gin å¯ä»¥è§£æå¹¶éªŒè¯è¯·æ±‚çš„ JSONï¼Œä¾‹å¦‚æ£€æŸ¥æ‰€éœ€å€¼çš„å­˜åœ¨ã€‚&lt;/li>
&lt;li>è·¯ç”±ç»„
æ›´å¥½åœ°ç»„ç»‡è·¯ç”±ã€‚æ˜¯å¦éœ€è¦æˆæƒï¼Œä¸åŒçš„ API ç‰ˆæœ¬â€¦â€¦ æ­¤å¤–ï¼Œè¿™äº›ç»„å¯ä»¥æ— é™åˆ¶åœ°åµŒå¥—è€Œä¸ä¼šé™ä½æ€§èƒ½ã€‚&lt;/li>
&lt;li>é”™è¯¯ç®¡ç†
Gin æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥æ”¶é›† HTTP è¯·æ±‚æœŸé—´å‘ç”Ÿçš„æ‰€æœ‰é”™è¯¯ã€‚æœ€ç»ˆï¼Œä¸­é—´ä»¶å¯ä»¥å°†å®ƒä»¬å†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œæ•°æ®åº“å¹¶é€šè¿‡ç½‘ç»œå‘é€ã€‚&lt;/li>
&lt;li>å†…ç½®æ¸²æŸ“
Gin ä¸º JSONï¼ŒXML å’Œ HTML æ¸²æŸ“æä¾›äº†æ˜“äºä½¿ç”¨çš„ APIã€‚&lt;/li>
&lt;li>å¯æ‰©å±•æ€§
æ–°å»ºä¸€ä¸ªä¸­é—´ä»¶éå¸¸ç®€å•ã€‚&lt;/li>
&lt;/ul>
&lt;p>Gin çš„å®˜ç½‘ï¼š &lt;a class="link" href="https://gin-gonic.com/zh-cn/" target="_blank" rel="noopener"
>https://gin-gonic.com/zh-cn/&lt;/a>&lt;/p>
&lt;p>Gin Github åœ°å€ï¼š &lt;a class="link" href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener"
>https://github.com/gin-gonic/gin&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>ä¸‹è½½å¹¶å®‰è£… ginï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">u&lt;/span> &lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">gonic&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">gin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šgoç‰ˆæœ¬è¦ 1.6 åŠä»¥ä¸Šã€‚&lt;/p>
&lt;p>å¿«é€Ÿä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å¯¼å…¥ginåŒ…
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å…¥å£å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆå§‹åŒ–ä¸€ä¸ªhttpæœåŠ¡å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªé»˜è®¤çš„è·¯ç”±å¼•æ“å¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é…ç½®è·¯ç”±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// è®¾ç½®ä¸€ä¸ªgetè¯·æ±‚çš„è·¯ç”±ï¼Œurlä¸º/ping, å¤„ç†å‡½æ•°ï¼ˆæˆ–è€…å«æ§åˆ¶å™¨å‡½æ•°ã€å›è°ƒå‡½æ•°ï¼‰æ˜¯ä¸€ä¸ªé—­åŒ…å‡½æ•°ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é€šè¿‡è¯·æ±‚ä¸Šä¸‹æ–‡å¯¹è±¡Context, ç›´æ¥å¾€å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªjson
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;pong&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// å¯åŠ¨ HTTP æœåŠ¡ï¼Œé»˜è®¤åœ¨ 0.0.0.0:8080 å¯åŠ¨æœåŠ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Http serve start error:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œå‘½ä»¤&lt;code>go run main.go&lt;/code>ï¼Œå³å¯å¯åŠ¨httpæœåŠ¡ã€‚ç„¶åå°±å¯ä»¥é€šè¿‡localhost:8080/ping è®¿é—®äº†ã€‚ä¼šè¿”å›å¦‚ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;pong&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šå¦‚æœä¸æœŸæœ›åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæ¯æ¬¡éƒ½å¼¹å‡ºé˜²ç«å¢™è­¦å‘Šï¼Œå¯å°†ç›‘å¬åœ°å€ã€ç«¯å£æ”¹ä¸º&lt;code>localhost:8080&lt;/code>ã€‚ç”Ÿäº§ç¯å¢ƒåº”è¯¥ä¸º&lt;code>:port&lt;/code>ï¼Œçœç•¥åœ°å€ï¼Œé»˜è®¤ä¸º&lt;code>0.0.0.0&lt;/code>ã€‚&lt;/p>
&lt;h3 id="ginæ¡†æ¶çƒ­é‡è½½">
&lt;a href="#gin%e6%a1%86%e6%9e%b6%e7%83%ad%e9%87%8d%e8%bd%bd" class="header-anchor">#&lt;/a>
Ginæ¡†æ¶çƒ­é‡è½½
&lt;/h3>&lt;p>æ‰€è°“çƒ­é‡è½½å°±æ˜¯å½“æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œä¿®æ”¹æ—¶ï¼Œç¨‹åºèƒ½å¤Ÿè‡ªåŠ¨é‡æ–°åŠ è½½å¹¶æ‰§è¡Œï¼Œè¿™åœ¨æˆ‘ä»¬å¼€å‘ä¸­æ˜¯éå¸¸ä¾¿åˆ©çš„ï¼Œå¯ä»¥å¿«é€Ÿè¿›è¡Œä»£ç æµ‹è¯•ï¼Œçœå»äº†æ¯æ¬¡æ‰‹åŠ¨é‡æ–°ç¼–è¯‘ã€‚&lt;/p>
&lt;p>Ginæ¡†æ¶å¹¶æ²¡æœ‰æä¾›çƒ­é‡è½½çš„åŠŸèƒ½ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¦å®ç°çƒ­é‡è½½å°±è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹çš„å·¥å…·ã€‚&lt;/p>
&lt;p>è¿™é‡Œæ¨èä¸€ä¸ªä½¿ç”¨æœ€å¤šçš„ginæ¡†æ¶çƒ­é‡è½½å·¥å…·ï¼š&lt;strong>&lt;a class="link" href="https://github.com/cosmtrek/air/" target="_blank" rel="noopener"
>air&lt;/a>&lt;/strong>ã€‚å®ƒæ˜¯åœ¨ &lt;a class="link" href="https://github.com/pilu/fresh" target="_blank" rel="noopener"
>fresh&lt;/a> çš„åŸºç¡€ä¸Šè¯ç”Ÿçš„ã€‚&lt;/p>
&lt;p>ç‰¹æ€§ï¼š&lt;/p>
&lt;ul>
&lt;li>å½©è‰²çš„æ—¥å¿—è¾“å‡º&lt;/li>
&lt;li>è‡ªå®šä¹‰æ„å»ºæˆ–å¿…è¦çš„å‘½ä»¤&lt;/li>
&lt;li>æ”¯æŒå¤–éƒ¨å­ç›®å½•&lt;/li>
&lt;li>åœ¨ Air å¯åŠ¨ä¹‹åï¼Œå…è®¸ç›‘å¬æ–°åˆ›å»ºçš„è·¯å¾„&lt;/li>
&lt;li>&lt;strong>æ›´æ£’çš„æ„å»ºè¿‡ç¨‹&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>åŸç†å¤§è‡´æ˜¯ï¼šç›‘å¬åˆ°æ–‡ä»¶ç³»ç»Ÿä¿®æ”¹é€šçŸ¥åï¼Œé‡æ–°æ„å»ºåº”ç”¨ç¨‹åºã€‚&lt;/p>
&lt;h4 id="airåŸºæœ¬ä½¿ç”¨">
&lt;a href="#air%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
airåŸºæœ¬ä½¿ç”¨
&lt;/h4>&lt;p>å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">go install github.com/cosmtrek/air@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šgoç‰ˆæœ¬è¦1.22 æˆ–æ›´é«˜ã€‚&lt;/p>
&lt;p>å®‰è£…æˆåŠŸä¹‹åï¼Œå°±å¯ä»¥åœ¨giné¡¹ç›®æ ¹ç›®å½•ä¸‹ç›´æ¥è¿è¡Œ&lt;code>air&lt;/code>å‘½ä»¤ï¼Œå°±å¯ä»¥å¯åŠ¨giné¡¹ç›®ï¼Œå®ç°çƒ­é‡è½½ã€‚&lt;/p>
&lt;p>airé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨æœåŠ¡ã€‚å¦‚æœè¦ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œå¯ä»¥è¿è¡Œ&lt;code>air init&lt;/code>ç”Ÿæˆé»˜è®¤çš„é…ç½®æ–‡ä»¶&lt;code>.air.toml&lt;/code>ï¼Œä¿®æ”¹ä¹‹åï¼Œè¿è¡Œ&lt;code>air&lt;/code>å³å¯ä½¿ç”¨ä¿®æ”¹çš„é…ç½®å¯åŠ¨æœåŠ¡ï¼Œæ³¨æ„ï¼šå¦‚æœä¿®æ”¹äº†é…ç½®æ–‡ä»¶åï¼Œéœ€è¦ç”¨&lt;code>-c&lt;/code>é€‰é¡¹æŒ‡å®šæ–°çš„é…ç½®æ–‡ä»¶ã€‚å¦åˆ™å°†ä½¿ç”¨é»˜è®¤çš„&lt;code>.air.toml&lt;/code>å¯åŠ¨æœåŠ¡ã€‚&lt;/p>
&lt;p>ä¸€èˆ¬ä½¿ç”¨é»˜è®¤é…ç½®å°±å¤Ÿç”¨äº†ã€‚å¯ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">root&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">testdata_dir&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;testdata&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">tmp_dir&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;tmp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">build&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">args_bin&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">bin&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;tmp\\main.exe&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;go build -o ./tmp/main.exe .&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">delay&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">exclude_dir&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;assets&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tmp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;vendor&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;testdata&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">exclude_file&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">exclude_regex&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;_test.go&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">exclude_unchanged&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">follow_symlink&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">full_bin&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">include_dir&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">include_ext&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;go&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tpl&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tmpl&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;html&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">include_file&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">kill_delay&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;0s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;build-errors.log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">poll&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">poll_interval&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">post_cmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pre_cmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rerun&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rerun_delay&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">500&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">send_interrupt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stop_on_error&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">color&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">build&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;yellow&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">main&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;magenta&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">runner&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">watcher&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;cyan&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">main_only&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">misc&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">clean_on_exit&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">proxy&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app_port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">enabled&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">proxy_port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">screen&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">clear_on_rebuild&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">keep_scroll&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸºæœ¬ä½¿ç”¨å¦‚ä¸Šï¼Œæ›´å¤šå†…å®¹å‚è€ƒ&lt;a class="link" href="https://github.com/cosmtrek/air/" target="_blank" rel="noopener"
>airå®˜æ–¹&lt;/a>ã€‚&lt;/p>
&lt;h3 id="é¡¹ç›®ç»“æ„">
&lt;a href="#%e9%a1%b9%e7%9b%ae%e7%bb%93%e6%9e%84" class="header-anchor">#&lt;/a>
é¡¹ç›®ç»“æ„
&lt;/h3>&lt;p>å®é™…é¡¹ç›®ä¸šåŠ¡åŠŸèƒ½å’Œæ¨¡å—ä¼šå¾ˆå¤šï¼Œæˆ‘ä»¬ä¸å¯èƒ½æŠŠæ‰€æœ‰ä»£ç éƒ½å†™åœ¨ä¸€ä¸ªgoæ–‡ä»¶é‡Œé¢æˆ–è€…å†™åœ¨ä¸€ä¸ªmainå…¥å£å‡½æ•°é‡Œé¢ï¼›æˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ç»“æ„åšä¸€äº›è§„åˆ’ï¼Œæ–¹ä¾¿ç»´æŠ¤ä»£ç ä»¥åŠæ‰©å±•ã€‚&lt;/p>
&lt;blockquote>
&lt;p>Ginæ¡†æ²¡æœ‰å¯¹é¡¹ç›®ç»“æ„åšå‡ºé™åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®éœ€è¦è‡ªè¡Œè®¾è®¡ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>è¿™é‡Œç»™å‡ºä¸€ä¸ªå…¸å‹çš„MVCæ¡†æ¶å¤§è‡´çš„é¡¹ç›®ç»“æ„çš„ä¾‹å­ï¼Œå¤§å®¶å¯ä»¥&lt;strong>å‚è€ƒ&lt;/strong>ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ conf &lt;span class="c1">#é¡¹ç›®é…ç½®æ–‡ä»¶ç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ config.toml &lt;span class="c1">#å¤§å®¶å¯ä»¥é€‰æ‹©è‡ªå·±ç†Ÿæ‚‰çš„é…ç½®æ–‡ä»¶ç®¡ç†å·¥å…·åŒ…ä¾‹å¦‚ï¼štomlã€xmlç­‰ç­‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ controllers &lt;span class="c1">#æ§åˆ¶å™¨ç›®å½•ï¼ŒæŒ‰æ¨¡å—å­˜æ”¾æ§åˆ¶å™¨ï¼ˆæˆ–è€…å«æ§åˆ¶å™¨å‡½æ•°ï¼‰ï¼Œå¿…è¦çš„æ—¶å€™å¯ä»¥ç»§ç»­åˆ’åˆ†å­ç›®å½•ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ food.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ user.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ main.go &lt;span class="c1">#é¡¹ç›®å…¥å£ï¼Œè¿™é‡Œè´Ÿè´£Ginæ¡†æ¶çš„åˆå§‹åŒ–ï¼Œæ³¨å†Œè·¯ç”±ä¿¡æ¯ï¼Œå…³è”æ§åˆ¶å™¨å‡½æ•°ç­‰ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ models &lt;span class="c1">#æ¨¡å‹ç›®å½•ï¼Œè´Ÿè´£é¡¹ç›®çš„æ•°æ®å­˜å‚¨éƒ¨åˆ†ï¼Œä¾‹å¦‚å„ä¸ªæ¨¡å—çš„Mysqlè¡¨çš„è¯»å†™æ¨¡å‹ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ food.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ user.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ static assets &lt;span class="c1">#é™æ€èµ„æºç›®å½•ï¼ŒåŒ…æ‹¬Jsï¼Œcssï¼Œjpgç­‰ç­‰ï¼Œå¯ä»¥é€šè¿‡Ginæ¡†æ¶é…ç½®ï¼Œç›´æ¥è®©ç”¨æˆ·è®¿é—®ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ css
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ logs &lt;span class="c1">#æ—¥å¿—æ–‡ä»¶ç›®å½•ï¼Œä¸»è¦ä¿å­˜é¡¹ç›®è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ—¥å¿—ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ views templates &lt;span class="c1">#è§†å›¾æ¨¡æ¿ç›®å½•ï¼Œå­˜æ”¾å„ä¸ªæ¨¡å—çš„è§†å›¾æ¨¡æ¿ï¼Œå½“ç„¶æœ‰äº›é¡¹ç›®åªæœ‰apiï¼Œæ˜¯ä¸éœ€è¦è§†å›¾éƒ¨åˆ†ï¼Œå¯ä»¥å¿½ç•¥è¿™ä¸ªç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ index.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> routers
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ginæ¡†æ¶è¿è¡Œæ¨¡å¼">
&lt;a href="#gin%e6%a1%86%e6%9e%b6%e8%bf%90%e8%a1%8c%e6%a8%a1%e5%bc%8f" class="header-anchor">#&lt;/a>
Ginæ¡†æ¶è¿è¡Œæ¨¡å¼
&lt;/h3>&lt;p>ä¸ºæ–¹ä¾¿è°ƒè¯•ï¼ŒGin æ¡†æ¶åœ¨è¿è¡Œçš„æ—¶å€™é»˜è®¤æ˜¯debugæ¨¡å¼ï¼Œåœ¨æ§åˆ¶å°é»˜è®¤ä¼šæ‰“å°å‡ºå¾ˆå¤šè°ƒè¯•æ—¥å¿—ï¼Œä¸Šçº¿çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å…³é—­&lt;code>debug&lt;/code>æ¨¡å¼ï¼Œæ”¹ä¸º&lt;code>release&lt;/code>æ¨¡å¼ã€‚&lt;/p>
&lt;p>è®¾ç½®Ginæ¡†æ¶è¿è¡Œæ¨¡å¼ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®&lt;code>GIN_MODE&lt;/code>ï¼Œå¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">GIN_MODE&lt;/span>&lt;span class="o">=&lt;/span>release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>GIN_MODEç¯å¢ƒå˜é‡ï¼Œå¯ä»¥è®¾ç½®ä¸ºdebugæˆ–è€…releaseï¼Œé»˜è®¤ä¸ºdebugã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡ä»£ç è®¾ç½®:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åœ¨mainå‡½æ•°ï¼Œåˆå§‹åŒ–ginæ¡†æ¶çš„æ—¶å€™æ‰§è¡Œä¸‹é¢ä»£ç 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è®¾ç½® releaseæ¨¡å¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetMode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ReleaseMode&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æˆ–è€… è®¾ç½®debugæ¨¡å¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetMode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DebugMode&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="è·¯ç”±ä¸æ§åˆ¶å™¨">
&lt;a href="#%e8%b7%af%e7%94%b1%e4%b8%8e%e6%8e%a7%e5%88%b6%e5%99%a8" class="header-anchor">#&lt;/a>
è·¯ç”±ä¸æ§åˆ¶å™¨
&lt;/h2>&lt;p>Ginæ¡†æ¶ä¸­çš„&lt;strong>è·¯ç”±&lt;/strong>æ˜¯æŒ‡é€šè¿‡HTTPè¯·æ±‚çš„è·¯å¾„æ‰¾åˆ°å¯¹åº”çš„æ§åˆ¶å™¨å‡½æ•°ï¼ˆä¹Ÿå¯ä»¥å«å¤„ç†å™¨å‡½æ•°ï¼‰ã€‚Ginæ¡†æ¶çš„è·¯ç”±æ˜¯åŸºäº&lt;a class="link" href="https://github.com/julienschmidt/httprouter" target="_blank" rel="noopener"
>httprouter&lt;/a>åŒ…å®ç°çš„ã€‚&lt;/p>
&lt;p>&lt;strong>æ§åˆ¶å™¨å‡½æ•°&lt;/strong>ä¸»è¦è´Ÿè´£å¤„ç†httpè¯·æ±‚å’Œå“åº”è¯·æ±‚ã€‚&lt;/p>
&lt;p>ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// åˆ›å»ºé»˜è®¤çš„è·¯ç”±å¼•æ“å¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// é…ç½®è·¯ç”±ï¼špostè¯·æ±‚, uriè·¯å¾„ä¸ºï¼š/user/login, ç»‘å®šdoLoginæ§åˆ¶å™¨å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/user/login&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">doLogin&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ§åˆ¶å™¨å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">doLogin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è·å–postè¯·æ±‚å‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">username&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PostForm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">password&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PostForm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é€šè¿‡è¯·æ±‚ä¸Šä¸‹æ–‡å¯¹è±¡Context, ç›´æ¥å¾€å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;username=%s,password=%s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">password&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è·¯ç”±è§„åˆ™">
&lt;a href="#%e8%b7%af%e7%94%b1%e8%a7%84%e5%88%99" class="header-anchor">#&lt;/a>
è·¯ç”±è§„åˆ™
&lt;/h3>&lt;p>ä¸€æ¡è·¯ç”±è§„åˆ™ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š&lt;/p>
&lt;ul>
&lt;li>httpè¯·æ±‚æ–¹æ³•&lt;/li>
&lt;li>urlè·¯å¾„&lt;/li>
&lt;li>æ§åˆ¶å™¨å‡½æ•°&lt;/li>
&lt;/ul>
&lt;h4 id="httpè¯·æ±‚æ–¹æ³•">
&lt;a href="#http%e8%af%b7%e6%b1%82%e6%96%b9%e6%b3%95" class="header-anchor">#&lt;/a>
httpè¯·æ±‚æ–¹æ³•
&lt;/h4>&lt;p>å¸¸ç”¨çš„httpè¯·æ±‚æ–¹æ³•æœ‰ä¸‹é¢4ç§:&lt;/p>
&lt;ul>
&lt;li>GETï¼šæŸ¥Read-select&lt;/li>
&lt;li>POSTï¼šå¢Create-insert&lt;/li>
&lt;li>PUTï¼šæ”¹Update-update&lt;/li>
&lt;li>DELETE: åˆ Delete-delete&lt;/li>
&lt;/ul>
&lt;p>ç›®å‰å¸¸ç”¨çš„APIé£æ ¼æ˜¯RESTfulé£æ ¼ã€‚&lt;/p>
&lt;p>åœ¨RESTfulé£æ ¼ä¸­ï¼Œæ¯ä¸ªè·¯å¾„è¡¨ç¤ºä¸åŒçš„èµ„æºï¼Œé€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼è®¿é—®ç›¸åŒçš„è·¯å¾„è¡¨ç¤ºæ‰§è¡Œä¸åŒçš„æ“ä½œï¼ˆCRUD)ã€‚&lt;/p>
&lt;p>RESTful CRUDç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">POST /users &lt;span class="c1"># åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GET /users/1 &lt;span class="c1"># è·å–IDä¸º1çš„ç”¨æˆ·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PUT /users/1 &lt;span class="c1"># æ›´æ–°IDä¸º1çš„ç”¨æˆ·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DELETE /users/1 &lt;span class="c1"># åˆ é™¤IDä¸º1çš„ç”¨æˆ·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ³¨æ„ï¼š1æ˜¯è·¯å¾„å‚æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="urlè·¯å¾„">
&lt;a href="#url%e8%b7%af%e5%be%84" class="header-anchor">#&lt;/a>
urlè·¯å¾„
&lt;/h4>&lt;p>Ginæ¡†æ¶ä¸­ï¼Œurlè·¯å¾„æœ‰ä¸‰ç§å†™æ³•ï¼š&lt;/p>
&lt;ul>
&lt;li>é™æ€urlè·¯å¾„&lt;/li>
&lt;li>å¸¦è·¯å¾„å‚æ•°çš„urlè·¯å¾„&lt;/li>
&lt;li>å¸¦æ˜Ÿå·ï¼ˆ*ï¼‰æ¨¡ç³ŠåŒ¹é…å‚æ•°çš„urlè·¯å¾„&lt;/li>
&lt;/ul>
&lt;p>ä¸‹é¢çœ‹ä¸‹å„ç§urlè·¯ç”±çš„ä¾‹å­&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">// ä¾‹å­1ï¼Œ é™æ€Urlè·¯å¾„, å³ä¸å¸¦ä»»ä½•å‚æ•°çš„urlè·¯å¾„
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/users/center
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/user/111
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/food/12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// ä¾‹å­2ï¼Œå¸¦è·¯å¾„å‚æ•°çš„urlè·¯å¾„ï¼Œurlè·¯å¾„ä¸Šé¢å¸¦æœ‰å‚æ•°,å‚æ•°ç”±å†’å·ï¼ˆ:ï¼‰è·Ÿç€ä¸€ä¸ªå­—ç¬¦ä¸²å®šä¹‰ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// è·¯å¾„å‚æ•°å€¼å¯ä»¥æ˜¯æ•°å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//å®šä¹‰å‚æ•°:idï¼Œ å¯ä»¥åŒ¹é…/user/1, /user/899 /user/xiaoli è¿™ç±»Urlè·¯å¾„
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/user/:id
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//å®šä¹‰å‚æ•°:idï¼Œ å¯ä»¥åŒ¹é…/food/2, /food/100 /food/apple è¿™ç±»Urlè·¯å¾„
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/food/:id
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//å®šä¹‰å‚æ•°:typeå’Œ:pageï¼Œ å¯ä»¥åŒ¹é…/foods/2/1, /food/100/25 /food/apple/30 è¿™ç±»Urlè·¯å¾„
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/foods/:type/:page
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// ä¾‹å­3. å¸¦æ˜Ÿå·ï¼ˆ*ï¼‰æ¨¡ç³ŠåŒ¹é…å‚æ•°çš„urlè·¯å¾„
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// æ˜Ÿå·ä»£è¡¨åŒ¹é…ä»»æ„è·¯å¾„çš„æ„æ€, å¿…é¡»åœ¨*å·åé¢æŒ‡å®šä¸€ä¸ªå‚æ•°åï¼Œåé¢å¯ä»¥é€šè¿‡è¿™ä¸ªå‚æ•°è·å–*å·åŒ¹é…çš„å†…å®¹ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//ä»¥/foods/ å¼€å¤´çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ¹é…
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//åŒ¹é…ï¼š/foods/1ï¼Œ /foods/200, /foods/1/20, /foods/apple/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/foods/*path
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//å¯ä»¥é€šè¿‡pathå‚æ•°è·å–*å·åŒ¹é…çš„å†…å®¹ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="æ§åˆ¶å™¨å‡½æ•°">
&lt;a href="#%e6%8e%a7%e5%88%b6%e5%99%a8%e5%87%bd%e6%95%b0" class="header-anchor">#&lt;/a>
æ§åˆ¶å™¨å‡½æ•°
&lt;/h4>&lt;p>æ§åˆ¶å™¨å‡½æ•°å®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">type HandlerFunc func(*Context)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ§åˆ¶å™¨å‡½æ•°æ¥å—ä¸€ä¸ªä¸Šä¸‹æ–‡å‚æ•°ã€‚
å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡å‚æ•°ï¼Œè·å–httpè¯·æ±‚å‚æ•°ï¼Œå“åº”httpè¯·æ±‚ã€‚&lt;/p>
&lt;h3 id="é…ç½®è·¯ç”±ç¤ºä¾‹">
&lt;a href="#%e9%85%8d%e7%bd%ae%e8%b7%af%e7%94%b1%e7%a4%ba%e4%be%8b" class="header-anchor">#&lt;/a>
é…ç½®è·¯ç”±ç¤ºä¾‹
&lt;/h3>&lt;p>é…ç½®è·¯ç”±å°±æ˜¯åˆ©ç”¨è·¯ç”±è§„åˆ™å®šä¹‰è·¯ç”±ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//å®ä¾‹åŒ–ginå®ä¾‹å¯¹è±¡ã€‚åˆ›å»ºé»˜è®¤çš„è·¯ç”±å¼•æ“å¯¹è±¡ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// é…ç½®è·¯ç”±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//å®šä¹‰postè¯·æ±‚, urlè·¯å¾„ä¸ºï¼š/users, ç»‘å®šsaveUseræ§åˆ¶å™¨å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/users&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">saveUser&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//å®šä¹‰getè¯·æ±‚ï¼Œurlè·¯å¾„ä¸ºï¼š/users/:id ï¼ˆ:idæ˜¯å‚æ•°ï¼Œä¾‹å¦‚: /users/10, ä¼šåŒ¹é…è¿™ä¸ªurlæ¨¡å¼ï¼‰ï¼Œç»‘å®šgetUseræ§åˆ¶å™¨å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/users/:id&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">getUser&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//å®šä¹‰putè¯·æ±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PUT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/users/:id&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">updateUser&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//å®šä¹‰deleteè¯·æ±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DELETE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/users/:id&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">deleteUser&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//æ§åˆ¶å™¨å‡½æ•°å®ç°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">saveUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>&lt;span class="nx">å¿½ç•¥å®ç°&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">getUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>&lt;span class="nx">å¿½ç•¥å®ç°&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">updateUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>&lt;span class="nx">å¿½ç•¥å®ç°&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">deleteUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>&lt;span class="nx">å¿½ç•¥å®ç°&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æç¤ºï¼šå®é™…é¡¹ç›®å¼€å‘ä¸­ä¸è¦æŠŠè·¯ç”±å®šä¹‰å’Œæ§åˆ¶å™¨å‡½æ•°éƒ½å†™åœ¨ä¸€ä¸ªgoæ–‡ä»¶ï¼Œä¸æ–¹ä¾¿ç»´æŠ¤ï¼Œå¯ä»¥å‚è€ƒç¬¬ä¸€ç« çš„é¡¹ç›®ç»“æ„ï¼Œè§„åˆ’è‡ªå·±çš„ä¸šåŠ¡æ¨¡å—ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="è·¯ç”±åˆ†ç»„">
&lt;a href="#%e8%b7%af%e7%94%b1%e5%88%86%e7%bb%84" class="header-anchor">#&lt;/a>
&lt;strong>è·¯ç”±åˆ†ç»„&lt;/strong>
&lt;/h3>&lt;p>åœ¨åšapiå¼€å‘çš„æ—¶å€™ï¼Œå¦‚æœè¦æ”¯æŒå¤šä¸ªapiç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ†ç»„è·¯ç”±æ¥å®ç°apiç‰ˆæœ¬å¤„ç†ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">router&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ›å»ºv1ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">v1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/v1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åœ¨v1è¿™ä¸ªåˆ†ç»„ä¸‹ï¼Œæ³¨å†Œè·¯ç”±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/login&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">loginEndpoint&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/submit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">submitEndpoint&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/read&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">readEndpoint&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ›å»ºv2ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">v2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/v2&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åœ¨v2è¿™ä¸ªåˆ†ç»„ä¸‹ï¼Œæ³¨å†Œè·¯ç”±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/login&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">loginEndpoint&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/submit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">submitEndpoint&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/read&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">readEndpoint&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šé¢çš„ä¾‹å­å°†ä¼šæ³¨å†Œä¸‹é¢çš„è·¯ç”±ä¿¡æ¯ï¼š&lt;/p>
&lt;ul>
&lt;li>/v1/login&lt;/li>
&lt;li>/v1/submit&lt;/li>
&lt;li>/v1/read&lt;/li>
&lt;li>/v2/login&lt;/li>
&lt;li>/v2/submit&lt;/li>
&lt;li>/v2/read&lt;/li>
&lt;/ul>
&lt;p>è·¯ç”±åˆ†ç»„ï¼Œå…¶å®å°±æ˜¯è®¾ç½®äº†åŒä¸€ç±»&lt;strong>è·¯ç”±çš„urlå‰ç¼€&lt;/strong>ã€‚&lt;/p>
&lt;p>åˆ©ç”¨è·¯ç”±åˆ†ç»„ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å°†éœ€è¦æˆæƒå’Œä¸éœ€è¦æˆæƒçš„APIè¿›è¡Œåˆ†ç»„ç®¡ç†(åé¢ä»‹ç»ï¼‰ã€‚åŒæ—¶ä¹Ÿèƒ½å¤Ÿå°†ä»–ä»¬&lt;strong>åˆ†æ–‡ä»¶ä¿å­˜&lt;/strong>ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;code>routers/router.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">routers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// registerRouterGroupFunc å®šä¹‰ç±»å‹åˆ«åï¼Œç”¨äºæ³¨å†Œè·¯ç”±ç»„çš„å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">registerRouterGroupFunc&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å­˜å‚¨æ‰€æœ‰éœ€è¦æ³¨å†Œçš„è·¯ç”±ç»„å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">routerGroups&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">registerRouterGroupFunc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ·»åŠ è·¯ç”±ç»„å‡½æ•°åˆ°è·¯ç”±ç»„åˆ—è¡¨ä¸­
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">addRouterGroup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="nx">registerRouterGroupFunc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">routerGroups&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">routerGroups&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ³¨å†Œæ‰€æœ‰è·¯ç”±ç»„åˆ°ä¸»è·¯ç”±ç»„ä¸­
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">registerRoutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">register&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">routerGroups&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">register&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åŠ è½½æ‰€æœ‰è·¯ç”±ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">loadRouterGroups&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">loadDefaultRouter&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">loadManageRouter&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// InitRouter åˆå§‹åŒ–ä¸»è·¯ç”±å™¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">InitRouter&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ›å»ºé»˜è®¤çš„ Gin è·¯ç”±å™¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åŠ è½½å¹¶æ³¨å†Œæ‰€æœ‰è·¯ç”±ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">loadRouterGroups&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">registerRoutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯åŠ¨æœåŠ¡å™¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;localhost:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Start http serve error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>routers/defaultRouter.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">routers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/arlettebrook/learn/controllers&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åŠ è½½æ‰€æœ‰é»˜è®¤çš„è·¯ç”±ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¿™é‡Œæ§åˆ¶å™¨å‡½æ•°æ²¡æœ‰åˆ†ç»„ä¿å­˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">loadDefaultRouter&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">addRouterGroup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// defaultRouter := r.group(&amp;#34;/&amp;#34;) å¯ä»¥çœç•¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// defaultRouter.Get(...) ä¸ä¸‹é¢ç­‰æ•ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Hello, world!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>routers/manageRouter.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">routers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/arlettebrook/learn/controllers&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åŠ è½½æ‰€æœ‰ç®¡ç†è·¯ç”±ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">loadManageRouter&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">addRouterGroup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">manageRouter&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/manage&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">manageRouter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/addUser&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Add user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨main.goä¸­è°ƒç”¨&lt;code>routers.InitRouter()&lt;/code>å³å¯å¯åŠ¨ginæ¡†æ¶ã€‚æµè§ˆå™¨ä¸­è®¿é—®&lt;a class="link" href="http://localhost:8080/manage/addUser" target="_blank" rel="noopener"
>http://localhost:8080/manage/addUser&lt;/a>ã€ &lt;a class="link" href="http://localhost:8080/" target="_blank" rel="noopener"
>http://localhost:8080/&lt;/a>å°±å¯ä»¥è®¿é—®æ³¨å†Œçš„ä¸¤æ¡è·¯ç”±ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šé»˜è®¤è·¯ç”±ç»„,åœ¨&lt;code>/&lt;/code>,æ„æ€å°±æ˜¯ï¼š&lt;code>r.Group(&amp;quot;/&amp;quot;)&lt;/code>ä¸&lt;code>r.Get(&amp;quot;/&amp;quot;,...)&lt;/code>å±äºåŒä¸€ç»„ã€‚&lt;/p>
&lt;h3 id="æ§åˆ¶å™¨å‡½æ•°åˆ†ç»„">
&lt;a href="#%e6%8e%a7%e5%88%b6%e5%99%a8%e5%87%bd%e6%95%b0%e5%88%86%e7%bb%84" class="header-anchor">#&lt;/a>
æ§åˆ¶å™¨å‡½æ•°åˆ†ç»„
&lt;/h3>&lt;p>å½“æˆ‘ä»¬çš„é¡¹ç›®æ¯”è¾ƒå¤§çš„æ—¶å€™æœ‰å¿…è¦å¯¹æˆ‘ä»¬çš„æ§åˆ¶å™¨è¿›è¡Œåˆ†ç»„ã€‚&lt;/p>
&lt;p>å‚è€ƒ&lt;a class="link" href="#%e8%b7%af%e7%94%b1%e5%88%86%e7%bb%84" >è·¯ç”±åˆ†ç»„&lt;/a>ç¤ºä¾‹ï¼Œä½¿ç”¨æ§åˆ¶å™¨å‡½æ•°åˆ†ç»„å¯ä¿®æ”¹ä¸ºï¼š&lt;/p>
&lt;p>&lt;code>routers/defaultRouter.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">routers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/arlettebrook/learn/controllers&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">loadDefaultRouter&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">addRouterGroup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultController&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">controllers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultController&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">defaultController&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Index&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>routers/manageRouter.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">routers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/arlettebrook/learn/controllers&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">loadManageRouter&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">addRouterGroup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">manageRouter&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/manage&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">manageController&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">controllers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ManageController&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">manageRouter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/addUser&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">manageController&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">AddUser&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ·»åŠ çš„æ§åˆ¶å™¨åˆ†ç»„ï¼š&lt;/p>
&lt;p>&lt;code>controllers/defaultController.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">controllers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">DefaultController&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span> &lt;span class="nx">DefaultController&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Hello, world!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>controllers/manageController.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">controllers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ManageController&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span> &lt;span class="nx">ManageController&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">AddUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Add user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šä¸ºä»€ä¹ˆè¦åœ¨æ§åˆ¶å™¨é‡Œé¢å®šä¹‰å¯¹åº”çš„ç»“æ„ä½“å¯¹è±¡å‘¢ï¼Ÿ&lt;/p>
&lt;ul>
&lt;li>é˜²æ­¢åœ¨åŒä¸€ä¸ªåŒ…ä¸‹å‡ºç°åŒåæ–¹æ³•ã€‚&lt;/li>
&lt;li>æ›´åŠ è¯­ä¹‰åŒ–ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚&lt;/li>
&lt;li>å¯ä»¥å®ç°&lt;strong>æ§åˆ¶å™¨ç»§æ‰¿&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h4 id="æ§åˆ¶å™¨ç»§æ‰¿">
&lt;a href="#%e6%8e%a7%e5%88%b6%e5%99%a8%e7%bb%a7%e6%89%bf" class="header-anchor">#&lt;/a>
æ§åˆ¶å™¨ç»§æ‰¿
&lt;/h4>&lt;p>æ§åˆ¶å™¨ç»§æ‰¿ï¼Œå¯ä»¥å°†ä¸€äº›å…±ç”¨çš„æ§åˆ¶å™¨å‡½æ•°å°è£…å‡ºæ¥ï¼Œå®ç°ä»£ç ä¼˜åŒ–ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;p>&lt;code>controllers/baseController.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">controllers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">BaseController&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">BaseController&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Ok&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Success!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">BaseController&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fail&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Fail!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>controllers/defaultController.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">controllers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">DefaultController&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">BaseController&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span> &lt;span class="nx">DefaultController&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Hello, world!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>routers/defaultRouter.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">routers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/arlettebrook/learn/controllers&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">loadDefaultRouter&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">addRouterGroup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultController&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">controllers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultController&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">defaultController&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Index&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/extend/s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">defaultController&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ok&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/extend/f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">defaultController&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Fail&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹åº”çš„æ§åˆ¶å™¨ç»§æ‰¿&lt;code>BaseController&lt;/code>ï¼Œé‚£ä¹ˆè¯¥æ§åˆ¶å™¨å°±æœ‰å¯¹åº”çš„å…¬æœ‰æ§åˆ¶å™¨å‡½æ•°ã€‚&lt;/p>
&lt;p>TODO: åˆ©ç”¨æ§åˆ¶å™¨ï¼Œè¿˜èƒ½å®ç°æ›´å¤šçš„æ“ä½œï¼Œ&lt;strong>æœªå®Œå¾…ç»­&amp;hellip;&lt;/strong>&lt;/p>
&lt;p>&lt;strong>è¡¥å……&lt;/strong>ï¼šä¸Šé¢çš„ç¤ºä¾‹ä¸­&lt;code>DefaultController&lt;/code> æ˜¯æ— çŠ¶æ€çš„ï¼ˆstatelessï¼‰ï¼Œå³å®ƒä¸åœ¨æˆå‘˜å˜é‡ä¸­ä¿å­˜ä¸ç‰¹å®šè¯·æ±‚ç›¸å…³çš„æ•°æ®ï¼Œé‚£ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸ä¼šå‘ç”Ÿæ•°æ®å†²çªã€‚ç„¶è€Œï¼Œå¦‚æœ &lt;code>DefaultController&lt;/code> æœ‰çŠ¶æ€ï¼ˆstatefulï¼‰ï¼Œå³å®ƒåœ¨æˆå‘˜å˜é‡ä¸­ä¿å­˜ä¸è¯·æ±‚ç›¸å…³çš„æ•°æ®ï¼Œé‚£ä¹ˆå¤šä¸ªç”¨æˆ·è¯·æ±‚åŒæ—¶è®¿é—®æ—¶å¯èƒ½ä¼šå‘ç”Ÿæ•°æ®å†²çªã€‚&lt;/p>
&lt;p>ä»¥ä¸‹æ˜¯ä¸€äº›ç¡®ä¿çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>æ— çŠ¶æ€æ§åˆ¶å™¨&lt;/strong>: ç¡®ä¿æ§åˆ¶å™¨ä¸ä¿å­˜ä»»ä½•ä¸è¯·æ±‚ç›¸å…³çš„çŠ¶æ€ä¿¡æ¯ã€‚æ‰€æœ‰çš„çŠ¶æ€ä¿¡æ¯åº”ä¿å­˜åœ¨è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¸­æˆ–ä¼ é€’ç»™æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä½¿ç”¨ä¸­é—´ä»¶æˆ–å±€éƒ¨å˜é‡&lt;/strong>: å¦‚æœéœ€è¦ä¿å­˜è¯·æ±‚ç›¸å…³çš„æ•°æ®ï¼Œå°†è¿™äº›æ•°æ®ä¿å­˜åœ¨è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¸­æˆ–æ–¹æ³•çš„å±€éƒ¨å˜é‡ä¸­ï¼Œè€Œä¸æ˜¯æ§åˆ¶å™¨çš„æˆå‘˜å˜é‡ä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ¯æ¬¡è¯·æ±‚åˆ›å»ºæ–°çš„æ§åˆ¶å™¨å®ä¾‹&lt;/strong>: åœ¨è·¯ç”±å™¨ä¸­ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„æ§åˆ¶å™¨å®ä¾‹ã€‚è¿™æ ·æ¯ä¸ªè¯·æ±‚éƒ½æœ‰è‡ªå·±çš„æ§åˆ¶å™¨å®ä¾‹ï¼Œä¸ä¼šå‘ç”Ÿæ•°æ®å†²çªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultController&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">controllers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultController&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultController&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="è·å–è¯·æ±‚å‚æ•°">
&lt;a href="#%e8%8e%b7%e5%8f%96%e8%af%b7%e6%b1%82%e5%8f%82%e6%95%b0" class="header-anchor">#&lt;/a>
è·å–è¯·æ±‚å‚æ•°
&lt;/h2>&lt;p>æœ¬ç« ä»‹ç»Ginæ¡†æ¶è·å–è¯·æ±‚å‚æ•°çš„æ–¹å¼ã€‚&lt;/p>
&lt;h3 id="è·å–æŸ¥è¯¢å‚æ•°">
&lt;a href="#%e8%8e%b7%e5%8f%96%e6%9f%a5%e8%af%a2%e5%8f%82%e6%95%b0" class="header-anchor">#&lt;/a>
è·å–æŸ¥è¯¢å‚æ•°
&lt;/h3>&lt;p>æŸ¥è¯¢ï¼ˆqueryï¼‰å‚æ•°æ˜¯urlè·¯å¾„ä¸­&lt;code>?&lt;/code>åé¢çš„æ‰€æœ‰é”®å€¼å¯¹ï¼Œä»–ä»¬ç”¨&lt;code>&amp;amp;&lt;/code>ç¬¦åˆè¿æ¥ã€‚urlä¾‹å­ï¼š/query?id=1234&amp;amp;name=Manu&amp;amp;value=111&lt;/p>
&lt;p>Ginæ¡†æ¶è·å–æŸ¥è¯¢å‚æ•°çš„&lt;strong>å¸¸ç”¨å‡½æ•°&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>func&lt;/strong> (c *Context) &lt;strong>Query&lt;/strong>(key string) string
&lt;ul>
&lt;li>é”®ä¸å­˜åœ¨è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>func&lt;/strong> (c *Context) &lt;strong>DefaultQuery&lt;/strong>(key, defaultValue string) string
&lt;ul>
&lt;li>é”®ä¸å­˜åœ¨ï¼Œä½¿ç”¨é»˜è®¤å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>func&lt;/strong> (c *Context) &lt;strong>GetQuery&lt;/strong>(key string) (string, bool)
&lt;ul>
&lt;li>é”®å­˜åœ¨è¿”å›å€¼å’Œtrueã€‚é”®ä¸å­˜åœ¨è¿”å›ç©ºå­—ç¬¦ä¸²å’Œfalseã€‚é”®çš„å€¼ä¸ºç©ºå­—ç¬¦ä¸²ä¹Ÿè¿”å›ç©ºå­—ç¬¦ä¸²å’Œfalseã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>æ³¨æ„ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è·å–çš„æŸ¥è¯¢å‚æ•°ç±»å‹éƒ½ä¸ºstringã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šå¸¸æƒ…å†µä¸‹æŸ¥è¯¢å‚æ•°å‡ºç°åœ¨GETè¯·æ±‚å½“ä¸­ï¼Œå› ä¸ºGETè¯·æ±‚å‚æ•°ä¼šå‡ºç°åœ¨urlè·¯å¾„ä¸­ã€‚å½“ç„¶åœ¨POSTè¯·æ±‚ä¸­ä¹Ÿèƒ½å¤Ÿè·å–æŸ¥è¯¢å‚æ•°ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š/user?uid=20&amp;amp;page=1&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">uid&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">page&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DefaultQuery&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;page&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;uid=%v page=%v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">uid&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è·å–è·¯å¾„å‚æ•°">
&lt;a href="#%e8%8e%b7%e5%8f%96%e8%b7%af%e5%be%84%e5%8f%82%e6%95%b0" class="header-anchor">#&lt;/a>
è·å–è·¯å¾„å‚æ•°
&lt;/h3>&lt;p>è·¯å¾„ï¼ˆparamï¼‰å‚æ•°æ˜¯åŒ…å«åœ¨urlè·¯å¾„ä¸­çš„å‚æ•°ï¼Œé€šå¸¸åœ¨urlä¸­ä¸å®¹æ˜“åŒºåˆ†ï¼Œåªæœ‰åœ¨ç»‘å®šè·¯å¾„å‚æ•°çš„åœ°æ–¹æ‰èƒ½æ­£ç¡®åˆ¤æ–­ã€‚&lt;/p>
&lt;p>ç»‘å®šè·¯å¾„å‚æ•°çš„è¯­æ³•æ˜¯&lt;code>/:+å‚æ•°å&lt;/code>ï¼Œå¦‚&lt;code>/user/:id&lt;/code>ï¼Œå°±æ˜¯åœ¨userè·¯å¾„ä¸‹ç»‘å®šä¸€ä¸ªidå‚æ•°ï¼Œé‚£ä¹ˆ/user/1, /user/2&amp;hellip;, useråé¢çš„ä¸€çº§éƒ½æ˜¯è·¯å¾„å‚æ•°ã€‚&lt;/p>
&lt;p>å½“ç„¶è·¯å¾„å‚æ•°ä¹Ÿæ”¯æŒåµŒå¥—ï¼Œå¦‚ï¼š/user/:id/:name/:age, /user/001/jack/18&lt;/p>
&lt;p>è·å–è·¯å¾„å‚æ•°å¸¸ç”¨å‡½æ•°ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>func&lt;/strong> (c *Context) &lt;strong>Param&lt;/strong>(key string) string
&lt;ul>
&lt;li>è·å–è·¯å¾„ä¸­æŒ‡å®šä½ç½®çš„å‚æ•°ï¼Œé”®ä¸å­˜åœ¨ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚&lt;/li>
&lt;li>æ³¨æ„ï¼šé”®åè¦ä¸ç»‘å®šçš„è·¯å¾„å‚æ•°åä¸€ç›´ï¼Œæ²¡æœ‰å†’å·ã€‚ä½ç½®è¦ä¸€ä¸€å¯¹åº”ï¼Œå¦åˆ™è¯·æ±‚ä¼š404.&lt;/li>
&lt;li>é€šå¸¸è·å–GETè¯·æ±‚ä¸­çš„è·¯å¾„å‚æ•°ï¼Œä½†ä¹Ÿèƒ½è·å–POSTè¯·æ±‚ä¸­çš„è·¯å¾„å‚æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>è·å–è·¯å¾„å‚æ•°åªæœ‰è¿™ä¸€ä¸ªæ–¹æ³•ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼šåŸŸå/user/20&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/user/:uid&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">uid&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Param&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;userID=%s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">uid&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è·å–è¡¨å•å‚æ•°">
&lt;a href="#%e8%8e%b7%e5%8f%96%e8%a1%a8%e5%8d%95%e5%8f%82%e6%95%b0" class="header-anchor">#&lt;/a>
è·å–è¡¨å•å‚æ•°
&lt;/h3>&lt;p>è¡¨å•å‚æ•°æ˜¯ä½äºè¯·æ±‚ä½“ä¸­çš„ï¼Œæ‰€ä»¥åªé€‚ç”¨äºPOSTè¯·æ±‚ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ä¸€èˆ¬è¯´è·å–è¡¨å•å‚æ•°å°±æ˜¯è·å–POSTè¯·æ±‚å‚æ•°ã€‚&lt;/p>
&lt;p>è·å–Postè¯·æ±‚å‚æ•°çš„å¸¸ç”¨å‡½æ•°ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>func&lt;/strong> (c *Context) &lt;strong>PostForm&lt;/strong>(key string) string
&lt;ul>
&lt;li>ä»è¯·æ±‚ä½“ï¼ˆè¡¨å•ï¼‰ä¸­è·å–æŒ‡å®šé”®çš„å€¼ï¼Œä¸å­˜åœ¨è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>func&lt;/strong> (c *Context) &lt;strong>DefaultPostForm&lt;/strong>(key, defaultValue string) string
&lt;ul>
&lt;li>é”®ä¸å­˜åœ¨ï¼ŒæŒ‡å®šé»˜è®¤å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>func&lt;/strong> (c *Context) &lt;strong>GetPostForm&lt;/strong>(key string) (string, bool)
&lt;ul>
&lt;li>é”®ä¸å­˜åœ¨è¿”å›ç©ºå­—ç¬¦ä¸²å’Œfalseï¼Œå­˜åœ¨è¿”å›å€¼å’Œtrueã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ³¨æ„ï¼š
&lt;ul>
&lt;li>è·å–çš„å‚æ•°ç±»å‹ä½†æ˜¯stringã€‚&lt;/li>
&lt;li>ä»¥ä¸Šæ–¹æ³•ä¸èƒ½è·å–è¯·æ±‚ä½“ä¸­çš„jsonã€xmlç­‰åŸå§‹æ•°æ®ã€‚åªèƒ½è·å–è¡¨å•æ•°æ®ã€‚
&lt;ul>
&lt;li>è·å–åŸå§‹æ•°æ®ï¼Œå¯ä»¥é€šè¿‡&lt;a class="link" href="#%e5%b0%86%e8%af%b7%e6%b1%82%e5%8f%82%e6%95%b0%e7%bb%91%e5%ae%9a%e5%88%b0%e7%bb%93%e6%9e%84%e4%bd%93%e5%af%b9%e8%b1%a1" >å‚æ•°ä¸ç»“æ„ä½“å¯¹è±¡ç»‘å®š&lt;/a>è·å–ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/doAddUser&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">username&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PostForm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">password&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PostForm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">age&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DefaultPostForm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;20&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;usernmae&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">password&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">age&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°ç»“æ„ä½“å¯¹è±¡">
&lt;a href="#%e5%b0%86%e8%af%b7%e6%b1%82%e5%8f%82%e6%95%b0%e7%bb%91%e5%ae%9a%e5%88%b0%e7%bb%93%e6%9e%84%e4%bd%93%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
å°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°ç»“æ„ä½“å¯¹è±¡
&lt;/h3>&lt;p>å‰é¢è·å–å‚æ•°çš„æ–¹å¼éƒ½æ˜¯ä¸€ä¸ªä¸ªå‚æ•°çš„è¯»å–ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼ŒGinæ¡†æ¶æ”¯æŒæ ¹æ®è¯·æ±‚å‚æ•°ç±»å‹è‡ªåŠ¨ç»‘å®šåˆ°ä¸€ä¸ªstructå¯¹è±¡ã€‚&lt;/p>
&lt;p>ç”¨åˆ°çš„æ–¹æ³•æ˜¯&lt;code>Bind&lt;/code>å’Œ&lt;code>ShouldBind&lt;/code>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>äºŒè€…ä¼šæ ¹æ®è¯·æ±‚å‚æ•°çš„ç±»å‹è‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„&lt;strong>ç»‘å®šå¼•æ“&lt;/strong>è¿›è¡Œç»‘å®š&lt;/p>
&lt;ul>
&lt;li>æ ¹æ®è¯·æ±‚å¤´çš„MIMEç±»å‹åˆ¤æ–­ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ”¯æŒæŸ¥è¯¢ã€è¡¨å•ã€è¯·æ±‚ä½“åŸå§‹æ•°æ®ï¼ˆå¸¸ç”¨ï¼šxmlã€jsonï¼‰å‚æ•°ï¼Œ&lt;strong>ä¸æ”¯æŒè·¯å¾„å‚æ•°&lt;/strong>ã€‚&lt;/p>
&lt;ul>
&lt;li>å¦‚æœéœ€è¦å°†è·¯å¾„å‚æ•°ç»‘å®šåˆ°ç»“æ„ä½“ï¼Œéœ€è¦æŒ‡å®šç»‘å®šå¼•æ“ä¸º&lt;code>XxxUri&lt;/code>ï¼Œå¹¶ä¸”ç”¨&lt;code>uri&lt;/code>æ ‡ç­¾æŒ‡å®šå­—æ®µã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ä¹Ÿå¯æŒ‡å®šå¯¹åº”çš„ç»‘å®šå¼•æ“å°±è¡Œç»‘å®šï¼Œå¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>BindQuery&lt;/code>ã€&lt;code>ShouldBindQuery&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>BindJSON&lt;/code>ã€&lt;code>ShouldBindJSON&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ShouldBindBodyWithJSON&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ShouldBindJSON&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>äºŒè€…éƒ½æ˜¯å°†è¯·æ±‚ä½“ä¸­çš„jsonæ•°æ®ç»‘å®šåˆ°ç»“æ„ä½“å¯¹è±¡&lt;/p>
&lt;p>&lt;strong>åŒºåˆ«æ˜¯&lt;/strong>ï¼šä½¿ç”¨&lt;code>ShouldBindBodyWithJSON&lt;/code>ç»‘å®šåï¼Œè¯·æ±‚ä½“å†…å®¹ä¸ä¼šè¢«æ¶ˆè€—ï¼Œè¯·æ±‚ä½“çš„å†…å®¹è¿˜èƒ½ç”¨&lt;code>ShouldBindBodyWithJSON&lt;/code>&lt;strong>é‡å¤ä½¿ç”¨&lt;/strong>ï¼Œè€Œ&lt;strong>å…¶ä»–çš„ç»‘å®šæ–¹æ³•åªèƒ½ç»‘å®šä¸€æ¬¡&lt;/strong>ï¼Œ&lt;strong>ä¼šæ¶ˆè€—è¯·æ±‚ä½“å†…å®¹&lt;/strong>ï¼Œè¯»å–åè¯·æ±‚ä½“å†…å®¹&lt;strong>ä¸å¯å†ç”¨&lt;/strong>ã€‚&lt;/p>
&lt;p>å¦‚æœ&lt;strong>è¯·æ±‚ä½“&lt;/strong>åªè¯»å–ä¸€æ¬¡ï¼Œä½¿ç”¨&lt;code>ShouldBindJSON&lt;/code>æ€§èƒ½æ›´å¥½ã€‚è¯»å–å¤šæ¬¡åªèƒ½ç”¨&lt;code>ShouldBindBodyWithJSON&lt;/code>ã€‚å¦‚åœ¨ä¸­é—´ä»¶ä¸­è¿›è¡ŒéªŒè¯åå†å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚&lt;/p>
&lt;p>ä¸€å¥è¯å¸¦&lt;code>Body&lt;/code>çš„å¯ä»¥ä½¿ç”¨&lt;strong>ç›¸åŒ&lt;/strong>æ–¹æ³•&lt;strong>é‡å¤ç»‘å®š&lt;/strong>ã€‚&lt;strong>æ²¡æœ‰çš„åªèƒ½ç»‘å®šä¸€æ¬¡&lt;/strong>ã€‚å†æ¬¡ç»‘å®šä¼šæŠ¥&lt;strong>EOFé”™è¯¯&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>BindUri&lt;/code>ã€&lt;code>ShouldBindUri&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>ç»‘å®šè·¯å¾„å‚æ•°ï¼Œæ³¨æ„éœ€è¦ç”¨&lt;code>uri&lt;/code>æ ‡ç­¾æŒ‡å®šå­—æ®µã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&amp;hellip;&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ç»‘å®šçš„ç»“æ„ä½“å­—æ®µéœ€è¦ä¸å‚æ•°çš„é”®ä¸€ç›´ï¼Œæ‰èƒ½ç»‘å®šæˆåŠŸã€‚å¦‚æœä¸ä¸€è‡´éœ€è¦ç”¨ç»“æ„ä½“æ ‡ç­¾æŒ‡æ˜ã€‚æ ¼å¼ä¸º&lt;code>å‚æ•°ç±»å‹:é”®å&lt;/code>ï¼Œå¸¸ç”¨çš„ç»‘å®šæ ‡ç­¾ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>form&lt;/code>: æŒ‡å®š&lt;strong>è¡¨å•å‚æ•°&lt;/strong>å’Œ&lt;strong>æŸ¥è¯¢å‚æ•°&lt;/strong>çš„é”®ã€‚&lt;/li>
&lt;li>&lt;code>json&lt;/code>ï¼šæŒ‡å®šjsonå‚æ•°çš„é”®ã€‚&lt;/li>
&lt;li>&lt;code>xml&lt;/code>ï¼šæŒ‡å®šxmlå‚æ•°çš„é”®ã€‚&lt;/li>
&lt;li>&lt;code>uri&lt;/code>ï¼šæŒ‡å®š&lt;strong>è·¯å¾„å‚æ•°&lt;/strong>çš„é”®ã€‚&lt;/li>
&lt;li>&lt;code>binding&lt;/code>ï¼šæŒ‡å®š&lt;strong>ç»‘å®šéªŒè¯&lt;/strong>ï¼Œå¦‚æœéªŒè¯å¤±è´¥ï¼Œç»‘å®šä¼šå¤±è´¥ã€‚å¤šä¸ªå±æ€§ç”¨&lt;code>,&lt;/code>åˆ†éš”ã€‚å¸¸ç”¨å±æ€§ï¼š
&lt;ul>
&lt;li>å¿…å¡«å­—æ®µï¼ˆ&lt;code>required&lt;/code>ï¼‰ï¼šç¡®ä¿å­—æ®µåœ¨è¯·æ±‚ä¸­å¿…é¡»å­˜åœ¨ä¸”ä¸èƒ½ä¸ºç©ºã€‚&lt;/li>
&lt;li>æœ€å°é•¿åº¦ï¼ˆ&lt;code>min&lt;/code>ï¼‰: ç¡®ä¿å­—ç¬¦ä¸²æˆ–æ•°ç»„çš„é•¿åº¦ä¸å°äºæŒ‡å®šå€¼ã€‚&lt;/li>
&lt;li>æœ€å¤§é•¿åº¦ï¼ˆ&lt;code>max&lt;/code>ï¼‰: ç¡®ä¿å­—ç¬¦ä¸²æˆ–æ•°ç»„çš„é•¿åº¦ä¸å¤§äºæŒ‡å®šå€¼ã€‚&lt;/li>
&lt;li>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆ&lt;code>regexp&lt;/code>ï¼‰: ç¡®ä¿å­—ç¬¦ä¸²ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Id&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`form:&amp;#34;id&amp;#34; json:&amp;#34;id&amp;#34; xml:&amp;#34;id&amp;#34; uri:&amp;#34;id&amp;#34; binding:&amp;#34;required&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`form:&amp;#34;name&amp;#34; json:&amp;#34;name&amp;#34; xml:&amp;#34;name&amp;#34; uri:&amp;#34;name&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Idå­—æ®µåœ¨è¡¨å•å’ŒæŸ¥è¯¢å‚æ•°ä¸­çš„é”®æ˜¯idï¼Œjsonæ•°æ®ä¸­çš„é”®æ˜¯idï¼Œxmlæ•°æ®ä¸­çš„é”®æ˜¯idï¼Œè·¯å¾„å‚æ•°ä¸­çš„é”®æ˜¯idï¼Œå¹¶ä¸”è¯¥å­—æ®µåœ¨è¯·æ±‚å‚æ•°ä¸­å¿…é¡»å­˜åœ¨ä¸”ä¸ä¸ºç©ºï¼Œæ‰èƒ½ç»‘å®šæˆåŠŸã€‚Nameå­—æ®µåŒç†ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>binding&lt;/code> æ ‡ç­¾é€šå¸¸ä¸å…¶ä»–æ ‡ç­¾ï¼ˆå¦‚ &lt;code>json&lt;/code>ã€&lt;code>form&lt;/code> ç­‰ï¼‰ç»“åˆä½¿ç”¨ï¼Œä»¥æŒ‡å®šé”®åå’Œç»‘å®šéªŒè¯ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>äºŒè€…åŒºåˆ«ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Bind&lt;/code>ç»‘å®šç»“æ„ä½“å¤±è´¥ï¼Œä¼šè‡ªåŠ¨å“åº”400é”™è¯¯ï¼šBad Request&lt;/li>
&lt;li>&lt;code>ShouldBind&lt;/code>ç»‘å®šå¤±è´¥ä¸ä¼šè‡ªåŠ¨å“åº”é”™è¯¯ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†å“åº”é”™è¯¯ã€‚&lt;/li>
&lt;li>ä¸€èˆ¬æ¨èä½¿ç”¨&lt;code>ShouldBind&lt;/code>ï¼Œæ›´å®¹æ˜“å®šåˆ¶åŒ–ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Username&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;username&amp;#34; binding:&amp;#34;required,min=3,max=20&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Password&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;password&amp;#34; binding:&amp;#34;required,min=8&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Email&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;email&amp;#34; binding:&amp;#34;required,email&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Age&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`json:&amp;#34;age&amp;#34; binding:&amp;#34;required,min=18,max=65&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/register&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="nx">User&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ShouldBindJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">()})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;registration successful&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Username&lt;/code> å­—æ®µå¿…é¡»å­˜åœ¨ä¸”é•¿åº¦åœ¨ 3 åˆ° 20 ä¹‹é—´ã€‚&lt;/li>
&lt;li>&lt;code>Password&lt;/code> å­—æ®µå¿…é¡»å­˜åœ¨ä¸”é•¿åº¦è‡³å°‘ä¸º 8ã€‚&lt;/li>
&lt;li>&lt;code>Email&lt;/code> å­—æ®µå¿…é¡»å­˜åœ¨ä¸”ç¬¦åˆ email æ ¼å¼ã€‚&lt;/li>
&lt;li>&lt;code>Age&lt;/code> å­—æ®µå¿…é¡»å­˜åœ¨ä¸”å€¼åœ¨ 18 åˆ° 65 ä¹‹é—´ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="ginå¦‚ä½•è·å–å®¢æˆ·ip">
&lt;a href="#gin%e5%a6%82%e4%bd%95%e8%8e%b7%e5%8f%96%e5%ae%a2%e6%88%b7ip" class="header-anchor">#&lt;/a>
Ginå¦‚ä½•è·å–å®¢æˆ·ip
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è·å–ç”¨æˆ·IP
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ip&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ClientIP&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">remoteIP&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">RemoteIP&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>&lt;code>ClientIP&lt;/code>æ–¹æ³•ä¼š&lt;strong>å°½åŠ›&lt;/strong>è¿”å›å®¢æˆ·ç«¯çœŸå®ipã€‚ä¼šè€ƒè™‘ä»£ç†çš„æƒ…å†µã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>RemoteIP&lt;/code>æ–¹æ³•è¿”å›ä¸æœåŠ¡å™¨ç›´æ¥è¿æ¥çš„ipï¼Œä¸è€ƒè™‘ä»£ç†çš„æƒ…å†µã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>åŒºåˆ«ï¼ˆäº†è§£ï¼‰ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>æ•°æ®æ¥æº&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>RemoteIP()&lt;/code> ç›´æ¥ä» &lt;code>c.Request.RemoteAddr&lt;/code> è·å– IP åœ°å€ã€‚&lt;/li>
&lt;li>&lt;code>ClientIP()&lt;/code> ä¼˜å…ˆä»è¯·æ±‚å¤´ï¼ˆå¦‚ &lt;code>X-Forwarded-For&lt;/code>ã€&lt;code>X-Real-IP&lt;/code> ç­‰ï¼‰ä¸­è·å– IP åœ°å€ï¼Œå¦‚æœè¯·æ±‚å¤´ä¸­æ²¡æœ‰è¿™äº›å­—æ®µï¼Œåˆ™é€€å›åˆ° &lt;code>RemoteAddr&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ä½¿ç”¨åœºæ™¯&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>RemoteIP()&lt;/code> æ›´é€‚ç”¨äºéœ€è¦è·å–ç›´æ¥è¿æ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ IP åœ°å€çš„åœºæ™¯ã€‚&lt;/li>
&lt;li>&lt;code>ClientIP()&lt;/code> æ›´é€‚ç”¨äºéœ€è¦è·å–ç»è¿‡ä»£ç†æœåŠ¡å™¨åçš„å®¢æˆ·ç«¯çœŸå® IP åœ°å€çš„åœºæ™¯ï¼Œé€‚ç”¨äºæœ‰åå‘ä»£ç†æˆ–è´Ÿè½½å‡è¡¡å™¨çš„ç¯å¢ƒã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>å¤„ç†ä»£ç†&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>RemoteIP()&lt;/code> ä¸è€ƒè™‘ä»£ç†çš„æƒ…å†µï¼Œåªè¿”å›ç›´æ¥è¿æ¥çš„å®¢æˆ·ç«¯ IPã€‚&lt;/li>
&lt;li>&lt;code>ClientIP()&lt;/code> è€ƒè™‘ä»£ç†çš„æƒ…å†µï¼Œä¼˜å…ˆä»è¯·æ±‚å¤´è·å–å®¢æˆ·ç«¯çš„çœŸå® IPï¼Œé€‚ç”¨äºå¤„ç†ç»è¿‡å¤šä¸ªä»£ç†çš„è¯·æ±‚ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="è·å–æ–‡ä»¶ä¸Šä¼ å‚æ•°">
&lt;a href="#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0%e5%8f%82%e6%95%b0" class="header-anchor">#&lt;/a>
è·å–æ–‡ä»¶ä¸Šä¼ å‚æ•°
&lt;/h3>&lt;p>å‚è€ƒ&lt;a class="link" href="#Gin%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0" >Ginæ–‡ä»¶ä¸Šä¼ &lt;/a>ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å“åº”è¯·æ±‚å‚æ•°">
&lt;a href="#%e5%93%8d%e5%ba%94%e8%af%b7%e6%b1%82%e5%8f%82%e6%95%b0" class="header-anchor">#&lt;/a>
å“åº”è¯·æ±‚å‚æ•°
&lt;/h2>&lt;p>æœ¬ç« ä»‹ç»å¤„ç†å®Œhttpè¯·æ±‚åå¦‚ä½•å“åº”è¯·æ±‚ï¼ŒGinæ¡†æ¶æ”¯æŒä»¥å­—ç¬¦ä¸²ã€jsonã€xmlã€æ–‡ä»¶ç­‰æ ¼å¼å“åº”è¯·æ±‚ã€‚&lt;/p>
&lt;p>gin.Contextä¸Šä¸‹æ–‡å¯¹è±¡æ”¯æŒå¤šç§è¿”å›å¤„ç†ç»“æœï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸åŒçš„å“åº”æ–¹å¼ã€‚&lt;/p>
&lt;h3 id="ä»¥å­—ç¬¦ä¸²æ ¼å¼å“åº”è¯·æ±‚">
&lt;a href="#%e4%bb%a5%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%a0%bc%e5%bc%8f%e5%93%8d%e5%ba%94%e8%af%b7%e6%b1%82" class="header-anchor">#&lt;/a>
ä»¥å­—ç¬¦ä¸²æ ¼å¼å“åº”è¯·æ±‚
&lt;/h3>&lt;p>é€šè¿‡Stringæ–¹æ³•è¿”å›å­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;p>æ–¹æ³•å®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">format&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">values&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">å‚æ•°&lt;/th>
&lt;th style="text-align:left">è¯´æ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">code&lt;/td>
&lt;td style="text-align:left">httpçŠ¶æ€ç &lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">format&lt;/td>
&lt;td style="text-align:left">è¿”å›ç»“æœï¼Œæ”¯æŒç±»ä¼¼Sprintfå‡½æ•°ä¸€æ ·çš„å­—ç¬¦ä¸²æ ¼å¼å®šä¹‰ï¼Œä¾‹å¦‚,%d ä»£è¡¨æ’å…¥æ•´æ•°ï¼Œ%sä»£è¡¨æ’å…¥å­—ç¬¦ä¸²&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">values&lt;/td>
&lt;td style="text-align:left">ä»»æ„ä¸ªformatå‚æ•°å®šä¹‰çš„å­—ç¬¦ä¸²æ ¼å¼å‚æ•°&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/news&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">aid&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;aid&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;aid=%s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">aid&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æç¤ºï¼š net/httpåŒ…å®šä¹‰äº†å¤šç§å¸¸ç”¨çš„çŠ¶æ€ç å¸¸é‡ï¼Œä¾‹å¦‚ï¼šhttp.StatusOK == 200ï¼Œ http.StatusMovedPermanently == 301ï¼Œ http.StatusNotFound == 404, http.StatusBadRequest == 400ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è€ƒnet/httpåŒ…&lt;/p>
&lt;/blockquote>
&lt;h3 id="ä»¥jsonæ ¼å¼å“åº”è¯·æ±‚">
&lt;a href="#%e4%bb%a5json%e6%a0%bc%e5%bc%8f%e5%93%8d%e5%ba%94%e8%af%b7%e6%b1%82" class="header-anchor">#&lt;/a>
ä»¥jsonæ ¼å¼å“åº”è¯·æ±‚
&lt;/h3>&lt;p>æˆ‘ä»¬å¼€å‘apiæ¥å£çš„æ—¶å€™å¸¸ç”¨çš„æ ¼å¼å°±æ˜¯jsonã€‚&lt;/p>
&lt;p>é€šè¿‡&lt;code>JSON&lt;/code>æ–¹æ³•è¿”å›jsonæ•°æ®ã€‚&lt;/p>
&lt;p>æ–¹æ³•å®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-GO" data-lang="GO">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;ul>
&lt;li>codeï¼šå“åº”çš„httpçŠ¶æ€ç ã€‚&lt;/li>
&lt;li>objï¼šå“åº”çš„jsonæ•°æ®ã€‚ç±»å‹æ˜¯å¯ä»¥åºåˆ—åŒ–ä¸ºjsonç±»å‹çš„æ•°æ®ï¼Œå¦‚ï¼šç»“æ„ä½“å¯¹è±¡ã€map[string]anyã€‚Ginæ¡†æ¶ä¼šè‡ªåŠ¨å°†å®ƒä»¬åºåˆ—åŒ–ä¸ºJSONæ•°æ®ï¼Œå¹¶å°†å®ƒä»¬æ”¾åœ¨è¯·æ±‚ä½“å½“ä¸­ã€‚
&lt;ul>
&lt;li>Ginæ¡†æ¶ä¸ºæ–¹ä¾¿å°†mapæ•°æ®ä½œä¸ºjsonå“åº”ï¼Œæä¾›äº†ä¸€ä¸ªå¿«æ·ç±»å‹ï¼š&lt;code>type H map[string]any&lt;/code>ï¼Œ&lt;code>gin.H&lt;/code>æ˜¯&lt;code>map[string]any&lt;/code>ç±»å‹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Id&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`form:&amp;#34;id&amp;#34; json:&amp;#34;id&amp;#34; xml:&amp;#34;id&amp;#34; uri:&amp;#34;id&amp;#34; binding:&amp;#34;required&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`form:&amp;#34;name&amp;#34; json:&amp;#34;name&amp;#34; xml:&amp;#34;name&amp;#34; uri:&amp;#34;name&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// gin.H æ˜¯ map[string]interface{}çš„ç¼©å†™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/someJSON&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ–¹å¼ä¸€ï¼šè‡ªå·±æ‹¼æ¥ JSON
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Hello world!&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span> &lt;span class="c1">// {&amp;#34;messgae&amp;#34;:&amp;#34;Hello world!&amp;#34;}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/moreJSON&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ–¹æ³•äºŒï¼šä½¿ç”¨ç»“æ„ä½“
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">u&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">models&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Marry&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// {&amp;#34;id&amp;#34;:123,&amp;#34;name&amp;#34;:&amp;#34;Marry&amp;#34;}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;localhost:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ä»¥å¸¦å¡«å……çš„jsonæ ¼å¼å“åº”è¯·æ±‚äº†è§£">
&lt;a href="#%e4%bb%a5%e5%b8%a6%e5%a1%ab%e5%85%85%e7%9a%84json%e6%a0%bc%e5%bc%8f%e5%93%8d%e5%ba%94%e8%af%b7%e6%b1%82%e4%ba%86%e8%a7%a3" class="header-anchor">#&lt;/a>
ä»¥å¸¦å¡«å……çš„jsonæ ¼å¼å“åº”è¯·æ±‚ï¼ˆäº†è§£ï¼‰
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>ç”¨åˆ°çš„æ–¹æ³•æ˜¯&lt;code>JSONP&lt;/code>ï¼Œè‹±æ–‡åä¸ºï¼šJSON with Paddingï¼Œä¸­æ–‡å¤§æ¦‚ï¼šå¸¦å¡«å……çš„jsonã€‚&lt;/p>
&lt;ul>
&lt;li>åªæœ‰å½“è¯·æ±‚ä¸­æŒ‡å®šæŸ¥è¯¢å‚æ•°&lt;code>callback&lt;/code>æ—¶ï¼Œæ‰ä¼šå“åº”å¸¦å¡«å……çš„jsonï¼Œå¦åˆ™ï¼Œåªå“åº”jsonã€‚&lt;/li>
&lt;li>ç¤ºä¾‹ï¼š
&lt;ul>
&lt;li>è¯·æ±‚ï¼š&lt;code>http://localhost:8080/get?callback=abc&lt;/code>ï¼Œå“åº”ï¼š&lt;code>abc({jsonæ•°æ®})&lt;/code>ã€‚
&lt;ul>
&lt;li>&lt;code>Content-Typeï¼šapplication/javascript; charset=utf-8&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>è¯·æ±‚ï¼š&lt;code>http://localhost:8080/get&lt;/code>ï¼Œå“åº”ï¼š&lt;code>{jsonæ•°æ®}&lt;/code>ã€‚
&lt;ul>
&lt;li>&lt;code>Content-Typeï¼šapplication/json; charset=utf-8&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ä½œç”¨ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>JSONP&lt;/strong> æ˜¯ä¸€ç§&lt;strong>å¤è€çš„è·¨åŸŸè¯·æ±‚è§£å†³æ–¹æ¡ˆ&lt;/strong>ï¼Œé€šè¿‡ &lt;code>&amp;lt;script&amp;gt;&lt;/code> æ ‡ç­¾åŠ è½½å’Œæ‰§è¡Œ JavaScript ä»£ç æ¥å®ç°æ•°æ®ä¼ è¾“ï¼Œå› æ­¤åªé€‚ç”¨äº &lt;code>GET&lt;/code> è¯·æ±‚çš„ç®€å•è·¨åŸŸåœºæ™¯ã€‚
&lt;ul>
&lt;li>å› ä¸ºè¦é…åˆscriptæ ‡ç­¾çš„srcå±æ€§ä½¿ç”¨ï¼Œå®ƒåªèƒ½å‘é€GETè¯·æ±‚ã€‚&lt;/li>
&lt;li>å¸¦å¡«å……çš„jsonæ ¼å¼å°±æ˜¯JavaScriptä»£ç ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å…·ä½“ä½¿ç”¨ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åœ¨å‰ç«¯å®šä¹‰å¥½å›è°ƒå‡½æ•°åã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡&lt;code>&amp;lt;script&amp;gt;&lt;/code> æ ‡ç­¾çš„ src å±æ€§æŒ‡å‘è·¨åŸŸçš„æœåŠ¡å™¨ï¼Œå¹¶åŒ…å«ä¸€ä¸ªæŸ¥è¯¢å‚æ•° callbackï¼Œå…¶å€¼æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°çš„åå­—ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå°†æ•°æ®åŒ…è£…åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œç”Ÿæˆä¸€æ®µ JavaScript ä»£ç ï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æµè§ˆå™¨åŠ è½½å¹¶æ‰§è¡Œè¿”å›çš„ JavaScript ä»£ç ï¼Œä»è€Œè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°æ¥æ”¶æ•°æ®å¹¶å¤„ç†ã€‚&lt;/strong>&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/get&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;success&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSONP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>http://localhost:8080/get?callback=abc&lt;/code>å“åº”ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">abc&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>http://localhost:8080/get&lt;/code>å“åº”ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„äº‹é¡¹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>å­˜åœ¨æ•°æ®å®‰å…¨é—®é¢˜&lt;/strong>ï¼šç”±äº JSONP æ˜¯é€šè¿‡æ‰§è¡Œè¿”å›çš„ JavaScript ä»£ç æ¥å®ç°æ•°æ®ä¼ è¾“çš„ï¼Œå¦‚æœä¸å¯¹è¿”å›çš„æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œå¯èƒ½ä¼šæ‰§è¡Œæ¶æ„ä»£ç ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ”¯æŒæœ‰é™&lt;/strong>ï¼šJSONP åªæ”¯æŒ &lt;code>GET&lt;/code> è¯·æ±‚ï¼Œä¸æ”¯æŒå…¶ä»– HTTP æ–¹æ³•ï¼ˆå¦‚ &lt;code>POST&lt;/code>ã€&lt;code>PUT&lt;/code>ã€&lt;code>DELETE&lt;/code> ç­‰ï¼‰ã€‚å› æ­¤ï¼Œå®ƒåªé€‚ç”¨äºè·å–æ•°æ®çš„åœºæ™¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¨èä½¿ç”¨&lt;strong>ç°ä»£è·¨åŸŸè§£å†³æ–¹æ¡ˆ&lt;/strong>ï¼šCORSï¼ˆCross-Origin Resource Sharingï¼‰è·¨åŸŸèµ„æºå…±äº«ï¼Œå…è®¸æµè§ˆå™¨å‘è·¨åŸŸæœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶æ¥å—å“åº”ã€‚&lt;strong>é€šè¿‡è®¾ç½®é€‚å½“çš„ HTTP å¤´ï¼ŒæœåŠ¡å™¨å¯ä»¥æŒ‡ç¤ºæµè§ˆå™¨å…è®¸è·¨åŸŸè¯·æ±‚ï¼Œä¸å—åŒæºç­–ç•¥æ§åˆ¶ï¼ŒæŠ¥é”™ã€‚&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>å°±æ˜¯è®¾ç½®å¯¹åº”çš„å“åº”å¤´ï¼ˆè·¨åŸŸèµ„æºå…±äº«å¤´corså¤´ï¼‰ï¼Œå‘Šè¯‰æµè§ˆå™¨å…è®¸è·¨åŸŸè¯·æ±‚&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸»è¦çš„ CORS å¤´éƒ¨ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Access-Control-Allow-Origin&lt;/strong>ï¼šæŒ‡å®šå…è®¸çš„æºã€‚ &lt;code>*&lt;/code> è¡¨ç¤ºå…è®¸æ‰€æœ‰æºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Access-Control-Allow-Methods&lt;/strong>ï¼šæŒ‡å®šå…è®¸çš„ HTTP æ–¹æ³•ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Access-Control-Allow-Headers&lt;/strong>ï¼šæŒ‡å®šå…è®¸çš„è¯·æ±‚å¤´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Access-Control-Allow-Credentials&lt;/strong>ï¼šæŒ‡ç¤ºæ˜¯å¦å…è®¸å‘é€å‡­è¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Access-Control-Expose-Headers&lt;/strong>ï¼šæŒ‡å®šå¯ä»¥æš´éœ²çš„å“åº”å¤´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Access-Control-Max-Age&lt;/strong>ï¼šæŒ‡å®šé¢„æ£€è¯·æ±‚ç»“æœçš„ç¼“å­˜æ—¶é—´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„ï¼šä»¥ä¸Šå¤´éƒ½åªæœ‰åœ¨è·¨åŸŸè¯·æ±‚ä¸­æ‰ä¼šè¿›è¡Œæ ¡éªŒã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">CORSMiddleware&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Header&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Access-Control-Allow-Origin&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;*&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Header&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Access-Control-Allow-Methods&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;GET, POST, OPTIONS&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Header&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Access-Control-Allow-Headers&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Origin, Content-Type, Accept&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Method&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;OPTIONS&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AbortWithStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusNoContent&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">CORSMiddleware&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/data&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;success&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ¬æ–‡åé¢ä¼šä»‹ç»&lt;a class="link" href="#%e4%b8%ad%e9%97%b4%e4%bb%b6" >Ginä¸­é—´ä»¶&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>åœ¨Ginæ¡†æ¶ä¸­ï¼ŒGin å®˜æ–¹æ¨èä½¿ç”¨ &lt;code>gin-contrib/cors&lt;/code> ä¸­é—´ä»¶æ¥è®¾ç½® CORS å¤´éƒ¨ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¸å‡ºæ„å¤–çš„è¯ï¼Œåé¢ä¼šå‡ºä¸€ç¯‡å…³äºcorsè¯¦ç»†ä»‹ç»ä»¥åŠ&lt;a class="link" href="https://github.com/gin-contrib/cors" target="_blank" rel="noopener"
>gin-contrib/cors&lt;/a>ä½¿ç”¨çš„æ–‡ç« ï¼š&lt;a class="link" href="https://arlettebrook.github.io/p/cors-introduction" target="_blank" rel="noopener"
>Cors Introduction&lt;/a>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;h3 id="ä»¥xmlæ ¼å¼å“åº”è¯·æ±‚">
&lt;a href="#%e4%bb%a5xml%e6%a0%bc%e5%bc%8f%e5%93%8d%e5%ba%94%e8%af%b7%e6%b1%82" class="header-anchor">#&lt;/a>
ä»¥xmlæ ¼å¼å“åº”è¯·æ±‚
&lt;/h3>&lt;p>é€šè¿‡&lt;code>XML&lt;/code>æ–¹æ³•è¿”å›xmlæ•°æ®&lt;/p>
&lt;p>æ–¹æ³•å®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-GO" data-lang="GO">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">XML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥æ–¹æ³•ä¸&lt;code>JSON&lt;/code>æ–¹æ³•ç±»ä¼¼ã€‚&lt;/p>
&lt;p>å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;ul>
&lt;li>codeï¼šå“åº”çš„httpçŠ¶æ€ç ã€‚&lt;/li>
&lt;li>objï¼šå“åº”çš„xmlæ•°æ®ã€‚ç±»å‹æ˜¯èƒ½å¤Ÿåºåˆ—åŒ–æˆxmlæ•°æ®çš„ç±»å‹ï¼Œå¦‚map[string]anyã€ç»“æ„ä½“å¯¹è±¡ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">User&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Id&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`form:&amp;#34;id&amp;#34; json:&amp;#34;id&amp;#34; xml:&amp;#34;id&amp;#34; uri:&amp;#34;id&amp;#34; binding:&amp;#34;required&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`form:&amp;#34;name&amp;#34; json:&amp;#34;name&amp;#34; xml:&amp;#34;name&amp;#34; uri:&amp;#34;name&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// gin.H æ˜¯ map[string]interface{}çš„ç¼©å†™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/someXML&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">XML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Hello world!&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span> &lt;span class="c1">// &amp;lt;map&amp;gt;&amp;lt;message&amp;gt;Hello world!&amp;lt;/message&amp;gt;&amp;lt;/map&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/moreXML&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ–¹æ³•äºŒï¼šä½¿ç”¨ç»“æ„ä½“
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">u&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">models&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Marry&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">XML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// &amp;lt;User&amp;gt;&amp;lt;id&amp;gt;123&amp;lt;/id&amp;gt;&amp;lt;name&amp;gt;Marry&amp;lt;/name&amp;gt;&amp;lt;/User&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;localhost:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä»¥æ–‡ä»¶æ ¼å¼å“åº”è¯·æ±‚">
&lt;a href="#%e4%bb%a5%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f%e5%93%8d%e5%ba%94%e8%af%b7%e6%b1%82" class="header-anchor">#&lt;/a>
ä»¥æ–‡ä»¶æ ¼å¼å“åº”è¯·æ±‚
&lt;/h3>&lt;p>ä¸‹é¢ä»‹ç»ginæ¡†æ¶å¦‚ä½•å“åº”ä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥åšæ–‡ä»¶ä¸‹è½½ã€‚&lt;/p>
&lt;p>å“åº”æ–‡ä»¶ç”¨&lt;code>File&lt;/code>æˆ–&lt;code>FileAttachment&lt;/code>æ–¹æ³•ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>File&lt;/code>æ–¹æ³•ï¼š
&lt;ul>
&lt;li>ç›´æ¥å“åº”æ–‡ä»¶ï¼ŒGinæ¡†æ¶ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶ç±»å‹è®¾ç½®MIMEç±»å‹ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ ¹æ®MEMç±»å‹Iå¤„ç†æ–‡ä»¶ï¼ˆæ˜¾ç¤ºæ–‡ä»¶ï¼‰ã€‚&lt;/li>
&lt;li>åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼šä¸ºå“åº”æ–‡ä»¶çš„æœ¬åœ°ç³»ç»Ÿè·¯å¾„ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>FileAttachment&lt;/code>æ–¹æ³•ï¼š
&lt;ul>
&lt;li>ç›´æ¥ä¸‹è½½æ–‡ä»¶ï¼Œä¼šå¼¹å‡ºä¸‹è½½æ¡†ã€‚æ–‡ä»¶åä¸ºç»™å®šçš„ç¬¬äºŒä¸ªå‚æ•°ã€‚&lt;/li>
&lt;li>æœ‰ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸&lt;code>File&lt;/code>çš„å‚æ•°ä¸€ç›´ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼šæŒ‡å®šæ–‡ä»¶ä¸‹è½½çš„åç§°ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>åŸç†ï¼š&lt;code>FileAttachment&lt;/code>ä¼šæ¯”&lt;code>File&lt;/code>å¤šè®¾ç½®ä¸€ä¸ªå“åº”å¤´&lt;code>Content-Disposition:attachment; filename=&amp;quot;filename&amp;quot;&lt;/code>ï¼Œå‘Šè¯‰æµè§ˆå™¨å°†æ–‡ä»¶ä½œä¸ºé™„åŠ ä¸‹è½½ã€‚&lt;/p>
&lt;h3 id="è®¾ç½®httpå“åº”å¤´è®¾ç½®header">
&lt;a href="#%e8%ae%be%e7%bd%aehttp%e5%93%8d%e5%ba%94%e5%a4%b4%e8%ae%be%e7%bd%aeheader" class="header-anchor">#&lt;/a>
è®¾ç½®httpå“åº”å¤´ï¼ˆè®¾ç½®Headerï¼‰
&lt;/h3>&lt;p>åœ¨Ginæ¡†æ¶ä¸­ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è·å–è¯·æ±‚å¤´çš„æ–¹æ³•æ˜¯&lt;code>func (c *Context) GetHeader(key string)&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å°†è¯·æ±‚å¤´ä¸ç»“æ„ä½“ç»‘å®šçš„æ–¹æ³•æ˜¯&lt;code>BindHeader&lt;/code>æˆ–&lt;code>ShouldBindHeader&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>äºŒè€…åŒºåˆ«æ˜¯ï¼š&lt;code>BindHeader&lt;/code>ç»‘å®šå¤±è´¥ï¼Œä¼šè‡ªåŠ¨å“åº”400é”™è¯¯ï¼Œè€Œ&lt;code>ShouldBind&lt;/code>ä¸ä¼šï¼Œéœ€è¦æ‰‹åŠ¨å“åº”é”™è¯¯ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è®¾ç½®å“åº”å¤´çš„æ–¹æ³•æ˜¯&lt;code>func (c *Context) Header(key, value string)&lt;/code>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ”¯æŒåå¤è®¾ç½®å“åº”å¤´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è‹¥é”®çš„å€¼ä¸ºç©ºï¼Œå°†åˆ é™¤è¯¥å“åº”å¤´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è®¾ç½®å“åº”å¤´åº”è¯¥åœ¨å“åº”å‰è®¾ç½®ï¼Œå“åº”åè®¾ç½®æ— æ•ˆã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æºç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Header&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Del&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Header&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="htmlæ¨¡æ¿æ¸²æŸ“">
&lt;a href="#html%e6%a8%a1%e6%9d%bf%e6%b8%b2%e6%9f%93" class="header-anchor">#&lt;/a>
HTMLæ¨¡æ¿æ¸²æŸ“
&lt;/h2>&lt;p>å‰é¢è¯¦ç»†ä»‹ç»äº†ginæ¡†æ¶å“åº”ä¸åŒç±»å‹çš„å‚æ•°ï¼Œå…¶å®è¿˜æ¼æ‰äº†å“åº”htmlæ¨¡æ¿æ¸²æŸ“ã€‚å› ä¸ºæ¶‰åŠåˆ°goæ¨¡æ¿æ¸²æŸ“ï¼Œå°±å•ç‹¬æ‹¿å‡ºæ¥ä»‹ç»ã€‚&lt;/p>
&lt;p>Ginæ¡†æ¶é»˜è®¤å°è£…äº†golangå†…ç½®çš„html/templateåŒ…ç”¨äºå¤„ç†htmlæ¨¡ç‰ˆï¼Œå¦‚æœä½ å¼€å‘çš„æ˜¯æ¥å£æœåŠ¡ï¼Œä¸æä¾›htmlé¡µé¢å¯ä»¥è·³è¿‡æœ¬ç« å†…å®¹ã€‚&lt;/p>
&lt;p>&lt;strong>ä½œç”¨&lt;/strong>ï¼šGinæ¡†æ¶å†…ç½®çš„æ¨¡æ¿æ¸²æŸ“åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡httpè¯·æ±‚ï¼Œå°±å¯ä»¥ç”Ÿæˆå®‰å…¨çš„HTMLå†…å®¹ï¼Œå¦‚åŠ¨æ€ç½‘é¡µã€é‚®ä»¶å†…å®¹ã€HTMLæŠ¥å‘Šç­‰ã€‚åŒæ—¶ç®€åŒ–äº†åŠ¨æ€HTMLé¡µé¢çš„ç”Ÿæˆè¿‡ç¨‹ï¼Œé€šè¿‡è®¾ç½®æ¨¡æ¿ç›®å½•å’Œåœ¨è·¯ç”±å¤„ç†å‡½æ•°ä¸­æ¸²æŸ“æ¨¡æ¿ï¼Œå¯ä»¥è½»æ¾åœ°ç”ŸæˆåŒ…å«åŠ¨æ€æ•°æ®çš„ç½‘é¡µã€‚æ­¤åŠŸèƒ½æœ‰åŠ©äºåˆ†ç¦»ä¸šåŠ¡é€»è¾‘å’Œè¡¨ç¤ºå±‚ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œå¹¶ä¸”é€šè¿‡è‡ªåŠ¨HTMLè½¬ä¹‰ï¼Œæé«˜äº†Webåº”ç”¨çš„å®‰å…¨æ€§ã€‚&lt;/p>
&lt;p>goæ¨¡æ¿æ¸²æŸ“å‚è€ƒæ–‡ç« ï¼š&lt;a class="link" href="https://arlettebrook.github.io/p/template-introduction/" target="_blank" rel="noopener"
>ã€ŠTemplate Introductionã€‹&lt;/a>&lt;/p>
&lt;p>ä¸‹é¢ä¸»è¦ä»‹ç»Ginæ¡†æ¶å°è£…çš„&lt;code>html/template&lt;/code>æ¨¡æ¿æ¸²æŸ“ä¸å†…ç½®çš„&lt;code>html/template&lt;/code>æ¨¡æ¿æ¸²æŸ“çš„åŒºåˆ«ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>è§£ææ¨¡æ¿å¹¶åˆ›å»ºæ¨¡æ¿å¯¹è±¡&lt;/strong>ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ä½œç”¨&lt;/th>
&lt;th style="text-align:left">Goå†…ç½®&lt;/th>
&lt;th style="text-align:left">Ginå°è£…&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>æŒ‡å®šè§£æçš„æ¨¡æ¿æ–‡ä»¶&lt;/td>
&lt;td style="text-align:left">&lt;code>func (t *Template) ParseFiles(filenames ...string) (*Template, error)&lt;/code>&lt;/td>
&lt;td style="text-align:left">&lt;code>func (engine *Engine) LoadHTMLFiles(files ...string)&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>æ ¹æ®åŒ¹é…æ¨¡å¼è§£ææ¨¡æ¿æ–‡ä»¶ï¼ˆ&lt;strong>æ¨è&lt;/strong>ï¼‰&lt;/td>
&lt;td style="text-align:left">&lt;code>func (t *Template) ParseGlob(pattern string) (*Template, error)&lt;/code>&lt;/td>
&lt;td style="text-align:left">&lt;code>func (engine *Engine) LoadHTMLGlob(pattern string)&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ¸²æŸ“æ¨¡æ¿å¯¹è±¡&lt;/strong>ï¼Œæ”¹æˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">HTML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>codeï¼šçŠ¶æ€ç ã€‚&lt;/p>
&lt;p>nameï¼šæ¨¡æ¿åç§°ã€‚&lt;/p>
&lt;p>objï¼šæ¸²æŸ“çš„æ•°æ®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å…¶ä»–ä¸»è¦åŒºåˆ«ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å°†è¯­æ³•åˆ†éš”ç¬¦&lt;code>Delims&lt;/code>ã€è‡ªå®šä¹‰æ¨¡æ¿å‡½æ•°æ˜ å°„&lt;code>FuncMap&lt;/code>ç­‰æ–¹æ³•çš„å¯¹è±¡æ”¹æˆäº†æ¨¡æ¿å¼•æ“å¯¹è±¡&lt;code>engine *Engine&lt;/code>ï¼Œ&lt;strong>ä¸éœ€è¦æˆ‘ä»¬åœ¨æ‰‹åŠ¨åˆ›å»ºæ¨¡æ¿å¯¹è±¡&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è‡ªå®šä¹‰æ¨¡æ¿å‡½æ•°ä¹Ÿä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ ï¼ˆ&lt;code>Funcs&lt;/code>ï¼‰è‡ªå®šä¹‰æ¨¡æ¿å‡½æ•°&lt;strong>æ˜ å°„&lt;/strong>&lt;code>FuncMap&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å…¶ä½™çš„æ¨¡æ¿è¯­æ³•ï¼Œæ¨¡æ¿åµŒå¥—ï¼Œæ¨¡æ¿å‡½æ•°ï¼Œè‡ªåŠ¨HTMLå†…å®¹è½¬ä¹‰ï¼Œé‡å†™æ¨¡æ¿ç­‰ä½¿ç”¨éƒ½ä¸å†…ç½®çš„&lt;code>html/template&lt;/code>ä¸€æ¨¡ä¸€æ ·ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;p>templates/default/hello.tmplï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{[ define &amp;#34;default/hello.tmpl&amp;#34; -]}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;en&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">http-equiv&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;X-UA-Compatible&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;IE=edge&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;viewport&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;width=device-width, initial-scale=1.0&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Document&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>æ¨¡æ¿æ¸²æŸ“&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Your message is: {[ ToUpper . ]}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{[- end ]}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>main.go:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Delims&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;{[&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;]}&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FuncMap&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">template&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FuncMap&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;ToUpper&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ToUpper&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadHTMLGlob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;templates/**/*.tmpl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">msg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HTML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;default/hello.tmpl&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯åŠ¨httpæœåŠ¡è®¿é—®[http://localhost:8181/html?msg=Hello, worrld!](http://localhost:8181/html?msg=Hello, worrld!)&lt;strong>å°†å“åº”æ¸²æŸ“ä¹‹åçš„HTMLå†…å®¹&lt;/strong>ã€‚&lt;/p>
&lt;p>æµè§ˆå™¨å‘ˆç°ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">æ¨¡æ¿æ¸²æŸ“
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your message is: HELLO, WORRLD!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å“åº”çš„htmlæºç ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;en&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">http-equiv&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;X-UA-Compatible&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;IE=edge&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;viewport&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;width=device-width, initial-scale=1.0&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Document&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>æ¨¡æ¿æ¸²æŸ“&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Your message is: HELLO, WORRLD!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="é™æ€æ–‡ä»¶æœåŠ¡">
&lt;a href="#%e9%9d%99%e6%80%81%e6%96%87%e4%bb%b6%e6%9c%8d%e5%8a%a1" class="header-anchor">#&lt;/a>
é™æ€æ–‡ä»¶æœåŠ¡
&lt;/h2>&lt;p>å½“æˆ‘ä»¬æ¸²æŸ“çš„HTMLæ–‡ä»¶ä¸­å¼•ç”¨äº†é™æ€æ–‡ä»¶æ—¶ï¼Œå°±éœ€è¦é…ç½®é™æ€æ–‡ä»¶æœåŠ¡ã€‚ä»¥ä¾¿jsã€cssã€jpgä¹‹ç±»çš„é™æ€æ–‡ä»¶èƒ½å¤Ÿæ­£å¸¸å“åº”ã€‚&lt;/p>
&lt;p>åœ¨Ginæ¡†æ¶ä¸­è®¿é—®é™æ€èµ„æºæ–‡ä»¶é€šå¸¸æ˜¯é€šè¿‡è®¾ç½®ä¸€ä¸ª&lt;strong>é™æ€æ–‡ä»¶æœåŠ¡&lt;/strong>æ¥å®ç°çš„ã€‚Ginæä¾›äº†ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„æ–¹æ³•æ¥å¤„ç†è¿™ä¸€ä»»åŠ¡ã€‚&lt;/p>
&lt;p>é…ç½®é™æ€æ–‡ä»¶æœåŠ¡å¸¸ç”¨çš„ä¸¤ä¸ªæ–¹æ³•ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ˜ å°„é™æ€èµ„æºç›®å½•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è®¾ç½®é™æ€æ–‡ä»¶å¤¹ï¼ŒURLè·¯å¾„ /static æ˜ å°„åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„ assets æ–‡ä»¶å¤¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Static&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/static&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;./assets&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>router.Static(&amp;quot;/static&amp;quot;, &amp;quot;./static&amp;quot;)&lt;/code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯URLè·¯å¾„å‰ç¼€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„ã€‚å½“è®¿é—®&lt;code>http://localhost:8080/static/css/styles.css&lt;/code>æ—¶ï¼ŒGinä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿçš„&lt;code>./assets/css/styles.css&lt;/code>è·¯å¾„æŸ¥æ‰¾æ–‡ä»¶å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;p>&lt;strong>æ³¨æ„äº‹é¡¹&lt;/strong>ï¼šURLè·¯å¾„å‰ç¼€å»ºè®®ä¸ºä¸€ä¸ªé™æ€èµ„æºè·¯å¾„&lt;code>/static&lt;/code>ï¼Œè¦&lt;strong>é¿å…è·¯ç”±é‡å¤&lt;/strong>ã€‚åº•å±‚æ˜¯é€šè¿‡&lt;code>/static/*filepath&lt;/code>åŒ¹é…çš„ï¼Œå¦‚æœä¸º&lt;code>/&lt;/code>å°†åŒ¹é…æ‰€æœ‰çš„è·¯å¾„ï¼Œåç»­é…ç½®çš„è·¯å¾„å°†å¤±æ•ˆï¼ŒGinæœåŠ¡å¯åŠ¨ä¹Ÿä¼šå¤±è´¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ˜ å°„å•ä¸ªé™æ€èµ„æºæ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯ä»¥ä½¿ç”¨ router.StaticFile æ¥è®¾ç½®å•ä¸ªæ–‡ä»¶çš„é™æ€è·¯å¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StaticFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/favicon.ico&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;./assets/favicon.ico&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè®¿é—®è·¯å¾„ã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼šæ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„ã€‚&lt;/p>
&lt;p>å¯¹äº&lt;code>/favicon.ico&lt;/code>URLè·¯å¾„ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è·¯å¾„ï¼Œç”¨äº&lt;strong>è¯·æ±‚æµè§ˆå™¨æ ‡ç­¾é¡µçš„å›¾æ ‡&lt;/strong>ã€‚&lt;/p>
&lt;p>å½“æˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨è®¿é—®ä»»ä½•ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨ä¼š&lt;strong>è‡ªåŠ¨è¯·æ±‚&lt;/strong>&lt;code>/favicon.ico&lt;/code>è·¯å¾„ï¼Œä»¥ä¾¿æ­£å¸¸æ˜¾ç¤ºæ ‡ç­¾é¡µå›¾æ ‡ã€‚å¤±è´¥ä¼šæ˜¾ç¤ºä¸€ä¸ªåœ°çƒã€‚&lt;/p>
&lt;p>ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒå’Œç½‘ç«™çš„è¯†åˆ«åº¦ï¼Œé€šå¸¸éƒ½ä¼šé…ç½®ç½‘ç«™å›¾æ ‡çš„é™æ€èµ„æºæ˜ å°„ã€‚&lt;/p>
&lt;p>å› æ­¤ä¼šç”¨åˆ°æ˜ å°„å•ä¸ªé™æ€èµ„æºæ–‡ä»¶&lt;code>StaticFile&lt;/code>ï¼Œæ³¨æ„ä¸èƒ½ä½¿ç”¨æ˜ å°„é™æ€èµ„æºç›®å½•ï¼Œå› ä¸ºæµè§ˆå™¨&lt;strong>è‡ªåŠ¨è¯·æ±‚&lt;/strong>ç½‘ç«™å›¾æ ‡çš„è·¯å¾„æ˜¯åœ¨æ ¹ç›®å½•ã€‚&lt;/p>
&lt;p>&lt;strong>æç¤º&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç½‘ç«™å›¾æ ‡ï¼ˆæ ‡ç­¾é¡µå›¾æ ‡ï¼‰å¾ˆå°ï¼Œæ ¼å¼ä¸ºico(x-icon)ï¼Œåä¸ºfaviconï¼Œå¯ä»¥é€šè¿‡å›¾æ ‡ç”Ÿæˆå™¨ç”Ÿæˆã€‚å¦‚ï¼š&lt;a class="link" href="https://www.logosc.cn/logo/favicon" target="_blank" rel="noopener"
>Favicon.icoå›¾æ ‡åœ¨çº¿ç”Ÿæˆå™¨&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é»˜è®¤çš„ç½‘é¡µå›¾æ ‡è·¯å¾„æ˜¯&lt;code>åŸŸå/favicon&lt;/code>ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼Œé€šè¿‡&lt;code>link&lt;/code>æ ‡ç­¾ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- å®šä¹‰ç½‘é¡µçš„favicon ä¸‹é¢çš„hrefå±æ€§é»˜è®¤ä¸º/favicon.ico --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">link&lt;/span> &lt;span class="na">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;icon&amp;#34;&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;image/x-icon&amp;#34;&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;//www.example.com/static/favicon.ico&amp;#34;&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="ginä¸­é—´ä»¶">
&lt;a href="#gin%e4%b8%ad%e9%97%b4%e4%bb%b6" class="header-anchor">#&lt;/a>
Ginä¸­é—´ä»¶
&lt;/h2>&lt;p>åœ¨Ginæ¡†æ¶ä¸­ï¼Œ&lt;strong>ä¸­é—´ä»¶&lt;/strong>ï¼ˆMiddlewareï¼‰æŒ‡çš„æ˜¯å¯ä»¥æ‹¦æˆª&lt;strong>httpè¯·æ±‚-å“åº”&lt;/strong>ç”Ÿå‘½å‘¨æœŸçš„&lt;strong>ç‰¹æ®Šå‡½æ•°&lt;/strong>ï¼Œåœ¨è¯·æ±‚-å“åº”ç”Ÿå‘½å‘¨æœŸä¸­å¯ä»¥æ³¨å†Œå¤šä¸ªä¸­é—´ä»¶ï¼Œæ¯ä¸ªä¸­é—´ä»¶æ‰§è¡Œä¸åŒçš„åŠŸèƒ½ï¼Œä¸€ä¸ªä¸­é—´æ‰§è¡Œå®Œå†è½®åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æ‰§è¡Œã€‚&lt;/p>
&lt;p>é€šä¿—çš„è®²ï¼šä¸­é—´ä»¶å°±æ˜¯åŒ¹é…è·¯ç”±å‰å’ŒåŒ¹é…è·¯ç”±åæ‰§è¡Œçš„ä¸€ç³»åˆ—æ“ä½œã€‚&lt;/p>
&lt;p>&lt;strong>ä¸­é—´ä»¶çš„å¸¸è§åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;strong>æ—¥å¿—è®°å½•&lt;/strong>ï¼šè®°å½•æ¯ä¸ªè¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚è¯·æ±‚æ–¹æ³•ã€è·¯å¾„ã€çŠ¶æ€ç å’Œå¤„ç†æ—¶é—´ã€‚&lt;/li>
&lt;li>&lt;strong>è®¤è¯å’Œæˆæƒ&lt;/strong>ï¼šæ£€æŸ¥è¯·æ±‚æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„è®¤è¯ä¿¡æ¯ï¼Œå†³å®šæ˜¯å¦å…è®¸è®¿é—®èµ„æºã€‚&lt;/li>
&lt;li>&lt;strong>é”™è¯¯å¤„ç†&lt;/strong>ï¼šæ•è·å’Œå¤„ç†è¯·æ±‚è¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯ï¼Œè¿”å›ç»Ÿä¸€çš„é”™è¯¯å“åº”ã€‚&lt;/li>
&lt;li>&lt;strong>æ•°æ®éªŒè¯&lt;/strong>ï¼šåœ¨è¯·æ±‚åˆ°è¾¾å¤„ç†å™¨ä¹‹å‰å¯¹è¯·æ±‚æ•°æ®è¿›è¡ŒéªŒè¯ã€‚&lt;/li>
&lt;li>&lt;strong>CORSå¤„ç†&lt;/strong>ï¼šå¤„ç†è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰çš„ç›¸å…³è®¾ç½®ï¼Œå…è®¸æˆ–æ‹’ç»è·¨åŸŸè¯·æ±‚ã€‚ã€&lt;/li>
&lt;li>&lt;strong>é™æµ&lt;/strong>ï¼šé™åˆ¶å®¢æˆ·ç«¯åœ¨ä¸€å®šæ—¶é—´å†…çš„è¯·æ±‚æ•°é‡ï¼Œé˜²æ­¢è¿‡è½½ã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="ä½¿ç”¨ä¸­é—´ä»¶">
&lt;a href="#%e4%bd%bf%e7%94%a8%e4%b8%ad%e9%97%b4%e4%bb%b6" class="header-anchor">#&lt;/a>
ä½¿ç”¨ä¸­é—´ä»¶
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>å®šä¹‰ä¸­é—´ä»¶&lt;/strong>ï¼š&lt;/p>
&lt;p>ä¸­é—´ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Gin å¤„ç†å‡½æ•°ï¼ˆæ§åˆ¶å™¨å‡½æ•°ï¼š&lt;code>gin.HandlerFunc&lt;/code>ï¼‰ï¼Œæ¥å— &lt;code>*gin.Context&lt;/code> ä½œä¸ºå‚æ•°ã€‚&lt;/p>
&lt;p>æ‰€ä»¥å®šä¹‰ä¸­é—´ä»¶å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼æ˜¯&lt;code>gin.HandlerFunc&lt;/code>ç±»å‹ï¼Œå³è¿”å›å°†&lt;code>*gin.Context&lt;/code> ä½œä¸ºå‚æ•°çš„å‡½æ•°å³å¯ã€‚&lt;/p>
&lt;p>æˆ–è€…ç›´æ¥å®šä¹‰&lt;code>gin.HandlerFunc&lt;/code>å‡½æ•°ï¼Œè·Ÿå®šä¹‰æ§åˆ¶å™¨å‡½æ•°ç±»ä¼¼ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªç®€å•çš„æ—¥å¿—ä¸­é—´ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">LoggerMiddleware&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">startTime&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¤„ç†è¯·æ±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è®°å½•å¤„ç†æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">duration&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Since&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">startTime&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Request %s %s took %v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Method&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">URL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">duration&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Next&lt;/code>æ–¹æ³•æ˜¯&lt;strong>è°ƒç”¨è¯¥è·¯ç”±å‰©ä½™çš„æ§åˆ¶å™¨å‡½æ•°&lt;/strong>ï¼Œå½“å‰©ä½™çš„æ§åˆ¶å™¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼Œèµ·åˆ°æ”¾è¡Œçš„ä½œç”¨ã€‚&lt;/p>
&lt;p>â€‹ å½“å­˜åœ¨å¤šä¸ªä¸­é—´ä»¶æ—¶ï¼Œæ‰§è¡Œé¡ºåºä¾æ­¤ç±»æ¨ã€‚&lt;/p>
&lt;p>â€‹ ä¸ä¹‹ç›¸åçš„æ–¹æ³•&lt;code>Abort&lt;/code>ï¼Œ&lt;strong>ç»ˆæ­¢è°ƒç”¨å‰©ä½™çš„æ§åˆ¶å™¨å‡½æ•°&lt;/strong>ï¼Œèµ·åˆ°ä¸æ”¾è¡Œçš„ä½œç”¨ã€‚&lt;/p>
&lt;p>â€‹ &lt;strong>å¦‚æœæ²¡æœ‰è°ƒç”¨ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•ï¼Œä¼šä¾æ¬¡æŒ‰ç…§æ³¨å†Œé¡ºåºæ‰§è¡Œæ§åˆ¶å™¨å‡½æ•°ã€‚&lt;/strong>&lt;/p>
&lt;p>æ‰€æœ‰æ§åˆ¶å™¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ„å‘³ç€æœ¬æ¬¡è¯·æ±‚å¤„ç†å®Œæ¯•ã€‚å› æ­¤ä¸Šé¢æ¼”ç¤ºäº†è®°å½•å¤„ç†ä¸€æ¬¡è¯·æ±‚æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ï¼ˆæ³¨æ„ï¼šè¦å°†å…¶æ³¨å†Œä¸ºç¬¬ä¸€ä¸ªä¸­é—´ä»¶ã€‚ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨ä¸­é—´ä»¶&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>å…¨å±€ä¸­é—´ä»¶&lt;/strong>&lt;/p>
&lt;p>å¯ä»¥åœ¨åˆ›å»ºè·¯ç”±å™¨æ—¶ä½¿ç”¨ &lt;code>Use&lt;/code> æ–¹æ³•æ³¨å†Œ&lt;strong>å…¨å±€ä¸­é—´ä»¶&lt;/strong>ï¼Œè¿™æ ·&lt;strong>æ‰€æœ‰è¯·æ±‚éƒ½ä¼šç»è¿‡è¯¥ä¸­é—´ä»¶&lt;/strong>ã€‚&lt;/p>
&lt;p>â€‹ æ³¨æ„ï¼š&lt;code>Use&lt;/code>æ–¹æ³•å¯ä»¥ä¸€æ¬¡æ€§æ³¨å†Œä¸€ä¸ªæˆ–å¤šä¸ªä¸­é—´ä»¶ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ³¨å†Œå…¨å±€ä¸­é—´ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">LoggerMiddleware&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å®šä¹‰è·¯ç”±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;pong&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// å¯åŠ¨æœåŠ¡å™¨
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>è·¯ç”±ç»„ä¸­é—´ä»¶&lt;/strong>&lt;/p>
&lt;p>ä¹Ÿå¯ä»¥åœ¨ç‰¹å®šçš„è·¯ç”±ç»„ä¸­ä½¿ç”¨ä¸­é—´ä»¶ï¼Œè¿™æ ·åªæœ‰æŒ‡å®šç»„ç»è¿‡è¯¥ä¸­é—´ä»¶ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å®šä¹‰ä¸€ä¸ªéœ€è¦è®¤è¯çš„è·¯ç”±ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">authGroup&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/auth&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">authGroup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">AuthMiddleware&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1">// æ³¨å†Œä¸­é—´ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">authGroup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/profile&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;John Doe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// å¯åŠ¨æœåŠ¡å™¨
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>å•ç‹¬ä½¿ç”¨ä¸­é—´ä»¶&lt;/strong>&lt;/p>
&lt;p>å¦‚æœåªå¸Œæœ›åœ¨æŸä¸ªç‰¹å®šè·¯ç”±ä¸Šä½¿ç”¨ä¸­é—´ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨å®šä¹‰è·¯ç”±æ—¶ä½¿ç”¨ï¼Œè¿™æ ·åªæœ‰è¯¥è·¯ç”±ç»è¿‡ä¸­é—´ä»¶ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å•ç‹¬ä¸ºæŸä¸ªè·¯ç”±ä½¿ç”¨ä¸­é—´ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/secure&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">AuthMiddleware&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;secure&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// å¯åŠ¨æœåŠ¡å™¨
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‰é¢ä»‹ç»äº†Ginä¸­é—´ä»¶çš„æœ¬è´¨å°±æ˜¯æ§åˆ¶å™¨å‡½æ•°ï¼Œå› æ­¤é…ç½®è·¯ç”±æ—¶ï¼Œæœ€åä¸€ä¸ªæ§åˆ¶å™¨å‡½æ•°å‰é¢çš„æ§åˆ¶å™¨å‡½æ•°éƒ½æ˜¯ä¸­é—´ä»¶ã€‚&lt;/p>
&lt;p>å› æ­¤è·¯ç”±ç»„ä¸­é—´ä»¶è¿˜å¯ä»¥å†™æˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å®šä¹‰ä¸€ä¸ªéœ€è¦è®¤è¯çš„è·¯ç”±ç»„å¹¶æ³¨å†Œä¸­é—´ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">authGroup&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/auth&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">AuthMiddleware&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// authGroup.Use(AuthMiddleware()) // æ³¨å†Œä¸­é—´ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">authGroup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/profile&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;John Doe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// å¯åŠ¨æœåŠ¡å™¨
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="ä¸­é—´ä»¶ä¹‹é—´å…±äº«æ•°æ®">
&lt;a href="#%e4%b8%ad%e9%97%b4%e4%bb%b6%e4%b9%8b%e9%97%b4%e5%85%b1%e4%ba%ab%e6%95%b0%e6%8d%ae" class="header-anchor">#&lt;/a>
ä¸­é—´ä»¶ä¹‹é—´å…±äº«æ•°æ®
&lt;/h3>&lt;p>ä¸­é—´ä»¶é—´ä¸å¯¹åº”æ§åˆ¶å™¨ä¹‹é—´&lt;strong>å…±äº«æ•°æ®&lt;/strong>æ˜¯é€šè¿‡ä¸Šä¸‹æ–‡çš„&lt;code>Set&lt;/code>æ–¹æ³•å’Œ&lt;code>Get&lt;/code>æ–¹æ³•å®ç°çš„ï¼Œå­˜å‚¨çš„æ˜¯é”®å€¼å¯¹ï¼Œkeyæ˜¯stringç±»å‹ï¼Œvalueæ˜¯anyç±»å‹ã€‚å…±äº«èŒƒå›´ä»…åœ¨æœ¬æ¬¡è¯·æ±‚ä¸­ã€‚ç”Ÿå‘½å‘¨æœŸæ˜¯æœ¬æ¬¡è¯·æ±‚ç»“æŸï¼Œè‡ªåŠ¨é”€æ¯ã€‚Ginæ¡†æ¶æ²¡æœ‰æä¾›ä¸»åŠ¨åˆ é™¤å…±äº«æ•°æ®çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨è¯·æ±‚ä¸­å°†å…±äº«æ•°æ®çš„å€¼è®¾ä¸ºnilï¼Œèµ·åˆ°åˆ é™¤çš„æ•ˆæœã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">AuthMiddleware&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¨¡æ‹Ÿé‰´æƒï¼šè·å–usernameæˆåŠŸè¡¨ç¤ºé€šè¿‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">f&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetPostForm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Abort&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusUnauthorized&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;æœªæˆæƒ!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">manageRouter&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/manage&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">manageRouter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">AuthMiddleware&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">manageRouter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/addUser&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">username&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Add user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å†…ç½®ä¸­é—´ä»¶">
&lt;a href="#%e5%86%85%e7%bd%ae%e4%b8%ad%e9%97%b4%e4%bb%b6" class="header-anchor">#&lt;/a>
å†…ç½®ä¸­é—´ä»¶
&lt;/h3>&lt;p>Gin æä¾›äº†ä¸€äº›å†…ç½®ä¸­é—´ä»¶ï¼Œå¸¸ç”¨çš„æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Logger()&lt;/code>: æ—¥å¿—ä¸­é—´ä»¶ï¼Œè®°å½•è¯·æ±‚æ—¥å¿—ã€‚
&lt;ul>
&lt;li>æ³¨æ„ï¼šæ— è®ºGinæ˜¯debugæˆ–è€…releaseæ¨¡å¼ï¼Œéƒ½ä¼šè®°å½•è¯·æ±‚æ—¥å¿—ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>Recovery()&lt;/code>: æ¢å¤ä¸­é—´ä»¶ï¼Œæ•è·ä»»ä½•ææ…Œï¼ˆpanicï¼‰ï¼Œå¹¶è¿”å› 500 é”™è¯¯ã€‚&lt;/li>
&lt;li>&lt;code>gin.BasicAuth()&lt;/code>: åŸºæœ¬è®¤è¯ä¸­é—´ä»¶ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ &lt;code>gin.Default()&lt;/code> åˆ›å»ºçš„é»˜è®¤è·¯ç”±å¼•æ“ï¼Œé»˜è®¤ä½¿ç”¨äº†Loggerå’ŒRecoveryä¸­é—´ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opts&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">OptionFunc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Engine&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">debugPrintWARNINGDefault&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// æ‰“å°æ—¥å¿—ï¼šè®°å½•ä½¿ç”¨çš„ä¸­é—´ä»¶ä»¥åŠgoç‰ˆæœ¬è¦æ±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">engine&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">engine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">Logger&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nf">Recovery&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">engine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">With&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opts&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä¸æƒ³ä½¿ç”¨ä¸Šé¢ä¸¤ä¸ªé»˜è®¤çš„ä¸­é—´ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>gin.New()&lt;/code> æ–°å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•é»˜è®¤ä¸­é—´ä»¶çš„è·¯ç”±å¼•æ“ã€‚&lt;/p>
&lt;p>ä½¿ç”¨æ–¹å¼ä¸è‡ªå®šä¹‰ä¸­é—´ä»¶ç±»ä¼¼ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ä½¿ç”¨å†…ç½®çš„æ—¥å¿—å’Œæ¢å¤ä¸­é—´ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Logger&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Recovery&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;pong&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// å¯åŠ¨æœåŠ¡å™¨
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šé¢ç¤ºä¾‹ä¸ä½¿ç”¨&lt;code>gin.Default()&lt;/code>åˆ›å»ºçš„è·¯ç”±å¼•æ“å”¯ä¸€åŒºåˆ«æ˜¯æ²¡æœ‰è®°å½•ä½¿ç”¨çš„ä¸­é—´ä»¶ä»¥åŠgoç‰ˆæœ¬è¦æ±‚ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">debugPrintWARNINGDefault&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">e&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">getMinVer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Version&lt;/span>&lt;span class="p">());&lt;/span> &lt;span class="nx">e&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">ginSupportMinGoVer&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">debugPrint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`[WARNING] Now Gin requires Go 1.18+.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">debugPrint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`[WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåº">
&lt;a href="#%e4%b8%ad%e9%97%b4%e4%bb%b6%e7%9a%84%e6%89%a7%e8%a1%8c%e9%a1%ba%e5%ba%8f" class="header-anchor">#&lt;/a>
ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåº
&lt;/h3>&lt;p>Gin ä¸­é—´ä»¶æŒ‰ç…§æ³¨å†Œé¡ºåºæ‰§è¡Œã€‚å¯¹äºæ¯ä¸ªè¯·æ±‚ï¼Œæ‰€æœ‰ä¸­é—´ä»¶ä¼šæŒ‰ç…§æ³¨å†Œçš„é¡ºåºä¾æ¬¡æ‰§è¡Œ &lt;code>c.Next()&lt;/code> ä¹‹å‰çš„ä»£ç ï¼Œå½“ä¸€ä¸ªä¸­é—´ä»¶è°ƒç”¨ &lt;code>c.Next()&lt;/code> æ—¶ï¼Œæ§åˆ¶æƒä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œæ‰€æœ‰ä¸­é—´ä»¶æ‰§è¡Œå®Œä¹‹åå†æŒ‰é€†åºæ‰§è¡Œ &lt;code>c.Next()&lt;/code> ä¹‹åçš„ä»£ç ã€‚&lt;/p>
&lt;h3 id="ä¸­é—´ä»¶ä¸­ä½¿ç”¨goroutine">
&lt;a href="#%e4%b8%ad%e9%97%b4%e4%bb%b6%e4%b8%ad%e4%bd%bf%e7%94%a8goroutine" class="header-anchor">#&lt;/a>
ä¸­é—´ä»¶ä¸­ä½¿ç”¨goroutine
&lt;/h3>&lt;p>å½“åœ¨ä¸­é—´ä»¶æˆ–æ§åˆ¶å™¨å‡½æ•°ä¸­å¯åŠ¨æ–°çš„goroutineæ—¶ï¼Œä¸èƒ½ä½¿ç”¨åŸå§‹çš„ä¸Šä¸‹æ–‡ï¼ˆ&lt;code>c *gin.Context&lt;/code>ï¼‰ï¼Œå› ä¸º &lt;code>gin.Context&lt;/code> &lt;strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„&lt;/strong>ã€‚åœ¨ goroutine ä¸­ç›´æ¥è®¿é—® &lt;code>gin.Context&lt;/code> çš„å­—æ®µå¯èƒ½ä¼šå¯¼è‡´ç«æ€æ¡ä»¶ï¼ˆrace conditionï¼‰å’Œä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚&lt;/p>
&lt;p>&lt;strong>ä¸­é—´ä»¶ä¸­ä½¿ç”¨ goroutine çš„åœºæ™¯&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;strong>æ—¥å¿—è®°å½•&lt;/strong>ï¼šå¼‚æ­¥è®°å½•æ—¥å¿—ä»¥å‡å°‘å¯¹è¯·æ±‚å¤„ç†æ—¶é—´çš„å½±å“ã€‚&lt;/li>
&lt;li>&lt;strong>å¼‚æ­¥å¤„ç†&lt;/strong>ï¼šåœ¨å“åº”è¯·æ±‚åæ‰§è¡Œè€—æ—¶çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å‘é€é€šçŸ¥é‚®ä»¶ã€æ¸…ç†èµ„æºç­‰ã€‚&lt;/li>
&lt;li>&lt;strong>å¹¶å‘å¤„ç†&lt;/strong>ï¼šåœ¨è¯·æ±‚å¤„ç†ä¸­å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>åœ¨ä¸­é—´ä»¶ä¸­ä½¿ç”¨ goroutine çš„æ­£ç¡®æ–¹å¼&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å®‰å…¨åœ°ä¼ é€’ä¸Šä¸‹æ–‡æ•°æ®&lt;/p>
&lt;p>ä¸ºäº†é¿å…ç›´æ¥åœ¨ goroutine ä¸­ä½¿ç”¨ &lt;code>gin.Context&lt;/code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯åŠ¨ goroutine ä¹‹å‰æå–éœ€è¦çš„æ•°æ®ï¼Œç„¶åå°†è¿™äº›æ•°æ®ä¼ é€’ç»™ goroutineã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">AsyncLoggerMiddleware&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æå–éœ€è¦çš„æ•°æ®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">method&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Method&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">URL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">clientIP&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ClientIP&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯åŠ¨ä¸€ä¸ª goroutine è¿›è¡Œå¼‚æ­¥æ—¥å¿—è®°å½•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Request %s %s from %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">method&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">clientIP&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»§ç»­å¤„ç†è¯·æ±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è¯·æ±‚å“åº”ä¹‹åå¯åŠ¨åç¨‹å¤„ç†ä»»åŠ¡&lt;/p>
&lt;p>å¯ä»¥åœ¨å“åº”å®¢æˆ·ç«¯åå¯åŠ¨ goroutine æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œä¾‹å¦‚å‘é€é‚®ä»¶é€šçŸ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">AsyncTaskMiddleware&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æå–éœ€è¦çš„æ•°æ®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">userEmail&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Header&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;User-Email&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»§ç»­å¤„ç†è¯·æ±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åœ¨å“åº”å®¢æˆ·ç«¯åå¯åŠ¨ä¸€ä¸ª goroutine æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡ï¼Œä¾‹å¦‚å‘é€é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Email sent to %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">userEmail&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åˆ›å»ºä¸Šä¸‹æ–‡å‰¯æœ¬&lt;/p>
&lt;p>åœ¨ Gin ä¸­ä½¿ç”¨ &lt;code>c.Copy()&lt;/code> æ–¹æ³•å¯ä»¥åœ¨ goroutine ä¸­å®‰å…¨åœ°è®¿é—® &lt;code>gin.Context&lt;/code> çš„æ•°æ®ã€‚&lt;code>c.Copy()&lt;/code> ä¼šåˆ›å»ºå¹¶è¿”å› &lt;code>gin.Context&lt;/code> çš„ä¸€ä¸ªæ·±æ‹·è´ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…ç«æ€æ¡ä»¶çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ &lt;code>c.Copy()&lt;/code> çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•åœ¨ Gin ä¸­é—´ä»¶ä¸­ä½¿ç”¨ goroutine è¿›è¡Œå¼‚æ­¥å¤„ç†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">AsyncLoggerMiddleware&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¤åˆ¶ä¸Šä¸‹æ–‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">cCp&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯åŠ¨ä¸€ä¸ª goroutine è¿›è¡Œå¼‚æ­¥æ—¥å¿—è®°å½•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¨¡æ‹Ÿæ—¥å¿—è®°å½•çš„è€—æ—¶æ“ä½œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Request %s %s from %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cCp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Method&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cCp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">URL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cCp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ClientIP&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»§ç»­å¤„ç†è¯·æ±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">AsyncTaskMiddleware&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¤åˆ¶ä¸Šä¸‹æ–‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">cCp&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»§ç»­å¤„ç†è¯·æ±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åœ¨å“åº”å®¢æˆ·ç«¯åå¯åŠ¨ä¸€ä¸ª goroutine æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡ï¼Œä¾‹å¦‚å‘é€é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">userEmail&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cCp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Header&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;User-Email&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Email sent to %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">userEmail&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ³¨å†Œä¸­é—´ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">AsyncLoggerMiddleware&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">AsyncTaskMiddleware&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å®šä¹‰è·¯ç”±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;pong&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯åŠ¨æœåŠ¡å™¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ä½¿ç”¨ &lt;code>c.Copy()&lt;/code>ï¼Œå¯ä»¥å®‰å…¨åœ°åœ¨ Gin ä¸­é—´ä»¶ä¸­ä½¿ç”¨ goroutineï¼Œæå‡åº”ç”¨çš„å¹¶å‘å¤„ç†èƒ½åŠ›å’Œå“åº”æ•ˆç‡ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>â€‹&lt;/p>
&lt;p>&lt;strong>æ³¨æ„äº‹é¡¹&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;strong>çº¿ç¨‹å®‰å…¨&lt;/strong>ï¼šé¿å…åœ¨ goroutine ä¸­ç›´æ¥è®¿é—® &lt;code>gin.Context&lt;/code> çš„å­—æ®µï¼Œåº”è¯¥åœ¨å¯åŠ¨ goroutine ä¹‹å‰æå–æ‰€éœ€æ•°æ®ã€‚&lt;/li>
&lt;li>&lt;strong>èµ„æºæ³„æ¼&lt;/strong>ï¼šç¡®ä¿ goroutine ä¸­çš„ä»»åŠ¡èƒ½å¤Ÿæ­£å¸¸å®Œæˆï¼Œé¿å…å› æ„å¤–æƒ…å†µå¯¼è‡´ goroutine æ³„æ¼ã€‚&lt;/li>
&lt;li>&lt;strong>é”™è¯¯å¤„ç†&lt;/strong>ï¼šåœ¨ goroutine ä¸­å¤„ç†å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œä»¥å…å½±å“ä¸»è¯·æ±‚çš„å¤„ç†æµç¨‹ã€‚&lt;/li>
&lt;li>&lt;strong>ä½¿ç”¨æ·±æ‹·è´&lt;/strong>ï¼šç¡®ä¿åœ¨å¯åŠ¨ goroutine ä¹‹å‰è°ƒç”¨ &lt;code>c.Copy()&lt;/code>ï¼Œå¹¶åœ¨ goroutine ä¸­ä½¿ç”¨è¿”å›çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨åŸå§‹çš„ &lt;code>gin.Context&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;p>é€šè¿‡åˆç†ä½¿ç”¨ goroutineï¼Œå¯ä»¥æ˜¾è‘—æå‡åº”ç”¨çš„å¹¶å‘å¤„ç†èƒ½åŠ›ï¼ŒåŒæ—¶ä¿æŒè¯·æ±‚çš„å¿«é€Ÿå“åº”ã€‚&lt;/p>
&lt;h3 id="å°ç»“">
&lt;a href="#%e5%b0%8f%e7%bb%93" class="header-anchor">#&lt;/a>
å°ç»“
&lt;/h3>&lt;p>ä¸­é—´ä»¶åœ¨ Gin æ¡†æ¶ä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å®ç°æ—¥å¿—è®°å½•ã€è®¤è¯æˆæƒã€é”™è¯¯å¤„ç†ç­‰å¸¸è§åŠŸèƒ½ã€‚Gin æä¾›äº†çµæ´»çš„ä¸­é—´ä»¶ä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥å…¨å±€ã€è·¯ç”±ç»„æˆ–è€…å•ç‹¬è·¯ç”±ä½¿ç”¨ä¸­é—´ä»¶ï¼Œæ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚é€šè¿‡åˆç†ä½¿ç”¨ä¸­é—´ä»¶ï¼Œå¯ä»¥å¤§å¤§æå‡åº”ç”¨çš„ç»“æ„å’Œä»£ç å¤ç”¨æ€§ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="ginæ–‡ä»¶ä¸Šä¼ ">
&lt;a href="#gin%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0" class="header-anchor">#&lt;/a>
Ginæ–‡ä»¶ä¸Šä¼ 
&lt;/h2>&lt;p>åœ¨Ginæ¡†æ¶ä¸­ï¼Œå¤„ç†æ–‡ä»¶ä¸Šä¼ æ˜¯ä¸€é¡¹å¸¸è§çš„ä»»åŠ¡ã€‚&lt;/p>
&lt;p>Ginæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„Goè¯­è¨€Webæ¡†æ¶ï¼Œæä¾›äº†ç®€æ´è€Œå¼ºå¤§çš„APIæ¥å¤„ç†HTTPè¯·æ±‚ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¸Šä¼ ã€‚ä¸‹é¢æ˜¯å…³äºå¦‚ä½•åœ¨Ginæ¡†æ¶ä¸­å¤„ç†æ–‡ä»¶ä¸Šä¼ çš„ç›¸å…³çŸ¥è¯†å’Œç¤ºä¾‹ä»£ç ã€‚&lt;/p>
&lt;h3 id="åŸºæœ¬æ–‡ä»¶ä¸Šä¼ ">
&lt;a href="#%e5%9f%ba%e6%9c%ac%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0" class="header-anchor">#&lt;/a>
åŸºæœ¬æ–‡ä»¶ä¸Šä¼ 
&lt;/h3>&lt;p>Ginæä¾›äº†æ–¹ä¾¿çš„æ–¹æ³•æ¥å¤„ç†å•ä¸ªæ–‡ä»¶çš„ä¸Šä¼ ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">form&lt;/span> &lt;span class="na">action&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/admin/user/doAdd&amp;#34;&lt;/span> &lt;span class="na">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;post&amp;#34;&lt;/span> &lt;span class="na">enctype&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;multipart/form-data&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ç”¨æˆ·åï¼š &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span> &lt;span class="na">placeholder&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;ç”¨æˆ·å&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å¤´ åƒ1ï¼š&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file1&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å¤´ åƒ2ï¼š&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file2&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;submit&amp;#34;&lt;/span> &lt;span class="na">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;æäº¤&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šéœ€è¦åœ¨ä¸Šä¼ æ–‡ä»¶çš„ form è¡¨å•ä¸Šé¢éœ€è¦åŠ å…¥ enctype=&amp;ldquo;multipart/form-data&amp;rdquo;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/upload&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FormFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;file1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FormFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;file2&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Bad request: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SaveUploadedFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./uploads&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SaveUploadedFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./uploads&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusInternalServerError&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Could not save file: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;File %s and %s uploaded successfully.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒGiné€šè¿‡&lt;code>c.FormFile(&amp;quot;file&amp;quot;)&lt;/code>æ–¹æ³•è·å–ä¸Šä¼ çš„æ–‡ä»¶ã€‚&lt;/p>
&lt;p>â€‹ &lt;code>FormFile&lt;/code>æ–¹æ³•è¿”å›æŒ‡å®š&lt;strong>è¡¨å•é”®&lt;/strong>ï¼ˆåªèƒ½è¿”å›ç¬¬ä¸€ä¸ªï¼‰çš„&lt;strong>æè¿°å¤šéƒ¨åˆ†è¡¨å•è¯·æ±‚çš„æ–‡ä»¶éƒ¨åˆ†&lt;/strong>å¯¹è±¡ã€‚&lt;/p>
&lt;p>â€‹ æ„æ€å°±æ˜¯ï¼šæ ¹æ®å¤šéƒ¨åˆ†è¡¨å•è¯·æ±‚çš„æ–‡ä»¶éƒ¨åˆ†çš„nameå±æ€§è·å–æ–‡ä»¶éƒ¨åˆ†å¯¹è±¡&lt;code>multipart.FileHeader&lt;/code>ã€‚&lt;/p>
&lt;p>ç„¶åä½¿ç”¨&lt;code>c.SaveUploadedFile&lt;/code>æ–¹æ³•å°†æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨çš„æŒ‡å®šç›®å½•ã€‚&lt;/p>
&lt;p>â€‹ &lt;code>SaveUploadedFile&lt;/code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªï¼šè¦ä¿å­˜çš„æè¿°å¤šéƒ¨åˆ†è¡¨å•è¯·æ±‚çš„æ–‡ä»¶éƒ¨åˆ†å¯¹è±¡ï¼Œç¬¬äºŒä¸ªï¼šæœ¬åœ°ç³»ç»Ÿè·¯å¾„ï¼ˆstringç±»å‹ï¼‰ã€‚&lt;/p>
&lt;p>ä¸Šé¢æ¼”ç¤ºäº†å¦‚ä½•æ ¹æ®ä¸åŒçš„è¡¨å•é”®å°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨ï¼ˆå³å¤„ç†ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œnameå±æ€§ä¸åŒï¼‰ï¼Œæ˜¯æ ¹æ®è¡¨å•çš„nameå±æ€§ä¿å­˜çš„ã€‚&lt;strong>é€‚ç”¨äºä¸åŒçš„nameå±æ€§&lt;/strong>ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼Œä¸Šé¢è¿™ç§æƒ…å†µå¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒçš„nameå±æ€§ï¼Œåªèƒ½è·å–ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚&lt;/p>
&lt;p>ä¸‹é¢ä»‹ç»å¦‚ä½•ä¿å­˜ç›¸åŒnameå±æ€§çš„æ–‡ä»¶ã€‚&lt;strong>é€‚ç”¨äºç›¸åŒçš„nameå±æ€§&lt;/strong>ã€‚&lt;/p>
&lt;h3 id="å¤„ç†å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ">
&lt;a href="#%e5%a4%84%e7%90%86%e5%a4%9a%e4%b8%aa%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0" class="header-anchor">#&lt;/a>
å¤„ç†å¤šä¸ªæ–‡ä»¶ä¸Šä¼ 
&lt;/h3>&lt;p>å¦‚æœéœ€è¦å¤„ç†å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œnameå±æ€§ç›¸åŒï¼Œå¯ä»¥ä½¿ç”¨&lt;code>c.MultipartForm&lt;/code>æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">form&lt;/span> &lt;span class="na">action&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/admin/user/doAdd&amp;#34;&lt;/span> &lt;span class="na">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;post&amp;#34;&lt;/span> &lt;span class="na">enctype&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;multipart/form-data&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ç”¨æˆ·åï¼š &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span> &lt;span class="na">placeholder&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;ç”¨æˆ·å&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å¤´ åƒ1ï¼š&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;files&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å¤´ åƒ2ï¼š&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;file&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;files&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;submit&amp;#34;&lt;/span> &lt;span class="na">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;æäº¤&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/uploads&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä»è¯·æ±‚ä¸­è§£æå¤šä¸ªæ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">form&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MultipartForm&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Bad request&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">files&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">form&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">File&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;files&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">files&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">files&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SaveUploadedFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./uploads&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusInternalServerError&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Could not save file: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Bad Request: è¯·ä¸Šä¼ æŒ‡å®šæ–‡ä»¶ï¼&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d files uploaded successfully.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">files&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé¦–å…ˆä½¿ç”¨&lt;code>c.MultipartForm&lt;/code>æ–¹æ³•è·&lt;strong>å¤šéƒ¨åˆ†è¡¨å•&lt;/strong>æ•°æ®ï¼Œæ–‡ä»¶éƒ¨åˆ†å°±åœ¨å…¶&lt;code>File&lt;/code>å­—æ®µä¸‹ï¼Œæ˜¯&lt;code>map[string][]*FileHeader&lt;/code>ç±»å‹ã€‚é€šè¿‡è¡¨å•é”®ï¼ˆnameå±æ€§çš„å€¼ï¼‰å°±èƒ½è·å–è¯¥é”®ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¯¹è±¡ï¼Œæ˜¯åˆ‡ç‰‡ç±»å‹ã€‚&lt;/p>
&lt;p>æœ€åéå†æ‰€æœ‰æ–‡ä»¶è¿›è¡Œä¿å­˜å¤„ç†å³å¯ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šè¯¥æ–¹æ³•åŒæ ·é€‚ç”¨äºä¸åŒçš„è¡¨å•é”®ï¼Œä¸è¿‡éœ€è¦è¿›è¡Œéå†ä¿å­˜ã€‚&lt;/p>
&lt;h3 id="è®¾ç½®å¤„ç†å¤šéƒ¨åˆ†è¡¨å•è¯·æ±‚çš„æœ€å¤§å†…å­˜å¤§å°">
&lt;a href="#%e8%ae%be%e7%bd%ae%e5%a4%84%e7%90%86%e5%a4%9a%e9%83%a8%e5%88%86%e8%a1%a8%e5%8d%95%e8%af%b7%e6%b1%82%e7%9a%84%e6%9c%80%e5%a4%a7%e5%86%85%e5%ad%98%e5%a4%a7%e5%b0%8f" class="header-anchor">#&lt;/a>
è®¾ç½®å¤„ç†å¤šéƒ¨åˆ†è¡¨å•è¯·æ±‚çš„æœ€å¤§å†…å­˜å¤§å°
&lt;/h3>&lt;p>&lt;code>MaxMultipartMemory&lt;/code> æ˜¯ &lt;code>*gin.Engine&lt;/code> å¯¹è±¡çš„ä¸€ä¸ªå­—æ®µï¼Œè¡¨ç¤ºGinæ¡†æ¶å¤„ç†multipart/form-dataç±»å‹è¯·æ±‚æ—¶ï¼Œå¯ä»¥åœ¨å†…å­˜ä¸­å­˜å‚¨çš„æœ€å¤§æ•°æ®å¤§å°ã€‚&lt;/p>
&lt;p>å½“ä¸€ä¸ªmultipart/form-dataè¯·æ±‚ä¸­çš„æ•°æ®å¤§å°è¶…è¿‡äº†&lt;code>MaxMultipartMemory&lt;/code>é™åˆ¶æ—¶ï¼ŒGinæ¡†æ¶å°†ä¼šè‡ªåŠ¨å°†è¶…å‡ºéƒ¨åˆ†çš„æ•°æ®å†™å…¥åˆ°ç£ç›˜çš„ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢å ç”¨è¿‡å¤šå†…å­˜å¯¼è‡´å†…å­˜æº¢å‡ºçš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œåœ¨æ–‡ä»¶ä¸Šä¼ çš„æƒ…å†µä¸‹ï¼Œè¾ƒå¤§çš„æ–‡ä»¶å°†ä¸ä¼šå…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè€Œæ˜¯éƒ¨åˆ†å†™å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œä»è€Œ&lt;strong>å‡å°‘å†…å­˜æ¶ˆè€—&lt;/strong>ã€‚&lt;/p>
&lt;p>Giné»˜è®¤å¤„ç†å¤šéƒ¨åˆ†è¡¨å•è¯·æ±‚çš„æœ€å¤§å†…å­˜æ˜¯32MiBã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è®¾ç½®æœ€å¤§ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸º8MB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MaxMultipartMemory&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">20&lt;/span> &lt;span class="c1">// 8 MiB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/upload&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FormFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Bad request&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SaveUploadedFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;./uploads/&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusInternalServerError&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Could not save file&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;File %s uploaded successfully.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>r.MaxMultipartMemory = 8 &amp;lt;&amp;lt; 20&lt;/code> å°†Ginæ¡†æ¶å¤„ç†multipart/form-dataç±»å‹è¯·æ±‚çš„æœ€å¤§å†…å­˜å¤§å°è®¾ç½®ä¸º8MiBã€‚&lt;/p>
&lt;p>&lt;code>8 &amp;lt;&amp;lt; 20&lt;/code>ï¼šè¿™ä¸ªè¡¨è¾¾å¼åˆ©ç”¨å·¦ç§»è¿ç®—ç¬¦å°†8å·¦ç§»20ä½ï¼Œç­‰ä»·äº&lt;code>8 * 2^20&lt;/code>ï¼Œå³8 MiBï¼ˆå…†å­—èŠ‚ï¼‰ã€‚è¿™ç§å†™æ³•ç®€æ´æ˜äº†ï¼Œå®¹æ˜“ç†è§£å’Œè®°å¿†ã€‚&lt;/p>
&lt;p>Ginä¼šå°†è¶…è¿‡éƒ¨åˆ†çš„æ•°æ®å†™å…¥åˆ°ç£ç›˜çš„ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚&lt;strong>è¿™æ ·å¯ä»¥æœ‰æ•ˆé˜²æ­¢å¤§æ–‡ä»¶ä¸Šä¼ æ—¶å†…å­˜å ç”¨è¿‡å¤šçš„é—®é¢˜&lt;/strong>ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>å•ä½æ‰©å±•&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>MiBå’ŒMBéƒ½è¯»å…†å­—èŠ‚ã€‚&lt;/li>
&lt;li>äºŒä¸­çš„åŒºåˆ«æ˜¯ä½¿ç”¨çš„è®¡æ•°æ³•ä¸åŒã€‚
&lt;ul>
&lt;li>MiBä½¿ç”¨äºŒè¿›åˆ¶è®¡æ•°æ³•ã€‚1MiB = 1024KiB = 1,048,576 å­—èŠ‚ = 2^20 å­—èŠ‚&lt;/li>
&lt;li>MBä½¿ç”¨åè¿›åˆ¶è®¡æ•°æ³•ã€‚1MB = 1000KB = 1000000 å­—èŠ‚ = 10^6 å­—èŠ‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>é€šå¸¸ç°å®ç”Ÿæ´»ä¸­ä½¿ç”¨çš„æ˜¯MBï¼Œè®¡ç®—æœºä¸­ä½¿ç”¨çš„æ˜¯MiBã€‚ç›¸åŒæ•°å€¼ä¸‹ï¼ŒMiBè¡¨ç¤ºçš„ç©ºé—´æ›´å¤§ã€‚
&lt;ul>
&lt;li>å¦‚è´­ä¹°çš„ä¸€å—æœºæ¢°ç¡¬ç›˜ä¸º2Tï¼Œåœ¨è®¡ç®—æœºä¸­æ˜¾ç¤ºé€šå¸¸å°äº2Tã€‚å› ä¸ºæ“ä½œç³»ç»Ÿä½¿ç”¨çš„æ˜¯äºŒè¿›åˆ¶è®¡ç®—æ–¹æ³•ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h3 id="ä½¿ç”¨ä¸­é—´ä»¶å¤„ç†æ–‡ä»¶ä¸Šä¼ ">
&lt;a href="#%e4%bd%bf%e7%94%a8%e4%b8%ad%e9%97%b4%e4%bb%b6%e5%a4%84%e7%90%86%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0" class="header-anchor">#&lt;/a>
ä½¿ç”¨ä¸­é—´ä»¶å¤„ç†æ–‡ä»¶ä¸Šä¼ 
&lt;/h3>&lt;p>é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ä¸­é—´ä»¶æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œæ¯”å¦‚&lt;strong>éªŒè¯æ–‡ä»¶ç±»å‹&lt;/strong>ã€&lt;strong>é™åˆ¶æ–‡ä»¶å¤§å°&lt;/strong>ç­‰ã€‚&lt;/p>
&lt;p>é™åˆ¶æ–‡ä»¶å¤§å°ä¸­é—´ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">MaxSizeAllowedMiddleware&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">n&lt;/span> &lt;span class="kt">int64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Body&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MaxBytesReader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Body&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseMultipartForm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusRequestEntityTooLarge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;æ–‡ä»¶å¤ªå¤§äº†, ä¸èƒ½è¶…è¿‡%då…†å­—èŠ‚: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Abort&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éªŒè¯æ–‡ä»¶ç±»å‹ä¸­é—´ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ValidateFileTypeMiddleware&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">allowExtMap&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FormFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Bad Request: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Abort&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ext&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Ext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">f&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">allowExtMap&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">ext&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;%q file type is not allowed&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ext&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Abort&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">POST&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/upload&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">MaxSizeAllowedMiddleware&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">ValidateFileTypeMiddleware&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;.jpg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;.png&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FormFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;file&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Bad request: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SaveUploadedFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./uploads&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusInternalServerError&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Could not save file: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;File %s uploaded successfully.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„äº‹é¡¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸Šé¢ç®€å•æ¼”ç¤ºäº†&lt;strong>å•æ–‡ä»¶ä¸Šä¼ &lt;/strong>æ—¶ï¼Œä½¿ç”¨ä¸­é—´ä»¶é™åˆ¶ä¸Šä¼ æ–‡ä»¶çš„å¤§å°ï¼Œä»¥åŠç±»å‹ã€‚
&lt;ul>
&lt;li>å¦‚æœæ˜¯å¤šæ–‡ä»¶ä¸Šä¼ ï¼Œæ–‡ä»¶å¤§å°ä¸­é—´ä»¶å¯ä»¥é€‚ç”¨ï¼Œä½†æ–‡ä»¶ç±»å‹ä¸­é—´ä»¶ä¸é€‚ç”¨ï¼Œéœ€è¦ä½¿ç”¨&lt;code>MultipartForm&lt;/code>è·å–å¤šéƒ¨åˆ†è¡¨å•è¯·æ±‚å¯¹è±¡ï¼Œç„¶åé€šè¿‡&lt;code>File&lt;/code>å­—æ®µéå†ï¼Œåˆ¤æ–­æ–‡ä»¶ç±»å‹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä»–ä»¬çš„æ³¨å†Œé¡ºåºï¼š
&lt;ol>
&lt;li>&lt;strong>é™åˆ¶æ–‡ä»¶å¤§å°çš„ä¸­é—´ä»¶&lt;/strong>ï¼š è¿™ä¸ªä¸­é—´ä»¶åº”è¯¥å…ˆæ‰§è¡Œï¼Œå› ä¸ºå®ƒå¯ä»¥å°½æ—©åœ°æ£€æŸ¥è¯·æ±‚ä½“çš„å¤§å°ï¼Œé¿å…æµªè´¹èµ„æºå»å¤„ç†è¶…è¿‡é™åˆ¶çš„è¯·æ±‚ã€‚&lt;/li>
&lt;li>&lt;strong>éªŒè¯æ–‡ä»¶ç±»å‹çš„ä¸­é—´ä»¶&lt;/strong>ï¼š åœ¨æ–‡ä»¶å¤§å°è¢«éªŒè¯é€šè¿‡ä¹‹åï¼Œå†è¿›è¡Œæ–‡ä»¶ç±»å‹çš„éªŒè¯ã€‚è¿™æ˜¯å› ä¸ºæ–‡ä»¶ç±»å‹çš„éªŒè¯é€šå¸¸éœ€è¦è§£ææ–‡ä»¶å†…å®¹æˆ–å…ƒæ•°æ®ï¼Œå±äºè¾ƒé‡çš„æ“ä½œã€‚&lt;/li>
&lt;li>é€šè¿‡è¿™ç§é¡ºåºè®¾ç½®ï¼Œå¯ä»¥ç¡®ä¿è¯·æ±‚è¢«æœ‰æ•ˆåœ°è¿‡æ»¤ï¼Œå¹¶é¿å…ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>æœ€åéœ€è¦æ³¨æ„ï¼šå¦‚æœå…ˆéªŒè¯äº†æ–‡ä»¶ç±»å‹ï¼Œé‚£ä¹ˆä¼šæ¶ˆè€—è¯·æ±‚ä½“å†…å®¹å¤§å°ï¼Œé€ æˆé™åˆ¶æ–‡ä»¶å¤§å°ä¸­é—´ä»¶å¤±æ•ˆã€‚æ‰€ä»¥è¦å…ˆæ³¨å†Œé™åˆ¶æ–‡ä»¶å¤§å°ä¸­é—´ä»¶ã€‚&lt;/li>
&lt;li>æ¥å£è®¿é—®æ¨èåœ¨æ¥å£æµ‹è¯•å·¥å…·ä¸­è®¿é—®ï¼Œå¦‚apipostã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="ä½¿ç”¨cookie">
&lt;a href="#%e4%bd%bf%e7%94%a8cookie" class="header-anchor">#&lt;/a>
ä½¿ç”¨Cookie
&lt;/h2>&lt;h3 id="cookieä»‹ç»">
&lt;a href="#cookie%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
Cookieä»‹ç»
&lt;/h3>&lt;p>Cookie æ˜¯åœ¨ HTTP åè®®ä¸­ç”¨æ¥&lt;strong>å­˜å‚¨å°‘é‡æ•°æ®&lt;/strong>çš„æŠ€æœ¯ï¼Œç”±æœåŠ¡å™¨å‘é€åˆ°æµè§ˆå™¨å¹¶&lt;strong>å­˜å‚¨åœ¨å®¢æˆ·ç«¯&lt;/strong>ã€‚å…¶ä¸»è¦ä½œç”¨åŒ…æ‹¬ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ä¼šè¯ç®¡ç†ï¼ˆSession Managementï¼‰&lt;/p>
&lt;p>Cookie å¸¸ç”¨äºä¼šè¯ç®¡ç†ï¼Œå³åœ¨ç”¨æˆ·æµè§ˆç½‘é¡µæœŸé—´ä¿æŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚å¸¸è§çš„åº”ç”¨åœºæ™¯æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç”¨æˆ·è®¤è¯ï¼š&lt;/strong> è®°å½•ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œä½¿å¾—ç”¨æˆ·åœ¨æµè§ˆç½‘ç«™çš„ä¸åŒé¡µé¢æ—¶æ— éœ€é‡æ–°ç™»å½•ã€‚&lt;/li>
&lt;li>&lt;strong>è´­ç‰©è½¦ï¼š&lt;/strong> åœ¨çº¿å•†åº—ä½¿ç”¨ Cookie æ¥è®°å½•ç”¨æˆ·çš„è´­ç‰©è½¦å†…å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ä¸ªæ€§åŒ–ï¼ˆPersonalizationï¼‰&lt;/p>
&lt;p>Cookie å¯ä»¥ç”¨æ¥è®°å½•ç”¨æˆ·çš„åå¥½è®¾ç½®ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶æä¾›ä¸ªæ€§åŒ–çš„å†…å®¹å’Œä½“éªŒã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç”¨æˆ·ç•Œé¢è®¾ç½®ï¼š&lt;/strong> ä¿å­˜ç”¨æˆ·é€‰æ‹©çš„ä¸»é¢˜ã€è¯­è¨€ç­‰åå¥½è®¾ç½®ã€‚&lt;/li>
&lt;li>&lt;strong>ä¸ªæ€§åŒ–å¹¿å‘Šï¼š&lt;/strong> æ ¹æ®ç”¨æˆ·çš„æµè§ˆå†å²è®°å½•å’Œåå¥½ï¼Œå±•ç¤ºç›¸å…³çš„å¹¿å‘Šå†…å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è·Ÿè¸ªå’Œåˆ†æï¼ˆTracking and Analyticsï¼‰&lt;/p>
&lt;p>Cookie è¢«å¹¿æ³›ç”¨äºç”¨æˆ·è¡Œä¸ºè·Ÿè¸ªå’Œæ•°æ®åˆ†æï¼Œä»¥å¸®åŠ©ç½‘ç«™ç®¡ç†å‘˜äº†è§£ç”¨æˆ·å¦‚ä½•ä½¿ç”¨ä»–ä»¬çš„ç½‘ç«™ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æµé‡åˆ†æï¼š&lt;/strong> è®°å½•ç”¨æˆ·è®¿é—®çš„é¡µé¢ã€åœç•™æ—¶é—´ç­‰ä¿¡æ¯ï¼Œç”¨äºæµé‡ç»Ÿè®¡å’Œåˆ†æã€‚&lt;/li>
&lt;li>&lt;strong>å¹¿å‘Šè·Ÿè¸ªï¼š&lt;/strong> è·Ÿè¸ªç”¨æˆ·ç‚¹å‡»å¹¿å‘Šçš„æƒ…å†µï¼Œä»¥è¯„ä¼°å¹¿å‘Šæ•ˆæœã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å®‰å…¨æ€§ï¼ˆSecurityï¼‰&lt;/p>
&lt;p>è™½ç„¶ Cookie æœ¬èº«ä¸æ˜¯å®‰å…¨æœºåˆ¶ï¼Œä½†å®ƒä»¬å¯ä»¥ä¸å®‰å…¨æœºåˆ¶ç»“åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>é˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰ï¼š&lt;/strong> é€šè¿‡è®¾ç½® HttpOnly å’Œ Secure å±æ€§ï¼Œå¢å¼º Cookie çš„å®‰å…¨æ€§ï¼Œé˜²æ­¢æ”»å‡»è€…åˆ©ç”¨ JavaScript çªƒå– Cookie å†…å®¹ã€‚&lt;/li>
&lt;li>&lt;strong>ä»¤ç‰Œå­˜å‚¨ï¼š&lt;/strong> å°†å®‰å…¨ä»¤ç‰Œå­˜å‚¨åœ¨ Cookie ä¸­ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡è¯·æ±‚æ—¶è¿›è¡ŒéªŒè¯ã€‚&lt;/li>
&lt;/ul>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯åˆ«ä½¿ç”¨cookieä¿å­˜&lt;strong>éšç§æ•°æ®&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>çŠ¶æ€ç®¡ç†ï¼ˆState Managementï¼‰&lt;/p>
&lt;p>HTTP æ˜¯æ— çŠ¶æ€åè®®ï¼ŒæœåŠ¡å™¨æ— æ³•è®°å½•æ¯æ¬¡è¯·æ±‚çš„çŠ¶æ€ã€‚Cookie å¯ä»¥å¸®åŠ©æœåŠ¡å™¨å­˜å‚¨å’Œç®¡ç†ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä¸Šæ¬¡è®¿é—®æ—¶é—´ï¼š&lt;/strong> è®°å½•ç”¨æˆ·ä¸Šæ¬¡è®¿é—®çš„æ—¶é—´ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·å†æ¬¡è®¿é—®æ—¶æä¾›ç›¸å…³ä¿¡æ¯ã€‚&lt;/li>
&lt;li>&lt;strong>è¡¨å•æ•°æ®ï¼š&lt;/strong> å­˜å‚¨ç”¨æˆ·åœ¨è¡¨å•ä¸­è¾“å…¥çš„æ•°æ®ï¼Œæ–¹ä¾¿åœ¨ç”¨æˆ·è¿”å›æ—¶è‡ªåŠ¨å¡«å……ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="cookieçš„å±æ€§">
&lt;a href="#cookie%e7%9a%84%e5%b1%9e%e6%80%a7" class="header-anchor">#&lt;/a>
Cookieçš„å±æ€§
&lt;/h4>&lt;p>Cookie çš„å±æ€§å†³å®šäº†å®ƒçš„è¡Œä¸ºå’Œå­˜å‚¨æ–¹å¼ï¼Œå¸¸è§çš„å±æ€§åŒ…æ‹¬ï¼š&lt;/p>
&lt;p>&lt;strong>Name å’Œ Valueï¼š&lt;/strong> Cookie çš„åç§°å’Œå€¼ã€‚&lt;/p>
&lt;p>&lt;strong>Domainï¼š&lt;/strong> æŒ‡å®š Cookie æ‰€å±çš„åŸŸï¼Œåªæœ‰è¯¥åŸŸåŠå…¶å­åŸŸå¯ä»¥è®¿é—® Cookieã€‚&lt;/p>
&lt;p>&lt;strong>Pathï¼š&lt;/strong> æŒ‡å®š Cookie æ‰€å±çš„è·¯å¾„ï¼Œåªæœ‰è¯¥è·¯å¾„åŠå…¶å­è·¯å¾„å¯ä»¥è®¿é—® Cookieã€‚&lt;/p>
&lt;p>&lt;strong>Max-Age/Expiresï¼š&lt;/strong> æŒ‡å®š Cookie çš„æœ‰æ•ˆæœŸï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´åï¼ŒCookie å°†è¢«åˆ é™¤ã€‚&lt;/p>
&lt;p>&lt;strong>Secureï¼š&lt;/strong> æŒ‡å®š Cookie ä»…åœ¨ HTTPS è¿æ¥ä¸­å‘é€ã€‚&lt;/p>
&lt;p>&lt;strong>HttpOnlyï¼š&lt;/strong> æŒ‡å®š Cookie ä¸èƒ½é€šè¿‡ JavaScript è®¿é—®ï¼Œå¢å¼ºå®‰å…¨æ€§ã€‚&lt;/p>
&lt;p>&lt;strong>SameSiteï¼š&lt;/strong> é˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ”»å‡»ï¼Œæœ‰ä¸‰ä¸ªå€¼å¯ä»¥é€‰æ‹©ï¼šStrictã€Lax å’Œ Noneã€‚&lt;/p>
&lt;h4 id="è¡¥å……">
&lt;a href="#%e8%a1%a5%e5%85%85" class="header-anchor">#&lt;/a>
è¡¥å……
&lt;/h4>&lt;ul>
&lt;li>Cookieæœ¬è´¨å°±æ˜¯ä¸€ä¸ªè¯·æ±‚å¤´ï¼Œå¯ä»¥åœ¨è¯·æ±‚å¤´ä¸­æŸ¥çœ‹Cookieã€‚&lt;/li>
&lt;li>æµè§ˆå™¨è®¾ç½®Cookieæ˜¯é€šè¿‡å“åº”å¤´Set-Cookieè®¾ç½®çš„ã€‚&lt;/li>
&lt;li>æŸ¥çœ‹Cookieè¿˜å¯ä»¥å†æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·çš„Application&amp;ndash;&amp;gt;Storageä¸­æŸ¥çœ‹å¯¹åº”åŸŸåä¸‹çš„Cookieã€‚
&lt;ul>
&lt;li>ä¸åŒæµè§ˆå™¨å¯èƒ½æœ‰æ‰€ä¸åŒã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="åœ¨ginä¸­ä½¿ç”¨cookie">
&lt;a href="#%e5%9c%a8gin%e4%b8%ad%e4%bd%bf%e7%94%a8cookie" class="header-anchor">#&lt;/a>
åœ¨Ginä¸­ä½¿ç”¨Cookie
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>è®¾ç½®Cookie&lt;/p>
&lt;p>åœ¨Ginä¸­ï¼Œä½¿ç”¨&lt;code>SetCookie&lt;/code>æ–¹æ³•å¯ä»¥åœ¨å“åº”ä¸­è®¾ç½®ä¸€ä¸ªcookieï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SetCookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">maxAge&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">domain&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">secure&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">httpOnly&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>name&lt;/code>: cookieçš„åç§°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>value&lt;/code>: cookieçš„å€¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>maxAge&lt;/code>: cookieçš„æœ€å¤§å­˜æ´»æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚&lt;/p>
&lt;ul>
&lt;li>æœ‰æ•ˆæ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚&lt;/li>
&lt;li>MaxAge=0ï¼Œå¿½ç•¥MaxAgeå±æ€§ï¼Œå°±æ˜¯å¿½ç•¥å­˜æ´»æ—¶é—´ï¼Œæœ‰æ•ˆæœŸåœ¨&lt;strong>æµè§ˆå™¨ä¼šè¯ç»“æŸæ—¶åˆ é™¤&lt;/strong>ã€‚&lt;/li>
&lt;li>MaxAge&amp;lt;0 ç›¸å½“äºåˆ é™¤cookie, é€šå¸¸å¯ä»¥è®¾ç½®-1ä»£è¡¨åˆ é™¤ã€‚&lt;/li>
&lt;li>MaxAge&amp;gt;0 å¤šå°‘ç§’åcookieå¤±æ•ˆã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>path&lt;/code>: cookieçš„è·¯å¾„ã€‚é€šå¸¸è®¾ç½®ä¸º&amp;quot;/&amp;ldquo;è¡¨ç¤ºæ•´ä¸ªç«™ç‚¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>domain&lt;/code>: cookieçš„åŸŸã€‚æœ¬åœ°è°ƒè¯•é…ç½®æˆ localhost , æ­£å¼ä¸Šçº¿é…ç½®æˆåŸŸåã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>å­åŸŸå…±äº«Cookie&lt;/strong>ï¼š&lt;/p>
&lt;p>åœ¨åŸŸåå‰é¢åŠ ç‚¹è¡¨ç¤ºï¼šè¯¥åŸŸååŠå…¶å­åŸŸå…±äº«Cookieã€‚æ²¡æœ‰åªèƒ½è¯¥åŸŸè®¿é—®è®¾ç½®çš„Cookieã€‚å­åŸŸæ— æ³•è®¿é—®ã€‚å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è®¾ç½® Cookieï¼ŒåŸŸä¸º .example.comï¼Œå­åŸŸåå¯ä»¥å…±äº«
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetCookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;gin_user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3600&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;.example.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ &lt;code>SetCookie&lt;/code> æ–¹æ³•ä¸­ï¼Œå°†åŸŸè®¾ç½®ä¸º &lt;code>.example.com&lt;/code>ã€‚è¿™ä½¿å¾—æ‰€æœ‰ &lt;code>example.com&lt;/code> åŠå…¶å­åŸŸï¼ˆå¦‚ &lt;code>sub1.example.com&lt;/code> å’Œ &lt;code>sub2.example.com&lt;/code>ï¼‰éƒ½å¯ä»¥è®¿é—®è¯¥ Cookieã€‚&lt;/p>
&lt;p>&lt;strong>æ³¨æ„&lt;/strong>ï¼š&lt;strong>è·¨ä¸åŒçš„é¡¶çº§åŸŸåã€äºŒçº§åŸŸå&lt;/strong>æ— æ³•å…±äº«Cookieã€‚ï¼ˆå¦‚ &lt;code>example.com&lt;/code> å’Œ &lt;code>anotherexample.com&lt;/code>ï¼‰&lt;/p>
&lt;p>&lt;strong>æµè§ˆå™¨æ”¯æŒ&lt;/strong>ï¼šç¡®ä¿æµè§ˆå™¨æ”¯æŒè·¨å­åŸŸåçš„ Cookie è®¾ç½®ï¼Œç°ä»£æµè§ˆå™¨ä¸€èˆ¬éƒ½æ”¯æŒã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>secure&lt;/code>: æ˜¯å¦ä»…åœ¨HTTPSè¯·æ±‚ä¸­å‘é€cookieã€‚è®¾ç½®ä¸º&lt;code>false&lt;/code>è¡¨ç¤ºåœ¨HTTPå’ŒHTTPSè¯·æ±‚ä¸­éƒ½å‘é€ã€‚&lt;/p>
&lt;ul>
&lt;li>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®å°† &lt;code>Secure&lt;/code> è®¾ç½®ä¸º &lt;code>true&lt;/code>ï¼Œä»¥ç¡®ä¿ Cookie ä»…åœ¨ HTTPS è¯·æ±‚ä¸­å‘é€ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>httpOnly&lt;/code>: æ˜¯å¦å°†cookieæ ‡è®°ä¸ºHttpOnlyã€‚è®¾ç½®ä¸º&lt;code>true&lt;/code>è¡¨ç¤ºå®¢æˆ·ç«¯JavaScriptæ— æ³•è®¿é—®cookieã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è·å–Cookie&lt;/p>
&lt;p>ä½¿ç”¨&lt;code>Cookie&lt;/code>æ–¹æ³•å¯ä»¥ä»è¯·æ±‚ä¸­è·å–cookieï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Cookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Cookie&lt;/code>æ–¹æ³•ç”¨äºè·å–æŒ‡å®šCookieé”®çš„å€¼ï¼Œå¦‚æœè·å–æˆåŠŸï¼Œå°†è¿”å›cookieçš„å€¼ï¼Œå¦åˆ™è¿”å›é”™è¯¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤Cookie&lt;/p>
&lt;p>åœ¨Ginä¸­ï¼Œåˆ é™¤cookieå®é™…ä¸Šæ˜¯é€šè¿‡è®¾ç½®ä¸€ä¸ªè¿‡æœŸçš„cookieæ¥å®ç°çš„ã€‚&lt;/p>
&lt;p>åªéœ€è¦å°†è¦åˆ é™¤çš„cookieçš„å­˜æ´»æ—¶é—´&lt;code>maxAge&lt;/code>å‚æ•°è®¾ç½®ä¸º&lt;code>-1&lt;/code>ï¼Œè¿™è¡¨ç¤ºå°†cookieç«‹å³è¿‡æœŸï¼Œä»è€Œè¾¾åˆ°åˆ é™¤cookieçš„æ•ˆæœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SetCookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">maxAge&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">domain&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">secure&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">httpOnly&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/set_cookie&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetCookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;gin_user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3600&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Cookie set successfully!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/get_cookie&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cookie&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Cookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Cookie not found! &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">cookie&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/delete_cookie&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetCookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Cookie deleted successfully!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="ä½¿ç”¨session">
&lt;a href="#%e4%bd%bf%e7%94%a8session" class="header-anchor">#&lt;/a>
ä½¿ç”¨Session
&lt;/h2>&lt;h3 id="sessionä»‹ç»">
&lt;a href="#session%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
Sessionä»‹ç»
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>ç®€å•ä»‹ç»&lt;/strong>&lt;/p>
&lt;p>Sessionæ˜¯å¦ä¸€ç§&lt;strong>å­˜å‚¨å°‘é‡æ•°æ®&lt;/strong>çš„æŠ€æœ¯ï¼Œä¸åŒçš„æ˜¯Cookieä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ï¼Œè€Œsessionä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½œç”¨&lt;/strong>&lt;/p>
&lt;p>Sessionæ˜¯ä¸€ç§åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç»´æŒç”¨æˆ·ä¼šè¯çŠ¶æ€çš„æœºåˆ¶ã€‚Sessionç”¨äºåœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´ä¿æŒç”¨æˆ·çš„çŠ¶æ€å’Œä¿¡æ¯ï¼Œè¿™åœ¨éœ€è¦ç”¨æˆ·è®¤è¯å’Œä¸ªæ€§åŒ–æœåŠ¡æ—¶éå¸¸æœ‰ç”¨ã€‚å®ƒå¯ä»¥å­˜å‚¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ä¿¡æ¯ã€ç”¨æˆ·åå¥½ç­‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å±æ€§&lt;/strong>&lt;/p>
&lt;p>Sessionçš„å±æ€§è·ŸCookieçš„å±æ€§ç±»ä¼¼ã€‚å‚è€ƒ&lt;a class="link" href="#Cookie%e7%9a%84%e5%b1%9e%e6%80%a7" >Cookieçš„å±æ€§&lt;/a>ã€‚&lt;/p>
&lt;p>Sessionå¸¸ç”¨å±æ€§çš„é»˜è®¤å€¼ï¼ˆCookieéœ€è¦æ²¡æœ‰ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Domain&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MaxAge&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">ä¸€ä¸ªæœˆ&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HttpOnly&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Secure&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é”®è·Ÿå€¼é€šè¿‡å†…ç½®æ–¹æ³•ç®¡ç†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å·¥ä½œæµç¨‹&lt;/strong>&lt;/p>
&lt;p>å½“å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ç¬¬ä¸€æ¬¡è®¿é—®éœ€è¦Sessionçš„é¡µé¢æ—¶ï¼ŒæœåŠ¡å™¨ç«¯ä¼šåˆ›å»ºä¸€ä¸ªsessionå¯¹è±¡ï¼Œæ‹¥æœ‰å”¯ä¸€çš„ä¸€ä¸ªSession IDï¼Œæ•°æ®å°±ä¿å­˜åœ¨ç±»ä¼¼äºkey,valueçš„é”®å€¼å¯¹ï¼Œç„¶åå°†Sessionå¯¹è±¡ä¿å­˜åˆ°æœåŠ¡å™¨è®¾ç½®çš„å­˜å‚¨å¼•æ“ä¸­ï¼Œæœ€åå°†Session IDè¿”å›åˆ°æµè§ˆå™¨(å®¢æˆ·)ç«¯ã€‚æµè§ˆå™¨ä¸‹æ¬¡è®¿é—®æ—¶ä¼šæºå¸¦Session ID(cookie)ï¼Œæ‰¾åˆ°å¯¹åº”çš„Sessionå¯¹è±¡ã€‚&lt;/p>
&lt;p>åœ¨åç»­çš„è¯·æ±‚ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šæºå¸¦ä¹‹å‰æ”¶åˆ°çš„Session Cookieï¼ŒåŒ…å«å”¯ä¸€çš„Session IDã€‚&lt;/p>
&lt;p>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œé€šè¿‡Session IDä»å­˜å‚¨å¼•æ“ä¸­æŸ¥æ‰¾å¯¹åº”çš„Sessionæ•°æ®ï¼ˆé”®å€¼å¯¹ï¼‰ã€‚&lt;/p>
&lt;p>æœåŠ¡å™¨è´Ÿè´£Sessionçš„åˆ›å»ºã€æ›´æ–°å’Œé”€æ¯ã€‚Sessioné€šå¸¸æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåœ¨ä¸€æ®µæ—¶é—´ä¸æ´»åŠ¨åä¼šè‡ªåŠ¨è¿‡æœŸã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å› ä¸ºGinæœ¬èº«æ²¡æœ‰å†…ç½®çš„Sessionç®¡ç†åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨Ginä¸­ä½¿ç”¨Sessionéœ€è¦é…åˆç¬¬ä¸‰æ–¹åº“ï¼ˆä¸­é—´ä»¶ï¼‰å®ç°ï¼Œæ¯”è¾ƒå—æ¬¢è¿çš„æ˜¯&lt;a class="link" href="https://github.com/gin-contrib/sessions" target="_blank" rel="noopener"
>gin-contrib/sessions&lt;/a>ã€‚&lt;/p>
&lt;h3 id="åœ¨ginä¸­ä½¿ç”¨session">
&lt;a href="#%e5%9c%a8gin%e4%b8%ad%e4%bd%bf%e7%94%a8session" class="header-anchor">#&lt;/a>
åœ¨Ginä¸­ä½¿ç”¨Session
&lt;/h3>&lt;p>è¦åœ¨Ginæ¡†æ¶ä¸­ä½¿ç”¨Sessionï¼Œéœ€è¦å€ŸåŠ©ä¸€äº›ä¸­é—´ä»¶åº“å®ç°ï¼Œä¾‹å¦‚&lt;code>github.com/gin-contrib/sessions&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/gin-contrib/sessions" target="_blank" rel="noopener"
>gin-contrib/sessions&lt;/a>ä¸­é—´ä»¶æ”¯æŒçš„å­˜å‚¨å¼•æ“ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/gin-contrib/sessions?tab=readme-ov-file#cookie-based" target="_blank" rel="noopener"
>cookie-based&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/gin-contrib/sessions?tab=readme-ov-file#redis" target="_blank" rel="noopener"
>Redis&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/gin-contrib/sessions?tab=readme-ov-file#memcached" target="_blank" rel="noopener"
>memcached&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/gin-contrib/sessions?tab=readme-ov-file#mongodb" target="_blank" rel="noopener"
>MongoDB&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/gin-contrib/sessions?tab=readme-ov-file#gorm" target="_blank" rel="noopener"
>GORM&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/gin-contrib/sessions?tab=readme-ov-file#memstore" target="_blank" rel="noopener"
>memstore&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/gin-contrib/sessions?tab=readme-ov-file#postgresql" target="_blank" rel="noopener"
>PostgreSQL&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å®‰è£…ä¾èµ–&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">go get -u github.com/gin-contrib/sessions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢ä»‹ç»å¸¸ç”¨çš„å­˜å‚¨å¼•æ“ã€‚&lt;/p>
&lt;h4 id="åŸºäºcookieå­˜å‚¨session">
&lt;a href="#%e5%9f%ba%e4%ba%8ecookie%e5%ad%98%e5%82%a8session" class="header-anchor">#&lt;/a>
åŸºäºCookieå­˜å‚¨Session
&lt;/h4>&lt;p>åŸºäºCookieå­˜å‚¨Sessionæ˜¯å°†Sessionä¸­çš„æ•°æ®å­˜å‚¨åœ¨Cookieå½“ä¸­ï¼ˆä¸Session IDä¸€åŒå­˜æ”¾ï¼‰ã€‚ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-contrib/sessions&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-contrib/sessions/cookie&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä½¿ç”¨cookie-basedå­˜å‚¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">store&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cookie&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewStore&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;secret&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sessions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sessions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysession&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">store&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/login&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">loginHandler&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/logout&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">logoutHandler&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/profile&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">authRequired&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">profileHandler&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ç™»å½•å¤„ç†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">loginHandler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sessions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">uId&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">password&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¨¡æ‹Ÿç™»å½•è®¤è¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">password&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;123456&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">uId&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Options&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sessions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Options&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MaxAge&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3600&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// ä¸€å°æ—¶è¿‡æœŸ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">HttpOnly&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">session&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Save&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusOK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;logged in&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusUnauthorized&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;login failed&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ³¨é”€å¤„ç†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">logoutHandler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sessions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Save&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;logged out&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// éœ€è¦è®¤è¯çš„å¤„ç†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">authRequired&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sessions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">uId&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">session&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">uId&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">401&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;unauthorized&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Abort&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ç”¨æˆ·ä¿¡æ¯å¤„ç†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">profileHandler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sessions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">uId&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">session&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">H&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">uId&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>è§£é‡Šå„éƒ¨åˆ†åŠŸèƒ½&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>åˆ›å»ºSessionå­˜å‚¨å¼•æ“&lt;/strong>ï¼šä½¿ç”¨&lt;code>cookie.NewStore&lt;/code>åˆ›å»ºä¸€ä¸ªåŸºäºCookieçš„Sessionå­˜å‚¨å¼•æ“ã€‚å‚æ•°æ˜¯ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ï¼Œæ˜¯Sessionçš„åŠ å¯†ç§˜é’¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ³¨å†ŒSessionä¸­é—´ä»¶&lt;/strong>ï¼šä½¿ç”¨&lt;code>sessions.Sessions(&amp;quot;mysession&amp;quot;, store)&lt;/code>æ³¨å†Œ&lt;strong>ä¸€ä¸ª&lt;/strong>Sessionä¸­é—´ä»¶ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯Session IDçš„é”®ï¼ˆstringç±»å‹ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯å­˜å‚¨å¼•æ“ã€‚&lt;/p>
&lt;ul>
&lt;li>å¦‚æœè¦æ³¨å†Œå¤šä¸ªSessionä¸­é—´ä»¶ï¼Œä½¿ç”¨&lt;code>sessions.SessionsMany(sessionNames, store)&lt;/code>ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸åŒSession IDçš„é”®ï¼ˆstringåˆ‡ç‰‡ç±»å‹ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯å­˜å‚¨å¼•æ“ã€‚ä¸€ä¸ªå­˜å‚¨å¼•æ“å¯ä»¥å­˜å‚¨å¤šä¸ªSessionã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è·å–Sessionå¯¹è±¡&lt;/strong>ï¼šä½¿ç”¨&lt;code>sessions.Default(c)&lt;/code>è·å–Sessionå¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯è·å–åªæ³¨å†Œä¸€ä¸ªSessionä¸­é—´ä»¶çš„å¿«æ·æ–¹å¼ã€‚å‚æ•°æ˜¯Ginä¸Šä¸‹æ–‡å¯¹è±¡ã€‚&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæ³¨å†Œçš„æ˜¯å¤šä¸ªSessionä¸­é—´ä»¶ï¼Œè·å–ä¸åŒçš„Sessionå¯¹è±¡ï¼Œä½¿ç”¨&lt;code>sessions.DefaultMany(c, &amp;quot;a&amp;quot;)&lt;/code>ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯è·å–æ³¨å†Œå¤šä¸ªSessionä¸­é—´ä»¶çš„å¿«æ·æ–¹å¼ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Ginä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯è¦è·å–Sessionå¯¹è±¡çš„Session IDçš„é”®ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">store&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cookie&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewStore&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;secret&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sessionNames&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sessions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SessionsMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sessionNames&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">store&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/hello&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sessionA&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sessions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DefaultMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sessionB&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sessions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DefaultMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä¿®æ”¹Sessionå¯¹è±¡å±æ€§&lt;/strong>ï¼šä½¿ç”¨&lt;code>Options(sessions.Options{})&lt;/code>æ–¹æ³•å¯ä»¥ä¿®æ”¹Sessionçš„é»˜è®¤å±æ€§ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è®¾ç½®Sessionæ•°æ®&lt;/strong>ï¼šä½¿ç”¨&lt;code>Set&lt;/code>æ–¹æ³•è®¾ç½®Sessionæ•°æ®ï¼ˆkeyï¼Œvalueé”®å€¼å¯¹ï¼‰ã€‚å¯ä»¥é‡å¤æ·»åŠ æ•°æ®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åˆ é™¤Sessionæ•°æ®&lt;/strong>ï¼šä½¿ç”¨&lt;code>Delete&lt;/code>æ–¹æ³•åˆ é™¤Sessionæ•°æ®ã€‚å‚æ•°æ˜¯æ•°æ®çš„é”®ã€‚&lt;/p>
&lt;ul>
&lt;li>ç†è§£ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åä¼šä»Cookieä¸­è‡ªåŠ¨è·å–Session IDï¼Œè°ƒç”¨&lt;code>Default&lt;/code>æ–¹æ³•ä¼šæ ¹æ®Session IDè·å–å¯¹åº”çš„Sessionå¯¹è±¡ã€‚æ•°æ®å°±ä¿å­˜åœ¨Sessionå¯¹è±¡ä¸­ã€‚å› ä¸ºSession IDæ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥è·å–çš„æ•°æ®å°±æ˜¯æœ¬æ¬¡è¯·æ±‚ä¸­çš„ï¼Œå¯ä»¥é€šè¿‡æ•°æ®çš„é”®è¿›è¡Œåˆ é™¤ã€‚ï¼ˆä¸åŒç”¨æˆ·çš„Sessionæ˜¯ç‹¬ç«‹çš„ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šå¹²æ‰°ã€‚ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä¿å­˜Sessionæ•°æ®&lt;/strong>ï¼šä½¿ç”¨&lt;code>Save&lt;/code>æ–¹æ³•ä¿å­˜Sessionæ•°æ®ã€‚æ³¨æ„æ¯æ¬¡ä¿®æ”¹è¿‡Sessionæ•°æ®ä¹‹åï¼Œéƒ½éœ€è¦è°ƒç”¨æ­¤æ–¹æ³•ï¼Œæ•°æ®æ‰èƒ½ç”Ÿæ•ˆã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åˆ é™¤å½“å‰Session IDæ‰€æœ‰çš„Sessionæ•°æ®&lt;/strong>ï¼šä½¿ç”¨&lt;code>Clear&lt;/code>æ–¹æ³•å³å¯åˆ é™¤å½“å‰Sessionå¯¹è±¡æ‰€æœ‰çš„Sessionæ•°æ®ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="åŸºäºrediså­˜å‚¨session">
&lt;a href="#%e5%9f%ba%e4%ba%8eredis%e5%ad%98%e5%82%a8session" class="header-anchor">#&lt;/a>
åŸºäºRediså­˜å‚¨Session
&lt;/h4>&lt;p>åŸºäºRediså­˜å‚¨Sessionå°±æ˜¯å°†Sessionæ•°æ®ä¿å­˜åœ¨Redisä¸­ï¼Œå½“æµè§ˆå™¨å‘é€è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®Cookieä¸­çš„Session IDï¼Œè·å–å¯¹åº”çš„Sessionå¯¹è±¡ã€‚&lt;/p>
&lt;p>å­¦ä¼šäº†åŸºäºCookieå­˜å‚¨Sessionï¼Œé‚£ä¹ˆåŸºäºRediså­˜å‚¨Sessionå°±å¾ˆç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦å°†å­˜å‚¨å¼•æ“ä¿®æ”¹ä¸ºRediså³å¯ã€‚å…¶ä»–ä½¿ç”¨æ–¹æ³•ä¸€æ¨¡ä¸€æ ·ã€‚&lt;/p>
&lt;p>åˆ›å»ºCookieå­˜å‚¨å¼•æ“ä½¿ç”¨çš„æ˜¯&lt;code>cookie.NewStore([]byte(&amp;quot;secret&amp;quot;))&lt;/code>æ–¹æ³•ã€‚&lt;/p>
&lt;p>åˆ›å»ºRedså­˜å‚¨å¼•æ“ä½¿ç”¨çš„æ˜¯&lt;code>redis.NewStore(10, &amp;quot;tcp&amp;quot;, &amp;quot;localhost:6379&amp;quot;, &amp;quot;&amp;quot;, []byte(&amp;quot;secret&amp;quot;))&lt;/code>æ–¹æ³•ï¼Œå‚æ•°ä»‹ç»ï¼š&lt;/p>
&lt;ul>
&lt;li>ç¬¬ä¸€ä¸ªï¼šRedisæœ€å¤§çš„ç©ºé—²è¿æ¥æ•°ã€‚&lt;/li>
&lt;li>ç¬¬äºŒä¸ªï¼šæ•°é€šä¿¡åè®®tcpæˆ–è€…udpã€‚è¿æ¥ç±»å‹ã€‚&lt;/li>
&lt;li>ç¬¬ä¸‰ä¸ªï¼šRedisæœåŠ¡å™¨åœ°å€ï¼Œæ ¼å¼ï¼š&lt;code>host:port&lt;/code>ã€‚&lt;/li>
&lt;li>ç¬¬å››ä¸ªï¼šRediså¯†ç ã€‚&lt;/li>
&lt;li>æœ€åä¸€ä¸ªï¼šSessionåŠ å¯†ç§˜é’¥ã€‚&lt;/li>
&lt;/ul>
&lt;p>é»˜è®¤è¿æ¥0å·åº“ã€‚éœ€è¦æŒ‡å®šå‡ å·Redisæ•°æ®åº“ï¼Œä½¿ç”¨&lt;code>redis.NewStoreWithDB(10, &amp;quot;tcp&amp;quot;, &amp;quot;192.168.245.130:6379&amp;quot;, &amp;quot;123456&amp;quot;, &amp;quot;1&amp;quot;, []byte(&amp;quot;secret&amp;quot;))&lt;/code>æ–¹æ³•ã€‚&lt;/p>
&lt;h4 id="sessionsåŠ å¯†ç§˜é’¥ä»‹ç»">
&lt;a href="#sessions%e5%8a%a0%e5%af%86%e7%a7%98%e9%92%a5%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
SessionsåŠ å¯†&lt;strong>ç§˜é’¥ä»‹ç»&lt;/strong>
&lt;/h4>&lt;p>&lt;strong>åŠ å¯†å¯†é’¥çš„ä½œç”¨&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;strong>æ•°æ®åŠ å¯†&lt;/strong>ï¼š
&lt;ul>
&lt;li>å› ä¸ºSessionçš„éƒ¨åˆ†æ•°æ®ï¼ˆSession IDï¼‰ï¼Œä¼šä¿å­˜åœ¨Cookieä¸­å“åº”ç»™å®¢æˆ·ç«¯ï¼ŒåŠ å¯†å¯†é’¥ç”¨äºåŠ å¯†è¿™äº›æ•°æ®ï¼Œä»¥é˜²æ­¢å®¢æˆ·ç«¯ç¯¡æ”¹ã€‚&lt;/li>
&lt;li>åŠ å¯†åçš„æ•°æ®æ˜¯ä¸å¯è¯»çš„ï¼Œåªæœ‰æŒæœ‰åŠ å¯†å¯†é’¥çš„æœåŠ¡å™¨æ‰èƒ½è§£å¯†å’Œè¯»å–è¿™äº›æ•°æ®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>æ•°æ®ç­¾å&lt;/strong>ï¼š
&lt;ul>
&lt;li>é™¤äº†åŠ å¯†ï¼ŒåŠ å¯†å¯†é’¥ä¹Ÿç”¨äºå¯¹æ•°æ®è¿›è¡Œç­¾åï¼Œä»¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚&lt;/li>
&lt;li>ç­¾åç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœªè¢«ç¯¡æ”¹ï¼Œå¦‚æœæ•°æ®è¢«ç¯¡æ”¹ï¼Œç­¾åéªŒè¯å°†å¤±è´¥ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>ä½¿ç”¨åŠ å¯†ç§˜é’¥&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åœ¨åˆ›å»ºå­˜å‚¨å¼•æ“çš„æ—¶å€™ä¼ å…¥åŠ å¯†å¯†é’¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åŠ å¯†å¯†é’¥æ˜¯ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢è€Œæ¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åŠ å¯†ç§˜é’¥æ˜¯å¯é€‰å‚æ•°ï¼Œä½†æ˜¯å¿…é¡»è¦æœ‰ä¸€ä¸ªèº«ä»½éªŒè¯ç§˜é’¥ï¼ŒSessionsä¸­é—´ä»¶æ‰èƒ½èµ·ä½œç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“&lt;strong>åªæœ‰ä¸€ä¸ª&lt;/strong>åŠ å¯†ç§˜é’¥æ—¶ï¼Œç”¨äºèº«ä»½éªŒè¯å’ŒåŠ å¯†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“å­˜åœ¨å¤šåŠ å¯†ç§˜é’¥æ—¶ï¼Œç¬¬ä¸€ä¸ªç§˜é’¥ç”¨äº&lt;strong>èº«ä»½éªŒè¯&lt;/strong>ï¼Œåç»­ç§˜é’¥ç”¨äº&lt;strong>åŠ å¯†&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å»ºè®®&lt;/strong>ä½¿ç”¨ 32 æˆ– 64 å­—èŠ‚çš„&lt;strong>èº«ä»½éªŒè¯å¯†é’¥&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœè®¾ç½®äº†&lt;strong>åŠ å¯†å¯†é’¥&lt;/strong>ï¼Œåˆ™&lt;strong>å¿…é¡»&lt;/strong>ä¸º &lt;strong>16ã€24 æˆ– 32 å­—èŠ‚&lt;/strong>ï¼Œä»¥é€‰æ‹© AES-128ã€AES-192 æˆ– AES-256 æ¨¡å¼ã€‚å¦åˆ™Sessionsä¸­é—´ä»¶ä¸èµ·ä½œç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¸¸è§çš„æƒ…å†µæ˜¯è®¾ç½®å•ä¸ªèº«ä»½éªŒè¯å¯†é’¥å’Œå¯é€‰çš„åŠ å¯†å¯†é’¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">redis&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewStoreWithDB&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;tcp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;192.168.245.130:6379&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;123456&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;secret&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;1234567890123456&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è‡³æ­¤ï¼š&lt;/p>
&lt;ul>
&lt;li>è®¾ç½® Session æ•°æ®æ—¶ï¼Œæ•°æ®ä¼šä½¿ç”¨åŠ å¯†å¯†é’¥åŠ å¯†åå­˜å‚¨åœ¨ Cookie ä¸­ã€‚&lt;/li>
&lt;li>è·å– Session æ•°æ®æ—¶ï¼Œæ•°æ®ä¼šä½¿ç”¨åŠ å¯†å¯†é’¥è§£å¯†ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„äº‹é¡¹&lt;/p>
&lt;ol>
&lt;li>&lt;strong>å¯†é’¥é•¿åº¦&lt;/strong>ï¼šä½¿ç”¨è¶³å¤Ÿé•¿å’Œéšæœºçš„å¯†é’¥æ¥å¢å¼ºå®‰å…¨æ€§ï¼Œé¿å…ä½¿ç”¨è¿‡çŸ­æˆ–å®¹æ˜“çŒœæµ‹çš„å¯†é’¥ã€‚&lt;/li>
&lt;li>&lt;strong>å¯†é’¥ç®¡ç†&lt;/strong>ï¼šå¦¥å–„ç®¡ç†åŠ å¯†å¯†é’¥ï¼Œé¿å…æ³„éœ²ã€‚å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–ä¸“é—¨çš„å¯†é’¥ç®¡ç†æœåŠ¡æ¥å­˜å‚¨å’Œè¯»å–å¯†é’¥ã€‚&lt;/li>
&lt;li>&lt;strong>HTTPS&lt;/strong>ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç¡®ä¿ä½¿ç”¨ HTTPS æ¥åŠ å¯†ä¼ è¾“ä¸­çš„æ•°æ®ï¼Œé˜²æ­¢ä¸­é—´äººæ”»å‡»ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡ç®€å•ä»‹ç»äº†Ginæ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://www.tizi365.com/archives/244.html" target="_blank" rel="noopener"
>Go ginæ¡†æ¶å…¥é—¨æ•™ç¨‹&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Go Code Style Guide Introduction</title><link>https://arlettebrook.github.io/p/go-code-style-guide-introduction/</link><pubDate>Tue, 21 May 2024 14:48:21 +0800</pubDate><guid>https://arlettebrook.github.io/p/go-code-style-guide-introduction/</guid><description>&lt;hr>
&lt;h2 id="goä»£ç çº¦å®š">
&lt;a href="#go%e4%bb%a3%e7%a0%81%e7%ba%a6%e5%ae%9a" class="header-anchor">#&lt;/a>
Goä»£ç çº¦å®š
&lt;/h2>&lt;p>Goä»£ç çº¦å®šæ˜¯&lt;a class="link" href="https://github.com/unknwon" target="_blank" rel="noopener"
>@unknwon&lt;/a>ä¸º Go ç¼–ç¨‹è¯­è¨€åˆ¶å®šçš„ 100% å›ºæ‰§å·±è§å’Œåæ‰§çš„ä»£ç çº¦å®šã€‚å®ƒå¯èƒ½ä¸&lt;a class="link" href="https://github.com/golang/go/wiki/CodeReviewComments" target="_blank" rel="noopener"
>Go ä»£ç å®¡æŸ¥æ³¨é‡Š&lt;/a>æˆ–ä»»ä½•å…¶ä»–æŒ‡å—å…¼å®¹ï¼Œä¹Ÿå¯èƒ½ä¸å…¼å®¹ã€‚&lt;/p>
&lt;p>æ€»ä¹‹ï¼Œä»¥ä¸‹ä»‹ç»çš„çš„çº¦å®šï¼Œåœ¨å¤§éƒ¨åˆ†Goå¼€æºé¡¹ç›®ä¸­éƒ½éµå¾ªã€‚&lt;/p>
&lt;h3 id="ç‰ˆæƒå£°æ˜">
&lt;a href="#%e7%89%88%e6%9d%83%e5%a3%b0%e6%98%8e" class="header-anchor">#&lt;/a>
ç‰ˆæƒå£°æ˜
&lt;/h3>&lt;p>ä½œä¸ºå¼€æºé¡¹ç›®ï¼Œå¿…é¡»æœ‰ç›¸åº”çš„å¼€æºè®¸å¯è¯æ‰èƒ½ç®—æ˜¯çœŸæ­£çš„å¼€æºã€‚åœ¨é€‰æ‹©äº†ä¸€ä¸ªå¼€æºè®¸å¯è¯ä¹‹åï¼Œéœ€è¦åœ¨æºæ–‡ä»¶ä¸­è¿›è¡Œç›¸åº”çš„ç‰ˆæƒå£°æ˜æ‰èƒ½ç”Ÿæ•ˆã€‚ä»¥ä¸‹åˆ†åˆ«ä»¥ &lt;a class="link" href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener"
>Apache License, Version 2.0&lt;/a> å’Œ MIT æˆæƒè®¸å¯ä¸ºä¾‹ã€‚&lt;/p>
&lt;h4 id="apache-license-version-20">
&lt;a href="#apache-license-version-20" class="header-anchor">#&lt;/a>
Apache License, Version 2.0
&lt;/h4>&lt;p>è¯¥è®¸å¯è¯è¦æ±‚åœ¨&lt;strong>æ‰€æœ‰&lt;/strong>çš„æºæ–‡ä»¶ä¸­çš„å¤´éƒ¨æ”¾ç½®ä»¥ä¸‹å†…å®¹æ‰èƒ½ç®—åè®®å¯¹è¯¥æ–‡ä»¶æœ‰æ•ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Copyright [yyyy] [name of copyright owner] [&amp;lt;è”ç³»æ–¹å¼&amp;gt;]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Licensed under the Apache License, Version 2.0 (the &amp;#34;License&amp;#34;): you may
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// not use this file except in compliance with the License. You may obtain
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// a copy of the License at
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// http://www.apache.org/licenses/LICENSE-2.0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Unless required by applicable law or agreed to in writing, software
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// distributed under the License is distributed on an &amp;#34;AS IS&amp;#34; BASIS, WITHOUT
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// License for the specific language governing permissions and limitations
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// under the License.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ï¼Œ&lt;code>[yyyy]&lt;/code> è¡¨ç¤ºè¯¥æºæ–‡ä»¶åˆ›å»ºçš„å¹´ä»½ã€‚ç´§éšå…¶åçš„æ˜¯ &lt;code>[name of copyright owner]&lt;/code>ï¼Œå³ç‰ˆæƒæ‰€æœ‰è€…ã€‚å¦‚æœä¸ºä¸ªäººé¡¹ç›®ï¼Œå°±å†™ä¸ªäººåç§°ï¼›è‹¥ä¸ºå›¢é˜Ÿé¡¹ç›®ï¼Œåˆ™å®œå†™å›¢é˜Ÿåç§°ã€‚&lt;code>[&amp;lt;è”ç³»æ–¹å¼&amp;gt;]&lt;/code>ï¼šè”ç³»æ–¹å¼ï¼Œé€šå¸¸ä¸ºé‚®ç®±ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Copyright 2013-2023 The Cobra Authors
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Licensed under the Apache License, Version 2.0 (the &amp;#34;License&amp;#34;);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// you may not use this file except in compliance with the License.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// You may obtain a copy of the License at
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// http://www.apache.org/licenses/LICENSE-2.0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Unless required by applicable law or agreed to in writing, software
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// distributed under the License is distributed on an &amp;#34;AS IS&amp;#34; BASIS,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// See the License for the specific language governing permissions and
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// limitations under the License.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="mit-license">
&lt;a href="#mit-license" class="header-anchor">#&lt;/a>
MIT License
&lt;/h4>&lt;p>ä¸€èˆ¬ä½¿ç”¨ MIT æˆæƒçš„é¡¹ç›®ï¼Œéœ€åœ¨æºæ–‡ä»¶å¤´éƒ¨å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Copyright [yyyy] [name of copyright owner] [&amp;lt;è”ç³»æ–¹å¼&amp;gt;]. All rights reserved.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Use of this source code is governed by a MIT-style
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// license that can be found in the LICENSE file.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ï¼Œå¹´ä»½ã€ç‰ˆæƒæ‰€æœ‰è€…çš„åç§°ä»¥åŠè”ç³»æ–¹å¼å¡«å†™è§„åˆ™ä¸ Apache License, Version 2.0 çš„ä¸€æ ·ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-GO" data-lang="GO">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Copyright Â© 2024 arlettebrook &amp;lt;arlettebrook@proton.me&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Permission is hereby granted, free of charge, to any person obtaining a copy
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">of this software and associated documentation files (the &amp;#34;Software&amp;#34;), to deal
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">in the Software without restriction, including without limitation the rights
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">copies of the Software, and to permit persons to whom the Software is
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">furnished to do so, subject to the following conditions:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">The above copyright notice and this permission notice shall be included in
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">all copies or substantial portions of the Software.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">THE SOFTWARE IS PROVIDED &amp;#34;AS IS&amp;#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">THE SOFTWARE.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello, world!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å…¶å®ƒè¯´æ˜">
&lt;a href="#%e5%85%b6%e5%ae%83%e8%af%b4%e6%98%8e" class="header-anchor">#&lt;/a>
å…¶å®ƒè¯´æ˜
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>å…¶å®ƒç±»å‹çš„å¼€æºè®¸å¯è¯åŸºæœ¬ä¸Šéƒ½å¯å‚ç…§ä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœå­˜åœ¨ä¸åŒä½œè€…æˆ–ç»„ç»‡å¯¹åŒä¸ªæºæ–‡ä»¶çš„ä¿®æ”¹ï¼Œåœ¨åè®®å…¼å®¹çš„æƒ…å†µä¸‹ï¼Œå¯å°†é¦–è¡Œå˜ä¸ºå¤šè¡Œï¼ŒæŒ‰ç…§å…ˆåæ¬¡åºæ’æ”¾ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Copyright 2011 Gary Burd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Copyright 2013 Unknwon
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åœ¨ README æ–‡ä»¶æœ€åä¸­éœ€è¦è¯´æ˜é¡¹ç›®æ‰€é‡‡ç”¨çš„å¼€æºè®¸å¯è¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl"> ## æˆæƒè®¸å¯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> æœ¬é¡¹ç›®é‡‡ç”¨ MIT å¼€æºæˆæƒè®¸å¯è¯ï¼Œå®Œæ•´çš„æˆæƒè¯´æ˜å·²æ”¾ç½®åœ¨ [&lt;span class="nt">LICENSE&lt;/span>](&lt;span class="na">LICENSE&lt;/span>) æ–‡ä»¶ä¸­ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>å¼€æºåè®®ä»‹ç»&lt;a class="link" href="https://arlettebrook.github.io/p/open-source-license-introduction/" target="_blank" rel="noopener"
>å‚è€ƒ&lt;/a>.&lt;/p>
&lt;h3 id="é¡¹ç›®ç»“æ„">
&lt;a href="#%e9%a1%b9%e7%9b%ae%e7%bb%93%e6%9e%84" class="header-anchor">#&lt;/a>
é¡¹ç›®ç»“æ„
&lt;/h3>&lt;p>ä»¥ä¸‹ä¸ºä¸€èˆ¬é¡¹ç›®ç»“æ„ï¼Œæ ¹æ®ä¸åŒçš„ Web æ¡†æ¶ä¹ æƒ¯ï¼Œå¯ä½¿ç”¨æ‹¬å·å†…çš„æ–‡å­—æ›¿æ¢ï¼›æ ¹æ®ä¸åŒçš„é¡¹ç›®ç±»å‹å’Œéœ€æ±‚ï¼Œå¯è‡ªç”±å¢åˆ æŸäº›ç»“æ„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">- templates &lt;span class="o">(&lt;/span>views&lt;span class="o">)&lt;/span> &lt;span class="c1"># æ¨¡æ¿æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- public &lt;span class="o">(&lt;/span>static&lt;span class="o">)&lt;/span> &lt;span class="c1"># é™æ€æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - css
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - fonts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - img
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- routes &lt;span class="c1"># è·¯ç”±é€»è¾‘å¤„ç†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- models &lt;span class="c1"># æ•°æ®é€»è¾‘å±‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- pkg &lt;span class="c1"># å­æ¨¡å—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - setting &lt;span class="c1"># åº”ç”¨é…ç½®å­˜å–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- cmd &lt;span class="c1"># å‘½ä»¤è¡Œç¨‹åºå‘½ä»¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- conf &lt;span class="c1"># é»˜è®¤é…ç½®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - locale &lt;span class="c1"># i18n æœ¬åœ°åŒ–æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- custom &lt;span class="c1"># è‡ªå®šä¹‰é…ç½®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- data &lt;span class="c1"># åº”ç”¨ç”Ÿæˆæ•°æ®æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- log &lt;span class="c1"># åº”ç”¨ç”Ÿæˆæ—¥å¿—æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å‘½ä»¤è¡Œåº”ç”¨">
&lt;a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%ba%94%e7%94%a8" class="header-anchor">#&lt;/a>
å‘½ä»¤è¡Œåº”ç”¨
&lt;/h4>&lt;p>å½“åº”ç”¨ç±»å‹ä¸ºå‘½ä»¤è¡Œåº”ç”¨æ—¶ï¼Œéœ€è¦å°†å‘½ä»¤ç›¸å…³æ–‡ä»¶å­˜æ”¾äº &lt;code>/cmd&lt;/code> ç›®å½•ä¸‹ï¼Œå¹¶ä¸ºæ¯ä¸ªå‘½ä»¤åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„æºæ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/cmd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dump.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fix.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serve.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> web.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¯¼å…¥æ ‡å‡†åº“ç¬¬ä¸‰æ–¹æˆ–å…¶å®ƒåŒ…">
&lt;a href="#%e5%af%bc%e5%85%a5%e6%a0%87%e5%87%86%e5%ba%93%e7%ac%ac%e4%b8%89%e6%96%b9%e6%88%96%e5%85%b6%e5%ae%83%e5%8c%85" class="header-anchor">#&lt;/a>
å¯¼å…¥æ ‡å‡†åº“ã€ç¬¬ä¸‰æ–¹æˆ–å…¶å®ƒåŒ…
&lt;/h3>&lt;p>é™¤æ ‡å‡†åº“å¤–ï¼ŒGo è¯­è¨€çš„å¯¼å…¥è·¯å¾„åŸºæœ¬ä¸Šä¾èµ–ä»£ç æ‰˜ç®¡å¹³å°ä¸Šçš„ URL è·¯å¾„ï¼Œå› æ­¤ä¸€ä¸ªæºæ–‡ä»¶éœ€è¦å¯¼å…¥çš„åŒ…æœ‰ 4 ç§åˆ†ç±»ï¼šæ ‡å‡†åº“ã€ç¬¬ä¸‰æ–¹åŒ…ã€ç»„ç»‡å†…å…¶å®ƒåŒ…å’Œå½“å‰åŒ…çš„å­åŒ…ã€‚&lt;/p>
&lt;p>åŸºæœ¬è§„åˆ™ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœåŒæ—¶å­˜åœ¨ 2 ç§åŠä»¥ä¸Šï¼Œåˆ™éœ€è¦ä½¿ç”¨&lt;strong>åˆ†ç»„&lt;/strong>æ¥å¯¼å…¥ã€‚æ¯ä¸ªåˆ†ç±»ä½¿ç”¨ä¸€ä¸ªåˆ†ç»„ï¼Œé‡‡ç”¨ç©ºè¡Œä½œä¸ºåˆ†åŒºä¹‹é—´çš„åˆ†å‰²ã€‚&lt;/li>
&lt;li>åœ¨éæµ‹è¯•æ–‡ä»¶ï¼ˆ&lt;code>*_test.go&lt;/code>ï¼‰ä¸­ï¼Œç¦æ­¢ä½¿ç”¨ &lt;code>.&lt;/code> æ¥ç®€åŒ–å¯¼å…¥åŒ…çš„å¯¹è±¡è°ƒç”¨ã€‚&lt;/li>
&lt;li>ç¦æ­¢ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼ˆ&lt;code>./subpackage&lt;/code>ï¼‰ï¼Œæ‰€æœ‰å¯¼å…¥è·¯å¾„å¿…é¡»ç¬¦åˆ &lt;code>go get&lt;/code> æ ‡å‡†ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;html/template&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/codegangsta/cli&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/macaron.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gogits/git&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gogits/gfm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gogits/gogs/routers&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gogits/gogs/routers/repo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/gogits/gogs/routers/user&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šå¸¸æˆ‘ä»¬éƒ½ä¸éœ€è¦å…³æ³¨ï¼ŒåŒ…æ˜¯å¦‚ä½•åˆ†ç»„çš„ã€‚åªéœ€è¦è¿è¡Œ&lt;code>goimports&lt;/code>å‘½ä»¤ï¼Œå³å¯è‡ªåŠ¨å¯¼å…¥ï¼Œè‡ªåŠ¨åˆ†ç»„ã€‚&lt;/p>
&lt;p>åœ¨è®¸å¤šideä¸­ï¼Œå»ºè®®ä¸è¦ä½¿ç”¨è‡ªå¸¦çš„å¯¼å…¥ã€‚å®ƒä»¬åˆ†ç»„ä¸æ˜¯å¾ˆå‡†ç¡®ï¼Œå»ºè®®ä½¿ç”¨&lt;code>goimports&lt;/code>ã€‚å¦‚ï¼šåœ¨GoLandä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨File Watchersä¸­å‹¾é€‰&lt;code>goimports&lt;/code>å‘½ä»¤ï¼Œå³å¯å®ç°è‡ªåŠ¨å¯¼å…¥ã€åˆ†ç»„ã€‚&lt;/p>
&lt;h3 id="æ³¨é‡Šè§„èŒƒ">
&lt;a href="#%e6%b3%a8%e9%87%8a%e8%a7%84%e8%8c%83" class="header-anchor">#&lt;/a>
æ³¨é‡Šè§„èŒƒ
&lt;/h3>&lt;ul>
&lt;li>æ‰€æœ‰&lt;strong>å¯¼å‡ºå¯¹è±¡&lt;/strong>éƒ½éœ€è¦æ³¨é‡Šè¯´æ˜å…¶ç”¨é€”ï¼›éå¯¼å‡ºå¯¹è±¡&lt;strong>æ ¹æ®æƒ…å†µ&lt;/strong>è¿›è¡Œæ³¨é‡Šã€‚&lt;/li>
&lt;li>å¦‚æœå¯¹è±¡å¯æ•°ä¸”æ— æ˜ç¡®æŒ‡å®šæ•°é‡çš„æƒ…å†µä¸‹ï¼Œä¸€å¾‹ä½¿ç”¨å•æ•°å½¢å¼å’Œä¸€èˆ¬è¿›è¡Œæ—¶æè¿°ï¼›å¦åˆ™ä½¿ç”¨å¤æ•°å½¢å¼ã€‚&lt;/li>
&lt;li>åŒ…ã€å‡½æ•°ã€æ–¹æ³•å’Œç±»å‹çš„æ³¨é‡Šè¯´æ˜éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¥å­ã€‚&lt;/li>
&lt;li>å¥å­ç±»å‹çš„æ³¨é‡Šé¦–å­—æ¯å‡éœ€å¤§å†™ï¼›çŸ­è¯­ç±»å‹çš„æ³¨é‡Šé¦–å­—æ¯éœ€å°å†™ã€‚&lt;/li>
&lt;li>æ³¨é‡Šçš„å•è¡Œé•¿åº¦ä¸èƒ½è¶…è¿‡ 80 ä¸ªå­—ç¬¦ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="åŒ…çº§åˆ«">
&lt;a href="#%e5%8c%85%e7%ba%a7%e5%88%ab" class="header-anchor">#&lt;/a>
åŒ…çº§åˆ«
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>åŒ…çº§åˆ«çš„æ³¨é‡Šå°±æ˜¯å¯¹åŒ…çš„ä»‹ç»ï¼Œåªéœ€åœ¨åŒä¸ªåŒ…çš„ä»»ä¸€æºæ–‡ä»¶ä¸­è¯´æ˜å³å¯æœ‰æ•ˆã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯¹äº &lt;code>main&lt;/code> åŒ…ï¼Œä¸€èˆ¬åªæœ‰ä¸€è¡Œç®€çŸ­çš„æ³¨é‡Šç”¨ä»¥è¯´æ˜åŒ…çš„ç”¨é€”ï¼Œä¸”ä»¥é¡¹ç›®åç§°å¼€å¤´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Gogs (Go Git Service) is a painless self-hosted Git Service.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¯¹äºä¸€ä¸ªå¤æ‚é¡¹ç›®çš„å­åŒ…ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦åŒ…çº§åˆ«æ³¨é‡Šï¼Œé™¤éæ˜¯ä»£è¡¨æŸä¸ªç‰¹å®šåŠŸèƒ½çš„æ¨¡å—ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯¹äºç®€å•çš„é &lt;code>main&lt;/code> åŒ…ï¼Œä¹Ÿå¯ç”¨ä¸€è¡Œæ³¨é‡Šæ¦‚æ‹¬ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯¹äºç›¸å¯¹åŠŸèƒ½å¤æ‚çš„é &lt;code>main&lt;/code> åŒ…ï¼Œä¸€èˆ¬éƒ½ä¼šå¢åŠ ä¸€äº›ä½¿ç”¨ç¤ºä¾‹æˆ–åŸºæœ¬è¯´æ˜ï¼Œä¸”ä»¥ &lt;code>Package &amp;lt;name&amp;gt;&lt;/code> å¼€å¤´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Package regexp implements a simple library for regular expressions.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> The syntax of the regular expressions accepted is:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> regexp:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> concatenation { &amp;#39;|&amp;#39; concatenation }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> concatenation:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> { closure }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> closure:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> term [ &amp;#39;*&amp;#39; | &amp;#39;+&amp;#39; | &amp;#39;?&amp;#39; ]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> term:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#39;^&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#39;$&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#39;.&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> character
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#39;[&amp;#39; [ &amp;#39;^&amp;#39; ] character-ranges &amp;#39;]&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#39;(&amp;#39; regexp &amp;#39;)&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">package&lt;/span> &lt;span class="nx">regexp&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ç‰¹åˆ«å¤æ‚çš„åŒ…è¯´æ˜ï¼Œå¯å•ç‹¬åˆ›å»º &lt;a class="link" href="https://github.com/robfig/cron/blob/master/doc.go" target="_blank" rel="noopener"
>&lt;/a> æ–‡ä»¶æ¥åŠ ä»¥è¯´æ˜ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>doc.go&lt;/code>ä¸“é—¨ä¹¦å†™è¯¥goæ–‡ä»¶æ‰€åœ¨åŒ…çš„&lt;strong>æ–‡æ¡£ä»‹ç»&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="ç»“æ„æ¥å£åŠå…¶å®ƒç±»å‹">
&lt;a href="#%e7%bb%93%e6%9e%84%e6%8e%a5%e5%8f%a3%e5%8f%8a%e5%85%b6%e5%ae%83%e7%b1%bb%e5%9e%8b" class="header-anchor">#&lt;/a>
ç»“æ„ã€æ¥å£åŠå…¶å®ƒç±»å‹
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>ç±»å‹çš„å®šä¹‰ä¸€èˆ¬éƒ½ä»¥å•æ•°å½¢å¼æè¿°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Request represents a request to run a command.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">type&lt;/span> &lt;span class="nx">Request&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¦‚æœä¸ºæ¥å£ï¼Œåˆ™ä¸€èˆ¬ä»¥ä»¥ä¸‹å½¢å¼æè¿°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// FileInfo is the interface that describes a file and is returned by Stat and Lstat.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">type&lt;/span> &lt;span class="nx">FileInfo&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="å‡½æ•°ä¸æ–¹æ³•">
&lt;a href="#%e5%87%bd%e6%95%b0%e4%b8%8e%e6%96%b9%e6%b3%95" class="header-anchor">#&lt;/a>
å‡½æ•°ä¸æ–¹æ³•
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>å‡½æ•°ä¸æ–¹æ³•çš„æ³¨é‡Šéœ€ä»¥å‡½æ•°æˆ–æ–¹æ³•çš„åç§°ä½œä¸ºå¼€å¤´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Post returns *BeegoHttpRequest with POST method.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¦‚æœä¸€å¥è¯ä¸è¶³ä»¥è¯´æ˜å…¨éƒ¨é—®é¢˜ï¼Œåˆ™å¯æ¢è¡Œç»§ç»­è¿›è¡Œæ›´åŠ ç»†è‡´çš„æè¿°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Copy copies file from source to target path.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// It returns false and error when error occurs in underlying function calls.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è‹¥å‡½æ•°æˆ–æ–¹æ³•ä¸ºåˆ¤æ–­ç±»å‹ï¼ˆè¿”å›å€¼ä¸»è¦ä¸º &lt;code>bool&lt;/code> ç±»å‹ï¼‰ï¼Œåˆ™ä»¥ &lt;code>&amp;lt;name&amp;gt; returns true if&lt;/code> å¼€å¤´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// HasPrefix returns true if name has any string in given slice as prefix.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">func&lt;/span> &lt;span class="nf">HasPrefix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">prefixes&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="å…¶å®ƒè¯´æ˜-1">
&lt;a href="#%e5%85%b6%e5%ae%83%e8%af%b4%e6%98%8e-1" class="header-anchor">#&lt;/a>
å…¶å®ƒè¯´æ˜
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>å½“æŸä¸ªéƒ¨åˆ†ç­‰å¾…å®Œæˆæ—¶ï¼Œå¯ç”¨ &lt;code>TODO:&lt;/code> å¼€å¤´çš„æ³¨é‡Šæ¥æé†’ç»´æŠ¤äººå‘˜ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“æŸä¸ªéƒ¨åˆ†å­˜åœ¨å·²çŸ¥é—®é¢˜è¿›è¡Œéœ€è¦ä¿®å¤æˆ–æ”¹è¿›æ—¶ï¼Œå¯ç”¨ &lt;code>FIXME:&lt;/code> å¼€å¤´çš„æ³¨é‡Šæ¥æé†’ç»´æŠ¤äººå‘˜ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“éœ€è¦ç‰¹åˆ«è¯´æ˜æŸä¸ªé—®é¢˜æ—¶ï¼Œå¯ç”¨ &lt;code>NOTE:&lt;/code> å¼€å¤´çš„æ³¨é‡Šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> // NOTE: os.Chmod and os.Chtimes don&amp;#39;t recognize symbolic link,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // which will lead &amp;#34;no such file or directory&amp;#34; error.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return os.Symlink(target, dest)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼š&lt;code>NOTE:&lt;/code>éƒ¨åˆ†ideä¸æ”¯æŒé«˜äº®ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="å‘½åè§„åˆ™">
&lt;a href="#%e5%91%bd%e5%90%8d%e8%a7%84%e5%88%99" class="header-anchor">#&lt;/a>
å‘½åè§„åˆ™
&lt;/h3>&lt;h4 id="æ–‡ä»¶å">
&lt;a href="#%e6%96%87%e4%bb%b6%e5%90%8d" class="header-anchor">#&lt;/a>
æ–‡ä»¶å
&lt;/h4>&lt;ul>
&lt;li>æ•´ä¸ªåº”ç”¨æˆ–åŒ…çš„ä¸»å…¥å£æ–‡ä»¶åº”å½“æ˜¯ &lt;code>main.go&lt;/code> æˆ–ä¸&lt;strong>åº”ç”¨åç§°ç®€å†™&lt;/strong>ç›¸åŒã€‚ä¾‹å¦‚ï¼š&lt;code>Gogs&lt;/code> çš„ä¸»å…¥å£æ–‡ä»¶åä¸º &lt;code>gogs.go&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="å‡½æ•°æˆ–æ–¹æ³•">
&lt;a href="#%e5%87%bd%e6%95%b0%e6%88%96%e6%96%b9%e6%b3%95" class="header-anchor">#&lt;/a>
å‡½æ•°æˆ–æ–¹æ³•
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>è‹¥å‡½æ•°æˆ–æ–¹æ³•ä¸ºåˆ¤æ–­ç±»å‹ï¼ˆè¿”å›å€¼ä¸»è¦ä¸º &lt;code>bool&lt;/code> ç±»å‹ï¼‰ï¼Œåˆ™åç§°åº”ä»¥ &lt;code>Has&lt;/code>, &lt;code>Is&lt;/code>, &lt;code>Can&lt;/code> æˆ– &lt;code>Allow&lt;/code> ç­‰åˆ¤æ–­æ€§åŠ¨è¯å¼€å¤´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="nf">HasPrefix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">prefixes&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="nf">IsEntry&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">entries&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="nf">CanManage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="nf">AllowGitHook&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="å¸¸é‡">
&lt;a href="#%e5%b8%b8%e9%87%8f" class="header-anchor">#&lt;/a>
å¸¸é‡
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>å¸¸é‡å‡éœ€ä½¿ç”¨å…¨éƒ¨å¤§å†™å­—æ¯ç»„æˆï¼Œå¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†è¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="nx">APP_VER&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;0.7.0.1110 Beta&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¦‚æœæ˜¯æšä¸¾ç±»å‹çš„å¸¸é‡ï¼Œéœ€è¦å…ˆåˆ›å»ºç›¸åº”ç±»å‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">type&lt;/span> &lt;span class="nx">Scheme&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HTTP&lt;/span> &lt;span class="nx">Scheme&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HTTPS&lt;/span> &lt;span class="nx">Scheme&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;https&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¦‚æœæ¨¡å—çš„åŠŸèƒ½è¾ƒä¸ºå¤æ‚ã€å¸¸é‡åç§°å®¹æ˜“æ··æ·†çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†æ›´å¥½åœ°åŒºåˆ†æšä¸¾ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨å®Œæ•´çš„å‰ç¼€ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">type&lt;/span> &lt;span class="nx">PullRequestStatus&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PULL_REQUEST_STATUS_CONFLICT&lt;/span> &lt;span class="nx">PullRequestStatus&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">iota&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PULL_REQUEST_STATUS_CHECKING&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PULL_REQUEST_STATUS_MERGEABLE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="å˜é‡">
&lt;a href="#%e5%8f%98%e9%87%8f" class="header-anchor">#&lt;/a>
å˜é‡
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>å˜é‡å‘½ååŸºæœ¬ä¸Šéµå¾ªç›¸åº”çš„è‹±æ–‡è¡¨è¾¾æˆ–ç®€å†™ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ç›¸å¯¹ç®€å•çš„ç¯å¢ƒï¼ˆå¯¹è±¡æ•°é‡å°‘ã€é’ˆå¯¹æ€§å¼ºï¼‰ä¸­ï¼Œå¯ä»¥å°†ä¸€äº›åç§°ç”±å®Œæ•´å•è¯ç®€å†™ä¸ºå•ä¸ªå­—æ¯ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>user&lt;/code> å¯ä»¥ç®€å†™ä¸º &lt;code>u&lt;/code>&lt;/li>
&lt;li>&lt;code>userID&lt;/code> å¯ä»¥ç®€å†™ &lt;code>uid&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è‹¥å˜é‡ç±»å‹ä¸º &lt;code>bool&lt;/code> ç±»å‹ï¼Œåˆ™åç§°åº”ä»¥ &lt;code>Has&lt;/code>, &lt;code>Is&lt;/code>, &lt;code>Can&lt;/code> æˆ– &lt;code>Allow&lt;/code> å¼€å¤´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">isExist&lt;/span> &lt;span class="ne">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">hasConflict&lt;/span> &lt;span class="ne">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">canManage&lt;/span> &lt;span class="ne">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">allowGitHook&lt;/span> &lt;span class="ne">bool&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¸Šé¢çš„è§„åˆ™ä¹Ÿé€‚ç”¨äºç»“æ„ä½“å­—æ®µå®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Webhook represents a web hook object.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">type&lt;/span> &lt;span class="nx">Webhook&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ID&lt;/span> &lt;span class="kt">int64&lt;/span> &lt;span class="s">`xorm:&amp;#34;pk autoincr&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RepoID&lt;/span> &lt;span class="kt">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">OrgID&lt;/span> &lt;span class="kt">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">URL&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`xorm:&amp;#34;url TEXT&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ContentType&lt;/span> &lt;span class="nx">HookContentType&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Secret&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`xorm:&amp;#34;TEXT&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Events&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`xorm:&amp;#34;TEXT&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">HookEvent&lt;/span> &lt;span class="s">`xorm:&amp;#34;-&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IsSSL&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`xorm:&amp;#34;is_ssl&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IsActive&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HookTaskType&lt;/span> &lt;span class="nx">HookTaskType&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Meta&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`xorm:&amp;#34;TEXT&amp;#34;`&lt;/span> &lt;span class="c1">// store hook-specific attributes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">LastStatus&lt;/span> &lt;span class="nx">HookStatus&lt;/span> &lt;span class="c1">// Last delivery status
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Created&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span> &lt;span class="s">`xorm:&amp;#34;CREATED&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Updated&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span> &lt;span class="s">`xorm:&amp;#34;UPDATED&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h5 id="å˜é‡å‘½åæƒ¯ä¾‹">
&lt;a href="#%e5%8f%98%e9%87%8f%e5%91%bd%e5%90%8d%e6%83%af%e4%be%8b" class="header-anchor">#&lt;/a>
å˜é‡å‘½åæƒ¯ä¾‹
&lt;/h5>&lt;p>å˜é‡åç§°ä¸€èˆ¬éµå¾ªé©¼å³°æ³•ï¼Œä½†é‡åˆ°ç‰¹æœ‰åè¯æ—¶ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœå˜é‡ä¸ºç§æœ‰ï¼Œä¸”ç‰¹æœ‰åè¯ä¸ºé¦–ä¸ªå•è¯ï¼Œåˆ™ä½¿ç”¨å°å†™ï¼Œå¦‚ &lt;code>apiClient&lt;/code>ã€‚&lt;/li>
&lt;li>å…¶å®ƒæƒ…å†µéƒ½åº”å½“ä½¿ç”¨è¯¥åè¯åŸæœ‰çš„å†™æ³•ï¼Œå¦‚ &lt;code>APIClient&lt;/code>ã€&lt;code>GET&lt;/code>ã€&lt;code>UserID&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›å¸¸è§çš„ç‰¹æœ‰åè¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-GO" data-lang="GO">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// A GonicMapper that contains a list of common initialisms taken from golang/lint
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">LintGonicMapper&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">GonicMapper&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;API&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;ASCII&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;CPU&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;CSS&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;DNS&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;EOF&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;GUID&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;HTML&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;HTTP&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;HTTPS&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;ID&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;IP&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;JSON&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;LHS&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;QPS&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;RAM&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;RHS&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;RPC&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;SLA&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;SMTP&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;SSH&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;TLS&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;TTL&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;UI&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;UID&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;UUID&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;URI&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;URL&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;UTF8&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;VM&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;XML&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;XSRF&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;XSS&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å£°æ˜è¯­å¥">
&lt;a href="#%e5%a3%b0%e6%98%8e%e8%af%ad%e5%8f%a5" class="header-anchor">#&lt;/a>
å£°æ˜è¯­å¥
&lt;/h3>&lt;h4 id="å‡½æ•°æˆ–æ–¹æ³•-1">
&lt;a href="#%e5%87%bd%e6%95%b0%e6%88%96%e6%96%b9%e6%b3%95-1" class="header-anchor">#&lt;/a>
å‡½æ•°æˆ–æ–¹æ³•
&lt;/h4>&lt;p>å‡½æ•°æˆ–æ–¹æ³•çš„å‚æ•°æ’åˆ—é¡ºåºéµå¾ªä»¥ä¸‹å‡ ç‚¹åŸåˆ™ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼š&lt;/p>
&lt;ol>
&lt;li>å‚æ•°çš„é‡è¦ç¨‹åº¦ä¸é€»è¾‘é¡ºåº&lt;/li>
&lt;li>ç®€å•ç±»å‹ä¼˜å…ˆäºå¤æ‚ç±»å‹&lt;/li>
&lt;li>å°½å¯èƒ½å°†åŒç§ç±»å‹çš„å‚æ•°æ”¾åœ¨ç›¸é‚»ä½ç½®ï¼Œåˆ™åªéœ€å†™ä¸€æ¬¡ç±»å‹&lt;/li>
&lt;/ol>
&lt;p>ç¤ºä¾‹:&lt;/p>
&lt;p>ä»¥ä¸‹å£°æ˜è¯­å¥ï¼Œ&lt;code>User&lt;/code> ç±»å‹è¦å¤æ‚äº &lt;code>string&lt;/code> ç±»å‹ï¼Œä½†ç”±äº &lt;code>Repository&lt;/code> æ˜¯ &lt;code>User&lt;/code> çš„é™„å±å“ï¼Œé¦–å…ˆç¡®å®š &lt;code>User&lt;/code> æ‰èƒ½ç»§è€Œç¡®å®š &lt;code>Repository&lt;/code>ã€‚å› æ­¤ï¼Œ&lt;code>User&lt;/code> çš„é¡ºåºè¦ä¼˜å…ˆäº &lt;code>repoName&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">IsRepositoryExist&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">user&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">repoName&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>â€‹&lt;/p>
&lt;h3 id="ä»£ç æŒ‡å¯¼">
&lt;a href="#%e4%bb%a3%e7%a0%81%e6%8c%87%e5%af%bc" class="header-anchor">#&lt;/a>
ä»£ç æŒ‡å¯¼
&lt;/h3>&lt;h4 id="åŸºæœ¬çº¦æŸ">
&lt;a href="#%e5%9f%ba%e6%9c%ac%e7%ba%a6%e6%9d%9f" class="header-anchor">#&lt;/a>
åŸºæœ¬çº¦æŸ
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>æ‰€æœ‰åº”ç”¨çš„ &lt;code>main&lt;/code> åŒ…éœ€è¦æœ‰ &lt;code>APP_VER&lt;/code> å¸¸é‡è¡¨ç¤ºç‰ˆæœ¬ï¼Œæ ¼å¼ä¸º &lt;code>X.Y.Z.Date [Status]&lt;/code>ï¼Œä¾‹å¦‚ï¼š&lt;code>0.7.6.1112 Beta&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å•ç‹¬çš„åº“éœ€è¦æœ‰å‡½æ•° &lt;code>Version&lt;/code> è¿”å›åº“ç‰ˆæœ¬å·çš„å­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º &lt;code>X.Y.Z[.Date]&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“å•è¡Œä»£ç è¶…è¿‡ 80 ä¸ªå­—ç¬¦æ—¶ï¼Œå°±è¦è€ƒè™‘åˆ†è¡Œã€‚åˆ†è¡Œçš„è§„åˆ™æ˜¯ä»¥å‚æ•°ä¸ºå•ä½å°†ä»è¾ƒé•¿çš„å‚æ•°å¼€å§‹æ¢è¡Œï¼Œä»¥æ­¤ç±»æ¨ç›´åˆ°æ¯è¡Œé•¿åº¦åˆé€‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">So&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">z&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ExtractTo&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">TempDir&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="s">&amp;#34;testdata/test2&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;dir/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;dir/bar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;readonly&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">ShouldBeNil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å½“å•è¡Œå£°æ˜è¯­å¥è¶…è¿‡ 80 ä¸ªå­—ç¬¦æ—¶ï¼Œå°±è¦è€ƒè™‘åˆ†è¡Œã€‚åˆ†è¡Œçš„è§„åˆ™æ˜¯å°†å‚æ•°æŒ‰ç±»å‹åˆ†ç»„ï¼Œç´§æ¥ç€çš„å£°æ˜è¯­å¥çš„æ˜¯ä¸€ä¸ªç©ºè¡Œï¼Œä»¥ä¾¿å’Œå‡½æ•°ä½“åŒºåˆ«ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// NewNode initializes and returns a new Node representation.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">func&lt;/span> &lt;span class="nf">NewNode&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">importPath&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">downloadUrl&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tp&lt;/span> &lt;span class="nx">RevisionType&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isGetDeps&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Node&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">n&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Node&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Pkg&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">Pkg&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ImportPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">importPath&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RootPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">GetRootPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">importPath&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">tp&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Value&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">val&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DownloadURL&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">downloadUrl&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IsGetDeps&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">isGetDeps&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">n&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">InstallPath&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">setting&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">InstallRepoPath&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RootPath&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">n&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ValSuffix&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åˆ†ç»„å£°æ˜ä¸€èˆ¬éœ€è¦æŒ‰ç…§åŠŸèƒ½æ¥åŒºåˆ†ï¼Œè€Œä¸æ˜¯å°†æ‰€æœ‰ç±»å‹éƒ½åˆ†åœ¨ä¸€ç»„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Default section name.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">DEFAULT_SECTION&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;DEFAULT&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Maximum allowed depth when recursively substituing variable names.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_DEPTH_VALUES&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">200&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">type&lt;/span> &lt;span class="nx">ParseError&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ERR_SECTION_NOT_FOUND&lt;/span> &lt;span class="nx">ParseError&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">iota&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ERR_KEY_NOT_FOUND&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ERR_BLANK_SECTION_NAME&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ERR_COULD_NOT_PARSE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å½“ä¸€ä¸ªæºæ–‡ä»¶ä¸­å­˜åœ¨å¤šä¸ªç›¸å¯¹ç‹¬ç«‹çš„éƒ¨åˆ†æ—¶ï¼Œä¸ºæ–¹ä¾¿åŒºåˆ†ï¼Œéœ€ä½¿ç”¨ç”± &lt;a class="link" href="http://www.network-science.de/ascii/" target="_blank" rel="noopener"
>ASCII Generator&lt;/a> æä¾›çš„å¥å‹å­—ç¬¦æ ‡æ³¨ï¼ˆç¤ºä¾‹ï¼š&lt;code>Comment&lt;/code>ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// _________ __
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// \_ ___ \ ____ _____ _____ ____ _____/ |_
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// / \ \/ / _ \ / \ / \_/ __ \ / \ __\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// \ \___( &amp;lt;_&amp;gt; ) Y Y \ Y Y \ ___/| | \ |
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// \______ /\____/|__|_| /__|_| /\___ &amp;gt;___| /__|
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// \/ \/ \/ \/ \/
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å‡½æ•°æˆ–æ–¹æ³•çš„é¡ºåºä¸€èˆ¬éœ€è¦æŒ‰ç…§ä¾èµ–å…³ç³»ç”±æµ…å…¥æ·±ç”±ä¸Šè‡³ä¸‹æ’åºï¼Œå³æœ€åº•å±‚çš„å‡½æ•°å‡ºç°åœ¨æœ€å‰é¢ã€‚ä¾‹å¦‚ï¼Œä¸‹æ–¹çš„ä»£ç ï¼Œå‡½æ•° &lt;code>ExecCmdDirBytes&lt;/code> å±äºæœ€åº•å±‚çš„å‡½æ•°ï¼Œå®ƒè¢« &lt;code>ExecCmdDir&lt;/code> å‡½æ•°è°ƒç”¨ï¼Œè€Œ &lt;code>ExecCmdDir&lt;/code> åˆè¢« &lt;code>ExecCmd&lt;/code> è°ƒç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ExecCmdDirBytes executes system command in given directory
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// and return stdout, stderr in bytes type, along with possible error.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">func&lt;/span> &lt;span class="nf">ExecCmdDirBytes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cmdName&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ExecCmdDir executes system command in given directory
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// and return stdout, stderr in string type, along with possible error.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">func&lt;/span> &lt;span class="nf">ExecCmdDir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cmdName&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">bufOut&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">bufErr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">ExecCmdDirBytes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cmdName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bufOut&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bufErr&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ExecCmd executes system command
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// and return stdout, stderr in string type, along with possible error.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">func&lt;/span> &lt;span class="nf">ExecCmd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmdName&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">ExecCmdDir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cmdName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ç»“æ„é™„å¸¦çš„æ–¹æ³•åº”ç½®äºç»“æ„å®šä¹‰ä¹‹åï¼ŒæŒ‰ç…§æ‰€å¯¹åº”æ“ä½œçš„å­—æ®µé¡ºåºæ‘†æ”¾æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">type&lt;/span> &lt;span class="nx">Webhook&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Webhook&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">GetEvent&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Webhook&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SaveEvent&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Webhook&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">HasPushEvent&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¦‚æœä¸€ä¸ªç»“æ„æ‹¥æœ‰å¯¹åº”æ“ä½œå‡½æ•°ï¼Œå¤§ä½“ä¸ŠæŒ‰ç…§ &lt;code>CRUD&lt;/code> çš„é¡ºåºæ”¾ç½®ç»“æ„å®šä¹‰ä¹‹åï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="nf">CreateWebhook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Webhook&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="nf">GetWebhookById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">hookId&lt;/span> &lt;span class="kt">int64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Webhook&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="nf">UpdateWebhook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Webhook&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="nf">DeleteWebhook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">hookId&lt;/span> &lt;span class="kt">int64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¦‚æœä¸€ä¸ªç»“æ„æ‹¥æœ‰ä»¥ &lt;code>Has&lt;/code>ã€&lt;code>Is&lt;/code>ã€&lt;code>Can&lt;/code> æˆ– &lt;code>Allow&lt;/code> å¼€å¤´çš„å‡½æ•°æˆ–æ–¹æ³•ï¼Œåˆ™åº”å°†å®ƒä»¬è‡³äºæ‰€æœ‰å…¶å®ƒå‡½æ•°åŠæ–¹æ³•ä¹‹å‰ï¼›è¿™äº›å‡½æ•°æˆ–æ–¹æ³•ä»¥ &lt;code>Has&lt;/code>ã€&lt;code>Is&lt;/code>ã€&lt;code>Can&lt;/code>ã€&lt;code>Allow&lt;/code> çš„é¡ºåºæ’åºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å˜é‡çš„å®šä¹‰è¦æ”¾ç½®åœ¨ç›¸å…³å‡½æ•°ä¹‹å‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">CmdDump&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cli&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;dump&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Action&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">runDump&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Flags&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">cli&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Flag&lt;/span>&lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">func&lt;/span> &lt;span class="nf">runDump&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">cli&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åœ¨åˆå§‹åŒ–ç»“æ„æ—¶ï¼Œå°½å¯èƒ½ä½¿ç”¨ä¸€ä¸€å¯¹åº”æ–¹å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">AddHookTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">HookTask&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">HTT_WEBHOOK&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Url&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">w&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Url&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Payload&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">p&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ContentType&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">w&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ContentType&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IsSsl&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">w&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">IsSsl&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="æµ‹è¯•ç”¨ä¾‹">
&lt;a href="#%e6%b5%8b%e8%af%95%e7%94%a8%e4%be%8b" class="header-anchor">#&lt;/a>
æµ‹è¯•ç”¨ä¾‹
&lt;/h3>&lt;ul>
&lt;li>å•å…ƒæµ‹è¯•éƒ½å¿…é¡»ä½¿ç”¨ &lt;a class="link" href="http://goconvey.co/" target="_blank" rel="noopener"
>GoConvey&lt;/a> ç¼–å†™ï¼Œä¸”è¾…åŠ©åŒ…è¦†ç›–ç‡å¿…é¡»åœ¨ 80% ä»¥ä¸Šã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="ä½¿ç”¨ç¤ºä¾‹">
&lt;a href="#%e4%bd%bf%e7%94%a8%e7%a4%ba%e4%be%8b" class="header-anchor">#&lt;/a>
ä½¿ç”¨ç¤ºä¾‹
&lt;/h4>&lt;ul>
&lt;li>ä¸ºè¾…åŠ©åŒ…ä¹¦å†™ä½¿ç”¨ç¤ºä¾‹çš„æ—¶ï¼Œæ–‡ä»¶åå‡å‘½åä¸º &lt;code>example_test.go&lt;/code>ã€‚&lt;/li>
&lt;li>æµ‹è¯•ç”¨ä¾‹çš„å‡½æ•°åç§°å¿…é¡»ä»¥ &lt;code>Test_&lt;/code> å¼€å¤´ï¼Œä¾‹å¦‚ï¼š&lt;code>Test_Logger&lt;/code>ã€‚&lt;/li>
&lt;li>å¦‚æœä¸ºæ–¹æ³•ä¹¦å†™æµ‹è¯•ç”¨ä¾‹ï¼Œåˆ™éœ€è¦ä»¥ &lt;code>Text_&amp;lt;Struct&amp;gt;_&amp;lt;Method&amp;gt;&lt;/code> çš„å½¢å¼å‘½åï¼Œä¾‹å¦‚ï¼š&lt;code>Test_Macaron_Run&lt;/code>ã€‚&lt;/li>
&lt;li>æˆ–è€…ç”¨é©¼å³°å‘½åã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="æ›´å¤šgoä»£ç é£æ ¼æŒ‡å—">
&lt;a href="#%e6%9b%b4%e5%a4%9ago%e4%bb%a3%e7%a0%81%e9%a3%8e%e6%a0%bc%e6%8c%87%e5%8d%97" class="header-anchor">#&lt;/a>
æ›´å¤šgoä»£ç é£æ ¼æŒ‡å—
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://golang.org/doc/effective_go.html" target="_blank" rel="noopener"
>Effective Go&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://go.dev/wiki/CommonMistakes" target="_blank" rel="noopener"
>Go Common Mistakes&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://go.dev/wiki/CodeReviewComments" target="_blank" rel="noopener"
>Go Code Review Comments&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/uber-go/guide" target="_blank" rel="noopener"
>The Uber Go Style Guide&lt;/a>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡ç®€å•ä»‹ç»äº†åœ¨ç¼–å†™goç¨‹åºæ—¶ï¼Œåº”è¯¥éµå¾ªçš„ä¸€äº›é£æ ¼ã€çº¦å®šã€‚å°½ç®¡å†…å®¹æœ‰å¾ˆå¤šï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿä¸å¿…ç€æ€¥ï¼Œç›®å‰è®¸å¤šgoçš„IDEéƒ½ä¼šå¸®æˆ‘ä»¬æ£€æŸ¥è¿™äº›è§„èŒƒã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>åŸä½œè€…ï¼š&lt;a class="link" href="https://github.com/unknwon/go-code-convention" target="_blank" rel="noopener"
>go-code-convention&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Go-ini Introduction</title><link>https://arlettebrook.github.io/p/go-ini-introduction/</link><pubDate>Wed, 15 May 2024 22:26:10 +0800</pubDate><guid>https://arlettebrook.github.io/p/go-ini-introduction/</guid><description>&lt;hr>
&lt;h2 id="ç®€ä»‹">
&lt;a href="#%e7%ae%80%e4%bb%8b" class="header-anchor">#&lt;/a>
ç®€ä»‹
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/go-ini/ini" target="_blank" rel="noopener"
>go-ini&lt;/a>æ˜¯ Go è¯­è¨€ä¸­ç”¨äºæ“ä½œ ini æ–‡ä»¶çš„ç¬¬ä¸‰æ–¹åº“ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœ¬æ–‡ä»‹ç»&lt;code>go-ini&lt;/code>åº“çš„ä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="inié…ç½®æ–‡ä»¶ä»‹ç»">
&lt;a href="#ini%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
inié…ç½®æ–‡ä»¶ä»‹ç»
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>ini æ˜¯ Windows ä¸Šå¸¸ç”¨çš„é…ç½®æ–‡ä»¶æ ¼å¼ã€‚MySQL çš„ Windows ç‰ˆå°±æ˜¯ä½¿ç”¨ ini æ ¼å¼å­˜å‚¨é…ç½®çš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>.ini&lt;/code>æ–‡ä»¶æ˜¯Initialization Fileçš„ç¼©å†™ï¼Œå³åˆå§‹åŒ–æ–‡ä»¶ï¼Œiniæ–‡ä»¶æ ¼å¼ï¼š[èŠ‚/section/åˆ†åŒº/è¡¨/æ®µ]+é”®=å€¼ã€‚&lt;/p>
&lt;ul>
&lt;li>èŠ‚å¯ä»¥ä¸ºç©ºï¼Œä½†å‚æ•°ï¼ˆkey=valueï¼‰å°±éœ€è¦å†™åœ¨å¼€å¤´ã€‚å› ä¸ºä¸€ä¸ªsectionæ²¡æœ‰æ˜æ˜¾çš„ç»“æŸæ ‡è¯†ç¬¦ï¼Œä¸€ä¸ªsectionçš„å¼€å§‹å°±æ˜¯ä¸Šä¸€ä¸ªsectionçš„ç»“æŸï¼Œæˆ–è€…æ˜¯æ–‡ä»¶ç»“æŸã€‚&lt;/li>
&lt;li>æ‰€æœ‰çš„sectionåç§°éƒ½æ˜¯ç‹¬å ä¸€è¡Œï¼Œå¹¶ä¸”sectionåå­—éƒ½è¢«æ–¹æ‹¬å·åŒ…å›´ç€ï¼ˆ[å’Œ]ï¼‰ã€‚
&lt;ul>
&lt;li>&lt;code>ini&lt;/code>æ–‡ä»¶ä¸æ”¯æŒå¤šä¸ªæ–¹æ‹¬å·åµŒå¥—ã€‚æœ‰çš„å°±ä¸ä»¥inié…ç½®æ–‡ä»¶æ ¼å¼è¯»å–ã€‚
&lt;ul>
&lt;li>inié…ç½®æ–‡ä»¶åç¼€ä¸ä¸€å®šæ˜¯&lt;code>.ini&lt;/code>ï¼Œä¹Ÿå¯ä»¥æ˜¯&lt;code>.cfg&lt;/code>ã€&lt;code>.conf&lt;/code>æˆ–è€…æ˜¯&lt;code>.txt&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>èŠ‚ååŒºåˆ†å¤§å°å†™ï¼Œå»ºè®®ç”¨_è¿æ¥ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ‰€æœ‰çš„å‚æ•°éƒ½æ˜¯ä»¥sectionä¸ºå•ä½ç»“åˆåœ¨ä¸€èµ·çš„ã€‚å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œä½†ä¸€ä¸ªå‚æ•°ç‹¬å ä¸€è¡Œã€‚
&lt;ul>
&lt;li>åœ¨sectionå£°æ˜åçš„æ‰€æœ‰parameterséƒ½å±äºè¯¥sectionã€‚&lt;/li>
&lt;li>åŒºåˆ†å¤§å°å†™ï¼Œå»ºè®®ç”¨_è¿æ¥ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ³¨é‡Šï¼ˆcommentsï¼‰ä½¿ç”¨åˆ†å·è¡¨ç¤ºï¼ˆ;ï¼‰æˆ–è€…#å·ï¼Œåœ¨åˆ†å·ã€#å·åé¢çš„æ–‡å­—ï¼Œç›´åˆ°è¯¥è¡Œç»“å°¾éƒ½å…¨éƒ¨ä¸ºæ³¨é‡Šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># app=name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">app_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">awesome web&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[mysql] &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1 ; database=mysql&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>.ini&lt;/code>æ–‡ä»¶æ˜¯windowsçš„ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œç»Ÿç®¡windowsçš„å„é¡¹é…ç½®ï¼Œæœ€é‡è¦çš„å°±æ˜¯â€œSystem.iniâ€ã€â€œSystem32.iniâ€å’Œâ€œWin.iniâ€ã€‚è¯¥æ–‡ä»¶ä¸»è¦å­˜æ”¾ç”¨æˆ·æ‰€åšçš„é€‰æ‹©ä»¥åŠç³»ç»Ÿçš„å„ç§å‚æ•°ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹INIæ–‡ä»¶ï¼Œæ¥æ”¹å˜åº”ç”¨ç¨‹åºå’Œç³»ç»Ÿçš„å¾ˆå¤šé…ç½®ã€‚ä¸€èˆ¬ç”¨æˆ·å°±ç”¨windowsæä¾›çš„å„é¡¹å›¾å½¢åŒ–ç®¡ç†ç•Œé¢å°±å¯å®ç°ç›¸åŒçš„é…ç½®äº†ï¼Œä½†åœ¨æŸäº›æƒ…å†µï¼Œè¿˜æ˜¯è¦ç›´æ¥ç¼–è¾‘.iniæ‰æ–¹ä¾¿ï¼Œä¸€èˆ¬åªæœ‰å¾ˆç†Ÿæ‚‰windowsæ‰èƒ½å»ç›´æ¥ç¼–è¾‘ã€‚&lt;/p>
&lt;ul>
&lt;li>åœ¨Windowsç³»ç»Ÿä¸­ï¼Œæ³¨å†Œè¡¨çš„å‡ºç°ï¼Œè®©INIæ–‡ä»¶åœ¨Windowsç³»ç»Ÿçš„åœ°ä½å°±å¼€å§‹ä¸æ–­ä¸‹æ»‘ï¼Œå› ä¸ºæ³¨å†Œè¡¨ç‹¬ç‰¹ä¼˜ç‚¹ï¼Œä½¿åº”ç”¨ç¨‹åºå’Œç³»ç»Ÿéƒ½æŠŠè®¸å¤šå‚æ•°å’Œåˆå§‹åŒ–ä¿¡æ¯å­˜æ”¾è¿›äº†æ³¨å†Œè¡¨ä¸­ã€‚ä½†åœ¨æŸäº›åœºåˆï¼ŒINIæ–‡ä»¶è¿˜æ‹¥æœ‰ä¸å¯æ›¿ä»£çš„åœ°ä½ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>åœ¨inié…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å ä½ç¬¦&lt;code>%(name)s&lt;/code>è¡¨ç¤ºç”¨ä¹‹å‰å·²å®šä¹‰çš„é”®&lt;code>name&lt;/code>çš„å€¼æ¥æ›¿æ¢ï¼Œè¿™é‡Œçš„&lt;code>s&lt;/code>è¡¨ç¤ºå€¼ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚4&lt;/p>
&lt;ul>
&lt;li>åœ¨sectionåç§°ä¸­å¯ä»¥ç”¨&lt;code>.&lt;/code>æ¥è¡¨ç¤ºä¸¤ä¸ªæˆ–å¤šä¸ªåˆ†åŒºä¹‹é—´çš„&lt;a class="link" href="#%e8%af%bb%e5%8f%96%e7%88%b6%e5%ad%90%e5%88%86%e5%8c%ba" >çˆ¶å­å…³ç³»&lt;/a>ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">NAME&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">ini&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">VERSION&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">IMPORT_PATH&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">gopkg.in/%(NAME)s.%(VERSION)s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[package]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">CLONE_URL&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">https://%(IMPORT_PATH)s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[package.sub]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>package&lt;/code>çš„æ²¡æœ‰çˆ¶åˆ†åŒºã€‚&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæŸä¸ªé”®åœ¨å­åˆ†åŒºä¸­ä¸å­˜åœ¨ï¼Œåˆ™ä¼šåœ¨å®ƒçš„çˆ¶åˆ†åŒºä¸­å†æ¬¡æŸ¥æ‰¾ï¼Œ&lt;strong>ç›´åˆ°æ²¡æœ‰çˆ¶åˆ†åŒºä¸ºæ­¢&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>iniæ–‡ä»¶é”®å€¼å¦‚æœå­˜åœ¨å¤šè¡Œç”¨&lt;code>&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&lt;/code>åŒ…è£¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸€è¡Œå†™ä¸ä¸‹å¯ä»¥ä½¿ç”¨&lt;code>\&lt;/code>ï¼Œå¦èµ·ä¸€è¡Œã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>IgnoreContinuation&lt;/code>å¯ä»¥å¿½ç•¥è¿ç»­è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>go-ini æ˜¯ç¬¬ä¸‰æ–¹åº“ï¼Œä½¿ç”¨å‰éœ€è¦å®‰è£…[æ¨èã€‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u gopkg.in/ini.v1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿå¯ä»¥ä½¿ç”¨ GitHub ä¸Šçš„ä»“åº“ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/go-ini/ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>ä¸ºä»€ä¹ˆæ¨è&lt;code>gopkg.in&lt;/code>,å‚è€ƒæ–‡ç« ï¼š&lt;a class="link" href="https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/#gopkg.in%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener"
>gopkg.inä»‹ç»&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª&lt;code>my.ini&lt;/code>é…ç½®æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">app_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">awesome web ; è¿™æ˜¯æ³¨é‡Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># possible values: DEBUG, INFO, WARNING, ERROR, FATAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">log_level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">DEBUG # è¿™ä¹Ÿæ˜¯æ³¨é‡Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; database=mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[mysql]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">root&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">123456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">database&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">awesome&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[redis]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">6381&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ go-ini åº“è¯»å–ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to read file: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;App Name:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Log Level:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;log_level&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;MySQL IP:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mysqlPort&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;MySQL Port:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">mysqlPort&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;MySQL User:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;MySQL Password:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;MySQL Database:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;database&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Redis IP:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">redisPort&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Redis Port:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">redisPort&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ ini æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªé”®å€¼å¯¹å ç”¨ä¸€è¡Œï¼Œä¸­é—´ä½¿ç”¨&lt;code>=&lt;/code>éš”å¼€ï¼Œå¯ä»¥æœ‰ç©ºæ ¼ï¼Œä½†ä¸æ˜¯å¿…é¡»å¾—ã€‚ä»¥&lt;code>#&lt;/code>å¼€å¤´çš„å†…å®¹ä¸ºæ³¨é‡Šã€‚ini æ–‡ä»¶æ˜¯ä»¥åˆ†åŒºï¼ˆsectionï¼‰ç»„ç»‡çš„ã€‚ åˆ†åŒºä»¥&lt;code>[name]&lt;/code>å¼€å§‹ï¼Œåœ¨ä¸‹ä¸€ä¸ªåˆ†åŒºå‰ç»“æŸã€‚æ‰€æœ‰åˆ†åŒºå‰çš„å†…å®¹å±äºé»˜è®¤åˆ†åŒºï¼Œå¦‚&lt;code>my.ini&lt;/code>æ–‡ä»¶ä¸­çš„&lt;code>app_name&lt;/code>å’Œ&lt;code>log_level&lt;/code>ã€‚&lt;/p>
&lt;p>ä½¿ç”¨&lt;code>go-ini&lt;/code>è¯»å–é…ç½®æ–‡ä»¶çš„æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>é¦–å…ˆè°ƒç”¨&lt;code>ini.Load&lt;/code>åŠ è½½æ–‡ä»¶ï¼Œå¾—åˆ°é…ç½®å¯¹è±¡&lt;code>cfg&lt;/code>ï¼›&lt;/li>
&lt;li>ç„¶åä»¥åˆ†åŒºåè°ƒç”¨é…ç½®å¯¹è±¡çš„&lt;code>Section&lt;/code>æ–¹æ³•å¾—åˆ°å¯¹åº”çš„åˆ†åŒºå¯¹è±¡&lt;code>section&lt;/code>ï¼Œé»˜è®¤åˆ†åŒºçš„åå­—ä¸º&lt;code>&amp;quot;&amp;quot;&lt;/code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code>ini.DefaultSection&lt;/code>ï¼›&lt;/li>
&lt;li>ä»¥é”®åè°ƒç”¨åˆ†åŒºå¯¹è±¡çš„&lt;code>Key&lt;/code>æ–¹æ³•å¾—åˆ°å¯¹åº”çš„é…ç½®é¡¹&lt;code>key&lt;/code>å¯¹è±¡ï¼›&lt;/li>
&lt;li>ç”±äºæ–‡ä»¶ä¸­è¯»å–å‡ºæ¥çš„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œ&lt;code>key&lt;/code>å¯¹è±¡éœ€æ ¹æ®ç±»å‹è°ƒç”¨å¯¹åº”çš„æ–¹æ³•è¿”å›å…·ä½“ç±»å‹çš„å€¼ä½¿ç”¨ï¼Œå¦‚ä¸Šé¢çš„&lt;code>String&lt;/code>ã€&lt;code>MustInt&lt;/code>æ–¹æ³•ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿è¡Œä»¥ä¸‹ç¨‹åºï¼Œå¾—åˆ°è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App Name: awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Log Level: DEBUG
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MySQL IP: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MySQL Port: &lt;span class="m">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MySQL User: root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MySQL Password: &lt;span class="m">123456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MySQL Database: awesome
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Redis IP: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Redis Port: &lt;span class="m">6381&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é…ç½®æ–‡ä»¶ä¸­å­˜å‚¨çš„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç±»å‹ä¸ºå­—ç¬¦ä¸²çš„é…ç½®é¡¹ä¸ä¼šå‡ºç°ç±»å‹è½¬æ¢å¤±è´¥çš„ï¼Œæ•…&lt;code>String()&lt;/code>æ–¹æ³•åªè¿”å›ä¸€ä¸ªå€¼ã€‚ ä½†å¦‚æœç±»å‹ä¸º&lt;code>Int/Uint/Float64&lt;/code>è¿™äº›æ—¶ï¼Œè½¬æ¢å¯èƒ½å¤±è´¥ã€‚æ‰€ä»¥&lt;code>Int()/Uint()/Float64()&lt;/code>è¿”å›ä¸€ä¸ªå€¼å’Œä¸€ä¸ªé”™è¯¯ã€‚&lt;/p>
&lt;p>è¦ç•™æ„è¿™ç§ä¸ä¸€è‡´ï¼å¦‚æœæˆ‘ä»¬å°†é…ç½®ä¸­ redis ç«¯å£æ”¹æˆéæ³•çš„æ•°å­— x6381ï¼Œé‚£ä¹ˆè¿è¡Œç¨‹åºå°†æŠ¥é”™ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">2024/05/16 11:45:00 strconv.ParseInt: parsing &lt;span class="s2">&amp;#34;x6381&amp;#34;&lt;/span>: invalid syntax
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> status &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="mustä¾¿æ·æ–¹æ³•">
&lt;a href="#must%e4%be%bf%e6%8d%b7%e6%96%b9%e6%b3%95" class="header-anchor">#&lt;/a>
&lt;code>Must*&lt;/code>ä¾¿æ·æ–¹æ³•
&lt;/h3>&lt;p>å¦‚æœæ¯æ¬¡å–å€¼éƒ½éœ€è¦è¿›è¡Œé”™è¯¯åˆ¤æ–­ï¼Œé‚£ä¹ˆä»£ç å†™èµ·æ¥ä¼šéå¸¸ç¹çã€‚ä¸ºæ­¤ï¼Œ&lt;code>go-ini&lt;/code>ä¹Ÿæä¾›å¯¹åº”çš„&lt;code>MustType&lt;/code>ï¼ˆType ä¸º&lt;code>Init/Uint/Float64&lt;/code>ç­‰ï¼‰æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åªè¿”å›ä¸€ä¸ªå€¼ã€‚ åŒæ—¶å®ƒæ¥å—å¯å˜å‚æ•°ï¼Œå¦‚æœç±»å‹æ— æ³•è½¬æ¢ï¼Œå–å‚æ•°ä¸­ç¬¬ä¸€ä¸ªå€¼è¿”å›ï¼Œå¹¶ä¸”è¯¥å‚æ•°è®¾ç½®ä¸ºè¿™ä¸ªé…ç½®çš„å€¼ï¼Œä¸‹æ¬¡è°ƒç”¨è¿”å›è¿™ä¸ªå€¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to read file: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">redisPort&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;before must, get redis port error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;before must, get redis port:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">redisPort&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis Port:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">MustInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">6381&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">redisPort&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;after must, get redis port error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;after must, get redis port:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">redisPort&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é…ç½®æ–‡ä»¶è¿˜æ˜¯ redis ç«¯å£ä¸ºéæ•°å­— x6381 æ—¶çš„çŠ¶æ€ï¼Œè¿è¡Œç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">before must, get redis port error: strconv.ParseInt: parsing &lt;span class="s2">&amp;#34;x6381&amp;#34;&lt;/span>: invalid syntax
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis Port: &lt;span class="m">6381&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">after must, get redis port: &lt;span class="m">6381&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬çœ‹åˆ°ç¬¬ä¸€æ¬¡è°ƒç”¨&lt;code>Int&lt;/code>è¿”å›é”™è¯¯ï¼Œä»¥ 6381 ä¸ºå‚æ•°è°ƒç”¨&lt;code>MustInt&lt;/code>ä¹‹åï¼Œå†æ¬¡è°ƒç”¨&lt;code>Int&lt;/code>ï¼ŒæˆåŠŸè¿”å› 6381ã€‚&lt;code>MustInt&lt;/code>æºç ä¹Ÿæ¯”è¾ƒç®€å•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">k&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Key&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">MustInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">defaultVal&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">val&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">defaultVal&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">k&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FormatInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">defaultVal&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]),&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">defaultVal&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">val&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">k&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Key&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Int&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="åŠ è½½iniæ–‡ä»¶å¯¹è±¡">
&lt;a href="#%e5%8a%a0%e8%bd%bdini%e6%96%87%e4%bb%b6%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
åŠ è½½iniæ–‡ä»¶å¯¹è±¡
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>go-iniæ”¯æŒä»å¤šä¸ªæ•°æ®æºåŠ è½½inié…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ•°æ®æº&lt;/strong> å¯ä»¥æ˜¯ &lt;code>[]byte&lt;/code> ç±»å‹çš„åŸå§‹æ•°æ®ï¼Œ&lt;code>string&lt;/code> ç±»å‹çš„&lt;strong>æ–‡ä»¶è·¯å¾„&lt;/strong>æˆ– &lt;code>io.ReadCloser&lt;/code>ã€‚å¯ä»¥åŠ è½½è¿™ä¸‰ä¸ª &lt;strong>ä»»æ„å¤šä¸ª&lt;/strong> æ•°æ®ï¼Œå¦‚æœæ˜¯å…¶ä»–çš„ç±»å‹ä¼šè¿”å›é”™è¯¯ã€‚è°ƒç”¨&lt;code>Load(source interface{}, others ...interface{})&lt;/code>å‡½æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>å½“åˆ›å»ºå¥½iniæ–‡ä»¶å¯¹è±¡ä¹‹åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¾€é‡Œé¢æ·»åŠ æ•°æ®æºã€‚è°ƒç”¨&lt;code>func (f *File) Append(source interface{}, others ...interface{})&lt;/code>æ–¹æ³•ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;bytes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;io&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/go-ini/ini&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">raw&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`raw=åŸå§‹æ•°æ®`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">noClose&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewReader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;string=noClose&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">raw&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;./my.cfg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NopCloser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">noClose&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NopCloser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBufferString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;close=have closer&amp;#34;&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Load error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;raw&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;string&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;close&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NopCloser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewReader&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;append=append&amp;#34;&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Append error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;append&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>io.NopCloser&lt;/code>å‡½æ•°ï¼ˆno optiontion closerï¼‰æ˜¯å°†æ²¡æœ‰&lt;code>Close&lt;/code>æ–¹æ³•çš„&lt;code>Reader&lt;/code>æ·»åŠ Closeæ–¹æ³•ï¼ˆè½¬æ¢æˆå®ç°ReadCloseræ¥å£çš„Readerï¼‰ï¼Œåªä¸è¿‡æ˜¯ä¸ºäº†é˜²æ­¢å‘&lt;code>bytes.NewReader&lt;/code>ã€&lt;code>strings.NewReader&lt;/code>è¿™æ ·çš„&lt;code>Reader&lt;/code>æ²¡æœ‰&lt;code>Close&lt;/code>æ–¹æ³•ï¼Œåº•å±‚åœ¨è‡ªåŠ¨å…³é—­çš„æ—¶å€™å‡ºé”™ã€‚æ²¡æœ‰å…³é—­æ“ä½œçš„Readerï¼Œå…³é—­æ—¶æ²¡ä»»ä½•æ“ä½œï¼Œæœ‰çš„è°ƒç”¨è‡ªèº«çš„Closeæ–¹æ³•ã€‚&lt;/p>
&lt;p>è¿è¡Œç¨‹åºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">åŸå§‹æ•°æ®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">noClose
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">have closer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">append
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•æ•°æ®æºçš„æ–‡ä»¶å¯¹è±¡ã€‚è°ƒç”¨&lt;code>Empty&lt;/code>å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cfg :&lt;span class="o">=&lt;/span> ini.Empty&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è°ƒç”¨ç”¨&lt;code>LooseLoad&lt;/code>çš„å‡½æ•°åŠ è½½æ–‡ä»¶å¯¹è±¡ï¼Œè‹¥æŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¸ä¼šè¿”å›é”™è¯¯ã€‚&lt;code>Load&lt;/code>ä¼šè¿”å›é”™è¯¯ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ›´ç‰›é€¼çš„æ˜¯ï¼Œå½“é‚£äº›ä¹‹å‰ä¸å­˜åœ¨çš„æ–‡ä»¶åœ¨é‡æ–°è°ƒç”¨ &lt;a class="link" href="https://gowalker.org/gopkg.in/ini.v1#File_Reload" target="_blank" rel="noopener"
>Reload()&lt;/a> æ–¹æ³•çš„æ—¶å€™çªç„¶å‡ºç°äº†ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šè¢«æ­£å¸¸åŠ è½½ã€‚&lt;/p>
&lt;ul>
&lt;li>æºç æ˜¯ï¼šåˆ›å»ºæ–‡ä»¶å¯¹è±¡çš„æ—¶å€™ä¼šåŠ è½½ä¸€æ¬¡ï¼Œåˆ›å»ºå®Œæ¯•ä¹‹ååˆä¼šåŠ è½½ä¸€æ¬¡ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LooseLoad&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;filename_404&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“å¤šä¸ªæ•°æ®æºä¸­æœ‰ç›¸åŒçš„é”®æ—¶ï¼Œåé¢çš„æ•°æ®æºä¼šè¦†ç›–å‰é¢çš„æ•°æ®æºã€‚&lt;/p>
&lt;ul>
&lt;li>è°ƒç”¨ &lt;code>ShadowLoad&lt;/code>å‡½æ•°ï¼Œåˆ›å»ºçš„æ•°æ®æºä¸ä¼šè¦†ç›–å­˜åœ¨çš„å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="è‡ªå®šä¹‰åŠ è½½iniæ–‡ä»¶å¯¹è±¡">
&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%8a%a0%e8%bd%bdini%e6%96%87%e4%bb%b6%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
è‡ªå®šä¹‰åŠ è½½iniæ–‡ä»¶å¯¹è±¡
&lt;/h3>&lt;p>å®ç°ä¸Šè°ƒç”¨&lt;code>Load&lt;/code>ã€&lt;code>LooseLoad&lt;/code>ã€&lt;code>InsensitiveLoad&lt;/code>ï¼ˆ&lt;a class="link" href="#%e5%bf%bd%e7%95%a5%e9%94%ae%e5%90%8d%e7%9a%84%e5%a4%a7%e5%b0%8f%e5%86%99" >åé¢ä¼šä»‹ç»&lt;/a>ï¼‰ã€&lt;code>ShadowLoad&lt;/code>åŠ è½½ä¸åŒé…ç½®çš„æ–‡ä»¶å¯¹è±¡ï¼Œåº•å±‚éƒ½æ˜¯è°ƒç”¨&lt;code>LoadSources(opts LoadOptions, source interface{}, others ...interface{})&lt;/code>å‡½æ•°å®ç°çš„ã€‚ä¸åŒçš„é…ç½®æ˜¯é€šè¿‡&lt;code>LoadOptions&lt;/code>é…ç½®çš„ã€‚åé¢çš„å‚æ•°éƒ½æ˜¯æ•°æ®æºï¼Œé»˜è®¤å¿…é¡»æœ‰ä¸€ä¸ªæ•°æ®æºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">source&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">others&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">File&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">LoadSources&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">LoadOptions&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">others&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">LooseLoad&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">source&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">others&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">File&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">LoadSources&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">LoadOptions&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Loose&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="nx">source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">others&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">InsensitiveLoad&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">source&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">others&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">File&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">LoadSources&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">LoadOptions&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Insensitive&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="nx">source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">others&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ShadowLoad&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">source&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">others&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">File&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">LoadSources&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">LoadOptions&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">AllowShadows&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="nx">source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">others&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œéƒ½å°†ä¸åŒçš„é…ç½®å°è£…åˆ°äº†ä¸åŒçš„å‡½æ•°ã€‚&lt;/p>
&lt;p>æ‰€ä»¥åˆ©ç”¨&lt;code>LoadSources&lt;/code>æˆ‘ä»¬å¯ä»¥å®ç°è‡ªå®šä¹‰åŠ è½½ä¸åŒé…ç½®çš„æ–‡ä»¶å¯¹è±¡ã€‚&lt;/p>
&lt;p>åŠ è½½é€‰é¡¹&lt;code>LoadOptions&lt;/code>å¸¸ç”¨çš„å±æ€§ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Looseï¼šæ˜¯å¦å¿½ç•¥æ–‡ä»¶è·¯å¾„ä¸å­˜åœ¨çš„é”™è¯¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Insensitiveï¼šæ˜¯å¦å¯ç”¨ä¸æ•æ„ŸåŠ è½½ï¼Œä½œç”¨ï¼šå¿½ç•¥é”®åçš„å¤§å°å†™ã€‚åº•å±‚æ˜¯å°†é”®éƒ½è½¬æ¢ä¸ºå°å†™ã€‚é”®ååŒ…æ‹¬åˆ†åŒºåã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>AllowShadowsï¼šæ˜¯å¦ä¸è¦†ç›–å­˜åœ¨é”®çš„å€¼ã€‚å¼€å¯ä¸è¦†ç›–ä¹‹åï¼Œå¯ä»¥è°ƒç”¨&lt;code>ValueWithShadows&lt;/code>æ–¹æ³•ï¼Œè·å–æŒ‡å®šåˆ†åŒºä¸‹æ‰€æœ‰çš„é‡å¤é”®çš„å€¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>UnescapeValueDoubleQuotesï¼šæ˜¯å¦å¼ºåˆ¶å¿½ç•¥é”®å€¼ä¸¤ç«¯çš„åŒå¼•å·ã€‚ç”¨åœ¨å¤šä¸ªåŒå¼•å·çš„å€¼ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SkipUnrecognizableLinesï¼šæ˜¯å¦è·³è¿‡æ— æ³•è¯†åˆ«çš„è¡Œã€‚é»˜è®¤æ— æ³•è¯†åˆ«å°±ä¼šæŠ¥é”™ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>IgnoreContinuationï¼šæ˜¯å¦å¿½ç•¥è¿ç»­æ¢è¡Œã€‚å°±æ˜¯é”®å€¼ä¸æ”¯æŒæ¢æ¢è¡Œå†™&lt;code>\&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>UnparseableSectionsï¼šæ ‡è®°ä¸€ä¸ªåˆ†åŒºä¸ºæ— æ³•è§£æã€‚å½“è·å–æ— æ³•è§£æçš„åˆ†åŒºæ—¶ï¼Œè°ƒç”¨Bodyæ–¹æ³•ä¼šè·å–è¯¥åˆ†åŒºçš„åŸå§‹æ•°æ®ï¼Œæœªæ ‡è®°æ— æ³•è·å–ï¼ŒåŒæ—¶æœªæ ‡è®°ä¸€ä¸ªæ— æ³•è§£æçš„åˆ†åŒºï¼Œè§£æä¼šæŠ¥é”™ã€‚é™¤éå¼€è·³è¿‡æ— æ³•è§£æçš„è¡Œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>AllowBooleanKeys: æ˜¯å¦å¼€å¯å¸ƒå°”é”®ã€‚å¼€å¯å…è®¸åªæœ‰ä¸€ä¸ªé”®ï¼Œè€Œæ²¡æœ‰å€¼ã€‚è§£æä¸ä¼šæŠ¥é”™ã€‚å€¼æ°¸è¿œä¸ºtrueã€‚ä¿å­˜æ—¶ä¹Ÿåªæœ‰é”®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>AllowPythonMultilineValuesï¼šæ˜¯å¦å…è®¸è§£æå¤šè¡Œå€¼ï¼Œç”¨äºè§£ææ¢è¡Œä¹‹åå¯¹é½çš„å­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">str&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">---&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¼€å¯åç±»ä¼¼ä¸Šé¢çš„å­—ç¬¦ä¸²éƒ½å¯ä»¥è§£æã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>IgnoreInlineCommentï¼šå¿½ç•¥è¡Œå†…æ³¨é‡Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SpaceBeforeInlineCommentï¼šè¦æ±‚æ³¨é‡Šç¬¦å·å‰å¿…é¡»å¸¦æœ‰ä¸€ä¸ªç©ºæ ¼&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadSources&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LoadOptions&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Loose&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Insensitive&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UnescapeValueDoubleQuotes&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AllowShadows&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IgnoreContinuation&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SkipUnrecognizableLines&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UnparseableSections&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;COMMENTS&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="s">&amp;#34;my.cfg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">body&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;COMMENTS&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Body&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// &amp;lt;1&amp;gt;&amp;lt;L.Slide#2&amp;gt; This slide has the fuel listed in the wrong units &amp;lt;e.1&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>my.cfg&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[COMMENTS]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">&amp;lt;1&amp;gt;&amp;lt;L.Slide#2&amp;gt; This slide has the fuel listed in the wrong units &amp;lt;e.1&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ³¨æ„äº‹é¡¹">
&lt;a href="#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" class="header-anchor">#&lt;/a>
æ³¨æ„äº‹é¡¹
&lt;/h3>&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæœ¬åº“ä¼šåœ¨æ‚¨è¿›è¡Œè¯»å†™æ“ä½œæ—¶é‡‡ç”¨é”æœºåˆ¶æ¥ç¡®ä¿æ•°æ®æ—¶é—´ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨éå¸¸ç¡®å®šåªè¿›è¡Œè¯»æ“ä½œã€‚æ­¤æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¾ç½® &lt;code>cfg.BlockMode = false&lt;/code> æ¥å°†è¯»æ“ä½œæå‡å¤§çº¦ &lt;strong>50-70%&lt;/strong> çš„æ€§èƒ½ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ“ä½œåˆ†åŒºsection">
&lt;a href="#%e6%93%8d%e4%bd%9c%e5%88%86%e5%8c%basection" class="header-anchor">#&lt;/a>
æ“ä½œåˆ†åŒºï¼ˆSectionï¼‰
&lt;/h2>&lt;h3 id="è·å–åˆ†åŒº">
&lt;a href="#%e8%8e%b7%e5%8f%96%e5%88%86%e5%8c%ba" class="header-anchor">#&lt;/a>
è·å–åˆ†åŒº
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>åœ¨åŠ è½½é…ç½®ä¹‹åï¼Œå¯ä»¥é€šè¿‡&lt;code>Sections&lt;/code>æ–¹æ³•è·å–æ‰€æœ‰&lt;strong>åˆ†åŒºå¯¹è±¡&lt;/strong>ï¼Œæ˜¯åˆ‡ç‰‡ç±»å‹çš„&lt;code>*Section&lt;/code>å¯¹è±¡ï¼Œ&lt;code>SectionStrings()&lt;/code>æ–¹æ³•è·å–æ‰€æœ‰&lt;strong>åˆ†åŒºå&lt;/strong>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to read file: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sections&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sections&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sectionStrings&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SectionStrings&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">sections&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;section%v: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Name&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;sections:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sectionStrings&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡º 3 ä¸ªåˆ†åŒºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">section1: DEFAULT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">section2: mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">section3: redis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sections:&lt;span class="o">[&lt;/span>DEFAULT mysql redis&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è°ƒç”¨&lt;code>GetSection(name)&lt;/code>è·å–æŒ‡å®šåˆ†åŒºï¼Œå¦‚æœåˆ†åŒºä¸å­˜åœ¨ï¼Œä¼šè¿”å›é”™è¯¯ä¿¡æ¯ã€‚è¿”å›çš„åˆ†åŒºä¸º&lt;code>nil&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä½†è°ƒç”¨&lt;code>Section(name)&lt;/code>ä¼šè·å–æŒ‡å®šåˆ†åŒºï¼Œå¦‚æœè¯¥åˆ†åŒº&lt;strong>ä¸å­˜åœ¨&lt;/strong>ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºæŒ‡å®šç©ºåˆ†åŒºå¹¶è¿”å›ï¼š&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to read file: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newSection&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetSection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;new&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">newSection&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SectionStrings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newSection&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;new&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">newSection&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SectionStrings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºä¹‹åè°ƒç”¨&lt;code>SectionStrings&lt;/code>æ–¹æ³•ï¼Œæ–°åˆ†åŒºä¹Ÿä¼šè¿”å›ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">section &lt;span class="s2">&amp;#34;new&amp;#34;&lt;/span> does not exist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;nil&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>DEFAULT mysql redis&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="o">{&lt;/span>0xc000152000 new map&lt;span class="o">[]&lt;/span> &lt;span class="o">[]&lt;/span> map&lt;span class="o">[]&lt;/span> &lt;span class="nb">false&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>DEFAULT mysql redis new&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªæ–°åˆ†åŒºï¼Œå¦‚æœåˆ†åŒºå·²å­˜åœ¨ï¼Œåˆ™è¿”å›å­˜åœ¨çš„åˆ†åŒºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to read file: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SectionStrings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mysqlSection&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewSection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mysqlSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Keys&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SectionStrings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newSection&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewSection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;new&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">newSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Keys&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SectionStrings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>DEFAULT mysql redis&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>127.0.0.1 &lt;span class="m">3306&lt;/span> root &lt;span class="m">123456&lt;/span> awesome&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>DEFAULT mysql redis&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>DEFAULT mysql redis new&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="è¯»å–çˆ¶å­åˆ†åŒº">
&lt;a href="#%e8%af%bb%e5%8f%96%e7%88%b6%e5%ad%90%e5%88%86%e5%8c%ba" class="header-anchor">#&lt;/a>
è¯»å–çˆ¶å­åˆ†åŒº
&lt;/h3>&lt;h4 id="é€’å½’è¯»å–é”®å€¼">
&lt;a href="#%e9%80%92%e5%bd%92%e8%af%bb%e5%8f%96%e9%94%ae%e5%80%bc" class="header-anchor">#&lt;/a>
é€’å½’è¯»å–é”®å€¼
&lt;/h4>&lt;p>åœ¨è·å–æ‰€æœ‰é”®å€¼çš„è¿‡ç¨‹ä¸­ï¼Œç‰¹æ®Šè¯­æ³• &lt;code>%(&amp;lt;name&amp;gt;)s&lt;/code> ä¼šè¢«åº”ç”¨ï¼Œå…¶ä¸­ &lt;code>&amp;lt;name&amp;gt;&lt;/code> å¯ä»¥æ˜¯ç›¸åŒåˆ†åŒºæˆ–è€…é»˜è®¤åˆ†åŒºä¸‹çš„é”®åã€‚å­—ç¬¦ä¸² &lt;code>%(&amp;lt;name&amp;gt;)s&lt;/code> ä¼šè¢«ç›¸åº”çš„é”®å€¼æ‰€æ›¿ä»£ï¼Œå¦‚æœæŒ‡å®šçš„é”®ä¸å­˜åœ¨ï¼Œåˆ™ä¼šç”¨ç©ºå­—ç¬¦ä¸²æ›¿ä»£ï¼ˆæˆ‘æµ‹è¯•æ˜¯ä¿ç•™å­—ç¬¦ä¸²ï¼‰ã€‚æ‚¨å¯ä»¥æœ€å¤šä½¿ç”¨ 99 å±‚çš„é€’å½’åµŒå¥—ã€‚&lt;/p>
&lt;p>åœ¨inié…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å ä½ç¬¦&lt;code>%(name)s&lt;/code>è¡¨ç¤ºç”¨ä¹‹å‰å·²å®šä¹‰çš„é”®&lt;code>name&lt;/code>çš„å€¼æ¥æ›¿æ¢ï¼Œè¿™é‡Œçš„&lt;code>s&lt;/code>è¡¨ç¤ºå€¼ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># parent_child.ini&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">NAME&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">ini&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">VERSION&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">IMPORT_PATH&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">gopkg.in/%(NAME)s.%(VERSION)s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">USERNAME&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">arlettebrook&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[package]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">CLONE_URL&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">https://%(IMPORT_PATH)s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[package.sub]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šé¢åœ¨é»˜è®¤åˆ†åŒºä¸­è®¾ç½®&lt;code>IMPORT_PATH&lt;/code>çš„å€¼æ—¶ï¼Œä½¿ç”¨äº†å‰é¢å®šä¹‰çš„&lt;code>NAME&lt;/code>å’Œ&lt;code>VERSION&lt;/code>ã€‚ åœ¨&lt;code>package&lt;/code>åˆ†åŒºä¸­è®¾ç½®&lt;code>CLONE_URL&lt;/code>çš„å€¼æ—¶ï¼Œä½¿ç”¨äº†é»˜è®¤åˆ†åŒºä¸­å®šä¹‰çš„&lt;code>IMPORT_PATH&lt;/code>ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨åˆ†åŒºåä¸­ä½¿ç”¨&lt;code>.&lt;/code>è¡¨ç¤ºä¸¤ä¸ªæˆ–å¤šä¸ªåˆ†åŒºä¹‹é—´çš„çˆ¶å­å…³ç³»ï¼Œä¾‹å¦‚&lt;code>package.sub&lt;/code>çš„çˆ¶åˆ†åŒºä¸º&lt;code>package&lt;/code>ï¼Œ&lt;code>package&lt;/code>æ²¡æœ‰çˆ¶åˆ†åŒºã€‚ å¦‚æœæŸä¸ªé”®åœ¨å­åˆ†åŒºä¸­ä¸å­˜åœ¨ï¼Œåˆ™ä¼šåœ¨å®ƒçš„çˆ¶åˆ†åŒºä¸­å†æ¬¡æŸ¥æ‰¾ï¼Œ&lt;strong>ç›´åˆ°æ²¡æœ‰çˆ¶åˆ†åŒºä¸ºæ­¢&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;parent_child.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to read file: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Clone url from package.sub:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;package.sub&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;CLONE_URL&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;packageæ²¡æœ‰çˆ¶åˆ†åŒº:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;package&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;USERNAME&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Clone url from package.sub: https://gopkg.in/ini.v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">packageæ²¡æœ‰çˆ¶åˆ†åŒº: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å­åˆ†åŒºä¸­&lt;code>package.sub&lt;/code>ä¸­æ²¡æœ‰é”®&lt;code>CLONE_URL&lt;/code>ï¼Œè¿”å›äº†çˆ¶åˆ†åŒº&lt;code>package&lt;/code>ä¸­çš„å€¼ã€‚&lt;/p>
&lt;p>&lt;code>package&lt;/code>åˆ†åŒºä¸­æ²¡æœ‰&lt;code>USERNAME&lt;/code>,å®ƒå¹¶æ²¡æœ‰çˆ¶åˆ†åŒºï¼Œæ‰€ä»¥è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚ï¼ˆè°ƒç”¨&lt;code>Key&lt;/code>æ–¹æ³•å¦‚æœé”®ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºè¯¥é”®ï¼Œå€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ï¼‰&lt;a class="link" href="#%e6%93%8d%e4%bd%9c%e9%94%aeKey" >åé¢ä¼šä»‹ç»&lt;/a>ã€‚&lt;/p>
&lt;p>â€‹&lt;/p>
&lt;hr>
&lt;h2 id="æ“ä½œé”®key">
&lt;a href="#%e6%93%8d%e4%bd%9c%e9%94%aekey" class="header-anchor">#&lt;/a>
æ“ä½œé”®ï¼ˆKeyï¼‰
&lt;/h2>&lt;h3 id="è·å–é”®">
&lt;a href="#%e8%8e%b7%e5%8f%96%e9%94%ae" class="header-anchor">#&lt;/a>
è·å–é”®
&lt;/h3>&lt;ul>
&lt;li>åœ¨æŒ‡å®šåˆ†åŒºè°ƒç”¨&lt;code>GetKey&lt;/code>æ–¹æ³•ï¼Œå¯ä»¥è·å–æŒ‡å®šçš„é”®ã€‚å¦‚æœé”®ä¸å­˜åœ¨ï¼Œä¼šè¿”å›Errorå¯¹è±¡å’Œnilã€‚
&lt;ul>
&lt;li>å’Œåˆ†åŒºä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è·å–é”®è€Œå¿½ç•¥é”™è¯¯å¤„ç†ï¼Œè°ƒç”¨&lt;code>Key&lt;/code>æ–¹æ³•è·å–æŒ‡å®šçš„é”®ï¼Œå¦‚æœé”®ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºè¯¥é”®ï¼Œå€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to read file: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultSection&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">GetKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name123&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nothingness&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name123&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">nothingness&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">error when getting key of section &lt;span class="s2">&amp;#34;DEFAULT&amp;#34;&lt;/span>: key &lt;span class="s2">&amp;#34;app_name123&amp;#34;&lt;/span> not exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;nil&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é»˜è®¤åˆ†åŒºä¸­ï¼Œä¸å­˜åœ¨&lt;code>app_name123&lt;/code>æ‰€ä»¥GetKyè¿”å›Errorå’Œnilã€‚è€ŒKeyæ–¹æ³•è¿”å›å€¼ä¸ºç©ºå­—ç¬¦ä¸²çš„&lt;code>*Key&lt;/code>ç±»å‹ã€‚&lt;/p>
&lt;h3 id="é”®çš„å…¶ä»–æ“ä½œ">
&lt;a href="#%e9%94%ae%e7%9a%84%e5%85%b6%e4%bb%96%e6%93%8d%e4%bd%9c" class="header-anchor">#&lt;/a>
é”®çš„å…¶ä»–æ“ä½œ
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>åœ¨æŸä¸ªåˆ†åŒºä¸‹ï¼Œè°ƒç”¨&lt;code>HasKey&lt;/code>æ–¹æ³•ï¼Œèƒ½åˆ¤æ–­è¯¥&lt;strong>é”®æ˜¯å¦å­˜åœ¨&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨æŸä¸ªåˆ†åŒºä¸‹ï¼Œè°ƒç”¨&lt;code>NewKey&lt;/code>æ–¹æ³•ï¼Œèƒ½å¤Ÿåœ¨æŒ‡å®šåˆ†åŒºä¸‹åˆ›å»ºé”®ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªï¼šé”®åï¼Œç¬¬äºŒä¸ªï¼šå€¼ã€‚&lt;/p>
&lt;ul>
&lt;li>è¿™ä¸åˆ›å»ºåˆ†åŒºä¸ä¸€æ ·ï¼Œåˆ†åŒºå¦‚æœå­˜åœ¨ï¼Œä¼šè¿”å›å­˜åœ¨çš„åˆ†åŒºã€‚&lt;/li>
&lt;li>é”®å¦‚æœå­˜åœ¨ï¼Œä¼šè¦†ç›–å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>åœ¨æŸä¸ªåˆ†åŒºä¸‹ï¼Œè°ƒç”¨&lt;code>Keys&lt;/code>æ–¹æ³•ï¼Œèƒ½å¤Ÿè·å–æŒ‡å®šåˆ†åŒºä¸‹æ‰€æœ‰çš„&lt;code>*Key&lt;/code>å¯¹è±¡ï¼Œæ˜¯&lt;code>[]*Key&lt;/code>ç±»å‹ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¸&lt;code>SectionStrings&lt;/code>æ–¹æ³•å·®ä¸å¤šï¼Œè°ƒç”¨&lt;code>KeyStrings&lt;/code>æ–¹æ³•ï¼Œèƒ½å¤Ÿè·å–æ‰€æœ‰çš„é”®åï¼Œæ˜¯&lt;code>[]string&lt;/code>ç±»å‹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>åœ¨æŸåˆ†åŒºä¸‹ï¼Œè°ƒç”¨&lt;code>KeysHash&lt;/code>æ–¹æ³•ï¼Œèƒ½å¤Ÿè·å–è¯¥åˆ†åŒºä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹çš„mapé›†åˆã€‚é”®å’Œå€¼çš„ç±»å‹éƒ½ä¸ºstringã€‚&lt;/p>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fail to read file: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">key&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultSection&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">HasKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultSection&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newKey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultSection&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;awesome go&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">newKey&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%#v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Keys&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">KeyStrings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">keysHash&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">KeysHash&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">keysHash&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s=%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">awesome&lt;/span> &lt;span class="nx">web&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">awesome&lt;/span> &lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Key&lt;/span>&lt;span class="p">{(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Key&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="mh">0xc00010a690&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Key&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="mh">0xc00010a700&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">app_name&lt;/span> &lt;span class="nx">log_level&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app_name&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">awesome&lt;/span> &lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">log_level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">DEBUG&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è·å–ä¸Šçº§çˆ¶åˆ†åŒºä¸‹æ‰€æœ‰çš„é”®å¯¹è±¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;package.sub&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ParentKeys&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å½“é”®åä¸º&lt;code>-&lt;/code>è¡¨ç¤ºè‡ªå¢é”®åï¼Œåœ¨ç¨‹åºä¸­æ˜¯ä»#1å¼€å§‹ï¼Œ#numberè¡¨ç¤ºï¼Œåˆ†åŒºä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[features]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">-: Support read/write comments of keys and sections&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">-: Support auto-increment of key names&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">-: Support load multiple files to overwrite key values&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;features&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">KeyStrings&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// []{&amp;#34;#1&amp;#34;, &amp;#34;#2&amp;#34;, &amp;#34;#3&amp;#34;}
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="å¿½ç•¥é”®åçš„å¤§å°å†™">
&lt;a href="#%e5%bf%bd%e7%95%a5%e9%94%ae%e5%90%8d%e7%9a%84%e5%a4%a7%e5%b0%8f%e5%86%99" class="header-anchor">#&lt;/a>
å¿½ç•¥é”®åçš„å¤§å°å†™
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>é»˜è®¤æƒ…å†µä¸‹åˆ†åŒºåå’Œé”®åéƒ½åŒºåˆ†å¤§å°å†™ï¼Œå½“è°ƒç”¨&lt;code>ini.InsensitiveLoad&lt;/code>æ–¹æ³•åŠ è½½é…ç½®æ–‡ä»¶æ—¶ï¼Œèƒ½å¤Ÿå°†æ‰€æœ‰åˆ†åŒºå’Œé”®ååœ¨è¯»å–é‡Œå¼ºåˆ¶è½¬æ¢ä¸º&lt;strong>å°å†™&lt;/strong>ï¼Œè¿™æ ·å½“åœ¨è·å–åˆ†åŒºæˆ–è€…é”®çš„æ—¶å€™ï¼Œæ‰€æŒ‡å®šçš„åˆ†åŒºåæˆ–é”®åä¸åŒºåˆ†å¤§å°å†™ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">InsensitiveLoad&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// sec1 å’Œ sec2 æŒ‡å‘åŒä¸€ä¸ªåˆ†åŒºå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">sec1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetSection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Section&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">sec2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetSection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SecTIOn&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// key1 å’Œ key2 æŒ‡å‘åŒä¸€ä¸ªé”®å¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">key1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sec1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Key&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">key2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sec2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;KeY&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ä¸ºä»€ä¹ˆåœ¨åŠ è½½çš„æ—¶å€™å¼€å¯è½¬æ¢ä¸ºå°å†™ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™å°±èƒ½å¿½ç•¥å¤§å°ï¼Ÿ
&lt;ul>
&lt;li>å› ä¸ºåœ¨è°ƒç”¨çš„æ—¶å€™ä¼šåˆ¤æ–­æ˜¯å¦å¼€å¯è½¬æ¢ä¸ºå°å†™ï¼Œæ˜¯ä¼šå°†æŸ¥è¯¢çš„åˆ†åŒºåæˆ–é”®åå¼ºåˆ¶è½¬æ¢ä¸ºå°å†™ã€‚éƒ½è½¬æ¢ä¸ºå°å†™äº†ï¼Œä¹Ÿå°±èƒ½å¤Ÿè·å–äº†ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>â€‹&lt;/p>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="æ“ä½œé”®å€¼value">
&lt;a href="#%e6%93%8d%e4%bd%9c%e9%94%ae%e5%80%bcvalue" class="header-anchor">#&lt;/a>
æ“ä½œé”®å€¼ï¼ˆValueï¼‰
&lt;/h2>&lt;p>è·å–ä¸€ä¸ªç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼ˆstringï¼‰çš„å€¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">val&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;key name&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è·å–å€¼çš„åŒæ—¶é€šè¿‡è‡ªå®šä¹‰å‡½æ•°è¿›è¡Œå¤„ç†éªŒè¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">val&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;key name&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Validate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">in&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">in&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;default&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæ‚¨ä¸éœ€è¦ä»»ä½•å¯¹å€¼çš„è‡ªåŠ¨è½¬å˜åŠŸèƒ½ï¼ˆä¾‹å¦‚é€’å½’è¯»å–ï¼‰ï¼Œå¯ä»¥ç›´æ¥è·å–åŸå€¼ï¼ˆè¿™ç§æ–¹å¼æ€§èƒ½æœ€ä½³ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">val&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;key name&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Value&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ¤æ–­æŸä¸ªåŸå€¼æ˜¯å¦å­˜åœ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">yes&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">HasValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;test value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è·å–å…¶å®ƒç±»å‹çš„å€¼è°ƒç”¨å¯¹åº”ç±»å‹çš„æ–¹æ³•ã€‚è¿”å›å€¼å¸¦æœ‰Errorä¿¡æ¯ï¼Œå¦‚æœä¸éœ€è¦Errorä¿¡æ¯å¯ä»¥è°ƒç”¨&lt;a class="link" href="#%60Must*%60%e4%be%bf%e6%8d%b7%e6%96%b9%e6%b3%95" >MustXxx&lt;/a>æ–¹æ³•ã€‚è¯¥æ–¹æ³•å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œç”¨äºè½¬æ¢å¤±è´¥çš„é»˜è®¤å€¼ã€‚æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼ä¸ºå¯¹åº”ç±»å‹çš„é›¶å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;INT&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;TIME&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">TimeFormat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC3339&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;TIME&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Time&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// RFC3339
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;INT&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">MustInt&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;INT&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">MustInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;TIME&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">MustTimeFormat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC3339&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;TIME&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">MustTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1">// RFC3339
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>&lt;code>&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&lt;/code>åŒ…è£¹çš„å¤šè¡Œå­—ç¬¦ä¸²è·Ÿæ™®é€šçš„è·å–æ–¹å¼ä¸€æ ·ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>\&lt;/code>ï¼šä¸€è¡Œå†™ä¸ä¸‹æ¢è¡Œå†™ï¼Œä¹Ÿæ˜¯è·Ÿæ™®é€šçš„è·å–æ–¹å¼ä¸€æ ·ï¼Œåªä¸è¿‡å±æ€§&lt;code>IgnoreContinuation&lt;/code>ï¼Œå¯ä»¥å¿½ç•¥è¿ç»­æ¢è¡Œã€‚å°±æ˜¯\ä¸èµ·ä½œç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é»˜è®¤æƒ…å†µä¸‹å­—ç¬¦ä¸²ä¸­åªæœ‰ä¸¤ç«¯æœ‰å¼•å·ï¼Œæ— è®ºæ˜¯å•ã€åŒã€ä¸‰ï¼Œéƒ½ä¼šè‡ªåŠ¨å‰”é™¤ã€‚ä½†å½“å­—ç¬¦ä¸²é‡Œé¢æœ‰ä¸ä¸¤ç«¯ç›¸åŒçš„å¼•å·ï¼Œé‚£ä¹ˆå¼•å·éƒ½ä¼šä¿ç•™ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>UnescapeValueDoubleQuotes&lt;/code>å±æ€§ä¼šç§»é™¤ä¸¤ç«¯çš„åŒå¼•å·ï¼Œåªèƒ½æ˜¯åŒå¼•å·ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è·å–å€¼çš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šå€™é€‰ã€‚å¦‚æœé…ç½®æ–‡ä»¶ä¸­çš„å€¼ä¸æ˜¯å€™é€‰ä¸­çš„å€¼ï¼Œé‚£ä¹ˆå°†é€‰ç”¨é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼å¯ä»¥ä¸æ˜¯å€™é€‰é‡Œé¢çš„å€¼ã€‚stringç±»å‹æ˜¯&lt;code>In&lt;/code>æ–¹æ³•ï¼Œå…¶ä»–çš„æ˜¯&lt;code>InXxx&lt;/code>æ–¹æ³•&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;STRING&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">In&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;default&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;str&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;arr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;types&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;INT&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">InInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>éªŒè¯è·å–çš„å€¼æ˜¯å¦åœ¨æŒ‡å®šèŒƒå›´å†…ï¼šæœ‰ä¸‰ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªï¼šæ²¡æœ‰åœ¨èŒƒå›´å†…çš„é»˜è®¤å€¼ã€‚ç¬¬äºŒä¸ªï¼šæœ€å°å€¼ã€‚ç¬¬ä¸‰ä¸ªï¼šæœ€å¤§å€¼ã€‚stringç±»å‹æ²¡æœ‰èŒƒå›´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vals&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;FLOAT64&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">RangeFloat64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vals&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;INT&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">RangeInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vals&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;TIME&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">RangeTimeFormat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC3339&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">minTime&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">maxTime&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vals&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;TIME&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">RangeTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">minTime&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">maxTime&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// RFC3339
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è‡ªåŠ¨åˆ†å‰²é”®å€¼åˆ°åˆ‡ç‰‡ï¼ˆsliceï¼‰ã€‚ä½œç”¨ï¼šè·å–ä¸€ä¸ªé”®çš„å¤šä¸ªå€¼ã€‚æ–¹æ³•æ˜¯å¯¹åº”ç±»å‹åŠ sï¼Œå¹¶æŒ‡å®šåˆ†éš”ç¬¦ã€‚&lt;/p>
&lt;ul>
&lt;li>å½“å­˜åœ¨æ— æ•ˆè¾“å…¥æ—¶ï¼Œä½¿ç”¨é›¶å€¼ä»£æ›¿ã€‚&lt;/li>
&lt;li>æ³¨æ„åˆ†éš”ç¬¦ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œä¼šå‡ºç°æ­»å¾ªç¯ã€‚å¯ä»¥ä¸ºç©ºæ ¼ã€‚&lt;/li>
&lt;li>å½“åœ¨å‰é¢åŠ ä¸Š&lt;code>ValidXxxs&lt;/code>ï¼Œå­˜åœ¨æ— æ•ˆè¾“å…¥æ—¶ï¼Œä¼šå¿½ç•¥æ‰ã€‚&lt;/li>
&lt;li>å½“åœ¨å‰é¢åŠ ä¸Š&lt;code>StrictXxxs&lt;/code>ï¼Œå­˜åœ¨æ— æ•ˆè¾“å…¥æ—¶ï¼Œç›´æ¥è¿”å›é”™è¯¯ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vals&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;INTS&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Ints&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;,&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vals&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;INTS&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ValidInts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;,&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vals&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;INTS&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">StrictInts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;,&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¿®æ”¹é”®çš„å€¼ï¼Œè°ƒç”¨&lt;code>SetValue&lt;/code>æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">username&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">username&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Mark&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åœ¨æŸåˆ†åŒºä¸‹è°ƒç”¨&lt;code>NewBooleanKey&lt;/code>æ–¹æ³•ï¼Œä¼šåˆ›å»ºå¸ƒå°”é”®ï¼Œå€¼æ°¸è¿œä¸ºtrueã€‚ä¿å­˜æ—¶åªæœ‰é”®åã€‚è§£ææ—¶æ³¨æ„è¦å¼€å¯AllowBooleanKeysï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">key, err :&lt;span class="o">=&lt;/span> sec.NewBooleanKey&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;skip-host-cache&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>é»˜è®¤æƒ…å†µä¸‹åé¢å‡ºç°çš„é”®ä¼šè¦†ç›–å‰é¢å­˜åœ¨çš„é”®ï¼Œå½“å¼€å¯&lt;code>AllowShadows&lt;/code>é…ç½®é€‰é¡¹æ—¶ï¼Œå°±æ˜¯è°ƒç”¨&lt;code>ShadowLoad&lt;/code>åŠ è½½æ•°æ®æºã€‚åå‡ºç°çš„é”®ä¸ä¼šè¦†ç›–å‰é¢çš„å€¼ã€‚è¿˜å¯ä»¥é€šè¿‡&lt;code>ValueWithShadows&lt;/code>æ–¹æ³•è·å–æŒ‡å®šåˆ†åŒºä¸‹é‡å¤é”®çš„æ‰€æœ‰å€¼ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>â€‹&lt;/p>
&lt;hr>
&lt;h2 id="æ“ä½œæ³¨é‡Šcomment">
&lt;a href="#%e6%93%8d%e4%bd%9c%e6%b3%a8%e9%87%8acomment" class="header-anchor">#&lt;/a>
æ“ä½œæ³¨é‡Šï¼ˆCommentï¼‰
&lt;/h2>&lt;p>ä¸‹è¿°å‡ ç§æƒ…å†µçš„å†…å®¹å°†è¢«è§†ä¸ºæ³¨é‡Šï¼š&lt;/p>
&lt;ol>
&lt;li>æ‰€æœ‰ä»¥ &lt;code>#&lt;/code> æˆ– &lt;code>;&lt;/code> å¼€å¤´çš„è¡Œ&lt;/li>
&lt;li>æ‰€æœ‰åœ¨ &lt;code>#&lt;/code> æˆ– &lt;code>;&lt;/code> ä¹‹åçš„å†…å®¹&lt;/li>
&lt;li>åˆ†åŒºæ ‡ç­¾åçš„æ–‡å­— (å³ &lt;code>[åˆ†åŒºå]&lt;/code> ä¹‹åçš„å†…å®¹)&lt;/li>
&lt;/ol>
&lt;p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨åŒ…å« &lt;code>#&lt;/code> æˆ– &lt;code>;&lt;/code> çš„å€¼ï¼Œè¯·ä½¿ç”¨ ``` æˆ– &lt;code>&amp;quot;&amp;quot;&amp;quot;&lt;/code> è¿›è¡ŒåŒ…è¦†ã€‚&lt;/p>
&lt;p>é™¤æ­¤ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡ &lt;a class="link" href="https://gowalker.org/gopkg.in/ini.v1#LoadOptions" target="_blank" rel="noopener"
>LoadOptions&lt;/a> å®Œå…¨å¿½ç•¥è¡Œå†…æ³¨é‡Šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadSources&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LoadOptions&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IgnoreInlineComment&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="s">&amp;#34;app.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è¦æ±‚æ³¨é‡Šç¬¦å·å‰å¿…é¡»å¸¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadSources&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LoadOptions&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SpaceBeforeInlineComment&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="s">&amp;#34;app.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨åˆ†åŒºæˆ–è€…é”®ä¸Šè°ƒç”¨&lt;code>Comment&lt;/code>å±æ€§ï¼Œä¼šè·å–è¯¥åˆ†åŒºæˆ–è€…é”®çš„æ‰€æœ‰æ³¨é‡Šï¼ˆèƒ½è·å–å¤´ä¸Šå’Œåè¾¹çš„ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">Comment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;log_level&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">Comment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;&lt;/span> &lt;span class="nv">database&lt;/span>&lt;span class="o">=&lt;/span>mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># possible values: DEBUG, INFO, WARNING, ERROR, FATAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è¿™ä¹Ÿæ˜¯æ³¨é‡Š&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ä¿å­˜é…ç½®">
&lt;a href="#%e4%bf%9d%e5%ad%98%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
ä¿å­˜é…ç½®
&lt;/h2>&lt;p>å°†é…ç½®ä¿å­˜åˆ°æŸä¸ªæ–‡ä»¶ï¼Œè°ƒç”¨&lt;code>SaveTo&lt;/code>æˆ–&lt;code>SaveToIndent&lt;/code>ï¼Œç¬¬äºŒä¸ªæ–¹æ³•å¤šä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šåˆ†åŒºä¸‹é”®çš„ç¼©è¿›ï¼ˆé™¤é»˜è®¤åˆ†åŒºï¼‰ï¼Œå¯ä»¥æ˜¯&lt;code>\t&lt;/code>ç­‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SaveTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SaveToIndent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;\t&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿˜å¯ä»¥å†™å…¥åˆ°ä»»ä½•å®ç° &lt;code>io.Writer&lt;/code> æ¥å£çš„å¯¹è±¡ä¸­ï¼Œä¹Ÿæ˜¯æä¾›äº†ä¸¤ä¸ªæ–¹æ³•&lt;code>WriteTo&lt;/code>ã€&lt;code>WriteToIndent&lt;/code>ï¼šç¬¬äºŒä¸ªå¯ä»¥æŒ‡å®šåˆ†åŒºä¸‹é”®çš„ç¼©è¿›ï¼ˆé™¤é»˜è®¤åˆ†åŒºï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">// ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cfg.WriteTo(writer)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cfg.WriteToIndent(writer, &amp;#34;\t&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç©ºæ ¼å°†è¢«ç”¨äºå¯¹é½é”®å€¼ä¹‹é—´çš„ç­‰å·ä»¥ç¾åŒ–è¾“å‡ºç»“æœï¼Œä»¥ä¸‹ä»£ç å¯ä»¥ç¦ç”¨è¯¥åŠŸèƒ½ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PrettyFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ç¨‹åºç”Ÿæˆå‰é¢ä½¿ç”¨çš„é…ç½®æ–‡ä»¶&lt;code>my.ini&lt;/code>å¹¶ä¿å­˜ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Empty&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultSection&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;awesome web&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;log_level&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;DEBUG&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mysqlSection&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewSection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;new mysql section failed:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mysqlSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mysqlSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;3306&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mysqlSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;root&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mysqlSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;123456&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mysqlSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;database&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">redisSection&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewSection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;new redis section failed:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">redisSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">redisSection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;6381&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SaveTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SaveTo failed: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SaveToIndent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my-pretty.ini&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;\t&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SaveToIndent failed: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteToIndent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;\t&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºï¼Œç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶&lt;code>my.ini&lt;/code>å’Œ&lt;code>my-pretty.ini&lt;/code>ï¼ŒåŒæ—¶æ§åˆ¶å°è¾“å‡ºæ–‡ä»¶å†…å®¹ã€‚&lt;/p>
&lt;p>&lt;code>my.ini&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">app_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">awesome web&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">log_level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">DEBUG&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[mysql]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">root&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">123456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">database&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">awesome&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[redis]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">6381&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>my-pretty.ini&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">app_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">awesome web&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">log_level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">DEBUG&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[mysql]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> port = 3306
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> user = root
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> password = 123456
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> database = awesome&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[redis]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> port = 6381&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>*Indent&lt;/code>æ–¹æ³•ä¼šå¯¹é»˜è®¤åˆ†åŒºä»¥å¤–åˆ†åŒºä¸‹çš„é”®å¢åŠ ç¼©è¿›ï¼Œçœ‹èµ·æ¥ç¾è§‚ä¸€ç‚¹ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="åˆ†åŒºä¸ç»“æ„ä½“å­—æ®µæ˜ å°„">
&lt;a href="#%e5%88%86%e5%8c%ba%e4%b8%8e%e7%bb%93%e6%9e%84%e4%bd%93%e5%ad%97%e6%ae%b5%e6%98%a0%e5%b0%84" class="header-anchor">#&lt;/a>
åˆ†åŒºä¸ç»“æ„ä½“å­—æ®µæ˜ å°„
&lt;/h2>&lt;h3 id="æ˜ å°„åˆ°ç»“æ„ä½“">
&lt;a href="#%e6%98%a0%e5%b0%84%e5%88%b0%e7%bb%93%e6%9e%84%e4%bd%93" class="header-anchor">#&lt;/a>
æ˜ å°„åˆ°ç»“æ„ä½“
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>è°ƒç”¨&lt;code>MapTo&lt;/code>å‡½æ•°æˆ–è€…æ–¹æ³•ï¼Œå¯ä»¥å°†æ–‡ä»¶å¯¹è±¡æ˜ å°„åˆ°ç»“æ„ä½“ã€‚&lt;/p>
&lt;ul>
&lt;li>å½“MapToä¸ºæ–¹æ³•æ—¶ï¼Œå¯¹è±¡æ˜¯æ–‡ä»¶å¯¹è±¡æˆ–åˆ†åŒºï¼Œå‚æ•°æ˜¯è¦æ˜ å°„çš„ç»“æ„ä½“ã€‚&lt;/li>
&lt;li>ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œç›´æ¥å°†MapToå°è£…æˆäº†å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼šç»“æ„ä½“ã€‚ç¬¬äºŒä¸ªï¼šæ•°æ®æºã€‚&lt;/li>
&lt;li>å½“å¯¹è±¡ä¸ºåˆ†åŒºæ—¶ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªåˆ†åŒº&lt;/li>
&lt;li>åˆ›å»ºç»“æ„ä½“çš„æ—¶å€™å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œå¦‚æœæ•°æ®æºæ²¡æœ‰æˆ–ç±»å‹è§£æé”™è¯¯å°†ä½¿ç”¨é»˜è®¤å€¼&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AppName&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;app_name&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LogLevel&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;log_level&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MySQL&lt;/span> &lt;span class="nx">MySQLConfig&lt;/span> &lt;span class="s">`ini:&amp;#34;mysql&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Redis&lt;/span> &lt;span class="nx">RedisConfig&lt;/span> &lt;span class="s">`ini:&amp;#34;redis&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">MySQLConfig&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;ip&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`ini:&amp;#34;port&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">User&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;user&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Password&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;password&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Database&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;database&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">RedisConfig&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;ip&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`ini:&amp;#34;port&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;load my.ini failed: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assertMapToError&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">e&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;MapTo error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Config&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MapTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">c1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertMapToError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Config&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MapTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;my.ini&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertMapToError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">MySQLConfig&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">MapTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertMapToError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>MapTo&lt;/code>å†…éƒ¨ä½¿ç”¨äº†åå°„ï¼Œ&lt;strong>æ‰€ä»¥ç»“æ„ä½“å­—æ®µå¿…é¡»éƒ½æ˜¯å¯¼å‡ºçš„&lt;/strong>ã€‚å¦‚æœé”®åä¸å­—æ®µåä¸ç›¸åŒï¼Œé‚£ä¹ˆéœ€è¦åœ¨ç»“æ„æ ‡ç­¾ä¸­æŒ‡å®šå¯¹åº”çš„é”®åã€‚ è¿™ä¸€ç‚¹ä¸ Go æ ‡å‡†åº“&lt;code>encoding/json&lt;/code>å’Œ&lt;code>encoding/xml&lt;/code>ä¸åŒã€‚æ ‡å‡†åº“&lt;code>json/xml&lt;/code>è§£ææ—¶å¯ä»¥å°†é”®å&lt;code>app_name&lt;/code>å¯¹åº”åˆ°å­—æ®µå&lt;code>AppName&lt;/code>ã€‚è€Œ&lt;code>go-ini&lt;/code>éœ€è¦[è‡ªå®šä¹‰é”®åæ˜ å°„å™¨](#é”®åæ˜ å°„å™¨ï¼ˆName Mapperï¼‰)æ‰èƒ½å®ç°è¿™ç§æ•ˆæœã€‚&lt;/p>
&lt;p>è¿è¡Œç¨‹åºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="o">{&lt;/span>awesome web DEBUG &lt;span class="o">{&lt;/span>127.0.0.1 &lt;span class="m">3306&lt;/span> root &lt;span class="m">123456&lt;/span> awesome&lt;span class="o">}&lt;/span> &lt;span class="o">{&lt;/span>127.0.0.1 6381&lt;span class="o">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="o">{&lt;/span>awesome web DEBUG &lt;span class="o">{&lt;/span>127.0.0.1 &lt;span class="m">3306&lt;/span> root &lt;span class="m">123456&lt;/span> awesome&lt;span class="o">}&lt;/span> &lt;span class="o">{&lt;/span>127.0.0.1 6381&lt;span class="o">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="o">{&lt;/span>127.0.0.1 &lt;span class="m">3306&lt;/span> root &lt;span class="m">123456&lt;/span> awesome&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="ä»ç»“æ„ä½“åå°„">
&lt;a href="#%e4%bb%8e%e7%bb%93%e6%9e%84%e4%bd%93%e5%8f%8d%e5%b0%84" class="header-anchor">#&lt;/a>
ä»ç»“æ„ä½“åå°„
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>æˆ‘ä»¬å¯ä»¥è°ƒç”¨&lt;code>ReflectFrom&lt;/code>å‡½æ•°æˆ–æ–¹æ³•ï¼Œå°†ç»“æ„ä½“åå°„æˆæ–‡ä»¶å¯¹è±¡ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å½“ä¸ºæ–¹æ³•æ—¶ï¼Œå¯¹è±¡æ˜¯åå°„åˆ°çš„æ–‡ä»¶å¯¹è±¡æˆ–åˆ†åŒºï¼Œå‚æ•°æ˜¯ç»“æ„ä½“ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œå°†å…¶å°è£…æˆäº†å‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªï¼šåå°„åˆ°çš„æ–‡ä»¶å¯¹è±¡ï¼Œç¬¬äºŒä¸ªï¼šç»“æ„ä½“&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å½“å¯¹è±¡ä¸ºåˆ†åŒºæ—¶ï¼Œåå°„åˆ°åˆ†åŒºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„å½“ç»“æ„ä½“å­—æ®µä¸é…ç½®é”®ä¸åŒåæ—¶éœ€è¦ç”¨ç»“æ„ä½“æ ‡ç­¾æŒ‡å®šã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ”¯æŒçš„æ ‡ç­¾ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>iniï¼šæŒ‡å®šé”®åï¼Œæˆ–è€…åˆ†åŒºåã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æœ‰ç¬¬äºŒä¸ªå‚æ•°omitemptyï¼Œç”¨&lt;code>ï¼Œ&lt;/code>åˆ†éš”å¼€ã€‚å€¼ä¸ºç©ºæ—¶ï¼Œçœç•¥æ‰ï¼Œä¸å†™å…¥æ–‡ä»¶å¯¹è±¡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœ‰ç¬¬ä¸‰å‚æ•°allowshadowï¼Œå¦‚æœä¸éœ€è¦å‰ä¸¤ä¸ªæ ‡ç­¾è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>ini:&amp;quot;,,allowshadow&amp;quot;&lt;/code> è¿›è¡Œç®€å†™ã€‚&lt;/p>
&lt;ul>
&lt;li>ä½œç”¨ï¼šå°†ä¸€ä¸ªé”®çš„ä¸åŒå€¼åˆ†è¡Œä¿å­˜ï¼Œä¸ç”¨åˆ†éš”ç¬¦åˆ†å¼€ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[IP]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">192.168.31.201&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">192.168.31.211&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">192.168.31.221&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">IP&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Value&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;value,omitempty,allowshadow&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>commentï¼šæŒ‡å®šæ³¨é‡Šï¼Œä¿å­˜åˆ°é…ç½®æ³¨é‡Šä¼šåœ¨é”®çš„å¤´ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>delimï¼šæŒ‡å®šåˆ†éš”ç¬¦ã€‚ä¸€ä¸ªé”®å­˜åœ¨å¤šä¸ªå€¼çš„æƒ…å†µï¼Œéœ€è¦æŒ‡å®šåˆ†éš”ç¬¦ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Embeded&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Dates&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span> &lt;span class="s">`delim:&amp;#34;|&amp;#34; comment:&amp;#34;Time data&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Places&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;places,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">None&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="s">`ini:&amp;#34;,omitempty&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Embeded&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;HangZhou&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Boston&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; Embeded section&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Embeded]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; Time data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Dates&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">2015-08-07T22:14:22+08:00|2015-08-07T22:14:22+08:00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">places&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">HangZhou,Boston&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AppName&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;app_name&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LogLevel&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;log_level&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MySQL&lt;/span> &lt;span class="nx">MySQLConfig&lt;/span> &lt;span class="s">`ini:&amp;#34;mysql&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Redis&lt;/span> &lt;span class="nx">RedisConfig&lt;/span> &lt;span class="s">`ini:&amp;#34;redis&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">MySQLConfig&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;ip&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`ini:&amp;#34;port&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">User&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;user&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Password&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;password&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Database&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;database&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">RedisConfig&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;ip&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`ini:&amp;#34;port&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Empty&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AppName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;awesome web&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LogLevel&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;DEBUG&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MySQL&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">MySQLConfig&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3306&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">User&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;root&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123456&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Database&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Redis&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">RedisConfig&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">6381&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assertReflectError&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">e&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Reflect error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReflectFrom&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">c1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertReflectError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AppName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;awesome go&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Empty&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReflectFrom&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">c2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertReflectError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">MySQLConfig&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg3&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Empty&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ReflectFrom&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertReflectError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">awesome go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localhost
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="æ˜ å°„åå°„çš„å…¶å®ƒè¯´æ˜">
&lt;a href="#%e6%98%a0%e5%b0%84%e5%8f%8d%e5%b0%84%e7%9a%84%e5%85%b6%e5%ae%83%e8%af%b4%e6%98%8e" class="header-anchor">#&lt;/a>
æ˜ å°„/åå°„çš„å…¶å®ƒè¯´æ˜
&lt;/h3>&lt;p>ä»»ä½•åµŒå…¥çš„ç»“æ„éƒ½ä¼šè¢«é»˜è®¤è®¤ä½œä¸€ä¸ªä¸åŒçš„åˆ†åŒºï¼Œå¹¶ä¸”ä¸ä¼šè‡ªåŠ¨äº§ç”Ÿæ‰€è°“çš„çˆ¶å­åˆ†åŒºå…³è”ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Child&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Age&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Parent&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Child&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">City&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Parent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">City&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">Boston&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Parent]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">Unknwon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Child]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">21&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœéœ€è¦æŒ‡å®šåµŒå…¥ç»“æ„ä½“æ˜¯åŒä¸€ä¸ªåˆ†åŒºï¼Œéœ€è¦æŒ‡å®šæ ‡ç­¾æŒ‡å®šåˆ†åŒºåå¦‚ï¼šini:&amp;ldquo;Parent&amp;rdquo;ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Child&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Age&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Parent&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Child&lt;/span> &lt;span class="s">`ini:&amp;#34;Parent&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">City&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Parent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">City&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">Boston&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Parent]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">Unknwon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">21&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è‡ªå®šä¹‰é”®åå’Œé”®å€¼æ˜ å°„å™¨">
&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e9%94%ae%e5%90%8d%e5%92%8c%e9%94%ae%e5%80%bc%e6%98%a0%e5%b0%84%e5%99%a8" class="header-anchor">#&lt;/a>
è‡ªå®šä¹‰é”®åå’Œé”®å€¼æ˜ å°„å™¨
&lt;/h3>&lt;h4 id="é”®åæ˜ å°„å™¨name-mapper">
&lt;a href="#%e9%94%ae%e5%90%8d%e6%98%a0%e5%b0%84%e5%99%a8name-mapper" class="header-anchor">#&lt;/a>
é”®åæ˜ å°„å™¨ï¼ˆName Mapperï¼‰
&lt;/h4>&lt;p>å½“æˆ‘ä»¬åˆ©ç”¨ç»“æ„ä½“æ ‡ç­¾æŒ‡å®šé”®åæ—¶ï¼Œä¼šè§‰å¾—å¤ªéº»çƒ¦ã€‚ä¸ºäº†èŠ‚çœæ—¶é—´å¹¶ç®€åŒ–ä»£ç ï¼Œ&lt;code>go-ini&lt;/code>åº“æ”¯æŒç±»å‹ä¸º &lt;a class="link" href="https://gowalker.org/gopkg.in/ini.v1#NameMapper" target="_blank" rel="noopener"
>&lt;code>NameMapper&lt;/code>&lt;/a> çš„åç§°æ˜ å°„å™¨ï¼Œè¯¥æ˜ å°„å™¨è´Ÿè´£&lt;strong>ç»“æ„å­—æ®µå&lt;/strong>ä¸&lt;strong>åˆ†åŒºå&lt;/strong>å’Œ&lt;strong>é”®å&lt;/strong>ä¹‹é—´çš„&lt;strong>æ˜ å°„&lt;/strong>ã€‚&lt;/p>
&lt;p>ç›®å‰æœ‰ 2 æ¬¾å†…ç½®çš„æ˜ å°„å™¨ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>AllCapsUnderscore&lt;/code>ï¼šè¯¥æ˜ å°„å™¨å°†å­—æ®µåè½¬æ¢è‡³æ ¼å¼ &lt;code>ALL_CAPS_UNDERSCORE&lt;/code> åå†å»åŒ¹é…åˆ†åŒºåå’Œé”®åã€‚&lt;/li>
&lt;li>&lt;code>TitleUnderscore&lt;/code>ï¼šè¯¥æ˜ å°„å™¨å°†å­—æ®µåè½¬æ¢è‡³æ ¼å¼ &lt;code>title_underscore&lt;/code> åå†å»åŒ¹é…åˆ†åŒºåå’Œé”®åã€‚&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨æ–¹æ³•ï¼šåªéœ€è¦å°†æ˜ å°„&lt;code>MapTo&lt;/code>ã€åå°„&lt;code>ReflectFrom&lt;/code>&lt;strong>å‡½æ•°&lt;/strong>åé¢åŠ ä¸Š&lt;code>WithMapper&lt;/code>ï¼Œä¼ æƒ¨æ—¶ï¼Œä¼ å…¥å¯¹åº”æ˜ å°„å™¨å³å¯ã€‚æˆ–è€…ç»™æŒ‡å®šçš„æ–‡ä»¶å¯¹è±¡æŒ‡å®šæ˜ å°„å™¨ã€‚å±æ€§æ˜¯ &lt;code>NameMapper&lt;/code>ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Info&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PackageName&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MapToWithMapper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Info&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TitleUnderscore&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;package_name=ini&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;PACKAGE_NAME=ini&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">info&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Info&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NameMapper&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">AllCapsUnderscore&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MapTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">info&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReflectFromWithMapper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Info&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TitleUnderscore&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é”®å€¼æ˜ å°„å™¨value-mapper">
&lt;a href="#%e9%94%ae%e5%80%bc%e6%98%a0%e5%b0%84%e5%99%a8value-mapper" class="header-anchor">#&lt;/a>
é”®å€¼æ˜ å°„å™¨ï¼ˆValue Mapperï¼‰
&lt;/h3>&lt;p>å€¼æ˜ å°„å™¨å…è®¸ä½¿ç”¨ä¸€ä¸ª&lt;strong>è‡ªå®šä¹‰å‡½æ•°&lt;/strong>è‡ªåŠ¨å±•å¼€å€¼çš„å…·ä½“å†…å®¹ï¼Œä¾‹å¦‚åœ¨è¿è¡Œæ—¶è·å–ç¯å¢ƒå˜é‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/ini.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Env&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Foo&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`ini:&amp;#34;foo&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ini&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;[env]\nfoo = ${USERNAME}\n&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ValueMapper&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ExpandEnv&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">env&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Env&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Section&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;env&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">MapTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">env&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">env&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="o">{&lt;/span>Lenovo&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¼šè¾“å‡ºä½ ç”µè„‘çš„ç”¨æˆ·åã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡ç®€å•ä»‹ç»äº†inié…ç½®æ–‡ä»¶æ ¼å¼ï¼Œå†…å®¹æ¥è‡ªäº’è”ç½‘ï¼Œä»…ä¾›å‚è€ƒã€‚è¿˜ä»‹ç»äº†&lt;code>go-ini&lt;/code>åº“ï¼ŒåŸºæœ¬ä¸Šå‚è€ƒçš„æ˜¯å…¶&lt;a class="link" href="https://ini.unknwon.io/" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡æ¡£&lt;/a>ï¼Œå®˜æ–¹æ–‡æ¡£å†™çš„éå¸¸è¯¦ç»†ï¼Œæ¨èå»çœ‹ï¼Œè€Œä¸”æœ‰ä¸­æ–‡ã€‚ ä½œè€…æ˜¯&lt;a class="link" href="https://github.com/unknwon" target="_blank" rel="noopener"
>æ— é—»&lt;/a>ï¼Œç›¸ä¿¡åš Go å¼€å‘çš„éƒ½ä¸é™Œç”Ÿã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/a123441/article/details/90668032" target="_blank" rel="noopener"
>inié…ç½®æ–‡ä»¶æ ¼å¼&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/go-ini/ini" target="_blank" rel="noopener"
>go-ini&lt;/a> GitHub ä»“åº“&lt;/li>
&lt;li>&lt;a class="link" href="https://ini.unknwon.io/" target="_blank" rel="noopener"
>go-ini&lt;/a> å®˜æ–¹æ–‡æ¡£&lt;/li>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2020/01/15/godailylib/go-ini/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ go-ini&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Carbon Introduction</title><link>https://arlettebrook.github.io/p/carbon-introduction/</link><pubDate>Mon, 13 May 2024 10:19:13 +0800</pubDate><guid>https://arlettebrook.github.io/p/carbon-introduction/</guid><description>&lt;hr>
&lt;h2 id="ç®€ä»‹">
&lt;a href="#%e7%ae%80%e4%bb%8b" class="header-anchor">#&lt;/a>
ç®€ä»‹
&lt;/h2>&lt;p>ä¸€çº¿å¼€å‘äººå‘˜æ¯å¤©éƒ½è¦ä½¿ç”¨æ—¥æœŸå’Œæ—¶é—´ç›¸å…³çš„åŠŸèƒ½ï¼Œå„ç§å®šæ—¶å™¨ï¼Œæ´»åŠ¨æ—¶é—´å¤„ç†ç­‰ã€‚æ ‡å‡†åº“&lt;a class="link" href="https://golang.org/pkg/time" target="_blank" rel="noopener"
>time&lt;/a>ä½¿ç”¨èµ·æ¥ä¸å¤ªçµæ´»ï¼Œç‰¹åˆ«æ˜¯æ—¥æœŸæ—¶é—´çš„åˆ›å»ºå’Œè¿ç®—ã€‚&lt;a class="link" href="https://github.com/uniplaces/carbon" target="_blank" rel="noopener"
>carbon&lt;/a>åº“æ˜¯ä¸€ä¸ªæ—¶é—´æ‰©å±•åº“ï¼ŒåŸºäº PHP çš„&lt;a class="link" href="https://github.com/briannesbitt/carbon" target="_blank" rel="noopener"
>carbon&lt;/a>åº“ç¼–å†™ã€‚æä¾›æ˜“äºä½¿ç”¨çš„æ¥å£ã€‚Goç¤¾åŒºè¿˜æœ‰å¦å¤–ä¸€ä¸ªåŒååº“&lt;a class="link" href="https://github.com/golang-module/carbon" target="_blank" rel="noopener"
>carbon&lt;/a>ï¼Œæˆ‘ç§°ä¹‹ä¸ºå¢å¼ºç‰ˆï¼Œæœ¬æ–‡å°±æ¥ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ªåº“ï¼Œä¸»è¦ä»‹ç»ä½é…ç‰ˆï¼ŒäºŒè€…å·®ä¸å¤šï¼Œä¼šäº†ä½é…ç‰ˆï¼Œå¢å¼ºç‰ˆä¹Ÿå°±ä¼šäº†ã€‚å¢å¼ºç‰ˆç”¨çš„äººæ›´å¤šï¼Œæ¨èä½¿ç”¨å¢å¼ºç‰ˆã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>ç¬¬ä¸‰æ–¹åº“éœ€è¦å…ˆå®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/uniplaces/carbon
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Right now is %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">DateTimeString&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">today&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NowInLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Japan&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Right now in Japan is %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">today&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Tomorrow is %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddDay&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Last week is %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">SubWeek&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nextOlympics&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">August&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Europe/London&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nextOlympics&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">nextOlympics&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddYears&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Next olympics are in %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">nextOlympics&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Year&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">IsWeekend&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Happy time!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>carbon&lt;/code>åº“çš„ä½¿ç”¨å¾ˆä¾¿æ·ï¼Œé¦–å…ˆå®ƒå®Œå…¨å…¼å®¹æ ‡å‡†åº“çš„&lt;code>time.Time&lt;/code>ç±»å‹ï¼Œå®é™…ä¸Šè¯¥åº“çš„æ—¥æœŸæ—¶é—´ç±»å‹&lt;code>Carbon&lt;/code>ç›´æ¥å°†&lt;code>time.Time&lt;/code>å†…åµŒåˆ°ç»“æ„ä¸­ï¼ˆç»§æ‰¿äº†&lt;code>time.Time&lt;/code>ç»“æ„ä½“ï¼‰ï¼Œæ‰€ä»¥&lt;code>time.Time&lt;/code>çš„æ–¹æ³•å¯ç›´æ¥è°ƒç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// github.com/uniplaces/carbon/carbon.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Carbon&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">weekStartsAt&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Weekday&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">weekEndsAt&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Weekday&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">weekendDays&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Weekday&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stringFormat&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Translator&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Translator&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶æ¬¡ï¼Œç®€åŒ–äº†åˆ›å»ºæ“ä½œã€‚æ ‡å‡†åº“&lt;code>time&lt;/code>åˆ›å»ºä¸€ä¸ª&lt;code>Time&lt;/code>å¯¹è±¡ï¼Œå¦‚æœä¸æ˜¯æœ¬åœ°æˆ– UTC &lt;a class="link" href="#%e6%97%b6%e5%8c%ba" >æ—¶åŒº&lt;/a>ï¼Œéœ€è¦è‡ªå·±å…ˆè°ƒç”¨&lt;code>LoadLocation&lt;/code>åŠ è½½å¯¹åº”æ—¶åŒºã€‚ç„¶åå°†è¯¥æ—¶åŒºå¯¹è±¡ä¼ ç»™&lt;code>time.Time.In&lt;/code>æˆ–è€…&lt;code>time.Date&lt;/code>æ–¹æ³•åˆ›å»ºã€‚&lt;code>carbon&lt;/code>å¯ä»¥ç›´æ¥ä¼ æ—¶åŒºåå­—ã€‚åº•å±‚å…¶å®ä¹Ÿæ˜¯ç”¨åŸå§‹æ–¹æ³•åˆ›å»ºçš„ï¼Œ&lt;code>carbon&lt;/code>å¸®æˆ‘ä»¬å°è£…åˆ°äº†&lt;code>NowInLocation&lt;/code>æ–¹æ³•ä¸­ã€‚åªéœ€è¦ä¼ å…¥æ—¶åŒºï¼Œå°±èƒ½è·å–æŒ‡å®šæ—¶åŒºå½“å‰æ—¶é—´ã€‚&lt;/p>
&lt;p>&lt;code>carbon&lt;/code>è¿˜æä¾›äº†å¾ˆå¤šæ–¹æ³•åšæ—¥æœŸè¿ç®—ï¼Œå¦‚ä¾‹å­ä¸­çš„&lt;code>AddDay&lt;/code>ï¼Œ&lt;code>SubWeek&lt;/code>ï¼Œ&lt;code>Addyears&lt;/code>ç­‰ã€‚æ²¡æœ‰sé»˜è®¤+1ï¼Œæœ‰sæŒ‡å®šåŠ å¤šå°‘ï¼Œæ³¨æ„å•ä½ï¼Œéƒ½æ˜¯è§åçŸ¥ä¹‰çš„ã€‚&lt;/p>
&lt;p>ï¼ˆä¸Šé¢çš„æºç å¾ˆç®€å•ï¼Œçœ‹ä¸æ‡‚çš„è¯ï¼Œå»ºè®®å»çœ‹ä¸€ä¸‹æºç ï¼‰&lt;/p>
&lt;p>&lt;code>CreateFromDate&lt;/code>æ–¹æ³•ï¼Œç”¨äºæŒ‡å®šæ—¥æœŸã€æ—¶åŒºåˆ›å»º&lt;code>Carbon&lt;/code>å¯¹è±¡ã€‚æ—¶é—´éƒ¨åˆ†é»˜è®¤æ˜¯å½“å‰æ—¶é—´ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ—¶åŒº(ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œé»˜è®¤ä¸ºUTCæ—¶åŒºã€‚å­—ç¬¦ä¸²ä¸ºLocal,ä¸ºæœ¬åœ°æ—¶åŒºã€‚&lt;/p>
&lt;p>ä¸€ç‚¹ç‚¹æºç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// github.com\uniplaces\carbon\carbon.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">y&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">mon&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Month&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">d&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">location&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Carbon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Clock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ns&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Nanosecond&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">mon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ns&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">location&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">y&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">mon&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Month&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ns&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">location&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Carbon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">location&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">mon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ns&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// time\zoneinfo.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">LoadLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Location&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;UTC&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">UTC&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;Local&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">Local&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// time\time.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">Time&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sec&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">nsec&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">mono&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mono&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="nx">startNano&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sec&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">unixToInternal&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">minWall&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">uint64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">33&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Seconds field overflowed the 33 bits available when
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// storing a monotonic time. This will be true after
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// March 16, 2157.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">Time&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nb">uint64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">nsec&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">sec&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">minWall&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Local&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">Time&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">hasMonotonic&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nb">uint64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="nx">nsecShift&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nb">uint64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">nsec&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">mono&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Local&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="c1">// è¿™é‡Œç”¨æœ¬åœ°æ—¶åŒºã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ€»ç»“ï¼šæ²¡æœ‰æŒ‡å®šæ—¶åŒºæ—¶ï¼Œé»˜è®¤æœ¬åœ°åŒºæ—¶åŒºï¼Œå½“è¦æŒ‡å®šæ—¶åŒºæ—¶ï¼Œé»˜è®¤UTCæ—¶åŒºã€‚ï¼ˆåº•å±‚æºç ç›®å‰çœ‹ä¸æ‡‚ğŸ˜ğŸ˜ğŸ˜ï¼‰&lt;/p>
&lt;h2 id="æ—¶åŒº">
&lt;a href="#%e6%97%b6%e5%8c%ba" class="header-anchor">#&lt;/a>
æ—¶åŒº
&lt;/h2>&lt;p>åœ¨ä»‹ç»å…¶å®ƒå†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¯´ä¸€è¯´è¿™ä¸ªæ—¶åŒºçš„é—®é¢˜ã€‚ä»¥ä¸‹å¼•ç”¨ç»´åŸºç™¾ç§‘çš„æè¿°ï¼š&lt;/p>
&lt;blockquote>
&lt;p>æ—¶åŒºæ˜¯åœ°çƒä¸Šçš„åŒºåŸŸä½¿ç”¨åŒä¸€ä¸ªæ—¶é—´å®šä¹‰ã€‚ä»¥å‰ï¼Œäººä»¬é€šè¿‡è§‚å¯Ÿå¤ªé˜³çš„ä½ç½®ï¼ˆæ—¶è§’ï¼‰å†³å®šæ—¶é—´ï¼Œè¿™å°±ä½¿å¾—ä¸åŒç»åº¦çš„åœ°æ–¹çš„æ—¶é—´æœ‰æ‰€ä¸åŒï¼ˆåœ°æ–¹æ—¶ï¼‰ã€‚1863å¹´ï¼Œé¦–æ¬¡ä½¿ç”¨æ—¶åŒºçš„æ¦‚å¿µã€‚æ—¶åŒºé€šè¿‡è®¾ç«‹ä¸€ä¸ªåŒºåŸŸçš„æ ‡å‡†æ—¶é—´éƒ¨åˆ†åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ ä¸–ç•Œå„å›½ä½äºåœ°çƒä¸åŒä½ç½®ä¸Šï¼Œå› æ­¤ä¸åŒå›½å®¶ï¼Œç‰¹åˆ«æ˜¯ä¸œè¥¿è·¨åº¦å¤§çš„å›½å®¶æ—¥å‡ºã€æ—¥è½æ—¶é—´å¿…å®šæœ‰æ‰€åå·®ã€‚è¿™äº›åå·®å°±æ˜¯æ‰€è°“çš„æ—¶å·®ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä¾‹å¦‚ï¼Œæ—¥æœ¬ä¸œäº¬ä½äºä¸œä¹åŒºï¼ŒåŒ—äº¬ä½äºä¸œå…«åŒºï¼Œæ‰€ä»¥æ—¥æœ¬æ¯”ä¸­å›½å¿«ä¸€ä¸ªå°æ—¶ï¼Œæ—¥æœ¬14:00çš„æ—¶å€™ä¸­å›½13:00ã€‚&lt;/p>
&lt;p>åœ¨ Linux ä¸­ï¼Œæ—¶åŒºä¸€èˆ¬å­˜æ”¾åœ¨ç±»ä¼¼&lt;code>/usr/share/zoneinfo&lt;/code>è¿™æ ·çš„ç›®å½•ã€‚è¿™ä¸ªç›®å½•ä¸­æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œæ¯ä¸ªæ—¶åŒºä¸€ä¸ªæ–‡ä»¶ã€‚æ—¶åŒºæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥æ‰§è¡Œ&lt;code>info tzfile&lt;/code>æŸ¥çœ‹å…·ä½“æ ¼å¼ã€‚&lt;/p>
&lt;p>æ—¶åŒºåç§°çš„ä¸€èˆ¬æ ¼å¼ä¸º&lt;code>city&lt;/code>ï¼Œæˆ–&lt;code>country/city&lt;/code>ï¼Œæˆ–&lt;code>continent/city&lt;/code>ã€‚å³è¦ä¹ˆå°±æ˜¯ä¸€ä¸ªåŸå¸‚åï¼Œè¦ä¹ˆæ˜¯å›½å®¶å+/+åŸå¸‚åï¼Œè¦ä¹ˆæ˜¯æ´²å+/+åŸå¸‚åã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ä¸Šæµ·æ—¶åŒºä¸º&lt;code>Asia/Shanghai&lt;/code>(åœ¨æ—¶åŒºæ–‡ä»¶ä¸­è¡¨ç¤ºä¸œå…«åŒºçš„æ—¶åŒºï¼Œå³åŒ—äº¬æ—¶é—´ï¼‰ï¼Œé¦™æ¸¯æ—¶åŒºä¸º&lt;code>Asia/Hong_Kong&lt;/code>æˆ–è€…&lt;code>Hongkong&lt;/code>ï¼ˆå¸¸è¯†ï¼šä¸­å›½æ ‡å‡†æ—¶é—´ï¼ˆCST)ä¸ºä¸œå…«åŒºæ—¶é—´,èŒƒå›´ä¸­å›½å…¨å¢ƒï¼ˆå¤§é™†ã€æ¸¯æ¾³ã€å°æ¹¾ï¼‰ï¼‰æ„å‘³ç€é¦™æ¸¯æ—¶é—´ä¸åŒ—äº¬æ—¶é—´ä¸€æ ·ï¼Œæ³¨æ„åŒ—äº¬æ—¶é—´å¹¶ä¸æ˜¯åŒ—äº¬çš„åœ°æ–¹æ—¶ï¼Œä¸œå…«åŒºåœ¨ä¸œç»120Â°çš„åœ°æ–¹ï¼ŒåŒ—äº¬åœ¨ä¸œç»116.4Â°ã€‚æ•…ä¸œç»120åº¦åœ°æ–¹æ—¶æ¯”åŒ—äº¬çš„åœ°æ–¹æ—¶æ—©çº¦14åˆ†åŠé’Ÿ(äº†è§£ï¼‰ã€‚è¿˜æœ‰CST,å¯èƒ½ä¸ºå…¶ä»–åœ°åŒºçš„æ ‡å‡†æ—¶é—´ï¼Œå¦‚ç¾å›½ä¸­éƒ¨æ ‡å‡†æ—¶é—´ï¼ˆCentral Standard Timeï¼‰ï¼Œä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„ä¸Šä¸‹æ–‡ã€‚&lt;/p>
&lt;p>ä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šçš„ï¼Œå¦‚ UTCï¼ŒLocalç­‰ã€‚&lt;/p>
&lt;p>Go è¯­è¨€ä¸ºäº†å¯ç§»æ¤æ€§ï¼Œåœ¨å®‰è£…åŒ…ä¸­æä¾›äº†æ—¶åŒºæ–‡ä»¶ï¼Œåœ¨Goå®‰è£…ç›®å½•ä¸‹çš„&lt;code>lib/time/zoneinfo.zip&lt;/code>æ–‡ä»¶ï¼Œå¤§å®¶å¯ä»¥æ‰§è¡Œè§£å‹çœ‹çœ‹ğŸ˜€ã€‚&lt;/p>
&lt;p>ä½¿ç”¨ Go æ ‡å‡†åº“&lt;code>time&lt;/code>åˆ›å»ºæŸä¸ªæ—¶åŒºçš„æ—¶é—´ï¼Œéœ€è¦å…ˆåŠ è½½æ—¶åŒºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">loc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Japan&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;failed to load location: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//t := time.Now().In(loc)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// è¿™é‡Œæ¼”ç¤ºæŒ‡å®šæ—¥æœŸæ—¶é—´åˆ›å»ºTimeå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">d&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2020&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">July&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">24&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">loc&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;The opening ceremony of next olympics will start at %s in Japan\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨&lt;code>carbon&lt;/code>å°±ä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2020&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">July&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">24&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Japan&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;The opening ceremony of next olympics will start at %s in Japan\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="åˆ›å»ºå¯¹è±¡">
&lt;a href="#%e5%88%9b%e5%bb%ba%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
åˆ›å»ºå¯¹è±¡
&lt;/h2>&lt;p>åˆ›å»ºCarbonå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;code>Now&lt;/code>æ–¹æ³•ï¼Œè¿”å›æœ¬åœ°æ—¶åŒºçš„å½“å‰æ—¶é—´å¯¹è±¡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>NewCarbon&lt;/code>æ–¹æ³•ï¼Œè¿”å›æŒ‡å®šæ—¶é—´çš„æœ¬åœ°æ—¶åŒºæ—¶é—´å¯¹è±¡ã€‚&lt;code>Now&lt;/code>æ–¹æ³•æ˜¯åŸºäºå®ƒåˆ›å»ºçš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>CreateFromDate&lt;/code>æ–¹æ³•ï¼Œç”¨äºæŒ‡å®šæ—¥æœŸã€æ—¶åŒºåˆ›å»º&lt;code>Carbon&lt;/code>å¯¹è±¡ã€‚æ—¶é—´éƒ¨åˆ†é»˜è®¤æ˜¯å½“å‰æ—¶é—´ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ—¶åŒº(ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œé»˜è®¤ä¸ºUTCæ—¶åŒºã€‚å­—ç¬¦ä¸²ä¸ºLocal,ä¸ºæœ¬åœ°æ—¶åŒºã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>CrreateFromTime&lt;/code>æ–¹æ³•ä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯æŒ‡å®šæ—¶é—´ã€‚&lt;/li>
&lt;li>æ³¨æ„ï¼Œåˆ›å»ºçš„æ—¥æœŸï¼Œé»˜è®¤ä¸ºå½“å‰æ—¥æœŸã€‚è™½ç„¶æ²¡æœ‰æŒ‡å®šï¼Œä½†ä¸ä¼šæ²¡æœ‰ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>Create&lt;/code>æ–¹æ³•ï¼Œè¿”å›æ ¹æ®æ—¥æœŸã€æ—¶é—´ã€æ—¶åŒºåˆ›å»ºçš„æ—¶é—´å¯¹è±¡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>Parse&lt;/code>æ–¹æ³•ï¼Œè¿”å›æ ¹æ®&lt;a class="link" href="#%e6%a0%bc%e5%bc%8f%e5%8c%96" >æ—¥æœŸæ—¶é—´æ ¼å¼&lt;/a>ã€æŒ‡å®šçš„æ—¶é—´ã€æ—¶åŒºè§£æçš„æ—¶é—´å¯¹è±¡ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewCarbon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;New carbon from time instance: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;New carbon from Now function: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fromDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Europe/London&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Created from date: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fromDate&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fromTime&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Europe/Madrid&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Created from time: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fromTime&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">create&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2024&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Local&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">create&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">parsed&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateFormat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;2000-08-20&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Europe/Berlin&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Parsed time: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">parsed&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">parse&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateTime&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;2024-05-14 22:10:22&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Local&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parse&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timestamp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimestamp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Local&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timestamp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 1970-01-01 07:59:59
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åé¢ä¼šä»‹ç»æ—¶é—´æ ¼å¼åŒ–ã€‚&lt;/p>
&lt;h2 id="æ—¶é—´è¿ç®—">
&lt;a href="#%e6%97%b6%e9%97%b4%e8%bf%90%e7%ae%97" class="header-anchor">#&lt;/a>
æ—¶é—´è¿ç®—
&lt;/h2>&lt;p>ä½¿ç”¨æ ‡å‡†åº“&lt;code>time&lt;/code>çš„æ—¶é—´è¿ç®—éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ª&lt;code>time.Duration&lt;/code>å¯¹è±¡ï¼Œ&lt;code>time&lt;/code>åº“é¢„å®šä¹‰çš„åªæœ‰çº³ç§’åˆ°å°æ—¶çš„ç²¾åº¦ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Nanosecond&lt;/span> &lt;span class="nx">Duration&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Microsecond&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1000&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">Nanosecond&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Millisecond&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1000&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">Microsecond&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Second&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1000&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">Millisecond&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Minute&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">60&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">Second&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Hour&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">60&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">Minute&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶å®ƒçš„æ—¶é•¿å°±éœ€è¦è‡ªå·±ä½¿ç”¨&lt;code>time.ParseDuration&lt;/code>æ„é€ äº†ï¼Œè€Œä¸”&lt;code>time.ParseDuration&lt;/code>ä¸èƒ½æ„é€ å…¶å®ƒç²¾åº¦çš„æ—¶é—´ã€‚ å¦‚æœæƒ³è¦å¢åŠ /å‡å°‘å¹´æœˆæ—¥ï¼Œå°±éœ€è¦ä½¿ç”¨&lt;code>time.Time&lt;/code>çš„&lt;code>AddDate&lt;/code>æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;now is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;one second later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;one minute later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Minute&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;one hour later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Hour&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;3m20s&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;3 minutes and 20 seconds later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2h30m&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2 hours and 30 minutes later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;3 days and 2 hours later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Hour&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ—¶é—´æ“ä½œéƒ½æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒåŸå¯¹è±¡ä¸ä¼šä¿®æ”¹ã€‚&lt;code>carbon&lt;/code>åº“ä¹Ÿæ˜¯å¦‚æ­¤ã€‚&lt;strong>Go çš„æ ‡å‡†åº“ä¹Ÿå»ºè®®æˆ‘ä»¬ä¸è¦ä½¿ç”¨&lt;code>time.Time&lt;/code>çš„æŒ‡é’ˆ&lt;/strong>ã€‚ å½“ç„¶&lt;code>carbon&lt;/code>åº“ä¹Ÿèƒ½ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œå®ƒè¿˜æä¾›äº†å¤šç§ç²’åº¦çš„æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;now is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;one second later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddSecond&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;one minute later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddMinute&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;one hour later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddHour&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;3 minutes and 20 seconds later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddSeconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2 hours and 30 minutes later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;3 days and 2 hours later is:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddDays&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>carbon&lt;/code>è¿˜æä¾›äº†ï¼š&lt;/p>
&lt;ul>
&lt;li>å¢åŠ &lt;strong>å­£åº¦&lt;/strong>çš„æ–¹æ³•ï¼š&lt;code>AddQuarters/AddQuarter&lt;/code>ï¼Œå¤æ•°å½¢å¼ä»‹ç»ä¸€ä¸ªè¡¨ç¤ºå€æ•°çš„å‚æ•°ï¼Œå•æ•°å½¢å¼å€æ•°ä¸º1ï¼›&lt;/li>
&lt;li>å¢åŠ &lt;strong>ä¸–çºª&lt;/strong>çš„æ–¹æ³•ï¼š&lt;code>AddCenturies/AddCentury&lt;/code>ï¼›&lt;/li>
&lt;li>å¢åŠ &lt;strong>å·¥ä½œæ—¥&lt;/strong>çš„æ–¹æ³•ï¼š&lt;code>AddWeekdays/AddWeekday&lt;/code>ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè·³è¿‡éå·¥ä½œæ—¥ï¼›&lt;/li>
&lt;li>å¢åŠ &lt;strong>å‘¨&lt;/strong>çš„æ–¹æ³•ï¼š&lt;code>AddWeeks/AddWeek&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>å…¶å®ç»™ä¸Šé¢æ–¹æ³•ä¼ å…¥è´Ÿæ•°å°±è¡¨ç¤ºå‡å°‘ï¼Œå¦å¤–&lt;code>carbon&lt;/code>ä¹Ÿæä¾›äº†å¯¹åº”çš„&lt;code>Sub*&lt;/code>æ–¹æ³•ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ—¶é—´æ¯”è¾ƒ">
&lt;a href="#%e6%97%b6%e9%97%b4%e6%af%94%e8%be%83" class="header-anchor">#&lt;/a>
æ—¶é—´æ¯”è¾ƒ
&lt;/h2>&lt;p>æ³¨æ„ï¼šæ—¶é—´æ¯”è¾ƒçš„æ˜¯å¿«æ…¢ã€‚&lt;/p>
&lt;p>æ ‡å‡†åº“&lt;code>time&lt;/code>å¯ä»¥ä½¿ç”¨&lt;code>time.Time&lt;/code>å¯¹è±¡çš„&lt;code>Before/After/Equal&lt;/code>åˆ¤æ–­æ˜¯å¦åœ¨å¦ä¸€ä¸ªæ—¶é—´å¯¹è±¡å‰ï¼Œåï¼Œæˆ–ç›¸ç­‰ã€‚&lt;code>carbon&lt;/code>åº“ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ¯”è¾ƒæ—¶é—´ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æä¾›äº†å¤šç»„æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•æä¾›ä¸€ä¸ª&lt;strong>ç®€çŸ­å&lt;/strong>ï¼Œä¸€ä¸ª&lt;strong>è¯¦ç»†å&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Eq/EqualTo&lt;/code>ï¼šæ˜¯å¦ç›¸ç­‰ï¼›ä¸åŒæ—¶åŒºçš„æ—¥æœŸæ—¶é—´ä¸åŒï¼Œä½†æ—¶é—´å¯èƒ½ä¼šç›¸ç­‰ã€‚å¦‚ 6:00 +0200 and 4:00 UTC are Equal.&lt;/li>
&lt;li>&lt;code>Ne/NotEqualTo&lt;/code>ï¼šæ˜¯å¦ä¸ç­‰ï¼›&lt;/li>
&lt;li>&lt;code>Gt/GreaterThan&lt;/code>ï¼šæ˜¯å¦åœ¨ä¹‹åï¼›&lt;/li>
&lt;li>&lt;code>Gte/GreaterThanOrEqualTo&lt;/code>:å¿«æˆ–è€…ç›¸ç­‰ã€‚&lt;/li>
&lt;li>&lt;code>Lt/LessThan&lt;/code>ï¼šæ˜¯å¦åœ¨ä¹‹å‰ï¼›&lt;/li>
&lt;li>&lt;code>Lte/LessThanOrEqualTo&lt;/code>ï¼šæ˜¯å¦ç›¸åŒæˆ–åœ¨ä¹‹å‰ï¼›&lt;/li>
&lt;li>&lt;code>Between&lt;/code>ï¼šæ˜¯å¦åœ¨ä¸¤ä¸ªæ—¶é—´ä¹‹é—´ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦å¤–&lt;code>carbon&lt;/code>æä¾›äº†ï¼š&lt;/p>
&lt;ul>
&lt;li>åˆ¤æ–­å½“å‰æ—¶é—´æ˜¯å‘¨å‡ çš„æ–¹æ³•ï¼š&lt;code>IsMonday/IsTuesday/.../IsSunday&lt;/code>ï¼›&lt;/li>
&lt;li>æ˜¯å¦æ˜¯å·¥ä½œæ—¥ï¼Œå‘¨æœ«ï¼Œé—°å¹´ï¼Œè¿‡å»æ—¶é—´è¿˜æ˜¯æœªæ¥æ—¶é—´ï¼š&lt;code>IsWeekday/IsWeekend/IsLeapYear/IsPast/IsFuture&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2010&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2011&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;t1 equal to t2: %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Eq&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;t1 not equal to t2: %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Ne&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;t1 greater than t2: %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Gt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;t1 less than t2: %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;t1 greater than or equal: %t&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Gte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2011&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;t3 between t1 and t2: %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Between&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Weekday? %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsWeekday&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Weekend? %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsWeekend&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;LeapYear? %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsLeapYear&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Past? %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsPast&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Future? %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsFuture&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ—¶é—´å·®">
&lt;a href="#%e6%97%b6%e9%97%b4%e5%b7%ae" class="header-anchor">#&lt;/a>
æ—¶é—´å·®
&lt;/h2>&lt;p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨&lt;code>carbon&lt;/code>è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´ç›¸å·®å¤šå°‘ç§’ã€åˆ†ã€å°æ—¶ã€å¤©ã€‚&lt;/p>
&lt;p>ç”¨åˆ°çš„æ–¹æ³•æ˜¯&lt;code>func (c *Carbon) DiffInXXX(carb *Carbon, abs bool)&lt;/code>,è¡¨ç¤ºçš„æ˜¯ç›¸å¯¹äºå¯¹è±¡cå¿«äº†è¿˜æ…¢äº†å¤šå°‘XXXã€‚æ­£æ•°è¡¨ç¤ºcæ…¢äº†ï¼Œè´Ÿæ•°è¡¨ç¤ºcå¿«äº†ã€‚åŸç†ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">diff&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Timestamp&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Timestamp&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>absè¡¨ç¤ºæ˜¯å¦å¯ç”¨ç»å¯¹å€¼ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cst&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Today&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hongKong&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Today&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hongkong&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Japan&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Today&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Japan&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cst&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInSeconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">hongKong&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cst&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Japan&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Beijing&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Japan&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Beijing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Beijing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// -1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Beijing&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2012&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;UTC&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInDays&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddMonth&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 31
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInDays&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">SubMonth&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// -31
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2012&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;UTC&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInDays&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddMonth&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 30
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInDays&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddWeek&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 7
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;UTC&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddSeconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">59&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddSeconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddSeconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">119&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddSeconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">120&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">59&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DiffInHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼š&lt;/p>
&lt;ol>
&lt;li>ä¸Šé¢è¾“å‡ºå®Œå…¨æ­£ç¡®ã€‚&lt;/li>
&lt;li>ä¸ç†è§£æ˜¯å› ä¸ºï¼š
&lt;ol>
&lt;li>æ­£æ•°è¡¨ç¤ºcæ…¢äº†ï¼Œè´Ÿæ•°è¡¨ç¤ºcå¿«äº†ã€‚&lt;/li>
&lt;li>å½“åŒ—äº¬æ—¶é—´å’Œä¸œäº¬æ—¶é—´æ•°å­—ç›¸åŒæ—¶ï¼Œå…¶å®åŒ—äº¬æ—¶é—´è¦å¿«ä¸€ä¸ªå°æ—¶ã€‚å³ç›¸åŒæ•°å­—çš„åŒ—äº¬æ—¶é—´å’Œä¸œäº¬æ—¶é—´ï¼ŒåŒ—äº¬æ—¶é—´çš„æ—¶é—´æˆ³è¦å¤§ä¸€ç‚¹ã€‚å› ä¸ºå®é™…åŒ—äº¬æ—¶é—´æ¯”ä¸œäº¬æ—¶é—´æ…¢ä¸€ä¸ªå°æ—¶ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="æ ¼å¼åŒ–">
&lt;a href="#%e6%a0%bc%e5%bc%8f%e5%8c%96" class="header-anchor">#&lt;/a>
æ ¼å¼åŒ–
&lt;/h2>&lt;p>æˆ‘ä»¬çŸ¥é“&lt;code>time.Time&lt;/code>æä¾›äº†ä¸€ä¸ª&lt;code>Format&lt;/code>æ–¹æ³•ï¼Œç›¸æ¯”äºå…¶ä»–ç¼–ç¨‹è¯­è¨€ä½¿ç”¨æ ¼å¼åŒ–ç¬¦æ¥æè¿°æ ¼å¼ï¼ˆéœ€è¦è®°å¿†&lt;code>%d/%m/%h&lt;/code>ç­‰çš„å«ä¹‰ï¼‰ï¼ŒGo æä¾›äº†ä¸€ä¸ªä¸€ç§æ›´ç®€å•ã€ç›´è§‚çš„æ–¹å¼â€”â€”ä½¿ç”¨ layoutã€‚å³æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªæ—¥æœŸå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæˆ‘ä»¬æƒ³è¦æ ¼å¼åŒ–æˆä»€ä¹ˆæ ·å­ã€‚Go ä¼šç”¨å½“å‰çš„æ—¶é—´æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å¯¹åº”éƒ¨åˆ†ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2006-01-02 15:04:05&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šé¢æˆ‘ä»¬åªéœ€è¦ä¼ å…¥ä¸€ä¸ª&lt;code>2006-01-02 15:04:05&lt;/code>è¡¨ç¤ºæˆ‘ä»¬æƒ³è¦çš„æ ¼å¼ä¸º&lt;code>yyyy-mm-dd hh:mm:ss&lt;/code>ï¼Œçœå»äº†æˆ‘ä»¬éœ€è¦è®°å¿†çš„éº»çƒ¦ã€‚&lt;/p>
&lt;p>ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼ŒGo å†…ç½®äº†ä¸€äº›æ ‡å‡†çš„æ—¶é—´æ ¼å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// time/format.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Layout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;01/02 03:04:05PM &amp;#39;06 -0700&amp;#34;&lt;/span> &lt;span class="c1">// The reference time, in numerical order.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ANSIC&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon Jan _2 15:04:05 2006&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UnixDate&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon Jan _2 15:04:05 MST 2006&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RubyDate&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon Jan 02 15:04:05 -0700 2006&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RFC822&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;02 Jan 06 15:04 MST&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RFC822Z&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;02 Jan 06 15:04 -0700&amp;#34;&lt;/span> &lt;span class="c1">// RFC822 with numeric zone
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">RFC850&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Monday, 02-Jan-06 15:04:05 MST&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RFC1123&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon, 02 Jan 2006 15:04:05 MST&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RFC1123Z&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon, 02 Jan 2006 15:04:05 -0700&amp;#34;&lt;/span> &lt;span class="c1">// RFC1123 with numeric zone
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">RFC3339&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;2006-01-02T15:04:05Z07:00&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RFC3339Nano&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;2006-01-02T15:04:05.999999999Z07:00&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Kitchen&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;3:04PM&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Handy time stamps.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Stamp&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Jan _2 15:04:05&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StampMilli&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Jan _2 15:04:05.000&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StampMicro&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Jan _2 15:04:05.000000&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StampNano&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Jan _2 15:04:05.000000000&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DateTime&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;2006-01-02 15:04:05&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DateOnly&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;2006-01-02&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TimeOnly&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;15:04:05&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åé¢ä¸‰ä¸ªæ˜¯åœ¨åé¢ç‰ˆæœ¬åŠ ä¸Šè¿›çš„ã€‚&lt;/p>
&lt;p>é™¤äº†ä¸Šé¢è¿™äº›æ ¼å¼ï¼Œ&lt;code>carbon&lt;/code>è¿˜æä¾›äº†å…¶ä»–ä¸€äº›æ ¼å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// github.com/uniplaces/carbon
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DefaultFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;2006-01-02 15:04:05&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DateFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;2006-01-02&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FormattedDateFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Jan 2, 2006&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TimeFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;15:04:05&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HourMinuteFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;15:04&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HourFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;15&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DayDateTimeFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon, Jan 2, 2006 3:04 PM&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CookieFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Monday, 02-Jan-2006 15:04:05 MST&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RFC822Format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon, 02 Jan 06 15:04:05 -0700&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RFC1036Format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon, 02 Jan 06 15:04:05 -0700&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RFC2822Format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon, 02 Jan 2006 15:04:05 -0700&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RFC3339Format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;2006-01-02T15:04:05-07:00&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RSSFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Mon, 02 Jan 2006 15:04:05 -0700&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ä¸€ç‚¹ï¼Œ&lt;code>time&lt;/code>åº“é»˜è®¤ä½¿ç”¨&lt;code>2006-01-02 15:04:05.999999999 -0700 MST&lt;/code>æ ¼å¼ï¼Œæœ‰ç‚¹å¤æ‚äº†ï¼Œ&lt;code>carbon&lt;/code>åº“é»˜è®¤ä½¿ç”¨æ›´ç®€æ´çš„&lt;code>2006-01-02 15:04:05&lt;/code>ã€‚&lt;/p>
&lt;p>ä½¿ç”¨åªéœ€è¦è°ƒ&lt;code>func (t Time) Format(layout string)&lt;/code>æ–¹æ³•ï¼Œ&lt;code>layout&lt;/code>ä¸ºä¸Šé¢æä¾›çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;p>&lt;code>carbon&lt;/code>ä¸ºäº†è¿›ä¸€æ­¥æ–¹ä¾¿ä½¿ç”¨ï¼Œéƒ½å°†&lt;code>Fomat&lt;/code>æ–¹æ³•å°è£…åˆ°äº†æŒ‡å®š&lt;code>XxxString&lt;/code>æ–¹æ³•ä¸­.&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateTime&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultFormat&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="s">&amp;#34;=&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DateTimeString&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC3339&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC3339Format&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="s">&amp;#34;=&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">RFC3339String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateFormat&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="s">&amp;#34;=&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DateString&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-05-14 11:23:01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-05-14 11:23:01 &lt;span class="o">=&lt;/span> 2024-05-14 11:23:01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-05-14T11:23:01+08:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-05-14T11:23:01+08:00 &lt;span class="o">=&lt;/span> 2024-05-14T11:23:01+08:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-05-14 &lt;span class="o">=&lt;/span> 2024-05-14
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="é«˜çº§ç‰¹æ€§">
&lt;a href="#%e9%ab%98%e7%ba%a7%e7%89%b9%e6%80%a7" class="header-anchor">#&lt;/a>
é«˜çº§ç‰¹æ€§
&lt;/h2>&lt;h3 id="ä¿®é¥°å™¨">
&lt;a href="#%e4%bf%ae%e9%a5%b0%e5%99%a8" class="header-anchor">#&lt;/a>
ä¿®é¥°å™¨
&lt;/h3>&lt;h5 id="boundaryè¾¹ç•Œ">
&lt;a href="#boundary%e8%be%b9%e7%95%8c" class="header-anchor">#&lt;/a>
Boundaryï¼šè¾¹ç•Œ
&lt;/h5>&lt;p>æ‰€è°“ä¿®é¥°å™¨ï¼ˆmodifierï¼‰å°±æ˜¯å¯¹ä¸€äº›ç‰¹å®šçš„æ—¶é—´æ“ä½œï¼Œè·å–&lt;strong>å¼€å§‹&lt;/strong>å’Œ&lt;strong>ç»“æŸ&lt;/strong>æ—¶é—´ã€‚å¦‚å½“å¤©ã€æœˆã€å­£åº¦ã€å¹´ã€åå¹´ã€ä¸–çºªã€å‘¨çš„&lt;strong>å¼€å§‹&lt;/strong>å’Œ&lt;strong>ç»“æŸ&lt;/strong>æ—¶é—´ï¼Œè¿˜èƒ½è·å¾—&lt;strong>ä¸Šä¸€ä¸ª&lt;/strong>å‘¨äºŒã€&lt;strong>ä¸‹ä¸€ä¸ª&lt;/strong>å‘¨ä¸€ã€ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥çš„æ—¶é—´ç­‰ç­‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Start of day:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StartOfDay&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;End of day:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EndOfDay&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Start of month:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StartOfMonth&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;End of month:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EndOfMonth&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Start of year:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StartOfYear&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;End of year:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EndOfYear&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Start of decade:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StartOfDecade&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;End of decade:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EndOfDecade&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Start of century:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StartOfCentury&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;End of century:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EndOfCentury&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Start of week:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StartOfWeek&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;End of week:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EndOfWeek&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Next:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Wednesday&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Previous:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Previous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Wednesday&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è‡ªå®šä¹‰å·¥ä½œæ—¥å’Œå‘¨æœ«">
&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%b7%a5%e4%bd%9c%e6%97%a5%e5%92%8c%e5%91%a8%e6%9c%ab" class="header-anchor">#&lt;/a>
è‡ªå®šä¹‰å·¥ä½œæ—¥å’Œå‘¨æœ«
&lt;/h3>&lt;p>æœ‰äº›åœ°åŒºæ¯å‘¨çš„å¼€å§‹ã€å‘¨æœ«å’Œæˆ‘ä»¬çš„ä¸ä¸€æ ·ã€‚Carboné»˜è®¤æ˜¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewCarbon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Carbon&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wds&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Weekday&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Saturday&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Sunday&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Carbon&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">weekStartsAt&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Monday&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">weekEndsAt&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Sunday&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">weekendDays&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">wds&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stringFormat&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">DefaultFormat&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Translator&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">translator&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¾‹å¦‚ï¼Œåœ¨ç¾å›½å‘¨æ—¥æ˜¯æ–°çš„ä¸€å‘¨å¼€å§‹ã€‚æ²¡å…³ç³»ï¼Œ&lt;code>carbon&lt;/code>å¯ä»¥è‡ªå®šä¹‰æ¯å‘¨çš„å¼€å§‹å’Œå‘¨æœ«ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2020&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mo">02&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetWeekStartsAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Sunday&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetWeekEndsAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Saturday&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetWeekendDays&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Weekday&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Monday&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Tuesday&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Wednesday&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Today is %s, weekend? %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Weekday&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsWeekend&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªåº“ä¸€èˆ¬é»˜è®¤å°±è¡Œã€‚&lt;/p>
&lt;h3 id="æ‰¹é‡ç”Ÿæˆæ—¥æœŸ">
&lt;a href="#%e6%89%b9%e9%87%8f%e7%94%9f%e6%88%90%e6%97%a5%e6%9c%9f" class="header-anchor">#&lt;/a>
æ‰¹é‡ç”Ÿæˆæ—¥æœŸ
&lt;/h3>&lt;p>åˆ©ç”¨&lt;code>Period&lt;/code>æ–¹æ³•ï¼Œå¯ä»¥æ‰¹é‡ç”Ÿæˆæ—¥æœŸï¼Œæ¥æ”¶ä¸‰ä¸ªå‚æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>ç¬¬ä¸€ä¸ªï¼šå¼€å§‹çš„æ—¶é—´ã€‚&lt;/li>
&lt;li>ç¬¬äºŒä¸ªï¼šæ—¥æœŸé—´éš”ã€‚&lt;/li>
&lt;li>ç¬¬ä¸‰ä¸ªï¼šç»“æŸçš„æ—¶é—´ã€‚&lt;/li>
&lt;li>è¿”å›å€¼æ˜¯ä¸€ä¸ªæ—¶é—´å¯¹è±¡åˆ‡ç‰‡ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ•ˆæœä¸ºï¼šä»å¼€å§‹æ—¶é—´æ¯éš”å¤šå°‘å¤©åˆ›å»ºä¸€ä¸ªæ—¶é—´å¯¹è±¡ï¼Œç›´åˆ°ç»“æŸæ—¥æœŸã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/uniplaces/carbon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2012&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;UTC&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2012&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;UTC&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">days&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">periods&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Period&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">days&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">periods&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2012&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2012&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">08&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2012&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2012&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">22&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2012&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">29&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mo">00&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ï¼ˆä¸å¸¸ç”¨ï¼‰&lt;/p>
&lt;hr>
&lt;h2 id="å¢å¼ºç‰ˆä»‹ç»">
&lt;a href="#%e5%a2%9e%e5%bc%ba%e7%89%88%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
å¢å¼ºç‰ˆä»‹ç»
&lt;/h2>&lt;p>ä¸‹è½½ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¢å¼ºç‰ˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go get -u github.com/golang-module/carbon/v2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¢å¼ºç‰ˆåˆ›å»ºå¯¹è±¡">
&lt;a href="#%e5%a2%9e%e5%bc%ba%e7%89%88%e5%88%9b%e5%bb%ba%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
å¢å¼ºç‰ˆåˆ›å»ºå¯¹è±¡
&lt;/h3>&lt;p>åˆ›å»ºæ—¶é—´å¯¹è±¡ä¸ä½é…ç‰ˆä¸ä¸€æ ·ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å¢å¼ºç‰ˆçš„&lt;code>Now&lt;/code>å‡½æ•°ï¼Œå‚æ•°æ˜¯æ—¶åŒºï¼Œä¸ºå¯é€‰å‚æ•°ï¼Œé»˜è®¤ä¸ºæœ¬åœ°æ—¶åŒºã€‚å¢å¼ºç‰ˆçš„æ—¶åŒºï¼Œæ²¡æœ‰æŒ‡å®šï¼Œä¸€å¾‹ä¸ºæœ¬åœ°æ—¶åŒºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½é…ç‰ˆç›´æ¥é€šè¿‡&lt;code>NewCarbon&lt;/code>æŒ‡å®šæ—¶é—´åˆ›å»ºæ—¶é—´å¯¹è±¡ï¼Œè€Œé«˜é…ç‰ˆè¿˜éœ€è¦è°ƒ&lt;code>CreateXxx&lt;/code>æ–¹æ³•æŒ‡å®šæ—¶é—´æ‰èƒ½å®Œæˆåˆ›å»ºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¹¶ä¸”ä½é…ç‰ˆå¦‚æœåªåˆ›å»ºæ—¥æœŸï¼Œé‚£ä¹ˆæ—¶é—´ä¸ºå½“å‰æ—¶é—´ã€‚è€Œé«˜é…ç‰ˆåªåˆ›å»ºæ—¥æœŸï¼Œæ—¶é—´ä¸º&lt;code>0:0:0&lt;/code>.&lt;/p>
&lt;ol>
&lt;li>å½“åªåˆ›å»ºæ—¶é—´æ—¶ï¼ŒäºŒè€…çš„æ—¥æœŸéƒ½æ˜¯ä¸ºå½“å‰æ—¥æœŸã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>é«˜é…ç‰ˆç§»é™¤äº†&lt;code>Create&lt;/code>æ–¹æ³•ï¼Œåˆ›å»ºäº†æ›´å¤š&lt;code>CreateXxx&lt;/code>æ–¹æ³•ã€‚ç”¨äºæŒ‡å®šæ—¶é—´æˆ–æ—¥æœŸåˆ›å»ºå¯¹è±¡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯¹&lt;code>Parse&lt;/code>æ–¹æ³•è¿›è¡Œäº†å¢å¼ºï¼Œå¹¶ä¸”è¿˜æä¾›äº†å¦å¤–ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿›è¡Œåˆ›å»ºå¯¹è±¡ã€‚è¿™å‡ ä¸ªæ–¹æ³•çš„æ—¶åŒºéƒ½å¯é€‰çš„ï¼Œé»˜è®¤ä¸ºæœ¬åœ°æ—¶åŒºã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å¢å¼ºç‰ˆ&lt;code>Parse&lt;/code>æ–¹æ³•åªèƒ½æŒ‡å®šè¦è§£æçš„å­—ç¬¦ä¸²å’Œæ—¶åŒºï¼ˆå¯é€‰ï¼‰åˆ›å»ºå¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ—¶åŒºï¼Œé»˜è®¤æœ¬åœ°æ—¶åŒºã€‚æ—¶é—´å¸ƒå±€ä»»æ„ã€‚åº•å±‚ä¼šéå†æ‰€æœ‰æ”¯æŒçš„å¸ƒå±€æ¨¡æ¿ï¼ˆå¢å¼ºç‰ˆå«Layoutï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ParseByLayout&lt;/code>æ–¹æ³•åœ¨&lt;code>Parse&lt;/code>æ–¹æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªå¸ƒå±€æ¨¡æ¿å‚æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ParseByFormat&lt;/code>æ–¹æ³•åœ¨&lt;code>Parse&lt;/code>æ–¹æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªæ ¼å¼æ¨¡ç‰ˆå‚æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¸ƒå±€æ¨¡æ¿ä»¥Layoutç»“å°¾ï¼Œå°±æ˜¯åŸæ¥çš„&lt;code>Format&lt;/code>æ–¹æ³•çš„å‚æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">DateLayout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;2006-01-02&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ ¼å¼æ¨¡ç‰ˆä»¥formatç»“å°¾ï¼Œå¢å¼ºç‰ˆæ–°åŠ çš„ï¼Œç”±æ—¥æœŸæ—¶é—´çš„æ ¼å¼åŒ–å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">DateTimeFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Y-m-d H:i:s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„&lt;code>carbon&lt;/code>åŒ…çš„å†…éƒ¨é”™è¯¯ï¼Œéƒ½å°è£…åˆ°äº†æ—¶é—´å¯¹è±¡çš„&lt;code>Error&lt;/code>å±æ€§ä¸‹ã€‚&lt;/p>
&lt;p>å¦‚æœæœ‰å¤šä¸ªé”™è¯¯å‘ç”Ÿï¼Œåªè¿”å›ç¬¬ä¸€ä¸ªé”™è¯¯ï¼Œå‰ä¸€ä¸ªé”™è¯¯æ’é™¤åæ‰è¿”å›ä¸‹ä¸€ä¸ªé”™è¯¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">c&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetTimezone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;xxx&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Error&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é”™è¯¯å¤„ç†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">invalid&lt;/span> &lt;span class="nx">timezone&lt;/span> &lt;span class="s">&amp;#34;xxx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">please&lt;/span> &lt;span class="nx">see&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">file&lt;/span> &lt;span class="s">&amp;#34;$GOROOT/lib/time/zoneinfo.zip&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">all&lt;/span> &lt;span class="nx">valid&lt;/span> &lt;span class="nx">timezones&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>å®ä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/golang-module/carbon/v2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewCarbon&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stdTime&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromStdTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stdTime&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fromDate&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2024&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fromDate&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewCarbon&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">CreateFromDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2024&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fromDate&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2024-05-14 00:00:00
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dateTime&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromDateTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2024&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dateTime&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewCarbon&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">CreateFromDateTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2024&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dateTime&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2024-05-14 10:22:33
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assertErr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Carbon&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Error&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">parse&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2024-05-20 10:22:33&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertErr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parse&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parse&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2024-05-20 10:22:33
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">parse&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseByLayout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2024-05-20&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateLayout&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertErr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parse&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parse&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2024-05-20 00:00:00
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">parse&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseByFormat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2024-05-20 10:22:33&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateTimeFormat&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">assertErr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parse&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parse&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2024-05-20 10:22:33
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">toString&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimestamp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 1970-01-01 07:59:59
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Create a Carbon instance from a given hour, minute and second
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Create a Carbon instance from a given hour, minute and second with millisecond
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimeMilli&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">999&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15.999 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Create a Carbon instance from a given hour, minute and second with microsecond
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimeMicro&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">999999&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15.999999 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Create a Carbon instance from a given hour, minute and second with nanosecond
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimeNano&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">999999999&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15.999999999 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;now&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;yesterday&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-04 13:14:15 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tomorrow&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-06 13:14:15 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-01-01 00:00:00 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-8&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-01 00:00:00 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseByFormat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020|08|05 13|14|15&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Y|m|d H|i|s&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseByFormat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;It is 2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;\\I\\t \\i\\s Y-m-d H:i:s&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseByFormat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ä»Šå¤©æ˜¯ 2020å¹´08æœˆ05æ—¥13æ—¶14åˆ†15ç§’&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ä»Šå¤©æ˜¯ Yå¹´mæœˆdæ—¥Hæ—¶iåˆ†sç§’&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseByLayout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020|08|05 13|14|15&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;2006|01|02 15|04|05&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseByLayout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;It is 2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;It is 2006-01-02 15:04:05&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseByLayout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ä»Šå¤©æ˜¯ 2020å¹´08æœˆ05æ—¥13æ—¶14åˆ†15ç§’&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ä»Šå¤©æ˜¯ 2006å¹´01æœˆ02æ—¥15æ—¶04åˆ†05ç§’&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä¸€äº›é»˜è®¤å€¼">
&lt;a href="#%e4%b8%80%e4%ba%9b%e9%bb%98%e8%ae%a4%e5%80%bc" class="header-anchor">#&lt;/a>
ä¸€äº›é»˜è®¤å€¼
&lt;/h3>&lt;p>å¢å¼ºç‰ˆåˆ›å»ºçš„æ—¶é—´å¯¹è±¡çš„é»˜è®¤å€¼ï¼š&lt;/p>
&lt;ul>
&lt;li>æ—¶é—´æ ¼å¼ä¸ä½é…ç‰ˆä¸€ç›´ï¼Œåå­—æ”¹æˆ&lt;code>carbon.DateTimeLayout&lt;/code>ã€‚&lt;/li>
&lt;li>æ—¶åŒºé»˜è®¤éƒ½ä¸ºæœ¬åœ°æ—¶åŒºã€‚&lt;/li>
&lt;li>å·¥ä½œæ—¥å¼€å§‹æ˜¯åœ¨&lt;code>Sunday&lt;/code>ï¼Œä½é…ç‰ˆæ˜¯åœ¨æ˜ŸæœŸä¸€ã€‚&lt;/li>
&lt;li>é»˜è®¤çš„è¯­è¨€åŒºåŸŸæ˜¯enã€‚æ”¯æŒçš„è¯­è¨€åœ¨&lt;code>github.com\golang-module\carbon\lang&lt;/code>ç›®å½•ä¸‹ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™äº›å±æ€§å¯ä»¥é€šè¿‡&lt;code>func SetDefault(d Default)&lt;/code>æ–¹æ³•ä¿®æ”¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/golang-module/carbon/v2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Default&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Layout&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC3339Layout&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Timezone&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Local&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">WeekStartsAt&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Monday&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Locale&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;zh-CN&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®˜æ–¹å»ºè®®åœ¨main.goç­‰å…¥å£æ–‡ä»¶ä¸­ä¿®æ”¹é»˜è®¤å€¼ã€‚&lt;/p>
&lt;h3 id="å¯¹è±¡äº’è½¬">
&lt;a href="#%e5%af%b9%e8%b1%a1%e4%ba%92%e8%bd%ac" class="header-anchor">#&lt;/a>
å¯¹è±¡äº’è½¬
&lt;/h3>&lt;p>å¢å¼ºç‰ˆå¯ä»¥å®ç°&lt;code>time.Time&lt;/code>å¯¹è±¡ä¸&lt;code>Carbon&lt;/code>å¯¹è±¡ç›¸äº’è½¬æ¢ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/golang-module/carbon/v2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">carbonTime&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stdTime&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbonTime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StdTime&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stdTime&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2024-05-14 22:22:22 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stdTime&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2024&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Local&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">carbonTime&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromStdTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stdTime&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbonTime&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2024-05-14 22:22:22
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ›´å¤šç»†èŠ‚çš„å¢å¼º">
&lt;a href="#%e6%9b%b4%e5%a4%9a%e7%bb%86%e8%8a%82%e7%9a%84%e5%a2%9e%e5%bc%ba" class="header-anchor">#&lt;/a>
æ›´å¤šç»†èŠ‚çš„å¢å¼º
&lt;/h3>&lt;h4 id="å¯¹è±¡è½¬å­—ç¬¦ä¸²">
&lt;a href="#%e5%af%b9%e8%b1%a1%e8%bd%ac%e5%ad%97%e7%ac%a6%e4%b8%b2" class="header-anchor">#&lt;/a>
å¯¹è±¡è½¬å­—ç¬¦ä¸²
&lt;/h4>&lt;p>å¢å¼ºç‰ˆæä¾›äº†æ›´å¤šæ—¶é—´å¯¹è±¡è½¬å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚é™¤äº†&lt;code>String&lt;/code>æ–¹æ³•å¤–ï¼Œæ·»åŠ äº†ToXxxStringæ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Return date of today
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">ToDateString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Return time of today
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">ToTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Return datetime of today in a given timezone
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NewYork&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 14:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šå¢å¼ºç‰ˆæœ‰ä¸€ä¸ªå‘ï¼šå½“æˆ‘ä»¬ç›´æ¥è¾“å‡º&lt;code>Carbon&lt;/code>å¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨&lt;code>String&lt;/code>æ–¹æ³•ï¼Œè¿™ä¸ª&lt;code>String&lt;/code>æ–¹æ³•ä¼šå°†æ—¶åŒº&lt;strong>æ”¹æˆæœ¬åœ°&lt;/strong>ã€‚è‹¥ä¸å¸Œæœ›ä¿®æ”¹æ—¶åŒºï¼Œè¯·ä¸è¦è°ƒç”¨&lt;code>String&lt;/code>æ–¹æ³•ï¼Œç”¨åˆ«çš„è½¬å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œå¦‚&lt;code>ToDateTimeString&lt;/code>ã€‚&lt;/p>
&lt;p>æ›´å¤šå†…å®¹å‚è€ƒ&lt;a class="link" href="#%e6%97%b6%e9%97%b4%e8%be%93%e5%87%ba" >æ—¶é—´è¾“å‡º&lt;/a>&lt;/p>
&lt;h4 id="å¯¹è±¡è½¬æ—¶é—´æˆ³">
&lt;a href="#%e5%af%b9%e8%b1%a1%e8%bd%ac%e6%97%b6%e9%97%b4%e6%88%b3" class="header-anchor">#&lt;/a>
å¯¹è±¡è½¬æ—¶é—´æˆ³
&lt;/h4>&lt;p>é€šè¿‡å¢å¼ºç‰ˆï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„å°†Carbonå¯¹è±¡è½¬æ¢æˆæŒ‡å®šå•ä½çš„æ—¶é—´æˆ³ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NewYork&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 14:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Return timestamp with second of today
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Timestamp&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 1596604455
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Return timestamp with millisecond of today
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">TimestampMilli&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 1596604455999
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Return timestamp with microsecond of today
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">TimestampMicro&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 1596604455999999
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Return timestamp with nanosecond of today
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">TimestampNano&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 1596604455999999999
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="è·å–æ˜¨å¤©æ˜å¤©çš„å¯¹è±¡">
&lt;a href="#%e8%8e%b7%e5%8f%96%e6%98%a8%e5%a4%a9%e6%98%8e%e5%a4%a9%e7%9a%84%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
è·å–æ˜¨å¤©ã€æ˜å¤©çš„å¯¹è±¡
&lt;/h4>&lt;p>å¢å¼ºç‰ˆï¼Œä¸ä»…èƒ½å¤Ÿè·å–å½“å‰çš„æ—¶é—´å¯¹è±¡ï¼Œè¿˜èƒ½è·å–æ˜¨å¤©æˆ–è€…æ˜å¤©çš„æ—¶é—´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Yesterday&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1">// 2020-08-04 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Yesterday&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-04 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Yesterday&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-04 13:14:15 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Yesterday&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NewYork&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-04 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Tomorrow&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-06 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Tomorrow&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-06 13:14:15 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Tomorrow&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-06 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å¢å¼ºæ—¶é—´æˆ³åˆ›å»ºå¯¹è±¡">
&lt;a href="#%e5%a2%9e%e5%bc%ba%e6%97%b6%e9%97%b4%e6%88%b3%e5%88%9b%e5%bb%ba%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
å¢å¼ºæ—¶é—´æˆ³åˆ›å»ºå¯¹è±¡
&lt;/h4>&lt;p>ä½é…ç‰ˆåªèƒ½é€šè¿‡&lt;code>CreateFromTimestamp&lt;/code>å’Œ&lt;code>CreateFromTimestampUTC&lt;/code>å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼Œå¢å¼ºç‰ˆæä¾›äº†æ¯«ç§’ã€å¾®ç§’ã€çº³ç§’æ—¶é—´æˆ³åˆ›å»ºå¯¹è±¡ã€‚æ—¶åŒºé»˜è®¤æœ¬åœ°æ—¶åŒºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimestamp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1649735755&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2022-04-12 11:55:55 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Create a Carbon instance from a given timestamp with millisecond
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimestampMilli&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1649735755981&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2022-04-12 11:55:55.981 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Create a Carbon instance from a given timestamp with microsecond
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimestampMicro&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1649735755981566&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2022-04-12 11:55:55.981566 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Create a Carbon instance from a given timestamp with nanosecond
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimestampNano&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1649735755981566000&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2022-04-12 11:55:55.981566 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateFromTimestampNano&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1649735755981566000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Japan&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2022-04-12 12:55:55.981566 +0900 JST å¿«ä¸€ä¸ªå°æ—¶ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä»–&lt;a class="link" href="#%e5%a2%9e%e5%bc%ba%e7%89%88%e5%88%9b%e5%bb%ba%e5%af%b9%e8%b1%a1" >åˆ›å»ºå¯¹è±¡å¢å¼º&lt;/a>&lt;/p>
&lt;h4 id="æ—¶é—´çš„è¾¹ç•Œ">
&lt;a href="#%e6%97%b6%e9%97%b4%e7%9a%84%e8%be%b9%e7%95%8c" class="header-anchor">#&lt;/a>
æ—¶é—´çš„è¾¹ç•Œ
&lt;/h4>&lt;p>ä¸ä½é…ç‰ˆä¸€æ¨¡ä¸€æ ·ã€‚è¯¦æƒ…è¯·çœ‹&lt;a class="link" href="#%e4%bf%ae%e9%a5%b0%e5%99%a8" >ä¿®é¥°å™¨&lt;/a>ã€‚&lt;/p>
&lt;h4 id="å¢å¼ºæ—¶é—´è¿ç®—">
&lt;a href="#%e5%a2%9e%e5%bc%ba%e6%97%b6%e9%97%b4%e8%bf%90%e7%ae%97" class="header-anchor">#&lt;/a>
å¢å¼ºæ—¶é—´è¿ç®—
&lt;/h4>&lt;p>æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œå¯¹åº”æ—¶é—´çš„è¿ç®—ï¼Œå¢åŠ äº†ä¸ä¼šæº¢å‡ºçš„æ–¹æ³•ã€‚&lt;/p>
&lt;p>é»˜è®¤ä½é…ç‰ˆå’Œé«˜é…ç‰ˆè¿›è¡Œæ—¶é—´è¿ç®—æ—¶ï¼Œå½“ä¸º2æœˆ29çš„æ—¶å€™ï¼Œå³é—°å¹´çš„æ—¶å€™ï¼Œè®¡ç®—åˆ°ä¸æ˜¯é—°å¹´ï¼Œéƒ½æ²¡æœ‰29å·ï¼Œé‚£ä¹ˆæ—¶é—´é»˜è®¤ä¼šæº¢å‡ºï¼Œå˜æˆ3æœˆ1å·ã€‚å¢å¼ºç‰ˆæä¾›äº†&lt;code>AddXxxNoOverflow&lt;/code>ã€&lt;code>SubXxxNoOverflow&lt;/code>æ–¹æ³•ï¼ˆä½é…ç‰ˆéƒ¨åˆ†æœ‰ï¼Œé«˜é…ç‰ˆåŸºæœ¬éƒ½æœ‰ï¼‰ï¼Œè®©æ—¶é—´ä¸ä¼šæº¢å‡ºï¼Œä¸º2æœˆ28ã€‚ï¼ˆé—°å¹´æ¯”å…¬å†å¹´å¤š1å¤©ã€‚ï¼‰&lt;/p>
&lt;p>å¢å¼ºç‰ˆè¿˜å¢å¼ºäº†åˆ«çš„å•ä½è¿›è¡Œè¿ç®—,å¦‚&lt;code>XxxDecades&lt;/code>åå¹´ã€&lt;code>XxxDuration&lt;/code>æ ¹æ®ç‰‡æ®µè¿›è¡Œè¿ç®—ã€‚è¿˜æ›´å°å•ä½çš„è¿ç®—ï¼Œå¦‚&lt;code>SubMillisecond&lt;/code>ã€&lt;code>SubNanossecond&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">// ä¸‰ä¸ªå¹´ä»£å
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carbon.Parse(&amp;#34;2020-02-29 13:14:15&amp;#34;).AddDecades(3).ToDateTimeString() // 2050-03-01 13:14:15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// ä¸‰ä¸ªå¹´ä»£å(æœˆä»½ä¸æº¢å‡º)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carbon.Parse(&amp;#34;2020-02-29 13:14:15&amp;#34;).AddDecadesNoOverflow(3).ToDateTimeString() // 2050-02-28 13:14:15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// ä¸€ä¸ªå¹´ä»£å
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carbon.Parse(&amp;#34;2020-02-29 13:14:15&amp;#34;).AddDecade().ToDateTimeString() // 2030-03-01 13:14:15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// ä¸€ä¸ªå¹´ä»£å(æœˆä»½ä¸æº¢å‡º)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carbon.Parse(&amp;#34;2020-02-29 13:14:15&amp;#34;).AddDecadeNoOverflow().ToDateTimeString() // 2030-02-28 13:14:15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// äºŒå°æ—¶åŠå‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carbon.Parse(&amp;#34;2020-08-05 13:14:15&amp;#34;).SubDuration(&amp;#34;2.5h&amp;#34;).ToDateTimeString() // 2020-08-05 10:44:15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carbon.Parse(&amp;#34;2020-08-05 13:14:15&amp;#34;).SubDuration(&amp;#34;2h30m&amp;#34;).ToDateTimeString() // 2020-08-05 10:44:15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// ä¸‰å¾®ç§’å
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carbon.Parse(&amp;#34;2020-08-05 13:14:15.222222222&amp;#34;).AddMicroseconds(3).ToString() // 2020-08-05 13:14:15.222225222 +0800 CST
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// ä¸€å¾®ç§’å
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carbon.Parse(&amp;#34;2020-08-05 13:14:15.222222222&amp;#34;).AddMicrosecond().ToString() // 2020-08-05 13:14:15.222223222 +0800 CST
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä»–çš„ä¸&lt;a class="link" href="#%e6%97%b6%e9%97%b4%e8%bf%90%e7%ae%97" >ä½é…ç‰ˆä¸€ç›´&lt;/a>ã€‚&lt;/p>
&lt;h4 id="å¢å¼ºæ—¶é—´å·®">
&lt;a href="#%e5%a2%9e%e5%bc%ba%e6%97%b6%e9%97%b4%e5%b7%ae" class="header-anchor">#&lt;/a>
å¢å¼ºæ—¶é—´å·®
&lt;/h4>&lt;ul>
&lt;li>å¢å¼ºç‰ˆç§»é™¤äº†æ˜¯å¦å–ç»å¯¹å€¼å‚æ•°ï¼Œå°è£…åˆ°äº†&lt;code>DiffAbsInXxx&lt;/code>æ–¹æ³•ä¸­ã€‚
&lt;ul>
&lt;li>åŸç†å·®ä¸å¤šï¼Œåé¢-å‰é¢ã€‚å¿«ä¸ºè´Ÿæ•°ï¼Œæ…¢ä¸ºæ­£æ•°ï¼ˆç›¸å¯¹è°ƒç”¨çš„æ—¶é—´å¯¹è±¡ï¼‰ã€‚&lt;/li>
&lt;li>å…¶ä»–ç›¸å·®å¤šå°‘åˆ†ã€å°æ—¶ã€å¹´ã€ä¸ä½é…ç‰ˆ&lt;a class="link" href="%e6%97%b6%e9%97%b4%e5%b7%ae" >æ—¶é—´å·®&lt;/a>ä¸€ç›´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ–°å¢æ—¶é—´å·®çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œç”¨&lt;code>DiffInString&lt;/code>æ–¹æ³•è·å–ï¼Œé»˜è®¤å‚æ•°ä¸ºå½“å‰æ—¶é—´ã€‚
&lt;ul>
&lt;li>åŒæ ·æä¾›äº†ç»å¯¹å€¼æ–¹æ³•&lt;code>DiffAbsInString&lt;/code>&lt;/li>
&lt;li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šç›®å‰æ—¶é—´å·®çš„å­—ç¬¦ä¸²è¡¨ç¤ºåªèƒ½è¡¨ç¤ºå·®é‡Œé¢çš„æœ€å¤§æ—¶é—´å•ä½ã€‚
&lt;ul>
&lt;li>å¦‚å·®2åˆ†30ç§’ï¼Œç»“æœä¸ºå·®2åˆ†é’Ÿã€‚å·®3æœˆ22å¤©ï¼Œç»“æœä¸ºå·®3ä¸ªæœˆ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>è¯¥æ–¹æ³•æ”¯æŒå›½é™…åŒ–ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ–°å¢ç›¸å·®æ—¶é•¿ï¼ˆç‰‡æ®µï¼‰å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ç”¨&lt;code>DiffInDuration&lt;/code>æ–¹æ³•è·å–ï¼Œé»˜è®¤å‚æ•°ä¸ºå½“å‰æ—¶é—´ã€‚
&lt;ul>
&lt;li>åŒæ ·æä¾›äº†ç»å¯¹å€¼æ–¹æ³•&lt;code>DiffAbsInDuration&lt;/code>&lt;/li>
&lt;li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™ä¸ªæ–¹æ³•ä¼šå…·ä½“åˆ°ç›¸å·®å¤šå°‘æ—¶å·®ã€‚å½“æœ€å¤§å•ä½ä¸ºå°æ—¶ã€‚&lt;/li>
&lt;li>è¯¥æ–¹æ³•åŒæ ·æ”¯æŒå›½é™…åŒ–ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ–°å¢å¯¹äººç±»å‹å¥½çš„å¯è¯»æ ¼å¼æ—¶é—´å·®ã€‚ç”¨&lt;code>DiffForHumans&lt;/code>æ–¹æ³•è·å–ï¼Œé»˜è®¤å‚æ•°ä¸ºå½“å‰æ—¶é—´ã€‚
&lt;ul>
&lt;li>è¯¥æ–¹æ³•äººç±»å¯è¯»ï¼Œç§»é™¤äº†ç»å¯¹å€¼æ–¹æ³•ã€‚èƒ½å¤Ÿç›´è§‚çš„çœ‹è§å‚æ•°æ—¶é—´å¯¹è±¡æ˜¯å‰ï¼ˆè´Ÿæ•°ï¼‰è¿˜æ˜¯åï¼ˆæ­£æ•°ï¼‰ã€‚&lt;/li>
&lt;li>éœ€è¦æ³¨æ„çš„æ˜¯è¯¥æ–¹æ³•ï¼Œä¸&lt;code>DiffInString&lt;/code>ä¸€æ ·ï¼Œåªèƒ½è¡¨ç¤ºæœ€å¤§çš„æ—¶é—´å•ä½ã€‚&lt;/li>
&lt;li>åŒæ ·æ”¯æŒå›½é™…åŒ–ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/golang-module/carbon/v2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Default&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Layout&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateTimeLayout&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Timezone&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Local&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">WeekStartsAt&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Monday&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Locale&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;zh-CN&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">inString&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">DiffInString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddDays&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">inString&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 3 å‘¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">diffInString&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">DiffInString&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">diffInString&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// -22 å°æ—¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">diffAbsInDuration&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddYears&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddMicroseconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">DiffAbsInDuration&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">diffAbsInDuration&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 17520h22m0.000022s
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">inString&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">DiffForHumans&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddDays&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">inString&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 3 å‘¨å‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">diffInString&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">AddHours&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">AddMinutes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">DiffForHumans&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">diffInString&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 22 å°æ—¶å
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="è·å–æ—¶é—´æå€¼">
&lt;a href="#%e8%8e%b7%e5%8f%96%e6%97%b6%e9%97%b4%e6%9e%81%e5%80%bc" class="header-anchor">#&lt;/a>
è·å–æ—¶é—´æå€¼
&lt;/h4>&lt;p>ä½é…ç‰ˆåªæä¾›äº†&lt;code>Closest&lt;/code>å’Œ&lt;code>Farthest&lt;/code>è·å–è·å¯¹è±¡æœ€è¿‘æˆ–æœ€è¿œçš„æ—¶é—´å¯¹è±¡ï¼Œä½é…ç‰ˆå’Œé«˜é…ç‰ˆéƒ½åªèƒ½ä¼ é€’ä¸¤ä¸ªæ—¶é—´å¯¹è±¡ã€‚&lt;/p>
&lt;p>é«˜é…ç‰ˆå¢å¼ºç‰ˆæ–°å¢ä¸¤ä¸ªæ–¹æ³•&lt;code>Max&lt;/code>å’Œ``Min`ï¼Œè·å–å¤šä¸ªæ—¶é—´é‡Œé¢çš„æœ€å¤§æˆ–æœ€å°ï¼Œå‚æ•°ä¸ºè‡³å°‘ä¸€ä¸ªæ—¶é—´å¯¹è±¡ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">c0&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2023-04-01&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">c1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2023-03-28&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">c2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2023-04-16&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¿”å›æœ€è¿‘çš„ Carbon å®ä¾‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">c0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Closest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// c1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¿”å›æœ€è¿œçš„ Carbon å®ä¾‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">c0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Farthest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// c2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">yesterday&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Yesterday&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">today&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">tomorrow&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Tomorrow&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¿”å›æœ€å¤§çš„ Carbon å®ä¾‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">yesterday&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">today&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tomorrow&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// tomorrow
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¿”å›æœ€å°çš„ Carbon å®ä¾‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">yesterday&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">today&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tomorrow&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// yesterday
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å¢å¼ºæ—¶é—´åˆ¤æ–­">
&lt;a href="#%e5%a2%9e%e5%bc%ba%e6%97%b6%e9%97%b4%e5%88%a4%e6%96%ad" class="header-anchor">#&lt;/a>
å¢å¼ºæ—¶é—´åˆ¤æ–­
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>å¢å¼ºç‰ˆæ–°å¢åˆ¤æ–­æ—¶é—´æ˜¯å¦æœ‰æ•ˆï¼š&lt;code>IsValid&lt;/code>ã€&lt;code>IsInvalid&lt;/code>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åŸç†æ˜¯æ—¶é—´æˆ³å¤§äº0ï¼Œå°±æœ‰æ•ˆã€‚å½“ä¸º0æˆ–è€…ä¸ºç©ºæˆ–è€…Errorå±æ€§ä¸ä¸ºnilæ—¶ï¼Œè¯¥æ—¶é—´æ— æ•ˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯æœ‰æ•ˆæ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="nx">Carbon&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">IsValid&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Error&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsZero&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¤§äºé›¶å€¼æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StdTime&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Unix&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">62135596800&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ–°å¢æ›´å¤šçš„æ—¶é—´åˆ¤æ–­ï¼š&lt;/p>
&lt;ul>
&lt;li>åˆ¤æ–­æ˜¯å¦æ˜¯æ—©ä¸Šã€ä¸‹åˆã€å½“å‰ã€æœªæ¥ã€è¿‡å»ã€é—°å¹´ã€é•¿å¹´ã€å‡ æœˆã€æ˜ŸæœŸå‡ ã€å·¥ä½œæ—¥ã€å‘¨æœ«ã€æ˜¨å¤©ã€ä»Šå¤©ã€æ˜å¤©ã€åŒä¸€ä¸–çºªã€åŒä¸€å¹´ä»£ã€åŒä¸€å¹´ã€åŒä¸€å­£èŠ‚ã€åŒä¸€æœˆã€åŒä¸€å¤©ã€åŒä¸€å°æ—¶ã€åŒä¸€åˆ†é’Ÿã€åŒä¸€ç§’ã€‚æ–¹æ³•åæ˜¯&lt;code>IsXxx&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¢å¼ºç‰ˆç§»é™¤äº†è‡ªå®šä¹‰å‘¨æœ«ã€‚å‘¨æœ«é»˜è®¤éƒ½ä¸ºæ˜ŸæœŸ6ã€æ˜ŸæœŸå¤©ã€‚åªä¿ç•™äº†è®¾ç½®ä¸€å‘¨å¼€å§‹çš„æ—¥æœŸã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ–°å¢æ˜Ÿåº§åˆ¤æ–­ï¼Œæ–¹æ³•ä¸º&lt;code>IsXxx&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–æ˜Ÿåº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Constellation&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// Leo
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯ç™½ç¾Šåº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsAries&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯é‡‘ç‰›åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsTaurus&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯åŒå­åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsGemini&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯å·¨èŸ¹åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsCancer&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯ç‹®å­åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsLeo&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯å¤„å¥³åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsVirgo&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯å¤©ç§¤åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsLibra&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯å¤©èåº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsScorpio&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯å°„æ‰‹åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsSagittarius&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯æ‘©ç¾¯åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsCapricorn&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯æ°´ç“¶åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsAquarius&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯åŒé±¼åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsPisces&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ–°å¢å­£èŠ‚åˆ¤æ–­ï¼šæŒ‰ç…§æ°”è±¡åˆ’åˆ†ï¼Œå³3-5æœˆä¸ºæ˜¥å­£ï¼Œ6-8æœˆä¸ºå¤å­£ï¼Œ9-11æœˆä¸ºç§‹å­£ï¼Œ12-2æœˆä¸ºå†¬å­£&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–å­£èŠ‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Season&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// Summer
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æœ¬å­£èŠ‚å¼€å§‹æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">StartOfSeason&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-06-01 00:00:00
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æœ¬å­£èŠ‚ç»“æŸæ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">EndOfSeason&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-31 23:59:59
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯æ˜¥å­£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsSpring&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯å¤å­£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsSummer&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯ç§‹å­£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsAutumn&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦æ˜¯å†¬å­£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">IsWinter&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>â€‹&lt;/p>
&lt;p>â€‹&lt;/p>
&lt;h4 id="å¢å¼ºæ—¶é—´æ¯”è¾ƒ">
&lt;a href="#%e5%a2%9e%e5%bc%ba%e6%97%b6%e9%97%b4%e6%af%94%e8%be%83" class="header-anchor">#&lt;/a>
å¢å¼ºæ—¶é—´æ¯”è¾ƒ
&lt;/h4>&lt;p>é«˜é…ç‰ˆä¿ç•™äº†&lt;a class="link" href="#%e6%97%b6%e9%97%b4%e6%af%94%e8%be%83" >ä½é…ç‰ˆ&lt;/a>çš„æ‰€æœ‰æ—¶é—´æ¯”è¾ƒæ–¹æ³•ï¼ŒåŒæ—¶æ–°å¢åˆ¤æ–­æ˜¯å¦åœ¨ä¸¤ä¸ªæ—¶é—´ä¹‹é—´ï¼ŒåŒ…æ‹¬ä¸¤ç«¯çš„æ—¶é—´æ–¹æ³•å’Œæ¯”è¾ƒæ–¹æ³•&lt;code>Compare&lt;/code>ï¼Œè¯¥æ–¹æ³•éœ€è¦æŒ‡å®šæ¯”è¾ƒå­—ç¬¦&lt;code>=,&amp;lt;=,!=,&amp;lt;&amp;gt;&lt;/code>ç­‰ï¼ˆåªèƒ½æ¥æ”¶ä¸€ä¸ªæ¯”è¾ƒç¬¦ï¼Œå› ä¸ºåªèƒ½æœ‰ä¸€ä¸ªæ—¶é—´å‚æ•°æ¯”è¾ƒï¼‰ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦åœ¨ä¸¤ä¸ªæ—¶é—´ä¹‹é—´(åŒ…æ‹¬å¼€å§‹æ—¶é—´)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">BetweenIncludedStart&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-06 13:14:15&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦åœ¨ä¸¤ä¸ªæ—¶é—´ä¹‹é—´(åŒ…æ‹¬ç»“æŸæ—¶é—´)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">BetweenIncludedEnd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-04 13:14:15&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ˜¯å¦åœ¨ä¸¤ä¸ªæ—¶é—´ä¹‹é—´(åŒ…æ‹¬è¿™ä¸¤ä¸ªæ—¶é—´)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">BetweenIncludedBoth&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-06 13:14:15&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Compare&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;gt;=&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Compare&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;lt;&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// false å°±æ˜¯ä¸ç­‰äº
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å¢å¼ºæ—¶é—´è®¾ç½®">
&lt;a href="#%e5%a2%9e%e5%bc%ba%e6%97%b6%e9%97%b4%e8%ae%be%e7%bd%ae" class="header-anchor">#&lt;/a>
å¢å¼ºæ—¶é—´è®¾ç½®
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>å¯ä»¥è®¾ç½®æ—¶åŒºã€è®¾ç½®åœ°åŒºï¼š&lt;code>func SetTimezone(name string)&lt;/code>ã€&lt;code>func SetLocation(loc *time.Location)&lt;/code>ã€&lt;code>func LoadLocation(name string)&lt;/code>ã€&lt;code>func getLocationByTimezone(timezone string)&lt;/code>&lt;/p>
&lt;ul>
&lt;li>æ—¶åŒºä¸åœ°åŒºåŒåã€‚å…³ç³»æ˜¯ï¼šåœ°åŒºä¸æ—¶åŒºå¯ä»¥ç›¸äº’è½¬æ¢ã€‚å¯ä»¥åˆ’ç­‰å·ã€‚&lt;/li>
&lt;li>åªè¦æ˜¯æ—¶åŒºæ–‡ä»¶é‡Œé¢æ²¡æœ‰çš„åç§°æ—¶åŒºå’Œåœ°åŒºéƒ½ä¸èƒ½ä½¿ç”¨ã€‚è™½ç„¶å¢å¼ºç‰ˆå°†æ—¶åŒºæ–‡ä»¶ä¸­çš„æ—¶åŒºåéƒ½å°è£…æˆäº†å¸¸é‡ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¯ä»¥è®¾ç½®åŒºåŸŸï¼ˆå›½é™…åŒ–è®¾ç½®ï¼‰ï¼š&lt;code>SetLocale&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿˜å¯ä»¥ä¿®æ”¹å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼Œç”¨&lt;code>SetXxx&lt;/code>æ–¹æ³•&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/golang-module/carbon/v2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Shanghai&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Shanghai&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Beijing&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Shanghai&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">BeijingStr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">Beijing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Japan&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetTimezone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Japan&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">JapanStr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">Japan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ä¸œäº¬æ—¶é—´%sæ¯”åŒ—äº¬æ—¶é—´%så¿«ä¸€ä¸ªå°æ—¶ï¼Œä½†è¡¨ç¤ºçš„æ˜¯åŒä¸€æ—¶åˆ»\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">BeijingStr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">JapanStr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Beijing&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetTimezone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HongKong&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">BeijingStr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">Beijing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Japan&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">JapanStr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">Japan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDateTimeString&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ä¸œäº¬æ—¶é—´%sæ¯”åŒ—äº¬æ—¶é—´%så¿«ä¸€ä¸ªå°æ—¶ï¼Œä½†è¡¨ç¤ºçš„æ˜¯åŒä¸€æ—¶åˆ»\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">BeijingStr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">JapanStr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šå¢å¼ºç‰ˆæœ‰ä¸€ä¸ªå‘ï¼šå½“æˆ‘ä»¬ç›´æ¥è¾“å‡º&lt;code>Carbon&lt;/code>å¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨&lt;code>String&lt;/code>æ–¹æ³•ï¼Œè¿™ä¸ª&lt;code>String&lt;/code>æ–¹æ³•ä¼šå°†æ—¶åŒº&lt;strong>æ”¹æˆæœ¬åœ°&lt;/strong>ã€‚è‹¥ä¸å¸Œæœ›ä¿®æ”¹æ—¶åŒºï¼Œè¯·ä¸è¦è°ƒç”¨&lt;code>String&lt;/code>æ–¹æ³•ï¼Œç”¨åˆ«çš„è½¬å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œå¦‚&lt;code>ToDateTimeString&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è®¾ç½®å¹´æœˆæ—¥æ—¶åˆ†ç§’çº³ç§’
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-01-01&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">SetDateTimeNano&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2019&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">999999999&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2019-02-02 13:14:15.999999999 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-01-01&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">SetDateTimeNano&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2019&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">999999999&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2019-03-03 13:14:15.999999999 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å•ç‹¬è®¾ç½®çº³ç§’
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">SetNanosecond&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100000000&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Nanosecond&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 100000000
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">SetNanosecond&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">999999999&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Nanosecond&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 999999999
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="æ—¶é—´è·å–">
&lt;a href="#%e6%97%b6%e9%97%b4%e8%8e%b7%e5%8f%96" class="header-anchor">#&lt;/a>
æ—¶é—´è·å–
&lt;/h4>&lt;p>ä¸€å¥è¯ï¼šç›´æ¥è°ƒç”¨ä½ æƒ³è·å–çš„æ—¶é—´æˆ–æ—¥æœŸï¼Œåªè¦ä½ æƒ³åˆ°çš„éƒ½èƒ½è·å–ï¼Œå¦‚è·å–æœ¬å¹´æ€»å¤©æ•°&lt;code>DaysInYear&lt;/code>ã€è·å–æœ¬æœˆæ€»å¤©æ•°&lt;code>DaysInMonth&lt;/code>ã€è·å–æœ¬å¹´ç¬¬å‡ å¤©ã€ è·å–æœ¬å‘¨ç¬¬å‡ å¤©ï¼š&lt;code>DayOfXxx&lt;/code>ã€è·å–å…·ä½“æ—¥æœŸæˆ–æ—¶é—´&lt;code>DateTime&lt;/code>ã€è·å–å½“å‰ä¸–çºª&lt;code>Century&lt;/code>ã€è·å–å½“å‰å¹´ä»£Decadeåå¹´æœªä¸€ä¸ªå¹´ä»£ã€å¹´æœˆæ—¥æ—¶åˆ†ç§’æ¯«ç±³å¾®ç§’çº³ç§’ã€æ—¶é—´æˆ³å°±ä¸è¯´äº†ã€‚è·å–æ—¶åŒº&lt;code>Timezone&lt;/code>ã€è·å–ä½ç½®&lt;code>Location&lt;/code>ã€è·å–è·ç¦»UTCæ—¶åŒºçš„åç§»é‡ï¼Œå•ä½ç§’&lt;code>Offset&lt;/code>ã€è·å–å½“å‰åŒºåŸŸ&lt;code>Locale&lt;/code>ã€ è·å–å½“å‰æ˜Ÿåº§&lt;code>Constellation&lt;/code>ã€è·å–å½“å‰å­£èŠ‚&lt;code>Season&lt;/code>&lt;/p>
&lt;p>è·å–å¹´é¾„&lt;code>Age&lt;/code>ã€‚ï¼ˆä½ å°±è¯´å¼ºä¸å¼ºå¤§~ï¼‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–å¹´é¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2002-01-01 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Age&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 17
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–å½“å‰æ˜Ÿåº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">SetLocale&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;en&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Constellation&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// Leo
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">SetLocale&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;zh-CN&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Constellation&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// ç‹®å­åº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–æ—¶åŒº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetTimezone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PRC&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Timezone&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetTimezone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Timezone&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// JST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–ä½ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetTimezone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PRC&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Location&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// PRC
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetTimezone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Location&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// Asia/Tokyo
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–è·ç¦»UTCæ—¶åŒºçš„åç§»é‡ï¼Œå•ä½ç§’
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetTimezone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PRC&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Offset&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 28800
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetTimezone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Tokyo&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Offset&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 32400
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–å½“å‰åŒºåŸŸ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Locale&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// en
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">SetLocale&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;zh-CN&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Locale&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// zh-CN
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–æœ¬æœˆç¬¬å‡ å¤©
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">DayOfMonth&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 5
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è·å–æœ¬æœˆç¬¬å‡ å‘¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">WeekOfMonth&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´å¤šç¤ºä¾‹&lt;a class="link" href="https://github.com/golang-module/carbon" target="_blank" rel="noopener"
>å‚è€ƒ&lt;/a>&lt;/p>
&lt;h4 id="æ—¶é—´è¾“å‡º">
&lt;a href="#%e6%97%b6%e9%97%b4%e8%be%93%e5%87%ba" class="header-anchor">#&lt;/a>
æ—¶é—´è¾“å‡º
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>æ—¶é—´è¾“å‡ºæ˜¯&lt;code>ToXxxString&lt;/code>æ–¹æ³•ã€‚ï¼ˆä½ èƒ½æƒ³åˆ°çš„æ ¼å¼éƒ½èƒ½è¾“å‡ºğŸ˜‚ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„ï¼šå¢å¼ºç‰ˆæœ‰ä¸€ä¸ªå‘ï¼šå½“æˆ‘ä»¬ç›´æ¥è¾“å‡º&lt;code>Carbon&lt;/code>å¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨&lt;code>String&lt;/code>æ–¹æ³•ï¼Œè¿™ä¸ª&lt;code>String&lt;/code>æ–¹æ³•ä¼šå°†æ—¶åŒº&lt;strong>æ”¹æˆæœ¬åœ°&lt;/strong>ã€‚è‹¥ä¸å¸Œæœ›ä¿®æ”¹æ—¶åŒºï¼Œè¯·ä¸è¦è°ƒç”¨&lt;code>String&lt;/code>æ–¹æ³•ï¼Œç”¨åˆ«çš„è½¬å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œå¦‚&lt;code>ToDateTimeString&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ToString&lt;/code>æ–¹æ³•ä¸ºè¾“å‡ºtimeåŒ…çš„é»˜è®¤æ ¼å¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¾“å‡ºæŒ‡å®šå¸ƒå±€çš„å­—ç¬¦ä¸²&lt;code>Layout&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¾“å‡ºæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²(å¦‚æœä½¿ç”¨çš„å­—æ¯ä¸æ ¼å¼åŒ–å­—ç¬¦å†²çªæ—¶ï¼Œè¯·ä½¿ç”¨\ç¬¦å·è½¬ä¹‰è¯¥å­—ç¬¦&lt;code>Format&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡ºç®€å†™æ—¥æœŸå­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15.999999999&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToShortDateString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 20200805
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡ºç®€å†™æ—¶é—´å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15.999999999&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToShortTimeString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 131415
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡ºç®€å†™æ—¶é—´å­—ç¬¦ä¸²ï¼ŒåŒ…å«æ¯«ç§’
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15.999999999&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToShortTimeMilliString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 131415.999
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡ºç®€å†™æ—¶é—´å­—ç¬¦ä¸²ï¼ŒåŒ…å«å¾®ç§’
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15.999999999&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToShortTimeMicroString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 131415.999999
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡ºç®€å†™æ—¶é—´å­—ç¬¦ä¸²ï¼ŒåŒ…å«çº³ç§’
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15.999999999&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToShortTimeNanoString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 131415.999999999
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡º UnixDate æ ¼å¼å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToUnixDateString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// Wed Aug 5 13:14:15 CST 2020
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡º RFC3339 æ ¼å¼å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05T13:14:15.999999999+08:00&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToRfc3339String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05T13:14:15+08:00
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡º&amp;#34;2006-01-02 15:04:05.999999999 -0700 MST&amp;#34;æ ¼å¼å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 2020-08-05 13:14:15.999999 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡º &amp;#34;Jan 2, 2006&amp;#34; æ ¼å¼å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToFormattedDateString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// Aug 5, 2020
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡º &amp;#34;Mon, Jan 2, 2006&amp;#34; æ ¼å¼å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToFormattedDayDateString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// Wed, Aug 5, 2020
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡ºæŒ‡å®šå¸ƒå±€çš„å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Layout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ISO8601Layout&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2020-08-05T13:14:15+08:00
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Layout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;20060102150405&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 20200805131415
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Layout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2006å¹´01æœˆ02æ—¥ 15æ—¶04åˆ†05ç§’&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2020å¹´08æœˆ05æ—¥ 13æ—¶14åˆ†15ç§’
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Layout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;It is 2006-01-02 15:04:05&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// It is 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡ºæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²(å¦‚æœä½¿ç”¨çš„å­—æ¯ä¸æ ¼å¼åŒ–å­—ç¬¦å†²çªæ—¶ï¼Œè¯·ä½¿ç”¨\ç¬¦å·è½¬ä¹‰è¯¥å­—ç¬¦)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;YmdHis&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 20200805131415
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Yå¹´mæœˆdæ—¥ Hæ—¶iåˆ†sç§’&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2020å¹´08æœˆ05æ—¥ 13æ—¶14åˆ†15ç§’
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;l jS \\o\\f F Y h:i:s A&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// Wednesday 5th of August 2020 01:14:15 PM
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2020-08-05 13:14:15&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;\\I\\t \\i\\s Y-m-d H:i:s&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// It is 2020-08-05 13:14:15
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´å¤šç¤ºä¾‹&lt;a class="link" href="https://github.com/golang-module/carbon" target="_blank" rel="noopener"
>å‚è€ƒ&lt;/a>&lt;/p>
&lt;p>æ›´å¤šæ ¼å¼åŒ–è¾“å‡ºç¬¦å·è¯·æŸ¥çœ‹é™„å½• &lt;a class="link" href="https://github.com/golang-module/carbon/blob/master/README.cn.md#format-sign-table" target="_blank" rel="noopener"
>æ ¼å¼åŒ–ç¬¦å·è¡¨&lt;/a>&lt;/p>
&lt;h5 id="è¾“å‡ºç»“æ„ä½“">
&lt;a href="#%e8%be%93%e5%87%ba%e7%bb%93%e6%9e%84%e4%bd%93" class="header-anchor">#&lt;/a>
è¾“å‡ºç»“æ„ä½“
&lt;/h5>&lt;p>æ—¶é—´è¾“å‡ºä¸ä»…èƒ½å¤Ÿè¾“å‡ºæŒ‡å®šå­—ç¬¦ä¸²&lt;code>ToXxxString&lt;/code>ï¼Œè¿˜èƒ½è¾“å‡ºåˆ°æŒ‡å®šçš„ç»“æ„ä½“ç±»å‹&lt;code>ToXxxStruct&lt;/code>ï¼Œç”¨ä¸åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æŒ‡å®šæ—¥æœŸæ—¶é—´æ ¼å¼ã€‚åªä¸è¿‡è¾“å‡ºçš„ç»“æ„ä½“ç±»å‹åªæœ‰Dateå’ŒTimeç»„åˆçš„ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;encoding/json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/golang-module/carbon/v2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Student&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Birthday1&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateTime&lt;/span> &lt;span class="s">`json:&amp;#34;birthday1&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Birthday2&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Date&lt;/span> &lt;span class="s">`json:&amp;#34;birthday2&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">Student&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Birthday1&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">SubYears&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateTimeStruct&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Birthday2&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">carbon&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">SubYears&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">ToDateStruct&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">marshal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">json&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Marshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">marshal&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// {&amp;#34;birthday1&amp;#34;:&amp;#34;2019-05-15 14:57:07&amp;#34;,&amp;#34;birthday2&amp;#34;:&amp;#34;2014-05-15&amp;#34;}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Student&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">json&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unmarshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">marshal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Birthday1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2019-05-15 15:00:27
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Birthday2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 2014-05-15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>&lt;code>carbon&lt;/code>æä¾›äº†å¾ˆå¤šçš„å®ç”¨æ–¹æ³•ï¼Œå¦å¤–&lt;code>time&lt;/code>çš„æ–¹æ³•å®ƒä¹Ÿèƒ½ä½¿ç”¨ï¼Œä½¿å¾—å®ƒçš„åŠŸèƒ½éå¸¸å¼ºå¤§ã€‚æ—¶é—´å…¶å®æ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„é—®é¢˜ï¼Œè€ƒè™‘åˆ°æ—¶åŒºã€é—°ç§’ã€å„åœ°çš„å¤ä»¤æ—¶ç­‰ï¼Œè‡ªå·±å¤„ç†èµ·æ¥ç®€ç›´æ˜¯ç«è‘¬åœºã€‚å¹¸å¥½æœ‰è¿™äº›åº“(â”¬ï¼¿â”¬)&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>carbon GitHub ä»“åº“ï¼š &lt;a class="link" href="https://github.com/uniplaces/carbon" target="_blank" rel="noopener"
>https://github.com/uniplaces/carbon&lt;/a>&lt;/li>
&lt;li>å¢å¼ºç‰ˆcarbon GitHub ä»“åº“ï¼š &lt;a class="link" href="https://github.com/golang-module/carbon" target="_blank" rel="noopener"
>https://github.com/golang-module/carbon&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2020/02/14/godailylib/carbon/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ carbon&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Godotenv Introduction</title><link>https://arlettebrook.github.io/p/godotenv-introduction/</link><pubDate>Sun, 12 May 2024 14:29:33 +0800</pubDate><guid>https://arlettebrook.github.io/p/godotenv-introduction/</guid><description>&lt;hr>
&lt;h2 id="ç®€ä»‹">
&lt;a href="#%e7%ae%80%e4%bb%8b" class="header-anchor">#&lt;/a>
ç®€ä»‹
&lt;/h2>&lt;p>&lt;a class="link" href="https://12factor.net/" target="_blank" rel="noopener"
>twelve-factor&lt;/a>åº”ç”¨æå€¡å°†é…ç½®å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­ã€‚ä»»ä½•ä»å¼€å‘ç¯å¢ƒåˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶éœ€è¦ä¿®æ”¹çš„ä¸œè¥¿éƒ½ä»ä»£ç æŠ½å–åˆ°ç¯å¢ƒå˜é‡é‡Œã€‚ ä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœåŒä¸€å°æœºå™¨è¿è¡Œå¤šä¸ªé¡¹ç›®ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡å®¹æ˜“å†²çªï¼Œä¸å®ç”¨ã€‚&lt;a class="link" href="https://github.com/joho/godotenv" target="_blank" rel="noopener"
>godotenv&lt;/a>åº“ä»&lt;code>.env&lt;/code>æ–‡ä»¶ä¸­è¯»å–é…ç½®ï¼Œ ç„¶åå­˜å‚¨åˆ°ç¨‹åºçš„ç¯å¢ƒå˜é‡ä¸­ã€‚åœ¨ä»£ç ä¸­å¯ä»¥ä½¿ç”¨è¯»å–éå¸¸æ–¹ä¾¿ã€‚&lt;code>godotenv&lt;/code>æºäºä¸€ä¸ª Ruby çš„å¼€æºé¡¹ç›®&lt;a class="link" href="https://github.com/bkeepers/dotenv" target="_blank" rel="noopener"
>dotenv&lt;/a>ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>ç¬¬ä¸‰æ–¹åº“éœ€è¦å…ˆå®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/joho/godotenv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/joho/godotenv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;nameï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ageï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;AGE&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶ååœ¨å¯æ‰§è¡Œç¨‹åºç›¸åŒç›®å½•ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ª&lt;code>.env&lt;/code>æ–‡ä»¶ï¼ˆå¯ä»¥ç»™ideå®‰è£…æ’ä»¶ï¼Œæ£€æŸ¥&lt;code>.env&lt;/code>æ–‡ä»¶è¯­æ³•ï¼Œå®‰è£…ç”¨çš„äººå¤šçš„ã€‚å¦‚GoLandï¼š.env files supportï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">NAME&lt;/span>&lt;span class="o">=&lt;/span>arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">AGE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">18&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nameï¼š arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ageï¼š &lt;span class="m">18&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯è§ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;code>godotenv&lt;/code>è¯»å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„&lt;code>.env&lt;/code>æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­ä½¿ç”¨&lt;code>key=value&lt;/code>çš„æ ¼å¼ï¼Œæ¯è¡Œä¸€ä¸ªé”®å€¼å¯¹ã€‚ è°ƒç”¨&lt;code>godotenv.Load()&lt;/code>å³å¯åŠ è½½ï¼Œå¯ç›´æ¥è°ƒç”¨&lt;code>os.Getenv(&amp;quot;key&amp;quot;)&lt;/code>è¯»å–,&lt;code>os.Getenv&lt;/code>æ˜¯ç”¨æ¥è¯»å–ç¯å¢ƒå˜é‡çš„ï¼šwindowsä¸Šä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†ç¯å¢ƒå˜é‡é€šå¸¸éƒ½æ˜¯å¤§å†™ï¼Œå»ºè®®ç”¨å¤§å†™ã€‚æ²¡æ‰¾åˆ°è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;GOPATH&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// ä¼šè¿”å›GOPAHTç¯å¢ƒå˜é‡çš„å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="åŸºæœ¬ä½¿ç”¨">
&lt;a href="#%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
åŸºæœ¬ä½¿ç”¨
&lt;/h2>&lt;h3 id="è‡ªåŠ¨åŠ è½½">
&lt;a href="#%e8%87%aa%e5%8a%a8%e5%8a%a0%e8%bd%bd" class="header-anchor">#&lt;/a>
è‡ªåŠ¨åŠ è½½
&lt;/h3>&lt;p>å¦‚æœä½ æœ‰ç¨‹åºå‘˜çš„ä¼˜è‰¯ä¼ ç»Ÿâ€”â€”æ‡’ï¼Œä½ å¯èƒ½è¿&lt;code>Load&lt;/code>æ–¹æ³•éƒ½ä¸æƒ³è‡ªå·±è°ƒç”¨ã€‚æ²¡å…³ç³»ï¼Œ&lt;code>godotenv&lt;/code>ç»™ä½ æ‡’çš„æƒåŠ›ï¼&lt;/p>
&lt;p>å¯¼å…¥&lt;code>github.com/joho/godotenv/autoload&lt;/code>ï¼Œé…ç½®ä¼šè‡ªåŠ¨è¯»å–ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="s">&amp;#34;github.com/joho/godotenv/autoload&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;NAME&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;age: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;AGE&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œç”±äºä»£ç ä¸­æ²¡æœ‰æ˜¾å¼ç”¨åˆ°&lt;code>godotenv&lt;/code>åº“ï¼Œéœ€è¦ä½¿ç”¨ç©ºå¯¼å…¥ï¼Œå³å¯¼å…¥æ—¶åŒ…åå‰æ·»åŠ ä¸€ä¸ª&lt;code>_&lt;/code>ã€‚ä½œç”¨ï¼šè‡ªåŠ¨è°ƒç”¨&lt;code>init&lt;/code>å‡½æ•°ã€‚&lt;/p>
&lt;p>çœ‹&lt;code>autoload&lt;/code>åŒ…çš„æºç ï¼Œå…¶å®å°±æ˜¯åº“å¸®ä½ è°ƒç”¨äº†&lt;code>Load&lt;/code>æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">autoload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> You can just read the .env file on import just by doing
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> import _ &amp;#34;github.com/joho/godotenv/autoload&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> And bob&amp;#39;s your mother&amp;#39;s brother
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/joho/godotenv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»”ç»†çœ‹æ³¨é‡Šï¼Œç¨‹åºå‘˜çš„æ¶è¶£å‘³ğŸ˜‚ï¼&lt;/p>
&lt;hr>
&lt;h3 id="åŠ è½½è‡ªå®šä¹‰æ–‡ä»¶">
&lt;a href="#%e5%8a%a0%e8%bd%bd%e8%87%aa%e5%ae%9a%e4%b9%89%e6%96%87%e4%bb%b6" class="header-anchor">#&lt;/a>
åŠ è½½è‡ªå®šä¹‰æ–‡ä»¶
&lt;/h3>&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŠ è½½çš„æ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„&lt;code>.env&lt;/code>æ–‡ä»¶ã€‚å½“ç„¶æˆ‘ä»¬å¯ä»¥åŠ è½½ä»»æ„åç§°çš„æ–‡ä»¶ï¼Œæ–‡ä»¶ä¹Ÿä¸å¿…ä»¥&lt;code>.env&lt;/code>ä¸ºåç¼€ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/joho/godotenv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;common&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;.env.production&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;.env.development&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;NAME&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;VERSION&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;database: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;DATABASE&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>common&lt;/code>æ–‡ä»¶å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">NAME&lt;/span>&lt;span class="o">=&lt;/span>awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">VERSION&lt;/span>&lt;span class="o">=&lt;/span>0.0.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>.env.development&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DATABASE&lt;/span>&lt;span class="o">=&lt;/span>sqlite
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>.env.production&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DATABASE&lt;/span>&lt;span class="o">=&lt;/span>mysql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: 0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">database: mysql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„äº‹é¡¹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>Load&lt;/code>æ¥æ”¶å¤šä¸ªæ–‡ä»¶åä½œä¸ºå‚æ•°ï¼Œå¦‚æœä¸ä¼ å…¥æ–‡ä»¶åï¼Œé»˜è®¤è¯»å–&lt;code>.env&lt;/code>æ–‡ä»¶çš„å†…å®¹ã€‚&lt;/li>
&lt;li>å½“æŒ‡å®šäº†ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œé»˜è®¤çš„&lt;code>.env&lt;/code>æ–‡ä»¶ä¼šå¤±æ•ˆï¼Œé™¤éä½ åŠ è¿›å»ã€‚&lt;/li>
&lt;li>å¦‚æœå¤šä¸ªæ–‡ä»¶ä¸­å­˜åœ¨åŒä¸€ä¸ªé”®ï¼Œé‚£ä¹ˆå…ˆå‡ºç°çš„ä¼˜å…ˆï¼Œåå‡ºç°çš„ä¸ç”Ÿæ•ˆã€‚æ‰€ä»¥ï¼Œä¸Šé¢è¾“å‡ºçš„&lt;code>database&lt;/code>æ˜¯mysqlã€‚
&lt;ol>
&lt;li>åŸå› ï¼šå…ˆå‡ºç°çš„å·²ç»åŠ è½½åˆ°ç¯å¢ƒå˜é‡ä¸­äº†ï¼Œé»˜è®¤ä¸ä¼šè¦†ç›–ç¯å¢ƒå˜é‡ä¸­çš„å€¼ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>ä½¿ç”¨&lt;code>Load&lt;/code>æ–¹æ³•åŠ è½½çš„ç¯å¢ƒå˜é‡ä¸ä¼šè¦†ç›–é»˜è®¤çš„ç¯å¢ƒå˜é‡ï¼Œè¦è¦†ç›–è¯·ç”¨&lt;code>Overload&lt;/code>æ–¹æ³•ã€‚
&lt;ol>
&lt;li>ä½¿ç”¨è¿™ä¸ªåŠ è½½ï¼Œä¸Šé¢è¾“å‡ºçš„&lt;code>database&lt;/code>æ˜¯sqliteã€‚ä¸ä¿¡ä½ å¯ä»¥è¯•è¯•&amp;hellip;&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>ä»¥ä¸Šä¸¤ç§æ–¹æ³•éƒ½ä¼šå¯¹ç¯å¢ƒå˜é‡çš„å‰¯æœ¬ï¼Œè¿›è¡Œæ·»åŠ æˆ–ä¿®æ”¹ã€‚åé¢ä¼šä»‹ç»ï¼Œ&lt;a class="link" href="#%e4%b8%8d%e5%ad%98%e5%85%a5%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f" >ä¸å­˜å…¥ç¯å¢ƒå˜é‡&lt;/a>ã€‚&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="æ³¨é‡Š">
&lt;a href="#%e6%b3%a8%e9%87%8a" class="header-anchor">#&lt;/a>
æ³¨é‡Š
&lt;/h3>&lt;p>&lt;code>.env&lt;/code>æ–‡ä»¶ä¸­å¯ä»¥æ·»åŠ æ³¨é‡Šï¼Œæ³¨é‡Šä»¥&lt;code>#&lt;/code>å¼€å§‹ï¼Œç›´åˆ°è¯¥è¡Œç»“æŸã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">app&lt;/span> &lt;span class="nx">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">NAME&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">awesome&lt;/span> &lt;span class="nx">web&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">current&lt;/span> &lt;span class="nx">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">VERSION&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mf">0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="yaml">
&lt;a href="#yaml" class="header-anchor">#&lt;/a>
YAML
&lt;/h3>&lt;p>&lt;code>.env&lt;/code>æ–‡ä»¶è¿˜å¯ä»¥ä½¿ç”¨ YAML æ ¼å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">NAME&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">awesome&lt;/span> &lt;span class="nx">web&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">VERSION&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="s">&amp;#34;github.com/joho/godotenv/autoload&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;NAME&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;VERSION&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: 0.0.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šyamlæ ¼å¼ä¸æ”¯æŒåµŒå¥—ã€‚å®˜æ–¹è§£é‡Šï¼šæ”¯æŒ YAML(ish) é£æ ¼ã€‚&lt;/p>
&lt;hr>
&lt;h3 id="ä¸å­˜å…¥ç¯å¢ƒå˜é‡">
&lt;a href="#%e4%b8%8d%e5%ad%98%e5%85%a5%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f" class="header-anchor">#&lt;/a>
ä¸å­˜å…¥ç¯å¢ƒå˜é‡
&lt;/h3>&lt;h4 id="ä»æ–‡ä»¶è¯»å–">
&lt;a href="#%e4%bb%8e%e6%96%87%e4%bb%b6%e8%af%bb%e5%8f%96" class="header-anchor">#&lt;/a>
ä»æ–‡ä»¶è¯»å–
&lt;/h4>&lt;p>&lt;code>godotenv&lt;/code>å…è®¸ä¸å°†&lt;code>.env&lt;/code>æ–‡ä»¶å†…å®¹å­˜å…¥ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨&lt;code>godotenv.Read()&lt;/code>è¿”å›ä¸€ä¸ª&lt;code>map[string]string&lt;/code>ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/joho/godotenv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">myEnv&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;NAME&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;VERSION&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼š&lt;/p>
&lt;ol>
&lt;li>ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­çš„é”®å€¼å¯¹ï¼Œä¼šä¿å­˜åœ¨è¿”å›çš„&lt;code>map[string]string&lt;/code>ä¸­ï¼Œé”®åä¸é…ç½®é”®å¿…é¡»åŒåã€‚&lt;/li>
&lt;li>ç›´æ¥æ“ä½œ&lt;code>map&lt;/code>ï¼Œç®€å•ç›´æ¥ï¼&lt;/li>
&lt;li>è¿™æ ·å°±ä¸ä¼šå°†ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­çš„å˜é‡å­˜å…¥ç¯å¢ƒå˜é‡ã€‚&lt;/li>
&lt;li>&lt;code>Read&lt;/code>å¯ä»¥æ¥æ”¶æ–‡ä»¶è·¯å¾„ï¼Œç”¨äºæŒ‡å®šé…ç½®æ–‡ä»¶ã€‚é»˜è®¤&lt;code>./.env&lt;/code>,ä¸&lt;code>Load&lt;/code>ä¸€è‡´ã€‚&lt;/li>
&lt;/ol>
&lt;h4 id="ä»string-byteä¸­è¯»å–é…ç½®">
&lt;a href="#%e4%bb%8estring-byte%e4%b8%ad%e8%af%bb%e5%8f%96%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
ä»&lt;code>string, byte&lt;/code>ä¸­è¯»å–é…ç½®
&lt;/h4>&lt;p>é™¤äº†è¯»å–æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ä»&lt;code>string&lt;/code>ä¸­è¯»å–é…ç½®ï¼Œå®ƒä¸ä¼šä¿®æ”¹ç¯å¢ƒï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/joho/godotenv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stringContent&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">name: awesome web
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">version: 0.0.1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">byteContent&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">name: awesome web byte
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">version: 1.0.1`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">myEnvWithString&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unmarshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stringContent&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">myEnvWithByte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">UnmarshalBytes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">byteContent&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnvWithString&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnvWithString&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;--------UnmarshalBytes--------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnvWithByte&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnvWithByte&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>é€šè¿‡&lt;code>Unmarshal&lt;/code>æ–¹æ³•ï¼Œå¯ä»¥ä»å­—ç¬¦ä¸²ä¸­è¯»å–envæ–‡ä»¶ã€‚å­˜å‚¨åœ¨è¿”å›å€¼map[string]stringç±»å‹ä¸­ã€‚&lt;/li>
&lt;li>é€šè¿‡&lt;code>UnmarshalBytes&lt;/code>æ–¹æ³•ï¼Œå¯ä»¥ä»å­—èŠ‚åˆ‡ç‰‡ä¸­è¯»å–envæ–‡ä»¶ã€‚ä¹Ÿæ˜¯å­˜å‚¨åœ¨mapä¸­ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: 0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------UnmarshalBytes--------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: awesome web byte
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: 1.0.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ä»ioreaderè·å–é…ç½®">
&lt;a href="#%e4%bb%8eioreader%e8%8e%b7%e5%8f%96%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
ä»&lt;code>io.Reader&lt;/code>è·å–é…ç½®
&lt;/h4>&lt;p>é™¤äº†ä»¥ä¸Šæ–¹æ³•å¤–ï¼Œè¿˜å¯ä»¥ä»&lt;code>io.Reader&lt;/code>ä¸­è¯»å–envæ–‡ä»¶ã€‚è¿™ä¸ªä¹Ÿä¸ä¼šä¿®æ”¹ç¯å¢ƒã€‚&lt;/p>
&lt;p>åªè¦å®ç°äº†&lt;code>io.Reader&lt;/code>æ¥å£ï¼Œå°±èƒ½ä½œä¸ºæ•°æ®æºã€‚å¯ä»¥ä»æ–‡ä»¶ï¼ˆ&lt;code>os.File&lt;/code>ï¼‰ï¼Œç½‘ç»œï¼ˆ&lt;code>net.Conn&lt;/code>ï¼‰ï¼Œ&lt;code>bytes.Buffer&lt;/code>ç­‰å¤šç§æ¥æºè¯»å–ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;bytes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/joho/godotenv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.env&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">myEnv&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;NAME&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;VERSION&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBuffer&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: awesome web @buffer&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version: 0.0.1 @buffer&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">myEnv&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">myEnv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>é€šè¿‡&lt;code>Parse&lt;/code>æ–¹æ³•ï¼Œå¯ä»¥ä¸­ioä¸­è¯»å–envæ–‡ä»¶ã€‚ä»å­—ç¬¦ä¸²ä¸­è¯»å–æ˜¯&lt;code>Unmarshal&lt;/code>æ–¹æ³•ï¼ŒäºŒè€…ä¸ä¸€æ ·ã€‚&lt;/li>
&lt;li>è¯»å–çš„é…ç½®éƒ½ä¿å­˜åœ¨mapä¸­ï¼Œæ²¡æœ‰å­˜å…¥ç¯å¢ƒå˜é‡ã€‚mapé”®ä¸é…ç½®é”®å¿…é¡»åŒåã€‚é€šè¿‡&lt;code>os.Getenv&lt;/code>æŒ‡å®šçš„å¯ä»¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†å»ºè®®å¤§å†™ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: 0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: awesome web @buffer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: 0.0.1 @buffer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ç”Ÿæˆenvæ–‡ä»¶orå­—ç¬¦ä¸²">
&lt;a href="#%e7%94%9f%e6%88%90env%e6%96%87%e4%bb%b6or%e5%ad%97%e7%ac%a6%e4%b8%b2" class="header-anchor">#&lt;/a>
ç”Ÿæˆ&lt;code>.env&lt;/code>æ–‡ä»¶orå­—ç¬¦ä¸²
&lt;/h2>&lt;p>å¯ä»¥é€šè¿‡ç¨‹åºç”Ÿæˆä¸€ä¸ª&lt;code>.env&lt;/code>æ–‡ä»¶çš„å†…å®¹ï¼Œå¯ä»¥ç›´æ¥å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;bytes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/joho/godotenv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBuffer&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;NAME=awesome web @write&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteByte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;VERSION=0.0.1 @write&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">envMap&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">envMap&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;./write.env&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stringEnv&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Marshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">envMap&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stringEnv&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>é€šè¿‡&lt;code>Write&lt;/code>æ–¹æ³•ï¼Œå¯ä»¥å°†mapä¸­çš„ç¯å¢ƒå˜é‡ï¼Œå†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ã€‚&lt;/li>
&lt;li>é€šè¿‡&lt;code>Marshal&lt;/code>æ–¹æ³•ï¼Œå¯ä»¥å°†mapä¸­çš„ç¯å¢ƒå˜é‡ï¼Œåºåˆ—åŒ–æˆå­—ç¬¦ä¸²&lt;/li>
&lt;/ol>
&lt;p>è¿è¡Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ&lt;code>write.env&lt;/code>æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">NAME&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s2">&amp;#34;awesome web @write&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">VERSION&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s2">&amp;#34;0.0.1 @write&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>TTYè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;awesome web @write&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">VERSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;0.0.1 @write&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="å‘½ä»¤è¡Œæ¨¡å¼">
&lt;a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%a8%a1%e5%bc%8f" class="header-anchor">#&lt;/a>
å‘½ä»¤è¡Œæ¨¡å¼
&lt;/h2>&lt;p>&lt;code>godotenv&lt;/code>è¿˜æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œçš„æ¨¡å¼ã€‚è¦ä½¿ç”¨å®ƒï¼Œå…ˆè¦ç¡®ä¿å‘½ä»¤å®‰è£…åˆ°&lt;code>$GOPATH/bin&lt;/code>ç›®å½•ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go install github.com/joho/godotenv/cmd/godotenv@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‘½ä»¤è¡Œç¨‹åºï¼Œæºç å¾ˆç®€å•ï¼Œåœ¨&lt;code>github.com/joho/godotenv/cmd/godotenv&lt;/code>è·¯å¾„ä¸‹,ç”¨&lt;code>flag&lt;/code>åº“è§£æçš„å‘½ä»¤è¡Œå‚æ•°ã€‚ä½œç”¨æ˜¯è¯»å–envæ–‡ä»¶ï¼Œå†™å…¥ç¯å¢ƒå˜é‡ä¸­ï¼Œ&lt;strong>ä¸ç”¨åœ¨ç¨‹åºä¸­è°ƒç”¨godotenv&lt;/strong>ã€‚æœ€åæ˜¯é€šè¿‡&lt;code>Exec&lt;/code>æ–¹æ³•è°ƒç”¨&lt;code>Load&lt;/code>æ–¹æ³•å®ç°çš„ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»çœ‹ä¸€ä¸‹ã€‚&lt;/p>
&lt;p>å®‰è£…åä¹‹åå¯ä»¥æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼Œå¤§è‡´ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ godotenv -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">godotenv &lt;span class="o">[&lt;/span>-o&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-f ENV_FILE_PATHS&lt;span class="o">]&lt;/span> COMMAND_ARGS
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>-oï¼šæ˜¯å¦è¦†ç›–ç¯å¢ƒå˜é‡ï¼Œé»˜è®¤false&lt;/li>
&lt;li>-fï¼šå­—æ®µenvæ–‡ä»¶ï¼Œé»˜è®¤./.env&lt;/li>
&lt;li>å‰©ä½™å‚æ•°ï¼šå¯åŠ¨çš„ç¨‹åº&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;NAME&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;VERSION&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;USERNAME&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>./.env&lt;/code>æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">NAME: &lt;span class="s1">&amp;#39;awesome web&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">VERSION: 0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USERNAME: arlettebrook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨godotenvå‘½ä»¤å¯åŠ¨ç¨‹åº,æ¼”ç¤ºå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ godotenv go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Lenovo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ godotenv -o go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arlettebrook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€æ¬¡æ²¡æœ‰è¦†ç›–USERNAME,ç¬¬äºŒæ¬¡è¦†ç›–äº†ã€‚&lt;/p>
&lt;p>é€šè¿‡godotenvå‘½ä»¤è¡Œç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨å†è‡ªå·±çš„ç¨‹åºä¸­è°ƒç”¨godotenvè¯»å–envæ–‡ä»¶ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æŒ‡å®šç¯å¢ƒå¯åŠ¨">
&lt;a href="#%e6%8c%87%e5%ae%9a%e7%8e%af%e5%a2%83%e5%90%af%e5%8a%a8" class="header-anchor">#&lt;/a>
æŒ‡å®šç¯å¢ƒå¯åŠ¨
&lt;/h2>&lt;p>å®è·µä¸­ï¼Œä¸€èˆ¬ä¼šæ ¹æ®&lt;code>APP_ENV&lt;/code>ç¯å¢ƒå˜é‡çš„å€¼åŠ è½½ä¸åŒçš„æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/joho/godotenv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">env&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;LEARN_ENV&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">env&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">env&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;development&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.env.&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">env&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">godotenv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Load&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;NAME&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;VERSION&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;database: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;DATABASE&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å…ˆè¯»å–ç¯å¢ƒå˜é‡&lt;code>LEARN_ENV&lt;/code>ï¼Œç„¶åè¯»å–å¯¹åº”çš„&lt;code>.env.&lt;/code> + envï¼Œæœ€åè¯»å–é»˜è®¤çš„&lt;code>.env&lt;/code>æ–‡ä»¶ã€‚&lt;/p>
&lt;p>å‰é¢ä¹Ÿæåˆ°è¿‡ï¼Œå…ˆè¯»å–åˆ°çš„ä¼˜å…ˆã€‚æˆ‘ä»¬å¯ä»¥åœ¨é»˜è®¤çš„&lt;code>.env&lt;/code>æ–‡ä»¶ä¸­é…ç½®åŸºç¡€ä¿¡æ¯å’Œä¸€äº›é»˜è®¤çš„å€¼ï¼Œ å¦‚æœåœ¨å¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒéœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆåœ¨å¯¹åº”çš„&lt;code>.env.development/.env.test/.env.production&lt;/code>æ–‡ä»¶ä¸­å†é…ç½®ä¸€æ¬¡å³å¯ã€‚&lt;/p>
&lt;p>&lt;code>.env&lt;/code>æ–‡ä»¶å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-YAML" data-lang="YAML">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">NAME&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;awesome web&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">VERSION&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">DATABASE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mongodb&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>.env.development&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-SHELL" data-lang="SHELL">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DATABASE&lt;/span>&lt;span class="o">=&lt;/span>sqlite
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>.env.production&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-YAML" data-lang="YAML">&lt;span class="line">&lt;span class="cl">&lt;span class="l">DATABASE=mysql&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºæ¼”ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># é»˜è®¤æ˜¯å¼€å‘ç¯å¢ƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: 0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">database: sqlite &lt;span class="c1"># ç”¨Loadä¸ä¼šè¦†ç›–ï¼Œæ‰€ä»¥è¡¨ç¤ºmongodb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è®¾ç½®ä¸ºç”Ÿæˆç¯å¢ƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">LEARN_ENV&lt;/span>&lt;span class="o">=&lt;/span>production go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: 0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">database: mysql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ä¸€ç‚¹æºç ">
&lt;a href="#%e4%b8%80%e7%82%b9%e6%ba%90%e7%a0%81" class="header-anchor">#&lt;/a>
ä¸€ç‚¹æºç 
&lt;/h2>&lt;p>(å…¶å®ä½ åº”è¯¥æå‰çœ‹ä¸€ä¸‹æºç ~)&lt;/p>
&lt;p>&lt;code>godotenv&lt;/code>è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨&lt;code>os.Getenv&lt;/code>è®¿é—®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// github.com/joho/godotenv/godotenv.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">loadFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">filename&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">overload&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">envMap&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">readFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">currentEnv&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rawEnv&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Environ&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">rawEnvLine&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">rawEnv&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">key&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rawEnvLine&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;=&amp;#34;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">currentEnv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">envMap&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">currentEnv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">overload&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Setenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› ä¸º&lt;code>godotenv&lt;/code>è°ƒç”¨&lt;code>os.Setenv&lt;/code>å°†é”®å€¼å¯¹è®¾ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­äº†ã€‚å°±æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™ä¿®æ”¹äº†ç¯å¢ƒå˜é‡ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡ä»‹ç»äº†&lt;code>godotenv&lt;/code>åº“çš„åŸºç¡€å’Œé«˜çº§ç”¨æ³•ã€‚&lt;code>godotenv&lt;/code>çš„æºç ä¹Ÿæ¯”è¾ƒå¥½è¯»ï¼Œæœ‰æ—¶é—´ï¼Œæœ‰å…´è¶£çš„ç«¥é‹å»ºè®®ä¸€çœ‹~&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>godotenv GitHub ä»“åº“ï¼š &lt;a class="link" href="https://github.com/joho/godotenv" target="_blank" rel="noopener"
>https://github.com/joho/godotenv&lt;/a>&lt;/li>
&lt;li>åŸæ–‡ï¼š&lt;a class="link" href="https://darjun.github.io/2020/02/12/godailylib/godotenv/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ godotenv&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Cast Introduction</title><link>https://arlettebrook.github.io/p/cast-introduction/</link><pubDate>Sat, 11 May 2024 18:45:59 +0800</pubDate><guid>https://arlettebrook.github.io/p/cast-introduction/</guid><description>&lt;hr>
&lt;h2 id="ä»‹ç»">
&lt;a href="#%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
ä»‹ç»
&lt;/h2>&lt;p>ä»Šå¤©æˆ‘ä»¬å†æ¥ä»‹ç»Steve Franciaï¼ˆspf13ï¼‰å¤§ç¥çš„å¦ä¸€ä¸ªåº“&lt;a class="link" href="https://github.com/spf13/cast" target="_blank" rel="noopener"
>cast&lt;/a>ã€‚&lt;code>cast&lt;/code>æ˜¯ä¸€ä¸ªå°å·§ã€å®ç”¨çš„ç±»å‹è½¬æ¢åº“ï¼Œç”¨äºå°†ä¸€ä¸ªç±»å‹è½¬ä¸ºå¦ä¸€ä¸ªç±»å‹ã€‚å®ƒæä¾›äº†ä¸€å¥—é«˜æ•ˆä¸”å®‰å…¨çš„ç±»å‹è½¬æ¢åŠŸèƒ½ã€‚ æœ€åˆå¼€å‘&lt;code>cast&lt;/code>æ˜¯ç”¨åœ¨&lt;a class="link" href="https://gohugo.io/" target="_blank" rel="noopener"
>hugo&lt;/a>ä¸­çš„ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>å…ˆå®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/spf13/cast
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/cast&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ToString
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// apple
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 8
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">8.31&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 8.31
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;one time&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="c1">// one time
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">foo&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;one more time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">foo&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// one more time
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ToInt
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 8
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">8.31&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 8
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;8&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 8
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">eight&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">eight&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 8
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®é™…ä¸Šï¼Œ&lt;code>cast&lt;/code>å®ç°äº†å¤šç§å¸¸è§ç±»å‹ä¹‹é—´çš„ç›¸äº’è½¬æ¢ï¼Œè¿”å›æœ€ç¬¦åˆç›´è§‰çš„ç»“æœã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>nil&lt;/code>è½¬ä¸º&lt;code>string&lt;/code>çš„ç»“æœä¸º&lt;code>&amp;quot;&amp;quot;&lt;/code>ï¼Œè€Œä¸æ˜¯&lt;code>&amp;quot;nil&amp;quot;&lt;/code>ï¼›&lt;/li>
&lt;li>&lt;code>true&lt;/code>è½¬ä¸º&lt;code>string&lt;/code>çš„ç»“æœä¸º&lt;code>&amp;quot;true&amp;quot;&lt;/code>ï¼Œè€Œ&lt;code>true&lt;/code>è½¬ä¸º&lt;code>int&lt;/code>çš„ç»“æœä¸º&lt;code>1&lt;/code>ï¼›&lt;/li>
&lt;li>&lt;code>interface{}&lt;/code>è½¬ä¸ºå…¶ä»–ç±»å‹ï¼Œè¦çœ‹å®ƒé‡Œé¢å­˜å‚¨çš„å€¼ç±»å‹ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™äº›ç±»å‹åŒ…æ‹¬æ‰€æœ‰çš„åŸºæœ¬ç±»å‹ï¼ˆæ•´å½¢ã€æµ®ç‚¹å‹ã€å¸ƒå°”å€¼å’Œå­—ç¬¦ä¸²ï¼‰ã€ç©ºæ¥å£ã€&lt;code>nil&lt;/code>ï¼Œæ—¶é—´ï¼ˆ&lt;code>time.Time&lt;/code>ï¼‰ã€æ—¶é•¿ï¼ˆ&lt;code>time.Duration&lt;/code>ï¼‰ä»¥åŠå®ƒä»¬çš„åˆ‡ç‰‡ç±»å‹ï¼Œ è¿˜æœ‰&lt;code>map[string]Type&lt;/code>ï¼ˆå…¶ä¸­&lt;code>Type&lt;/code>ä¸ºå‰é¢æåˆ°çš„ç±»å‹ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">byte&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="kt">float32&lt;/span> &lt;span class="kt">float64&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int8&lt;/span> &lt;span class="kt">int16&lt;/span> &lt;span class="kt">int32&lt;/span> &lt;span class="kt">int64&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">uint8&lt;/span> &lt;span class="kt">uint16&lt;/span> &lt;span class="kt">uint32&lt;/span> &lt;span class="kt">uint64&lt;/span> &lt;span class="kt">uint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Duration&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="åŸºæœ¬ä½¿ç”¨">
&lt;a href="#%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
åŸºæœ¬ä½¿ç”¨
&lt;/h2>&lt;p>&lt;code>cast&lt;/code>æä¾›äº†ä¸¤ç»„å‡½æ•°ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>ToType&lt;/code>ï¼ˆå…¶ä¸­&lt;code>Type&lt;/code>å¯ä»¥ä¸ºä»»ä½•æ”¯æŒçš„ç±»å‹ï¼‰ï¼Œå°†å‚æ•°è½¬æ¢ä¸º&lt;code>Type&lt;/code>ç±»å‹ã€‚å¦‚æœæ— æ³•è½¬æ¢ï¼Œè¿”å›&lt;code>Type&lt;/code>ç±»å‹çš„é›¶å€¼æˆ–&lt;code>nil&lt;/code>ï¼›&lt;/li>
&lt;li>&lt;code>ToTypeE&lt;/code>ä»¥ E ç»“å°¾ï¼Œè¿”å›è½¬æ¢åçš„å€¼å’Œä¸€ä¸ª&lt;code>error&lt;/code>ã€‚è¿™ç»„å‡½æ•°å¯ä»¥åŒºåˆ†å‚æ•°ä¸­å®é™…å­˜å‚¨äº†é›¶å€¼ï¼Œè¿˜æ˜¯è½¬æ¢å¤±è´¥äº†ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="æºç åˆ†æ">
&lt;a href="#%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90" class="header-anchor">#&lt;/a>
æºç åˆ†æï¼š
&lt;/h3>&lt;p>å®ç°ä¸Šå¤§éƒ¨åˆ†ä»£ç éƒ½ç±»ä¼¼ï¼Œ&lt;code>ToType&lt;/code>åœ¨å†…éƒ¨è°ƒç”¨&lt;code>ToTypeE&lt;/code>å‡½æ•°ï¼Œè¿”å›ç»“æœå¹¶å¿½ç•¥é”™è¯¯ã€‚&lt;code>ToType&lt;/code>å‡½æ•°çš„å®ç°åœ¨æ–‡ä»¶&lt;code>cast.go&lt;/code>ä¸­ï¼Œ è€Œ&lt;code>ToTypeE&lt;/code>å‡½æ•°çš„å®ç°åœ¨æ–‡ä»¶&lt;code>caste.go&lt;/code>ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// cast/cast.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">ToBool&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">ToBoolE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">v&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ToDuration casts an interface to a time.Duration type.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">ToDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Duration&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">ToDurationE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">v&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>ToTypeE&lt;/code>å‡½æ•°éƒ½æ¥å—ä»»æ„ç±»å‹çš„å‚æ•°ï¼ˆ&lt;code>interface{}&lt;/code>ï¼‰ï¼Œç„¶åä½¿ç”¨ç±»å‹æ–­è¨€æ ¹æ®å…·ä½“çš„ç±»å‹æ¥æ‰§è¡Œä¸åŒçš„è½¬æ¢ã€‚å¦‚æœæ— æ³•è½¬æ¢ï¼Œè¿”å›é”™è¯¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// cast/caste.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ToBoolE casts an interface to a bool type.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">ToBoolE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">indirect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="kd">type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">int64&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">int32&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">int16&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">int8&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">uint&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">uint64&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">uint32&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">uint16&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">uint8&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">float64&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">float32&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Duration&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseBool&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">json&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Number&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">ToInt64E&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to bool&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to bool&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆè°ƒç”¨&lt;code>indirect&lt;/code>å‡½æ•°å°†å‚æ•°ä¸­å¯èƒ½çš„æŒ‡é’ˆå»æ‰ï¼ˆè¿”å›åŸå§‹ç±»å‹ï¼‰ã€‚å¦‚æœç±»å‹æœ¬èº«ä¸æ˜¯æŒ‡é’ˆï¼Œé‚£ä¹ˆç›´æ¥è¿”å›ã€‚å¦åˆ™è¿”å›æŒ‡é’ˆæŒ‡å‘çš„å€¼ã€‚ å¾ªç¯ç›´åˆ°è¿”å›ä¸€ä¸ªéæŒ‡é’ˆçš„å€¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">indirect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">t&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">reflect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">TypeOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Kind&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nx">reflect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ptr&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Avoid creating a reflect.Value if it&amp;#39;s not a pointer.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">reflect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ValueOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Kind&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">reflect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ptr&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsNil&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Elem&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Interface&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥ï¼Œä¸‹é¢ä»£ç è¾“å‡ºéƒ½æ˜¯ 8ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/cast&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> ä¸makeçš„åŒºåˆ«ï¼š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> newåˆ›å»ºæŒ‡å‘è¯¥ç±»å‹é›¶å€¼çš„æŒ‡é’ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> makeåˆ›å»ºæŒ‡å®šçš„ç±»å‹ï¼Œå¹¶åˆ†é…å†…å­˜ï¼Œç”¨ä¸å¼•ç”¨ç±»å‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">p&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">p&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 8
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pp&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">p&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">pp&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 8
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ—¶é—´å’Œæ—¶é•¿è½¬æ¢">
&lt;a href="#%e6%97%b6%e9%97%b4%e5%92%8c%e6%97%b6%e9%95%bf%e8%bd%ac%e6%8d%a2" class="header-anchor">#&lt;/a>
æ—¶é—´å’Œæ—¶é•¿è½¬æ¢
&lt;/h3>&lt;p>æ—¶é—´ç±»å‹çš„è½¬æ¢ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// cast/caste.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">ToTimeInDefaultLocationE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">location&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Location&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">tim&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">indirect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="kd">type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">StringToDateInDefaultLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">location&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">json&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Number&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">ToInt64E&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err1&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to Time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">int64&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">int32&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">uint&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">uint64&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">uint32&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to Time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®ä¼ å…¥çš„ç±»å‹æ‰§è¡Œä¸åŒçš„å¤„ç†ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæ˜¯&lt;code>time.Time&lt;/code>ï¼Œç›´æ¥è¿”å›ï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯æ•´å‹ï¼Œå°†å‚æ•°ä½œä¸ºæ—¶é—´æˆ³ï¼ˆè‡ª UTC æ—¶é—´&lt;code>1970.01.01 00:00:00&lt;/code>åˆ°ç°åœ¨çš„ç§’æ•°ï¼‰è°ƒç”¨&lt;code>time.Unix&lt;/code>ç”Ÿæˆæ—¶é—´ã€‚&lt;code>Unix&lt;/code>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šç§’ï¼Œç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šçº³ç§’ï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œè°ƒç”¨&lt;code>StringToDateInDefaultLocation&lt;/code>å‡½æ•°ä¾æ¬¡å°è¯•ä»¥ä¸‹é¢è¿™äº›æ—¶é—´æ ¼å¼è°ƒç”¨&lt;code>time.Parse&lt;/code>è§£æè¯¥å­—ç¬¦ä¸²ã€‚å¦‚æœæŸä¸ªæ ¼å¼è§£ææˆåŠŸï¼Œåˆ™è¿”å›è·å¾—çš„&lt;code>time.Time&lt;/code>ã€‚å¦åˆ™è§£æå¤±è´¥ï¼Œè¿”å›é”™è¯¯ï¼›&lt;/li>
&lt;li>å…¶ä»–ä»»ä½•ç±»å‹éƒ½æ— æ³•è½¬æ¢ä¸º&lt;code>time.Time&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// cast/caste.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timeFormats&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">timeFormat&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Keep common formats at the top.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;2006-01-02&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNoTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC3339&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;2006-01-02T15:04:05&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNoTimezone&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="c1">// iso8601 without timezone
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC1123Z&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC1123&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNamedTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC822Z&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC822&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNamedTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC850&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNamedTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;2006-01-02 15:04:05.999999999 -0700 MST&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericAndNamedTimezone&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="c1">// Time.String()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;2006-01-02T15:04:05-0700&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericTimezone&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="c1">// RFC3339 without timezone hh:mm colon
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;2006-01-02 15:04:05Z0700&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericTimezone&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="c1">// RFC3339 without T or timezone hh:mm colon
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;2006-01-02 15:04:05&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNoTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ANSIC&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNoTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UnixDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNamedTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RubyDate&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;2006-01-02 15:04:05Z07:00&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;02 Jan 2006&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNoTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;2006-01-02 15:04:05 -07:00&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;2006-01-02 15:04:05 -0700&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatNumericTimezone&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Kitchen&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatTimeOnly&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stamp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatTimeOnly&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StampMilli&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatTimeOnly&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StampMicro&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatTimeOnly&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StampNano&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormatTimeOnly&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">StringToDateInDefaultLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">location&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Location&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">parseDateWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">location&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">timeFormats&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">parseDateWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">location&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Location&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">formats&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">timeFormat&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">e&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">format&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">formats&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">e&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">format&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">e&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Some time formats have a zone name, but no offset, so it gets
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// put in that zone name (not the default one passed in to us), but
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// without that zone&amp;#39;s offset. So set the location manually.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">format&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">typ&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="nx">timeFormatNamedTimezone&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">location&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">location&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">month&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">day&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Date&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hour&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">min&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sec&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Clock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">month&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">day&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">hour&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">min&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sec&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Nanosecond&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">location&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to parse date: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ—¶é•¿ç±»å‹çš„è½¬æ¢ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// cast/caste.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">ToDurationE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Duration&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">indirect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="kd">type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Duration&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int32&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int16&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">uint&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">uint64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">uint32&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">uint16&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">uint8&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Duration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">ToInt64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">float32&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">float64&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Duration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">ToFloat64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ContainsAny&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;nsuÂµmh&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;ns&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">json&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Number&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="kt">float64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Float64&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Duration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to Duration&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®ä¼ å…¥çš„ç±»å‹è¿›è¡Œä¸åŒçš„å¤„ç†ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæ˜¯&lt;code>time.Duration&lt;/code>ç±»å‹ï¼Œç›´æ¥è¿”å›ï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯æ•´å‹æˆ–æµ®ç‚¹å‹ï¼Œå°†å…¶æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸º&lt;code>time.Duration&lt;/code>ç±»å‹ï¼Œå•ä½é»˜è®¤ä¸º&lt;code>ns&lt;/code>ï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼šå¦‚æœå­—ç¬¦ä¸²ä¸­æœ‰æ—¶é—´å•ä½ç¬¦å·&lt;code>nsuÂµmh&lt;/code>ï¼Œç›´æ¥è°ƒç”¨&lt;code>time.ParseDuration&lt;/code>è§£æï¼›å¦åˆ™åœ¨å­—ç¬¦ä¸²åæ‹¼æ¥&lt;code>ns&lt;/code>å†è°ƒç”¨&lt;code>time.ParseDuration&lt;/code>è§£æï¼›&lt;/li>
&lt;li>å…¶ä»–ç±»å‹è§£æå¤±è´¥ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="æ—¶é—´æ—¶é•¿ç¤ºä¾‹">
&lt;a href="#%e6%97%b6%e9%97%b4%e6%97%b6%e9%95%bf%e7%a4%ba%e4%be%8b" class="header-anchor">#&lt;/a>
æ—¶é—´ã€æ—¶é•¿ç¤ºä¾‹ï¼š
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/cast&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timestamp&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">1579615973&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timeStr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;2020-01-21 22:13:48&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 2020-01-22 06:31:50.5068465 +0800 CST m=+0.000997701
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timestamp&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 2020-01-21 22:12:53 +0800 CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timeStr&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 2020-01-21 22:13:48 +0000 UTC
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;1m30s&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ns&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">30000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">strWithS&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;130s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">strWithoutNs&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;130&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 1m30s
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ns&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 30Âµs
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">strWithS&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 2m10s
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">strWithoutNs&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// 130ns
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è½¬æ¢ä¸ºåˆ‡ç‰‡">
&lt;a href="#%e8%bd%ac%e6%8d%a2%e4%b8%ba%e5%88%87%e7%89%87" class="header-anchor">#&lt;/a>
è½¬æ¢ä¸ºåˆ‡ç‰‡
&lt;/h3>&lt;p>å®é™…ä¸Šï¼Œè¿™äº›å‡½æ•°çš„å®ç°åŸºæœ¬ç±»ä¼¼ã€‚ä½¿ç”¨ç±»å‹æ–­è¨€åˆ¤æ–­ç±»å‹ã€‚å¦‚æœå°±æ˜¯è¦è¿”å›çš„ç±»å‹ï¼Œç›´æ¥è¿”å›ã€‚å¦åˆ™æ ¹æ®ç±»å‹è¿›è¡Œç›¸åº”çš„è½¬æ¢ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä¸»è¦åˆ†æä¸¤ä¸ªå®ç°ï¼š&lt;code>ToIntSliceE&lt;/code>å’Œ&lt;code>ToStringSliceE&lt;/code>ã€‚&lt;code>ToBoolSliceE/ToDurationSliceE&lt;/code>ä¸&lt;code>ToIntSliceE&lt;/code>åŸºæœ¬ç›¸åŒã€‚&lt;/p>
&lt;p>é¦–å…ˆæ˜¯&lt;code>ToIntSliceE&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ToIntSliceE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="p">([]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to []int&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="kd">type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">kind&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">reflect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">TypeOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Kind&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">kind&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">reflect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Slice&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">reflect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Array&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">reflect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ValueOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Len&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Len&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">val&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">ToIntE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Interface&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to []int&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">val&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to []int&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæ˜¯&lt;code>nil&lt;/code>ï¼Œç›´æ¥è¿”å›é”™è¯¯ï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯&lt;code>[]int&lt;/code>ï¼Œä¸ç”¨è½¬æ¢ï¼Œç›´æ¥è¿”å›ï¼›&lt;/li>
&lt;li>å¦‚æœä¼ å…¥ç±»å‹ä¸º&lt;strong>åˆ‡ç‰‡&lt;/strong>æˆ–&lt;strong>æ•°ç»„&lt;/strong>ï¼Œæ–°å»ºä¸€ä¸ª&lt;code>[]int&lt;/code>ï¼Œå°†åˆ‡ç‰‡æˆ–æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è½¬ä¸º&lt;code>int&lt;/code>æ”¾åˆ°è¯¥&lt;code>[]int&lt;/code>ä¸­ã€‚æœ€åè¿”å›è¿™ä¸ª&lt;code>[]int&lt;/code>ï¼›&lt;/li>
&lt;li>å…¶ä»–æƒ…å†µï¼Œä¸èƒ½è½¬æ¢ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;code>ToStringSliceE&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ToStringSliceE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="p">([]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="kd">type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">u&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int8&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">u&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">u&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int32&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">u&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int64&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">u&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">float32&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">u&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">float64&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">u&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fields&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">error&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">.([]&lt;/span>&lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{}:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">ToStringE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to []string&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to []string&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®ä¼ å…¥çš„å‚æ•°ç±»å‹ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæ˜¯&lt;code>[]interface{}&lt;/code>ï¼Œå°†è¯¥å‚æ•°ä¸­æ¯ä¸ªå…ƒç´ è½¬ä¸º&lt;code>string&lt;/code>ï¼Œè¿”å›ç»“æœåˆ‡ç‰‡ï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯&lt;code>[]string&lt;/code>ï¼Œä¸éœ€è¦è½¬æ¢ï¼Œç›´æ¥è¿”å›ï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯&lt;code>interface{}&lt;/code>ï¼Œå°†å‚æ•°è½¬ä¸º&lt;code>string&lt;/code>ï¼Œè¿”å›åªåŒ…å«è¿™ä¸ªå€¼çš„åˆ‡ç‰‡ï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯&lt;code>string&lt;/code>ï¼Œè°ƒç”¨&lt;code>strings.Fields&lt;/code>å‡½æ•°æŒ‰ç©ºç™½ç¬¦å°†å‚æ•°æ‹†åˆ†ï¼Œè¿”å›æ‹†åˆ†åçš„å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼›&lt;/li>
&lt;li>å…¶ä»–æƒ…å†µï¼Œä¸èƒ½è½¬æ¢ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="è½¬æ¢ä¸ºåˆ‡ç‰‡ç¤ºä¾‹">
&lt;a href="#%e8%bd%ac%e6%8d%a2%e4%b8%ba%e5%88%87%e7%89%87%e7%a4%ba%e4%be%8b" class="header-anchor">#&lt;/a>
è½¬æ¢ä¸ºåˆ‡ç‰‡ç¤ºä¾‹ï¼š
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/cast&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sliceOfInt&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arrayOfInt&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ToIntSlice
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToIntSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sliceOfInt&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// [1 3 7]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToIntSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arrayOfInt&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// [8 12 0]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sliceOfInterface&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sliceOfString&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;abc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;dj&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;banana&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stringFields&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34; abc def hij hah&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">common&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{}(&lt;/span>&lt;span class="mi">37&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ToStringSliceE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToStringSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sliceOfInterface&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// [1 2 apple]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToStringSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sliceOfString&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">toStringFields&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToStringSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stringFields&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">toStringFields&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">toStringFields&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// [abc dj banana hah] 4 // [abc def hij]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToStringSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">common&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// [37]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ToToDurationSlice
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">stringDurationSlice&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;1m23s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;22h&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">intDurationArray&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">222222222&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">88383838888&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDurationSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stringDurationSlice&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// [1m23s 22h0m0s]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToDurationSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">intDurationArray&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// [222.222222ms 1m28.383838888s 0s]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">stringBoolSlice&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;false&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;T&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">intBoolArray&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToBoolSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stringBoolSlice&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// /*[true false true false true]*/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToBoolSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">intBoolArray&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// [true false true]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è½¬ä¸ºmapstringtypeç±»å‹">
&lt;a href="#%e8%bd%ac%e4%b8%bamapstringtype%e7%b1%bb%e5%9e%8b" class="header-anchor">#&lt;/a>
è½¬ä¸º&lt;code>map[string]Type&lt;/code>ç±»å‹
&lt;/h3>&lt;p>&lt;code>cast&lt;/code>åº“èƒ½å°†ä¼ å…¥çš„å‚æ•°è½¬ä¸º&lt;code>map[string]Type&lt;/code>ç±»å‹ï¼Œ&lt;code>Type&lt;/code>ä¸ºä¸Šé¢æ”¯æŒçš„ç±»å‹ã€‚&lt;/p>
&lt;p>å…¶å®åªéœ€è¦åˆ†æä¸€ä¸ª&lt;code>ToStringMapStringE&lt;/code>å‡½æ•°å°±å¯ä»¥äº†ï¼Œå…¶ä»–çš„å®ç°åŸºæœ¬ä¸€æ ·ã€‚&lt;code>ToStringMapStringE&lt;/code>è¿”å›&lt;code>map[string]string&lt;/code>ç±»å‹çš„å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ToStringMapStringE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">m&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="kd">type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">)]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">)]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">)]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">jsonStringToObject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unable to cast %#v of type %T to map[string]string&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®ä¼ å…¥çš„å‚æ•°ç±»å‹ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæ˜¯&lt;code>map[string]string&lt;/code>ï¼Œä¸ç”¨è½¬æ¢ï¼Œç›´æ¥è¿”å›ï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯&lt;code>map[string]interface{}&lt;/code>ï¼Œå°†æ¯ä¸ªå€¼è½¬ä¸º&lt;code>string&lt;/code>å­˜å…¥æ–°çš„ mapï¼Œæœ€åè¿”å›æ–°çš„ mapï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯&lt;code>map[interface{}]string&lt;/code>ï¼Œå°†æ¯ä¸ªé”®è½¬ä¸º&lt;code>string&lt;/code>å­˜å…¥æ–°çš„ mapï¼Œæœ€åè¿”å›æ–°çš„ mapï¼›&lt;/li>
&lt;li>å¦‚æœæ˜¯&lt;code>map[interface{}]interface{}&lt;/code>ï¼Œå°†æ¯ä¸ªé”®å’Œå€¼éƒ½è½¬ä¸º&lt;code>string&lt;/code>å­˜å…¥æ–°çš„ mapï¼Œæœ€åè¿”å›æ–°çš„ mapï¼›&lt;/li>
&lt;li>&lt;strong>å¦‚æœæ˜¯&lt;code>string&lt;/code>ç±»å‹ï¼Œ&lt;code>cast&lt;/code>å°†å®ƒçœ‹æˆä¸€ä¸ª JSON ä¸²ï¼Œè§£æè¿™ä¸ª JSON åˆ°&lt;code>map[string]string&lt;/code>ï¼Œç„¶åè¿”å›ç»“æœ&lt;/strong>ï¼›&lt;/li>
&lt;li>å…¶ä»–æƒ…å†µï¼Œè¿”å›é”™è¯¯ã€‚&lt;/li>
&lt;/ul>
&lt;p>è½¬æ¢ä¸ºæ˜ å°„ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/cast&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;job&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;developer&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;banana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m3&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;orange&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;job&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;designer&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m4&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;strawberry&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">29&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">18&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;hi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">jsonStr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">`{&amp;#34;name&amp;#34;:&amp;#34;bibi&amp;#34;, &amp;#34;job&amp;#34;:&amp;#34;manager&amp;#34;}`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToStringMapString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">m1&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// map[job:developer name:apple]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToStringMapString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">m2&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// map[age:18 name:banana]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToStringMapString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">m3&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// map[job:designer name:orange]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToStringMapString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">m4&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// map[18:hi age:29 name:strawberry]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ToStringMapString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">jsonStr&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// map[job:manager name:bibi]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>&lt;code>cast&lt;/code>åº“èƒ½åœ¨å‡ ä¹æ‰€æœ‰å¸¸è§ç±»å‹ä¹‹é—´è½¬æ¢ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚ä»£ç é‡ä¹Ÿå¾ˆå°ï¼Œæœ‰æ—¶é—´å»ºè®®è¯»è¯»æºç ã€‚å¸¸ç”¨äºè§£æé…ç½®æ•°æ®ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://github.com/spf13/cast" target="_blank" rel="noopener"
>cast&lt;/a> GitHub ä»“åº“&lt;/li>
&lt;li>åŸä½œè€…ï¼š&lt;a class="link" href="https://darjun.github.io/2020/01/20/godailylib/cast/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ cast&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Logrus Introduction</title><link>https://arlettebrook.github.io/p/logrus-introduction/</link><pubDate>Thu, 09 May 2024 10:31:23 +0800</pubDate><guid>https://arlettebrook.github.io/p/logrus-introduction/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://github.com/sirupsen/logrus" target="_blank" rel="noopener"
>Logrus&lt;/a> æ˜¯ç›®å‰ GitHub ä¸Š Star æ•°é‡æœ€å¤šçš„ Go æ—¥å¿—åº“ã€‚å°½ç®¡ç›®å‰ Logrus å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œä¸å†å¼•å…¥æ–°åŠŸèƒ½ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒå·²ç»æ­»äº†ã€‚Logrus ä»å°†ç»§ç»­ç»´æŠ¤ï¼Œä»¥ç¡®ä¿å®‰å…¨æ€§ã€é”™è¯¯ä¿®å¤å’Œæé«˜æ€§èƒ½ã€‚ä½œä¸º Go ç¤¾åŒºä¸­æœ€å—æ¬¢è¿çš„æ—¥å¿—åº“ä¹‹ä¸€ï¼ŒLogrus æœ€å¤§çš„è´¡çŒ®æ˜¯æ¨åŠ¨äº† Go ç¤¾åŒºå¹¿æ³›ä½¿ç”¨ç»“æ„åŒ–ï¼ˆå¦‚JSONæ ¼å¼)çš„æ—¥å¿—è®°å½•ã€‚è‘—åçš„ Docker é¡¹ç›®å°±åœ¨ä½¿ç”¨ Logrus è®°å½•æ—¥å¿—ï¼Œè¿™è¿›ä¸€æ­¥è¯æ˜äº†å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„å¯é æ€§å’Œå®ç”¨æ€§ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="ç‰¹ç‚¹">
&lt;a href="#%e7%89%b9%e7%82%b9" class="header-anchor">#&lt;/a>
ç‰¹ç‚¹
&lt;/h2>&lt;p>Logrus å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸ Go log æ ‡å‡†åº“ API å®Œå…¨å…¼å®¹ï¼Œè¿™æ„å‘³ç€ä»»ä½•ä½¿ç”¨ log æ ‡å‡†åº“çš„ä»£ç éƒ½å¯ä»¥å°†æ—¥å¿—åº“æ— ç¼åˆ‡æ¢åˆ° Logrusã€‚&lt;/li>
&lt;li>æ”¯æŒä¸ƒç§æ—¥å¿—çº§åˆ«ï¼š&lt;code>Trace&lt;/code>ã€&lt;code>Debug&lt;/code>ã€&lt;code>Info&lt;/code>ã€&lt;code>Warn&lt;/code>ã€&lt;code>Error&lt;/code>ã€&lt;code>Fatal&lt;/code>ã€&lt;code>Panic&lt;/code>ã€‚&lt;/li>
&lt;li>æ”¯æŒç»“æ„åŒ–æ—¥å¿—è®°å½•ï¼ˆkey-value å½¢å¼ï¼Œå®¹æ˜“è¢«ç¨‹åºè§£æï¼Œå¦‚ JSON æ ¼å¼ï¼‰ï¼Œé€šè¿‡ Filed æœºåˆ¶è¿›è¡Œç»“æ„åŒ–çš„æ—¥å¿—è®°å½•ã€‚&lt;/li>
&lt;li>æ”¯æŒè‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ï¼Œå†…ç½®ä¸¤ç§æ ¼å¼ &lt;code>JSONFormatter&lt;/code>ï¼ˆJSON æ ¼å¼ï¼‰ å’Œ &lt;code>TextFormatter&lt;/code>ï¼ˆæ–‡æœ¬æ ¼å¼ï¼‰ï¼Œå¹¶å…è®¸ç”¨æˆ·é€šè¿‡å®ç° &lt;code>Formatter&lt;/code> æ¥å£æ¥è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ã€‚&lt;/li>
&lt;li>æ”¯æŒå¯æ‰©å±•çš„ Hooks æœºåˆ¶ï¼Œå¯ä»¥ä¸ºä¸åŒçº§åˆ«çš„æ—¥å¿—æ·»åŠ  Hooks å°†æ—¥å¿—è®°å½•åˆ°ä¸åŒä½ç½®ï¼Œä¾‹å¦‚å°† &lt;code>Error&lt;/code>ã€&lt;code>Fatal&lt;/code> å’Œ &lt;code>Panic&lt;/code> çº§åˆ«çš„é”™è¯¯æ—¥å¿—å‘é€åˆ° logstashã€kafka ç­‰ã€‚&lt;/li>
&lt;li>æ”¯æŒåœ¨æ§åˆ¶å°è¾“å‡ºå¸¦æœ‰ä¸åŒé¢œè‰²çš„æ—¥å¿—ã€‚&lt;/li>
&lt;li>å¹¶å‘å®‰å…¨ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>ç¬¬ä¸‰æ–¹åº“éœ€è¦å…ˆå®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/sirupsen/logrus
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TraceLevel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Trace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;trace msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Debug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;debug msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Warn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;warn msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;error msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;fatal msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;panic msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>logrus&lt;/code>çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œä¸æ ‡å‡†åº“&lt;code>log&lt;/code>ç±»ä¼¼ã€‚&lt;code>logrus&lt;/code>æ”¯æŒæ›´å¤šçš„æ—¥å¿—çº§åˆ«ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Panic&lt;/code>ï¼šè®°å½•æ—¥å¿—ï¼Œç„¶å&lt;code>panic&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>Fatal&lt;/code>ï¼šè‡´å‘½é”™è¯¯ï¼Œå‡ºç°é”™è¯¯æ—¶ç¨‹åºæ— æ³•æ­£å¸¸è¿è½¬ã€‚è¾“å‡ºæ—¥å¿—åï¼Œç¨‹åºé€€å‡ºï¼›&lt;/li>
&lt;li>&lt;code>Error&lt;/code>ï¼šé”™è¯¯æ—¥å¿—ï¼Œéœ€è¦æŸ¥çœ‹åŸå› ï¼›&lt;/li>
&lt;li>&lt;code>Warn&lt;/code>ï¼šè­¦å‘Šä¿¡æ¯ï¼Œæé†’ç¨‹åºå‘˜æ³¨æ„ï¼›&lt;/li>
&lt;li>&lt;code>Info&lt;/code>ï¼šå…³é”®æ“ä½œï¼Œæ ¸å¿ƒæµç¨‹çš„æ—¥å¿—ï¼›&lt;/li>
&lt;li>&lt;code>Debug&lt;/code>ï¼šä¸€èˆ¬ç¨‹åºä¸­è¾“å‡ºçš„è°ƒè¯•ä¿¡æ¯ï¼›&lt;/li>
&lt;li>&lt;code>Trace&lt;/code>ï¼šå¾ˆç»†ç²’åº¦çš„ä¿¡æ¯ï¼Œä¸€èˆ¬ç”¨ä¸åˆ°ï¼›&lt;/li>
&lt;/ul>
&lt;p>æ—¥å¿—çº§åˆ«ä»ä¸Šå‘ä¸‹ä¾æ¬¡å‡å°ï¼Œ&lt;code>Trace&lt;/code>æœ€å°ï¼Œ&lt;code>Panic&lt;/code>æœ€å¤§ã€‚&lt;code>logrus&lt;/code>æœ‰ä¸€ä¸ªæ—¥å¿—çº§åˆ«ï¼Œä½äºè¿™ä¸ªçº§åˆ«çš„æ—¥å¿—ä¸ä¼šè¾“å‡ºã€‚ é»˜è®¤çš„çº§åˆ«ä¸º&lt;code>InfoLevel&lt;/code>ã€‚æ‰€ä»¥ä¸ºäº†èƒ½çœ‹åˆ°&lt;code>Trace&lt;/code>å’Œ&lt;code>Debug&lt;/code>æ—¥å¿—ï¼Œæˆ‘ä»¬åœ¨&lt;code>main&lt;/code>å‡½æ•°ç¬¬ä¸€è¡Œè®¾ç½®æ—¥å¿—çº§åˆ«ä¸º&lt;code>TraceLevel&lt;/code>ã€‚&lt;/p>
&lt;p>è¿è¡Œç¨‹åºï¼Œéæ ‡å‡†TTYè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T11:31:42+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>trace &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;trace msg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T11:31:42+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>debug &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;debug msg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T11:31:42+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;info msg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T11:31:42+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>warning &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;warn msg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T11:31:42+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>error &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;error msg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T11:31:42+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>fatal &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;fatal msg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> status &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>logrusé»˜è®¤è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯ã€‚æ ¼å¼æ˜¯æ–‡æœ¬æ ¼å¼ï¼Œå³é»˜è®¤çš„Formatteræ˜¯TextFormatterã€‚&lt;/p>
&lt;p>è¿˜æœ‰é»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;code>log.SetFormatter(&amp;amp;log.TextFormatter{})&lt;/code>ï¼ˆå³é»˜è®¤çš„TextFormatterï¼‰æœªè¿æ¥ TTY æ—¶ï¼Œè¾“å‡ºä¸ &lt;a class="link" href="http://godoc.org/github.com/kr/logfmt" target="_blank" rel="noopener"
>logfmt&lt;/a>æ ¼å¼å…¼å®¹ï¼ˆå°±æ˜¯ä¸Šé¢è¾“å‡ºçš„æ ¼å¼ï¼‰ã€‚å½“è¿æ¥TTYæ—¶,ä¼šå¯¹è¾“å‡ºçš„æ—¥å¿—è¿›è¡Œé¢œè‰²ç¼–ç ï¼Œå‚è€ƒå®˜æ–¹å›¾ç‰‡:&lt;img src="https://camo.githubusercontent.com/3177c4e5657f79815e562c79c07469374a68b837e0e7fee919675adcd7f499e6/687474703a2f2f692e696d6775722e636f6d2f505937714d77642e706e67"
loading="lazy"
alt="è¿æ¥ç»ˆç«¯"
>&lt;/p>
&lt;p>ä¸ºäº†ç¡®ä¿å³ä½¿è¿æ¥äº† TTY ä¹Ÿèƒ½å®ç°ä¸å¸¦é¢œè‰²è¾“å‡ºï¼Œè¯·æŒ‰å¦‚ä¸‹æ–¹å¼è®¾ç½®æ ¼å¼åŒ–ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TextFormatter&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DisableColors&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœè¿æ¥äº†TTYæ²¡æœ‰å®ç°é¢œè‰²è¾“å‡ºï¼ˆåŸå› ä¹‹ä¸€ï¼šéæ ‡å‡†TTYã€è‡ªå®šä¹‰çš„Formatterç­‰)ï¼Œéœ€è¦é¢œè‰²è¾“å‡ºï¼Œè¯·æŒ‰å¦‚ä¸‹æ–¹å¼è®¾ç½®æ ¼å¼åŒ–ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TextFormatter&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ForceColors&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// å¼ºåˆ¶è¾“å‡ºé¢œè‰²ï¼ŒåŸç†ï¼šç»•è¿‡TTYæ£€æŸ¥ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">FullTimestamp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// æ˜¾ç¤ºå®Œæ•´çš„æ—¶é—´æˆ³
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç»•è¿‡TTYæ£€æŸ¥æ—¶ä¼šä¸¢å¤±æ—¥æœŸæ—¶é—´ï¼Œæ·»åŠ &lt;code>FullTimestamp: true,&lt;/code>å³å¯æ­£å¸¸æ˜¾ç¤ºã€‚&lt;/p>
&lt;p>åé¢ä¼šä»‹ç»æ›´å¤šæ ¼å¼åŒ–å™¨ã€‚&lt;/p>
&lt;p>ç”±äº&lt;code>logrus.Fatal&lt;/code>ä¼šå¯¼è‡´ç¨‹åºé€€å‡ºï¼Œä¸‹é¢çš„&lt;code>logrus.Panic&lt;/code>ä¸ä¼šæ‰§è¡Œåˆ°ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°è¾“å‡ºä¸­æœ‰ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼Œ&lt;code>time&lt;/code>ã€&lt;code>level&lt;/code>å’Œ&lt;code>msg&lt;/code>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>time&lt;/code>ï¼šè¾“å‡ºæ—¥å¿—çš„æ—¶é—´ï¼›ä¸ºæœ¬åœ°åŒºæ ‡å‡†æ—¶é—´ã€‚
&lt;ul>
&lt;li>è¡¥å……ï¼š+08:00ä¸ºåŒ—äº¬æ ‡å‡†æ—¶é—´ï¼Œæ”¹ä¸ºZä¸ºUTCï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼Œé›¶æ—¶åŒºæ—¶é—´ï¼‰&lt;/li>
&lt;li>Tä¸ºæ—¥æœŸä¸æ—¶é—´çš„åˆ†éš”ç¬¦ã€‚æ˜¯ISOå®šåˆ¶çš„ä¸€ç§æ ‡å‡†æ—¥æœŸæ—¶é—´çš„è¡¨ç¤ºæ–¹å¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>level&lt;/code>ï¼šæ—¥å¿—çº§åˆ«ï¼›&lt;/li>
&lt;li>&lt;code>msg&lt;/code>ï¼šæ—¥å¿—ä¿¡æ¯ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="ä½¿ç”¨">
&lt;a href="#%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
ä½¿ç”¨
&lt;/h2>&lt;h3 id="æ›¿ä»£-go-log-æ ‡å‡†åº“">
&lt;a href="#%e6%9b%bf%e4%bb%a3-go-log-%e6%a0%87%e5%87%86%e5%ba%93" class="header-anchor">#&lt;/a>
æ›¿ä»£ Go log æ ‡å‡†åº“
&lt;/h3>&lt;p>åœ¨&lt;a class="link" href="https://arlettebrook.github.io/p/%e6%b7%b1%e5%85%a5%e6%8e%a2%e7%a9%b6-go-log-%e6%a0%87%e5%87%86%e5%ba%93/" target="_blank" rel="noopener"
>æ·±å…¥æ¢ç©¶ Go log æ ‡å‡†åº“&lt;/a>ä¸€æ–‡ä¸­ä¸¾è¿‡ä¸€ä¸ªä½¿ç”¨ Go log æ ‡å‡†åº“çš„ç®€å•&lt;a class="link" href="https://arlettebrook.github.io/p/%e6%b7%b1%e5%85%a5%e6%8e%a2%e7%a9%b6-go-log-%e6%a0%87%e5%87%86%e5%ba%93/#%e4%bd%bf%e7%94%a8" target="_blank" rel="noopener"
>ç¤ºä¾‹&lt;/a>ï¼Œç°åœ¨å¯ä»¥å°†å…¶æ— ç¼åˆ‡æ¢åˆ° Logrusï¼Œåªéœ€è¦æŠŠ &lt;code>import &amp;quot;log&amp;quot;&lt;/code> æ”¹æˆ &lt;code>import log &amp;quot;github.com/sirupsen/logrus&amp;quot;&lt;/code> å³å¯å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ›¿ä»£ import &amp;#34;log&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Print&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Printf: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;print&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Println&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fatal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fatalf: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fatal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fatalln&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Panic&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panicf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Panicf: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;panic&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panicln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Panicln&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T14:13:43+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>Print
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T14:13:43+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Printf: print&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T14:13:43+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>Println
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T14:13:43+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>fatal &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>Fatal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> status &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è™½ç„¶è¾“å‡ºæ ¼å¼ä¸ä½¿ç”¨ Go log æ ‡å‡†åº“è¡¨ç°ç•¥æœ‰ä¸åŒï¼Œä½†ç¨‹åºæ‰§è¡Œå¹¶ä¸ä¼šæŠ¥é”™ï¼Œè¯´æ˜äºŒè€…å®Œå…¨å…¼å®¹ã€‚&lt;/p>
&lt;h3 id="åŸºæœ¬ä½¿ç”¨">
&lt;a href="#%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
åŸºæœ¬ä½¿ç”¨
&lt;/h3>&lt;h4 id="ä¿®æ”¹æ—¥å¿—çº§åˆ«">
&lt;a href="#%e4%bf%ae%e6%94%b9%e6%97%a5%e5%bf%97%e7%ba%a7%e5%88%ab" class="header-anchor">#&lt;/a>
ä¿®æ”¹æ—¥å¿—çº§åˆ«
&lt;/h4>&lt;p>è°ƒç”¨&lt;code>logrus.SetLevel(level Level)&lt;/code>ï¼Œå°±å¯ä»¥ä¿®æ”¹æ—¥å¿—çº§åˆ«ã€‚&lt;/p>
&lt;p>logrusé»˜è®¤çš„textè®°å½•å™¨æ—¥å¿—çº§åˆ«æ˜¯InfoLevelã€‚è¦æƒ³è¦è¾“å‡ºinfoä»¥ä¸‹çº§åˆ«çš„æ—¥å¿—ï¼Œå°±å¿…é¡»ä¿®æ”¹ã€‚&lt;/p>
&lt;p>å¦‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TraceLevel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>level&lt;/code>å¯é€‰æ‹©ç±»å‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// logrus/logrus.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// PanicLevel level, highest level of severity. Logs and then calls panic with the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// message passed to Debug, Info, ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">PanicLevel&lt;/span> &lt;span class="nx">Level&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">iota&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// FatalLevel level. Logs and then calls `logger.Exit(1)`. It will exit even if the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// logging level is set to Panic.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">FatalLevel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ErrorLevel level. Logs. Used for errors that should definitely be noted.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Commonly used for hooks to send errors to an error tracking service.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ErrorLevel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// WarnLevel level. Non-critical entries that deserve eyes.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">WarnLevel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// InfoLevel level. General operational entries about what&amp;#39;s going on inside the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// application.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">InfoLevel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// DebugLevel level. Usually only enabled when debugging. Very verbose logging.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">DebugLevel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// TraceLevel level. Designates finer-grained informational events than the Debug.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">TraceLevel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="è¾“å‡ºè°ƒç”¨ä¿¡æ¯">
&lt;a href="#%e8%be%93%e5%87%ba%e8%b0%83%e7%94%a8%e4%bf%a1%e6%81%af" class="header-anchor">#&lt;/a>
è¾“å‡ºè°ƒç”¨ä¿¡æ¯
&lt;/h4>&lt;p>è°ƒç”¨&lt;code>logrus.SetReportCaller(true)&lt;/code>ï¼Œä¼šåœ¨è¾“å‡ºæ—¥å¿—ä¸­æ·»åŠ æ–¹æ³•ã€æ–‡ä»¶ä»¥åŠè¡Œå·ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetReportCaller&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºå¤šäº†ä¸¤ä¸ªå­—æ®µï¼š&lt;code>func&lt;/code>ä¸ºå‡½æ•°åï¼Œ&lt;code>file&lt;/code>ä¸ºè°ƒç”¨&lt;code>logrus&lt;/code>ç›¸å…³æ–¹æ³•çš„æ–‡ä»¶åä»¥åŠè¡Œå·ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T14:26:00+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;info msg&amp;#34;&lt;/span> &lt;span class="nv">func&lt;/span>&lt;span class="o">=&lt;/span>main.main &lt;span class="nv">file&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;F:/GoProject/learn
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">/main.go:10&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="æ·»åŠ å­—æ®µ">
&lt;a href="#%e6%b7%bb%e5%8a%a0%e5%ad%97%e6%ae%b5" class="header-anchor">#&lt;/a>
æ·»åŠ å­—æ®µ
&lt;/h4>&lt;p>Logrus é¼“åŠ±ç”¨æˆ·é€šè¿‡æ—¥å¿—å­—æ®µè®°å½•ç»“æ„åŒ–æ—¥å¿—ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>WithFields&lt;/code> å’Œ &lt;code>WithField&lt;/code> ä¸¤ç§å½¢å¼ï¼Œå¹¶ä¸”å¯ä»¥é“¾å¼è°ƒç”¨ã€‚&lt;/p>
&lt;p>å°½é‡åˆ«ç”¨&lt;code>logrus.Fatalf(&amp;quot;Failed to send event %s to topic %s with key %d&amp;quot;)&lt;/code> è¿™ç§çº¯æ–‡æœ¬å½¢å¼ï¼Œå› ä¸ºç»“æ„åŒ–æ—¥å¿—æœ‰åˆ©äºå·¥å…·æå–å¹¶åˆ†ææ—¥å¿—ã€‚&lt;/p>
&lt;p>æœ‰æ—¶å€™éœ€è¦åœ¨è¾“å‡ºä¸­æ·»åŠ ä¸€äº›å­—æ®µï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨&lt;code>logrus.WithField&lt;/code>ï¼ˆæ¥æ”¶å•ä¸ªå­—æ®µï¼‰å’Œ&lt;code>logrus.WithFields&lt;/code>ï¼ˆæ¥æ”¶å¤šä¸ªå­—æ®µï¼‰å®ç°ã€‚ &lt;code>logrus.WithFields&lt;/code>æ¥å—ä¸€ä¸ª&lt;code>logrus.Fields&lt;/code>ç±»å‹çš„å‚æ•°ï¼Œå…¶åº•å±‚å®é™…ä¸Šä¸º&lt;code>map[string]interface{}&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// github.com/sirupsen/logrus/logrus.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Fields&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>äºŒè€…éƒ½å¯ä»¥é“¾å¼è°ƒç”¨ï¼Œä¼šè¿”å›ä¸€ä¸ªæŒ‡å‘Entryç±»å‹çš„ç»“æ„ä½“ï¼ˆæ—¥å¿—æ¡ç›®logrus.Entryï¼‰ï¼Œè¯¥ç»“æ„ä½“ç»‘å®šäº†å„ç§çº§åˆ«çš„æ—¥å¿—æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">WithField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">WithField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;WithFiled&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithFields&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Fields&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;WithFields&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-09T15:22:24+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">info&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">WithFiled&lt;/span> &lt;span class="nx">age&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">arlettebrook&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-09T15:22:24+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">info&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">WithFields&lt;/span> &lt;span class="nx">age&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">arlettebrook&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>é»˜è®¤å­—æ®µ&lt;/strong>ï¼šå¦‚æœåœ¨ä¸€ä¸ªå‡½æ•°ä¸­çš„æ‰€æœ‰æ—¥å¿—éƒ½éœ€è¦æ·»åŠ æŸäº›å­—æ®µï¼Œå¯ä»¥ä½¿ç”¨&lt;code>WithFields&lt;/code>çš„è¿”å›çš„*Entryæ›¿æ¢logrusã€‚è¿™æ ·åç»­è¾“å‡ºéƒ½ä¼šåŒ…å«æŒ‡å®šå­—æ®µï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">withFieldsLog&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithFields&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Fields&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">withFieldsLog&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;error msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">withFieldsLog&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-09T15:37:56+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="kt">error&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;error msg&amp;#34;&lt;/span> &lt;span class="nx">age&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">arlettebrook&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-09T15:37:56+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">info&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span> &lt;span class="nx">age&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">arlettebrook&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨åŒä¸€ä¸ª&lt;code>logrus.Entry&lt;/code>è°ƒä¸åŒçº§åˆ«çš„æ—¥å¿—æ–¹æ³•ï¼Œå³å¯å®ç°æºå¸¦ç›¸åŒçš„å­—æ®µï¼ˆ&lt;strong>é»˜è®¤å­—æ®µ&lt;/strong>ï¼‰ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šé»˜è®¤å­—æ®µä¹Ÿæ”¯æŒé“¾å¼è°ƒç”¨ã€‚&lt;/p>
&lt;h4 id="é‡å®šå‘è¾“å‡º">
&lt;a href="#%e9%87%8d%e5%ae%9a%e5%90%91%e8%be%93%e5%87%ba" class="header-anchor">#&lt;/a>
é‡å®šå‘è¾“å‡º
&lt;/h4>&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ—¥å¿—è¾“å‡ºåˆ°&lt;code>io.Stderr&lt;/code>ã€‚å¯ä»¥è°ƒç”¨&lt;code>logrus.SetOutput&lt;/code>ä¼ å…¥ä¸€ä¸ª&lt;code>io.Writer&lt;/code>å‚æ•°ã€‚åç»­è°ƒç”¨ç›¸å…³æ–¹æ³•æ—¥å¿—å°†å†™åˆ°&lt;code>io.Writer&lt;/code>ä¸­ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å°±èƒ½åƒä»‹ç»&lt;a class="link" href="https://arlettebrook.github.io/p/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%A9%B6-go-log-%E6%A0%87%E5%87%86%E5%BA%93/" target="_blank" rel="noopener"
>log&lt;/a>æ—¶ä¸€æ ·ï¼Œå¯ä»¥æç‚¹äº‹æƒ…äº†ã€‚ä¼ å…¥ä¸€ä¸ª&lt;code>io.MultiWriter&lt;/code>ï¼Œ åŒæ—¶å°†æ—¥å¿—å†™åˆ°&lt;code>bytes.Buffer&lt;/code>ã€æ ‡å‡†è¾“å‡ºå’Œæ–‡ä»¶ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;bytes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;io&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">writer1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">writer2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">writer3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OpenFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./log.txt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">O_WRONLY&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">O_CREATE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mo">0755&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">writer3&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">File&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">writer3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}(&lt;/span>&lt;span class="nx">writer3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;create file log.txt failed: %v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetOutput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MultiWriter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">writer1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">writer2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">writer3&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Buffer:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">writer1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œï¼Œä¼šåœ¨æ–‡ä»¶&lt;code>log.txt&lt;/code>å’Œæ§åˆ¶å°è¾“å‡ºæ—¥å¿—ã€‚&lt;/p>
&lt;h3 id="å¤„ç†ä¸åŒç¯å¢ƒ">
&lt;a href="#%e5%a4%84%e7%90%86%e4%b8%8d%e5%90%8c%e7%8e%af%e5%a2%83" class="header-anchor">#&lt;/a>
å¤„ç†ä¸åŒç¯å¢ƒ
&lt;/h3>&lt;p>Logrus å¹¶æ²¡æœ‰åƒ &lt;a class="link" href="https://github.com/uber-go/zap" target="_blank" rel="noopener"
>zap&lt;/a> é‚£æ ·æä¾›ç°æˆçš„ API æ¥æ”¯æŒåœ¨ä¸åŒçš„ç¯å¢ƒä¸‹ä½¿ç”¨ï¼ˆProduction å’Œ Developmentï¼‰ï¼Œå¦‚æœä½ æƒ³åœ¨ç”Ÿäº§å’Œæµ‹è¯•ç¯å¢ƒä½¿ç”¨ä¸åŒçš„æ ¼å¼è¾“å‡ºæ—¥å¿—ï¼Œåˆ™éœ€è¦é€šè¿‡ä»£ç åˆ¤æ–­åœ¨ä¸åŒç¯å¢ƒè®¾ç½®ä¸åŒçš„ &lt;code>Formatter&lt;/code> æ¥å®ç°ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nested&lt;/span> &lt;span class="s">&amp;#34;github.com/antonfisher/nested-logrus-formatter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å‡è®¾ç¯å¢ƒå˜é‡APP_ENVå·²ç»è¢«è®¾ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">env&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;APP_ENV&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ ¹æ®ç¯å¢ƒè®¾ç½®æ—¥å¿—çº§åˆ«
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">switch&lt;/span> &lt;span class="nx">env&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;development&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åœ¨å¼€å‘ç¯å¢ƒä¸­æ˜¾ç¤ºæ‰€æœ‰æ—¥å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DebugLevel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">nested&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Formatter&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;testing&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åœ¨æµ‹è¯•ç¯å¢ƒä¸­åªæ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯æ—¥å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WarnLevel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;production&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åªæ˜¾ç¤ºé”™è¯¯æ—¥å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ErrorLevel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">JSONFormatter&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ—¥å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DebugLevel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">nested&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Formatter&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä½ è¿˜å¯ä»¥è®¾ç½®æ—¥å¿—æ ¼å¼ã€è¾“å‡ºä½ç½®ç­‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;error log&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Warn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;warn log&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info log&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Debug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;debug log&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">May &lt;span class="m">11&lt;/span> 15:31:46.122 &lt;span class="o">[&lt;/span>ERRO&lt;span class="o">]&lt;/span> error log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">May &lt;span class="m">11&lt;/span> 15:31:46.168 &lt;span class="o">[&lt;/span>WARN&lt;span class="o">]&lt;/span> warn log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">May &lt;span class="m">11&lt;/span> 15:31:46.168 &lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> info log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">May &lt;span class="m">11&lt;/span> 15:31:46.169 &lt;span class="o">[&lt;/span>DEBU&lt;span class="o">]&lt;/span> debug log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">app_env&lt;/span>&lt;span class="o">=&lt;/span>production go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;error log&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2024-05-11T15:31:53+08:00&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">app_env&lt;/span>&lt;span class="o">=&lt;/span>development go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">May &lt;span class="m">11&lt;/span> 15:32:05.563 &lt;span class="o">[&lt;/span>ERRO&lt;span class="o">]&lt;/span> error log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">May &lt;span class="m">11&lt;/span> 15:32:05.609 &lt;span class="o">[&lt;/span>WARN&lt;span class="o">]&lt;/span> warn log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">May &lt;span class="m">11&lt;/span> 15:32:05.609 &lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> info log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">May &lt;span class="m">11&lt;/span> 15:32:05.609 &lt;span class="o">[&lt;/span>DEBU&lt;span class="o">]&lt;/span> debug log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æµ‹è¯•">
&lt;a href="#%e6%b5%8b%e8%af%95" class="header-anchor">#&lt;/a>
æµ‹è¯•
&lt;/h3>&lt;p>å¦‚æœä½ çš„å•å…ƒæµ‹è¯•ç¨‹åºä¸­éœ€è¦æµ‹è¯•æ—¥å¿—å†…å®¹ï¼ŒLogrus æä¾›äº† &lt;code>test.NewNullLogger&lt;/code> æ—¥å¿—è®°å½•å™¨ï¼Œå®ƒåªä¼šè®°å½•æ—¥å¿—ï¼Œä¸è¾“å‡ºä»»ä½•å†…å®¹ã€‚ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;testing&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus/hooks/test&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/stretchr/testify/assert&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestLogrus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">hook&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewNullLogger&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello error&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Equal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">hook&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Entries&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Equal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ErrorLevel&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">hook&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LastEntry&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">Level&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Equal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Hello error&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">hook&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LastEntry&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">Message&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hook&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Reset&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">assert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Nil&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">hook&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LastEntry&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬äºŒä¸ªè¿”å›å€¼æ˜¯ä¸€ä¸ªç»“æ„ä½“:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Hook&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Entries is an array of all entries that have been received by this hook.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// For safe access, use the AllEntries() method, rather than reading this
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// value directly.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Entries&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Entry&lt;/span> &lt;span class="c1">// æ¡ç›®åˆ‡ç‰‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">mu&lt;/span> &lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RWMutex&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ–¹æ³•&lt;code>LastEntry()&lt;/code>è¿”å›&lt;code>Entries&lt;/code>çš„æœ€åä¸€æ¡æ—¥å¿—æ¡ç›®å¯¹è±¡ã€‚&lt;/p>
&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go &lt;span class="nb">test&lt;/span> -run TestLogrus -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===&lt;/span> RUN TestLogrus
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- PASS: TestLogrus &lt;span class="o">(&lt;/span>0.07s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ok github.com/arlettebrook/learn 0.643s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è‡ªå®šä¹‰-logger">
&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89-logger" class="header-anchor">#&lt;/a>
è‡ªå®šä¹‰ Logger
&lt;/h3>&lt;p>é™¤äº†é€šè¿‡ &lt;code>logrus.Info(&amp;quot;Info msg&amp;quot;)&lt;/code> è¿™ç§å¼€ç®±å³ç”¨çš„æ–¹å¼ä½¿ç”¨ Logrus é»˜è®¤çš„ &lt;code>Logger&lt;/code>ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ &lt;code>Logger&lt;/code>ã€‚&lt;/p>
&lt;p>**å®é™…ä¸Šï¼Œè€ƒè™‘åˆ°æ˜“ç”¨æ€§ï¼Œåº“ä¸€èˆ¬ä¼šä½¿ç”¨é»˜è®¤å€¼åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æœ€å¤–å±‚çš„æ–¹æ³•ä¸€èˆ¬éƒ½æ˜¯æ“ä½œè¿™ä¸ªé»˜è®¤å¯¹è±¡ã€‚**ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼æ˜¯&lt;a class="link" href="https://arlettebrook.github.io/p/go%E5%B8%B8%E8%A7%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" target="_blank" rel="noopener"
>å•ä¾‹æ¨¡å¼&lt;/a>ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä¹‹å‰å¥½å‡ ç¯‡æ–‡ç« éƒ½æåˆ°è¿‡è¿™ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>flag&lt;/code>æ ‡å‡†åº“ä¸­çš„&lt;code>CommandLine&lt;/code>å¯¹è±¡ï¼›&lt;/li>
&lt;li>&lt;code>log&lt;/code>æ ‡å‡†åº“ä¸­çš„&lt;code>std&lt;/code>å¯¹è±¡ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸ªæŠ€å·§åº”ç”¨åœ¨å¾ˆå¤šåº“çš„å¼€å‘ä¸­ï¼Œ&lt;code>logrus&lt;/code>ä¹Ÿæ˜¯å¦‚æ­¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// github.com/sirupsen/logrus/exported.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// std is the name of the standard logger in stdlib `log`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">std&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Out&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Formatter&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">TextFormatter&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Hooks&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">LevelHooks&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Level&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">InfoLevel&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ExitFunc&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Exit&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ReportCaller&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">StandardLogger&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">std&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// SetOutput sets the standard logger output.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">SetOutput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">out&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetOutput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// SetFormatter sets the standard logger formatter.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">formatter&lt;/span> &lt;span class="nx">Formatter&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">formatter&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// SetReportCaller sets whether the standard logger will include the calling
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// method as a field.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">SetReportCaller&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">include&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetReportCaller&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">include&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// SetLevel sets the standard logger level.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">level&lt;/span> &lt;span class="nx">Level&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">level&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆï¼Œä½¿ç”¨é»˜è®¤é…ç½®å®šä¹‰ä¸€ä¸ª&lt;code>Logger&lt;/code>å¯¹è±¡&lt;code>std&lt;/code>ï¼Œ&lt;code>SetOutput/SetFormatter/SetReportCaller/SetLevel&lt;/code>è¿™äº›æ–¹æ³•éƒ½æ˜¯è°ƒç”¨&lt;code>std&lt;/code>å¯¹è±¡çš„å¯¹åº”æ–¹æ³•ï¼&lt;/p>
&lt;p>æˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„&lt;code>Logger&lt;/code>å¯¹è±¡ï¼Œä½¿ç”¨æ–¹å¼ä¸ç›´æ¥è°ƒç”¨&lt;code>logrus&lt;/code>çš„æ–¹æ³•ç±»ä¼¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç”¨è‡ªå®šä¹‰logger
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DebugLevel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">JSONFormatter&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Debug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;debug msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>New()&lt;/code>å‡½æ•°åˆ›å»ºçš„loggerä¸é»˜è®¤çš„loggerç›¸åŒã€‚è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-09T22:55:30+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">info&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;debug&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;debug msg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;2024-05-09T22:55:30+08:00&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡åˆ›å»ºçš„loggerå¯¹è±¡å¯ä»¥ç›´æ¥èµ‹å€¼ä¿®æ”¹Levelã€Outã€Formatterç­‰ï¼Œä¸ç”¨è°ƒå¯¹åº”çš„Setæ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Out&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Formatter&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">TextFormatter&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Hooks&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">LevelHooks&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Level&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">InfoLevel&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ExitFunc&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Exit&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ReportCaller&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹ä¿®æ”¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Out&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DebugLevel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Formatter&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">JSONFormatter&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡&lt;code>FieldMap&lt;/code>å±æ€§ä¿®æ”¹é»˜è®¤å­—æ®µçš„é”®å&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">FieldMap&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">fieldKey&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">fieldKey&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ”¯æŒé‡å‘½åçš„é»˜è®¤å­—æ®µ&lt;code>fieldKey&lt;/code>å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-GO" data-lang="GO">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultTimestampFormat&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC3339&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FieldKeyMsg&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FieldKeyLevel&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FieldKeyTime&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FieldKeyLogrusError&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;logrus_error&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FieldKeyFunc&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;func&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FieldKeyFile&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;file&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®ä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Formatter&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TextFormatter&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DisableColors&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FieldMap&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FieldMap&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FieldKeyMsg&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// å°†msgæ”¹æˆmessage
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Level&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DebugLevel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Formatter&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">JSONFormatter&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="c1">// ä¼šè¦†ç›–TextFormatter
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">FieldMap&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FieldMap&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FieldKeyTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;TIME&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="c1">// å°† timeæ”¹æˆTIME
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Debug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;debug msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T23:23:53+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">message&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;info msg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;TIME&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2024-05-09T23:23:53+08:00&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;debug&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;debug msg&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ä¿®æ”¹æ—¥å¿—æ ¼å¼">
&lt;a href="#%e4%bf%ae%e6%94%b9%e6%97%a5%e5%bf%97%e6%a0%bc%e5%bc%8f" class="header-anchor">#&lt;/a>
ä¿®æ”¹æ—¥å¿—æ ¼å¼
&lt;/h4>&lt;p>è°ƒç”¨&lt;code>logrus.SetFormatter(formatter Formatter)&lt;/code>ï¼Œå³å¯ä¿®æ”¹æ—¥å¿—æ ¼å¼ã€‚&lt;/p>
&lt;p>&lt;code>logrus&lt;/code>æ”¯æŒä¸¤ç§æ—¥å¿—æ ¼å¼ï¼Œæ–‡æœ¬å’Œ JSONï¼Œé»˜è®¤ä¸ºæ–‡æœ¬æ ¼å¼ã€‚å¯ä»¥é€šè¿‡&lt;code>logrus.SetFormatter&lt;/code>è®¾ç½®æ—¥å¿—æ ¼å¼ï¼š&lt;/p>
&lt;p>Logrus æä¾›äº† &lt;code>JSONFormatter&lt;/code> å’Œ &lt;code>TextFormatter&lt;/code> æ¥åˆ†åˆ«å®ç° JSON å’Œ Text æ ¼å¼çš„æ—¥å¿—è¾“å‡ºï¼Œå®ƒä»¬çš„&lt;strong>æŒ‡é’ˆç±»å‹&lt;/strong>éƒ½å®ç°äº† &lt;code>Formatter&lt;/code> æ¥å£ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹å®ç°çš„ &lt;code>Formatter&lt;/code> &lt;a class="link" href="https://github.com/sirupsen/logrus#formatters" target="_blank" rel="noopener"
>åˆ—è¡¨&lt;/a>å¯ä¾›é€‰æ‹©ï¼Œå¦‚æœè¿™äº›ä¾ç„¶æ— æ³•æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œåˆ™å¯ä»¥è‡ªå·±å®ç° &lt;code>Formatter&lt;/code> æ¥å£å¯¹è±¡å®šåˆ¶æ—¥å¿—æ ¼å¼ã€‚&lt;/p>
&lt;p>ä½¿ç”¨å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;default formatter:TextFormatter&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">//text
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">JSONFormatter&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;JSONFormatter&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">//json
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TextFormatter&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;default formatter:TextFormatter&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">//text
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>logrusé»˜è®¤çš„Formatteræ˜¯TextFormatterã€‚åœ¨éæ ‡å‡†TTYä¸­è¿è¡Œè¾“å‡ºç»“æœï¼ˆä¸å¸¦é¢œè‰²è¾“å‡ºï¼‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T22:06:29+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;default formatter:TextFormatter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;JSONFormatter&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2024-05-09T22:06:29+08:00&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2024-05-09T22:06:29+08:00&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;default formatter:TextFormatter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹æ ¼å¼">
&lt;a href="#%e4%bd%bf%e7%94%a8%e7%ac%ac%e4%b8%89%e6%96%b9%e6%a0%bc%e5%bc%8f" class="header-anchor">#&lt;/a>
ä½¿ç”¨ç¬¬ä¸‰æ–¹æ ¼å¼
&lt;/h5>&lt;p>é™¤äº†å†…ç½®çš„&lt;code>TextFormatter&lt;/code>å’Œ&lt;code>JSONFormatter&lt;/code>ï¼Œè¿˜æœ‰ä¸å°‘ç¬¬ä¸‰æ–¹æ ¼å¼æ”¯æŒã€‚æˆ‘ä»¬è¿™é‡Œä»‹ç»ä¸€ä¸ª&lt;a class="link" href="https://github.com/antonfisher/nested-logrus-formatter" target="_blank" rel="noopener"
>nested-logrus-formatter&lt;/a>ã€‚&lt;/p>
&lt;p>å…ˆå®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/antonfisher/nested-logrus-formatter
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nested&lt;/span> &lt;span class="s">&amp;#34;github.com/antonfisher/nested-logrus-formatter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// éæ ‡å‡†TTYï¼Œå¼ºåˆ¶è¾“å‡ºé¢œè‰²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TextFormatter&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ForceColors&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FullTimestamp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TimestampFormat&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateTime&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithFields&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Fields&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nf">Warn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user info&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;----------------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">nested&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Formatter&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HideKeys&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TimestampFormat&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateTime&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithFields&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Fields&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nf">Warn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user info&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¨‹åºè¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO&lt;span class="o">[&lt;/span>2024-05-09 22:33:40&lt;span class="o">]&lt;/span> info msg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARN&lt;span class="o">[&lt;/span>2024-05-09 22:33:41&lt;span class="o">]&lt;/span> user info &lt;span class="nv">age&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">18&lt;/span> &lt;span class="nv">username&lt;/span>&lt;span class="o">=&lt;/span>arlettebro
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-05-09 22:33:41 &lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> info msg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-05-09 22:33:41 &lt;span class="o">[&lt;/span>WARN&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>18&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>arlettebrook&lt;span class="o">]&lt;/span> user info
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ²¡æœ‰æˆªå›¾ï¼Œå‚è€ƒçš„æ˜¯å®˜æ–¹å¯¹æ¯”å›¾ç‰‡ï¼š&lt;img src="https://raw.githubusercontent.com/antonfisher/nested-logrus-formatter/docs/images/demo.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;code>nested&lt;/code>æ ¼å¼æä¾›äº†å¤šä¸ªå­—æ®µç”¨æ¥å®šåˆ¶è¡Œä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// github.com/antonfisher/nested-logrus-formatter/formatter.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Formatter&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FieldsOrder&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TimestampFormat&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HideKeys&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">NoColors&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">NoFieldsColors&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ShowFullLevel&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TrimMessages&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>é»˜è®¤ï¼Œ&lt;code>logrus&lt;/code>è¾“å‡ºæ—¥å¿—ä¸­å­—æ®µæ˜¯&lt;code>key=value&lt;/code>è¿™æ ·çš„å½¢å¼ã€‚ä½¿ç”¨&lt;code>nested&lt;/code>æ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®&lt;code>HideKeys&lt;/code>ä¸º&lt;code>true&lt;/code>éšè—é”®ï¼Œåªè¾“å‡ºå€¼ï¼›&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¦‚æœä¸éšè—é”®ï¼Œç¨‹åºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">2024-05-09 22:40:09 &lt;span class="o">[&lt;/span>WARN&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>age:18&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>username:arlettebrook&lt;span class="o">]&lt;/span> user info
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>é»˜è®¤ï¼Œ&lt;code>logrus&lt;/code>æ˜¯æŒ‰é”®çš„å­—æ¯åºè¾“å‡ºå­—æ®µï¼Œå¯ä»¥è®¾ç½®&lt;code>FieldsOrder&lt;/code>å®šä¹‰è¾“å‡ºå­—æ®µé¡ºåºï¼›stringç±»å‹çš„åˆ‡ç‰‡æŒ‡å®šé¡ºåºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡è®¾ç½®&lt;code>TimestampFormat&lt;/code>è®¾ç½®æ—¥æœŸæ ¼å¼ã€‚å¦‚&lt;code>time.RFC3339&lt;/code>ã€&lt;code>time.DateTime&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>é€šè¿‡å®ç°æ¥å£&lt;code>logrus.Formatter&lt;/code>å¯ä»¥å®ç°è‡ªå·±çš„æ ¼å¼ã€‚&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// github.com/sirupsen/logrus/formatter.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Formatter&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Entry&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="hooks">
&lt;a href="#hooks" class="header-anchor">#&lt;/a>
Hooks
&lt;/h2>&lt;blockquote>
&lt;p>Hooksæœ¬è´¨æ˜¯ä¸€äº›å‡½æ•°æˆ–æ–¹æ³•ï¼Œç”¨äºä¸ä¿®æ”¹åŸä»£ç ï¼Œ&lt;strong>æ‰©å±•ç¨‹åº&lt;/strong>ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>Logrus æœ€ä»¤äººå¿ƒåŠ¨çš„ä¸¤ä¸ªåŠŸèƒ½ï¼Œä¸€ä¸ªæ˜¯ç»“æ„åŒ–æ—¥å¿—ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ Hooks äº†ã€‚&lt;/p>
&lt;p>Hooks ä¸º Logrus æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œé€šè¿‡ Hooks å¯ä»¥å®ç°å„ç§æ‰©å±•åŠŸèƒ½ã€‚æ¯”å¦‚å¯ä»¥é€šè¿‡ Hooks å®ç°ï¼š&lt;code>Error&lt;/code> ä»¥ä¸Šçº§åˆ«æ—¥å¿—&lt;strong>å‘é€é‚®ä»¶é€šçŸ¥&lt;/strong>ã€&lt;strong>é‡è¦æ—¥å¿—å‘Šè­¦&lt;/strong>ã€&lt;strong>æ—¥å¿—åˆ‡å‰²&lt;/strong>ã€&lt;strong>ç¨‹åºä¼˜é›…é€€å‡ºç­‰&lt;/strong>ï¼Œéå¸¸å®ç”¨ã€‚&lt;/p>
&lt;p>Logrus æä¾›äº† &lt;code>Hook&lt;/code> æ¥å£ï¼Œåªè¦æˆ‘ä»¬å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œå¹¶å°†å…¶æ³¨å†Œåˆ° Logrus ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨ Hooks çš„å¼ºå¤§èƒ½åŠ›äº†ã€‚&lt;code>Hook&lt;/code> æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Hook&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Levels&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">Level&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Fire&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Entry&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Levels&lt;/code> æ–¹æ³•è¿”å›ä¸€ä¸ªæ—¥å¿—çº§åˆ«åˆ‡ç‰‡ï¼ŒLogrus è®°å½•çš„æ—¥å¿—çº§åˆ«å¦‚æœå­˜åœ¨äºåˆ‡ç‰‡ä¸­ï¼Œåˆ™ä¼šè§¦å‘ Hooksï¼Œå³è°ƒç”¨ &lt;code>Fire&lt;/code> æ–¹æ³•ã€‚&lt;/p>
&lt;p>ä¸º&lt;code>logrus&lt;/code>è®¾ç½®é’©å­ï¼ˆHooksï¼‰ï¼Œç¬¦åˆ&lt;code>[]Level&lt;/code>çš„æ—¥å¿—è¾“å‡ºå‰éƒ½ä¼šæ‰§è¡Œé’©å­çš„ç‰¹å®šæ–¹æ³•ï¼ˆ&lt;code>Fire&lt;/code> æ–¹æ³•ï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ·»åŠ è¾“å‡ºå­—æ®µã€æ ¹æ®çº§åˆ«å°†æ—¥å¿—è¾“å‡ºåˆ°ä¸åŒçš„ç›®çš„åœ°ã€‚&lt;/p>
&lt;p>å¹¶ä¸”hookå‡½æ•°ä¼šåœ¨è¾“å‡ºæ—¥å¿—ä¹‹å‰æ‰§è¡Œã€‚&lt;/p>
&lt;p>Entryæ˜¯å½“å‰æ—¥å¿—æ¡ç›®ï¼ˆå½“å‰è¾“å‡ºæ—¥å¿—å¯¹è±¡ï¼‰ã€‚æ˜¯ç»“æ„ä½“ç±»å‹ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Entry&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Logger&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Contains all the fields set by the user.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Data&lt;/span> &lt;span class="nx">Fields&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Time at which the log entry was created
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Time&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Level the log entry was logged at: Trace, Debug, Info, Warn, Error, Fatal or Panic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// This field will be set on entry firing and the value will be equal to the one in Logger struct field.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Level&lt;/span> &lt;span class="nx">Level&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Calling method, with package name
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Caller&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Frame&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Message passed to Trace, Debug, Info, Warn, Error, Fatal or Panic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Message&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// When formatter is called in entry.log(), a Buffer may be set to entry
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Buffer&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Buffer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Contains the context set by the user. Useful for hook processing etc.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Context&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// err may contain a field formatting error
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¸¸ç”¨çš„å±æ€§æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>Data Fields&lt;/code>æ˜¯æ—¥å¿—æ¡ç›®ä¸­æ‰€æœ‰çš„å­—æ®µï¼ŒFieldsç±»å‹æ˜¯&lt;code>type Fields map[string]interface{}&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>Logger *Logger&lt;/code>è®°å½•è¯¥æ—¥å¿—æ¡ç›®çš„loggerã€‚&lt;/li>
&lt;li>å•æ¡æ—¥å¿—æ¡ç›®ä¿¡æ¯éƒ½ä¿å­˜åœ¨Entryç»“æ„ä½“ä¸­ã€‚å¦‚ï¼Œåˆ›å»ºæ—¶é—´ã€æ—¥å¿—çº§åˆ«ã€æ—¥å¿—æ¶ˆæ¯ç­‰ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;code>logrus&lt;/code>ä¹Ÿå†…ç½®äº†ä¸€ä¸ª&lt;code>syslog&lt;/code>çš„é’©å­ï¼Œå°†æ—¥å¿—è¾“å‡ºåˆ°ç³»ç»Ÿæ—¥å¿—&lt;code>syslog&lt;/code>ä¸­ã€‚å®ƒä¸é€‚ç”¨ç”¨windowsçš„ç³»ç»Ÿæ—¥å¿—ã€‚&lt;/p>
&lt;p>Logrus å†…ç½® Hooks åˆ—è¡¨ï¼š &lt;a class="link" href="https://github.com/sirupsen/logrus/tree/master/hooks" target="_blank" rel="noopener"
>https://github.com/sirupsen/logrus/tree/master/hooks&lt;/a>&lt;/p>
&lt;h3 id="è‡ªå®šä¹‰hook">
&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89hook" class="header-anchor">#&lt;/a>
è‡ªå®šä¹‰Hook
&lt;/h3>&lt;h4 id="åˆ©ç”¨hookæ·»åŠ å­—æ®µ">
&lt;a href="#%e5%88%a9%e7%94%a8hook%e6%b7%bb%e5%8a%a0%e5%ad%97%e6%ae%b5" class="header-anchor">#&lt;/a>
åˆ©ç”¨Hookæ·»åŠ å­—æ®µ
&lt;/h4>&lt;p>è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ªé’©å­ï¼Œåœ¨è¾“å‡ºçš„æ—¥å¿—ä¸­å¢åŠ ä¸€ä¸ª&lt;code>app=awesome-web&lt;/code>å­—æ®µã€‚&lt;/p>
&lt;p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">AppHook&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AppName&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">AppHook&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Levels&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Level&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">AllLevels&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">AppHook&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fire&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">entry&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Entry&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">entry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;app&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">AppName&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">h&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">AppHook&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">AppName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;awesome-web&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddHook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Warn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user info&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éæ ‡å‡†TTYè¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-10T22:58:42+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">info&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span> &lt;span class="nx">app&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">awesome&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">web&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-10T22:58:42+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">warning&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;user info&amp;#34;&lt;/span> &lt;span class="nx">app&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">awesome&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">web&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">arlettebro&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ok&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ€»ç»“ï¼šæ·»åŠ é’©å­ï¼ˆhookï¼‰ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªç»“æ„ä½“å®ç°&lt;code>Hook&lt;/code>æ¥å£ï¼Œåœ¨Levelsæ–¹æ³•ä¸­è®¾ç½®è§¦å‘hookå‡½æ•°çš„æ¡ä»¶ï¼ˆæ—¥å¿—çº§åˆ«ï¼‰ï¼Œåœ¨Fireæ–¹æ³•ä¸­å®šä¹‰hookå‡½æ•°è¡Œä¸ºã€‚ç„¶ååˆ›å»ºå¯¹è±¡ï¼Œåˆ©ç”¨&lt;code>AddHook(hook Hook)&lt;/code>å°†hookæ³¨å†Œåˆ°loggerå½“ä¸­ã€‚&lt;/p>
&lt;h4 id="åˆ©ç”¨hookæ¨¡æ‹Ÿé‚®ä»¶å‘é€">
&lt;a href="#%e5%88%a9%e7%94%a8hook%e6%a8%a1%e6%8b%9f%e9%82%ae%e4%bb%b6%e5%8f%91%e9%80%81" class="header-anchor">#&lt;/a>
åˆ©ç”¨Hookæ¨¡æ‹Ÿé‚®ä»¶å‘é€
&lt;/h4>&lt;p>ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">JSONFormatter&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddHook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">EmailHook&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">EmailHook&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="nx">EmailHook&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Levels&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Level&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">AllLevels&lt;/span> &lt;span class="c1">// æ‰€æœ‰æ—¥å¿—éƒ½å‘é€åˆ°é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="nx">EmailHook&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fire&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">entry&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Entry&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ·»åŠ ä¸€ä¸ªé‚®ç®±å­—æ®µæ ‡è¯†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">entry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;app&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;email&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è·å–æ—¥å¿—æ¡ç›®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">entry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¨¡æ‹Ÿå‘é€é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;fakeSendEmail: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Warn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user info&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fakeSendEmail: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;app&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;email&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info msg&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2024-05-10T23:22:13+08:00&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;app&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;email&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info msg&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2024-05-10T23:22:13+08:00&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fakeSendEmail: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;app&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;email&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;warning&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;user info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2024-05-10T23:22:13+08:0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">0&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;username&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;app&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;email&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;warning&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;user info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2024-05-10T23:22:13+08:00&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;username&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">arlettebrook&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œåœ¨æ‰“å°æ¯æ¡æ—¥å¿—ä¹‹å‰ï¼Œéƒ½ä¼šæ‰§è¡ŒHookå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å®ç°äº†å‘é€é‚®ä»¶ã€‚&lt;/p>
&lt;h3 id="ç¬¬ä¸‰æ–¹hook">
&lt;a href="#%e7%ac%ac%e4%b8%89%e6%96%b9hook" class="header-anchor">#&lt;/a>
ç¬¬ä¸‰æ–¹Hook
&lt;/h3>&lt;p>&lt;code>logrus&lt;/code>çš„ç¬¬ä¸‰æ–¹ Hook æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›ç°æˆçš„ Hook ã€‚å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/weekface/mgorus" target="_blank" rel="noopener"
>mgorus&lt;/a>ï¼šå°†æ—¥å¿—å‘é€åˆ° mongodbï¼›&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/rogierlommers/logrus-redis-hook" target="_blank" rel="noopener"
>logrus-redis-hook&lt;/a>ï¼šå°†æ—¥å¿—å‘é€åˆ° redisï¼›&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/vladoatanasov/logrus_amqp" target="_blank" rel="noopener"
>logrus-amqp&lt;/a>ï¼šå°†æ—¥å¿—å‘é€åˆ° ActiveMQã€‚&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/orandin/lumberjackrus" target="_blank" rel="noopener"
>lumberjackrus&lt;/a> ï¼šå®ç°äº†æ—¥å¿—åˆ‡å‰²å’Œå½’æ¡£åŠŸèƒ½ï¼Œå¹¶ä¸”èƒ½å¤Ÿå°†ä¸åŒçº§åˆ«çš„æ—¥å¿—è¾“å‡ºåˆ°ä¸åŒæ–‡ä»¶ã€‚&lt;code>lumberjackrus&lt;/code> æ˜¯ä¸“é—¨ä¸º Logrus è€Œæ‰“é€ çš„æ–‡ä»¶æ—¥å¿— Hooksï¼Œå…¶å®˜æ–¹ä»‹ç»ä¸º &lt;code>local filesystem hook for Logrus&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ›´å¤šè¿‡å†…å®¹è¯·å‚è€ƒå®˜æ–¹æä¾›çš„&lt;a class="link" href="https://github.com/sirupsen/logrus/wiki/Hooks" target="_blank" rel="noopener"
>ç¬¬ä¸‰æ–¹å¼€å‘çš„ Hooks åˆ—è¡¨&lt;/a>ã€‚&lt;/p>
&lt;h4 id="lumberjackrus">
&lt;a href="#lumberjackrus" class="header-anchor">#&lt;/a>
lumberjackrus
&lt;/h4>&lt;p>&lt;a class="link" href="https://github.com/orandin/lumberjackrus" target="_blank" rel="noopener"
>lumberjackrus&lt;/a> ï¼šå®ç°äº†æ—¥å¿—åˆ‡å‰²å’Œå½’æ¡£åŠŸèƒ½ï¼Œå¹¶ä¸”èƒ½å¤Ÿå°†ä¸åŒçº§åˆ«çš„æ—¥å¿—è¾“å‡ºåˆ°ä¸åŒæ–‡ä»¶ã€‚&lt;code>lumberjackrus&lt;/code> æ˜¯ä¸“é—¨ä¸º Logrus è€Œæ‰“é€ çš„æ–‡ä»¶æ—¥å¿— Hooksï¼Œå…¶å®˜æ–¹ä»‹ç»ä¸º &lt;code>local filesystem hook for Logrus&lt;/code>ã€‚&lt;/p>
&lt;p>ç”¨äºè®°å½•åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„é’©å­ï¼ˆä½¿ç”¨ logrotate å’Œå¯ä»¥å°†ä¸åŒçš„æ—¥å¿—çº§ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼‰&lt;/p>
&lt;p>lumberjackrusæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œä½¿ç”¨è¦å…ˆå®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">u&lt;/span> &lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">orandin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">lumberjackrus&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/orandin/lumberjackrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TextFormatter&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DebugLevel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hook&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">lumberjackrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewHook&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">lumberjackrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LogFile&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="c1">// æœªæŒ‡å®šçº§åˆ«çš„æ—¥å¿—ä¿å­˜çš„æ–‡ä»¶ï¼Œå±æ€§éƒ½æ˜¯optional
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Filename&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;./tmp/general.log&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// è·¯å¾„+æ–‡ä»¶åï¼Œé»˜è®¤å½“å‰ç›®å½•åå­—&amp;lt;processName&amp;gt;-lumberjack.log
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">MaxSize&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// æ–‡ä»¶æœ€å¤§å ç”¨ï¼Œå•ä½MBï¼Œé»˜è®¤100MB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">MaxBackups&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// æ–‡ä»¶æœ€å¤§å¤‡ä»½æ•°ï¼Œé»˜è®¤ä¸é™åˆ¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">MaxAge&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// å¤‡ä»½æ–‡ä»¶ä¿å­˜çš„å¤©æ•°ï¼Œé»˜è®¤æ°¸ä¹…
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Compress&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// æ˜¯å¦å‹ç¼©ï¼Œé»˜è®¤false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">LocalTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// æ–‡ä»¶å¯ç”¨æœ¬åœ°æ—¶é—´ï¼Œé»˜è®¤utcï¼Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">InfoLevel&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// å®šä¹‰å†™å…¥æ–‡ä»¶çš„æ—¥å¿—çº§åˆ«
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">JSONFormatter&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="c1">// æ—¥å¿—æ ¼å¼Formatter
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">lumberjackrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LogFileOpts&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="c1">// æ ¹æ®æ—¥å¿—çº§åˆ«æŒ‡å®šä¿å­˜ä½ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">InfoLevel&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">lumberjackrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LogFile&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Filename&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;./tmp/info/info.log&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MaxSize&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MaxBackups&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MaxAge&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Compress&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LocalTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ErrorLevel&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">lumberjackrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LogFile&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Filename&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;./tmp/error/error.log&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddHook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">hook&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Debug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Debug message&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// It is not written to a file (because debug level &amp;lt; minLevel)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Info message&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// Written in ./tmp/info.log
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Warn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Warn message&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// Written in ./tmp/general.log
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Error message&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// Written in ./tmp/error.log
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œï¼Œåœ¨éæ ‡å‡†TTYä¸­è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-11T10:49:22+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">debug&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;Debug message&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-11T10:49:22+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">info&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;Info message&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-11T10:49:22+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">warning&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;Warn message&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;2024-05-11T10:49:22+08:00&amp;#34;&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="kt">error&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;Error message&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¹¶ä¸”è¿˜ä¼šå†å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ&lt;code>tmp/general.log, tmp/info, tmp/error&lt;/code>,é‡Œé¢çš„æ ¼å¼ä¸ºjsonã€‚debugæ—¥å¿—æ²¡æœ‰å†™å…¥æ–‡ä»¶ã€‚&lt;code>info.log&lt;/code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nt">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;Info message&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nt">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;2024-05-11T10:49:22+08:00&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨&lt;code>lumberjackrus&lt;/code>å®ç°äº†&lt;strong>æ—¥å¿—è½®è¯¢&lt;/strong>ä»¥åŠ&lt;strong>åˆ†çº§åˆ«ä¿å­˜&lt;/strong>ã€‚è¿™ä¸ªé’©å­ï¼Œå®ç°æ—¥å¿—è½®è¯¢æ˜¯åŸºäº&lt;code>lumberjack&lt;/code>åº“å®ç°çš„ã€‚&lt;/p>
&lt;p>ä½¿ç”¨è¿™ä¸ªé’©å­ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ©ç”¨&lt;code>NewHook(defaultLogger *LogFile, minLevel logrus.Level, formatter logrus.Formatter, opts *LogFileOpts) (*Hook, error)&lt;/code>åˆ›å»ºå¯¹è±¡ï¼Œå°†å¯¹è±¡æ·»åŠ loggerä¸­å³å¯ä½¿ç”¨ã€‚ä»£ç ä¸­æœ‰å¯¹å‚æ•°çš„ä»‹ç»ã€‚æœ€åä¸€ä¸ªå‚æ•°ï¼ˆæœ¬è´¨æ˜¯mapç±»å‹ï¼‰å¦‚æœä¸º&lt;code>nil&lt;/code>æˆ–è€…ä¸ºç©ºmapï¼Œé‚£ä¹ˆæ—¥å¿—å°†ä¸ä¼šåˆ†çº§åˆ«ä¿å­˜ï¼Œéƒ½ä¼šä¿å­˜åˆ°&lt;code>defaultLogger&lt;/code>æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;h4 id="logrus-redis-hook">
&lt;a href="#logrus-redis-hook" class="header-anchor">#&lt;/a>
logrus-redis-hook
&lt;/h4>&lt;p>ä¸‹é¢æ¼”ç¤ºåˆ©ç”¨hookå°†æ—¥å¿—å‘é€åˆ°redisï¼Œæˆ‘ä»¬ç”¨åˆ°çš„åŒ…æ˜¯&lt;a class="link" href="https://github.com/rogierlommers/logrus-redis-hook" target="_blank" rel="noopener"
>logrus-redis-hook&lt;/a>, å…ˆå®‰è£…&lt;code>logrus-redis-hook&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/rogierlommers/logrus-redis-hook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é»˜è®¤ä½ å·²ç»å®‰è£…å¥½äº†rediså¹¶ä¸”å¯åŠ¨äº†å®ƒï¼Œå¦‚æœä½ æƒ³äº†è§£redisï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« &lt;a class="link" href="https://arlettebrook.github.io/p/redis-introduction/" target="_blank" rel="noopener"
>ã€ŠRedis Introductionã€‹&lt;/a>ã€‚&lt;/p>
&lt;p>ç„¶åç¼–å†™ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;io&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logredis&lt;/span> &lt;span class="s">&amp;#34;github.com/rogierlommers/logrus-redis-hook&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/sirupsen/logrus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFormatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">JSONFormatter&lt;/span>&lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hookConfig&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">logredis&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HookConfig&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Host&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;192.168.245.130&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123456&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Key&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;demo_log&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Format&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;v0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">App&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;awesome_demo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">6379&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Hostname&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// will be sent to field @source_host
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">DB&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// optional
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">TTL&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3600&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hook&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">logredis&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewHook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">hookConfig&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddHook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">hook&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;logredis error: %q&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// when hook is injected successfully, logs will be sent to redis server
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;just some info logging...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// we also support log.WithFields()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithFields&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Fields&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;animal&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;walrus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;foo&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;bar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;this&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;that&amp;#34;&lt;/span>&lt;span class="p">}).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;additional fields are being logged as well&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// If you want to disable writing to stdout, use setOutput
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetOutput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Discard&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;This will only be sent to Redis&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šè¯·è¿æ¥ä½ è‡ªå·±çš„redisã€‚&lt;/p>
&lt;p>è¿è¡Œç¨‹åºåï¼Œç»ˆç«¯è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;just some info logging...&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2024-05-11T11:56:17+08:00&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;animal&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;walrus&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;foo&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;additional fields are being logged as well&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">this&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;that&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2024-05-11T11:56:17+08:00&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬ä½¿ç”¨&lt;code>redis-cli&lt;/code>æŸ¥çœ‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>&amp;gt; lrange demo_log &lt;span class="m">0&lt;/span> -1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;{\&amp;#34;@fields\&amp;#34;:{\&amp;#34;application\&amp;#34;:\&amp;#34;awesome_demo\&amp;#34;,\&amp;#34;level\&amp;#34;:\&amp;#34;info\&amp;#34;},\&amp;#34;@message\&amp;#34;:\&amp;#34;just some info logging...\&amp;#34;,\&amp;#34;@source_host\&amp;#34;:\&amp;#34;localhost\&amp;#34;,\&amp;#34;@timestamp\&amp;#34;:\&amp;#34;2024-05-11T03:56:17.867867Z\&amp;#34;}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;{\&amp;#34;@fields\&amp;#34;:{\&amp;#34;animal\&amp;#34;:\&amp;#34;walrus\&amp;#34;,\&amp;#34;application\&amp;#34;:\&amp;#34;awesome_demo\&amp;#34;,\&amp;#34;foo\&amp;#34;:\&amp;#34;bar\&amp;#34;,\&amp;#34;level\&amp;#34;:\&amp;#34;info\&amp;#34;,\&amp;#34;this\&amp;#34;:\&amp;#34;that\&amp;#34;},\&amp;#34;@message\&amp;#34;:\&amp;#34;additional fields are being logged as well\&amp;#34;,\&amp;#34;@source_host\&amp;#34;:\&amp;#34;localhost\&amp;#34;,\&amp;#34;@timestamp\&amp;#34;:\&amp;#34;2024-05-11T03:56:17.933777Z\&amp;#34;}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;{\&amp;#34;@fields\&amp;#34;:{\&amp;#34;application\&amp;#34;:\&amp;#34;awesome_demo\&amp;#34;,\&amp;#34;level\&amp;#34;:\&amp;#34;info\&amp;#34;},\&amp;#34;@message\&amp;#34;:\&amp;#34;This will only be sent to Redis\&amp;#34;,\&amp;#34;@source_host\&amp;#34;:\&amp;#34;localhost\&amp;#34;,\&amp;#34;@timestamp\&amp;#34;:\&amp;#34;2024-05-11T03:56:17.9351074Z\&amp;#34;}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬çœ‹åˆ°&lt;code>demo_log&lt;/code>æ˜¯ä¸€ä¸ª&lt;code>list&lt;/code>ï¼Œæ¯è¿‡æ¥ä¸€æ¡æ—¥å¿—ï¼Œå°±åœ¨&lt;code>list&lt;/code>åæ–°å¢ä¸€é¡¹ã€‚&lt;/p>
&lt;p>é»˜è®¤çš„loggeræ˜¯è¾“å‡ºåˆ°stderrï¼Œä½†ä¿®æ”¹ä¸ºdiscardï¼Œå°†ä¸ä¼šè¾“å‡ºåˆ°ä»»ä½•åœ°æ–¹ï¼Œä½†æ˜¯é’©å­ä¾ç„¶æ‰§è¡Œã€‚å› ä¸ºé’©å­é‡Œé¢æŒ‡å®šå‘é€åˆ°çš„æ˜¯redisï¼Œä¸å—å½±å“ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡ä»‹ç»äº† Logrus çš„åŸºæœ¬ç‰¹ç‚¹ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ã€‚&lt;/p>
&lt;p>Logrus å®Œå…¨å…¼å®¹ log æ ‡å‡†åº“ï¼Œæ‰€ä»¥å¯ä»¥å®ç°æ— ç¼æ›¿æ¢ã€‚å…¶ API è®¾è®¡æ€è·¯è·Ÿ log æ ‡å‡†åº“çš„é£æ ¼ä¹Ÿæœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œéƒ½æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ &lt;code>std&lt;/code> æ—¥å¿—å¯¹è±¡è¾¾åˆ°å¼€ç®±å³ç”¨çš„æ•ˆæœã€‚Logrus æœ€å®ç”¨çš„ä¸¤ä¸ªåŠŸèƒ½ï¼Œä¸€ä¸ªæ˜¯æ”¯æŒç»“æ„åŒ–æ—¥å¿—ï¼Œä¸€ä¸ªæ˜¯æ”¯æŒ Hooks æœºåˆ¶ï¼Œè¿™æå¤§çš„æå‡äº†å¯ç”¨æ€§å’Œçµæ´»æ€§ï¼Œä¹Ÿä½¿å¾— Logrus æˆä¸ºæœ€å—æ¬¢è¿çš„ Go æ—¥å¿—åº“ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://github.com/sirupsen/logrus" target="_blank" rel="noopener"
>logrus&lt;/a> GitHub ä»“åº“&lt;/li>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2020/02/07/godailylib/logrus/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ logrus&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://jianghushinian.cn/2023/03/15/use-of-logrus-in-go-third-party-log-library/" target="_blank" rel="noopener"
>Go ç¬¬ä¸‰æ–¹ log åº“ä¹‹ logrus ä½¿ç”¨&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Linux Common Commands</title><link>https://arlettebrook.github.io/p/linux-common-commands/</link><pubDate>Wed, 08 May 2024 19:24:26 +0800</pubDate><guid>https://arlettebrook.github.io/p/linux-common-commands/</guid><description>&lt;blockquote>
&lt;p>Linuxå¸¸ç”¨å‘½ä»¤æœ‰å¾ˆå¤šï¼Œæœ¬æ–‡ä¸ä¼šé€ä¸ªä»‹ç»ã€‚ä»¥ä¸‹å‘½ä»¤æ˜¯æˆ‘åœ¨åæœŸä½¿ç”¨ä¸­é‡åˆ°çš„ï¼Œç®—æ˜¯æˆ‘å¯¹Linuxå¸¸ç”¨å‘½ä»¤çš„è¡¥å……ã€å›é¡¾ã€æ€»ç»“ã€‚æœ¬ç¯‡æ–‡ç« é˜…è¯»éœ€è¦ä¸€å®šçš„LinuxåŸºç¡€ã€‚æ›´å¤šå¸¸è§å‘½ä»¤å¯å‚è€ƒï¼š&lt;a class="link" href="https://wiki.deepin.org/zh/04_%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98FAQ/600%E6%9D%A1Linux%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93" target="_blank" rel="noopener"
>600æ¡Linuxå‘½ä»¤æ€»ç»“&lt;/a>ã€‚&lt;/p>
&lt;p>&lt;strong>æŒç»­æ›´æ–°ä¸­&amp;hellip;&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="ln">
&lt;a href="#ln" class="header-anchor">#&lt;/a>
ln
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>&lt;code>ln&lt;/code>å‘½ä»¤åœ¨Linuxç³»ç»Ÿä¸­ç”¨äº&lt;strong>åˆ›å»ºæ–‡ä»¶é“¾æ¥&lt;/strong>ã€‚&lt;/p>
&lt;ul>
&lt;li>Linuxä¸­æ–‡ä»¶é“¾æ¥çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š
&lt;ul>
&lt;li>&lt;strong>ç¬¦å·é“¾æ¥&lt;/strong>ï¼ˆä¹Ÿç§°ä¸ºè½¯é“¾æ¥Symbolic Linkï¼‰ï¼šåŒ…å«äº†åˆ°åŸæ–‡ä»¶çš„è·¯å¾„ä¿¡æ¯ï¼Œç›¸å½“äºä¸€ä¸ªæŒ‡å‘åŸæ–‡ä»¶çš„&lt;strong>å¿«æ·æ–¹å¼&lt;/strong>ã€‚
&lt;ul>
&lt;li>ç¬¦å·é“¾æ¥æœ‰è‡ªå·±çš„æ–‡ä»¶å±æ€§åŠæƒé™ç­‰ã€‚&lt;/li>
&lt;li>å¯å¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºç¬¦å·é“¾æ¥ã€‚&lt;/li>
&lt;li>ç¬¦å·é“¾æ¥å¯äº¤å‰æ–‡ä»¶ç³»ç»Ÿï¼Œå³å¯ä»¥åœ¨ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿä¹‹é—´åˆ›å»ºã€‚&lt;/li>
&lt;li>åˆ é™¤ç¬¦å·é“¾æ¥å¹¶ä¸å½±å“è¢«æŒ‡å‘çš„æ–‡ä»¶ï¼Œä½†è‹¥è¢«æŒ‡å‘çš„åŸæ–‡ä»¶è¢«åˆ é™¤ï¼Œåˆ™ç›¸å…³ç¬¦å·é“¾æ¥è¢«ç§°ä¸ºæ­»é“¾æ¥ï¼ˆdangling linkï¼‰ã€‚è‹¥è¢«æŒ‡å‘çš„æ–‡ä»¶é‡æ–°è¢«åˆ›å»ºï¼Œæ­»é“¾æ¥å¯æ¢å¤ä¸ºæ­£å¸¸çš„ç¬¦å·é“¾æ¥ã€‚&lt;/li>
&lt;li>ç¬¦å·é“¾æ¥æ–‡ä»¶çš„å¤§å°æ˜¯å…¶æŒ‡å‘çš„æ–‡ä»¶çš„è·¯å¾„å­—ç¬¦ä¸²çš„å­—èŠ‚æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ç¡¬é“¾æ¥&lt;/strong>ï¼šç¡¬é“¾æ¥æœ¬è´¨ä¸Šæ˜¯ç»™ä¸€ä¸ªæ–‡ä»¶å–ä¸€ä¸ªæ–°çš„åç§°ï¼ŒåŸæ–‡ä»¶å’Œç¡¬é“¾æ¥åœ¨ç‰©ç†ä¸Šä»ç„¶æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ã€‚å®ƒä»¬å…±äº«ç›¸åŒçš„inodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰å’Œæ•°æ®å—ã€‚
&lt;ul>
&lt;li>åˆ›å»ºç¡¬é“¾æ¥ä¼šåœ¨å¯¹åº”çš„ç›®å½•ä¸­å¢åŠ é¢å¤–çš„è®°å½•é¡¹ä»¥å¼•ç”¨æ–‡ä»¶ã€‚&lt;/li>
&lt;li>åŸæ–‡ä»¶å’Œç¡¬é“¾æ¥æ–‡ä»¶å¯¹åº”äºåŒä¸€æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä¸€ä¸ªç‰©ç†æ–‡ä»¶ã€‚&lt;/li>
&lt;li>åˆ›å»ºç¡¬é“¾æ¥æ—¶åŸæ–‡ä»¶çš„è¿æ¥æ•°ï¼ˆi_nlinkï¼‰ä¼šé€’å¢ã€‚å³&lt;strong>ç¡¬é“¾æ¥æ•°&lt;/strong>é€’å¢ã€‚&lt;/li>
&lt;li>åˆ é™¤æ–‡ä»¶æ—¶ï¼Œ&lt;code>rm&lt;/code>å‘½ä»¤ä¼šé€’å‡è®¡æ•°çš„é“¾æ¥æ•°ã€‚æ–‡ä»¶è¦æ˜¯å­˜åœ¨ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªé“¾æ¥æ•°ã€‚å½“é“¾æ¥æ•°ä¸ºé›¶æ—¶ï¼Œè¯¥æ–‡ä»¶æ‰ä¼šè¢«çœŸæ­£åˆ é™¤ã€‚&lt;/li>
&lt;li>ç¡¬é“¾æ¥ä¸èƒ½è·¨åŸŸé©±åŠ¨å™¨æˆ–åˆ†åŒºï¼Œä¹Ÿä¸æ”¯æŒå¯¹ç›®å½•åˆ›å»ºç¡¬é“¾æ¥ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ€»ç»“æ¥è¯´ï¼Œç¬¦å·é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼‰å’Œç¡¬é“¾æ¥çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š
&lt;ul>
&lt;li>ç¬¦å·é“¾æ¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†åˆ°åŸæ–‡ä»¶çš„è·¯å¾„ä¿¡æ¯ï¼ˆ&lt;strong>å¿«æ·æ–¹å¼&lt;/strong>ï¼‰ï¼›è€Œç¡¬é“¾æ¥åˆ™ä¸åŸæ–‡ä»¶å…±äº«ç›¸åŒçš„inodeå’Œæ•°æ®å—ï¼ˆ&lt;strong>æ–‡ä»¶åˆ«å&lt;/strong>ï¼‰ã€‚&lt;/li>
&lt;li>ç¬¦å·é“¾æ¥å¯ä»¥&lt;strong>è·¨æ–‡ä»¶ç³»ç»Ÿ&lt;/strong>ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºï¼›è€Œç¡¬é“¾æ¥åˆ™&lt;strong>ä¸èƒ½è·¨åŸŸé©±åŠ¨å™¨æˆ–åˆ†åŒº&lt;/strong>ï¼Œ&lt;strong>ä¹Ÿä¸èƒ½å¯¹ç›®å½•åˆ›å»º&lt;/strong>ã€‚&lt;/li>
&lt;li>åˆ é™¤ç¬¦å·é“¾æ¥ä¸å½±å“åŸæ–‡ä»¶ï¼Œä½†åˆ é™¤åŸæ–‡ä»¶ä¼šä½¿ç¬¦å·é“¾æ¥æˆä¸ºæ­»é“¾æ¥ï¼›è€Œåˆ é™¤ç¡¬é“¾æ¥æ–‡ä»¶æ—¶ï¼Œåªæœ‰å½“æ‰€æœ‰ç¡¬é“¾æ¥éƒ½è¢«åˆ é™¤ä¸”åŸæ–‡ä»¶çš„é“¾æ¥æ•°ä¸ºé›¶æ—¶ï¼Œæ–‡ä»¶æ‰ä¼šè¢«çœŸæ­£åˆ é™¤ã€‚å³ç¡¬é“¾æ¥æ•°ä¸º0ï¼Œæ–‡ä»¶æ‰çœŸæ­£è¢«åˆ é™¤ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è¿™ä¸ªå‘½ä»¤å…è®¸ä½ åœ¨ä¸åŒçš„ä½ç½®ä¸ºåŒä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•å»ºç«‹åŒæ­¥çš„é“¾æ¥ï¼Œä»è€Œé¿å…äº†åœ¨å¤šä¸ªä½ç½®é‡å¤å­˜å‚¨ç›¸åŒçš„æ–‡ä»¶å†…å®¹ï¼Œ&lt;strong>èŠ‚çœäº†ç£ç›˜ç©ºé—´&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ln&lt;/code>å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln &lt;span class="o">[&lt;/span>é€‰é¡¹&lt;span class="o">]&lt;/span> &amp;lt;æºæ–‡ä»¶æˆ–ç›®å½•&amp;gt; &amp;lt;é“¾æ¥æ–‡ä»¶æˆ–ç›®å½•&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>å¸¸ç”¨é€‰é¡¹åŒ…æ‹¬ï¼š
&lt;ul>
&lt;li>&lt;code>-s&lt;/code>ï¼šåˆ›å»ºç¬¦å·é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼‰ã€‚è¿™ä¼šåœ¨ä½ é€‰å®šçš„ä½ç½®ä¸Šç”Ÿæˆä¸€ä¸ªæ–‡ä»¶çš„é•œåƒï¼Œä¸ä¼šå ç”¨ç£ç›˜ç©ºé—´ï¼Œè€Œæ˜¯ä¿å­˜äº†åŸå§‹æ–‡ä»¶çš„è·¯å¾„ã€‚ï¼ˆåˆ›å»ºå¿«æ·æ–¹å¼ï¼‰
&lt;ul>
&lt;li>ä¸ä½¿ç”¨&lt;code>-s&lt;/code>é€‰é¡¹æ—¶åˆ›å»ºç¡¬é“¾æ¥ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>-f&lt;/code>ï¼šå¼ºåˆ¶æ‰§è¡Œï¼Œå¦‚æœé“¾æ¥æ–‡ä»¶å·²å­˜åœ¨åˆ™è¦†ç›–ã€‚&lt;/li>
&lt;li>&lt;code>-v&lt;/code>ï¼šæ˜¾ç¤ºè¯¦ç»†çš„è¾“å‡ºä¿¡æ¯ã€‚&lt;/li>
&lt;li>&lt;code>--help&lt;/code>ï¼šæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ç†è§£è®°å¿†ï¼šlnå¯ä»¥ç†è§£ä¸ºlinkçš„ç¼©å†™ï¼Œså¯ä»¥ç†è§£ä¸ºsoftè½¯çš„æ„æ€ã€‚&lt;/li>
&lt;li>æ³¨æ„ï¼šæºæ–‡ä»¶ä¸€èˆ¬ç”¨ç»å¯¹è·¯å¾„ï¼Œç›¸å¯¹ä¼šå‡ºç°æ­»é“¾æ¥æƒ…å†µã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ç®€å•ä»‹ç»ä¸€äº›&lt;code>ls -lh&lt;/code>è¾“å‡º&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ls -lh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 20K
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root 19K May &lt;span class="m">8&lt;/span> 22:49 abc.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x. &lt;span class="m">3&lt;/span> root root &lt;span class="m">18&lt;/span> May &lt;span class="m">8&lt;/span> 23:15 demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># læ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼Œhæ–‡ä»¶å¤§å°ç”¨äººç±»å¯è¯»æ‡‚çš„æ–¹å¼æ˜¾ç¤ºã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw- r-- r--
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-å¼€å¤´è¡¨ç¤ºæ–‡ä»¶ï¼Œdè¡¨ç¤ºç›®å½•ï¼Œlè¡¨ç¤ºé“¾æ¥ï¼Œä¸‰ä½ä¸ºä¸€ç»„ç”¨rwx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwx r-x r-x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å½“å‰ç”¨æˆ·æƒé™ ç”¨æˆ·æ‰€å±ç»„æƒé™ å…¶ä»–ç”¨æˆ·æƒé™
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æ•°å­—1è¡¨ç¤ºç¡¬é“¾æ¥æ•°ï¼Œç†è§£ä¸ºåˆ«åï¼Œåˆ«åä¸º0ï¼Œæ–‡ä»¶æ‰ä¼šè¢«åˆ é™¤ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æœ‰å¤šå°‘ç§æ–¹å¼å¯ä»¥è®¿é—®è¯¥æ–‡ä»¶æˆ–ç›®å½•
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> æ–‡ä»¶ä¸€èˆ¬ä¸º1ï¼šç»å¯¹è·¯å¾„
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ç›®å½•åªæœ‰ä¸€å±‚ä¸€èˆ¬ä¸º2ï¼šç»å¯¹å’Œcd .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2å±‚ä¸º3ï¼šç»å¯¹ã€cd . ã€cd ..
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root ï¼šæ‹¥æœ‰è€…
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root ï¼šæ‰€åœ¨ç»„ï¼Œæ²¡æŒ‡å®šé»˜è®¤åŒåã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5æœˆ &lt;span class="m">8&lt;/span> 22:49 æ–‡ä»¶æœ€åä¿®æ”¹æ—¥æœŸæ—¶é—´
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æœ€åï¼šæ–‡ä»¶æˆ–ç›®å½•åç§°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æœ‰ç®­å¤´è¡¨ç¤ºè½¯è¿æ¥ï¼Œæ²¡æœ‰ç¡¬é“¾æ¥ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¼”ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">localhost &lt;span class="nb">test&lt;/span> $ ls -lh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 20K
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root 19K May &lt;span class="m">8&lt;/span> 22:49 abc.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x. &lt;span class="m">3&lt;/span> root root &lt;span class="m">18&lt;/span> May &lt;span class="m">8&lt;/span> 23:46 demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localhost &lt;span class="nb">test&lt;/span> $ ln -sv ~/test/abc.txt ./demo/soft
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â€˜./demo/softâ€™ -&amp;gt; â€˜/root/test/abc.txtâ€™
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localhost &lt;span class="nb">test&lt;/span> $ ln -v ~/test/abc.txt ./demo/hard
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â€˜./demo/hardâ€™ &lt;span class="o">=&lt;/span>&amp;gt; â€˜/root/test/abc.txtâ€™
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localhost &lt;span class="nb">test&lt;/span> $ ls -lh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 20K
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">2&lt;/span> root root 19K May &lt;span class="m">8&lt;/span> 22:49 abc.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x. &lt;span class="m">3&lt;/span> root root &lt;span class="m">42&lt;/span> May &lt;span class="m">8&lt;/span> 23:46 demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localhost &lt;span class="nb">test&lt;/span> $ &lt;span class="nb">cd&lt;/span> demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localhost demo $ ls -lh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 20K
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">2&lt;/span> root root 19K May &lt;span class="m">8&lt;/span> 22:49 hard
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">18&lt;/span> May &lt;span class="m">8&lt;/span> 23:46 soft -&amp;gt; /root/test/abc.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x. &lt;span class="m">2&lt;/span> root root &lt;span class="m">6&lt;/span> May &lt;span class="m">8&lt;/span> 23:15 &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localhost demo $
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šæµ‹è¯•ç¯å¢ƒæ˜¯åœ¨Linuxä¸­ï¼Œ&lt;code>ln&lt;/code>å‘½ä»¤å¹¶ä¸é€‚ç”¨äºwindowsç¯å¢ƒã€‚åˆ›å»ºçš„æ–‡ä»¶é“¾æ¥æ— æ•ˆã€‚&lt;/p>
&lt;hr>
&lt;h2 id="curl">
&lt;a href="#curl" class="header-anchor">#&lt;/a>
curl
&lt;/h2>&lt;p>&lt;code>curl&lt;/code>å‘½ä»¤æ˜¯ä¸€ä¸ªåˆ©ç”¨URLè§„åˆ™åœ¨å‘½ä»¤è¡Œä¸‹å·¥ä½œçš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œå®ƒæ”¯æŒæ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ï¼Œå› æ­¤è¢«è§†ä¸ºç»¼åˆä¼ è¾“å·¥å…·ï¼Œä½†ä¼ ç»Ÿä¸Šä¹ æƒ¯ç§°å…¶ä¸ºä¸‹è½½å·¥å…·ã€‚curlæ”¯æŒåŒ…æ‹¬HTTPã€HTTPSã€FTPç­‰ä¼—å¤šåè®®ï¼Œå¹¶å…·å¤‡å¤šç§ç‰¹æ€§ï¼Œå¦‚POSTã€cookiesã€è®¤è¯ã€ä»æŒ‡å®šåç§»å¤„ä¸‹è½½éƒ¨åˆ†æ–‡ä»¶ã€ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²ã€é™é€Ÿã€æ–‡ä»¶å¤§å°ã€è¿›åº¦æ¡ç­‰ã€‚è¿™äº›ç‰¹æ€§ä½¿å¾—curlåœ¨å¤„ç†ç½‘é¡µå¤„ç†æµç¨‹å’Œæ•°æ®æ£€ç´¢è‡ªåŠ¨åŒ–æ–¹é¢éå¸¸æœ‰ç”¨ã€‚&lt;/p>
&lt;p>æ€»ç»“ï¼šç”¨äºå‘é€ç½‘ç»œè¯·æ±‚ï¼Œå¯ä»¥ä¸‹è½½å’Œä¸Šä¼ æ–‡ä»¶ã€‚è€Œ&lt;code>wget&lt;/code>åªèƒ½ç”¨äºä¸‹è½½æ–‡ä»¶ï¼Œä½†&lt;a class="link" href="#wget" >wget&lt;/a>ä¸‹è½½æ–‡ä»¶çš„åŠŸèƒ½æ¯”&lt;code>curl&lt;/code>å¼ºå¤§ã€‚&lt;/p>
&lt;p>å®‰è£…ï¼š&lt;/p>
&lt;ol>
&lt;li>linuxç³»ç»Ÿï¼šæ ¹æ®ä½ çš„Linuxå‘è¡Œç‰ˆï¼Œä½¿ç”¨ç›¸åº”çš„åŒ…ç®¡ç†å™¨æ¥å®‰è£…curlã€‚
&lt;ul>
&lt;li>å¯¹äºDebian/Ubuntuç³»ç»Ÿï¼Œä½¿ç”¨apt-getå‘½ä»¤å®‰è£…ï¼š&lt;code>sudo apt install curl&lt;/code>&lt;/li>
&lt;li>å¯¹äºCentOS/Fedoraç³»ç»Ÿï¼Œä½¿ç”¨yumå‘½ä»¤å®‰è£…ï¼š&lt;code>sudo yum install curl&lt;/code>&lt;/li>
&lt;li>å¯¹äºArch Linuxç³»ç»Ÿï¼Œä½¿ç”¨pacmanå‘½ä»¤å®‰è£…ï¼š&lt;code>sudo pacman -S curl&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>windowsç³»ç»Ÿï¼š
&lt;ol>
&lt;li>&lt;a class="link" href="https://curl.se/download.html" target="_blank" rel="noopener"
>å®˜ç½‘&lt;/a>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬ï¼Œæ·»åŠ ä¸€ä¸ªCURL_HOMEç¯å¢ƒå˜é‡åï¼ŒæŒ‡å‘çš„æ˜¯curl.exeæ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚å¹¶å°†å…¶æ·»åŠ åˆ°pathç¯å¢ƒå˜é‡ä¸­ã€‚&lt;/li>
&lt;li>æˆ–è€…å®‰è£…&lt;a class="link" href="https://www.msys2.org/" target="_blank" rel="noopener"
>msys2&lt;/a>åˆ©ç”¨pacmanåŒ…ç®¡ç†å™¨å®‰è£…ã€‚&lt;/li>
&lt;li>æˆ–è€…å®‰è£…&lt;a class="link" href="https://www.mingw-w64.org/downloads/#mingw-builds" target="_blank" rel="noopener"
>Mingw&lt;/a>è‡ªå¸¦curlï¼ŒMingwä¹Ÿå¯ä»¥ç”¨msys2æ¥å®‰è£…ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>MacOSç³»ç»Ÿè‡ªå¸¦ã€‚&lt;/li>
&lt;/ol>
&lt;p>åŸºæœ¬ä½¿ç”¨ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>curlå‘½ä»¤çš„åŸºæœ¬è¯­æ³•æ ¼å¼ä¸ºï¼š&lt;code>curl [é€‰é¡¹] URL&lt;/code>ã€‚å…¶ä¸­ï¼ŒURLæ˜¯è¦è¯·æ±‚çš„ç›®æ ‡åœ°å€ï¼Œè€Œé€‰é¡¹åˆ™ç”¨äºæŒ‡å®šå„ç§å‚æ•°å’ŒåŠŸèƒ½ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-X&lt;/code> æˆ– &lt;code>--request&lt;/code>ï¼šç”¨äºæŒ‡å®šHTTPè¯·æ±‚æ–¹æ³•ï¼Œå¦‚GETã€POSTã€PUTã€DELETEç­‰ã€‚&lt;/p>
&lt;ul>
&lt;li>é»˜è®¤å‘é€getè¯·æ±‚ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-SHELL" data-lang="SHELL">&lt;span class="line">&lt;span class="cl">curl -X POST http://example.com/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>-H&lt;/code> æˆ– &lt;code>--header&lt;/code>: æ·»åŠ è‡ªå®šä¹‰çš„ HTTP å¤´ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-SHELL" data-lang="SHELL">&lt;span class="line">&lt;span class="cl">curl -H &lt;span class="s2">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> http://example.com/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>-d&lt;/code> æˆ– &lt;code>--data&lt;/code>: å‘é€ POST è¯·æ±‚æ—¶ï¼Œå°†æ•°æ®ä½œä¸ºè¯·æ±‚ä½“å‘é€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-SHELL" data-lang="SHELL">&lt;span class="line">&lt;span class="cl">curl -d &lt;span class="s2">&amp;#34;param1=value1&amp;amp;param2=value2&amp;#34;&lt;/span> http://example.com/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äº JSON æ•°æ®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -d &lt;span class="s1">&amp;#39;{&amp;#34;key1&amp;#34;:&amp;#34;value1&amp;#34;, &amp;#34;key2&amp;#34;:&amp;#34;value2&amp;#34;}&amp;#39;&lt;/span> -H &lt;span class="s2">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> http://example.com/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>-F&lt;/code> æˆ– &lt;code>--form&lt;/code>: ç”¨äºå‘é€ multipart/form-data æ ¼å¼çš„æ•°æ®ï¼Œé€šå¸¸ç”¨äºæ–‡ä»¶ä¸Šä¼ ã€‚&lt;/p>
&lt;ul>
&lt;li>å‚æ•°&lt;code>&amp;quot;æ–‡ä»¶å=@path&amp;quot;&lt;/code>,è¿˜å¯ä»¥æŒ‡å®šç±»å‹&lt;code>&amp;quot;æ–‡ä»¶å=@path;type=MIME&amp;quot;&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -F &lt;span class="s2">&amp;#34;file=@filename.txt&amp;#34;&lt;/span> http://example.com/upload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>-o&lt;/code> æˆ– &lt;code>--output&lt;/code>: å°†å“åº”è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Šã€‚é»˜è®¤å½“å‰ç›®å½•&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -o output.html http://example.com/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>&lt;code>-O&lt;/code>: å°†å“åº”ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸è¿œç¨‹æ–‡ä»¶çš„æ–‡ä»¶åç›¸åŒã€‚åœ¨å½“å‰ç›®å½•&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -O http://example.com/file.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-s&lt;/code> æˆ– &lt;code>--silent&lt;/code>: é™é»˜æ¨¡å¼ï¼Œä¸æ˜¾ç¤ºè¿›åº¦æˆ–é”™è¯¯æ¶ˆæ¯ã€‚å¸¸ç”¨Sç»„åˆä½¿ç”¨ï¼Œæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-v&lt;/code> æˆ– &lt;code>--verbose&lt;/code>: è¯¦ç»†æ¨¡å¼ï¼Œæ˜¾ç¤ºè¯¦ç»†çš„é€šä¿¡è¿‡ç¨‹ï¼ŒåŒ…æ‹¬è¯·æ±‚å¤´å’Œå“åº”å¤´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-i&lt;/code>: æ˜¾ç¤ºå“åº”å¤´ä¿¡æ¯ä»¥åŠè¿”å›çš„å†…å®¹ bodyã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-I&lt;/code>: åªæ˜¾ç¤ºå“åº”å¤´ä¿¡æ¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-u&lt;/code> ç”¨æˆ·å:å¯†ç : æŒ‡å®šç”¨æˆ·åå’Œå¯†ç è¿›è¡Œèº«ä»½éªŒè¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -u username:password http://example.com/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>-L&lt;/code>: è·Ÿéšé‡å®šå‘ã€‚å½“ HTTP å“åº”æ˜¯ä¸€ä¸ªé‡å®šå‘æ—¶ï¼Œcurl ä¼šè‡ªåŠ¨è·å–é‡å®šå‘åçš„å†…å®¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-k&lt;/code> æˆ– &lt;code>--insecure&lt;/code>: å…è®¸è¿æ¥åˆ°ä¸å®‰å…¨çš„ SSL ç«™ç‚¹ï¼Œå³å¿½ç•¥ SSL è¯ä¹¦éªŒè¯ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å¸¸ç”¨ç»„åˆï¼š&lt;code>curl -fsSL&lt;/code>ï¼Œé»˜è®¤getè¯·æ±‚ã€‚&lt;/p>
&lt;ul>
&lt;li>fä¸æ˜¾ç¤ºå®¢æˆ·ç«¯é”™è¯¯ã€‚&lt;/li>
&lt;li>sä¸æ˜¾ç¤ºè¿›åº¦ã€é”™è¯¯æ¶ˆæ¯ã€‚é…åˆSæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯&lt;/li>
&lt;li>Læ¥å—é‡å®šå‘ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="wget">
&lt;a href="#wget" class="header-anchor">#&lt;/a>
wget
&lt;/h2>&lt;p>&lt;code>wget&lt;/code> æ˜¯ä¸€ä¸ªåœ¨ Unix å’Œ Linux ç³»ç»Ÿä¸Šå¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºä»ç½‘ç»œä¸Šä¸‹è½½æ–‡ä»¶ã€‚&lt;/p>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼šå¦‚æœä¸‹è½½è¿‡ç¨‹ä¸­è¿æ¥ä¸­æ–­ï¼Œå¯ä»¥åœ¨ä¹‹åä»æ–­ç‚¹å¤„ç»§ç»­ä¸‹è½½ã€‚&lt;/li>
&lt;li>æ”¯æŒé€’å½’ä¸‹è½½ï¼šå¯ä»¥ä¸‹è½½ç½‘é¡µä¸Šçš„æ‰€æœ‰é“¾æ¥æ–‡ä»¶ï¼Œå¹¶é‡å»ºç›®å½•ç»“æ„ã€‚&lt;/li>
&lt;li>å¼ºå¤§çš„é‡è¯•æœºåˆ¶ï¼šåœ¨ä¸‹è½½è¿‡ç¨‹ä¸­å¦‚æœç½‘ç»œå‡ºç°é—®é¢˜ï¼Œ&lt;code>wget&lt;/code> ä¼šè‡ªåŠ¨é‡è¯•ï¼Œç›´åˆ°ä¸‹è½½å®Œæˆã€‚&lt;/li>
&lt;li>åå°æ‰§è¡Œï¼šæ”¯æŒåœ¨åå°è¿è¡Œä¸‹è½½ä»»åŠ¡ï¼Œç”¨æˆ·æ— éœ€ä¿æŒç™»å½•çŠ¶æ€ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;a class="link" href="#curl" >curl&lt;/a>æ²¡æœ‰ä»¥ä¸Šä¼˜ç‚¹ï¼Œä½†å®ƒæ”¯æŒæ›´å¤šçš„åè®®ã€‚wgetåªæ”¯æŒHTTPã€HTTPSå’ŒFTPåè®®ã€‚curlä½¿ç”¨æ›´å¹¿æ³›ã€‚&lt;/p>
&lt;p>å®‰è£…ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>linuxç³»ç»Ÿï¼šæ ¹æ®ä½ çš„Linuxå‘è¡Œç‰ˆï¼Œä½¿ç”¨ç›¸åº”çš„åŒ…ç®¡ç†å™¨æ¥å®‰è£…wgetã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¯¹äºDebian/Ubuntuç³»ç»Ÿï¼Œä½¿ç”¨apt-getå‘½ä»¤å®‰è£…ï¼š&lt;code>sudo apt install wget&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯¹äºCentOS/Fedoraç³»ç»Ÿï¼Œä½¿ç”¨yumå‘½ä»¤å®‰è£…ï¼š&lt;code>sudo yum install wget&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯¹äºArch Linuxç³»ç»Ÿï¼Œä½¿ç”¨pacmanå‘½ä»¤å®‰è£…ï¼š&lt;code>sudo pacman -S wget&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>windowsç³»ç»Ÿï¼š&lt;/p>
&lt;ul>
&lt;li>å®˜ç½‘&lt;a class="link" href="https://www.gnu.org/software/wget/" target="_blank" rel="noopener"
>GNU Wget&lt;/a>ä¸‹è½½å®‰è£…æˆ–å…¶ä»–å¯é çš„è½¯ä»¶ä¸‹è½½ï¼Œç„¶åè·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡pathä¸­ã€‚&lt;/li>
&lt;li>æˆ–è€…å®‰è£…&lt;a class="link" href="https://www.msys2.org/" target="_blank" rel="noopener"
>msys2&lt;/a>åˆ©ç”¨pacmanåŒ…ç®¡ç†å™¨å®‰è£…ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>macosç³»ç»Ÿï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¯¹äºmacOSï¼Œä½¿ç”¨&lt;a class="link" href="https://github.com/Homebrew/brew" target="_blank" rel="noopener"
>Homebrew&lt;/a>åŒ…ç®¡ç†å™¨æ¥å®‰è£…wgetã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">brew&lt;/span> &lt;span class="nx">install&lt;/span> &lt;span class="nx">wget&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>åŸºæœ¬ä½¿ç”¨ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>-b, &amp;ndash;background&lt;/strong>ï¼šåœ¨åå°æ‰§è¡Œä¸‹è½½ä»»åŠ¡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-c, &amp;ndash;continue&lt;/strong>ï¼šç»§ç»­ä¸‹è½½ä¹‹å‰æœªå®Œæˆçš„æ–‡ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-r, &amp;ndash;recursive&lt;/strong>ï¼šé€’å½’ä¸‹è½½ï¼Œä¸‹è½½æŒ‡å®š URL ä¸­çš„æ‰€æœ‰é“¾æ¥ã€‚å¯ä»¥ä¸‹è½½æ•´ä¸ªç›®å½•åŠå…¶å­ç›®å½•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget -r http://www.example.com/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼šåœ¨ä½¿ç”¨é€’å½’ä¸‹è½½æ—¶ï¼Œå»ºè®®åŠ ä¸Š &lt;code>-np&lt;/code> å’Œ &lt;code>-nH&lt;/code> é€‰é¡¹ï¼Œä»¥é¿å…ä¸‹è½½è¿‡å¤šçš„ä¸å¿…è¦æ–‡ä»¶å’Œåˆ›å»ºå¤æ‚çš„ç›®å½•ç»“æ„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-np, &amp;ndash;no-parent&lt;/strong>ï¼šä¸é€’å½’ä¸‹è½½ä¸Šçº§ç›®å½•ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-nH, &amp;ndash;no-host-directories&lt;/strong>ï¼šä¸åˆ›å»ºä¸»æœºç›®å½•ï¼Œå°†æ–‡ä»¶ä¿å­˜åœ¨å½“å‰ç›®å½•ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-P DIRECTORY, &amp;ndash;directory-prefix=DIRECTORY&lt;/strong>ï¼šå°†ä¸‹è½½çš„æ–‡ä»¶ä¿å­˜åˆ°æŒ‡å®šçš„ç›®å½•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget -P /tmp http://www.example.com/file.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>-O FILE, &amp;ndash;output-document=FILE&lt;/strong>ï¼šå°†ä¸‹è½½çš„æ–‡ä»¶ä¿å­˜ä¸ºæŒ‡å®šçš„æ–‡ä»¶åã€‚å¦‚æœå­˜åœ¨ä¼šè¦†ç›–ã€‚&lt;code>-N&lt;/code>ï¼ˆæ—¶é—´æˆ³æ£€æŸ¥ï¼‰ï¼Œå¦‚æœæ—§ä¼šè¦†ç›–ï¼Œåä¹‹ä¸ä¼šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget -O new_file.zip http://www.example.com/file.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>-nc, &amp;ndash;no-clobber&lt;/strong>ï¼šå¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸è¦†ç›–åŸæœ‰æ–‡ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-nv, &amp;ndash;no-verbose&lt;/strong>ï¼šä¸‹è½½æ—¶åªæ˜¾ç¤ºæ›´æ–°å’Œå‡ºé”™ä¿¡æ¯ï¼Œä¸æ˜¾ç¤ºè¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-v, &amp;ndash;verbose&lt;/strong>ï¼šè¯¦ç»†æ¨¡å¼ï¼Œå¢åŠ è¾“å‡ºä¿¡æ¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-q, &amp;ndash;quiet&lt;/strong>ï¼šé™é»˜æ¨¡å¼ï¼Œå‡å°‘è¾“å‡ºä¿¡æ¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&amp;ndash;no-check-certificate&lt;/strong>ï¼šä¸‹è½½ HTTPS ç½‘ç«™èµ„æºæ—¶ï¼Œè·³è¿‡è¯ä¹¦æ£€æµ‹è¿‡ç¨‹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-t NUM æˆ– &amp;ndash;tries=NUM&lt;/strong>ï¼šæŒ‡å®šæœ€å¤§å°è¯•æ¬¡æ•°ã€‚å¦‚æœä¸‹è½½å¤±è´¥ï¼Œwget ä¼šå°è¯•é‡æ–°ä¸‹è½½æŒ‡å®šçš„æ¬¡æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-U AGENT æˆ– &amp;ndash;user-agent=AGENT&lt;/strong>ï¼šæŒ‡å®š User-Agent å­—ç¬¦ä¸²ã€‚è¿™å¯ä»¥ç”¨æ¥ä¼ªè£…ä¸ºä¸åŒçš„æµè§ˆå™¨æˆ–å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-N æˆ– &amp;ndash;timestamping&lt;/strong>ï¼šå¦‚æœæœ¬åœ°æ–‡ä»¶å­˜åœ¨ä¸”æ—¶é—´æˆ³è¾ƒæ–°ï¼Œåˆ™ä¸é‡æ–°ä¸‹è½½æ–‡ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-T SEC æˆ– &amp;ndash;timeout=SEC&lt;/strong>ï¼šæŒ‡å®šè¶…æ—¶æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-A TYPES æˆ– &amp;ndash;accept=TYPES&lt;/strong>ï¼šæŒ‡å®šä¸‹è½½æ–‡ä»¶çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ&lt;code>-A jpg,png,gif&lt;/code> è¡¨ç¤ºåªä¸‹è½½ jpgã€png å’Œ gif æ–‡ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>-d æˆ– &amp;ndash;debug&lt;/strong>ï¼šæ‰“å°è°ƒè¯•è¾“å‡ºã€‚è¿™ä¼šåœ¨æ ‡å‡†é”™è¯¯ä¸Šè¾“å‡ºå¤§é‡ä¿¡æ¯ï¼Œé€šå¸¸ç”¨äºè¯Šæ–­é—®é¢˜ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>å¸¸ç”¨ç»„åˆï¼š&lt;/p>
&lt;p>&lt;code>wget -O-&lt;/code>:Oè¡¨ç¤ºæŒ‡å®šæ–‡ä»¶åï¼Œåé¢-è¡¨ç¤ºæ²¡æœ‰æŒ‡å®šæ–‡ä»¶åï¼Œå†…å®¹å°†è¾“å‡ºåˆ°TTYã€‚&lt;/p>
&lt;p>é€šå¸¸é…åˆ&lt;code>bash -c &amp;quot;$(wget -O- url)&amp;quot;&lt;/code>è¿è¡Œè„šæœ¬ã€‚urlä¸ºè„šæœ¬åœ°å€ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å…¶ä¸­$()è¡¨ç¤ºåœ¨å½“å‰TTYä¸­è¿è¡Œå­å‘½ä»¤ï¼Œä¸‹è½½è„šæœ¬ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>[bash -c](#bash -c)è¡¨ç¤ºå°†ä¸‹è½½çš„å­—ç¬¦ä¸²åšä¸ºå‘½ä»¤æ‰§è¡Œã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="bash--c">
&lt;a href="#bash--c" class="header-anchor">#&lt;/a>
bash -c
&lt;/h3>&lt;p>&lt;code>bash -c&lt;/code> å‘½ä»¤ç”¨äºåœ¨ Bash shell ä¸­æ‰§è¡Œä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‘½ä»¤ã€‚&lt;/p>
&lt;p>åŸºæœ¬è¯­æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bash -c &lt;span class="s1">&amp;#39;command_string&amp;#39;&lt;/span> &lt;span class="o">[&lt;/span>arg0 &lt;span class="o">[&lt;/span>arg1 ...&lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>command_string&lt;/code> æ˜¯ä½ æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤å­—ç¬¦ä¸²ã€‚&lt;/li>
&lt;li>&lt;code>arg0&lt;/code>ã€&lt;code>arg1&lt;/code> ç­‰æ˜¯å¯é€‰çš„ï¼Œå®ƒä»¬ä¼šè¢«ç”¨ä½œ &lt;code>$0&lt;/code>ã€&lt;code>$1&lt;/code>ã€&lt;code>$2&lt;/code> ç­‰ shell å˜é‡åœ¨ &lt;code>command_string&lt;/code> å†…éƒ¨ã€‚
&lt;ul>
&lt;li>æ³¨æ„è¿™é‡Œçš„$0å¹¶ä¸æ˜¯è„šæœ¬åæˆ–ç»ˆç«¯åï¼Œè€Œæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å­—ç¬¦ä¸²å¯ä»¥ç”¨&lt;code>&amp;quot;&amp;quot;/''&lt;/code>ï¼ŒåŒºåˆ«åœ¨äºåŒå¼•å·ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œå•å¼•å·ä¸ä¼šã€‚æ‰§è¡Œè„šæœ¬æ—¶å»ºè®®åŒå¼•å·ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ bash -c &lt;span class="s1">&amp;#39;echo Hello, World!&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hello, World!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ bash -c &lt;span class="s1">&amp;#39;echo $0 $1&amp;#39;&lt;/span> bash &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># bash -c &amp;#34;$(wget -O- https://gist.githubusercontent.com/lss233/2fdd75be3f0724739368d0dcd9d1367d/raw/62a790da4a391af096074b3355c2c2b7ecab3c28/chatgpt-mirai-installer-gocqhttp.sh)&amp;#34; chatgpt-qq-botå®‰è£…è„šæœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr></description></item><item><title>Fsnotify Introduction</title><link>https://arlettebrook.github.io/p/fsnotify-introduction/</link><pubDate>Wed, 08 May 2024 15:49:50 +0800</pubDate><guid>https://arlettebrook.github.io/p/fsnotify-introduction/</guid><description>&lt;blockquote>
&lt;p>Viper å¯ä»¥ç›‘å¬æ–‡ä»¶ä¿®æ”¹è¿›è€Œè‡ªåŠ¨é‡æ–°åŠ è½½ã€‚ å…¶å†…éƒ¨ä½¿ç”¨çš„å°±æ˜¯&lt;code>fsnotify&lt;/code>è¿™ä¸ªåº“ï¼Œå®ƒæ˜¯è·¨å¹³å°çš„ã€‚&lt;code>fs&lt;/code>æ˜¯filesystemçš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿé€šçŸ¥ã€‚èƒ½å¤Ÿç›‘å¬æ–‡ä»¶çš„ä¿®æ”¹ï¼Œè¿›è€Œå‘é€é€šçŸ¥ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹&lt;a class="link" href="https://github.com/fsnotify/fsnotify" target="_blank" rel="noopener"
>fsnotify&lt;/a>ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>å…ˆå®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/fsnotify/fsnotify
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/fsnotify/fsnotify&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Create new watcher.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">watcher&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewWatcher&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">watcher&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Watcher&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">watcher&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}(&lt;/span>&lt;span class="nx">watcher&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">done&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">chan&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Start listening for events.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nb">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">select&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ok&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="nx">watcher&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Events&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">ok&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/*if event.Has(fsnotify.Write) {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> log.Println(&amp;#34;modified file:&amp;#34;, event.Name)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> }*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ok&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="nx">watcher&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Errors&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">ok&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Add a path.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">watcher&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="nx">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>fsnotify&lt;/code>çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼š&lt;/p>
&lt;ul>
&lt;li>å…ˆè°ƒç”¨&lt;code>NewWatcher&lt;/code>åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨ï¼›&lt;/li>
&lt;li>ç„¶åè°ƒç”¨ç›‘å¬å™¨çš„&lt;code>Add&lt;/code>å¢åŠ ç›‘å¬çš„æ–‡ä»¶æˆ–ç›®å½•ï¼›&lt;/li>
&lt;li>å¦‚æœç›®å½•æˆ–æ–‡ä»¶æœ‰äº‹ä»¶äº§ç”Ÿï¼Œç›‘å¬å™¨ä¸­çš„é€šé“&lt;code>Events&lt;/code>å¯ä»¥å–å‡ºäº‹ä»¶ã€‚å¦‚æœå‡ºç°é”™è¯¯ï¼Œç›‘å¬å™¨ä¸­çš„é€šé“&lt;code>Errors&lt;/code>å¯ä»¥å–å‡ºé”™è¯¯ä¿¡æ¯ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å¦ä¸€ä¸ª goroutine ä¸­å¾ªç¯è¯»å–å‘ç”Ÿçš„äº‹ä»¶åŠé”™è¯¯ï¼Œç„¶åè¾“å‡ºå®ƒä»¬ã€‚&lt;/p>
&lt;p>ç¼–è¯‘ã€è¿è¡Œç¨‹åºã€‚åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ª&lt;code>æ–°å»ºæ–‡æœ¬æ–‡æ¡£.txt&lt;/code>ï¼Œç„¶åé‡å‘½åä¸º&lt;code>abc.txt&lt;/code>æ–‡ä»¶ï¼Œè¾“å…¥å†…å®¹&lt;code>some test text&lt;/code>ï¼Œç„¶ååˆ é™¤å®ƒã€‚è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/05/08 16:29:52 æ–°å»ºæ–‡æœ¬æ–‡æ¡£.txt CREATE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/05/08 16:30:03 æ–°å»ºæ–‡æœ¬æ–‡æ¡£.txt RENAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/05/08 16:30:03 abc.txt CREATE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/05/08 16:30:15 abc.txt WRITE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/05/08 16:30:26 abc.txt REMOVE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>å…¶å®ï¼Œé‡å‘½åæ—¶ä¼šäº§ç”Ÿä¸¤ä¸ªäº‹ä»¶ï¼Œä¸€ä¸ªæ˜¯åŸæ–‡ä»¶çš„&lt;code>RENAME&lt;/code>äº‹ä»¶ï¼Œä¸€ä¸ªæ˜¯æ–°æ–‡ä»¶çš„&lt;code>CREATE&lt;/code>äº‹ä»¶ã€‚&lt;/strong>&lt;/p>
&lt;p>æ³¨æ„ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>fsnotify&lt;/code>ä½¿ç”¨äº†æ“ä½œç³»ç»Ÿæ¥å£ï¼Œç›‘å¬å™¨ä¸­ä¿å­˜äº†ç³»ç»Ÿèµ„æºçš„å¥æŸ„ï¼Œæ‰€ä»¥ä½¿ç”¨åéœ€è¦å…³é—­ã€‚&lt;/li>
&lt;li>ä¿®æ”¹æ–‡ä»¶æ“ä½œå»ºè®®ä¸è¦åœ¨IDEä¸­æ“ä½œï¼Œå¦‚GlLandã€‚IDEçš„ç¼“å­˜å’Œè‡ªåŠ¨ä¿å­˜ä¼šå“åº”è¾“å‡ºç»“æœã€‚å»ºè®®ç›´æ¥åœ¨ç³»ç»Ÿæ–‡ä»¶ç®¡ç†å™¨ä¸­æ“ä½œï¼Œæ‰ä¼šå‡ºç°ä¸Šé¢ç»“æœã€‚&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="äº‹ä»¶">
&lt;a href="#%e4%ba%8b%e4%bb%b6" class="header-anchor">#&lt;/a>
äº‹ä»¶
&lt;/h2>&lt;p>ä¸Šé¢ç¤ºä¾‹ä¸­çš„äº‹ä»¶æ˜¯&lt;code>fsnotify.Event&lt;/code>ç±»å‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// fsnotify/fsnotify.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Event&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Op&lt;/span> &lt;span class="nx">Op&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>äº‹ä»¶åªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œ&lt;code>Name&lt;/code>è¡¨ç¤ºå‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶æˆ–ç›®å½•åï¼Œ&lt;code>Op&lt;/code>è¡¨ç¤ºå…·ä½“çš„å˜åŒ–ã€‚&lt;code>Op&lt;/code>æœ‰ 5 ç§å–å€¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// fsnotify/fsnotify.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Op&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Create&lt;/span> &lt;span class="nx">Op&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="kc">iota&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Write&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Remove&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Rename&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Chmod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨&lt;a class="link" href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" >å¿«é€Ÿä½¿ç”¨&lt;/a>ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ¼”ç¤ºäº†å‰ 4 ç§äº‹ä»¶ã€‚&lt;code>Chmod&lt;/code>äº‹ä»¶åœ¨æ–‡ä»¶æˆ–ç›®å½•çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œåœ¨ Linux ç³»ç»Ÿä¸­å¯ä»¥é€šè¿‡&lt;code>chmod&lt;/code>å‘½ä»¤æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•å±æ€§ã€‚&lt;/p>
&lt;p>äº‹ä»¶ä¸­çš„&lt;code>Op&lt;/code>æ˜¯æŒ‰ç…§å·¦ç§»ä½è¿ç®—æ¥å­˜å‚¨çš„ï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªï¼Œå¯ä»¥é€šè¿‡&lt;code>&amp;amp;&lt;/code>æ“ä½œåˆ¤æ–­å¯¹åº”äº‹ä»¶æ˜¯ä¸æ˜¯å‘ç”Ÿäº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Write&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Op has Write&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>è¡¥å……ï¼š&lt;/p>
&lt;p>â€‹ ä¸è¿ç®—&amp;amp;ï¼šåŒä¸º1ä¸º1ã€‚&lt;/p>
&lt;p>â€‹ å·¦ç§»è¿ç®—&amp;laquo;ï¼šå‘åšåšç§»åŠ¨æŒ‡å®šä½ï¼Œä½ä½ç”¨0è¡¥é½&lt;/p>
&lt;p>â€‹ æˆ–è¿ç®—ï¼šæœ‰1å°±ä¸º1ã€‚ç”¨åœ¨ç»„åˆ&lt;code>Op&lt;/code>â€”â€”&amp;gt;&lt;code>|&lt;/code>&lt;/p>
&lt;p>â€‹ äº‹ä»¶ä¸­çš„&lt;code>Op&lt;/code>æ˜¯é€šè¿‡å·¦ç§»è¿ç®—ä¹‹åï¼Œç»“æœä¸º1,2,4,6,8åè¿›åˆ¶æ¥å­˜å‚¨çš„ï¼Œå®ƒä»¬çš„äºŒè¿›åˆ¶ä½éƒ½åªæœ‰ä¸€ä¸ª1ï¼Œå½“è¿›è¡Œä¸è¿ç®—æ—¶ï¼Œå°±å°±èƒ½åˆ¤æ–­æ˜¯å¦åŒ…å«æŒ‡å®š&lt;code>Op&lt;/code>ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>åˆ¤æ–­äº‹ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ª&lt;code>Op&lt;/code>ï¼Œå°è£…åˆ°äº†äº‹ä»¶å¯¹è±¡çš„&lt;code>Has&lt;/code>æ–¹æ³•ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// fsnotify/fsnotify.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="nx">Event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">op&lt;/span> &lt;span class="nx">Op&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">op&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">o&lt;/span> &lt;span class="nx">Op&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="nx">Op&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">o&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="c1">// event.Op &amp;amp; fsnotify.Write != 0åŒç†
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“æˆ‘ä»¬ç›´æ¥è¾“å‡º&lt;code>Op&lt;/code>æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨&lt;code>String()&lt;/code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¸®æˆ‘ä»¬å°†å¯¹åº”çš„&lt;code>Op&lt;/code>ï¼ˆuintç±»å‹ï¼‰è½¬æ¢æˆå®šä¹‰çš„å…·ä½“æ“ä½œï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">o&lt;/span> &lt;span class="nx">Op&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Create&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;|CREATE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Remove&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;|REMOVE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Write&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;|WRITE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Rename&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;|RENAME&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Chmod&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;|CHMOD&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Len&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;[no events]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">()[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="åº”ç”¨">
&lt;a href="#%e5%ba%94%e7%94%a8" class="header-anchor">#&lt;/a>
åº”ç”¨
&lt;/h2>&lt;p>&lt;code>fsnotify&lt;/code>çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œåœ¨ godoc ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å“ªäº›åº“å¯¼å…¥äº†&lt;code>fsnotify&lt;/code>ã€‚åªéœ€è¿›å…¥&lt;a class="link" href="https://pkg.go.dev/github.com/fsnotify/fsnotify" target="_blank" rel="noopener"
>fsnotify godoc&lt;/a>ç‚¹å‡»&lt;a class="link" href="https://pkg.go.dev/github.com/fsnotify/fsnotify?tab=importedby" target="_blank" rel="noopener"
>Imported by 9,171&lt;/a>ï¼Œå°±èƒ½æŸ¥çœ‹ã€‚æœ‰å…´è¶£çš„å¯ä»¥æ‰“å¼€çœ‹çœ‹ã€‚&lt;/p>
&lt;p>åœ¨&lt;a class="link" href="https://blog.trojan123.top/p/go%e9%85%8d%e7%bd%ae%e7%ae%a1%e7%90%86%e4%b9%8b%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93viper/" target="_blank" rel="noopener"
>ã€ŠGoé…ç½®ç®¡ç†ä¹‹ç¬¬ä¸‰æ–¹åº“viperã€‹&lt;/a>æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†è°ƒç”¨&lt;code>viper.WatchConfig&lt;/code>å°±å¯ä»¥ç›‘å¬é…ç½®ä¿®æ”¹ï¼Œè‡ªåŠ¨é‡æ–°åŠ è½½ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹&lt;code>WatchConfig&lt;/code>æ˜¯æ€ä¹ˆå®ç°çš„ï¼š&lt;/p>
&lt;p>é¦–å…ˆæ¼”ç¤ºviperè‡ªåŠ¨æ›´æ–°é…ç½®&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// mian.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/fsnotify/fsnotify&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./cfg.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ReadInConfig error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OnConfigChange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">in&lt;/span> &lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %s usernameï¼š%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ä¿®æ”¹å‰çš„usernameï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WatchConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// ä¿®æ”¹æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ä¿®æ”¹åçš„usernameï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># ./cfg.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arlettebrook&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œä¹‹åï¼Œæ‰‹åŠ¨ä¿®æ”¹&lt;code>cfg.yaml&lt;/code>usernameï¼ˆæ³¨æ„ä¸è¦åœ¨IDEä¸­ä¿®æ”¹ï¼Œä¼šå½±å“è¾“å‡ºæ•ˆæœï¼‰,åœ¨åé¢åˆ†åˆ«è¿½åŠ 1/2/3,å¹¶åˆ«ä¿å­˜ï¼Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä¿®æ”¹å‰çš„usernameï¼š arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/05/08 18:01:32 cfg.yaml WRITE usernameï¼šarlettebrook1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/05/08 18:01:36 cfg.yaml WRITE usernameï¼šarlettebrook12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/05/08 18:01:39 cfg.yaml WRITE usernameï¼šarlettebrook123
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä¿®æ”¹åçš„usernameï¼š arlettebrook123
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…·ä½“å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// viper/viper.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// WatchConfig starts watching a config file for changes.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">WatchConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WatchConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// WatchConfig starts watching a config file for changes.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Viper&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">WatchConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">initWG&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WaitGroup&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">initWG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">watcher&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewWatcher&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;failed to create watcher: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">watcher&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// we have to watch the entire directory to pick up renames/atomic saves in a cross-platform way
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">getConfigFile&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;get config file: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">initWG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">configFile&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">filepath&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Clean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">configDir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">filepath&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">configFile&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">realConfigFile&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">filepath&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EvalSymlinks&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eventsWG&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WaitGroup&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eventsWG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">select&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ok&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="nx">watcher&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Events&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">ok&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// &amp;#39;Events&amp;#39; channel is closed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">eventsWG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">currentConfigFile&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">filepath&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EvalSymlinks&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// we only care about the config file with the following cases:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// 1 - if the config file was modified or created
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// 2 - if the real path to the config file changed (eg: k8s ConfigMap replacement)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">filepath&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Clean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">configFile&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Write&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Create&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">||&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nx">currentConfigFile&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">currentConfigFile&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nx">realConfigFile&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">realConfigFile&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">currentConfigFile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;read config file: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onConfigChange&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">onConfigChange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">filepath&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Clean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">configFile&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Remove&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eventsWG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ok&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="nx">watcher&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Errors&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">ok&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// &amp;#39;Errors&amp;#39; channel is not closed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;watcher error: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eventsWG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">watcher&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">configDir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">initWG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// done initializing the watch in this go routine, so the parent routine can move on...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">eventsWG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Wait&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// now, wait for event loop to end in this go-routine...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">initWG&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Wait&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// make sure that the go routine above fully ended before returning
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶å®æµç¨‹æ˜¯ç›¸ä¼¼çš„ï¼š&lt;/p>
&lt;ul>
&lt;li>é¦–å…ˆï¼Œè°ƒç”¨&lt;code>NewWatcher&lt;/code>åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨ï¼›&lt;/li>
&lt;li>è°ƒç”¨&lt;code>v.getConfigFile()&lt;/code>è·å–é…ç½®æ–‡ä»¶è·¯å¾„ï¼ŒæŠ½å‡ºæ–‡ä»¶åã€ç›®å½•ï¼Œé…ç½®æ–‡ä»¶å¦‚æœæ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œè·å¾—é“¾æ¥æŒ‡å‘çš„è·¯å¾„ï¼›&lt;/li>
&lt;li>è°ƒç”¨&lt;code>watcher.Add(configDir)&lt;/code>ç›‘å¬é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå¦èµ·ä¸€ä¸ª goroutine å¤„ç†äº‹ä»¶ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;code>WatchConfig&lt;/code>ä¸èƒ½é˜»å¡ä¸» goroutineï¼Œæ‰€ä»¥åˆ›å»ºç›‘å¬å™¨ä¹Ÿæ˜¯æ–°èµ· goroutine è¿›è¡Œçš„ã€‚ä»£ç ä¸­æœ‰ä¸¤ä¸ª&lt;code>sync.WaitGroup&lt;/code>å˜é‡ï¼Œ&lt;code>initWG&lt;/code>æ˜¯ä¸ºäº†ä¿è¯ç›‘å¬å™¨åˆå§‹åŒ–ï¼Œ &lt;code>eventsWG&lt;/code>æ˜¯åœ¨äº‹ä»¶é€šé“å…³é—­ï¼Œæˆ–é…ç½®è¢«åˆ é™¤äº†ï¼Œæˆ–é‡åˆ°é”™è¯¯æ—¶é€€å‡ºäº‹ä»¶å¤„ç†å¾ªç¯ã€‚&lt;/p>
&lt;p>ç„¶åå°±æ˜¯æ ¸å¿ƒäº‹ä»¶å¾ªç¯ï¼š&lt;/p>
&lt;ul>
&lt;li>æœ‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œåˆ¤æ–­å˜åŒ–çš„æ–‡ä»¶æ˜¯å¦æ˜¯åœ¨ viper ä¸­è®¾ç½®çš„é…ç½®æ–‡ä»¶ï¼Œå‘ç”Ÿçš„æ˜¯å¦æ˜¯åˆ›å»ºæˆ–ä¿®æ”¹äº‹ä»¶ï¼ˆåªå¤„ç†è¿™ä¸¤ä¸ªäº‹ä»¶ï¼‰ï¼›&lt;/li>
&lt;li>å¦‚æœé…ç½®æ–‡ä»¶ä¸ºç¬¦å·é“¾æ¥ï¼Œè‹¥ç¬¦åˆé“¾æ¥çš„æŒ‡å‘ä¿®æ”¹äº†ï¼Œä¹Ÿéœ€è¦é‡æ–°åŠ è½½é…ç½®ï¼›&lt;/li>
&lt;li>å¦‚æœéœ€è¦é‡æ–°åŠ è½½é…ç½®ï¼Œè°ƒç”¨&lt;code>v.ReadInConfig()&lt;/code>è¯»å–æ–°çš„é…ç½®ï¼›&lt;/li>
&lt;li>å¦‚æœæ³¨å†Œäº†äº‹ä»¶å›è°ƒï¼Œä»¥å‘ç”Ÿçš„äº‹ä»¶ä¸ºå‚æ•°æ‰§è¡Œå›è°ƒã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>&lt;code>fsnotify&lt;/code>çš„æ¥å£éå¸¸ç®€å•ç›´æ¥ï¼Œæ‰€æœ‰ç³»ç»Ÿç›¸å…³çš„å¤æ‚æ€§éƒ½è¢«å°è£…èµ·æ¥äº†ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å¹³æ—¶è®¾è®¡æ¨¡å—å’Œæ¥å£æ—¶å¯ä»¥å‚è€ƒçš„æ¡ˆä¾‹ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://docs.google.com/document/d/1-GQrFdDVrA57-ce0kbzSth4lQqfOMMRKpih3hPJmvoU/edit" target="_blank" rel="noopener"
>fsnotify API è®¾è®¡&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/fsnotify/fsnotify" target="_blank" rel="noopener"
>fsnotify GitHub ä»“åº“&lt;/a>&lt;/li>
&lt;li>åŸæ–‡ï¼š&lt;a class="link" href="https://darjun.github.io/2020/01/19/godailylib/fsnotify/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ fsnotify&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Open Source License Introduction</title><link>https://arlettebrook.github.io/p/open-source-license-introduction/</link><pubDate>Mon, 06 May 2024 23:22:29 +0800</pubDate><guid>https://arlettebrook.github.io/p/open-source-license-introduction/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>å¼€æºåè®®(å¼€æºè®¸å¯è¯)æ˜¯æ¯ä¸€ä¸ªæƒ³è¦åšå¼€æºè½¯ä»¶çš„å¼€å‘è€…éƒ½éœ€è¦äº†è§£çš„ï¼Œå³ä½¿ä½ ä¸æƒ³åšå¼€æºè½¯ä»¶ï¼Œé‚£ä¹ˆå½“ä½ ä½¿ç”¨ä»–äººå¼€æºçš„è½¯ä»¶æ—¶ä¹Ÿéœ€è¦äº†è§£ä¸€äº›å¼€æºåè®®ç›¸å…³çš„å†…å®¹ï¼Œè¿™æ ·èƒ½å¤Ÿå°½é‡é¿å…ä¸€äº›ä¸å¿…è¦çš„éº»çƒ¦ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="ä»€ä¹ˆæ˜¯å¼€æº">
&lt;a href="#%e4%bb%80%e4%b9%88%e6%98%af%e5%bc%80%e6%ba%90" class="header-anchor">#&lt;/a>
ä»€ä¹ˆæ˜¯å¼€æº
&lt;/h2>&lt;p>å¼€æºå³å¼€æ”¾æºä»£ç ï¼Œæ˜¯ &lt;a class="link" href="https://opensource.org/" target="_blank" rel="noopener"
>OSI (Open Source Initiative)&lt;/a> è¿™ä¸ªç»„ç»‡æå‡ºæ¥çš„ã€‚è€Œè¢«å¼€æºçš„è½¯ä»¶ï¼Œæˆ‘ä»¬é€šå¸¸ç§°ä¸ºå¼€æºè½¯ä»¶ã€‚ä½ å¯èƒ½è¿˜è§åˆ°è¿‡ &lt;code>Free Software&lt;/code> ä¸€è¯ï¼Œå®ƒä»£è¡¨ &lt;code>è‡ªç”±è½¯ä»¶&lt;/code> è€Œé &lt;code>å…è´¹è½¯ä»¶&lt;/code>ï¼Œæ˜¯å¼€æºè½¯ä»¶çš„å‰èº«ã€‚&lt;/p>
&lt;p>å¼€æºè½¯ä»¶ = å¼€æ”¾æºä»£ç  + å¼€æºåè®®ï¼Œä¸€ä»½æ²¡æœ‰æ·»åŠ å¼€æºåè®®çš„å¼€æºä»£ç ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„å¼€æºè½¯ä»¶ï¼Œä¹Ÿå°±ä¸èƒ½éšæ„ä½¿ç”¨ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šå¦‚æœä½ åœ¨ GitHub ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ²¡æœ‰å¼€æºåè®®çš„å…¬å…±ä»£ç ä»“åº“ï¼Œå…¶ä»–ç”¨æˆ·ä»ç„¶æœ‰æƒæŸ¥çœ‹å¹¶ä¸ºå…¶åˆ›å»ºåˆ†æ”¯ï¼Œè¿™æ˜¯ç”± GitHub çš„&lt;a class="link" href="https://docs.github.com/zh/site-policy/github-terms/github-terms-of-service#4-license-grant-to-us" target="_blank" rel="noopener"
>æœåŠ¡æ¡æ¬¾&lt;/a>å†³å®šçš„ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="å¼€æºè®¸å¯è¯">
&lt;a href="#%e5%bc%80%e6%ba%90%e8%ae%b8%e5%8f%af%e8%af%81" class="header-anchor">#&lt;/a>
å¼€æºè®¸å¯è¯
&lt;/h2>&lt;p>å¼€æºåè®®æ˜¯æŒ‡å¼€æºè½¯ä»¶æ‰€æºå¸¦çš„ä¸€ä»½å£°æ˜åè®®ï¼Œè¿™ä»½åè®®ä¹Ÿå«å¼€æºè®¸å¯è¯ã€‚å¼€æºè®¸å¯è¯å£°æ˜äº†å¼€æºåè®®çš„å†…å®¹ï¼Œè§„å®šäº†&lt;strong>åŸä½œè€…å’Œä½¿ç”¨è€…çš„æƒåˆ©ä»¥åŠä¹‰åŠ¡&lt;/strong>ã€‚&lt;/p>
&lt;p>&lt;strong>å¼€æºè®¸å¯è¯æ˜¯å¼€æºè½¯ä»¶ç”Ÿæ€ç³»ç»Ÿçš„åŸºç¡€ï¼Œå¯ä»¥ä¿ƒè¿›è½¯ä»¶çš„ååŒå¼€å‘&lt;/strong>ã€‚&lt;/p>
&lt;p>å¼€æºè®¸å¯è¯æ˜¯å…·æœ‰æ³•å¾‹æ•ˆåŠ›çš„ï¼Œå¹¶ä¸”éœ€è¦å¾—åˆ° OSI è¿™ä¸ªç»„ç»‡çš„è®¤è¯ï¼Œç›®å‰ OSI å…±è®¡è®¤è¯äº† &lt;a class="link" href="https://opensource.org/licenses/category" target="_blank" rel="noopener"
>110+&lt;/a> ä¸ªå¼€æºè®¸å¯è¯ï¼Œè¿™äº›è¢«è®¤è¯çš„å¼€æºè®¸å¯è¯éƒ½å¿…é¡»éµå¾ª &lt;a class="link" href="https://opensource.org/osd" target="_blank" rel="noopener"
>OSD (Open Source Definition)&lt;/a> è§„åˆ™ã€‚&lt;/p>
&lt;p>è™½ç„¶å¼€æºè®¸å¯è¯éå¸¸å¤šï¼Œä½†å¸¸ç”¨çš„å°±é‚£ä¹ˆå‡ ç§ã€‚å¸¸è§çš„å¼€æºè®¸å¯è¯ä¸»è¦æœ‰ Apacheã€MITã€BSDã€GPLã€LGPLã€MPLã€SSPL ç­‰ã€‚&lt;/p>
&lt;p>å¼€æºè®¸å¯è¯åˆ†æˆä¸¤å¤§ç±»ï¼šå®½æ¾å‹è®¸å¯è¯ï¼ˆPermissive Licensesï¼‰ã€è‘—ä½œæƒå‹è®¸å¯è¯ï¼ˆåç‰ˆæƒè®¸å¯è¯ï¼‰ï¼ˆCopyleft Licensesï¼‰ã€‚&lt;/p>
&lt;p>â€‹ å®½æ¾å‹è®¸å¯è¯ï¼ˆPermissive Licensesï¼‰æ˜¯ä¸€ç§å¯¹è½¯ä»¶çš„ä½¿ç”¨ã€ä¿®æ”¹ã€ä¼ æ’­ç­‰æ–¹å¼é‡‡ç”¨æœ€ä½é™åˆ¶çš„è‡ªç”±è½¯ä»¶è®¸å¯åè®®æ¡æ¬¾ç±»å‹ã€‚è¿™ç§ç±»å‹çš„è½¯ä»¶è®¸å¯åè®®å°†ä¸ä¿è¯åŸä½œå“çš„æ´¾ç”Ÿä½œå“ä¼šç»§ç»­ä¿æŒä¸åŸä½œå“å®Œå…¨ç›¸åŒçš„ç›¸å…³é™åˆ¶æ¡ä»¶ï¼Œä»è€Œä¸ºåŸä½œå“çš„è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œä¼ æ’­ç­‰æä¾›æ›´å¤§çš„ç©ºé—´ã€‚&lt;/p>
&lt;p>â€‹ è‘—ä½œæƒå‹è®¸å¯è¯ï¼ˆCopyleft Licensesï¼‰æ˜¯ç»åŸä½œè€…è®¸å¯åœ¨æœ‰é™ç©ºé—´å†…çš„è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œä¼ æ’­ï¼Œä¸”ä¸å¾—è¿èƒŒåŸä½œå“çš„é™åˆ¶æ¡æ¬¾ã€‚å¦‚æœä¸€æ¬¾è½¯ä»¶ä½¿ç”¨ Copyleft ç±»å‹è®¸å¯åè®®è§„å®šè½¯ä»¶ä¸å¾—ç”¨äº&lt;strong>å•†ä¸šç”¨é€”&lt;/strong>ï¼Œä¸”ä¸å¾—&lt;strong>é—­æº&lt;/strong>ï¼Œé‚£ä¹ˆåç»­çš„è¡ç”Ÿå­è½¯ä»¶ä¹Ÿå¿…é¡»å¾—éµå¾ªè¯¥æ¡æ¬¾ã€‚&lt;/p>
&lt;p>&lt;strong>ä¸¤è€…æœ€å¤§çš„å·®åˆ«åœ¨äº&lt;/strong>ï¼šåœ¨è½¯ä»¶è¢«ä¿®æ”¹å¹¶å†å‘è¡Œæ—¶ï¼Œ Copyleft License ä»ç„¶å¼ºåˆ¶è¦æ±‚å…¬å¼€æºä»£ç ï¼ˆè¡ç”Ÿè½¯ä»¶éœ€è¦å¼€æºï¼‰ï¼Œè€Œ Permissive licence ä¸è¦æ±‚å…¬å¼€æºä»£ç ï¼ˆè¡ç”Ÿè½¯ä»¶å¯ä»¥å˜ä¸ºä¸“æœ‰è½¯ä»¶ï¼‰ã€‚&lt;/p>
&lt;p>å…¶ä¸­ï¼ŒApacheã€MITã€BSD éƒ½æ˜¯å®½æ¾å‹è®¸å¯è¯ï¼ŒGPL æ˜¯å…¸å‹çš„è‘—ä½œæƒå‹ï¼ˆcopyleft ï¼‰è®¸å¯è¯ï¼ŒLGPLã€MPL æ˜¯å¼±è‘—ä½œæƒå‹ï¼ˆcopyleft ï¼‰è®¸å¯è¯ã€‚SSPL åˆ™æ˜¯è¿‘å¹´æ¥ MongoDB åˆ›å»ºçš„ä¸€ä¸ªæ–°è®¸å¯è¯ï¼Œå­˜åœ¨è¾ƒå¤§äº‰è®®ï¼Œå¼€æ”¾æºä»£ç ä¿ƒè¿›ä¼š OSI ç”šè‡³è®¤ä¸º SSPL å°±ä¸æ˜¯å¼€æºè®¸å¯åè®®ã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç±»æ˜¯ Creative Commonsï¼ˆCCï¼‰çŸ¥è¯†å…±äº«åè®®ã€‚ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´è¯¥åè®®å¹¶ä¸èƒ½è¯´æ˜¯çœŸæ­£çš„å¼€æºåè®®ï¼Œå®ƒä»¬å¤§å¤šæ˜¯è¢«ä½¿ç”¨äºè®¾è®¡ç±»çš„å·¥ç¨‹ä¸Šã€‚CC åè®®ç§ç±»ç¹å¤šï¼Œæ¯ä¸€ç§éƒ½æˆæƒç‰¹å®šçš„æƒåˆ©ã€‚å¤§å¤šæ•°çš„æ¯”è¾ƒä¸¥æ ¼çš„ CC åè®®ä¼šå£°æ˜ â€œç½²åæƒï¼Œéå•†ä¸šç”¨é€”ï¼Œç¦æ­¢è¡ç”Ÿâ€ æ¡æ¬¾ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥è‡ªç”±çš„åˆ†äº«è¿™ä¸ªä½œå“ï¼Œä½†ä½ ä¸èƒ½æ”¹å˜å®ƒå’Œå¯¹å…¶æ”¶è´¹ï¼Œè€Œä¸”å¿…é¡»å£°æ˜ä½œå“çš„å½’å±ã€‚è¿™ä¸ªè®¸å¯åè®®éå¸¸çš„æœ‰ç”¨ï¼Œå®ƒå¯ä»¥è®©ä½ çš„ä½œå“ä¼ æ’­å‡ºå»ï¼Œä½†åˆå¯ä»¥å¯¹ä½œå“çš„ä½¿ç”¨ä¿ç•™éƒ¨åˆ†æˆ–å®Œå…¨çš„æ§åˆ¶ã€‚æœ€å°‘é™åˆ¶çš„ CC åè®®ç±»å‹å½“å± â€œç½²åâ€ åè®®ï¼Œè¿™æ„å‘³ç€åªè¦äººä»¬èƒ½ç»´æŠ¤ä½ çš„åèª‰ï¼Œä»–ä»¬å¯¹ä½ çš„ä½œå“æ€ä¹ˆä½¿ç”¨éƒ½è¡Œã€‚&lt;/p>
&lt;p>ä¸‹é¢å°±ä¸»è¦ä»‹ç»ä¸‹å‡ ç§å¸¸è§å¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;h3 id="å®½æ¾å‹è®¸å¯è¯permissive-licenses">
&lt;a href="#%e5%ae%bd%e6%9d%be%e5%9e%8b%e8%ae%b8%e5%8f%af%e8%af%81permissive-licenses" class="header-anchor">#&lt;/a>
å®½æ¾å‹è®¸å¯è¯ï¼ˆPermissive Licensesï¼‰
&lt;/h3>&lt;p>é¡¾åæ€ä¹‰ï¼Œè¿™ç±»å¼€æºè®¸å¯è¯æ¯”è¾ƒå®½æ¾ï¼Œé™åˆ¶æ›´å°‘ã€‚å¸¸è§å®½æ¾å¼€æºè®¸å¯è¯æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://opensource.org/licenses/BSD-2-Clause" target="_blank" rel="noopener"
>BSD (2-Clause)&lt;/a> (Berkeley Software Distributionï¼Œä¼¯å…‹åˆ©è½¯ä»¶å‘è¡Œç‰ˆ)&lt;/p>
&lt;p>æºä»£ç æˆ–äºŒè¿›åˆ¶å½¢å¼çš„é‡æ–°åˆ†å‘ï¼Œå¿…é¡»ä¿ç•™åŸå§‹çš„è®¸å¯è¯å£°æ˜ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://opensource.org/licenses/BSD-3-Clause" target="_blank" rel="noopener"
>BSD (3-Clause)&lt;/a>&lt;/p>
&lt;p>åœ¨ BSD(2-Clause) åŸºç¡€ä¸Šå¢åŠ äº†ä¸€æ¡ï¼Œç¦æ­¢ä½¿ç”¨åŸå§‹ä½œè€…çš„åå­—ä¸ºè¡ç”Ÿè½¯ä»¶è¿›è¡Œä¿ƒé”€ã€‚&lt;/p>
&lt;p>Go è¯­è¨€å°±åœ¨ä½¿ç”¨ BSD (3-Clause) å¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener"
>MIT&lt;/a> (Massachusetts Institute of Technologyï¼Œéº»çœç†å·¥å­¦é™¢è®¸å¯è¯)&lt;/p>
&lt;p>å…è´¹æˆäºˆä»»ä½•äººè¯¥è½¯ä»¶åŠç›¸å…³æ–‡æ¡£çš„æƒé™ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹ã€åˆå¹¶ã€å‘è¡¨ã€åˆ†å‘ã€å†æˆæƒã€å‡ºå”®è½¯ä»¶çš„å‰¯æœ¬ã€‚åˆ†å‘è½¯ä»¶æ—¶ï¼Œå¿…é¡»ä¿ç•™åŸå§‹çš„è®¸å¯è¯å£°æ˜ã€‚&lt;/p>
&lt;p>MIT æ˜¯æœ€ä¸ºå®½æ¾çš„å¼€æºè®¸å¯è¯ï¼Œæ‰€ä»¥è¿™ä¹Ÿä½¿å¾—å®ƒæˆä¸ºæœ€æµè¡Œçš„å¼€æºè®¸å¯è¯ï¼Œå¦‚ç›®å‰åœ¨å‰ç«¯é¢†åŸŸéå¸¸æœ‰åçš„ Vue.js å°±åœ¨ä½¿ç”¨å®ƒã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://opensource.org/licenses/Apache-2.0" target="_blank" rel="noopener"
>Apache-2.0&lt;/a> (Apache è½¯ä»¶åŸºé‡‘ä¼šå‘å¸ƒçš„è®¸å¯è¯)&lt;/p>
&lt;p>Apache è®¸å¯è¯å†…å®¹éå¸¸å¤šï¼Œä¸è¿‡å¯ä»¥ç®€å•çš„æ€»ç»“å‡ ç‚¹ï¼š&lt;/p>
&lt;p>åˆ†å‘è½¯ä»¶æ—¶ï¼Œå¿…é¡»ä¿ç•™åŸå§‹çš„è®¸å¯è¯å£°æ˜ã€‚&lt;/p>
&lt;p>æ‰€æœ‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œå¿…é¡»åŠ ä»¥è¯´æ˜å‘ŠçŸ¥ç”¨æˆ·æ­¤æ–‡ä»¶å·²è¢«æ›´æ”¹ã€‚&lt;/p>
&lt;p>æ²¡æœ‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œä¸å¾—ä¿®æ”¹è®¸å¯è¯ã€‚&lt;/p>
&lt;p>äº‘åŸç”Ÿé¢†åŸŸè‘—åè½¯ä»¶ Kubernetes ä½¿ç”¨çš„æ­£æ˜¯ Apache-2.0 å¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="è‘—ä½œæƒå‹è®¸å¯è¯copyleft-licenses">
&lt;a href="#%e8%91%97%e4%bd%9c%e6%9d%83%e5%9e%8b%e8%ae%b8%e5%8f%af%e8%af%81copyleft-licenses" class="header-anchor">#&lt;/a>
è‘—ä½œæƒå‹è®¸å¯è¯ï¼ˆCopyleft Licensesï¼‰
&lt;/h3>&lt;p>Copyleft ä¸€è¯ç”± ç†æŸ¥å¾·Â·æ–¯æ‰˜æ›¼ å‘æ˜ï¼Œè¡¨ç¤º Copyright (ç‰ˆæƒ) çš„åä¹‰è¯ã€‚Copyleft è¡¨ç¤ºä¸ç»è®¸å¯ï¼Œç”¨æˆ·æ— æƒå¤åˆ¶ï¼Œå•†ä¸šè½¯ä»¶å¼€å‘äººå‘˜é€šè¿‡ Copyleftå‰¥å¤ºäº†ç”¨æˆ·çš„è‡ªç”±ã€‚Copyright åˆ™è¡¨ç¤ºä¸ç»è®¸å¯ï¼Œç”¨æˆ·æœ‰æƒå¤åˆ¶ï¼ŒCopyrightä½¿ç”¨ç‰ˆæƒæ¥ç»™äºˆç”¨æˆ·è‡ªç”±ã€‚&lt;/p>
&lt;p>å› æ­¤Copyleft ç±»çš„è®¸å¯è¯è¦æ¯” Permissive è®¸å¯è¯é™åˆ¶æ›´å¤šã€‚æ³¨æ„ï¼šä¸ä¸€å®šè¦ç»è¿‡åŸä½œè€…è®¸å¯ã€‚å¸¸è§ Copyleft å¼€æºè®¸å¯è¯æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://opensource.org/licenses/gpl-license" target="_blank" rel="noopener"
>GPL&lt;/a> (GNU General Public License)&lt;/p>
&lt;p>GPL æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒGPL-2.0 å’Œ GPL-3ï¼ŒåŒ BSD ä¸€æ ·ï¼Œæ›´é«˜ç‰ˆæœ¬ä¼šå¸¦æ¥æ›´å¤šçš„é™åˆ¶ã€‚GPL åè®®å†…å®¹ä¹Ÿéå¸¸å¤šï¼Œæˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„ä¸€ç‚¹æ˜¯ï¼šä½¿ç”¨äº† GPL åè®®çš„å¼€æºè½¯ä»¶ï¼Œå…¶è¡ç”Ÿè½¯ä»¶å¦‚æœéœ€è¦åˆ†å‘ï¼Œå°±å¿…é¡»å¼€æºå¹¶ä¸”åŒæ ·è¦ä½¿ç”¨æ­¤åè®®ã€‚&lt;/p>
&lt;p>ç”±äºè¿™æ¡è§„å®šçš„å­˜åœ¨ï¼Œæœ‰äººç”šè‡³æŠŠ GPL åè®®ç§°ä¸º â€œGPL ç—…æ¯’â€ï¼Œå› ä¸ºå®ƒå…·æœ‰è·Ÿç—…æ¯’ä¸€æ ·çš„ä¼ æŸ“æ€§ã€‚ä¸è¿‡ GPL ä»ç„¶æ˜¯éå¸¸æµè¡Œçš„å¼€æºè®¸å¯è¯ï¼Œæ¯”å¦‚å¤§åé¼é¼çš„ Linux å°±é‡‡ç”¨äº† GPL åè®®ã€‚&lt;/p>
&lt;p>GPL æ˜¯æµè¡Œå¼€æºè®¸å¯è¯ä¸­æœ€ä¸ºä¸¥æ ¼çš„ï¼Œæ‰€ä»¥å¯¹äºä½¿ç”¨å¼€æºè½¯ä»¶æ‰€è¡åŒ–çš„å•†ä¸šåŒ–è½¯ä»¶å°±ä¸å¤Ÿå‹å¥½äº†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://opensource.org/licenses/lgpl-license" target="_blank" rel="noopener"
>LGPL&lt;/a> (GNU Library General Public License)&lt;/p>
&lt;p>ç®—æ˜¯ GPL çš„ä¸€ä¸ªå˜ç§ï¼Œä¸»è¦ä¸ºç±»åº“ä½¿ç”¨è€Œè®¾è®¡çš„å¼€æºåè®®ã€‚&lt;/p>
&lt;p>å•†ç”¨è½¯ä»¶å¦‚æœé‡‡ç”¨ç±»åº“æ–¹å¼å¼•ç”¨ä½¿ç”¨äº† LGPL åè®®çš„å¼€æºè½¯ä»¶ï¼Œåˆ™å¯ä»¥ä¸ç”¨å¼€æºã€‚&lt;/p>
&lt;p>å¦‚æœæ˜¯ä¿®æ”¹æˆ–è¡ç”Ÿè½¯ä»¶éœ€è¦åˆ†å‘ï¼Œåˆ™å¿…é¡»å¼€æºå¹¶ä¸”åŒæ ·è¦ä½¿ç”¨æ­¤åè®®ã€‚è¿™ç‚¹ä¸ GPL åè®®ä¸€æ ·ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.gnu.org/licenses/agpl-3.0.en.html" target="_blank" rel="noopener"
>AGPL&lt;/a> (GNU Affero General Public License)&lt;/p>
&lt;p>é™¤äº† AGPL è®¸å¯è¯ï¼Œä¸Šé¢ä»‹ç»çš„å…¶ä»–è®¸å¯è¯çš„é™åˆ¶æ¡ä»¶éƒ½æ˜¯åªæœ‰åœ¨åˆ†å‘æ—¶æ‰éœ€è¦éµå®ˆã€‚è€Œ SaaS è½¯ä»¶ä½œä¸ºä¸€é¡¹äº‘æœåŠ¡åˆ™ä¸æ„æˆåˆ†å‘ï¼Œæ‰€ä»¥å¯ä»¥ä¸éµå®ˆè¿™äº›è®¸å¯è¯æ¡æ¬¾ã€‚&lt;/p>
&lt;p>ä¸ºäº†è§£å†³è¿™äº›æ—©æœŸå‘å¸ƒçš„è®¸å¯è¯å¯¹ SaaS è½¯ä»¶æ— æ•ˆçš„å°´å°¬ï¼ŒGNU åˆå‘å¸ƒäº† AGPL è®¸å¯è¯ï¼Œå®ƒè§„å®šå¦‚æœ SaaS ç”¨åˆ°çš„ä»£ç æ˜¯è¯¥è®¸å¯è¯ï¼Œé‚£ä¹ˆå…¶äº‘æœåŠ¡çš„ä»£ç ä¹Ÿå¿…é¡»å¼€æºã€‚&lt;/p>
&lt;p>å›½äº§å¼€æºæ—¶åºæ•°æ®åº“ TDengine ä¸ºäº†é˜»æ­¢äº‘å‚å•†å…è´¹ä½¿ç”¨å…¶å¼€æºç‰ˆæœ¬ï¼Œå°±é‡‡ç”¨äº† AGPL åè®®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://opensource.org/licenses/MPL-2.0" target="_blank" rel="noopener"
>MPL-2.0&lt;/a> (Mozilla Public License 2.0ï¼ŒMozilla åŸºé‡‘ä¼šå‘å¸ƒçš„è®¸å¯è¯)&lt;/p>
&lt;p>MPL èåˆäº† BSD å¼€æºè®¸å¯è¯ å’Œ GPL å¼€æºè®¸å¯è¯ çš„ç‰¹æ€§ï¼ŒåŠ›äº‰åœ¨ä¸“æœ‰è½¯ä»¶å’Œå¼€æºè½¯ä»¶å¼€å‘è€…ä¹‹é—´å¯»æ±‚å¹³è¡¡ã€‚æ˜¯æ¯” BSD æ›´ä¸¥æ ¼ï¼Œæ¯” GPL æ›´å®½æ¾çš„å¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;p>MPL å…è®¸æ–°å¢çš„ç‹¬ç«‹ä»£ç æ–‡ä»¶é—­æºï¼Œä½†åœ¨ MPL æˆæƒä¸‹çš„ä»£ç æ–‡ä»¶å¿…é¡»ä¿æŒ MPL æˆæƒä¸”å¼€æºã€‚è¿™ä½¿å¾— MPL æ—¢ä¸åƒ MIT å’Œ BSD é‚£æ ·å…è®¸æ´¾ç”Ÿä½œå“å®Œå…¨è½¬åŒ–ä¸ºé—­æºï¼Œä¹Ÿä¸åƒ GPL é‚£æ ·è¦æ±‚æ‰€æœ‰çš„æ´¾ç”Ÿä½œå“ï¼ŒåŒ…æ‹¬æ–°çš„ç»„ä»¶åœ¨å†…ï¼Œå¿…é¡»å…¨éƒ¨ä¿æŒä½¿ç”¨ GPLã€‚&lt;/p>
&lt;p>Mozilla è‡ªå®¶çš„ Firefox æµè§ˆå™¨å°±ä½¿ç”¨æ­¤å¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ä»¥ä¸Šä»‹ç»çš„å¼€æºè®¸å¯è¯éƒ½æ˜¯è¾ƒä¸ºå¸¸è§çš„è®¸å¯è¯ï¼Œå¦å¤–è¿˜æœ‰ä¸¤ä¸ªä¸å¤ªå¸¸è§ä½†å´å€¼å¾—ä¸€æçš„è®¸å¯è¯ã€‚&lt;/p>
&lt;p>ä¸€ä¸ªæ˜¯ &lt;a class="link" href="https://opensource.org/license/unlicense/" target="_blank" rel="noopener"
>Unlicense&lt;/a> è®¸å¯è¯ï¼Œç¿»è¯‘è¿‡æ¥å«ã€Œé›¶çº¦æŸè®¸å¯è¯ã€ï¼Œå¯ä»¥è¯´æ˜¯è¢« OSI è®¤è¯çš„æœ€å¼€æ”¾çš„è®¸å¯è¯äº†ã€‚æ ¹æ®åå­—ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼ŒUnlicense æ˜¯ä¸€ä¸ªä¸åŒ…å«ä»»ä½•çº¦æŸæ¡ä»¶çš„è®¸å¯è¯ï¼Œä¸“ç”¨äºè´¡çŒ®ä½œå“åˆ°å…¬å…±é¢†åŸŸã€‚ä»»ä½•äººéƒ½å¯ä»¥å¯¹å¼€æºè½¯ä»¶è¿›è¡Œè‡ªç”±å¤åˆ¶ã€ä¿®æ”¹ã€å‘å¸ƒã€ä½¿ç”¨ã€ç¼–è¯‘ã€å‡ºå”®ç­‰ï¼Œå¹¶ä¸”å¯ç”¨äºä»»ä½•å•†ä¸šæˆ–éå•†ä¸šç›®çš„ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œåœ¨ OSI å®˜ç½‘å…¬å¸ƒçš„å¼€æºè®¸å¯è¯åˆ—è¡¨ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªå«ã€Œ&lt;a class="link" href="https://opensource.org/licenses/MulanPSL-2.0" target="_blank" rel="noopener"
>æœ¨å…°ï¼ˆMulan PSL2ï¼‰&lt;/a>ã€çš„å¼€æºè®¸å¯è¯ï¼Œå®ƒæ˜¯ä¸­å›½æœ¬åœŸå”¯ä¸€è·å¾— OSI è®¤å¯çš„å¼€æºè®¸å¯è¯ã€‚Mulan PSL2 ä»¥ä¸­è‹±æ–‡åŒè¯­è¡¨è¿°ï¼Œä¸­è‹±æ–‡ç‰ˆæœ¬å…·æœ‰åŒç­‰æ³•å¾‹æ•ˆåŠ›ã€‚å¦‚æœä¸­è‹±æ–‡ç‰ˆæœ¬å­˜åœ¨ä»»ä½•å†²çªä¸ä¸€è‡´ï¼Œä»¥ä¸­æ–‡ç‰ˆä¸ºå‡†ã€‚&lt;/p>
&lt;p>ã€Œæœ¨å…°ã€å¹¶ä¸æ˜¯ä¸€ä¸ªè®¸å¯è¯ï¼Œè€Œæ˜¯ä¸€ç³»åˆ—è®¸å¯è¯ï¼Œå®ƒåŒ…å«æœ¨å…°å®½æ¾è®¸å¯è¯ã€æœ¨å…°å…¬å…±è®¸å¯è¯ã€æœ¨å…°å¼€æ”¾ä½œå“è®¸å¯åè®®ã€‚å…¶ä¸­æœ¨å…°å®½æ¾è®¸å¯è¯ç¬¬ 2 ç‰ˆï¼ˆMulan PSL2ï¼‰åœ¨ 2020 å¹´ 2 æœˆ 14 æ—¥é€šè¿‡ OSI æ‰¹å‡†ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³ä½¿ç”¨ä¸€ä¸ªä¸­æ–‡çš„å¼€æºè®¸å¯è¯ï¼Œé‚£ä¹ˆ Mulan PSL2 ç›®å‰æ˜¯ä½ å”¯ä¸€çš„é€‰æ‹©ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="ä½¿ç”¨å¼€æºè®¸å¯è¯">
&lt;a href="#%e4%bd%bf%e7%94%a8%e5%bc%80%e6%ba%90%e8%ae%b8%e5%8f%af%e8%af%81" class="header-anchor">#&lt;/a>
ä½¿ç”¨å¼€æºè®¸å¯è¯
&lt;/h2>&lt;p>ä»¥ MIT ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸‹å¦‚ä½•åœ¨è‡ªå·±çš„å¼€æºé¡¹ç›®ä¸­ä½¿ç”¨å¼€æºè®¸å¯è¯ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨è‡ªå·±çš„å¼€æºé¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå« &lt;code>LICENSE&lt;/code> çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ³¨æ„æ–‡ä»¶åä¸åŒ…å«ä»»ä½•åç¼€ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç„¶åå»åˆ° OSI å®˜ç½‘æ‰¾åˆ° &lt;a class="link" href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener"
>MIT&lt;/a> å¼€æºè®¸å¯è¯æ¨¡æ¿ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Copyright &amp;lt;YEAR&amp;gt; &amp;lt;COPYRIGHT HOLDER&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files &lt;span class="o">(&lt;/span>the â€œSoftwareâ€&lt;span class="o">)&lt;/span>, to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to &lt;span class="k">do&lt;/span> so, subject to the following conditions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">THE SOFTWARE IS PROVIDED â€œAS ISâ€, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å°†å¼€æºè®¸å¯è¯æ¨¡æ¿å†…å®¹å¤åˆ¶åˆ° &lt;code>LICENSE&lt;/code> æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œå¹¶å°†ç¬¬ä¸€è¡Œ &lt;code>Copyright&lt;/code> åé¢çš„ &lt;code>&amp;lt;YEAR&amp;gt;&lt;/code> æ›¿æ¢ä¸ºå½“å‰å¹´ä»½ï¼Œå°† &lt;code>&amp;lt;COPYRIGHT HOLDER&amp;gt;&lt;/code> æ›¿æ¢ä¸ºè‡ªå·±çš„åå­—ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“å¼€æ”¾é¡¹ç›®æºä»£ç æ—¶ï¼Œå°†æ­¤æ–‡ä»¶ä¸€åŒå¼€æ”¾å‡ºå»å³å¯ã€‚å¦‚æœä½ ä½¿ç”¨ GitHub å¼€æ”¾æºç ï¼Œåˆ™åªéœ€è¦å°†æ­¤ &lt;code>LICENSE&lt;/code> åŠ å…¥åˆ° git ç®¡ç†å³å¯ã€‚&lt;/p>
&lt;ol>
&lt;li>å¦‚æœä½ æ˜¯åœ¨ GitHub ä¸Šæ–°å»ºå¼€æºé¡¹ç›®ï¼Œåœ¨åˆ›å»ºé¡¹ç›®ç•Œé¢ï¼Œæœ‰ä¸€ä¸ª &lt;code>Choose a license&lt;/code> æŒ‰é’®å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€‰æ‹©ä¸€æ¬¾å¼€æºåè®®ï¼Œå¹¶ä¸” GitHub ä¼šè‡ªåŠ¨æ›¿æ¢è®¸å¯è¯æ¨¡æ¿ä¸­çš„å¹´ä»½ã€ä½œè€…ç­‰ä¿¡æ¯ã€‚&lt;/li>
&lt;li>å¦å¤–ï¼Œæˆ‘ä»¬åœ¨å¼€æ”¾æºä»£ç æ—¶ï¼Œå…¶å®å¯ä»¥ä¸ä½¿ç”¨ OSI è®¤è¯çš„å¼€æºè®¸å¯è¯ï¼Œè€Œæ˜¯é€‰æ‹©è‡ªå·±å†™ä¸€ä»½è®¸å¯è¯ï¼Œç”¨æ¥å£°æ˜ç‰ˆæƒã€‚è¿™åŒæ ·æ˜¯å…·æœ‰æ³•å¾‹æ•ˆåŠ›çš„ï¼Œä¸è¿‡è¿™ä»½è®¸å¯è¯å°±ä¸èƒ½å«åšå¼€æºè®¸å¯è¯äº†ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="å¦‚ä½•é€‰æ‹©å¼€æºè®¸å¯è¯">
&lt;a href="#%e5%a6%82%e4%bd%95%e9%80%89%e6%8b%a9%e5%bc%80%e6%ba%90%e8%ae%b8%e5%8f%af%e8%af%81" class="header-anchor">#&lt;/a>
å¦‚ä½•é€‰æ‹©å¼€æºè®¸å¯è¯
&lt;/h2>&lt;p>ä¹Œå…‹å…°ç¨‹åºå‘˜ Paul Bagwell ç”»äº†&lt;a class="link" href="https://web.archive.org/web/20110503183702/http://pbagwl.com/post/5078147450/description-of-popular-software-licenses" target="_blank" rel="noopener"
>ä¸€å¼ å›¾&lt;/a>åœ¨ç½‘ä¸Šå¾ˆæ˜¯æµè¡Œï¼Œé˜®ä¸€å³°è€å¸ˆå°†å…¶ç¿»è¯‘æˆäº†&lt;a class="link" href="https://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html" target="_blank" rel="noopener"
>ä¸­æ–‡&lt;/a>ï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/free_software_licenses.png"
width="1600"
height="1000"
srcset="https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/free_software_licenses_hu62a26bd1b1b1f60a529ae1edd7e8dcc3_117471_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/free_software_licenses_hu62a26bd1b1b1f60a529ae1edd7e8dcc3_117471_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="How to choose a license?"
class="gallery-image"
data-flex-grow="160"
data-flex-basis="384px"
>&lt;/p>
&lt;blockquote>
&lt;p>æ³¨ï¼š&lt;/p>
&lt;ol>
&lt;li>å…³äºä»€ä¹ˆæ˜¯è®¸å¯è¯å…¼å®¹æ€§å¯ä»¥å‚è€ƒï¼š&lt;a class="link" href="https://arlettebrook.github.io/docs/%e5%bc%80%e6%ba%90%e8%ae%b8%e5%8f%af%e8%af%81%e5%85%bc%e5%ae%b9%e6%80%a7%e6%8c%87%e5%8d%97.docx" >ã€Šå¼€æºè®¸å¯è¯å…¼å®¹æ€§æŒ‡å—.docxã€‹&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¤§ä½“ä¸Šå·¦è¾¹çš„è®¸å¯è¯æ¯”è¾ƒä¸¥æ ¼ï¼Œå³è¾¹çš„è®¸å¯è¯è¾ƒä¸ºå®½æ¾ã€‚æ­¤å›¾è™½ç„¶ä¸å¤Ÿä¸¥è°¨ï¼Œèƒœåœ¨æ–¹ä¾¿ç†è§£ã€‚åœ¨å¼€æºè‡ªå·±çš„é¡¹ç›®æ—¶ï¼Œå¯ä»¥æ ¹æ®æ­¤å›¾å¿«é€Ÿé€‰æ‹©å‡ºé€‚åˆè‡ªå·±çš„å¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;p>æ›´å¤š&lt;a class="link" href="https://www.runoob.com/wp-content/uploads/2018/03/61590003177751b9d5bd.jpg" target="_blank" rel="noopener"
>å‚è€ƒ&lt;/a>å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/image-20240507181208566.png"
width="1670"
height="732"
srcset="https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/image-20240507181208566_hud15a19a3cadf380d55c54b52e5e9de59_702194_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/image-20240507181208566_hud15a19a3cadf380d55c54b52e5e9de59_702194_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="How to choose a license?"
class="gallery-image"
data-flex-grow="228"
data-flex-basis="547px"
>&lt;/p>
&lt;hr>
&lt;h2 id="çŸ¥è¯†å…±äº«è®¸å¯è¯creative-commonscc">
&lt;a href="#%e7%9f%a5%e8%af%86%e5%85%b1%e4%ba%ab%e8%ae%b8%e5%8f%af%e8%af%81creative-commonscc" class="header-anchor">#&lt;/a>
çŸ¥è¯†å…±äº«è®¸å¯è¯Creative Commonsï¼ˆCCï¼‰
&lt;/h2>&lt;p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦å¼€æºçš„å¹¶ä¸æ˜¯ä¸€æ¬¾è½¯ä»¶ï¼Œè€Œæ˜¯ä¸€å¥—å¼€æºçš„æ•™ç¨‹æˆ–è€…ä¹¦ç±ç­‰ï¼Œæ­¤æ—¶ä¸¥æ ¼æ¥è®²å¹¶ä¸èƒ½ä½¿ç”¨ä¸Šé¢æ‰€ä»‹ç»çš„å¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;p>åœ¨ &lt;a class="link" href="https://opensource.org/osd" target="_blank" rel="noopener"
>OSD ç¬¬ 2 æ¡&lt;/a>ä¸­æœ‰è§„å®šï¼šå¼€æºè½¯ä»¶æ˜¯å¿…é¡»è¦åŒ…å«æºä»£ç çš„ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/source-code.png"
width="2220"
height="346"
srcset="https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/source-code_hua833ceec382ec66138cd84613b0a4c66_105215_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/source-code_hua833ceec382ec66138cd84613b0a4c66_105215_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="source-code.png"
class="gallery-image"
data-flex-grow="641"
data-flex-basis="1539px"
>&lt;/p>
&lt;p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•™ç¨‹æˆ–è€…ä¹¦ç±ç­‰æ²¡æœ‰æºä»£ç ï¼Œå¹¶ä¸èƒ½ä½œä¸ºå¼€æºè½¯ä»¶ï¼Œä¹Ÿå°±ä¸èƒ½ä½¿ç”¨å¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;p>æ­¤ç±»é¡¹ç›®æƒ³è¦å¼€æºï¼Œåº”è¯¥ä½¿ç”¨ã€ŒçŸ¥è¯†å…±äº«è®¸å¯è¯ã€ï¼ˆcreative commons licensesï¼‰ï¼Œé€šå¸¸ä¹Ÿå« CC è®¸å¯è¯ã€‚&lt;/p>
&lt;p>CC è®¸å¯è¯ç”± &lt;a class="link" href="https://creativecommons.org/" target="_blank" rel="noopener"
>Creative Commons åŸºé‡‘ä¼š&lt;/a>æå‡ºï¼Œè™½ç„¶æ²¡æœ‰å¾—åˆ° OSI çš„è®¤å¯ï¼Œä½†ä»–ä»å…·æœ‰æ³•å¾‹æ•ˆåŠ›ï¼Œå¹¶ä¸”åº”ç”¨å¹¿æ³›ã€‚&lt;/p>
&lt;p>ä¸Šé¢æåˆ°çš„ã€Œæœ¨å…°å¼€æ”¾ä½œå“è®¸å¯åè®®ã€å°±æ˜¯å¯¹æ ‡çŸ¥è¯†å…±äº«è®¸å¯è¯çš„ã€‚åŒæœ¨å…°è®¸å¯è¯ç±»ä¼¼ï¼ŒçŸ¥è¯†å…±äº«è®¸å¯è¯ä¹Ÿæ˜¯ä¸€ç³»åˆ—è®¸å¯è¯ï¼Œç›®å‰æœ€æ–°çš„çŸ¥è¯†å…±äº«è®¸å¯è¯ä¸º 4.0 ç‰ˆæœ¬ï¼Œå¸¸è§çš„è®¸å¯è¯æœ‰ 6 ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>CC BY 4.0 (Attribution 4.0 Internationalï¼Œç½²å 4.0 å›½é™…)&lt;/li>
&lt;li>CC BY-SA 4.0 (Attribution-ShareAlike 4.0 Internationalï¼Œç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…)&lt;/li>
&lt;li>CC BY-ND 4.0 (Attribution-NoDerivatives 4.0 Internationalï¼Œç½²å-ç¦æ­¢æ¼”ç» 4.0 å›½é™…)&lt;/li>
&lt;li>CC BY-NC 4.0 (Attribution-NonCommercial 4.0 Internationalï¼Œç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…)&lt;/li>
&lt;li>CC BY-NC-SA 4.0 (Attribution-NonCommercial-ShareAlike 4.0 Internationalï¼Œç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…)&lt;/li>
&lt;li>CC BY-NC-ND 4.0 (Attribution-NonCommercial-NoDerivatives 4.0 Internationalï¼Œç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…)&lt;/li>
&lt;/ul>
&lt;p>å¯ä»¥å‘ç°ï¼ŒCC è®¸å¯è¯å‘½åæ–¹å¼å°±æ˜¯å®ƒçš„æƒåˆ©ç®€æ‹¼ç»„åˆã€‚ä»¥ä¸‹æ˜¯å¯¹å…¶ä¸­å‡ºç°çš„å‡ ä¸ªåè¯çš„è§£é‡Šï¼š&lt;/p>
&lt;p>â€‹ ç½²åï¼šå¿…é¡»ç»™å‡ºåŸä½œè€…çš„ç½²åï¼Œæä¾›æŒ‡å‘æœ¬è®¸å¯åè®®çš„é“¾æ¥ï¼ŒåŒæ—¶æ ‡æ˜æ˜¯å¦å¯¹åŸå§‹ä½œå“ä½œäº†ä¿®æ”¹ã€‚&lt;/p>
&lt;p>â€‹ éå•†ä¸šæ€§ä½¿ç”¨ï¼šæ‚¨ä¸å¾—å°†æœ¬ä½œå“ç”¨äºå•†ä¸šç›®çš„ã€‚ä¸å¾—ç”¨äºç›ˆåˆ©æ€§ç›®çš„ã€‚&lt;/p>
&lt;p>â€‹ ç›¸åŒæ–¹å¼å…±äº«ï¼šåœ¨ä»»ä½•åª’ä»‹ä»¥ä»»ä½•å½¢å¼å¤åˆ¶ã€å‘è¡Œæœ¬ä½œå“æ—¶å¿…é¡»é‡‡ç”¨ç›¸åŒçš„è®¸å¯è¯ã€‚&lt;/p>
&lt;p>â€‹ ç¦æ­¢æ¼”ç»ï¼šç¦æ­¢ä¿®æ”¹ã€è½¬æ¢æˆ–ä»¥æœ¬ä½œå“ä¸ºåŸºç¡€è¿›è¡Œåˆ›ä½œã€‚&lt;/p>
&lt;p>ä¹‹æ‰€ä»¥æ¯ä¸ªè®¸å¯è¯åé¢éƒ½å¸¦æœ‰å›½é™…ä¸¤ä¸ªå­—ï¼Œæ˜¯å› ä¸ºè¿™ç³»åˆ—è®¸å¯è¯å‘å¸ƒäº†ä¸åŒçš„åœ°åŸŸç‰ˆï¼Œä¸è¿‡å›½é™…ç‰ˆæ›´ä¸ºé€šç”¨ã€‚&lt;/p>
&lt;p>éœ€è¦æ³¨æ„ CC ç³»åˆ—è®¸å¯è¯ä¸€æ—¦å‘å¸ƒï¼Œå°±ä¸å¯æ”¶å›ï¼Œåªè¦ä½ éµå®ˆè®¸å¯åè®®æ¡æ¬¾ï¼Œè®¸å¯äººå°±æ— æ³•æ”¶å›ä½ çš„è¿™äº›æƒåˆ©ã€‚&lt;/p>
&lt;p>å¦‚éœ€ä½¿ç”¨ CC è®¸å¯è¯ï¼Œå¯ä»¥å‚è€ƒç¤ºä¾‹ã€‚&lt;/p>
&lt;p>â€‹ æœ¬æ•™ç¨‹é‡‡ç”¨&lt;a class="link" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="noopener"
>çŸ¥è¯†å…±äº« ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0å›½é™…åè®®&lt;/a>ã€‚&lt;/p>
&lt;p>â€‹ åšå®¢å†…å®¹éµå¾ª &lt;a class="link" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener"
>çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®&lt;/a>&lt;/p>
&lt;p>æˆ–å‚è€ƒ&lt;a class="link" href="https://creativecommons.org/licenses/" target="_blank" rel="noopener"
>å®˜ç½‘&lt;/a>è‡ªè¡Œç»„åˆã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼š&lt;strong>åè®®é“¾æ¥å¹¶ä¸å¿…é¡»æŒ‡å®š&lt;/strong>ï¼Œä½†åœ¨ä½¿ç”¨çŸ¥è¯†å…±äº«åè®®æ—¶ï¼Œæä¾›åè®®é“¾æ¥æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸®åŠ©å…¶ä»–äººæ–¹ä¾¿åœ°è®¿é—®å¹¶äº†è§£ä½ æ‰€ä½¿ç”¨çš„å…·ä½“åè®®å†…å®¹ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/image-20240507193827642.png"
width="820"
height="138"
srcset="https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/image-20240507193827642_hu9ccdd84b4ee4ed681b3d8e138c5b0446_19113_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/open-source-license-introduction/open-source-license-introduction.assets/image-20240507193827642_hu9ccdd84b4ee4ed681b3d8e138c5b0446_19113_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ccåè®®ç¤ºä¾‹"
class="gallery-image"
data-flex-grow="594"
data-flex-basis="1426px"
>&lt;/p>
&lt;hr>
&lt;h2 id="å¼€æºæ¡ˆä¾‹">
&lt;a href="#%e5%bc%80%e6%ba%90%e6%a1%88%e4%be%8b" class="header-anchor">#&lt;/a>
å¼€æºæ¡ˆä¾‹
&lt;/h2>&lt;p>ä»‹ç»å®Œäº†å¼€æºåè®®ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªå¼€æºæ¡ˆä¾‹ï¼š&lt;/p>
&lt;h3 id="ä¸­å›½é¦–ä¾‹å› è¿å-gpl-åè®®è‡´ä¾µå®³è®¡ç®—æœºè½¯ä»¶è‘—ä½œæƒçº çº·">
&lt;a href="#%e4%b8%ad%e5%9b%bd%e9%a6%96%e4%be%8b%e5%9b%a0%e8%bf%9d%e5%8f%8d-gpl-%e5%8d%8f%e8%ae%ae%e8%87%b4%e4%be%b5%e5%ae%b3%e8%ae%a1%e7%ae%97%e6%9c%ba%e8%bd%af%e4%bb%b6%e8%91%97%e4%bd%9c%e6%9d%83%e7%ba%a0%e7%ba%b7" class="header-anchor">#&lt;/a>
ä¸­å›½é¦–ä¾‹å› è¿å GPL åè®®è‡´ä¾µå®³è®¡ç®—æœºè½¯ä»¶è‘—ä½œæƒçº çº·
&lt;/h3>&lt;p>2021-06-30 åœ¨ä¸­å›½è£åˆ¤æ–‡ä¹¦ç½‘ä¸Šå…¬å¸ƒäº†ä¸€åˆ™æ°‘äº‹åˆ¤å†³ä¹¦ï¼Œæ ‡é¢˜ä¸ºï¼šã€Œæµå®å¸‚ç½—ç›’ç½‘ç»œç§‘æŠ€æœ‰é™å…¬å¸è¯‰è¢«å‘Šç¦å»ºé£çµåˆ›æ™¯ç§‘æŠ€æœ‰é™å…¬å¸(ä»¥ä¸‹ç®€ç§°ç¦å»ºé£çµå…¬å¸)ã€è¢«å‘ŠåŒ—äº¬é£çµåˆ›æ™¯ç§‘æŠ€æœ‰é™å…¬å¸(ä»¥ä¸‹ç®€ç§°åŒ—äº¬é£çµå…¬å¸)ã€è¢«å‘Šæ·±åœ³å¸‚è…¾è®¯è®¡ç®—æœºç³»ç»Ÿæœ‰é™å…¬å¸(ä»¥ä¸‹ç®€ç§°è…¾è®¯å…¬å¸)ä¾µå®³è®¡ç®—æœºè½¯ä»¶è‘—ä½œæƒçº çº·ä¸€å®¡æ°‘äº‹åˆ¤å†³ä¹¦ã€ã€‚æ¡ˆä»¶æ¦‚å†µå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>åŸå‘Šæµå®å¸‚ç½—ç›’ç½‘ç»œç§‘æŠ€æœ‰é™å…¬å¸ç‹¬ç«‹å¼€ã€Œç½—ç›’ï¼ˆVirtualAppï¼‰ã€ä» 2016 å¹´ 7 æœˆ 8 æ—¥çš„ç‰ˆæœ¬å¼€å§‹å¼•å…¥å¼€æºåè®®ï¼Œèµ·åˆä¸º LGPL3.0 åè®®ï¼Œä» 2016 å¹´ 8 æœˆ 12 æ—¥å¼€å§‹æ›´æ¢ä¸º GPL3.0 åè®®ã€‚2017 å¹´ 10 æœˆ 29 æ—¥å¼€å§‹åˆ é™¤é€‚ç”¨ GPL3.0 åè®®çš„è¡¨è¿°ï¼Œä½†è‹±æ–‡ä»‹ç»ä¸­ä»ä¿ç•™&lt;code>openplatform&lt;/code> çš„è¡¨è¿°ã€‚&lt;/p>
&lt;p>2018 å¹´ 9 æœˆï¼ŒåŸå‘Šè°ƒæŸ¥å‘ç°åä¸ºã€Œç‚¹å¿ƒæ¡Œé¢ã€çš„è½¯ä»¶ä½¿ç”¨äº† VirtualApp çš„ä»£ç ï¼Œå°†ä¸¤ä¸ªè½¯ä»¶æºä»£ç è¿›è¡Œåˆ†ææ¯”å¯¹ï¼Œä¸¤è€…é—´ 421 ä¸ªå¯æ¯”ä»£ç ä¸­æœ‰ 308 ä¸ªä»£ç å…·æœ‰å®è´¨ç›¸ä¼¼æ€§ï¼Œæœ‰ 27 ä¸ªä»£ç å…·æœ‰é«˜åº¦ç›¸ä¼¼æ€§ï¼Œæœ‰ 78 ä¸ªä»£ç å…·æœ‰ä¸€èˆ¬ç›¸ä¼¼æ€§ã€‚å› æ­¤ï¼Œè¢«è¯‰ä¾µæƒè½¯ä»¶ä¸æ¶‰æ¡ˆè½¯ä»¶æ„æˆå®è´¨ç›¸ä¼¼ã€‚&lt;/p>
&lt;p>ç»æŸ¥ï¼Œè¢«è¯‰ã€Œç‚¹å¿ƒæ¡Œé¢ã€ä¸­ä½¿ç”¨äº†åŸå‘Šé‡‡ç”¨ GPL3.0 åè®®å‘å¸ƒçš„ VirtualAppï¼Œè¢«å‘Šå¯¹æ­¤äº¦äºˆä»¥ç¡®è®¤ã€‚&lt;/p>
&lt;p>åŸå‘Šç”³è¯·èµ”å¿ 2000 ä¸‡ï¼Œæœ€ç»ˆï¼Œæ³•é™¢é…Œæƒ…ç¡®å®šèµ”å¿æ•°é¢ä¸º 50 ä¸‡å…ƒã€‚åŸå‘Šä¸ºåˆ¶æ­¢æœ¬æ¡ˆä¾µæƒè¡Œä¸ºæ‰€æ”¯å‡ºçš„åˆç†è´¹ç”¨ï¼Œè®¡ç®—åœ¨èµ”å¿æŸå¤±æ•°é¢èŒƒå›´ä¹‹å†…ã€‚&lt;/p>
&lt;p>æ›´å¤šç»†èŠ‚å¯ä»¥&lt;a class="link" href="https://arlettebrook.github.io/docs/%e5%ae%81%e5%b8%82%e7%bd%97%e7%9b%92%e7%bd%91%e7%bb%9c%e7%a7%91%e6%8a%80%e6%9c%89%e9%99%90%e5%85%ac%e5%8f%b8%e8%af%89%e8%a2%ab%e5%91%8a%e7%a6%8f%e5%bb%ba%e9%a3%8e%e7%81%b5%e5%88%9b%e6%99%af%e7%a7%91%e6%8a%80%e6%9c%89%e9%99%90%e5%85%ac%e5%8f%b8%e4%bb%a5%e4%b8%8b%e7%ae%80%e7%a7%b0%e7%a6%8f%e5%bb%ba%e9%a3%8e%e7%81%b5%e5%85%ac%e5%8f%b8%e8%a2%ab%e5%91%8a%e5%8c%97%e4%ba%ac%e9%a3%8e%e7%81%b5%e5%88%9b%e6%99%af%e7%a7%91%e6%8a%80%e6%9c%89%e9%99%90....docx" >ç‚¹å‡»ä¸‹è½½&lt;/a>æŸ¥çœ‹ã€‚&lt;/p>
&lt;p>è¯¥æ¡ˆä¾‹ç»™å¼€æºè½¯ä»¶ä½¿ç”¨è€…æ•²å“ä¸€è®°è­¦é’Ÿï¼Œä½¿ç”¨å¼€æºè½¯ä»¶ä¸€å®šè¦æŸ¥çœ‹å¹¶éµå¾ªå¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡å¸¦å¤§å®¶ä¸€èµ·è®¤è¯†äº†ä»€ä¹ˆæ˜¯å¼€æºåè®®ï¼Œå¹¶ä¸”è¿˜å¯¹å¸¸ç”¨å¼€æºåè®®è¿›è¡Œäº†åˆ†æï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å¼€æºåè®®ã€‚åŒæ—¶è®²è§£äº†é’ˆå¯¹ä¹¦ç±ç­‰å¼€æºä½œå“ä½¿ç”¨çš„çŸ¥è¯†å…±äº«è®¸å¯åè®®å’Œä½¿ç”¨æ–¹å¼ã€‚æœ€ç»ˆåˆ†äº«äº†ä¸€ä¸ªå¼€æºè½¯ä»¶çº çº·æ¡ˆä¾‹ï¼Œä»¥è¯´æ˜äº†è§£å¼€æºåè®®çš„é‡è¦æ€§ã€‚&lt;/p>
&lt;p>æ­¤æ–‡ä»…ä¸ºä½œè€…æœ¬äººå­¦ä¹ å¹¶æ•´ç†çš„å¼€æºåè®®ç›¸å…³çŸ¥è¯†ï¼Œå³ä¸å¤Ÿå…¨é¢ï¼Œä¹Ÿä¸å¤Ÿä¸¥è°¨ï¼Œä¸èƒ½ä½œä¸ºæ³•å¾‹ä¾æ®ã€‚å¸Œæœ›ä½ èƒ½é€šè¿‡æœ¬ç¯‡æ–‡ç« è®¤è¯†å¹¶é‡è§†å¼€æºåè®®ï¼Œå­¦ä¹ å’Œä¹¦å†™æœ¬ç¯‡æ–‡ç« æ—¶é—´æœ‰é™ï¼Œéš¾å…å‡ºç°è¡¨è¾¾ä¸å¤Ÿå‡†ç¡®æˆ–é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ã€‚&lt;/p>
&lt;p>æœ€åï¼Œæƒ³æé†’å¤§å®¶ï¼Œèº«ä¸ºä¸€åå¼€å‘è€…ï¼ŒæŒæ¡å¼€æºåè®®æ˜¯æœ‰å¿…è¦çš„ã€‚ä¸è¿‡å¼€æºåè®®çš„å†…å®¹éå¸¸å¤šä¸”ä¸“ä¸šï¼Œæƒ³è¦å®Œå…¨äº†è§£ä¹Ÿæ˜¯ä¸€é¡¹ç¹é‡çš„å·¥ä½œï¼Œæ¯•ç«Ÿè¿™ä¸æ˜¯æˆ‘ä»¬çš„ä¸“ä¸šé¢†åŸŸï¼Œå¦‚æœé‡åˆ°æ— æ³•ç¡®å®šçš„é—®é¢˜ï¼Œå¯ä»¥å¯»æ±‚èº«è¾¹çš„ä¸“ä¸šæ³•åŠ¡å¸®å¿™ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://www.runoob.com/w3cnote/open-source-license.html" target="_blank" rel="noopener"
>å„ç§å¼€æºåè®®ä»‹ç»&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://cn.pingcap.com/blog/introduction-of-open-source-license/" target="_blank" rel="noopener"
>ä¸€æ–‡çœ‹æ‡‚å¼€æºè®¸å¯è¯ä¸¨å¼€æºçŸ¥è¯†ç§‘æ™®&lt;/a>&lt;/li>
&lt;li>åŸæ–‡ï¼š&lt;a class="link" href="https://jianghushinian.cn/2023/01/15/open-source-license-introduction/" target="_blank" rel="noopener"
>å¼€æºåè®®ç®€ä»‹&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html" target="_blank" rel="noopener"
>å¦‚ä½•é€‰æ‹©å¼€æºè®¸å¯è¯ï¼Ÿ&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Goé…ç½®ç®¡ç†ä¹‹ç¬¬ä¸‰æ–¹åº“viper</title><link>https://arlettebrook.github.io/p/go%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93viper/</link><pubDate>Fri, 03 May 2024 18:24:28 +0800</pubDate><guid>https://arlettebrook.github.io/p/go%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93viper/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>Viper æ˜¯ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„ Go åº”ç”¨ç¨‹åºé…ç½®åº“ï¼Œæ”¯æŒå¾ˆå¤šåœºæ™¯ã€‚å®ƒå¯ä»¥å¤„ç†å„ç§ç±»å‹çš„é…ç½®éœ€æ±‚å’Œæ ¼å¼ï¼ŒåŒ…æ‹¬è®¾ç½®é»˜è®¤å€¼ã€ä»å¤šç§é…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡ä¸­è¯»å–é…ç½®ä¿¡æ¯ã€å®æ—¶ç›‘è§†é…ç½®æ–‡ä»¶ç­‰ã€‚æ— è®ºæ˜¯å°å‹åº”ç”¨è¿˜æ˜¯å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿï¼ŒViper éƒ½å¯ä»¥æä¾›çµæ´»è€Œå¯é çš„é…ç½®ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ Viper çš„å„ç§ç”¨æ³•å’Œä½¿ç”¨åœºæ™¯ï¼Œä»¥å¸®åŠ©è¯»è€…æ›´å¥½åœ°äº†è§£å’Œä½¿ç”¨ Viper æ¥ç®¡ç†åº”ç”¨ç¨‹åºé…ç½®ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-viper">
&lt;a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9-viper" class="header-anchor">#&lt;/a>
ä¸ºä»€ä¹ˆé€‰æ‹© Viper
&lt;/h2>&lt;p>å½“æˆ‘ä»¬åœ¨åšæŠ€æœ¯é€‰å‹æ—¶ï¼Œè‚¯å®šè¦çŸ¥é“ä¸ºä»€ä¹ˆé€‰æ‹©æŸä¸€é¡¹æŠ€æœ¯ï¼Œè€Œä¹‹æ‰€ä»¥é€‰æ‹©ä½¿ç”¨ Viper æ¥ç®¡ç†åº”ç”¨ç¨‹åºçš„é…ç½®ï¼ŒViper å®˜æ–¹ç»™å‡ºäº†å¦‚ä¸‹ç­”æ¡ˆï¼š&lt;/p>
&lt;p>å½“æ„å»ºåº”ç”¨ç¨‹åºæ—¶ï¼Œä½ ä¸æƒ³æ‹…å¿ƒé…ç½®æ–‡ä»¶æ ¼å¼ï¼Œåªæƒ³ä¸“æ³¨äºæ„å»ºå‡ºè‰²çš„è½¯ä»¶ã€‚Viper å°±æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜è€Œå­˜åœ¨çš„ã€‚&lt;/p>
&lt;p>Viper å¯ä»¥å®Œæˆä»¥ä¸‹å·¥ä½œï¼š&lt;/p>
&lt;ol>
&lt;li>æŸ¥æ‰¾ã€åŠ è½½å’Œååºåˆ—åŒ– JSONã€TOMLã€YAMLã€HCLã€INIã€envfile æˆ– Java Properties ç­‰å¤šç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚&lt;/li>
&lt;li>ä¸ºä¸åŒçš„é…ç½®é€‰é¡¹è®¾ç½®é»˜è®¤å€¼ã€‚&lt;/li>
&lt;li>ä¸ºé€šè¿‡å‘½ä»¤è¡Œæ ‡å¿—æŒ‡å®šçš„é€‰é¡¹è®¾ç½®è¦†ç›–å€¼ã€‚&lt;/li>
&lt;li>æä¾›åˆ«åç³»ç»Ÿï¼Œä»¥ä¾¿è½»æ¾é‡å‘½åé…ç½®é¡¹è€Œä¸ç ´åç°æœ‰ä»£ç ã€‚&lt;/li>
&lt;li>å¯ä»¥è½»æ¾åŒºåˆ†ç”¨æˆ·æä¾›çš„å‘½ä»¤è¡Œå‚æ•°æˆ–é…ç½®æ–‡ä»¶ä¸­çš„å€¼æ˜¯å¦ä¸é»˜è®¤å€¼ç›¸åŒã€‚&lt;/li>
&lt;li>å¯ä»¥è®¾ç½®ç›‘å¬é…ç½®æ–‡ä»¶çš„ä¿®æ”¹ï¼Œä¿®æ”¹æ—¶è‡ªåŠ¨åŠ è½½æ–°çš„é…ç½®ï¼›&lt;/li>
&lt;li>ä»ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œé€‰é¡¹å’Œ&lt;code>io.Reader&lt;/code>ä¸­è¯»å–é…ç½®ï¼›&lt;/li>
&lt;li>ä»è¿œç¨‹é…ç½®ç³»ç»Ÿä¸­è¯»å–å’Œç›‘å¬ä¿®æ”¹ï¼Œå¦‚ etcd/Consulï¼›&lt;/li>
&lt;li>ä»£ç é€»è¾‘ä¸­æ˜¾ç¤ºè®¾ç½®é”®å€¼ã€‚&lt;/li>
&lt;li>&amp;hellip;&amp;hellip;&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>æ³¨ï¼šå…³äºä¸Šé¢ç¬¬ 5 ç‚¹ï¼Œæˆ‘ä¸ªäººç†è§£çš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>å…ˆä»å‘½ä»¤è¡Œå‚æ•°æˆ–é…ç½®æ–‡ä»¶ä¸­è¯»å–é…ç½®ã€‚&lt;/li>
&lt;li>å¯ä»¥ä½¿ç”¨ &lt;code>viper.IsSet(key)&lt;/code> æ–¹æ³•åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è®¾ç½®äº† &lt;code>key&lt;/code> æ‰€å¯¹åº”çš„ &lt;code>value&lt;/code>ï¼Œå¦‚æœè®¾ç½®äº†ï¼Œå¯ä»¥é€šè¿‡ &lt;code>viper.Get(key)&lt;/code> è·å–å€¼ã€‚&lt;/li>
&lt;li>è°ƒç”¨ &lt;code>viper.SetDefault(key, default_value)&lt;/code> æ¥è®¾ç½®é»˜è®¤å€¼ï¼ˆé»˜è®¤å€¼ä¸ä¼šè¦†ç›–ä¸Šä¸€æ­¥æ‰€è·å–åˆ°çš„å€¼ï¼‰ã€‚
åœ¨ç¬¬ 2 æ­¥ä¸­å¯ä»¥æ‹¿åˆ°ç”¨æˆ·è®¾ç½®çš„å€¼ &lt;code>value&lt;/code>ï¼Œåœ¨ç¬¬ 3 æ­¥ä¸­å¯ä»¥çŸ¥é“é»˜è®¤å€¼ &lt;code>default_value&lt;/code>ï¼Œè¿™æ ·å…¶å®å°±å¯ä»¥åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç›¸åŒäº†ã€‚&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;p>Viper é‡‡ç”¨ä»¥ä¸‹ä¼˜å…ˆçº§é¡ºåºæ¥åŠ è½½é…ç½®ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½æ’åºå¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>æ˜¾å¼è°ƒç”¨ &lt;code>viper.Set&lt;/code> è®¾ç½®çš„é…ç½®å€¼&lt;/li>
&lt;li>å‘½ä»¤è¡Œå‚æ•°&lt;/li>
&lt;li>ç¯å¢ƒå˜é‡&lt;/li>
&lt;li>é…ç½®æ–‡ä»¶&lt;/li>
&lt;li>key/value å­˜å‚¨&lt;/li>
&lt;li>é»˜è®¤å€¼&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æ³¨æ„ âš ï¸ï¼šViper é…ç½®ä¸­çš„é”®ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¦‚ &lt;code>user/User/USER&lt;/code> è¢«è§†ä¸ºæ˜¯ç›¸ç­‰çš„ &lt;code>key&lt;/code>ï¼Œå…³äºæ˜¯å¦å°†å…¶è®¾ä¸ºå¯é€‰ï¼Œç›®å‰è¿˜åœ¨è®¨è®ºä¸­ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>Viper åŒ…ä¸­æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªåŠŸèƒ½æ˜¯ï¼šå¦‚ä½•æŠŠé…ç½®å€¼è¯»å…¥ Viper å’Œä» Viper ä¸­è¯»å–é…ç½®å€¼ï¼Œæ¥ä¸‹æ¥æˆ‘å°†åˆ†åˆ«ä»‹ç»è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">go get -u github.com/spf13/viper
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¼å…¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;toml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddConfigPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6381&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;read config failed: %v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;log_level&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql ip: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql port: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql user: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.user&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql password: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.password&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql database: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.database&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis ip: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis port: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œçš„é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯tomlã€‚toml çš„è¯­æ³•å¾ˆç®€å•ï¼Œå¿«é€Ÿå…¥é—¨è¯·çœ‹&lt;a class="link" href="https://toml.io/cn/v1.0.0" target="_blank" rel="noopener"
>TOML:ç®€ä½“ä¸­æ–‡&lt;/a>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># config.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app_name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;awesome web&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># possible values: DEBUG, INFO, WARNING, ERROR, FATAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">log_level&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;DEBUG&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">mysql&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ip&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;127.0.0.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">user&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;dj&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">password&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">123456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">database&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;awesome&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">redis&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ip&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;127.0.0.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">7381&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>viper çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œå®ƒéœ€è¦å¾ˆå°‘çš„è®¾ç½®ã€‚è®¾ç½®æ–‡ä»¶åï¼ˆ&lt;code>SetConfigName&lt;/code>ï¼‰ã€é…ç½®ç±»å‹ï¼ˆ&lt;code>SetConfigType&lt;/code>ï¼‰å’Œæœç´¢è·¯å¾„ï¼ˆ&lt;code>AddConfigPath&lt;/code>ï¼‰ï¼Œç„¶åè°ƒç”¨&lt;code>ReadInConfig&lt;/code>ã€‚ viperä¼šè‡ªåŠ¨æ ¹æ®ç±»å‹æ¥è¯»å–é…ç½®ã€‚ä½¿ç”¨æ—¶è°ƒç”¨&lt;code>viper.Get&lt;/code>æ–¹æ³•è·å–é”®å€¼ã€‚&lt;/p>
&lt;p>ç¼–è¯‘ã€è¿è¡Œç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql ip: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql port: &lt;span class="m">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql user: dj
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql password: &lt;span class="m">123456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql database: awesome
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis ip: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis port: &lt;span class="m">7381&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š&lt;/p>
&lt;ul>
&lt;li>è®¾ç½®æ–‡ä»¶åæ—¶ä¸è¦å¸¦åç¼€ï¼›&lt;/li>
&lt;li>æœç´¢è·¯å¾„å¯ä»¥è®¾ç½®å¤šä¸ªï¼Œviper ä¼šæ ¹æ®è®¾ç½®é¡ºåºä¾æ¬¡æŸ¥æ‰¾ï¼›&lt;/li>
&lt;li>viper è·å–å€¼æ—¶ä½¿ç”¨&lt;code>section.key&lt;/code>çš„å½¢å¼ï¼Œå³ä¼ å…¥åµŒå¥—çš„é”®åï¼›&lt;/li>
&lt;li>é»˜è®¤å€¼å¯ä»¥è°ƒç”¨&lt;code>viper.SetDefault&lt;/code>è®¾ç½®ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="è¯»å–é”®">
&lt;a href="#%e8%af%bb%e5%8f%96%e9%94%ae" class="header-anchor">#&lt;/a>
è¯»å–é”®
&lt;/h3>&lt;p>viper æä¾›äº†å¤šç§å½¢å¼çš„è¯»å–æ–¹æ³•ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†&lt;code>Get&lt;/code>æ–¹æ³•çš„ç”¨æ³•ã€‚&lt;code>Get&lt;/code>æ–¹æ³•è¿”å›ä¸€ä¸ª&lt;code>interface{}&lt;/code>çš„å€¼ï¼Œä½¿ç”¨æœ‰æ‰€ä¸ä¾¿ã€‚&lt;/p>
&lt;p>&lt;code>GetType&lt;/code>ç³»åˆ—æ–¹æ³•å¯ä»¥è¿”å›æŒ‡å®šç±»å‹çš„å€¼ã€‚ å…¶ä¸­ï¼ŒType å¯ä»¥ä¸º&lt;code>Bool/Float64/Int/String/Time/Duration/IntSlice/StringSlice&lt;/code>ã€‚ ä½†æ˜¯è¯·æ³¨æ„ï¼Œ&lt;strong>å¦‚æœæŒ‡å®šçš„é”®ä¸å­˜åœ¨æˆ–ç±»å‹ä¸æ­£ç¡®ï¼Œ&lt;code>GetType&lt;/code>æ–¹æ³•è¿”å›å¯¹åº”ç±»å‹çš„é›¶å€¼&lt;/strong>ã€‚&lt;/p>
&lt;p>å¦‚æœè¦åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦å­˜åœ¨ï¼Œä½¿ç”¨&lt;code>IsSet&lt;/code>æ–¹æ³•ã€‚ å¦å¤–ï¼Œ&lt;code>GetStringMap&lt;/code>å’Œ&lt;code>GetStringMapString&lt;/code>ç›´æ¥ä»¥ map è¿”å›æŸä¸ªé”®ä¸‹é¢æ‰€æœ‰çš„é”®å€¼å¯¹ï¼Œå‰è€…è¿”å›&lt;code>map[string]interface{}&lt;/code>ï¼Œåè€…è¿”å›&lt;code>map[string]string&lt;/code>ã€‚ &lt;code>AllSettings&lt;/code>ä»¥&lt;code>map[string]interface{}&lt;/code>è¿”å›æ‰€æœ‰è®¾ç½®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// çœç•¥åŒ…åå’Œ import éƒ¨åˆ†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;toml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddConfigPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;read config failed: %v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;protocols: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetStringSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.protocols&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ports: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetIntSlice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ports&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;timeout: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.timeout&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql ip: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql port: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsSet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port is set&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port is not set&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql settings: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetStringMap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis settings: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetStringMap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;all settings: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AllSettings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ config.toml ä¸­æ·»åŠ &lt;code>protocols&lt;/code>å’Œ&lt;code>ports&lt;/code>é…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">server&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">protocols&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;http&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;https&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ports&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">10000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10001&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10002&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">timeout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;3s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¯‘ã€è¿è¡Œç¨‹åºï¼Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">protocols: &lt;span class="o">[&lt;/span>http https port&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ports: &lt;span class="o">[&lt;/span>&lt;span class="m">10000&lt;/span> &lt;span class="m">10001&lt;/span> 10002&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">timeout: 3s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql ip: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql port: &lt;span class="m">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis.port is &lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql settings: map&lt;span class="o">[&lt;/span>database:awesome ip:127.0.0.1 password:123456 port:3306 user:dj&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis settings: map&lt;span class="o">[&lt;/span>ip:127.0.0.1 port:7381&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">all settings: map&lt;span class="o">[&lt;/span>app_name:awesome web log_level:DEBUG mysql:map&lt;span class="o">[&lt;/span>database:awesome ip:127.0.0.1 pa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssword:123456 port:3306 user:dj&lt;span class="o">]&lt;/span> redis:map&lt;span class="o">[&lt;/span>ip:127.0.0.1 port:7381&lt;span class="o">]&lt;/span> server:map&lt;span class="o">[&lt;/span>ports:&lt;span class="o">[&lt;/span>&lt;span class="m">10000&lt;/span> &lt;span class="m">10001&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0002&lt;span class="o">]&lt;/span> protocols:&lt;span class="o">[&lt;/span>http https port&lt;span class="o">]&lt;/span> timeout:3s&lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœå°†é…ç½®ä¸­çš„&lt;code>redis.port&lt;/code>æ³¨é‡Šæ‰ï¼Œå°†è¾“å‡º&lt;code>redis.port is not set&lt;/code>ã€‚&lt;/p>
&lt;p>ä¸Šé¢çš„ç¤ºä¾‹ä¸­è¿˜æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨&lt;code>time.Duration&lt;/code>ç±»å‹ï¼Œåªè¦æ˜¯&lt;code>time.ParseDuration&lt;/code>æ¥å—çš„æ ¼å¼éƒ½å¯ä»¥ï¼Œä¾‹å¦‚&lt;code>3s&lt;/code>ã€&lt;code>2min&lt;/code>ã€&lt;code>1min30s&lt;/code>ç­‰ã€‚&lt;/p>
&lt;h3 id="è®¾ç½®é”®å€¼">
&lt;a href="#%e8%ae%be%e7%bd%ae%e9%94%ae%e5%80%bc" class="header-anchor">#&lt;/a>
è®¾ç½®é”®å€¼
&lt;/h3>&lt;p>viper æ”¯æŒåœ¨å¤šä¸ªåœ°æ–¹è®¾ç½®ï¼Œä½¿ç”¨ä¸‹é¢çš„é¡ºåºä¾æ¬¡è¯»å–ï¼š&lt;/p>
&lt;ul>
&lt;li>è°ƒç”¨&lt;code>Set&lt;/code>æ˜¾ç¤ºè®¾ç½®çš„ï¼›&lt;/li>
&lt;li>å‘½ä»¤è¡Œé€‰é¡¹ï¼›&lt;/li>
&lt;li>ç¯å¢ƒå˜é‡ï¼›&lt;/li>
&lt;li>é…ç½®æ–‡ä»¶ï¼›&lt;/li>
&lt;li>é»˜è®¤å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>&lt;code>viper.Set&lt;/code>&lt;/strong>&lt;/p>
&lt;p>å¦‚æœæŸä¸ªé”®é€šè¿‡&lt;code>viper.Set&lt;/code>è®¾ç½®äº†å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼çš„ä¼˜å…ˆçº§æœ€é«˜ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5381&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœå°†ä¸Šé¢è¿™è¡Œä»£ç æ”¾åˆ°ç¨‹åºä¸­ï¼Œè¿è¡Œç¨‹åºï¼Œè¾“å‡ºçš„&lt;code>redis.port&lt;/code>å°†æ˜¯ 5381ã€‚&lt;/p>
&lt;p>&lt;strong>&lt;code>viper.SetDefault&lt;/code>&lt;/strong>&lt;/p>
&lt;p>è®¾ç½®é»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰é…ç½®é”®ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">viper.SetDefault&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;log_level&amp;#34;&lt;/span>, &lt;span class="s2">&amp;#34;INFO&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰é…ç½®&lt;code>log_level&lt;/code>,é‚£ä¹ˆå°†ä½¿ç”¨INFO&lt;/p>
&lt;hr>
&lt;h2 id="æŠŠé…ç½®å€¼è¯»å…¥viper">
&lt;a href="#%e6%8a%8a%e9%85%8d%e7%bd%ae%e5%80%bc%e8%af%bb%e5%85%a5viper" class="header-anchor">#&lt;/a>
æŠŠé…ç½®å€¼è¯»å…¥Viper
&lt;/h2>&lt;p>Viper æ”¯æŒå¤šç§æ–¹å¼è¯»å…¥é…ç½®ï¼š&lt;/p>
&lt;ul>
&lt;li>è®¾ç½®é»˜è®¤é…ç½®å€¼&lt;/li>
&lt;li>ä»é…ç½®æ–‡ä»¶è¯»å–é…ç½®&lt;/li>
&lt;li>ç›‘æ§å¹¶é‡æ–°è¯»å–é…ç½®æ–‡ä»¶&lt;/li>
&lt;li>ä» &lt;code>io.Reader&lt;/code> è¯»å–é…ç½®&lt;/li>
&lt;li>ä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®&lt;/li>
&lt;li>ä»å‘½ä»¤è¡Œå‚æ•°è¯»å–é…ç½®&lt;/li>
&lt;li>ä»è¿œç¨‹ key/value å­˜å‚¨è¯»å–é…ç½®&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥çœ‹ã€‚&lt;/p>
&lt;h3 id="è®¾ç½®é»˜è®¤é…ç½®å€¼">
&lt;a href="#%e8%ae%be%e7%bd%ae%e9%bb%98%e8%ae%a4%e9%85%8d%e7%bd%ae%e5%80%bc" class="header-anchor">#&lt;/a>
è®¾ç½®é»˜è®¤é…ç½®å€¼
&lt;/h3>&lt;p>ä¸€ä¸ªå¥½çš„é…ç½®ç³»ç»Ÿåº”è¯¥æ”¯æŒé»˜è®¤å€¼ã€‚Viper æ”¯æŒä½¿ç”¨ &lt;code>viper.SetDefault(key, value)&lt;/code> ä¸º &lt;code>key&lt;/code> è®¾ç½®é»˜è®¤å€¼ &lt;code>value&lt;/code>ï¼Œåœ¨æ²¡æœ‰é€šè¿‡é…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€è¿œç¨‹é…ç½®æˆ–å‘½ä»¤è¡Œæ ‡å¿—è®¾ç½® &lt;code>key&lt;/code> æ‰€å¯¹åº”å€¼çš„æƒ…å†µä¸‹ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è®¾ç½®é»˜è®¤é…ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;arlettebrook&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;8080&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// key ä¸åŒºåˆ†å¤§å°å†™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server: %+v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server: map&lt;span class="o">[&lt;/span>ip:127.0.0.1 port:8080&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä»é…ç½®æ–‡ä»¶è¯»å–é…ç½®">
&lt;a href="#%e4%bb%8e%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%bb%e5%8f%96%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
ä»é…ç½®æ–‡ä»¶è¯»å–é…ç½®
&lt;/h3>&lt;p>Viper æ”¯æŒä» JSONã€TOMLã€YAMLã€HCLã€INIã€envfile æˆ– Java Properties æ ¼å¼çš„é…ç½®æ–‡ä»¶ä¸­è¯»å–é…ç½®ã€‚Viper å¯ä»¥æœç´¢å¤šä¸ªè·¯å¾„ï¼Œä½†ç›®å‰å•ä¸ª Viper å®ä¾‹åªæ”¯æŒå•ä¸ªé…ç½®æ–‡ä»¶ã€‚&lt;strong>Viper ä¸ä¼šé»˜è®¤é…ç½®ä»»ä½•æœç´¢è·¯å¾„ï¼Œå°†é»˜è®¤å†³å®šç•™ç»™åº”ç”¨ç¨‹åº&lt;/strong>ã€‚&lt;/p>
&lt;p>ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼æ¥åŠ è½½é…ç½®æ–‡ä»¶ï¼š&lt;/p>
&lt;ul>
&lt;li>é€šè¿‡ &lt;code>viper.SetConfigFile()&lt;/code> æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œæ˜¾å¼å®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„ã€åç§°å’Œæ‰©å±•åã€‚ Viperå°†ä½¿ç”¨å®ƒå¹¶ä¸”ä¸æ£€æŸ¥ä»»ä½•é…ç½®è·¯å¾„ã€‚&lt;/li>
&lt;li>é€šè¿‡ &lt;code>viper.SetConfigName()&lt;/code> æŒ‡å®šä¸å¸¦æ‰©å±•åçš„é…ç½®æ–‡ä»¶ï¼Œ&lt;code>viper.SetConfigType()&lt;/code>æŒ‡å®šé…ç½®æ–‡ä»¶ç±»å‹ç±»å‹ã€‚ç„¶åé€šè¿‡ &lt;code>viper.AddConfigPath()&lt;/code> æŒ‡å®šé…ç½®æ–‡ä»¶çš„æœç´¢è·¯å¾„ä¸­ï¼Œå¯ä»¥é€šè¿‡å¤šæ¬¡è°ƒç”¨ï¼Œæ¥è®¾ç½®å¤šä¸ªé…ç½®æ–‡ä»¶æœç´¢è·¯å¾„ã€‚Viper ä¼šæ ¹æ®æ‰€æ·»åŠ çš„è·¯å¾„é¡ºåºæŸ¥æ‰¾æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œå¦‚æœæ‰¾åˆ°å°±åœæ­¢æŸ¥æ‰¾ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;config file.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cfg&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// æŒ‡å®šé…ç½®æ–‡ä»¶ï¼ˆè·¯å¾„ + é…ç½®æ–‡ä»¶åï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddConfigPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// æŠŠå½“å‰ç›®å½•åŠ å…¥åˆ°é…ç½®æ–‡ä»¶çš„æœç´¢è·¯å¾„ä¸­
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddConfigPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;$HOME/.config&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¯ä»¥å¤šæ¬¡è°ƒç”¨ AddConfigPath æ¥è®¾ç½®å¤šä¸ªé…ç½®æ–‡ä»¶æœç´¢è·¯å¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;toml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¦‚æœé…ç½®æ–‡ä»¶åä¸­æ²¡æœ‰æ‰©å±•åï¼Œåˆ™éœ€è¦æ˜¾å¼æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ ¼å¼// æŒ‡å®šé…ç½®æ–‡ä»¶åï¼ˆæ²¡æœ‰æ‰©å±•åï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">configFileNotFoundError&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ConfigFileNotFoundError&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">As&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">configFileNotFoundError&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">configFileNotFoundError&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;using config file: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ConfigFileUsed&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>viper.ConfigFileUsed()&lt;/code>è¿”å›ä½¿ç”¨çš„é…ç½®æ–‡ä»¶çš„è·¯å¾„&lt;/p>
&lt;p>å‡å¦‚æœ‰å¦‚ä¸‹é…ç½®æ–‡ä»¶ &lt;code>config.yaml&lt;/code> ä¸ç¤ºä¾‹ç¨‹åºåœ¨åŒä¸€ç›®å½•ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># config.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arlettebrook&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">123456&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go -c ./config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">using config file: ./config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç›‘æ§å¹¶é‡æ–°è¯»å–é…ç½®æ–‡ä»¶">
&lt;a href="#%e7%9b%91%e6%8e%a7%e5%b9%b6%e9%87%8d%e6%96%b0%e8%af%bb%e5%8f%96%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="header-anchor">#&lt;/a>
ç›‘æ§å¹¶é‡æ–°è¯»å–é…ç½®æ–‡ä»¶
&lt;/h3>&lt;p>Viper æ”¯æŒåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å®æ—¶è¯»å–é…ç½®æ–‡ä»¶ï¼Œå³çƒ­åŠ è½½é…ç½®ã€‚&lt;/p>
&lt;p>åªéœ€è¦è°ƒç”¨ &lt;code>viper.WatchConfig()&lt;/code> å³å¯å¼€å¯æ­¤åŠŸèƒ½ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/fsnotify/fsnotify&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ³¨å†Œæ¯æ¬¡é…ç½®æ–‡ä»¶å‘ç”Ÿå˜æ›´åéƒ½ä¼šè°ƒç”¨çš„å›è°ƒå‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OnConfigChange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;config file changed: %s username:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç›‘æ§å¹¶é‡æ–°è¯»å–é…ç½®æ–‡ä»¶ï¼Œéœ€è¦ç¡®ä¿åœ¨è°ƒç”¨å‰æ·»åŠ äº†æ‰€æœ‰çš„é…ç½®è·¯å¾„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WatchConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;åŠ è½½é…ç½®æ–‡ä»¶é”™è¯¯:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;æœªä¿®æ”¹çš„username: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é˜»å¡ç¨‹åºï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å¯ä»¥æ‰‹åŠ¨å»ä¿®æ”¹é…ç½®æ–‡ä»¶å†…å®¹ï¼Œè§‚å¯Ÿç¨‹åºè¾“å‡ºå˜åŒ–,æ³¨æ„è¦ä¿å­˜ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;æœ€ç»ˆçš„username: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨è°ƒç”¨ &lt;code>viper.WatchConfig()&lt;/code> ç›‘æ§å¹¶é‡æ–°è¯»å–é…ç½®æ–‡ä»¶ä¹‹å‰ï¼Œéœ€è¦ç¡®ä¿æ·»åŠ äº†æ‰€æœ‰çš„é…ç½®æœç´¢è·¯å¾„ã€‚&lt;/p>
&lt;p>å¹¶ä¸”ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ &lt;code>viper.OnConfigChange()&lt;/code> å‡½æ•°æ³¨å†Œä¸€ä¸ªæ¯æ¬¡é…ç½®æ–‡ä»¶å‘ç”Ÿå˜æ›´åéƒ½ä¼šè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä¾ç„¶ä½¿ç”¨ä¸Šé¢çš„ &lt;code>config.yaml&lt;/code> é…ç½®æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arlettebrook&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">123456&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç ï¼Œå¹¶åœ¨ç¨‹åºé˜»å¡çš„æ—¶å€™ï¼Œæ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­ &lt;code>username&lt;/code> åé¢åˆ†åˆ«è¿½åŠ 1ä¿å­˜ã€2ä¿å­˜3ä¿å­˜ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æœªä¿®æ”¹çš„username: arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config file changed: config.yaml username:arlettebrook1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config file changed: config.yaml username:arlettebrook1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config file changed: config.yaml username:arlettebrook12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config file changed: config.yaml username:arlettebrook12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config file changed: config.yaml username:arlettebrook123
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config file changed: config.yaml username:arlettebrook123
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æœ€ç»ˆçš„username: arlettebrook123
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘è¿™é‡Œä¿®æ”¹ä¸€æ¬¡å›è°ƒå‡½æ•°ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ‰§è¡Œäº†ä¿©æ¬¡ï¼Œä¸è¿‡æ²¡æœ‰å½±å“ã€‚&lt;/p>
&lt;h4 id="ç›‘å¬æ–‡ä»¶ä¿®æ”¹">
&lt;a href="#%e7%9b%91%e5%90%ac%e6%96%87%e4%bb%b6%e4%bf%ae%e6%94%b9" class="header-anchor">#&lt;/a>
ç›‘å¬æ–‡ä»¶ä¿®æ”¹
&lt;/h4>&lt;p>viper å¯ä»¥ç›‘å¬æ–‡ä»¶ä¿®æ”¹ï¼Œçƒ­åŠ è½½é…ç½®ã€‚å› æ­¤ä¸éœ€è¦é‡å¯æœåŠ¡å™¨ï¼Œå°±èƒ½è®©é…ç½®ç”Ÿæ•ˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;toml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddConfigPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;read config failed: %v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WatchConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis port before sleep: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis port after sleep: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åªéœ€è¦è°ƒç”¨&lt;code>viper.WatchConfig&lt;/code>ï¼Œviper ä¼šè‡ªåŠ¨ç›‘å¬é…ç½®ä¿®æ”¹ã€‚å¦‚æœæœ‰ä¿®æ”¹ï¼Œé‡æ–°åŠ è½½çš„é…ç½®ã€‚&lt;/p>
&lt;p>ä¸Šé¢ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å…ˆæ‰“å°&lt;code>redis.port&lt;/code>çš„å€¼ï¼Œç„¶å&lt;code>Sleep&lt;/code> 10sã€‚åœ¨è¿™æœŸé—´ä¿®æ”¹é…ç½®ä¸­&lt;code>redis.port&lt;/code>çš„å€¼ï¼Œ&lt;code>Sleep&lt;/code>ç»“æŸåå†æ¬¡æ‰“å°ã€‚ å‘ç°æ‰“å°å‡ºä¿®æ”¹åçš„å€¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">redis port before sleep: &lt;span class="m">7381&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis port after sleep: &lt;span class="m">73810&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦å¤–ï¼Œè¿˜å¯ä»¥ä¸ºé…ç½®ä¿®æ”¹å¢åŠ ä¸€ä¸ªå›è°ƒï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OnConfigChange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Config file:%s Op:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·æ–‡ä»¶ä¿®æ”¹æ—¶ä¼šæ‰§è¡Œè¿™ä¸ªå›è°ƒã€‚&lt;/p>
&lt;p>viper ä½¿ç”¨&lt;a class="link" href="https://github.com/fsnotify/fsnotify" target="_blank" rel="noopener"
>fsnotify&lt;/a>è¿™ä¸ªåº“æ¥å®ç°ç›‘å¬æ–‡ä»¶ä¿®æ”¹çš„åŠŸèƒ½ã€‚&lt;/p>
&lt;h3 id="ä»-ioreader-è¯»å–é…ç½®">
&lt;a href="#%e4%bb%8e-ioreader-%e8%af%bb%e5%8f%96%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
ä» &lt;code>io.Reader&lt;/code> è¯»å–é…ç½®
&lt;/h3>&lt;p>Viper æ”¯æŒä»ä»»ä½•å®ç°äº† &lt;code>io.Reader&lt;/code> æ¥å£çš„é…ç½®æºä¸­è¯»å–é…ç½®ã€‚æ³¨æ„éœ€è¦æŒ‡å®šé…ç½®æ–‡ä»¶çš„ç±»å‹ï¼Œæ‰èƒ½è¯†åˆ«&lt;code>io.Reader&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;bytes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// æˆ–è€…ä½¿ç”¨ viper.SetConfigType(&amp;#34;YAML&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">yamlExample&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">username: arlettebrook
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">password: 123456
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">server:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> ip: 127.0.0.1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> port: 8080
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadConfig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">yamlExample&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;è¯»å–é…ç½®æ–‡ä»¶é”™è¯¯ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæˆ‘ä»¬é€šè¿‡ &lt;code>bytes.NewBuffer()&lt;/code> æ„é€ äº†ä¸€ä¸ª &lt;code>bytes.Buffer&lt;/code> å¯¹è±¡ï¼Œå®ƒå®ç°äº† &lt;code>io.Reader&lt;/code> æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä¼ é€’ç»™ &lt;code>viper.ReadConfig()&lt;/code> æ¥ä»ä¸­è¯»å–é…ç½®ã€‚&lt;/p>
&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ä»ioreaderä¸­è¯»å–">
&lt;a href="#%e4%bb%8eioreader%e4%b8%ad%e8%af%bb%e5%8f%96" class="header-anchor">#&lt;/a>
ä»&lt;code>io.Reader&lt;/code>ä¸­è¯»å–
&lt;/h4>&lt;p>viper æ”¯æŒä»&lt;code>io.Reader&lt;/code>ä¸­è¯»å–é…ç½®ã€‚è¿™ç§å½¢å¼å¾ˆçµæ´»ï¼Œæ¥æºå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¨‹åºä¸­ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œç”šè‡³å¯ä»¥ä»ç½‘ç»œè¿æ¥ä¸­è¯»å–çš„å­—èŠ‚æµã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;bytes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;toml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tomlConfig&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">app_name = &amp;#34;awesome web&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"># possible values: DEBUG, INFO, WARNING, ERROR, FATAL
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">log_level = &amp;#34;DEBUG&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">[mysql]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip = &amp;#34;127.0.0.1&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">port = 3306
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">user = &amp;#34;dj&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">password = 123456
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">database = &amp;#34;awesome&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">[redis]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip = &amp;#34;127.0.0.1&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">port = 7381
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadConfig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tomlConfig&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;read config failed: %v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis port: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®">
&lt;a href="#%e4%bb%8e%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e8%af%bb%e5%8f%96%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
ä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®
&lt;/h3>&lt;p>Viper è¿˜æ”¯æŒä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®ï¼Œæœ‰ 5 ä¸ªæ–¹æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä½¿ç”¨ç¯å¢ƒå˜é‡:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>AutomaticEnv()&lt;/code>ï¼šä½¿Viperæ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦ä¸ä»»ä½•ç°æœ‰é”®ï¼ˆé…ç½®ã€é»˜è®¤å€¼æˆ–æ ‡å¿—ï¼‰åŒ¹é…ã€‚å¦‚æœæ‰¾åˆ°åŒ¹é…çš„ç¯å¢ƒå˜é‡ï¼Œå®ƒä»¬å°†è¢«åŠ è½½åˆ°Viperä¸­ã€‚&lt;/p>
&lt;ul>
&lt;li>å¼€å¯è‡ªåŠ¨åŒ¹é…ï¼ˆæ ¹æ®å‰ç¼€åŒ¹é…ï¼‰ç¯å¢ƒå˜é‡ï¼ŒåŠ è½½åˆ°Viperä¸­ã€‚å¦‚ä½•æ²¡æœ‰å‰ç¼€å°†åŠ è½½æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>BindEnv(string...) : error&lt;/code>ï¼šç»‘å®šä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚éœ€è¦ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é…ç½®é¡¹çš„é”®åï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç¯å¢ƒå˜é‡çš„åç§°ã€‚å¦‚æœæœªæä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ Viper å°†å‡å®šç¯å¢ƒå˜é‡åä¸ºï¼š&lt;code>ç¯å¢ƒå˜é‡å‰ç¼€_é”®å&lt;/code>ï¼Œä¸”ä¸ºå…¨å¤§å†™å½¢å¼ã€‚ä¾‹å¦‚ç¯å¢ƒå˜é‡å‰ç¼€ä¸º &lt;code>ENV&lt;/code>ï¼Œé”®åä¸º &lt;code>username&lt;/code>ï¼Œåˆ™ç¯å¢ƒå˜é‡åä¸º &lt;code>ENV_USERNAME&lt;/code>ã€‚å½“æ˜¾å¼æä¾›ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨æ·»åŠ å‰ç¼€ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºå¤§å†™ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ &lt;code>viper.BindEnv(&amp;quot;username&amp;quot;, &amp;quot;username&amp;quot;)&lt;/code> ç»‘å®šé”®åä¸º &lt;code>username&lt;/code> çš„ç¯å¢ƒå˜é‡ï¼Œåº”è¯¥ä½¿ç”¨ &lt;code>viper.Get(&amp;quot;username&amp;quot;)&lt;/code> è¯»å–ç¯å¢ƒå˜é‡çš„å€¼ã€‚&lt;/p>
&lt;p>åœ¨ä½¿ç”¨ç¯å¢ƒå˜é‡æ—¶ï¼Œéœ€è¦æ³¨æ„ï¼Œæ¯æ¬¡è®¿é—®å®ƒçš„å€¼æ—¶éƒ½ä¼šå»ç¯å¢ƒå˜é‡ä¸­è¯»å–ã€‚å½“è°ƒç”¨ &lt;code>BindEnv&lt;/code> æ—¶ï¼ŒViper ä¸ä¼šå›ºå®šå®ƒçš„å€¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>SetEnvPrefix(string)&lt;/code>ï¼šå¯ä»¥å‘Šè¯‰ Viper åœ¨è¯»å–ç¯å¢ƒå˜é‡æ—¶ä½¿ç”¨çš„å‰ç¼€ã€‚&lt;code>BindEnv&lt;/code> å’Œ &lt;code>AutomaticEnv&lt;/code> éƒ½å°†ä½¿ç”¨æ­¤å‰ç¼€ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ &lt;code>viper.SetEnvPrefix(&amp;quot;ENV&amp;quot;)&lt;/code> è®¾ç½®äº†å‰ç¼€ä¸º &lt;code>ENV&lt;/code>ï¼Œå¹¶ä¸”ä½¿ç”¨ &lt;code>viper.BindEnv(&amp;quot;username&amp;quot;)&lt;/code> ç»‘å®šäº†ç¯å¢ƒå˜é‡ï¼Œåœ¨ä½¿ç”¨ &lt;code>viper.Get(&amp;quot;username&amp;quot;)&lt;/code> è¯»å–ç¯å¢ƒå˜é‡æ—¶ï¼Œå®é™…è¯»å–çš„ &lt;code>key&lt;/code> æ˜¯ &lt;code>ENV_USERNAME&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>SetEnvKeyReplacer(string...) *strings.Replacer&lt;/code>ï¼šå…è®¸ä½¿ç”¨ &lt;code>strings.Replacer&lt;/code> å¯¹è±¡åœ¨ä¸€å®šç¨‹åº¦ä¸Šé‡å†™ç¯å¢ƒå˜é‡çš„é”®åã€‚ä¾‹å¦‚ï¼Œå­˜åœ¨ &lt;code>SERVER_IP=&amp;quot;127.0.0.1&amp;quot;&lt;/code> ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨ &lt;code>viper.SetEnvKeyReplacer(strings.NewReplacer(&amp;quot;.&amp;quot;, &amp;quot;_&amp;quot;, &amp;quot;-&amp;quot;, &amp;quot;_&amp;quot;))&lt;/code> å°†é”®åä¸­çš„ &lt;code>.&lt;/code> æˆ– &lt;code>-&lt;/code> æ›¿æ¢æˆ &lt;code>_&lt;/code>ï¼Œåˆ™é€šè¿‡ &lt;code>viper.Get(&amp;quot;server_ip&amp;quot;)&lt;/code>ã€&lt;code>viper.Get(&amp;quot;server.ip&amp;quot;)&lt;/code>ã€&lt;code>viper.Get(&amp;quot;server-ip&amp;quot;)&lt;/code> ä¸‰ç§æ–¹å¼éƒ½å¯ä»¥è¯»å–ç¯å¢ƒå˜é‡å¯¹åº”çš„å€¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>AllowEmptyEnv(bool)&lt;/code>ï¼šå½“ç¯å¢ƒå˜é‡ä¸ºç©ºæ—¶ï¼ˆæœ‰é”®åè€Œæ²¡æœ‰å€¼çš„æƒ…å†µï¼‰ï¼Œé»˜è®¤ä¼šè¢«è®¤ä¸ºæ˜¯æœªè®¾ç½®çš„ï¼Œå¹¶ä¸”ç¨‹åºå°†å›é€€åˆ°ä¸‹ä¸€ä¸ªé…ç½®æ¥æºã€‚è¦å°†ç©ºç¯å¢ƒå˜é‡è§†ä¸ºå·²è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>viper.AllSettings()&lt;/code>è¯»å–å…¨éƒ¨é…ç½®ï¼Œåªèƒ½è·å–åˆ°é€šè¿‡ BindEnv ç»‘å®šçš„ç¯å¢ƒå˜é‡ï¼Œæ— æ³•è·å–åˆ°é€šè¿‡ AutomaticEnv ç»‘å®šçš„ç¯å¢ƒå˜é‡&lt;/p>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æ³¨æ„ âš ï¸ï¼š&lt;/p>
&lt;ol>
&lt;li>Viper åœ¨è¯»å–ç¯å¢ƒå˜é‡æ—¶ï¼Œæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚å¦‚æœæŒ‡å®šçš„ç¯å¢ƒå˜é‡ä¸ç»‘å®šçš„å¤§å°å†™ä¸ä¸€è‡´ï¼Œviperä¼šè‡ªåŠ¨å¤§å°å†™è½¬æ¢ã€‚&lt;/li>
&lt;li>ä»¥ä¸‹ä»£ç æ˜¯åœ¨windowsä¸‹çš„bashç»ˆç«¯ä¸­è¿è¡Œçš„ã€‚&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;p>ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetEnvPrefix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;env&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// è®¾ç½®è¯»å–ç¯å¢ƒå˜é‡å‰ç¼€ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºå¤§å†™ ENV
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AllowEmptyEnv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å°†ç©ºç¯å¢ƒå˜é‡è§†ä¸ºå·²è®¾ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AutomaticEnv&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// å¼€å¯è‡ªåŠ¨åŒ¹é…ï¼ˆæ ¹æ®å‰ç¼€åŒ¹é…ï¼‰ç¯å¢ƒå˜é‡ï¼ŒåŠ è½½åˆ°Viperä¸­
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindEnv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// ä¹Ÿå¯ä»¥å•ç‹¬ç»‘å®šæŸä¸€ä¸ªç¯å¢ƒå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindEnv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å°†é”®åä¸­çš„ . æˆ– - æ›¿æ¢æˆ _
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetEnvKeyReplacer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewReplacer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;_&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;-&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;_&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;USERNAME&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// fmt.Printf(&amp;#34;GOPATH:%v\n&amp;#34;,viper.Get(&amp;#34;gopath&amp;#34;)) // è¯·æ³¨é‡Šåˆ°å‰ç¼€åœ¨å–æ¶ˆæ³¨é‡Šè¿è¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–å…¨éƒ¨é…ç½®ï¼Œåªèƒ½è·å–åˆ°é€šè¿‡ BindEnv ç»‘å®šçš„ç¯å¢ƒå˜é‡ï¼Œæ— æ³•è·å–åˆ°é€šè¿‡ AutomaticEnv ç»‘å®šçš„ç¯å¢ƒå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AllSettings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="nx">ENV_USERNAME&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">arlettebrook&lt;/span> &lt;span class="nx">ENV_SERVER_IP&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mf">127.0.0.1&lt;/span> &lt;span class="nx">ENV_PASSWORD&lt;/span>&lt;span class="p">=&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">username&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">arlettebrook&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">password&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">arlettebrook&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ç¯å¢ƒå˜é‡">
&lt;a href="#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f" class="header-anchor">#&lt;/a>
ç¯å¢ƒå˜é‡
&lt;/h4>&lt;p>å¦‚æœä»å‘½ä»¤è¡Œå‚æ•°éƒ½æ²¡æœ‰è·å–åˆ°é”®å€¼ï¼Œå°†å°è¯•ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–ã€‚æˆ‘ä»¬æ—¢å¯ä»¥ä¸€ä¸ªä¸ªç»‘å®šï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨å…¨éƒ¨ç»‘å®šã€‚&lt;/p>
&lt;p>åœ¨&lt;code>init&lt;/code>æ–¹æ³•ä¸­è°ƒç”¨&lt;code>AutomaticEnv&lt;/code>æ–¹æ³•ç»‘å®šå…¨éƒ¨ç¯å¢ƒå˜é‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»‘å®šç¯å¢ƒå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AutomaticEnv&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†éªŒè¯æ˜¯å¦ç»‘å®šæˆåŠŸï¼Œæˆ‘ä»¬åœ¨&lt;code>main&lt;/code>æ–¹æ³•ä¸­å°†ç¯å¢ƒå˜é‡ GOPATH æ‰“å°å‡ºæ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»‘å®šç¯å¢ƒå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AutomaticEnv&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;GOPATH:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;gopath&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;JAVA_HOME:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;java_home&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä»–ç¯å¢ƒå˜é‡ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸Šé¢è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GOPATH: D:&lt;span class="se">\G&lt;/span>oSettings&lt;span class="se">\G&lt;/span>oPath
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">JAVA_HOME: E:&lt;span class="se">\J&lt;/span>ava&lt;span class="se">\j&lt;/span>dk-17.0.5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿå¯ä»¥å•ç‹¬ç»‘å®šç¯å¢ƒå˜é‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»‘å®šç¯å¢ƒå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindEnv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;redis_port&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindEnv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis port:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è°ƒç”¨&lt;code>BindEnv&lt;/code>æ–¹æ³•ï¼Œå¦‚æœåªä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œåˆ™è¿™ä¸ªå‚æ•°æ—¢è¡¨ç¤ºé”®åï¼Œåˆè¡¨ç¤ºç¯å¢ƒå˜é‡åã€‚ å¦‚æœä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œåˆ™ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºé”®åï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºç¯å¢ƒå˜é‡åã€‚&lt;/p>
&lt;p>ä¸Šé¢å°†è¿è¡Œå°†è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">username&lt;/span>&lt;span class="o">=&lt;/span>arlettebrook &lt;span class="nv">REDIS_PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">10809&lt;/span> go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis port: &lt;span class="m">10809&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœå¯¹åº”çš„ç¯å¢ƒå˜é‡ä¸å­˜åœ¨ï¼Œviper ä¼šè‡ªåŠ¨å°†é”®åå…¨éƒ¨å¤§å°å†™è½¬æ¢å†æŸ¥æ‰¾ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨é”®å&lt;code>REDIS_PORT&lt;/code>ä¹Ÿèƒ½è¯»å–ç¯å¢ƒå˜é‡&lt;code>redis.port&lt;/code>çš„å€¼ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼ŒåµŒå¥—çš„é…ç½®é”®ï¼Œç»‘å®šç¯å¢ƒå˜é‡æ—¶å¿…é¡»æŒ‡å®šç¯å¢ƒå˜é‡åï¼Œå› ä¸º Viper ä¸ä¼šè‡ªåŠ¨å°†ç‚¹è½¬æ¢ä¸ºä¸‹åˆ’çº¿æˆ–å…¶ä»–åˆ†éš”ç¬¦ã€‚&lt;/p>
&lt;p>ä½†å¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡åçš„æ›¿æ¢ç¬¦ï¼Œå°±å¯ä»¥ä¸ç”¨çŸ¥é“ç¬¬äºŒä¸ªå‚æ•°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å°†é”®åä¸­çš„ . æˆ– - æ›¿æ¢æˆ _
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetEnvKeyReplacer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewReplacer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;_&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;-&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;_&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»‘å®šç¯å¢ƒå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindEnv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindEnv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username-a&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetEnvKeyReplacer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewReplacer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;_&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;-&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;_&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis port:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username-a:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username-a&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¼”ç¤ºè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">username_A&lt;/span>&lt;span class="o">=&lt;/span>arlettebrook &lt;span class="nv">REDIS_PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">10809&lt;/span> go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis port: &lt;span class="m">10809&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username-a: arlettebrook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä»å‘½ä»¤è¡Œå‚æ•°è¯»å–é…ç½®">
&lt;a href="#%e4%bb%8e%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%8f%82%e6%95%b0%e8%af%bb%e5%8f%96%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
ä»å‘½ä»¤è¡Œå‚æ•°è¯»å–é…ç½®
&lt;/h3>&lt;p>Viper æ”¯æŒ &lt;a class="link" href="https://github.com/spf13/pflag" target="_blank" rel="noopener"
>pflag&lt;/a> åŒ…ï¼ˆå®ƒä»¬å…¶å®éƒ½åœ¨ &lt;a class="link" href="https://github.com/spf13" target="_blank" rel="noopener"
>spf13&lt;/a> ä»“åº“ä¸‹ï¼‰ï¼Œèƒ½å¤Ÿç»‘å®šå‘½ä»¤è¡Œæ ‡å¿—ï¼Œä»è€Œè¯»å–å‘½ä»¤è¡Œå‚æ•°ã€‚&lt;/p>
&lt;p>åŒ &lt;code>BindEnv&lt;/code> ç±»ä¼¼ï¼Œåœ¨è°ƒç”¨ç»‘å®šæ–¹æ³•æ—¶ï¼Œä¸ä¼šè®¾ç½®å€¼ï¼Œè€Œæ˜¯åœ¨æ¯æ¬¡è®¿é—®æ—¶è®¾ç½®ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥éšæ—¶ç»‘å®šå®ƒï¼Œä¾‹å¦‚å¯ä»¥åœ¨ &lt;code>init()&lt;/code> å‡½æ•°ä¸­ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>BindPFlag&lt;/code>ï¼šå¯¹äºå•ä¸ªæ ‡å¿—ï¼Œå¯ä»¥è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œç»‘å®šã€‚&lt;/li>
&lt;li>&lt;code>BindPFlags&lt;/code>ï¼šå¯ä»¥ç»‘å®šä¸€ç»„ç°æœ‰çš„æ ‡å¿—é›† &lt;code>pflag.FlagSet&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StringP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;u&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for username&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StringP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;p&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for password&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindPFlag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// ç»‘å®šå•ä¸ªæ ‡å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindPFlags&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// ç»‘å®šæ ‡å¿—é›†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go -u arlettebrook -p &lt;span class="m">123456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password: &lt;span class="m">123456&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› ä¸º pflag èƒ½å¤Ÿå…¼å®¹æ ‡å‡†åº“çš„ flag åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å˜ç›¸çš„è®© Viper æ”¯æŒ flagã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">package main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import &lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func main&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">_&lt;/span> &lt;span class="o">=&lt;/span> flag.String&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;username&amp;#34;&lt;/span>, &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>, &lt;span class="s2">&amp;#34;help message for username&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pflag.CommandLine.AddGoFlagSet&lt;span class="o">(&lt;/span>flag.CommandLine&lt;span class="o">)&lt;/span> // å°† flag å‘½ä»¤è¡Œå‚æ•°æ³¨å†Œåˆ° pflag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pflag.Parse&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">_&lt;/span> &lt;span class="o">=&lt;/span> viper.BindPFlags&lt;span class="o">(&lt;/span>pflag.CommandLine&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt.Printf&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;username: %s\n&amp;#34;&lt;/span>, viper.Get&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go --username arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ä¸ä½¿ç”¨ flag æˆ– pflagï¼Œåˆ™ Viper è¿˜æä¾›äº† Go æ¥å£çš„å½¢å¼æ¥æ”¯æŒå…¶ä»– Flagsï¼Œå…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒ&lt;a class="link" href="https://github.com/spf13/viper#flag-interfaces" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡æ¡£&lt;/a>ã€‚&lt;/p>
&lt;h4 id="å‘½ä»¤è¡Œé€‰é¡¹">
&lt;a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e9%80%89%e9%a1%b9" class="header-anchor">#&lt;/a>
å‘½ä»¤è¡Œé€‰é¡¹
&lt;/h4>&lt;p>å¦‚æœä¸€ä¸ªé”®æ²¡æœ‰é€šè¿‡&lt;code>viper.Set&lt;/code>æ˜¾ç¤ºè®¾ç½®å€¼ï¼Œé‚£ä¹ˆè·å–æ—¶å°†å°è¯•ä»å‘½ä»¤è¡Œé€‰é¡¹ä¸­è¯»å–ã€‚ å¦‚æœæœ‰ï¼Œä¼˜å…ˆä½¿ç”¨ã€‚viper ä½¿ç”¨ pflag åº“æ¥è§£æé€‰é¡¹ã€‚ æˆ‘ä»¬é¦–å…ˆåœ¨&lt;code>init&lt;/code>æ–¹æ³•ä¸­å®šä¹‰é€‰é¡¹ï¼Œå¹¶ä¸”è°ƒç”¨&lt;code>viper.BindPFlags&lt;/code>ç»‘å®šé€‰é¡¹åˆ°é…ç½®ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">8381&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Redis port to connect&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»‘å®šå‘½ä»¤è¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindPFlags&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.toml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;log_level&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql ip: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql port: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql user: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.user&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql password: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.password&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql database: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.database&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis ip: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis port: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¯‘ã€è¿è¡Œç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go --redis.port &lt;span class="m">9381&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">awesome web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql ip: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql port: &lt;span class="m">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql user: dj
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql password: &lt;span class="m">123456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql database: awesome
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis ip: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis port: &lt;span class="m">9381&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚ä½•ä¸ä¼ å…¥é€‰é¡¹ï¼š&lt;/p>
&lt;p>å°†ä½¿ç”¨ç¯å¢ƒå˜é‡çš„é…ç½®ï¼Œæ²¡æœ‰ï¼Œåœ¨ä½¿ç”¨é…ç½®æ–‡ä»¶çš„é…ç½®ï¼Œæ²¡æœ‰ï¼Œåœ¨ä½¿ç”¨é»˜è®¤ï¼Œéƒ½æ²¡æœ‰ï¼Œä¸ºå¯¹åº”ç±»å‹çš„é›¶å€¼ã€‚&lt;/p>
&lt;p>&lt;strong>å°†ä½¿ç”¨é…ç½®æ–‡ä»¶çš„é…ç½®&lt;/strong>&lt;code>redis port: 7381&lt;/code>ï¼Œå¦‚æœé…ç½®æ–‡ä»¶æ²¡æœ‰é…ç½®ï¼Œæ‰ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚è¿™é‡Œæ²¡æœ‰é»˜è®¤å€¼ã€‚&lt;/p>
&lt;h3 id="ä»è¿œç¨‹-keyvalue-å­˜å‚¨è¯»å–é…ç½®">
&lt;a href="#%e4%bb%8e%e8%bf%9c%e7%a8%8b-keyvalue-%e5%ad%98%e5%82%a8%e8%af%bb%e5%8f%96%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
ä»è¿œç¨‹ key/value å­˜å‚¨è¯»å–é…ç½®
&lt;/h3>&lt;p>è¦åœ¨ Viper ä¸­å¯ç”¨è¿œç¨‹æ”¯æŒï¼Œéœ€è¦åŒ¿åå¯¼å…¥ &lt;code>viper/remote&lt;/code> åŒ…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">import _ &lt;span class="s2">&amp;#34;github.com/spf13/viper/remote&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Viper æ”¯æŒ etcdã€Consul ç­‰è¿œç¨‹ key/value å­˜å‚¨ï¼Œè¿™é‡Œä»¥ Consul ä¸ºä¾‹è¿›è¡Œè®²è§£ã€‚&lt;/p>
&lt;p>é¦–å…ˆéœ€è¦å‡†å¤‡ Consul ç¯å¢ƒï¼Œæœ€æ–¹ä¾¿å¿«æ·çš„æ–¹å¼å°±æ˜¯å¯åŠ¨ä¸€ä¸ª Docker å®¹å™¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ docker run &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 8500:8500 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 8600:8600/udp &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name&lt;span class="o">=&lt;/span>badger &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> consul agent -server -ui -node&lt;span class="o">=&lt;/span>server-1 -bootstrap-expect&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> -client&lt;span class="o">=&lt;/span>0.0.0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Docker å®¹å™¨å¯åŠ¨å¥½åï¼Œæµè§ˆå™¨è®¿é—® &lt;code>http://localhost:8500/&lt;/code>ï¼Œå³å¯è¿›å…¥ Consul æ§åˆ¶å°ï¼Œåœ¨ &lt;code>user/config&lt;/code> è·¯å¾„ä¸‹ç¼–å†™ YAML æ ¼å¼çš„é…ç½®ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/go%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93viper/viper.assets/image-20240505001230221.png"
width="1107"
height="693"
srcset="https://arlettebrook.github.io/p/go%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93viper/viper.assets/image-20240505001230221_hu2fe08c5fd266909738116a9dadd6ba88_51547_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/go%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93viper/viper.assets/image-20240505001230221_hu2fe08c5fd266909738116a9dadd6ba88_51547_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Consul Config"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;p>ä½¿ç”¨ Viper ä» Consul è¯»å–é…ç½®ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="s">&amp;#34;github.com/spf13/viper/remote&amp;#34;&lt;/span> &lt;span class="c1">// å¿…é¡»å¯¼å…¥ï¼Œæ‰èƒ½åŠ è½½è¿œç¨‹ key/value é…ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddRemoteProvider&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;consul&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;localhost:8500&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;user/config&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// è¿æ¥è¿œç¨‹ consul æœåŠ¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;YAML&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// æ˜¾å¼è®¾ç½®æ–‡ä»¶æ ¼å¼æ–‡ YAML
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadRemoteConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: jianghushinian
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.ip: 127.0.0.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>ç¬”è®°ï¼šå¦‚æœä½ æƒ³åœæ­¢é€šè¿‡ Docker å®‰è£…çš„ Consul å®¹å™¨ï¼Œåˆ™å¯ä»¥æ‰§è¡Œ &lt;code>docker stop badger&lt;/code> å‘½ä»¤ã€‚å¦‚æœéœ€è¦åˆ é™¤ï¼Œåˆ™å¯ä»¥æ‰§è¡Œ &lt;code>docker rm badger&lt;/code> å‘½ä»¤ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="ä»-viper-ä¸­è¯»å–é…ç½®å€¼">
&lt;a href="#%e4%bb%8e-viper-%e4%b8%ad%e8%af%bb%e5%8f%96%e9%85%8d%e7%bd%ae%e5%80%bc" class="header-anchor">#&lt;/a>
ä» Viper ä¸­è¯»å–é…ç½®å€¼
&lt;/h2>&lt;p>å‰æ–‡ä¸­æˆ‘ä»¬ä»‹ç»äº†å„ç§å°†é…ç½®è¯»å…¥ Viper çš„æŠ€å·§ï¼Œç°åœ¨è¯¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨è¿™äº›é…ç½®äº†ã€‚&lt;/p>
&lt;p>åœ¨ Viper ä¸­ï¼Œæœ‰å¦‚ä¸‹å‡ ç§æ–¹æ³•å¯ä»¥è·å–é…ç½®å€¼ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Get(key string) interface{}&lt;/code>ï¼šè·å–é…ç½®é¡¹ &lt;code>key&lt;/code> æ‰€å¯¹åº”çš„å€¼ï¼Œ&lt;code>key&lt;/code> ä¸åŒºåˆ†å¤§å°å†™ï¼Œè¿”å›æ¥å£ç±»å‹ã€‚&lt;/li>
&lt;li>&lt;code>Get&amp;lt;Type&amp;gt;(key string) &amp;lt;Type&amp;gt;&lt;/code>ï¼šè·å–æŒ‡å®šç±»å‹çš„é…ç½®å€¼ï¼Œ å¯ä»¥æ˜¯ Viper æ”¯æŒçš„ç±»å‹ï¼š&lt;code>GetBool&lt;/code>ã€&lt;code>GetFloat64&lt;/code>ã€&lt;code>GetInt&lt;/code>ã€&lt;code>GetIntSlice&lt;/code>ã€&lt;code>GetString&lt;/code>ã€&lt;code>GetStringMap&lt;/code>ã€&lt;code>GetStringMapString&lt;/code>ã€&lt;code>GetStringSlice&lt;/code>ã€&lt;code>GetTime&lt;/code>ã€&lt;code>GetDuration&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>AllSettings() map[string]interface{}&lt;/code>ï¼šè¿”å›æ‰€æœ‰é…ç½®ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œå¦‚æœä½¿ç”¨ç¯å¢ƒå˜é‡æŒ‡å®šé…ç½®ï¼Œåˆ™åªèƒ½è·å–åˆ°é€šè¿‡ &lt;code>BindEnv&lt;/code> ç»‘å®šçš„ç¯å¢ƒå˜é‡ï¼Œæ— æ³•è·å–åˆ°é€šè¿‡ &lt;code>AutomaticEnv&lt;/code> ç»‘å®šçš„ç¯å¢ƒå˜é‡ã€‚&lt;/li>
&lt;li>&lt;code>IsSet(key string) bool&lt;/code>ï¼šå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨ &lt;code>Get&lt;/code> æˆ– &lt;code>Get&amp;lt;Type&amp;gt;&lt;/code> è·å–é…ç½®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™æ¯ä¸ª &lt;code>Get&lt;/code> å‡½æ•°éƒ½ä¼šè¿”å›ä¸€ä¸ªé›¶å€¼ã€‚ä¸ºäº†æ£€æŸ¥ç»™å®šçš„é”®æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>IsSet&lt;/code> æ–¹æ³•ï¼Œå­˜åœ¨è¿”å› &lt;code>true&lt;/code>ï¼Œä¸å­˜åœ¨è¿”å› &lt;code>false&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="è®¿é—®åµŒå¥—çš„é”®">
&lt;a href="#%e8%ae%bf%e9%97%ae%e5%b5%8c%e5%a5%97%e7%9a%84%e9%94%ae" class="header-anchor">#&lt;/a>
è®¿é—®åµŒå¥—çš„é”®
&lt;/h3>&lt;p>æœ‰å¦‚ä¸‹é…ç½®æ–‡ä»¶ &lt;code>config.yaml&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arlettebrook&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">123456&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥é€šè¿‡ &lt;code>.&lt;/code> åˆ†éš”ç¬¦æ¥è®¿é—®åµŒå¥—å­—æ®µã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;åŠ è½½é…ç½®æ–‡ä»¶å¤±è´¥ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.port: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server: map&lt;span class="o">[&lt;/span>ip:127.0.0.1 port:8080&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.ip: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.port: &lt;span class="m">8080&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼Œé…ç½®ä¸­æœ¬å°±å­˜åœ¨ç€å« &lt;code>server.ip&lt;/code> çš„é”®ï¼Œé‚£ä¹ˆå®ƒä¼šé®è”½ &lt;code>server&lt;/code> å¯¹è±¡ä¸‹çš„ &lt;code>ip&lt;/code> é…ç½®é¡¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arlettebrook&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">123456&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">server.ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;åŠ è½½é…ç½®æ–‡ä»¶å‡ºé”™ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.port: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server: map&lt;span class="o">[&lt;/span>ip:127.0.0.1 port:8080&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.ip: 10.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.port: &lt;span class="m">8080&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>server.ip&lt;/code> æ‰“å°ç»“æœä¸º &lt;code>10.0.0.1&lt;/code>ï¼Œè€Œä¸å†æ˜¯ &lt;code>server&lt;/code> map ä¸­æ‰€å¯¹åº”çš„å€¼ &lt;code>127.0.0.1&lt;/code>ã€‚&lt;/p>
&lt;h3 id="æå–å­æ ‘">
&lt;a href="#%e6%8f%90%e5%8f%96%e5%ad%90%e6%a0%91" class="header-anchor">#&lt;/a>
æå–å­æ ‘
&lt;/h3>&lt;p>å½“ä½¿ç”¨ Viper è¯»å– &lt;code>config.yaml&lt;/code> é…ç½®æ–‡ä»¶åï¼Œ&lt;code>viper&lt;/code> å¯¹è±¡å°±åŒ…å«äº†æ‰€æœ‰é…ç½®ï¼Œå¹¶èƒ½é€šè¿‡ &lt;code>viper.Get(&amp;quot;server.ip&amp;quot;)&lt;/code> è·å–å­é…ç½®ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥å°†è¿™ä»½é…ç½®ç†è§£ä¸ºä¸€é¢—æ ‘å½¢ç»“æ„ï¼Œ&lt;code>viper&lt;/code> å¯¹è±¡å°±åŒ…å«äº†è¿™ä¸ªå®Œæ•´çš„æ ‘ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•è·å– &lt;code>server&lt;/code> å­æ ‘ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">srvCfg :&lt;span class="o">=&lt;/span> viper.Sub&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;server&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è·å– server å­æ ‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">srvCfg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¯»å–é…ç½®å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">srvCfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">srvCfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server.ip&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">port: &lt;span class="m">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.ip: 10.0.0.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œé”®æ²¡æœ‰å‡ºç°è¦†ç›–çš„æƒ…å†µ&lt;/p>
&lt;h3 id="ååºåˆ—åŒ–">
&lt;a href="#%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96" class="header-anchor">#&lt;/a>
ååºåˆ—åŒ–
&lt;/h3>&lt;p>Viper æä¾›äº† 2 ä¸ªæ–¹æ³•è¿›è¡Œååºåˆ—åŒ–æ“ä½œï¼Œä»¥æ­¤æ¥å®ç°å°†æ‰€æœ‰æˆ–ç‰¹å®šçš„å€¼è§£æåˆ°ç»“æ„ä½“ã€map ç­‰ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>Unmarshal(rawVal interface{}) : error&lt;/code>ï¼šååºåˆ—åŒ–æ‰€æœ‰é…ç½®é¡¹ã€‚&lt;/li>
&lt;li>&lt;code>UnmarshalKey(key string, rawVal interface{}) : error&lt;/code>ï¼šååºåˆ—åŒ–æŒ‡å®šé…ç½®é¡¹ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Username&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Password&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Viper æ”¯æŒåµŒå¥—ç»“æ„ä½“
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Server&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">cfg&lt;/span> &lt;span class="nx">Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unmarshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ååºåˆ—åŒ–é”™è¯¯ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">Password&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">UnmarshalKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Password&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Password&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ååºåˆ—åŒ–é”™è¯¯ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cfg: %+v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Password: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Password&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cfg: &lt;span class="o">{&lt;/span>Username:arlettebrook Password:123456 Server:&lt;span class="o">{&lt;/span>IP:10.0.0.1 Port:8080&lt;span class="o">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password: &lt;span class="m">123456&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœé…ç½®é¡¹çš„ &lt;code>key&lt;/code> æœ¬èº«å°±åŒ…å« &lt;code>.&lt;/code>ï¼Œåˆ™éœ€è¦ä¿®æ”¹åˆ†éš”ç¬¦ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Chart&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Values&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é»˜è®¤çš„é”®åˆ†éš”ç¬¦ä¸º `.`ï¼Œè¿™é‡Œå°†å…¶ä¿®æ”¹ä¸º `::`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewWithOptions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">KeyDelimiter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;::&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;chart::values&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;ingress&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;annotations&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;traefik.frontend.rule.type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;PathPrefix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;traefik.ingress.kubernetes.io/ssl-redirect&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">cfg&lt;/span> &lt;span class="nx">Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unmarshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cfg: %+v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cfg: &lt;span class="o">{&lt;/span>Chart:&lt;span class="o">{&lt;/span>Values:map&lt;span class="o">[&lt;/span>ingress:map&lt;span class="o">[&lt;/span>annotations:map&lt;span class="o">[&lt;/span>traefik.frontend.rule.type:PathPrefix traefik.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress.kubernetes.io/ssl-redirect:true&lt;span class="o">]]]}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„âš ï¸ï¼šViper åœ¨åå°ä½¿ç”¨ &lt;a class="link" href="https://github.com/mitchellh/mapstructure" target="_blank" rel="noopener"
>mapstructure&lt;/a> æ¥è§£æå€¼ï¼Œå…¶é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ &lt;code>mapstructure&lt;/code> tagsã€‚å½“æˆ‘ä»¬éœ€è¦å°† Viper è¯»å–çš„é…ç½®ååºåˆ—åˆ°ç»“æ„ä½“ä¸­æ—¶ï¼Œå¦‚æœå‡ºç°ç»“æ„ä½“å­—æ®µè·Ÿé…ç½®é¡¹ä¸åŒ¹é…ï¼Œåˆ™å¯ä»¥è®¾ç½® &lt;code>mapstructure&lt;/code> tags æ¥è§£å†³ã€‚&lt;/p>
&lt;/blockquote>
&lt;h4 id="unmarshal">
&lt;a href="#unmarshal" class="header-anchor">#&lt;/a>
&lt;code>Unmarshal&lt;/code>
&lt;/h4>&lt;p>viper æ”¯æŒå°†é…ç½®&lt;code>Unmarshal&lt;/code>åˆ°ä¸€ä¸ªç»“æ„ä½“ä¸­ï¼Œä¸ºç»“æ„ä½“ä¸­çš„å¯¹åº”å­—æ®µèµ‹å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AppName&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LogLevel&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MySQL&lt;/span> &lt;span class="nx">MySQLConfig&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Redis&lt;/span> &lt;span class="nx">RedisConfig&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">MySQLConfig&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">User&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Password&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Database&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">RedisConfig&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;toml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddConfigPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;read config failed: %v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="nx">Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unmarshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ååºåˆ—åŒ–å¤±è´¥ï¼š%v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MySQL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¯‘ï¼Œè¿è¡Œç¨‹åºï¼Œè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>127.0.0.1 &lt;span class="m">3306&lt;/span> dj &lt;span class="m">123456&lt;/span> awesome&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åºåˆ—åŒ–">
&lt;a href="#%e5%ba%8f%e5%88%97%e5%8c%96" class="header-anchor">#&lt;/a>
åºåˆ—åŒ–
&lt;/h3>&lt;p>ä¸€ä¸ªå¥½ç”¨çš„é…ç½®åŒ…ä¸ä»…èƒ½å¤Ÿæ”¯æŒååºåˆ—åŒ–æ“ä½œï¼Œè¿˜è¦æ”¯æŒåºåˆ—åŒ–æ“ä½œã€‚Viper æ”¯æŒå°†é…ç½®åºåˆ—åŒ–æˆå­—ç¬¦ä¸²ï¼Œæˆ–ç›´æ¥åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;h4 id="åºåˆ—åŒ–æˆå­—ç¬¦ä¸²">
&lt;a href="#%e5%ba%8f%e5%88%97%e5%8c%96%e6%88%90%e5%ad%97%e7%ac%a6%e4%b8%b2" class="header-anchor">#&lt;/a>
åºåˆ—åŒ–æˆå­—ç¬¦ä¸²
&lt;/h4>&lt;p>æˆ‘ä»¬å¯ä»¥å°†å…¨éƒ¨é…ç½®åºåˆ—åŒ–é…ç½®ä¸º YAML æ ¼å¼å­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/yaml.v3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åºåˆ—åŒ–é…ç½®ä¸º YAML æ ¼å¼å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">yamlStringSettings&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AllSettings&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// è·å–å…¨éƒ¨é…ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">bs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">yaml&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Marshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// æ ¹æ®éœ€æ±‚åºåˆ—åŒ–æˆä¸åŒæ ¼å¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">yamlStringSettings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password: &lt;span class="m">123456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: 10.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: &lt;span class="m">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å†™å…¥é…ç½®æ–‡ä»¶">
&lt;a href="#%e5%86%99%e5%85%a5%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="header-anchor">#&lt;/a>
å†™å…¥é…ç½®æ–‡ä»¶
&lt;/h4>&lt;p>Viper è¿˜æ”¯æŒç›´æ¥å°†é…ç½®åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­ï¼Œæä¾›äº†å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>WriteConfig&lt;/code>ï¼šå°†å½“å‰çš„ &lt;code>viper&lt;/code> é…ç½®å†™å…¥é¢„å®šä¹‰è·¯å¾„ã€‚å¦‚æœæ²¡æœ‰é¢„å®šä¹‰è·¯å¾„ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚å¦‚æœé¢„å®šä¹‰è·¯å¾„å·²ç»å­˜åœ¨é…ç½®æ–‡ä»¶ï¼Œå°†ä¼šè¢«è¦†ç›–ã€‚&lt;/li>
&lt;li>&lt;code>SafeWriteConfig&lt;/code>ï¼šå°†å½“å‰çš„ &lt;code>viper&lt;/code> é…ç½®å†™å…¥é¢„å®šä¹‰è·¯å¾„ã€‚å¦‚æœæ²¡æœ‰é¢„å®šä¹‰è·¯å¾„ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚å¦‚æœé¢„å®šä¹‰è·¯å¾„å·²ç»å­˜åœ¨é…ç½®æ–‡ä»¶ï¼Œä¸ä¼šè¦†ç›–ï¼Œä¼šæŠ¥é”™ã€‚&lt;/li>
&lt;li>&lt;code>WriteConfigAs&lt;/code>ï¼š å°†å½“å‰çš„ &lt;code>viper&lt;/code> é…ç½®å†™å…¥ç»™å®šçš„æ–‡ä»¶è·¯å¾„ã€‚å¦‚æœç»™å®šçš„æ–‡ä»¶è·¯å¾„å·²ç»å­˜åœ¨é…ç½®æ–‡ä»¶ï¼Œå°†ä¼šè¢«è¦†ç›–ã€‚&lt;/li>
&lt;li>&lt;code>SafeWriteConfigAs&lt;/code>ï¼šå°†å½“å‰çš„ &lt;code>viper&lt;/code> é…ç½®å†™å…¥ç»™å®šçš„æ–‡ä»¶è·¯å¾„ã€‚å¦‚æœç»™å®šçš„æ–‡ä»¶è·¯å¾„å·²ç»å­˜åœ¨é…ç½®æ–‡ä»¶ï¼Œä¸ä¼šè¦†ç›–ï¼Œä¼šæŠ¥é”™ã€‚&lt;/li>
&lt;li>æ³¨æ„ä¿å­˜çš„æ–‡ä»¶ç±»å‹è¦ä¸é…ç½®ç±»å‹ä¸€ç›´ï¼Œå¦åˆ™ä¼šæŠ¥é”™&lt;code>config type could not be determined for XXX&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// å°†å½“å‰é…ç½®å†™å…¥ç”± `viper.AddConfigPath()` å’Œ `viper.SetConfigFile()` è®¾ç½®çš„é¢„å®šä¹‰è·¯å¾„ã€‚ç±»å‹å°±ä¸ºé…ç½®ç±»å‹ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SafeWriteConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// å°†ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒå·²ç»è¢«å†™å…¥äº†ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteConfigAs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./cfg.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// æ–‡ä»¶ç±»å‹è¦ä¸é…ç½®ç±»å‹ä¸€ç›´ï¼Œå¦åˆ™æŠ¥é”™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SafeWriteConfigAs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./cfg.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å°†ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒå·²ç»è¢«å†™å…¥äº†ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SafeWriteConfigAs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./cfg/cfg.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gopkg.in/yaml.v3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åºåˆ—åŒ–é…ç½®ä¸º YAML æ ¼å¼å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">yamlStringSettings&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AllSettings&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// è·å–å…¨éƒ¨é…ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">bs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">yaml&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Marshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// æ ¹æ®éœ€æ±‚åºåˆ—åŒ–æˆä¸åŒæ ¼å¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">yamlStringSettings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;å“ˆå“ˆå“ˆ&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WriteConfigAs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./cfg.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ä¿®æ”¹åçš„username:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password: &lt;span class="m">123456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: 10.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: &lt;span class="m">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">username: arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä¿®æ”¹åçš„username: å“ˆå“ˆå“ˆ
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="ä¿å­˜é…ç½®">
&lt;a href="#%e4%bf%9d%e5%ad%98%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
ä¿å­˜é…ç½®
&lt;/h5>&lt;p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦å°†ç¨‹åºä¸­ç”Ÿæˆçš„é…ç½®ï¼Œæˆ–è€…æ‰€åšçš„ä¿®æ”¹ä¿å­˜ä¸‹æ¥ã€‚viper æä¾›äº†æ¥å£ï¼&lt;/p>
&lt;ul>
&lt;li>&lt;code>WriteConfig&lt;/code>ï¼šå°†å½“å‰çš„ viper é…ç½®å†™åˆ°é¢„å®šä¹‰è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰é¢„å®šä¹‰è·¯å¾„ï¼Œè¿”å›é”™è¯¯ã€‚å°†ä¼šè¦†ç›–å½“å‰é…ç½®ï¼›&lt;/li>
&lt;li>&lt;code>SafeWriteConfig&lt;/code>ï¼šä¸ä¸Šé¢åŠŸèƒ½ä¸€æ ·ï¼Œä½†æ˜¯å¦‚æœé…ç½®æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä¸è¦†ç›–ï¼›&lt;/li>
&lt;li>&lt;code>WriteConfigAs&lt;/code>ï¼šä¿å­˜é…ç½®åˆ°æŒ‡å®šè·¯å¾„ï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¦†ç›–ï¼›&lt;/li>
&lt;li>&lt;code>SafeWriteConfig&lt;/code>ï¼šä¸ä¸Šé¢åŠŸèƒ½ä¸€æ ·ï¼Œä½†æ˜¯å…¥è‚¡é…ç½®æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä¸è¦†ç›–ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ç¨‹åºç”Ÿæˆä¸€ä¸ª&lt;code>config.toml&lt;/code>é…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;toml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddConfigPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;awesome web&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;log_level&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;DEBUG&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3306&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;root&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.password&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;123456&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mysql.database&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;awesome&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redis.port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6381&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SafeWriteConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;write config failed: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="å¤šå®ä¾‹å¯¹è±¡">
&lt;a href="#%e5%a4%9a%e5%ae%9e%e4%be%8b%e5%af%b9%e8%b1%a1" class="header-anchor">#&lt;/a>
å¤šå®ä¾‹å¯¹è±¡
&lt;/h2>&lt;p>ç”±äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºéƒ½å¸Œæœ›ä½¿ç”¨å•ä¸ªé…ç½®å®ä¾‹å¯¹è±¡æ¥ç®¡ç†é…ç½®ï¼Œå› æ­¤ viper åŒ…é»˜è®¤æä¾›äº†è¿™ä¸€åŠŸèƒ½ï¼Œå®ƒç±»ä¼¼äºä¸€ä¸ªå•ä¾‹ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ Viper æ—¶ä¸éœ€è¦é…ç½®æˆ–åˆå§‹åŒ–ï¼ŒViper å®ç°äº†å¼€ç®±å³ç”¨çš„æ•ˆæœã€‚&lt;/p>
&lt;p>åœ¨ä¸Šé¢çš„æ‰€æœ‰ç¤ºä¾‹ä¸­ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä»¥å•ä¾‹æ–¹å¼ä½¿ç”¨ Viperã€‚æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºå¤šä¸ªä¸åŒçš„ Viper å®ä¾‹ä»¥ä¾›åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±å•ç‹¬çš„ä¸€ç»„é…ç½®å’Œå€¼ï¼Œå¹¶ä¸”å®ƒä»¬å¯ä»¥ä»ä¸åŒçš„é…ç½®æ–‡ä»¶ã€key/value å­˜å‚¨ç­‰ä½ç½®è¯»å–é…ç½®ä¿¡æ¯ã€‚&lt;/p>
&lt;p>Viper åŒ…æ”¯æŒçš„æ‰€æœ‰åŠŸèƒ½éƒ½è¢«é•œåƒä¸º &lt;code>viper&lt;/code> å¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼Œè¿™ç§è®¾è®¡æ€è·¯åœ¨ Go è¯­è¨€ä¸­éå¸¸å¸¸è§ï¼Œå¦‚æ ‡å‡†åº“ä¸­çš„ log åŒ…ã€‚&lt;/p>
&lt;p>å¤šå®ä¾‹ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">x&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">y&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;x.username: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">y&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;å¤šå®ä¾‹å¯¹è±¡&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;y.username: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;é»˜è®¤å•å®ä¾‹å¯¹è±¡&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;viper.username: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™é‡Œï¼Œæˆ‘åˆ›å»ºäº†ä¸¤ä¸ª Viper å®ä¾‹ &lt;code>x&lt;/code> å’Œ &lt;code>y&lt;/code>ï¼Œå®ƒä»¬åˆ†åˆ«ä»é…ç½®æ–‡ä»¶è¯»å–é…ç½®å’Œé€šè¿‡é»˜è®¤å€¼çš„æ–¹å¼è®¾ç½®é…ç½®ï¼Œä½¿ç”¨æ—¶äº’ä¸å½±å“ï¼Œä½¿ç”¨è€…å¯ä»¥è‡ªè¡Œç®¡ç†å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p>
&lt;p>æ‰§è¡Œä»¥ä¸Šç¤ºä¾‹ä»£ç å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x.username: arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">y.username: å¤šå®ä¾‹å¯¹è±¡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">viper.username: é»˜è®¤å•å®ä¾‹å¯¹è±¡
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä½¿ç”¨å»ºè®®">
&lt;a href="#%e4%bd%bf%e7%94%a8%e5%bb%ba%e8%ae%ae" class="header-anchor">#&lt;/a>
ä½¿ç”¨å»ºè®®
&lt;/h2>&lt;p>Viper æä¾›äº†ä¼—å¤šæ–¹æ³•å¯ä»¥ç®¡ç†é…ç½®ï¼Œåœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä½¿ç”¨ã€‚å¦‚æœæ˜¯å°å‹é¡¹ç›®ï¼Œæ¨èç›´æ¥ä½¿ç”¨ &lt;code>viper&lt;/code> å®ä¾‹ç®¡ç†é…ç½®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;read config file error: %s \n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç›‘æ§é…ç½®æ–‡ä»¶å˜åŒ–
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WatchConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// use config...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæ˜¯ä¸­å¤§å‹é¡¹ç›®ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ªç”¨æ¥è®°å½•é…ç½®çš„ç»“æ„ä½“ï¼Œå¯ä»¥ä½¿ç”¨ Viper å°†é…ç½®ååºåˆ—åŒ–åˆ°ç»“æ„ä½“ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/fsnotify/fsnotify&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/viper&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Username&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Password&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Viper æ”¯æŒåµŒå¥—ç»“æ„ä½“
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Server&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IP&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./config.yaml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;read config file error: %s \n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å°†é…ç½®ä¿¡æ¯ååºåˆ—åŒ–åˆ°ç»“æ„ä½“ä¸­
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">var&lt;/span> &lt;span class="nx">cfg&lt;/span> &lt;span class="nx">Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unmarshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unmarshal config error: %s \n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ³¨å†Œæ¯æ¬¡é…ç½®æ–‡ä»¶å‘ç”Ÿå˜æ›´åéƒ½ä¼šè°ƒç”¨çš„å›è°ƒå‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OnConfigChange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="nx">fsnotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¯æ¬¡é…ç½®æ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦é‡æ–°å°†å…¶ååºåˆ—åŒ–åˆ°ç»“æ„ä½“ä¸­
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unmarshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;unmarshal config error: %s \n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç›‘æ§é…ç½®æ–‡ä»¶å˜åŒ–
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WatchConfig&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// use config...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Username&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›´æ¥ä½¿ç”¨ &lt;code>viper&lt;/code> å®ä¾‹ç®¡ç†é…ç½®çš„æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬é€šè¿‡ &lt;code>viper.WatchConfig()&lt;/code> ç›‘å¬äº†é…ç½®æ–‡ä»¶å˜åŒ–ï¼Œå¦‚æœé…ç½®å˜åŒ–ï¼Œåˆ™å˜åŒ–ä¼šç«‹åˆ»ä½“ç°åœ¨ &lt;code>viper&lt;/code> å®ä¾‹å¯¹è±¡ä¸Šï¼Œä¸‹æ¬¡é€šè¿‡ &lt;code>viper.Get()&lt;/code> è·å–çš„é…ç½®å³ä¸ºæœ€æ–°é…ç½®ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨ç»“æ„ä½“ç®¡ç†é…ç½®æ—¶ï¼Œ&lt;code>viper&lt;/code> å®ä¾‹å¯¹è±¡å˜åŒ–äº†ï¼Œè®°å½•é…ç½®çš„ç»“æ„ä½“ &lt;code>Config&lt;/code> æ˜¯ä¸ä¼šè‡ªåŠ¨æ›´æ–°çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ &lt;code>viper.OnConfigChange&lt;/code> åœ¨å›è°ƒå‡½æ•°ä¸­é‡æ–°å°†å˜æ›´åçš„é…ç½®ååºåˆ—åŒ–åˆ° &lt;code>Config&lt;/code> ä¸­ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡æ¢è®¨ Viper çš„å„ç§ç”¨æ³•å’Œä½¿ç”¨åœºæ™¯ï¼Œé¦–å…ˆè¯´æ˜äº†ä¸ºä»€ä¹ˆä½¿ç”¨ Viperï¼Œå®ƒçš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆã€‚&lt;/p>
&lt;p>æ¥ç€è®²è§£äº† Viper åŒ…ä¸­æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªåŠŸèƒ½ï¼šå¦‚ä½•æŠŠé…ç½®å€¼è¯»å…¥ Viper å’Œä» Viper ä¸­è¯»å–é…ç½®å€¼ã€‚Viper å¯¹ç€ä¸¤ä¸ªåŠŸèƒ½éƒ½æä¾›äº†éå¸¸å¤šçš„æ–¹æ³•æ¥æ”¯æŒã€‚&lt;/p>
&lt;p>ç„¶ååˆä»‹ç»äº†å¦‚ä½•ç”¨ Viper æ¥ç®¡ç†å¤šä»½é…ç½®ï¼Œå³ä½¿ç”¨å¤šå®ä¾‹ã€‚&lt;/p>
&lt;p>å¯¹äº Viper çš„ä½¿ç”¨æˆ‘ä¹Ÿç»™å‡ºäº†è‡ªå·±çš„å»ºè®®ï¼Œé’ˆå¯¹å°å‹é¡¹ç›®ï¼Œæ¨èç›´æ¥ä½¿ç”¨ &lt;code>viper&lt;/code> å®ä¾‹ç®¡ç†é…ç½®ï¼Œå¦‚æœæ˜¯ä¸­å¤§å‹é¡¹ç›®ï¼Œåˆ™æ¨èä½¿ç”¨ç»“æ„ä½“æ¥ç®¡ç†é…ç½®ã€‚&lt;/p>
&lt;p>æœ€åï¼ŒViper æ­£åœ¨å‘ç€ v2 ç‰ˆæœ¬è¿ˆè¿›ï¼Œæ¬¢è¿è¯»è€…åœ¨&lt;a class="link" href="https://docs.google.com/forms/d/e/1FAIpQLSeesGIS8Rya-iOXmXjUst8sT3NMSmdclBPa-aJT3HkPjDWnng/viewform" target="_blank" rel="noopener"
>è¿™é‡Œ&lt;/a>åˆ†äº«æƒ³æ³•ï¼Œä¹ŸæœŸå¾…ä¸‹æ¬¡æ¥å†™ä¸€ç¯‡ v2 ç‰ˆæœ¬çš„æ–‡ç« ä¸è¯»è€…ä¸€èµ·å­¦ä¹ è¿›æ­¥ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>Viper æºç ä»“åº“ï¼š &lt;a class="link" href="https://github.com/spf13/viper" target="_blank" rel="noopener"
>https://github.com/spf13/viper&lt;/a>&lt;/li>
&lt;li>æ¬è¿ï¼š&lt;a class="link" href="https://jianghushinian.cn/2023/04/25/how-to-use-viper-for-configuration-management-in-go/" target="_blank" rel="noopener"
>åœ¨ Go ä¸­å¦‚ä½•ä½¿ç”¨ Viper æ¥ç®¡ç†é…ç½®&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2020/01/18/godailylib/viper/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ viper&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Goæ„å»ºå‘½ä»¤è¡Œç¨‹åºä¹‹ç¬¬ä¸‰æ–¹åº“cobra</title><link>https://arlettebrook.github.io/p/go%E6%9E%84%E5%BB%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93cobra/</link><pubDate>Thu, 02 May 2024 23:33:49 +0800</pubDate><guid>https://arlettebrook.github.io/p/go%E6%9E%84%E5%BB%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93cobra/</guid><description>&lt;hr>
&lt;h2 id="ä»‹ç»">
&lt;a href="#%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
ä»‹ç»
&lt;/h2>&lt;p>&lt;a class="link" href="http://github.com/spf13/cobra" target="_blank" rel="noopener"
>Cobra&lt;/a>æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åºåº“ï¼Œå¯ä»¥ç”¨æ¥ç¼–å†™å‘½ä»¤è¡Œç¨‹åºã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿæä¾›äº†ä¸€ä¸ªè„šæ‰‹æ¶ï¼Œ ç”¨äºç”ŸæˆåŸºäº cobra çš„åº”ç”¨ç¨‹åºæ¡†æ¶ã€‚éå¸¸å¤šçŸ¥åçš„å¼€æºé¡¹ç›®ä½¿ç”¨äº† cobra åº“æ„å»ºå‘½ä»¤è¡Œï¼Œå¦‚&lt;a class="link" href="http://kubernetes.io/" target="_blank" rel="noopener"
>Kubernetes&lt;/a>ã€&lt;a class="link" href="http://gohugo.io/" target="_blank" rel="noopener"
>Hugo&lt;/a>ã€&lt;a class="link" href="https://github.com/coreos/etcd" target="_blank" rel="noopener"
>etcd&lt;/a>ç­‰ç­‰ç­‰ç­‰ã€‚ æœ¬æ–‡ä»‹ç» cobra åº“çš„åŸºæœ¬ä½¿ç”¨å’Œä¸€äº›æœ‰è¶£çš„ç‰¹æ€§ã€‚&lt;/p>
&lt;p>å…³äºä½œè€…&lt;a class="link" href="http://github.com/spf13" target="_blank" rel="noopener"
>spf13&lt;/a>ï¼Œè¿™é‡Œå¤šè¯´ä¸¤å¥ã€‚spf13 å¼€æºä¸å°‘é¡¹ç›®ï¼Œè€Œä¸”ä»–çš„å¼€æºé¡¹ç›®è´¨é‡éƒ½æ¯”è¾ƒé«˜ã€‚ ç›¸ä¿¡ä½¿ç”¨è¿‡ vim çš„éƒ½çŸ¥é“&lt;a class="link" href="https://github.com/spf13/spf13-vim" target="_blank" rel="noopener"
>spf13-vim&lt;/a>ï¼Œå·ç§° vim ç»ˆæé…ç½®ã€‚ å¯ä»¥ä¸€é”®é…ç½®ï¼Œå¯¹äºæˆ‘è¿™æ ·çš„æ‡’äººæ¥è¯´ç»å¯¹æ˜¯ç¦éŸ³ã€‚ä»–çš„&lt;a class="link" href="https://github.com/spf13/viper" target="_blank" rel="noopener"
>viper&lt;/a>æ˜¯ä¸€ä¸ªå®Œæ•´çš„é…ç½®è§£å†³æ–¹æ¡ˆã€‚ å®Œç¾æ”¯æŒ JSON/TOML/YAML/HCL/envfile/Java properties é…ç½®æ–‡ä»¶ç­‰æ ¼å¼ï¼Œè¿˜æœ‰ä¸€äº›æ¯”è¾ƒå®ç”¨çš„ç‰¹æ€§ï¼Œå¦‚é…ç½®çƒ­æ›´æ–°ã€å¤šæŸ¥æ‰¾ç›®å½•ã€é…ç½®ä¿å­˜ç­‰ã€‚ è¿˜æœ‰éå¸¸ç«çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨&lt;a class="link" href="https://gohugo.io/" target="_blank" rel="noopener"
>hugo&lt;/a>ä¹Ÿæ˜¯ä»–çš„ä½œå“ã€‚&lt;/p>
&lt;p>Cobra æ˜¯ä¸€ä¸ª Go è¯­è¨€å¼€å‘çš„å‘½ä»¤è¡Œï¼ˆCLIï¼‰æ¡†æ¶ï¼Œå®ƒæä¾›äº†ç®€æ´ã€çµæ´»ä¸”å¼ºå¤§çš„æ–¹å¼æ¥åˆ›å»ºå‘½ä»¤è¡Œç¨‹åºã€‚å®ƒåŒ…å«ä¸€ä¸ªç”¨äºåˆ›å»ºå‘½ä»¤è¡Œç¨‹åºçš„åº“ï¼ˆCobra åº“ï¼‰ï¼Œä»¥åŠä¸€ä¸ªç”¨äºå¿«é€Ÿç”ŸæˆåŸºäº Cobra åº“çš„å‘½ä»¤è¡Œç¨‹åºå·¥å…·ï¼ˆCobra å‘½ä»¤ï¼‰ã€‚Cobra æ˜¯ç”± Go å›¢é˜Ÿæˆå‘˜ &lt;a class="link" href="https://spf13.com/" target="_blank" rel="noopener"
>spf13&lt;/a> ä¸º &lt;a class="link" href="https://gohugo.io/" target="_blank" rel="noopener"
>Hugo&lt;/a> é¡¹ç›®åˆ›å»ºçš„ï¼Œå¹¶å·²è¢«è®¸å¤šæµè¡Œçš„ Go é¡¹ç›®æ‰€é‡‡ç”¨ï¼Œå¦‚ Kubernetesã€Helmã€Docker (distribution)ã€Etcd ç­‰ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ¦‚å¿µ">
&lt;a href="#%e6%a6%82%e5%bf%b5" class="header-anchor">#&lt;/a>
æ¦‚å¿µ
&lt;/h2>&lt;p>Cobra å»ºç«‹åœ¨å‘½ä»¤ã€å‚æ•°å’Œæ ‡å¿—è¿™ä¸‰ä¸ªç»“æ„ä¹‹ä¸Šã€‚è¦ä½¿ç”¨ Cobra ç¼–å†™ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åºï¼Œéœ€è¦æ˜ç¡®è¿™ä¸‰ä¸ªæ¦‚å¿µã€‚&lt;/p>
&lt;ul>
&lt;li>å‘½ä»¤ï¼ˆCOMMANDï¼‰ï¼šå‘½ä»¤è¡¨ç¤ºè¦æ‰§è¡Œçš„æ“ä½œã€‚&lt;/li>
&lt;li>å‚æ•°ï¼ˆARGï¼‰ï¼šæ˜¯å‘½ä»¤çš„å‚æ•°ï¼Œä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºæ“ä½œçš„å¯¹è±¡ã€‚&lt;/li>
&lt;li>æ ‡å¿—ï¼ˆFLAGï¼‰ï¼šæ˜¯å‘½ä»¤çš„ä¿®é¥°ï¼Œå¯ä»¥è°ƒæ•´æ“ä½œçš„è¡Œä¸ºã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä¸ªå¥½çš„å‘½ä»¤è¡Œç¨‹åºåœ¨ä½¿ç”¨æ—¶è¯»èµ·æ¥åƒå¥å­ï¼Œç”¨æˆ·ä¼šè‡ªç„¶çš„ç†è§£å¹¶çŸ¥é“å¦‚ä½•ä½¿ç”¨è¯¥ç¨‹åºã€‚&lt;/p>
&lt;p>è¦ç¼–å†™ä¸€ä¸ªå¥½çš„å‘½ä»¤è¡Œç¨‹åºï¼Œéœ€è¦éµå¾ªçš„æ¨¡å¼æ˜¯ &lt;code>APPNAME VERB NOUN --ADJECTIVE&lt;/code> æˆ– &lt;code>APPNAME COMMAND ARG --FLAG&lt;/code>ã€‚&lt;/p>
&lt;p>åœ¨è¿™é‡Œ &lt;code>VERB&lt;/code> ä»£è¡¨åŠ¨è¯ï¼Œ&lt;code>NOUN&lt;/code> ä»£è¡¨åè¯ï¼Œ&lt;code>ADJECTIVE&lt;/code> ä»£è¡¨å½¢å®¹è¯ã€‚&lt;/p>
&lt;p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç°å®ä¸–ç•Œä¸­å¥½çš„å‘½ä»¤è¡Œç¨‹åºçš„ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ hugo server --port&lt;span class="o">=&lt;/span>&lt;span class="m">1313&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œ&lt;code>server&lt;/code> æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼ˆå­å‘½ä»¤ï¼‰ï¼Œ&lt;code>port&lt;/code> æ˜¯ä¸€ä¸ªæ ‡å¿—ï¼ˆ&lt;code>1313&lt;/code> æ˜¯æ ‡å¿—çš„å‚æ•°ï¼Œä½†ä¸æ˜¯å‘½ä»¤çš„å‚æ•° ARGï¼‰ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ª &lt;code>git&lt;/code> å‘½ä»¤çš„ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ git clone URL --bare
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œ&lt;code>clone&lt;/code> æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼ˆå­å‘½ä»¤ï¼‰ï¼Œ&lt;code>URL&lt;/code> æ˜¯å‘½ä»¤çš„å‚æ•°ï¼Œ&lt;code>bare&lt;/code> æ˜¯æ ‡å¿—ã€‚&lt;/p>
&lt;h2 id="ç‰¹æ€§">
&lt;a href="#%e7%89%b9%e6%80%a7" class="header-anchor">#&lt;/a>
ç‰¹æ€§
&lt;/h2>&lt;p>cobra æä¾›éå¸¸ä¸°å¯Œçš„åŠŸèƒ½ï¼š&lt;/p>
&lt;ul>
&lt;li>è½»æ¾æ”¯æŒå­å‘½ä»¤ï¼Œå¦‚&lt;code>app server&lt;/code>ï¼Œ&lt;code>app fetch&lt;/code>ç­‰ï¼›&lt;/li>
&lt;li>å®Œå…¨å…¼å®¹ POSIX é€‰é¡¹ï¼ˆåŒ…æ‹¬çŸ­ã€é•¿é€‰é¡¹ï¼‰ï¼›&lt;/li>
&lt;li>åµŒå¥—å­å‘½ä»¤ï¼›&lt;/li>
&lt;li>å…¨å±€ã€æœ¬åœ°å±‚çº§é€‰é¡¹ã€‚å¯ä»¥åœ¨å¤šå¤„è®¾ç½®é€‰é¡¹ï¼ŒæŒ‰ç…§ä¸€å®šçš„é¡ºåºå–ç”¨ï¼›&lt;/li>
&lt;li>ä½¿ç”¨è„šæ‰‹æ¶è½»æ¾ç”Ÿæˆç¨‹åºæ¡†æ¶å’Œå‘½ä»¤ã€‚&lt;/li>
&lt;li>ç­‰ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>è¦ä½¿ç”¨ Cobra åˆ›å»ºå‘½ä»¤è¡Œç¨‹åºï¼Œéœ€è¦å…ˆé€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œä¸‹è½½å¹¶æ·»åŠ åˆ°é¡¹ç›®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">go get -u github.com/spf13/cobra@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£…å¥½åï¼Œå°±å¯ä»¥åƒå…¶ä»– Go è¯­è¨€åº“ä¸€æ ·å¯¼å…¥ Cobra åŒ…å¹¶ä½¿ç”¨äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/spf13/cobra&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åˆ›å»ºä¸€ä¸ªå‘½ä»¤">
&lt;a href="#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
åˆ›å»ºä¸€ä¸ªå‘½ä»¤
&lt;/h3>&lt;p>å‡è®¾æˆ‘ä»¬è¦åˆ›å»ºçš„å‘½ä»¤è¡Œç¨‹åºå«ä½œ &lt;code>hugo&lt;/code>ï¼Œå¯ä»¥ç¼–å†™å¦‚ä¸‹ä»£ç åˆ›å»ºä¸€ä¸ªå‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// hugo/cmd/root.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">rootCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;hugo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Short&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Hugo is a very fast static site generator&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Long&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">`A Fast and Flexible Static Site Generator built with
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> love by spf13 and friends in Go.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> Complete documentation is available at https://gohugo.io`&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;run hugo...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Execute&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>cobra.Command&lt;/code> æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œä»£è¡¨ä¸€ä¸ªå‘½ä»¤ï¼Œå…¶å„ä¸ªå±æ€§å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;code>Use&lt;/code> æ˜¯å‘½ä»¤çš„åç§°ã€‚æŒ‡å®šä½¿ç”¨ä¿¡æ¯ï¼Œå³å‘½ä»¤æ€ä¹ˆè¢«è°ƒç”¨ï¼Œæ ¼å¼ä¸º&lt;code>name arg1 [arg2]&lt;/code>ã€‚&lt;code>name&lt;/code>ä¸ºå‘½ä»¤åï¼Œåé¢çš„&lt;code>arg1&lt;/code>ä¸ºå¿…å¡«å‚æ•°ï¼Œ&lt;code>arg3&lt;/code>ä¸ºå¯é€‰å‚æ•°ï¼Œå‚æ•°å¯ä»¥å¤šä¸ªã€‚å‚æ•°ä¸€èˆ¬ç”¨åœ¨å­å‘½ä»¤ä¸Šã€‚&lt;/p>
&lt;p>&lt;code>Short&lt;/code> ä»£è¡¨å½“å‰å‘½ä»¤çš„ç®€çŸ­æè¿°ã€‚&lt;/p>
&lt;p>&lt;code>Long&lt;/code> è¡¨ç¤ºå½“å‰å‘½ä»¤çš„å®Œæ•´æè¿°ã€‚&lt;/p>
&lt;p>&lt;code>Run&lt;/code> å±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“æ‰§è¡Œå‘½ä»¤æ—¶ä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚&lt;/p>
&lt;p>&lt;code>rootCmd.Execute()&lt;/code> æ˜¯å‘½ä»¤çš„æ‰§è¡Œå…¥å£ï¼Œå…¶å†…éƒ¨ä¼šè§£æ &lt;code>os.Args[1:]&lt;/code> å‚æ•°åˆ—è¡¨ï¼ˆé»˜è®¤æƒ…å†µä¸‹æ˜¯è¿™æ ·ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ &lt;code>Command.SetArgs&lt;/code> æ–¹æ³•è®¾ç½®å‚æ•°ï¼‰ï¼Œç„¶åéå†å‘½ä»¤æ ‘ï¼Œä¸ºå‘½ä»¤æ‰¾åˆ°åˆé€‚çš„åŒ¹é…é¡¹å’Œå¯¹åº”çš„æ ‡å¿—ã€‚&lt;/p>
&lt;h3 id="åˆ›å»º-maingo">
&lt;a href="#%e5%88%9b%e5%bb%ba-maingo" class="header-anchor">#&lt;/a>
åˆ›å»º &lt;code>main.go&lt;/code>
&lt;/h3>&lt;p>æŒ‰ç…§ç¼–å†™ Go ç¨‹åºçš„æƒ¯ä¾‹ï¼Œæˆ‘ä»¬è¦ä¸º &lt;code>hugo&lt;/code> ç¨‹åºç¼–å†™ä¸€ä¸ª &lt;code>main.go&lt;/code> æ–‡ä»¶ï¼Œä½œä¸ºç¨‹åºçš„å¯åŠ¨å…¥å£ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// hugo/main.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;hugo/cmd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>main.go&lt;/code> ä»£ç å®ç°éå¸¸ç®€å•ï¼Œåªåœ¨ &lt;code>main&lt;/code> å‡½æ•°ä¸­è°ƒç”¨äº† &lt;code>cmd.Execute()&lt;/code> å‡½æ•°ï¼Œæ¥æ‰§è¡Œå‘½ä»¤ã€‚&lt;/p>
&lt;h3 id="ç¼–è¯‘å¹¶è¿è¡Œå‘½ä»¤">
&lt;a href="#%e7%bc%96%e8%af%91%e5%b9%b6%e8%bf%90%e8%a1%8c%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
ç¼–è¯‘å¹¶è¿è¡Œå‘½ä»¤
&lt;/h3>&lt;p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–è¯‘å¹¶è¿è¡Œè¿™ä¸ªå‘½ä»¤è¡Œç¨‹åºäº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go build -o hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ‰§è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">run hugo...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>ç¬”è®°ï¼šç¤ºä¾‹ä»£ç é‡Œæ²¡æœ‰æ‰“å° &lt;code>Run&lt;/code> å‡½æ•°çš„ &lt;code>args&lt;/code> å‚æ•°å†…å®¹ï¼Œä½ å¯ä»¥è‡ªè¡Œæ‰“å°çœ‹çœ‹ç»“æœï¼ˆæç¤ºï¼š&lt;code>args&lt;/code> ä¸ºå‘½ä»¤è¡Œå‚æ•°åˆ—è¡¨ï¼‰ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä»¥ä¸Šæˆ‘ä»¬ç¼–è¯‘å¹¶æ‰§è¡Œäº† &lt;code>hugo&lt;/code> ç¨‹åºï¼Œè¾“å‡ºå†…å®¹æ­£æ˜¯ &lt;code>cobra.Command&lt;/code> ç»“æ„ä½“ä¸­ &lt;code>Run&lt;/code> å‡½æ•°å†…éƒ¨ä»£ç çš„æ‰§è¡Œç»“æœã€‚&lt;/p>
&lt;p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ &lt;code>--help&lt;/code> æŸ¥çœ‹è¿™ä¸ªå‘½ä»¤è¡Œç¨‹åºçš„ä½¿ç”¨å¸®åŠ©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./hugo --help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">A Fast and Flexible Static Site Generator built with
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> love by spf13 and friends in Go.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Complete documentation is available at https://gohugo.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo &lt;span class="o">[&lt;/span>flags&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h, --help &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> hugo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæ‰“å°äº† &lt;code>cobra.Command&lt;/code> ç»“æ„ä½“ä¸­ &lt;code>Long&lt;/code> å±æ€§çš„å†…å®¹ï¼Œå¦‚æœ &lt;code>Long&lt;/code> å±æ€§ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å° &lt;code>Short&lt;/code> å±æ€§å†…å®¹ã€‚&lt;/p>
&lt;p>&lt;code>hugo&lt;/code> å‘½ä»¤ç”¨æ³•ä¸º &lt;code>hugo [flags]&lt;/code>ï¼Œå¦‚ &lt;code>hugo --help&lt;/code>ã€‚&lt;/p>
&lt;p>è¿™ä¸ªå‘½ä»¤è¡Œç¨‹åºè‡ªåŠ¨æ”¯æŒäº† &lt;code>-h/--help&lt;/code> æ ‡å¿—ã€‚&lt;/p>
&lt;p>ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ Cobra ç¼–å†™ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åºæœ€å¸¸è§çš„å¥—è·¯ï¼Œè¿™ä¹Ÿæ˜¯ Cobra æ¨èå†™æ³•ã€‚&lt;/p>
&lt;p>å½“å‰é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ tree hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ cmd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ root.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.sum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ main.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Cobra ç¨‹åºç›®å½•ç»“æ„åŸºæœ¬å¦‚æ­¤ï¼Œ&lt;code>main.go&lt;/code> ä½œä¸ºå‘½ä»¤è¡Œç¨‹åºçš„å…¥å£ï¼Œä¸è¦å†™è¿‡å¤šçš„ä¸šåŠ¡é€»è¾‘ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½åº”è¯¥æ”¾åœ¨ &lt;code>cmd/&lt;/code> ç›®å½•ä¸‹ï¼Œä»¥åä¸ç®¡ç¼–å†™å¤šä¹ˆå¤æ‚çš„å‘½ä»¤è¡Œç¨‹åºéƒ½å¯ä»¥è¿™ä¹ˆæ¥è®¾è®¡ã€‚&lt;/p>
&lt;p>åœ¨ cobra ä¸­ï¼Œå‘½ä»¤å’Œå­å‘½ä»¤éƒ½æ˜¯ç”¨&lt;code>Command&lt;/code>ç»“æ„è¡¨ç¤ºçš„ã€‚&lt;code>Command&lt;/code>æœ‰éå¸¸å¤šçš„å­—æ®µï¼Œç”¨æ¥å®šåˆ¶å‘½ä»¤çš„è¡Œä¸ºã€‚ åœ¨å®é™…ä¸­ï¼Œæœ€å¸¸ç”¨çš„å°±é‚£ä¹ˆå‡ ä¸ªã€‚æˆ‘ä»¬åœ¨å‰é¢ç¤ºä¾‹ä¸­å·²ç»çœ‹åˆ°äº†&lt;code>Use/Short/Long/Run&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>Use&lt;/code>æŒ‡å®šä½¿ç”¨ä¿¡æ¯ï¼Œå³å‘½ä»¤æ€ä¹ˆè¢«è°ƒç”¨ï¼Œæ ¼å¼ä¸º&lt;code>name arg1 [arg2]&lt;/code>ã€‚&lt;code>name&lt;/code>ä¸ºå‘½ä»¤åï¼Œåé¢çš„&lt;code>arg1&lt;/code>ä¸ºå¿…å¡«å‚æ•°ï¼Œ&lt;code>arg3&lt;/code>ä¸ºå¯é€‰å‚æ•°ï¼Œå‚æ•°å¯ä»¥å¤šä¸ªã€‚&lt;/p>
&lt;p>&lt;code>Short/Long&lt;/code>éƒ½æ˜¯æŒ‡å®šå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼Œåªæ˜¯å‰è€…ç®€çŸ­ï¼Œåè€…è¯¦å°½è€Œå·²ã€‚&lt;/p>
&lt;p>&lt;code>Run&lt;/code>æ˜¯å®é™…æ‰§è¡Œæ“ä½œçš„å‡½æ•°ã€‚&lt;/p>
&lt;p>å®šä¹‰æ–°çš„å­å‘½ä»¤å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª&lt;code>cobra.Command&lt;/code>å˜é‡ï¼Œè®¾ç½®ä¸€äº›å­—æ®µï¼Œç„¶åæ·»åŠ åˆ°æ ¹å‘½ä»¤ä¸­&lt;/p>
&lt;hr>
&lt;h2 id="æ·»åŠ å­å‘½ä»¤">
&lt;a href="#%e6%b7%bb%e5%8a%a0%e5%ad%90%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
æ·»åŠ å­å‘½ä»¤
&lt;/h2>&lt;p>ä¸å®šä¹‰ &lt;code>rootCmd&lt;/code> ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>cobra.Command&lt;/code> å®šä¹‰å…¶ä»–å‘½ä»¤ï¼Œå¹¶é€šè¿‡ &lt;code>rootCmd.AddCommand()&lt;/code> æ–¹æ³•å°†å…¶æ·»åŠ ä¸º &lt;code>rootCmd&lt;/code> çš„ä¸€ä¸ªå­å‘½ä»¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">versionCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Short&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Print the version number of Hugo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Long&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">`All software has versions. This is Hugo&amp;#39;s`&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hugo Static Site Generator v0.9 -- HEAD&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddCommand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">versionCmd&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œå‘½ä»¤è¡Œç¨‹åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go build -o hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hugo Static Site Generator v0.9 -- HEAD
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç° &lt;code>version&lt;/code> å‘½ä»¤å·²ç»è¢«åŠ å…¥è¿›æ¥äº†ã€‚&lt;/p>
&lt;p>å†æ¬¡æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./hugo -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">A Fast and Flexible Static Site Generator built with
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> love by spf13 and friends in Go.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Complete documentation is available at https://gohugo.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo &lt;span class="o">[&lt;/span>flags&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo &lt;span class="o">[&lt;/span>command&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Available Commands:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> completion Generate the autocompletion script &lt;span class="k">for&lt;/span> the specified shell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">help&lt;/span> Help about any &lt;span class="nb">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version Print the version number of Hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h, --help &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Use &lt;span class="s2">&amp;#34;hugo [command] --help&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> more information about a command.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ¬¡çš„å¸®åŠ©ä¿¡æ¯æ›´ä¸ºä¸°å¯Œï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨ &lt;code>hugo [flags]&lt;/code> è¯­æ³•ï¼Œç”±äºå­å‘½ä»¤çš„åŠ å…¥ï¼Œåˆå¤šäº†ä¸€ä¸ª &lt;code>hugo [command]&lt;/code> è¯­æ³•å¯ä»¥ä½¿ç”¨ï¼Œå¦‚ &lt;code>hugo version&lt;/code>ã€‚&lt;/p>
&lt;p>ç°åœ¨æœ‰ä¸‰ä¸ªå¯ç”¨å‘½ä»¤ï¼š&lt;/p>
&lt;p>&lt;code>completion&lt;/code> å¯ä»¥ä¸ºæŒ‡å®šçš„ Shell ç”Ÿæˆè‡ªåŠ¨è¡¥å…¨è„šæœ¬ï¼Œå°†åœ¨ &lt;a class="link" href="https://jianghushinian.cn/2023/05/08/go-modern-command-line-framework-cobra-details/#Shell-%e8%a1%a5%e5%85%a8" target="_blank" rel="noopener"
>Shell è¡¥å…¨&lt;/a> å°èŠ‚è¿›è¡Œè®²è§£ã€‚&lt;/p>
&lt;p>&lt;code>help&lt;/code> ç”¨æ¥æŸ¥çœ‹å¸®åŠ©ï¼ŒåŒ &lt;code>-h/--help&lt;/code> ç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>hugo help command&lt;/code> è¯­æ³•æŸ¥çœ‹ &lt;code>command&lt;/code> å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ã€‚&lt;/p>
&lt;p>&lt;code>version&lt;/code> ä¸ºæ–°æ·»åŠ çš„å­å‘½ä»¤ã€‚&lt;/p>
&lt;p>æŸ¥çœ‹å­å‘½ä»¤å¸®åŠ©ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./hugo &lt;span class="nb">help&lt;/span> version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">All software has versions. This is Hugo&lt;span class="err">&amp;#39;&lt;/span>s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo version &lt;span class="o">[&lt;/span>flags&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h, --help &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ä½¿ç”¨å‘½ä»¤è¡Œæ ‡å¿—">
&lt;a href="#%e4%bd%bf%e7%94%a8%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%a0%87%e5%bf%97" class="header-anchor">#&lt;/a>
ä½¿ç”¨å‘½ä»¤è¡Œæ ‡å¿—
&lt;/h2>&lt;p>Cobra å®Œç¾é€‚é… &lt;a class="link" href="https://github.com/spf13/pflag" target="_blank" rel="noopener"
>pflag&lt;/a>ï¼Œç»“åˆ pflag å¯ä»¥æ›´çµæ´»çš„ä½¿ç”¨æ ‡å¿—åŠŸèƒ½ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æç¤ºï¼šå¯¹ pflag ä¸ç†Ÿæ‚‰çš„è¯»è€…å¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« &lt;a class="link" href="https://arlettebrook.github.io/p/go%E8%A7%A3%E6%9E%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%80%89%E9%A1%B9%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93pflag/" target="_blank" rel="noopener"
>ã€ŠGoè§£æå‘½ä»¤è¡Œå‚æ•°ä¹‹ç¬¬ä¸‰æ–¹åº“pflagã€‹&lt;/a>ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="æŒä¹…æ ‡å¿—">
&lt;a href="#%e6%8c%81%e4%b9%85%e6%a0%87%e5%bf%97" class="header-anchor">#&lt;/a>
æŒä¹…æ ‡å¿—
&lt;/h3>&lt;p>å¦‚æœä¸€ä¸ªæ ‡å¿—æ˜¯&lt;code>æŒä¹…çš„&lt;/code>ï¼Œåˆ™æ„å‘³ç€è¯¥æ ‡å¿—å°†å¯ç”¨äºå®ƒæ‰€åˆ†é…çš„å‘½ä»¤ä»¥åŠè¯¥å‘½ä»¤ä¸‹çš„&lt;strong>æ‰€æœ‰å­å‘½ä»¤&lt;/strong>ã€‚&lt;/p>
&lt;p>å¯¹äºå…¨å±€æ ‡å¿—ï¼Œå¯ä»¥å®šä¹‰åœ¨æ ¹å‘½ä»¤ &lt;code>rootCmd&lt;/code> ä¸Šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// hugo/cmd/root.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">Verbose&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PersistentFlags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">BoolVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Verbose&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;verbose&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Verbose output&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æœ¬åœ°æ ‡å¿—">
&lt;a href="#%e6%9c%ac%e5%9c%b0%e6%a0%87%e5%bf%97" class="header-anchor">#&lt;/a>
æœ¬åœ°æ ‡å¿—
&lt;/h3>&lt;p>æ ‡å¿—ä¹Ÿå¯ä»¥æ˜¯&lt;code>æœ¬åœ°çš„&lt;/code>ï¼Œè¿™æ„å‘³ç€å®ƒåªé€‚ç”¨äº&lt;strong>è¯¥æŒ‡å®šå‘½ä»¤&lt;/strong>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// hugo/cmd/root.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">Source&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;source&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Source directory to read from&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="çˆ¶å‘½ä»¤çš„æœ¬åœ°æ ‡å¿—">
&lt;a href="#%e7%88%b6%e5%91%bd%e4%bb%a4%e7%9a%84%e6%9c%ac%e5%9c%b0%e6%a0%87%e5%bf%97" class="header-anchor">#&lt;/a>
çˆ¶å‘½ä»¤çš„æœ¬åœ°æ ‡å¿—
&lt;/h3>&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒCobra ä»…è§£æç›®æ ‡å‘½ä»¤ä¸Šçš„æœ¬åœ°æ ‡å¿—ï¼Œå¿½ç•¥çˆ¶å‘½ä»¤ä¸Šçš„æœ¬åœ°æ ‡å¿—ã€‚é€šè¿‡åœ¨çˆ¶å‘½ä»¤ä¸Šå¯ç”¨ &lt;code>Command.TraverseChildren&lt;/code> å±æ€§ï¼ŒCobra å°†åœ¨æ‰§è¡Œç›®æ ‡å‘½ä»¤ä¹‹å‰è§£ææ¯ä¸ªå‘½ä»¤çš„æœ¬åœ°æ ‡å¿—ã€‚(åœ¨æ‰§è¡Œå­å‘½ä»¤ä¹‹å‰è§£ææ‰€æœ‰çˆ¶çº§ä¸Šçš„æ ‡å¿—ã€‚)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">rootCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;hugo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TraverseChildren&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æç¤ºï¼šå¦‚æœä½ ä¸ç†è§£ï¼Œæ²¡å…³ç³»ï¼Œç»§ç»­å¾€ä¸‹çœ‹ï¼Œç¨åä¼šæœ‰ç¤ºä¾‹ä»£ç æ¼”ç¤ºè®²è§£ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="å¿…é€‰æ ‡å¿—">
&lt;a href="#%e5%bf%85%e9%80%89%e6%a0%87%e5%bf%97" class="header-anchor">#&lt;/a>
å¿…é€‰æ ‡å¿—
&lt;/h3>&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ ‡å¿—æ˜¯å¯é€‰çš„ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶æ ‡è®°ä¸ºå¿…é€‰ï¼Œå¦‚æœè¿è¡Œç›®æ ‡å‘½ä»¤æ—¶æ²¡æœ‰æä¾›ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">Verbose&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">Source&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">Region&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// hugo/cmd/root.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PersistentFlags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">BoolVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Verbose&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;verbose&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Verbose output&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;source&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Source directory to read from&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Region&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;region&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;r&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;AWS region (required)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MarkFlagRequired&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;region&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®šä¹‰å¥½ä»¥ä¸Šå‡ ä¸ªæ ‡å¿—åï¼Œä¸ºäº†å±•ç¤ºæ•ˆæœï¼Œæˆ‘ä»¬å¯¹ &lt;code>rootCmd.Run&lt;/code> æ–¹æ³•åšäº›ä¿®æ”¹ï¼Œåˆ†åˆ«æ‰“å° &lt;code>Verbose&lt;/code>ã€&lt;code>Source&lt;/code>ã€&lt;code>Region&lt;/code> å‡ ä¸ªå˜é‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">rootCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;hugo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;run hugo...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Verbose: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Verbose&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Source: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Source&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Region: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Region&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦å¤–ï¼Œä¸ºäº†æµ‹è¯•å¯ç”¨ &lt;code>Command.TraverseChildren&lt;/code> çš„æ•ˆæœï¼Œæˆ‘åˆæ·»åŠ äº†ä¸€ä¸ª &lt;code>print&lt;/code> å­å‘½ä»¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">printCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;print [OPTIONS] [COMMANDS]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;run print...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;printFlag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">printFlag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Source: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Source&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">printFlag&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æœ¬åœ°æ ‡å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">printCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">printFlag&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;print flag for local&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddCommand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">printCmd&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ï¼Œæˆ‘ä»¬é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code>ï¼Œæ¥å¯¹ä¸Šé¢æ·»åŠ çš„è¿™å‡ ä¸ªæ ‡å¿—è¿›è¡Œæµ‹è¯•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">o&lt;/span> &lt;span class="nx">hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hugo&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">A&lt;/span> &lt;span class="nx">Fast&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">Flexible&lt;/span> &lt;span class="nx">Static&lt;/span> &lt;span class="nx">Site&lt;/span> &lt;span class="nx">Generator&lt;/span> &lt;span class="nx">built&lt;/span> &lt;span class="nx">with&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">love&lt;/span> &lt;span class="nx">by&lt;/span> &lt;span class="nx">spf13&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">friends&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="nx">Go&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Complete&lt;/span> &lt;span class="nx">documentation&lt;/span> &lt;span class="nx">is&lt;/span> &lt;span class="nx">available&lt;/span> &lt;span class="nx">at&lt;/span> &lt;span class="nx">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//gohugo.io
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Usage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hugo&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hugo&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Available&lt;/span> &lt;span class="nx">Commands&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">completion&lt;/span> &lt;span class="nx">Generate&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">autocompletion&lt;/span> &lt;span class="nx">script&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">specified&lt;/span> &lt;span class="nx">shell&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">help&lt;/span> &lt;span class="nx">Help&lt;/span> &lt;span class="nx">about&lt;/span> &lt;span class="nx">any&lt;/span> &lt;span class="nx">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">print&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">version&lt;/span> &lt;span class="nx">Print&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">version&lt;/span> &lt;span class="nx">number&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">Hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Flags&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">help&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">region&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">AWS&lt;/span> &lt;span class="nf">region&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">required&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">source&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">Source&lt;/span> &lt;span class="nx">directory&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">read&lt;/span> &lt;span class="nx">from&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="nx">verbose&lt;/span> &lt;span class="nx">output&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Use&lt;/span> &lt;span class="s">&amp;#34;hugo [command] --help&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">more&lt;/span> &lt;span class="nx">information&lt;/span> &lt;span class="nx">about&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="nx">command&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šå¸®åŠ©ä¿¡æ¯æ¸…æ™°æ˜äº†ï¼Œæˆ‘å°±ä¸è¿‡å¤šè§£é‡Šäº†ã€‚&lt;/p>
&lt;p>æ‰§è¡Œ &lt;code>hugo&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./hugo -r test-region
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">run hugo...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Verbose: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Source:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Region: test-region
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ &lt;code>-r/--region&lt;/code> ä¸ºå¿…é€‰æ ‡å¿—ï¼Œä¸ä¼ å°†ä¼šå¾—åˆ° &lt;code>Error: required flag(s) &amp;quot;region&amp;quot; not set&lt;/code> æŠ¥é”™ã€‚&lt;/p>
&lt;p>æ‰§è¡Œ &lt;code>print&lt;/code> å­å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./hugo print -f test-flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">run print...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">printFlag: test-flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Source:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šæ‰§è¡Œç»“æœå¯ä»¥å‘ç°ï¼Œçˆ¶å‘½ä»¤çš„æ ‡å¿— &lt;code>Source&lt;/code> å†…å®¹ä¸ºç©ºã€‚&lt;/p>
&lt;p>ç°åœ¨ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œ &lt;code>print&lt;/code> å­å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./hugo -s test-source print -f test-flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">run print...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">printFlag: test-flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Source: test-source
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ &lt;code>print&lt;/code> å­å‘½ä»¤å‰ï¼Œæˆ‘ä»¬æŒ‡å®šäº† &lt;code>-s test-source&lt;/code> æ ‡å¿—ï¼Œ&lt;code>-s/--source&lt;/code> æ˜¯çˆ¶å‘½ä»¤ &lt;code>hugo&lt;/code> çš„æ ‡å¿—ï¼Œä¹Ÿèƒ½å¤Ÿè¢«æ­£ç¡®è§£æï¼Œè¿™å°±æ˜¯å¯ç”¨ &lt;code>Command.TraverseChildren&lt;/code> çš„æ•ˆæœã€‚&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬å°† &lt;code>rootCmd&lt;/code> çš„ &lt;code>TraverseChildren&lt;/code> å±æ€§ç½®ä¸º &lt;code>false&lt;/code>ï¼Œåˆ™ä¼šå¾—åˆ° &lt;code>Error: unknown shorthand flag: 's' in -s&lt;/code> æŠ¥é”™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æŒ‡å®š rootCmd.TraverseChildren = false åï¼Œé‡æ–°ç¼–è¯‘ç¨‹åº&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go build -o hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ‰§è¡ŒåŒæ ·çš„å‘½ä»¤ï¼Œç°åœ¨ä¼šå¾—åˆ°æŠ¥é”™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo -s test-source print -f test-flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Error: unknown shorthand flag: &lt;span class="s1">&amp;#39;s&amp;#39;&lt;/span> in -s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo print &lt;span class="o">[&lt;/span>OPTIONS&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>COMMANDS&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>flags&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -f, --flag string print flag &lt;span class="k">for&lt;/span> &lt;span class="nb">local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h, --help &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> print
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Global Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v, --verbose verbose output
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unknown shorthand flag: &lt;span class="s1">&amp;#39;s&amp;#39;&lt;/span> in -s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ€»ç»“ï¼šåœ¨çˆ¶å‘½ä»¤ä¸Šè®¾ç½®ç©¿è¶Šå„¿ç«¥ä¸ºtrueï¼Œè¿è¡Œå­å‘½ä»¤æ—¶ä¼šè§£æçˆ¶å‘½ä»¤çš„æœ¬åœ°é€‰é¡¹ï¼Œåä¹‹ï¼Œåªè§£æå­å‘½ä»¤çš„æœ¬åœ°é€‰é¡¹ä»¥åŠæŒä¹…é€‰é¡¹ã€‚&lt;/p>
&lt;h2 id="å¤„ç†é…ç½®">
&lt;a href="#%e5%a4%84%e7%90%86%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
å¤„ç†é…ç½®
&lt;/h2>&lt;p>é™¤äº†å°†å‘½ä»¤è¡Œæ ‡å¿—çš„å€¼ç»‘å®šåˆ°å˜é‡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ ‡å¿—ç»‘å®šåˆ° &lt;a class="link" href="https://github.com/spf13/viper" target="_blank" rel="noopener"
>Viper&lt;/a>ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ &lt;code>viper.Get()&lt;/code> æ¥è·å–æ ‡å¿—çš„å€¼äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">author&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PersistentFlags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">author&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;author&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;YOUR NAME&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Author name for copyright attribution&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindPFlag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;author&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PersistentFlags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;author&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æç¤ºï¼šå¯¹ Viper ä¸ç†Ÿæ‚‰çš„è¯»è€…å¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« &lt;a class="link" href="https://arlettebrook.github.io/p/go%e9%85%8d%e7%bd%ae%e7%ae%a1%e7%90%86%e4%b9%8b%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93viper/" target="_blank" rel="noopener"
>ã€ŠGoé…ç½®ç®¡ç†ä¹‹ç¬¬ä¸‰æ–¹åº“viperã€‹&lt;/a>ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>cobra.OnInitialize()&lt;/code> æ¥åˆå§‹åŒ–é…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">cfgFile&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OnInitialize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">initConfig&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cfgFile&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;config file&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">initConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">cfgFile&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cfgFile&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">home&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">homedir&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Dir&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddConfigPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">home&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetConfigName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.cobra_test&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadInConfig&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Can&amp;#39;t read config:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¼ é€’ç»™ &lt;code>cobra.OnInitialize()&lt;/code> çš„å‡½æ•° &lt;code>initConfig&lt;/code> å‡½æ•°å°†åœ¨è°ƒç”¨å‘½ä»¤çš„ &lt;code>Execute&lt;/code> æ–¹æ³•æ—¶è¿è¡Œã€‚&lt;/p>
&lt;p>ä¸ºäº†å±•ç¤ºä½¿ç”¨ Cobra å¤„ç†é…ç½®çš„æ•ˆæœï¼Œéœ€è¦ä¿®æ”¹ &lt;code>rootCmd.Run&lt;/code> å‡½æ•°çš„æ‰“å°ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">rootCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;hugo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;run hugo...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Verbose: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Verbose&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Source: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Source&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Region: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Region&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Author: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;author&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Config: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AllSettings&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æä¾› &lt;code>config.yaml&lt;/code> é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-YAML" data-lang="YAML">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">123456&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arlettebrook&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="nx">test&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">rergion&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">run&lt;/span> &lt;span class="nx">hugo&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Verbose&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Source&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Region&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">test&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">rergion&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Author&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">YOUR&lt;/span> &lt;span class="nx">NAME&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Config&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">author&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">YOUR&lt;/span> &lt;span class="nx">NAME&lt;/span> &lt;span class="nx">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">123456&lt;/span> &lt;span class="nx">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">10.0.0.1&lt;/span> &lt;span class="nx">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8080&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nx">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">arlettebro&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ok&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„äº‹é¡¹ï¼šviperè¯»å–é…ç½®æ–‡ä»¶è‹¥æ ¹æ®æ–‡ä»¶åè¿›è¡Œæ‰«æï¼Œå½“æ–‡ä»¶åç›¸åŒï¼Œåç¼€ä¸åŒæ—¶ï¼Œè°å…ˆæ‰«åˆ°å°±ç”¨è°ï¼Œåœ¨æ ¹æ®æŒ‡å®šçš„ç±»å‹è¿›è¡Œè§£æã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œè§£æçš„æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå°±æ˜¯ä»€ä¹ˆç±»å‹ï¼Œä½†åœ¨æœ€åä¿å­˜æ—¶ï¼Œéœ€è¦æŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œä¸ç„¶ä¿å­˜ä¸äº†ï¼ŒæŒ‡å®šäº†ç±»å‹å°±å¯ä»¥ã€‚&lt;/p>
&lt;p>ç¬”è®°ï¼šCobra åŒæ—¶æ”¯æŒ pflag å’Œ Viper ä¸¤ä¸ªåº“ï¼Œå®é™…ä¸Šè¿™ä¸‰ä¸ªåº“å‡ºè‡ªåŒä¸€ä½œè€… &lt;a class="link" href="https://spf13.com/" target="_blank" rel="noopener"
>spf13&lt;/a>ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="å‚æ•°éªŒè¯">
&lt;a href="#%e5%8f%82%e6%95%b0%e9%aa%8c%e8%af%81" class="header-anchor">#&lt;/a>
å‚æ•°éªŒè¯
&lt;/h2>&lt;p>åœ¨æ‰§è¡Œå‘½ä»¤è¡Œç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹å‘½ä»¤å‚æ•°è¿›è¡Œåˆæ³•æ€§éªŒè¯ï¼Œ&lt;code>cobra.Command&lt;/code> çš„ &lt;code>Args&lt;/code> å±æ€§æä¾›äº†æ­¤åŠŸèƒ½ã€‚&lt;/p>
&lt;p>&lt;code>Args&lt;/code> å±æ€§ç±»å‹ä¸ºä¸€ä¸ªå‡½æ•°ï¼š&lt;code>func(cmd *Command, args []string) error&lt;/code>ï¼Œå¯ä»¥ç”¨æ¥éªŒè¯å‚æ•°ã€‚&lt;/p>
&lt;p>Cobra å†…ç½®äº†ä»¥ä¸‹éªŒè¯å‡½æ•°ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>NoArgs&lt;/code>ï¼šå¦‚æœå­˜åœ¨ä»»ä½•å‘½ä»¤å‚æ•°ï¼Œè¯¥å‘½ä»¤å°†æŠ¥é”™ã€‚&lt;/li>
&lt;li>&lt;code>ArbitraryArgs&lt;/code>ï¼šè¯¥å‘½ä»¤å°†æ¥å—ä»»æ„å‚æ•°ã€‚&lt;/li>
&lt;li>&lt;code>OnlyValidArgs&lt;/code>ï¼šå¦‚æœæœ‰ä»»ä½•å‘½ä»¤å‚æ•°ä¸åœ¨ &lt;code>Command&lt;/code> çš„ &lt;code>ValidArgs&lt;/code> å­—æ®µä¸­ï¼Œè¯¥å‘½ä»¤å°†æŠ¥é”™ã€‚&lt;/li>
&lt;li>&lt;code>MinimumNArgs(int)&lt;/code>ï¼šå¦‚æœæ²¡æœ‰è‡³å°‘ N ä¸ªå‘½ä»¤å‚æ•°ï¼Œè¯¥å‘½ä»¤å°†æŠ¥é”™ã€‚&lt;/li>
&lt;li>&lt;code>MaximumNArgs(int)&lt;/code>ï¼šå¦‚æœæœ‰è¶…è¿‡ N ä¸ªå‘½ä»¤å‚æ•°ï¼Œè¯¥å‘½ä»¤å°†æŠ¥é”™ã€‚&lt;/li>
&lt;li>&lt;code>ExactArgs(int)&lt;/code>ï¼šå¦‚æœå‘½ä»¤å‚æ•°ä¸ªæ•°ä¸ä¸º Nï¼Œè¯¥å‘½ä»¤å°†æŠ¥é”™ã€‚&lt;/li>
&lt;li>&lt;code>ExactValidArgs(int)&lt;/code>ï¼šå¦‚æœå‘½ä»¤å‚æ•°ä¸ªæ•°ä¸ä¸º Nï¼Œæˆ–è€…æœ‰ä»»ä½•å‘½ä»¤å‚æ•°ä¸åœ¨ &lt;code>Command&lt;/code> çš„ &lt;code>ValidArgs&lt;/code> å­—æ®µä¸­ï¼Œè¯¥å‘½ä»¤å°†æŠ¥é”™ã€‚&lt;/li>
&lt;li>&lt;code>RangeArgs(min, max)&lt;/code>ï¼šå¦‚æœå‘½ä»¤å‚æ•°çš„æ•°é‡ä¸åœ¨é¢„æœŸçš„æœ€å°æ•°é‡ &lt;code>min&lt;/code> å’Œæœ€å¤§æ•°é‡ &lt;code>max&lt;/code> ä¹‹é—´ï¼Œè¯¥å‘½ä»¤å°†æŠ¥é”™ã€‚&lt;/li>
&lt;/ul>
&lt;p>å†…ç½®éªŒè¯å‡½æ•°ç”¨æ³•å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">versionCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hugo Static Site Generator v0.9 -- HEAD&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Args&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MaximumNArgs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">// ä½¿ç”¨å†…ç½®çš„éªŒè¯å‡½æ•°ï¼Œä½ç½®å‚æ•°å¤šäº 2 ä¸ªåˆ™æŠ¥é”™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go build -o hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä¸¤ä¸ªå‘½ä»¤å‚æ•°æ»¡è¶³éªŒè¯å‡½æ•°çš„è¦æ±‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo version a b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hugo Static Site Generator v0.9 -- HEAD
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è¶…è¿‡ä¸¤ä¸ªå‚æ•°åˆ™æŠ¥é”™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo version a b c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Error: accepts at most &lt;span class="m">2&lt;/span> arg&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>, received &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰éªŒè¯å‡½æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">printCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;print [OPTIONS] [COMMANDS]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;run print...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å‘½ä»¤è¡Œä½ç½®å‚æ•°åˆ—è¡¨ï¼šä¾‹å¦‚æ‰§è¡Œ `hugo print a b c d` å°†å¾—åˆ° [a b c d]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;args: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä½¿ç”¨è‡ªå®šä¹‰éªŒè¯å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Args&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;requires at least one arg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;the number of args cannot exceed 4&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;first argument must be &amp;#39;a&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go build -o hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1~4 ä¸ªå‚æ•°æ»¡è¶³æ¡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo print a b c d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">run print...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">args: &lt;span class="o">[&lt;/span>a b c d&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ²¡æœ‰å‚æ•°åˆ™æŠ¥é”™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo print
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Error: requires at least one arg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ»¡è¶³éªŒè¯å‡½æ•°é€»è¾‘ï¼Œä¹Ÿä¼šæŠ¥é”™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo print x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Error: first argument must be &lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="hooks">
&lt;a href="#hooks" class="header-anchor">#&lt;/a>
Hooks
&lt;/h2>&lt;p>åœ¨æ‰§è¡Œ &lt;code>Run&lt;/code> å‡½æ•°å‰åï¼Œæˆ‘ä¹ˆå¯ä»¥æ‰§è¡Œä¸€äº›é’©å­å‡½æ•°ï¼Œå…¶ä½œç”¨å’Œæ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>PersistentPreRun&lt;/code>ï¼šåœ¨ &lt;code>PreRun&lt;/code> å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œå¯¹æ­¤å‘½ä»¤çš„å­å‘½ä»¤åŒæ ·ç”Ÿæ•ˆã€‚&lt;/li>
&lt;li>&lt;code>PreRun&lt;/code>ï¼šåœ¨ &lt;code>Run&lt;/code> å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰§è¡Œã€‚&lt;/li>
&lt;li>&lt;code>Run&lt;/code>ï¼šæ‰§è¡Œå‘½ä»¤æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œç”¨æ¥ç¼–å†™å‘½ä»¤çš„ä¸šåŠ¡é€»è¾‘ã€‚&lt;/li>
&lt;li>&lt;code>PostRun&lt;/code>ï¼šåœ¨ &lt;code>Run&lt;/code> å‡½æ•°æ‰§è¡Œä¹‹åæ‰§è¡Œã€‚&lt;/li>
&lt;li>&lt;code>PersistentPostRun&lt;/code>ï¼šåœ¨ &lt;code>PostRun&lt;/code> å‡½æ•°æ‰§è¡Œä¹‹åæ‰§è¡Œï¼Œå¯¹æ­¤å‘½ä»¤çš„å­å‘½ä»¤åŒæ ·ç”Ÿæ•ˆã€‚&lt;/li>
&lt;/ol>
&lt;p>ä¿®æ”¹ &lt;code>rootCmd&lt;/code> å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">rootCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;hugo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PersistentPreRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PersistentPreRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PreRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PreRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;run hugo...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PostRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PostRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PersistentPostRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PersistentPostRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go build -o hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ‰§è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PersistentPreRun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PreRun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">run hugo...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PostRun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PersistentPostRun
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºé¡ºåºç¬¦åˆé¢„æœŸã€‚&lt;/p>
&lt;p>å…¶ä¸­ &lt;code>PersistentPreRun&lt;/code>ã€&lt;code>PersistentPostRun&lt;/code> ä¸¤ä¸ªå‡½æ•°å¯¹å­å‘½ä»¤åŒæ ·ç”Ÿæ•ˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./hugo version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PersistentPreRun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hugo Static Site Generator v0.9 -- HEAD
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PersistentPostRun
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šå‡ ä¸ªå‡½æ•°éƒ½æœ‰å¯¹åº”çš„ &lt;code>&amp;lt;Hooks&amp;gt;E&lt;/code> ç‰ˆæœ¬ï¼Œ&lt;code>E&lt;/code> è¡¨ç¤º &lt;code>Error&lt;/code>ï¼Œå³å‡½æ•°æ‰§è¡Œå‡ºé”™å°†ä¼šè¿”å› &lt;code>Error&lt;/code>ï¼Œæ‰§è¡Œé¡ºåºä¸å˜ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>PersistentPreRunE&lt;/code>&lt;/li>
&lt;li>&lt;code>PreRunE&lt;/code>&lt;/li>
&lt;li>&lt;code>RunE&lt;/code>&lt;/li>
&lt;li>&lt;code>PostRunE&lt;/code>&lt;/li>
&lt;li>&lt;code>PersistentPostRunE&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>å¦‚æœå®šä¹‰äº† &lt;code>&amp;lt;Hooks&amp;gt;E&lt;/code> å‡½æ•°ï¼Œåˆ™ &lt;code>&amp;lt;Hooks&amp;gt;&lt;/code> å‡½æ•°ä¸ä¼šæ‰§è¡Œã€‚æ¯”å¦‚åŒæ—¶å®šä¹‰äº† &lt;code>Run&lt;/code> å’Œ &lt;code>RunE&lt;/code>ï¼Œåˆ™åªä¼šæ‰§è¡Œ &lt;code>RunE&lt;/code>ï¼Œä¸ä¼šæ‰§è¡Œ &lt;code>Run&lt;/code>ï¼Œå…¶ä»– &lt;code>Hooks&lt;/code> å‡½æ•°åŒç†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">rootCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;hugo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PersistentPreRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PersistentPreRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PersistentPreRunE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PersistentPreRunE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PreRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PreRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PreRunE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PreRunE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;PreRunE err&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;run hugo...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PostRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PostRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PersistentPostRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hugo PersistentPostRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">o&lt;/span> &lt;span class="nx">hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">æ‰§è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">hugo&lt;/span> &lt;span class="nx">PersistentPreRunE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">hugo&lt;/span> &lt;span class="nx">PreRunE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Error&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">PreRunE&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Usage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hugo&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hugo&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Available&lt;/span> &lt;span class="nx">Commands&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">completion&lt;/span> &lt;span class="nx">Generate&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">autocompletion&lt;/span> &lt;span class="nx">script&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">specified&lt;/span> &lt;span class="nx">shell&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">help&lt;/span> &lt;span class="nx">Help&lt;/span> &lt;span class="nx">about&lt;/span> &lt;span class="nx">any&lt;/span> &lt;span class="nx">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">print&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">version&lt;/span> &lt;span class="nx">Print&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">version&lt;/span> &lt;span class="nx">number&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">Hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Flags&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="nx">author&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">Author&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">copyright&lt;/span> &lt;span class="nf">attribution&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;YOUR NAME&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">config&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">config&lt;/span> &lt;span class="nx">file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">help&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">region&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">AWS&lt;/span> &lt;span class="nf">region&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">required&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">source&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">Source&lt;/span> &lt;span class="nx">directory&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">read&lt;/span> &lt;span class="nx">from&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="nx">verbose&lt;/span> &lt;span class="nx">output&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Use&lt;/span> &lt;span class="s">&amp;#34;hugo [command] --help&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">more&lt;/span> &lt;span class="nx">information&lt;/span> &lt;span class="nx">about&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="nx">command&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">PreRunE&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œè™½ç„¶åŒæ—¶å®šä¹‰äº† &lt;code>PersistentPreRun&lt;/code>ã€&lt;code>PersistentPreRunE&lt;/code> ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œä½†åªæœ‰ &lt;code>PersistentPreRunE&lt;/code> ä¼šè¢«æ‰§è¡Œã€‚&lt;/p>
&lt;p>åœ¨æ‰§è¡Œ &lt;code>PreRunE&lt;/code> æ—¶è¿”å›äº†ä¸€ä¸ªé”™è¯¯ &lt;code>PreRunE err&lt;/code>ï¼Œç¨‹åºä¼šç»ˆæ­¢è¿è¡Œå¹¶æ‰“å°é”™è¯¯ä¿¡æ¯ã€‚&lt;/p>
&lt;p>å¦‚æœå­å‘½ä»¤å®šä¹‰äº†è‡ªå·±çš„ &lt;code>Persistent*Run&lt;/code> å‡½æ•°ï¼Œåˆ™ä¸ä¼šç»§æ‰¿çˆ¶å‘½ä»¤çš„ &lt;code>Persistent*Run&lt;/code> å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">versionCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PersistentPreRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version PersistentPreRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PreRun&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;version PreRun&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hugo Static Site Generator v0.9 -- HEAD&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go build -o hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ‰§è¡Œå­å‘½ä»¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version PersistentPreRun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version PreRun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hugo Static Site Generator v0.9 -- HEAD
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PersistentPostRun
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„äº‹é¡¹ï¼š&lt;code>cobra.OnInitialize()&lt;/code>ä¼ å…¥è°ƒç”¨å‘½ä»¤æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼ˆå¯ä»¥ç”¨æ¥&lt;a class="link" href="#%e5%a4%84%e7%90%86%e9%85%8d%e7%bd%ae" >åˆå§‹åŒ–é…ç½®&lt;/a>ï¼‰ï¼šæ‰§è¡Œé¡ºåºéƒ½åœ¨Hookså‡½æ•°çš„å‰é¢ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="å®šä¹‰è‡ªå·±çš„-help-å‘½ä»¤">
&lt;a href="#%e5%ae%9a%e4%b9%89%e8%87%aa%e5%b7%b1%e7%9a%84-help-%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
å®šä¹‰è‡ªå·±çš„ Help å‘½ä»¤
&lt;/h2>&lt;p>å¦‚æœä½ å¯¹ Cobra è‡ªåŠ¨ç”Ÿæˆçš„å¸®åŠ©å‘½ä»¤ä¸æ»¡æ„ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å¸®åŠ©å‘½ä»¤æˆ–æ¨¡æ¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetHelpCommand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetHelpFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetHelpTemplate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Cobra æä¾›äº†ä¸‰ä¸ªæ–¹æ³•æ¥å®ç°è‡ªå®šä¹‰å¸®åŠ©å‘½ä»¤ã€‚&lt;/p>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>hugo help command&lt;/code> è¯­æ³•æŸ¥çœ‹å­å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code>hugo command -h/--help&lt;/code> æŸ¥çœ‹ã€‚&lt;/p>
&lt;p>ä½¿ç”¨ &lt;code>help&lt;/code> å‘½ä»¤æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hugo&lt;/span> &lt;span class="nx">help&lt;/span> &lt;span class="nx">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">hugo&lt;/span> &lt;span class="nx">PersistentPreRunE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">All&lt;/span> &lt;span class="nx">software&lt;/span> &lt;span class="nx">has&lt;/span> &lt;span class="nx">versions&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="nx">This&lt;/span> &lt;span class="nx">is&lt;/span> &lt;span class="nx">Hugo&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Usage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hugo&lt;/span> &lt;span class="nx">version&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Flags&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">help&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Global&lt;/span> &lt;span class="nx">Flags&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="nx">author&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">Author&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">copyright&lt;/span> &lt;span class="nf">attribution&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;YOUR NAME&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="nx">verbose&lt;/span> &lt;span class="nx">output&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">hugo&lt;/span> &lt;span class="nx">PersistentPostRun&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ &lt;code>-h/--help&lt;/code> æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hugo&lt;/span> &lt;span class="nx">version&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">All&lt;/span> &lt;span class="nx">software&lt;/span> &lt;span class="nx">has&lt;/span> &lt;span class="nx">versions&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="nx">This&lt;/span> &lt;span class="nx">is&lt;/span> &lt;span class="nx">Hugo&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Usage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hugo&lt;/span> &lt;span class="nx">version&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Flags&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">help&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Global&lt;/span> &lt;span class="nx">Flags&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="nx">author&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">Author&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">copyright&lt;/span> &lt;span class="nf">attribution&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;YOUR NAME&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="nx">verbose&lt;/span> &lt;span class="nx">output&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>äºŒè€…å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œä½¿ç”¨ &lt;code>help&lt;/code> å‘½ä»¤æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯æ—¶ä¼šæ‰§è¡Œåˆå§‹åŒ–å‡½æ•°ï¼ˆè¿™é‡Œæ²¡æœ‰æ¼”ç¤ºï¼Œ&lt;a class="link" href="#%e5%a4%84%e7%90%86%e9%85%8d%e7%bd%ae" >å‚è€ƒ&lt;/a>ï¼‰å’Œé’©å­å‡½æ•°ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>rootCmd.SetHelpCommand&lt;/code> æ¥æ§åˆ¶ &lt;code>help&lt;/code> å‘½ä»¤è¾“å‡ºï¼Œä½¿ç”¨ &lt;code>rootCmd.SetHelpFunc&lt;/code> æ¥æ§åˆ¶ &lt;code>-h/--help&lt;/code> è¾“å‡ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PersistentFlags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">BoolVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Verbose&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;verbose&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Verbose output&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;source&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Source directory to read from&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Region&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;region&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;r&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;AWS region (required)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MarkFlagRequired&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;region&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PersistentFlags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Author&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;author&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;YOUR NAME&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Author name for copyright attribution&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">viper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindPFlag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;author&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">PersistentFlags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;author&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OnInitialize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">initConfig&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">StringVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cfgFile&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;config file&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetHelpCommand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;help&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Short&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Custom help command&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Hidden&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cmd&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Custom help command&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetHelpFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">command&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strings&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">strings&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go build -o hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä½¿ç”¨ `help` å‘½ä»¤æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo &lt;span class="nb">help&lt;/span> version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PersistentPreRunE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Custom &lt;span class="nb">help&lt;/span> &lt;span class="nb">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PersistentPostRun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä½¿ç”¨ `-h` æŸ¥çœ‹æ ¹å‘½ä»¤å¸®åŠ©ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>-h&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä½¿ç”¨ `-h` æŸ¥çœ‹ version å‘½ä»¤å¸®åŠ©ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo version -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>version -h&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œä½¿ç”¨ &lt;code>help&lt;/code> å‘½ä»¤æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯è¾“å‡ºç»“æœæ˜¯ &lt;code>rootCmd.SetHelpCommand&lt;/code> ä¸­ &lt;code>Run&lt;/code> å‡½æ•°çš„æ‰§è¡Œè¾“å‡ºã€‚ä½¿ç”¨ &lt;code>-h&lt;/code> æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯è¾“å‡ºç»“æœæ˜¯ &lt;code>rootCmd.SetHelpFunc&lt;/code> å‡½æ•°çš„æ‰§è¡Œè¾“å‡ºï¼Œ&lt;code>strings&lt;/code> ä»£è¡¨çš„æ˜¯å‘½ä»¤è¡Œæ ‡å¿—å’Œå‚æ•°åˆ—è¡¨ã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬å†æ¥æµ‹è¯•ä¸‹ &lt;code>rootCmd.SetHelpTemplate&lt;/code> çš„ä½œç”¨ï¼Œå®ƒç”¨æ¥è®¾ç½®å¸®åŠ©ä¿¡æ¯æ¨¡æ¿ï¼Œæ”¯æŒæ ‡å‡†çš„ Go Template è¯­æ³•ï¼Œè‡ªå®šä¹‰æ¨¡æ¿å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetHelpTemplate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`Custom Help Template:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">Usage:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.UseLine&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">Description:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Short&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">Commands:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Commands&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">: &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Short&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šä¸ºäº†å•ç‹¬æµ‹è¯• &lt;code>cmd.SetHelpTemplate(s string)&lt;/code>ï¼Œæˆ‘å·²å°†ä¸Šé¢ &lt;code>rootCmd.SetHelpCommand&lt;/code> å’Œ &lt;code>rootCmd.SetHelpFunc&lt;/code> éƒ¨åˆ†ä»£ç æ³¨é‡Šæ‰äº†ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code> å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go build -o hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æŸ¥çœ‹å¸®åŠ©&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Custom Help Template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo &lt;span class="o">[&lt;/span>flags&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Hugo is a very fast static site generator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Commands:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> completion: Generate the autocompletion script &lt;span class="k">for&lt;/span> the specified shell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> help: Help about any &lt;span class="nb">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version: Print the version number of Hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æŸ¥çœ‹å­å‘½ä»¤å¸®åŠ©&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./hugo &lt;span class="nb">help&lt;/span> version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PersistentPreRunE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Custom Help Template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo version &lt;span class="o">[&lt;/span>flags&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Print the version number of Hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Commands:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo PersistentPostRun
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œæ— è®ºä½¿ç”¨ &lt;code>help&lt;/code> å‘½ä»¤æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼Œè¿˜æ˜¯ä½¿ç”¨ &lt;code>-h&lt;/code> æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼Œå…¶è¾“å‡ºå†…å®¹éƒ½éµå¾ªæˆ‘ä»¬è‡ªå®šä¹‰çš„æ¨¡ç‰ˆæ ¼å¼ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å®šä¹‰è‡ªå·±çš„-usage-message">
&lt;a href="#%e5%ae%9a%e4%b9%89%e8%87%aa%e5%b7%b1%e7%9a%84-usage-message" class="header-anchor">#&lt;/a>
å®šä¹‰è‡ªå·±çš„ Usage Message
&lt;/h2>&lt;p>å½“ç”¨æˆ·æä¾›æ— æ•ˆæ ‡å¿—æˆ–æ— æ•ˆå‘½ä»¤æ—¶ï¼ŒCobra é€šè¿‡å‘ç”¨æˆ·æ˜¾ç¤º &lt;code>Usage&lt;/code> æ¥æç¤ºç”¨æˆ·å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨å‘½ä»¤ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·è¾“å…¥æ— æ•ˆçš„æ ‡å¿— &lt;code>--demo&lt;/code> æ—¶ï¼Œå°†å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hugo&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">demo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Error&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">unknown&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">demo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Usage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hugo&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hugo&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Available&lt;/span> &lt;span class="nx">Commands&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">completion&lt;/span> &lt;span class="nx">Generate&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">autocompletion&lt;/span> &lt;span class="nx">script&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">specified&lt;/span> &lt;span class="nx">shell&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">help&lt;/span> &lt;span class="nx">Help&lt;/span> &lt;span class="nx">about&lt;/span> &lt;span class="nx">any&lt;/span> &lt;span class="nx">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">print&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">version&lt;/span> &lt;span class="nx">Print&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">version&lt;/span> &lt;span class="nx">number&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">Hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Flags&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="nx">author&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">Author&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">copyright&lt;/span> &lt;span class="nf">attribution&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">default&lt;/span> &lt;span class="s">&amp;#34;YOUR NAME&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">config&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">config&lt;/span> &lt;span class="nx">file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">help&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">source&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="nx">Source&lt;/span> &lt;span class="nx">directory&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">read&lt;/span> &lt;span class="nx">from&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="nx">verbose&lt;/span> &lt;span class="nx">output&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Use&lt;/span> &lt;span class="s">&amp;#34;hugo [command] --help&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">more&lt;/span> &lt;span class="nx">information&lt;/span> &lt;span class="nx">about&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="nx">command&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">unknown&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">demo&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆç¨‹åºä¼šæŠ¥é”™ &lt;code>Error: unknown flag: --demo&lt;/code>ï¼ŒæŠ¥é”™åä¼šæ˜¾ç¤º &lt;code>Usage&lt;/code> ä¿¡æ¯ã€‚&lt;/p>
&lt;p>è¿™ä¸ªè¾“å‡ºæ ¼å¼é»˜è®¤ä¸ &lt;code>help&lt;/code> ä¿¡æ¯ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ã€‚Cobra æä¾›äº†å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼Œæ¥æ§åˆ¶è¾“å‡ºï¼Œå…·ä½“æ•ˆæœæˆ‘å°±ä¸æ¼”ç¤ºäº†ï¼Œç•™ç»™è¯»è€…è‡ªè¡Œæ¢ç´¢ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetUsageFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetUsageTemplate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="æœªçŸ¥å‘½ä»¤å»ºè®®">
&lt;a href="#%e6%9c%aa%e7%9f%a5%e5%91%bd%e4%bb%a4%e5%bb%ba%e8%ae%ae" class="header-anchor">#&lt;/a>
æœªçŸ¥å‘½ä»¤å»ºè®®
&lt;/h2>&lt;p>åœ¨æˆ‘ä»¬ä½¿ç”¨ &lt;code>git&lt;/code> å‘½ä»¤æ—¶ï¼Œæœ‰ä¸€ä¸ªéå¸¸å¥½ç”¨çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿå¯¹ç”¨æˆ·è¾“é”™çš„æœªçŸ¥å‘½ä»¤æ™ºèƒ½æç¤ºã€‚&lt;/p>
&lt;p>ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ git statu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git: &lt;span class="s1">&amp;#39;statu&amp;#39;&lt;/span> is not a git command. See &lt;span class="s1">&amp;#39;git --help&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The most similar commands are
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„å‘½ä»¤ &lt;code>statu&lt;/code> æ—¶ï¼Œ&lt;code>git&lt;/code> ä¼šæç¤ºå‘½ä»¤ä¸å­˜åœ¨ï¼Œå¹¶ä¸”ç»™å‡ºå‡ ä¸ªæœ€ç›¸ä¼¼å‘½ä»¤çš„å»ºè®®ã€‚&lt;/p>
&lt;p>è¿™ä¸ªåŠŸèƒ½éå¸¸å®ç”¨ï¼Œå¹¸è¿çš„æ˜¯ï¼ŒCobra è‡ªå¸¦äº†æ­¤åŠŸèƒ½ã€‚&lt;/p>
&lt;p>å¦‚ä¸‹ï¼Œå½“æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„å‘½ä»¤ &lt;code>vers&lt;/code> æ—¶ï¼Œ&lt;code>hugo&lt;/code> ä¼šè‡ªåŠ¨ç»™å‡ºå»ºè®®å‘½ä»¤ &lt;code>version&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hugo&lt;/span> &lt;span class="nx">vers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Error&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">unknown&lt;/span> &lt;span class="nx">command&lt;/span> &lt;span class="s">&amp;#34;vers&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="s">&amp;#34;hugo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Did&lt;/span> &lt;span class="nx">you&lt;/span> &lt;span class="nx">mean&lt;/span> &lt;span class="nx">this&lt;/span>&lt;span class="err">?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Run&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">hugo&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">help&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">usage&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">unknown&lt;/span> &lt;span class="nx">command&lt;/span> &lt;span class="s">&amp;#34;vers&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="s">&amp;#34;hugo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Did&lt;/span> &lt;span class="nx">you&lt;/span> &lt;span class="nx">mean&lt;/span> &lt;span class="nx">this&lt;/span>&lt;span class="err">?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">version&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„âš ï¸ï¼šæ ¹æ®æˆ‘çš„å®æµ‹ï¼Œè¦æƒ³è®©æ­¤åŠŸèƒ½ç”Ÿæ•ˆï¼Œ&lt;code>Command.TraverseChildren&lt;/code> å±æ€§è¦ç½®ä¸º &lt;code>false&lt;/code>ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å¦‚æœä½ æƒ³å½»åº•å…³é—­æ­¤åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹è®¾ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DisableSuggestions&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ä½¿ç”¨å¦‚ä¸‹è®¾ç½®è°ƒæ•´å­—ç¬¦ä¸²åŒ¹é…çš„æœ€å°è·ç¦»ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SuggestionsMinimumDistance&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>SuggestionsMinimumDistance&lt;/code> æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºè¾“é”™çš„å‘½ä»¤ä¸æ­£ç¡®çš„å‘½ä»¤æœ€å¤šæœ‰å‡ ä¸ªä¸åŒ¹é…çš„å­—ç¬¦ï¼ˆæœ€å°è·ç¦»ï¼‰ï¼Œæ‰ä¼šç»™å‡ºå»ºè®®ã€‚å¦‚å½“å€¼ä¸º &lt;code>1&lt;/code> æ—¶ï¼Œç”¨æˆ·è¾“å…¥ &lt;code>hugo versiox&lt;/code> ä¼šç»™å‡ºå»ºè®®ï¼Œè€Œå¦‚æœç”¨æˆ·è¾“å…¥ &lt;code>hugo versixx&lt;/code> æ—¶ï¼Œåˆ™ä¸ä¼šç»™å‡ºå»ºè®®ï¼Œå› ä¸ºå·²ç»æœ‰ä¸¤ä¸ªå­—æ¯ä¸åŒ¹é… &lt;code>version&lt;/code> äº†ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="shell-è¡¥å…¨">
&lt;a href="#shell-%e8%a1%a5%e5%85%a8" class="header-anchor">#&lt;/a>
Shell è¡¥å…¨
&lt;/h2>&lt;p>æœ¬æ–‡åœ¨è®²&lt;a class="link" href="#%e6%b7%bb%e5%8a%a0%e5%ad%90%e5%91%bd%e4%bb%a4" >æ·»åŠ å­å‘½ä»¤&lt;/a>å°èŠ‚æ—¶ï¼Œæˆ‘ä»¬è§åˆ°è¿‡ &lt;code>completion&lt;/code> å­å‘½ä»¤ï¼Œå¯ä»¥ä¸ºæŒ‡å®šçš„ Shell ç”Ÿæˆè‡ªåŠ¨è¡¥å…¨è„šæœ¬ï¼Œç°åœ¨æˆ‘ä»¬å°±æ¥è®²è§£å®ƒçš„ç”¨æ³•ã€‚&lt;/p>
&lt;p>ç›´æ¥æ‰§è¡Œ &lt;code>hugo completion -h&lt;/code> å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å®ƒæ”¯æŒçš„å‡ ç§ Shell ç±»å‹ &lt;code>bash&lt;/code>ã€&lt;code>fish&lt;/code>ã€&lt;code>powershell&lt;/code>ã€&lt;code>zsh&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go completion -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generate the autocompletion script &lt;span class="k">for&lt;/span> tools &lt;span class="k">for&lt;/span> the specified shell.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">See each sub-command&lt;span class="err">&amp;#39;&lt;/span>s &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> details on how to use the generated script.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tools completion &lt;span class="o">[&lt;/span>command&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Available Commands:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bash Generate the autocompletion script &lt;span class="k">for&lt;/span> bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fish Generate the autocompletion script &lt;span class="k">for&lt;/span> fish
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> powershell Generate the autocompletion script &lt;span class="k">for&lt;/span> powershell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> zsh Generate the autocompletion script &lt;span class="k">for&lt;/span> zsh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h, --help &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> completion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Global Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --author string Author name &lt;span class="k">for&lt;/span> copyright attribution &lt;span class="o">(&lt;/span>default &lt;span class="s2">&amp;#34;YOUR NAME&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v, --verbose Verbose output
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Use &lt;span class="s2">&amp;#34;tools completion [command] --help&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> more information about a command.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¦æƒ³çŸ¥é“è‡ªå·±æ­£åœ¨ä½¿ç”¨çš„ Shell ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/bin/zsh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$SHELL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/bin/zsh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ &lt;code>zsh&lt;/code>ï¼Œæ‰€ä»¥æˆ‘å°±ä»¥ &lt;code>zsh&lt;/code> ä¸ºä¾‹ï¼Œæ¥æ¼”ç¤ºä¸‹ &lt;code>completion&lt;/code> å‘½ä»¤è¡¥å…¨ç”¨æ³•ã€‚&lt;/p>
&lt;p>ä½¿ç”¨ &lt;code>-h/--help&lt;/code> æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä½¿ç”¨è¯´æ˜ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./hugo completion zsh -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generate the autocompletion script &lt;span class="k">for&lt;/span> the zsh shell.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If shell completion is not already enabled in your environment you will need
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">to &lt;span class="nb">enable&lt;/span> it. You can execute the following once:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;autoload -U compinit; compinit&amp;#34;&lt;/span> &amp;gt;&amp;gt; ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To load completions in your current shell session:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">source&lt;/span> &amp;lt;&lt;span class="o">(&lt;/span>hugo completion zsh&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To load completions &lt;span class="k">for&lt;/span> every new session, execute once:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#### Linux:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo completion zsh &amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">fpath&lt;/span>&lt;span class="p">[1]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/_hugo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#### macOS:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo completion zsh &amp;gt; &lt;span class="k">$(&lt;/span>brew --prefix&lt;span class="k">)&lt;/span>/share/zsh/site-functions/_hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You will need to start a new shell &lt;span class="k">for&lt;/span> this setup to take effect.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo completion zsh &lt;span class="o">[&lt;/span>flags&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h, --help &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> zsh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --no-descriptions disable completion descriptions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Global Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --author string Author name &lt;span class="k">for&lt;/span> copyright attribution &lt;span class="o">(&lt;/span>default &lt;span class="s2">&amp;#34;YOUR NAME&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v, --verbose verbose output
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®å¸®åŠ©ä¿¡æ¯ï¼Œå¦‚æœä¸ºå½“å‰ä¼šè¯æä¾›å‘½ä»¤è¡Œè¡¥å…¨åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>source &amp;lt;(hugo completion zsh)&lt;/code> å‘½ä»¤æ¥å®ç°ã€‚&lt;/p>
&lt;p>å¦‚æœè¦è®©å‘½ä»¤è¡Œè¡¥å…¨åŠŸèƒ½æ°¸ä¹…ç”Ÿæ•ˆï¼ŒCobra åˆ™éå¸¸è´´å¿ƒçš„ä¸º Linux å’Œ macOS æä¾›äº†ä¸åŒå‘½ä»¤ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥æ ¹æ®æç¤ºé€‰æ‹©è‡ªå·±å–œæ¬¢çš„æ–¹å¼æ¥å®ç°å‘½ä»¤è¡Œè¡¥å…¨åŠŸèƒ½ã€‚&lt;/p>
&lt;p>æˆ‘è¿™é‡Œåªå®ç°ä¸ºå½“å‰ä¼šè¯æä¾›å‘½ä»¤è¡Œè¡¥å…¨åŠŸèƒ½ä¸ºä¾‹è¿›è¡Œæ¼”ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># é¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œå®‰è£… hugo å‘½ä»¤è¡Œç¨‹åºï¼Œå®‰è£…åè½¯ä»¶å­˜æ”¾åœ¨ $GOPATH/bin ç›®å½•ä¸‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go install .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ·»åŠ å‘½ä»¤è¡Œè¡¥å…¨åŠŸèƒ½&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">source&lt;/span> &amp;lt;&lt;span class="o">(&lt;/span>hugo completion zsh&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç°åœ¨å‘½ä»¤è¡Œè¡¥å…¨å·²ç»ç”Ÿæ•ˆï¼Œåªéœ€è¦è¾“å…¥ä¸€ä¸ª `v`ï¼Œç„¶åæŒ‰ä¸‹é”®ç›˜ä¸Šçš„ `Tab` é”®ï¼Œå‘½ä»¤å°†è‡ªåŠ¨è¡¥å…¨ä¸º `version`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ hugo v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å‘½ä»¤å·²è¢«è‡ªåŠ¨è¡¥å…¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ hugo version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version PersistentPreRun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version PreRun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hugo Static Site Generator v0.9 -- HEAD
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶å®å°†å‘½ä»¤ &lt;code>source &amp;lt;(hugo completion zsh)&lt;/code> æ·»åŠ åˆ° &lt;code>~/.zshrc&lt;/code> æ–‡ä»¶ä¸­ï¼Œä¹Ÿèƒ½å®ç°æ¯æ¬¡è¿›å…¥ &lt;code>zsh&lt;/code> åè‡ªåŠ¨åŠ è½½ &lt;code>hugo&lt;/code> çš„å‘½ä»¤è¡Œè¡¥å…¨åŠŸèƒ½ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šåœ¨æ‰§è¡Œ &lt;code>source &amp;lt;(hugo completion zsh)&lt;/code> å‰éœ€è¦å°† &lt;code>rootCmd&lt;/code> ä¸­çš„é’©å­å‡½æ•°å†…éƒ¨çš„ &lt;code>fmt.Println&lt;/code> ä»£ç å…¨éƒ¨æ³¨é‡Šæ‰ï¼Œä¸ç„¶æ‰“å°å†…å®¹ä¼šè¢«å½“ä½œå‘½ä»¤æ¥æ‰§è¡Œï¼Œå°†ä¼šå¾—åˆ° &lt;code>Error: unknown command &amp;quot;PersistentPreRunE&amp;quot; for &amp;quot;hugo&amp;quot;&lt;/code> ç±»ä¼¼æŠ¥é”™ä¿¡æ¯ï¼Œè™½ç„¶å‘½ä»¤è¡Œè¡¥å…¨åŠŸèƒ½ä¾ç„¶èƒ½å¤Ÿç”Ÿæ•ˆï¼Œä½†ã€Œæ²¡æœ‰æ¶ˆæ¯æ‰æ˜¯æœ€å¥½çš„æ¶ˆæ¯ã€ã€‚&lt;/p>
&lt;p>è¿˜æœ‰è¦æ³¨æ„ï¼šä¸»å‘½ä»¤è¦ä¸é¡¹ç›®åï¼ˆæ„å»ºä¹‹åçš„å‘½ä»¤ï¼‰ä¸€ç›´ï¼Œä¸ç„¶ä¹Ÿä¸ä¼šè‡ªåŠ¨è¡¥å…¨ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="ç”Ÿæˆæ–‡æ¡£">
&lt;a href="#%e7%94%9f%e6%88%90%e6%96%87%e6%a1%a3" class="header-anchor">#&lt;/a>
ç”Ÿæˆæ–‡æ¡£
&lt;/h2>&lt;p>Cobra æ”¯æŒç”Ÿæˆ &lt;code>Markdown&lt;/code>ã€&lt;code>ReStructured Text&lt;/code>ã€&lt;code>Man Page&lt;/code> ä¸‰ç§æ ¼å¼æ–‡æ¡£ã€‚&lt;/p>
&lt;p>è¿™é‡Œä»¥ç”Ÿæˆ &lt;code>Markdown&lt;/code> æ ¼å¼æ–‡æ¡£ä¸ºä¾‹ï¼Œæ¥æ¼”ç¤ºä¸‹ Cobra è¿™ä¸€å¼ºå¤§åŠŸèƒ½ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæ ‡å¿— &lt;code>md-docs&lt;/code> æ¥å†³å®šæ˜¯å¦ç”Ÿæˆæ–‡æ¡£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// hugo/cmd/root.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/spf13/cobra/doc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">MarkdownDocs&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">BoolVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">MarkdownDocs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;md-docs&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;gen Markdown docs&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">GenDocs&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">MarkdownDocs&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">doc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GenMarkdownTree&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;./docs/md&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ &lt;code>main.go&lt;/code> ä¸­è°ƒç”¨ &lt;code>GenDocs()&lt;/code> å‡½æ•°ã€‚æ³¨æ„&lt;code>./docs/md&lt;/code>è·¯å¾„å¿…é¡»å­˜åœ¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GenDocs&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ï¼Œé‡æ–°ç¼–è¯‘å¹¶è¿è¡Œ &lt;code>hugo&lt;/code> å³å¯ç”Ÿæˆæ–‡æ¡£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="k">go&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">o&lt;/span> &lt;span class="nx">hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">ç”Ÿæˆæ–‡æ¡£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">hugo&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">docs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="nx">ä¼šæ‰§è¡Œrootå‘½ä»¤çš„Runå‡½æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">æŸ¥çœ‹ç”Ÿæˆçš„æ–‡æ¡£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="nx">tree&lt;/span> &lt;span class="nx">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">hugo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">hugo_completion&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">hugo_completion_bash&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">hugo_completion_fish&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">hugo_completion_powershell&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">hugo_completion_zsh&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">hugo_print&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â””â”€â”€&lt;/span> &lt;span class="nx">hugo_version&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">md&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼ŒCobra ä¸ä»…ä¸º &lt;code>hugo&lt;/code> å‘½ä»¤ç”Ÿæˆäº†æ–‡æ¡£ï¼Œå¹¶ä¸”è¿˜ç”Ÿæˆäº†å­å‘½ä»¤çš„æ–‡æ¡£ä»¥åŠå‘½ä»¤è¡Œè¡¥å…¨çš„æ–‡æ¡£ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="ä½¿ç”¨-cobra-å‘½ä»¤åˆ›å»ºé¡¹ç›®">
&lt;a href="#%e4%bd%bf%e7%94%a8-cobra-%e5%91%bd%e4%bb%a4%e5%88%9b%e5%bb%ba%e9%a1%b9%e7%9b%ae" class="header-anchor">#&lt;/a>
ä½¿ç”¨ Cobra å‘½ä»¤åˆ›å»ºé¡¹ç›®
&lt;/h2>&lt;p>æ–‡ç« è¯»åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå…¶å® Cobra é¡¹ç›®æ˜¯éµå¾ªä¸€å®šå¥—è·¯çš„ï¼Œç›®å½•ç»“æ„ã€æ–‡ä»¶ã€æ¨¡æ¿ä»£ç éƒ½æ¯”è¾ƒå›ºå®šã€‚&lt;/p>
&lt;p>æ­¤æ—¶ï¼Œè„šæ‰‹æ¶å·¥å…·å°±æ´¾ä¸Šç”¨åœºäº†ã€‚Cobra æä¾›äº† &lt;code>cobra-cli&lt;/code> å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤çš„æ–¹å¼å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå‘½ä»¤è¡Œé¡¹ç›®ã€‚&lt;/p>
&lt;p>å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go install github.com/spf13/cobra-cli@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ cobra-cli -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cobra is a CLI library &lt;span class="k">for&lt;/span> Go that empowers applications.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This application is a tool to generate the needed files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">to quickly create a Cobra application.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cobra-cli &lt;span class="o">[&lt;/span>command&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Available Commands:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> add Add a &lt;span class="nb">command&lt;/span> to a Cobra Application
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> completion Generate the autocompletion script &lt;span class="k">for&lt;/span> the specified shell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">help&lt;/span> Help about any &lt;span class="nb">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> init Initialize a Cobra Application
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -a, --author string author name &lt;span class="k">for&lt;/span> copyright attribution &lt;span class="o">(&lt;/span>default &lt;span class="s2">&amp;#34;YOUR NAME&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --config string config file &lt;span class="o">(&lt;/span>default is &lt;span class="nv">$HOME&lt;/span>/.cobra.yaml&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h, --help &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> cobra-cli
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -l, --license string name of license &lt;span class="k">for&lt;/span> the project
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --viper use Viper &lt;span class="k">for&lt;/span> configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Use &lt;span class="s2">&amp;#34;cobra-cli [command] --help&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> more information about a command.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œ&lt;code>cobra-cli&lt;/code> è„šæ‰‹æ¶å·¥å…·ä»…æä¾›äº†å°‘é‡å‘½ä»¤å’Œæ ‡å¿—ï¼Œæ‰€ä»¥ä¸Šæ‰‹éš¾åº¦ä¸å¤§ã€‚&lt;/p>
&lt;h3 id="åˆå§‹åŒ–æ¨¡å—">
&lt;a href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e6%a8%a1%e5%9d%97" class="header-anchor">#&lt;/a>
åˆå§‹åŒ–æ¨¡å—
&lt;/h3>&lt;p>è¦ä½¿ç”¨ &lt;code>cobra-cli&lt;/code> ç”Ÿæˆä¸€ä¸ªé¡¹ç›®ï¼Œé¦–å…ˆè¦æ‰‹åŠ¨åˆ›å»ºé¡¹ç›®æ ¹ç›®å½•å¹¶ä½¿ç”¨ &lt;code>go mod&lt;/code> å‘½ä»¤è¿›è¡Œåˆå§‹åŒ–ã€‚&lt;/p>
&lt;p>å‡è®¾æˆ‘ä»¬è¦ç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºå«ä½œ &lt;code>cob&lt;/code>ï¼Œæ¨¡å—åˆå§‹åŒ–è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ›å»ºé¡¹ç›®ç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ mkdir cob
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è¿›å…¥é¡¹ç›®ç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">cd&lt;/span> cob
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆå§‹åŒ–æ¨¡å—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go mod init github.com/arlettebrook/cob
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åˆå§‹åŒ–å‘½ä»¤è¡Œç¨‹åº">
&lt;a href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e5%91%bd%e4%bb%a4%e8%a1%8c%e7%a8%8b%e5%ba%8f" class="header-anchor">#&lt;/a>
åˆå§‹åŒ–å‘½ä»¤è¡Œç¨‹åº
&lt;/h3>&lt;p>æœ‰äº†åˆå§‹åŒ–å¥½çš„ Go é¡¹ç›®ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆå§‹åŒ–å‘½ä»¤è¡Œç¨‹åºäº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆå§‹åŒ–ç¨‹åº&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cobra-cli init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your Cobra application is ready at
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æŸ¥çœ‹ç”Ÿæˆçš„é¡¹ç›®ç›®å½•ç»“æ„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tree .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ LICENSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ cmd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ root.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.sum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span> directories, &lt;span class="m">5&lt;/span> files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ‰§è¡Œå‘½ä»¤è¡Œç¨‹åº&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">A longer description that spans multiple lines and likely contains
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examples and usage of using your application. For example:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cobra is a CLI library &lt;span class="k">for&lt;/span> Go that empowers applications.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This application is a tool to generate the needed files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">to quickly create a Cobra application.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ &lt;code>cobra-cli&lt;/code> åˆå§‹åŒ–ç¨‹åºéå¸¸æ–¹ä¾¿ï¼Œåªéœ€è¦ä¸€ä¸ªç®€å•çš„ &lt;code>init&lt;/code> å‘½ä»¤å³å¯å®Œæˆã€‚&lt;/p>
&lt;p>ç›®å½•ç»“æ„è·Ÿæˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™çš„ç¨‹åºç›¸åŒï¼Œåªä¸è¿‡å¤šäº†ä¸€ä¸ª &lt;code>LICENSE&lt;/code> æ–‡ä»¶ï¼Œç”¨æ¥å­˜æ”¾é¡¹ç›®çš„å¼€æºè®¸å¯è¯ã€‚&lt;/p>
&lt;p>é€šè¿‡ &lt;code>go run main.go&lt;/code> æ‰§è¡Œè¿™ä¸ªå‘½ä»¤è¡Œç¨‹åºï¼Œå³å¯æ‰“å° &lt;code>rootCmd.Run&lt;/code> çš„è¾“å‡ºç»“æœã€‚&lt;/p>
&lt;p>ä½¿ç”¨è„šæ‰‹æ¶è‡ªåŠ¨ç”Ÿæˆçš„ &lt;code>cob/main.go&lt;/code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Copyright Â© 2024 NAME HERE &amp;lt;EMAIL ADDRESS&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/arlettebrook/cob/cmd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è‡ªåŠ¨ç”Ÿæˆçš„ &lt;code>cog/cmd/root.go&lt;/code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Copyright Â© 2023 NAME HERE &amp;lt;EMAIL ADDRESS&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">cmd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/cobra&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// rootCmd represents the base command when called without any subcommands
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">rootCmd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cobra&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Command&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Use&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;cog&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Short&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;A brief description of your application&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Long&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">`A longer description that spans multiple lines and likely contains
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">examples and usage of using your application. For example:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">Cobra is a CLI library for Go that empowers applications.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">This application is a tool to generate the needed files
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">to quickly create a Cobra application.`&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Uncomment the following line if your bare application
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// has an action associated with it:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Run: func(cmd *cobra.Command, args []string) { },
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Execute adds all child commands to the root command and sets flags appropriately.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// This is called by main.main(). It only needs to happen once to the rootCmd.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">Execute&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Execute&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Here you will define your flags and configuration settings.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Cobra supports persistent flags, which, if defined here,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// will be global for your application.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// rootCmd.PersistentFlags().StringVar(&amp;amp;cfgFile, &amp;#34;config&amp;#34;, &amp;#34;&amp;#34;, &amp;#34;config file (default is $HOME/.cog.yaml)&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Cobra also supports local flags, which will only run
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// when this action is called directly.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">rootCmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">BoolP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;toggle&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;t&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Help message for toggle&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šä¸¤ä¸ªæ–‡ä»¶è·Ÿæˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™çš„ä»£ç æ²¡ä»€ä¹ˆä¸¤æ ·ï¼Œå¥—è·¯å®Œå…¨ç›¸åŒï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯æ¯ä¸ªæ–‡ä»¶å¤´éƒ¨éƒ½ä¼šå¤šå‡ºæ¥ä¸€ä¸ª &lt;code>Copyright&lt;/code> å¤´ä¿¡æ¯ï¼Œç”¨æ¥æ ‡è®°ä»£ç çš„ &lt;code>LICENSE&lt;/code>ã€‚&lt;/p>
&lt;h3 id="å¯é€‰æ ‡å¿—">
&lt;a href="#%e5%8f%af%e9%80%89%e6%a0%87%e5%bf%97" class="header-anchor">#&lt;/a>
å¯é€‰æ ‡å¿—
&lt;/h3>&lt;p>&lt;code>cobra-cli&lt;/code> æä¾›äº†å¦‚ä¸‹ä¸‰ä¸ªæ ‡å¿—åˆ†åˆ«ç”¨æ¥è®¾ç½®é¡¹ç›®çš„ä½œè€…ã€è®¸å¯è¯ç±»å‹ã€æ˜¯å¦ä½¿ç”¨ Viper ç®¡ç†é…ç½®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ cobra-cli init --author arlettebrook --license mit --viper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your Cobra application is ready at
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šå‘½ä»¤æˆ‘ä»¬æŒ‡å®šå¯é€‰æ ‡å¿—åå¯¹é¡¹ç›®è¿›è¡Œäº†é‡æ–°åˆå§‹åŒ–ã€‚&lt;/p>
&lt;p>ç°åœ¨ &lt;code>LICENSE&lt;/code> æ–‡ä»¶å†…å®¹ä¸å†ä¸ºç©ºï¼Œè€Œæ˜¯ &lt;code>MIT&lt;/code> åè®®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">The MIT License &lt;span class="o">(&lt;/span>MIT&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copyright Â© &lt;span class="m">2024&lt;/span> arlettebrook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Permission is hereby granted...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¹¶ä¸” Go æ–‡ä»¶ &lt;code>Copyright&lt;/code> å¤´ä¿¡æ¯ä¸­ä½œè€…ä¿¡æ¯ä¹Ÿä¼šè¢«è¡¥å…¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Copyright Â© 2024 arlettebrook
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>ç¬”è®°ï¼š&lt;code>cobra-cli&lt;/code> å‘½ä»¤å†…ç½®å¼€æºè®¸å¯è¯æ”¯æŒ &lt;code>GPLv2&lt;/code>ã€&lt;code>GPLv3&lt;/code>ã€&lt;code>LGPL&lt;/code>ã€&lt;code>AGPL&lt;/code>ã€&lt;code>MIT&lt;/code>ã€&lt;code>2-Clause BSD&lt;/code> æˆ– &lt;code>3-Clause BSD&lt;/code>ã€‚ä¹Ÿå¯ä»¥å‚è€ƒ&lt;a class="link" href="https://github.com/spf13/cobra-cli/blob/main/README.md#configuring-the-cobra-generator" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡æ¡£&lt;/a>æ¥æŒ‡å®šè‡ªå®šä¹‰è®¸å¯è¯ã€‚&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>æç¤ºï¼šå¦‚æœä½ å¯¹å¼€æºè®¸å¯è¯ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« &lt;a class="link" href="https://arlettebrook.github.io/p/open-source-license-introduction/" target="_blank" rel="noopener"
>ã€ŠOpen Source License Introductionã€‹&lt;/a>ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="æ·»åŠ å‘½ä»¤">
&lt;a href="#%e6%b7%bb%e5%8a%a0%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
æ·»åŠ å‘½ä»¤
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ cobra-cli add serve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cobra-cli add config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cobra-cli add create -p configCmd --author arlettebrook --license mit --viper
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œåˆ†åˆ«æ·»åŠ äº†ä¸‰ä¸ªå‘½ä»¤ &lt;code>serve&lt;/code>ã€&lt;code>config&lt;/code>ã€&lt;code>create&lt;/code>ï¼Œå‰ä¸¤è€…éƒ½æ˜¯ &lt;code>rootCmd&lt;/code> çš„å­å‘½ä»¤ï¼Œ&lt;code>create&lt;/code> å‘½ä»¤åˆ™é€šè¿‡ &lt;code>-p 'configCmd'&lt;/code> å‚æ•°æŒ‡å®šä¸º &lt;code>config&lt;/code> çš„å­å‘½ä»¤ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„âš ï¸ï¼šä½¿ç”¨ &lt;code>-p 'configCmd'&lt;/code> æ ‡å¿—æŒ‡å®šå½“å‰å‘½ä»¤çš„çˆ¶å‘½ä»¤æ—¶ï¼Œ&lt;code>configCmd&lt;/code> å¿…é¡»æ˜¯å°é©¼å³°å‘½åæ³•ï¼Œå› ä¸º &lt;code>cobra-cli&lt;/code> ä¸º &lt;code>config&lt;/code> ç”Ÿæˆçš„å‘½ä»¤ä»£ç è‡ªåŠ¨å‘½åä¸º &lt;code>configCmd&lt;/code>ï¼Œè€Œä¸æ˜¯ &lt;code>config_cmd&lt;/code> æˆ–å…¶ä»–å½¢å¼ï¼Œè¿™ç¬¦åˆ Go è¯­è¨€å˜é‡å‘½åè§„èŒƒã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ç°åœ¨å‘½ä»¤è¡Œç¨‹åºç›®å½•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ tree .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ LICENSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ cmd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ config.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ create.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ root.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ serve.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ go.sum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span> directories, &lt;span class="m">8&lt;/span> files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œå­å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go config create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">create called
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä»–æ–°æ·»åŠ çš„å‘½ä»¤åŒç†ã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨é…ç½®å–ä»£æ ‡å¿—">
&lt;a href="#%e4%bd%bf%e7%94%a8%e9%85%8d%e7%bd%ae%e5%8f%96%e4%bb%a3%e6%a0%87%e5%bf%97" class="header-anchor">#&lt;/a>
ä½¿ç”¨é…ç½®å–ä»£æ ‡å¿—
&lt;/h3>&lt;p>å¦‚æœä½ ä¸æƒ³æ¯æ¬¡ç”Ÿæˆæˆ–æ·»åŠ å‘½ä»¤æ—¶éƒ½æŒ‡å®šé€‰é¡¹å‚æ•°ï¼Œåˆ™å¯ä»¥å®šä¹‰ &lt;code>~/.cobra.yaml&lt;/code> æ–‡ä»¶æ¥ä¿å­˜é…ç½®ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">author&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arlettebrook &amp;lt;arlettebrook@proton.me&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">year&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2024&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">license&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">MIT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">useViper&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å†æ¬¡ä½¿ç”¨ &lt;code>init&lt;/code> å‘½ä»¤åˆå§‹åŒ–ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ cobra-cli init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using config file: C:&lt;span class="se">\U&lt;/span>sers&lt;span class="se">\L&lt;/span>enovo&lt;span class="se">\.&lt;/span>cobra.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¼šæç¤ºä½¿ç”¨äº† &lt;code>~/.cobra.yaml&lt;/code> é…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;p>ç°åœ¨ &lt;code>LICENSE&lt;/code> æ–‡ä»¶å†…å®¹æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">The MIT License &lt;span class="o">(&lt;/span>MIT&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copyright Â© &lt;span class="m">2024&lt;/span> arlettebrook &amp;lt;arlettebrook@proton.me&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Go æ–‡ä»¶ &lt;code>Copyright&lt;/code> å¤´ä¿¡æ¯ä¹Ÿä¼šåŒ…å«æ—¥æœŸã€ç”¨æˆ·åã€ç”¨æˆ·é‚®ç®±ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Copyright Â© 2024 arlettebrook &amp;lt;arlettebrook@proton.me&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ä¸æƒ³æŠŠé…ç½®ä¿å­˜åœ¨ &lt;code>~/.cobra.yaml&lt;/code> ä¸­ï¼Œ&lt;code>cobra-cli&lt;/code> è¿˜æä¾›äº† &lt;code>--config&lt;/code> æ ‡å¿—æ¥æŒ‡å®šä»»æ„ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚&lt;/p>
&lt;p>è‡³æ­¤ï¼Œ&lt;code>cobra-cli&lt;/code> çš„åŠŸèƒ½æˆ‘ä»¬å°±éƒ½è®²è§£å®Œæˆäº†ï¼Œè¿˜æ˜¯éå¸¸æ–¹ä¾¿å®ç”¨çš„ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼Œç¼–å†™å‘½ä»¤è¡Œç¨‹åºæ˜¯å¿…ä¸å¯å°‘ï¼Œå¾ˆå¤šå¼€æºè½¯ä»¶éƒ½å…·å¤‡å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¦‚ K8sã€Dockerã€Git ç­‰ã€‚&lt;/p>
&lt;p>ä¸€æ¬¾å¤æ‚çš„å‘½ä»¤è¡Œç¨‹åºé€šå¸¸æœ‰ä¸Šç™¾ç§ä½¿ç”¨ç»„åˆï¼Œæ‰€ä»¥å¦‚ä½•ç»„ç»‡å’Œç¼–å†™å‡ºå¥½ç”¨çš„å‘½ä»¤è¡Œç¨‹åºæ˜¯å¾ˆè€ƒéªŒå¼€å‘è€…åŠŸåº•çš„ï¼Œè€Œ Cobra åˆ™ä¸ºæˆ‘ä»¬å¼€å‘å‘½ä»¤è¡Œç¨‹åºæä¾›äº†è¶³å¤Ÿçš„ä¾¿åˆ©ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘å°†å…¶ç§°ä¸ºå‘½ä»¤è¡Œæ¡†æ¶ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ª Go ç¬¬ä¸‰æ–¹åº“ã€‚&lt;/p>
&lt;p>Cobra åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œè¦ä½¿ç”¨å®ƒæ¥ç¼–å†™å‘½ä»¤è¡Œç¨‹åºé¦–å…ˆè¦æ˜ç™½ä¸‰ä¸ªæ¦‚å¿µï¼šå‘½ä»¤ã€å‚æ•°å’Œæ ‡å¿—ã€‚&lt;/p>
&lt;p>Cobra ä¸ä»…æ”¯æŒå­å‘½ä»¤ï¼Œè¿˜èƒ½å¤Ÿå®Œç¾å…¼å®¹ pflag å’Œ Viper åŒ…ï¼Œå› ä¸ºè¿™ä¸‰ä¸ªåŒ…éƒ½æ˜¯åŒä¸€ä¸ªä½œè€…å¼€å‘çš„ã€‚å…³äºæ ‡å¿—ï¼ŒCobra æ”¯æŒæŒä¹…æ ‡å¿—ã€æœ¬åœ°æ ‡å¿—ä»¥åŠå°†æ ‡å¿—æ ‡è®°ä¸ºå¿…é€‰ã€‚Cobra å¯ä»¥å°†æ ‡å¿—ç»‘å®šåˆ° Viperï¼Œæ–¹ä¾¿ä½¿ç”¨ &lt;code>viper.Get()&lt;/code> æ¥è·å–æ ‡å¿—çš„å€¼ã€‚å¯¹äºå‘½ä»¤è¡Œå‚æ•°ï¼ŒCobra æä¾›äº†ä¸å°‘éªŒè¯å‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰éªŒè¯å‡½æ•°ã€‚&lt;/p>
&lt;p>Cobra è¿˜æä¾›äº†å‡ ä¸ª Hooks å‡½æ•° &lt;code>PersistentPreRun&lt;/code>ã€&lt;code>PreRun&lt;/code>ã€&lt;code>PostRun&lt;/code>ã€&lt;code>PersistentPostRun&lt;/code>ï¼Œå¯ä»¥åˆ†åˆ«åœ¨æ‰§è¡Œ &lt;code>Run&lt;/code> å‰åæ¥å¤„ç†ä¸€æ®µé€»è¾‘ã€‚&lt;/p>
&lt;p>å¦‚æœè§‰å¾— Cobra æä¾›çš„é»˜è®¤å¸®åŠ©ä¿¡æ¯ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰è‡ªå·±çš„ Help å‘½ä»¤å’Œ Usage Messageï¼Œéå¸¸çµæ´»ã€‚&lt;/p>
&lt;p>Cobra è¿˜æ”¯æŒæœªçŸ¥å‘½ä»¤çš„æ™ºèƒ½æç¤ºåŠŸèƒ½ä»¥åŠ Shell è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œæ­¤å¤–ï¼Œå®ƒè¿˜æ”¯æŒè‡ªåŠ¨ç”Ÿæˆ &lt;code>Markdown&lt;/code>ã€&lt;code>ReStructured Text&lt;/code>ã€&lt;code>Man Page&lt;/code> ä¸‰ç§æ ¼å¼çš„æ–‡æ¡£ã€‚è¿™å¯¹å‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨è€…æ¥è¯´éå¸¸å‹å¥½ï¼Œè¿˜èƒ½æå¤§å‡å°‘å¼€å‘è€…çš„å·¥ä½œé‡ã€‚&lt;/p>
&lt;p>æœ€åï¼ŒCobra çš„å‘½ä»¤è¡Œå·¥å…· &lt;code>cobra-cli&lt;/code> è¿›ä¸€æ­¥æé«˜äº†ç¼–å†™å‘½ä»¤è¡Œç¨‹åºçš„æ•ˆç‡ï¼Œéå¸¸æ¨èä½¿ç”¨ã€‚&lt;/p>
&lt;p>æœ¬æ–‡å®Œæ•´ &lt;a class="link" href="https://github.com/jianghushinian/blog-go-example/tree/main/cobra/getting-started" target="_blank" rel="noopener"
>ä»£ç &lt;/a> (å‚è€ƒ&lt;a class="link" href="https://github.com/jianghushinian/" target="_blank" rel="noopener"
>@jianghushinian&lt;/a>ï¼‰ï¼Œæ¬¢è¿ç‚¹å‡»æŸ¥çœ‹ã€‚&lt;/p>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>Cobra å®˜ç½‘ï¼šhttps://cobra.dev/&lt;/li>
&lt;li>Cobra æºç ï¼šhttps://github.com/spf13/cobra&lt;/li>
&lt;li>Cobra æ–‡æ¡£ï¼šhttps://pkg.go.dev/github.com/spf13/cobra&lt;/li>
&lt;li>Cobra-CLI æ–‡æ¡£ï¼šhttps://github.com/spf13/cobra-cli/blob/main/README.md&lt;/li>
&lt;li>åŸæ–‡åœ°å€ï¼š&lt;a class="link" href="https://jianghushinian.cn/2023/05/08/go-modern-command-line-framework-cobra-details/" target="_blank" rel="noopener"
>Go è¯­è¨€ç°ä»£å‘½ä»¤è¡Œæ¡†æ¶ Cobra è¯¦è§£&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Goè§£æå‘½ä»¤è¡Œå‚æ•°ä¹‹ç¬¬ä¸‰æ–¹åº“pflag</title><link>https://arlettebrook.github.io/p/go%E8%A7%A3%E6%9E%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93pflag/</link><pubDate>Thu, 02 May 2024 15:21:19 +0800</pubDate><guid>https://arlettebrook.github.io/p/go%E8%A7%A3%E6%9E%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93pflag/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>åœ¨ä½¿ç”¨ Go è¿›è¡Œå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå‘½ä»¤è¡Œå‚æ•°è§£ææ˜¯æˆ‘ä»¬ç»å¸¸é‡åˆ°çš„éœ€æ±‚ã€‚å°½ç®¡ Go æ ‡å‡†åº“æä¾›äº† flag åŒ…ç”¨äºå®ç°å‘½ä»¤è¡Œå‚æ•°è§£æï¼Œä½†åªèƒ½æ»¡è¶³åŸºæœ¬éœ€è¦ï¼Œä¸æ”¯æŒé«˜çº§ç‰¹æ€§ã€‚äºæ˜¯ Go ç¤¾åŒºä¸­å‡ºç°äº†ä¸€ä¸ªå« pflag çš„ç¬¬ä¸‰æ–¹åŒ…ï¼ŒåŠŸèƒ½æ›´åŠ å…¨é¢ä¸”è¶³å¤Ÿå¼ºå¤§ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¹¶æŒæ¡å¦‚ä½•ä½¿ç”¨ pflagã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="ç‰¹ç‚¹">
&lt;a href="#%e7%89%b9%e7%82%b9" class="header-anchor">#&lt;/a>
ç‰¹ç‚¹
&lt;/h2>&lt;p>pflag ä½œä¸º Go å†…ç½® flag åŒ…çš„æ›¿ä»£å“ï¼Œå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>å®ç°äº† POSIX/GNU é£æ ¼çš„ â€“flagsã€‚&lt;/li>
&lt;li>pflag ä¸&lt;a class="link" href="https://www.gnu.org/software/libc/manual/html_node/index.html" target="_blank" rel="noopener"
>ã€ŠThe GNU C Libraryã€‹&lt;/a> ä¸­ã€Œ25.1.1 ç¨‹åºå‚æ•°è¯­æ³•çº¦å®šã€ç« èŠ‚ä¸­ &lt;a class="link" href="https://www.gnu.org/software/libc/manual/html_node/Argument-Syntax.html" target="_blank" rel="noopener"
>POSIX å»ºè®®è¯­æ³•&lt;/a>å…¼å®¹ã€‚&lt;/li>
&lt;li>å…¼å®¹ Go æ ‡å‡†åº“ä¸­çš„ flag åŒ…ã€‚å¦‚æœç›´æ¥ä½¿ç”¨ flag åŒ…å®šä¹‰çš„å…¨å±€ &lt;code>FlagSet&lt;/code> å¯¹è±¡ &lt;code>CommandLine&lt;/code>ï¼Œåˆ™å®Œå…¨å…¼å®¹ï¼›å¦åˆ™å½“ä½ æ‰‹åŠ¨å®ä¾‹åŒ–äº† &lt;code>FlagSet&lt;/code> å¯¹è±¡ï¼Œè¿™æ—¶å°±éœ€è¦ä¸ºæ¯ä¸ªæ ‡å¿—è®¾ç½®ä¸€ä¸ªç®€çŸ­æ ‡å¿—ï¼ˆ&lt;code>Shorthand&lt;/code>ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="ä½¿ç”¨">
&lt;a href="#%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
ä½¿ç”¨
&lt;/h2>&lt;h3 id="åŸºæœ¬ç”¨æ³•">
&lt;a href="#%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95" class="header-anchor">#&lt;/a>
åŸºæœ¬ç”¨æ³•
&lt;/h3>&lt;p>å®‰è£…&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">go get -u github.com/spf13/pflag
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¼å…¥&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨ Go æ ‡å‡†åº“ä¸­çš„ flag åŒ…ä¸€æ ·ä½¿ç”¨ pflagã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">host&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">host&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">host&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">h&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">v&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">host&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Type&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;host&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">ip&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1234&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for ip&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IntVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">8080&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for port&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">h&lt;/span> &lt;span class="nx">host&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Var&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;host&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for host&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è§£æå‘½ä»¤è¡Œå‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip: %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port: %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;host: %+v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;NFlag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NFlag&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1">// è¿”å›å·²è®¾ç½®çš„å‘½ä»¤è¡Œæ ‡å¿—ä¸ªæ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;NArg: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NArg&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1">// è¿”å›å¤„ç†å®Œæ ‡å¿—åå‰©ä½™çš„å‚æ•°ä¸ªæ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Args: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Args&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1">// è¿”å›å¤„ç†å®Œæ ‡å¿—åå‰©ä½™çš„å‚æ•°åˆ—è¡¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Arg(1): %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Arg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1">// è¿”å›å¤„ç†å®Œæ ‡å¿—åå‰©ä½™çš„å‚æ•°åˆ—è¡¨ä¸­ç¬¬ i é¡¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šç¤ºä¾‹æ¼”ç¤ºçš„ pflag ç”¨æ³•è·Ÿ flag åŒ…ç”¨æ³•ä¸€è‡´ï¼Œå¯ä»¥åšåˆ°äºŒè€…æ— ç¼æ›¿æ¢ã€‚&lt;/p>
&lt;p>ç¤ºä¾‹åˆ†åˆ«ä½¿ç”¨ &lt;code>pflag.Int()&lt;/code>ã€&lt;code>pflag.IntVar()&lt;/code>ã€&lt;code>pflag.Var()&lt;/code> ä¸‰ç§ä¸åŒæ–¹å¼æ¥å£°æ˜æ ‡å¿—ã€‚å…¶ä¸­ &lt;code>ip&lt;/code> å’Œ &lt;code>port&lt;/code> éƒ½æ˜¯ &lt;code>int&lt;/code> ç±»å‹æ ‡å¿—ï¼Œ&lt;code>host&lt;/code> æ ‡å¿—åˆ™ä¸ºè‡ªå®šä¹‰çš„ &lt;code>host&lt;/code> ç±»å‹ï¼Œå®ƒå®ç°äº† &lt;code>pflag.Value&lt;/code> æ¥å£ï¼Œé€šè¿‡å®ç°æ¥å£ç±»å‹ï¼Œæ ‡å¿—èƒ½å¤Ÿæ”¯æŒä»»æ„ç±»å‹ï¼Œå¢åŠ çµæ´»æ€§ã€‚&lt;/p>
&lt;p>é€šè¿‡ &lt;code>--help/-h&lt;/code> å‚æ•°æŸ¥çœ‹å‘½ä»¤è¡Œç¨‹åºä½¿ç”¨å¸®åŠ©ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go --help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage of ./main:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --host host &lt;span class="nb">help&lt;/span> message &lt;span class="k">for&lt;/span> host
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --ip int &lt;span class="nb">help&lt;/span> message &lt;span class="k">for&lt;/span> ip &lt;span class="o">(&lt;/span>default 1234&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --port int &lt;span class="nb">help&lt;/span> message &lt;span class="k">for&lt;/span> port &lt;span class="o">(&lt;/span>default 8080&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pflag: &lt;span class="nb">help&lt;/span> requested
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> status &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œå¸®åŠ©ä¿¡æ¯ä¸­çš„æ ‡å¿—ä½ç½®æ˜¯ç»è¿‡é‡æ–°æ’åºçš„ï¼Œå¹¶ä¸æ˜¯æ ‡å¿—å®šä¹‰çš„é¡ºåºã€‚&lt;/p>
&lt;p>ä¸ flag åŒ…ä¸åŒçš„æ˜¯ï¼Œpflag åŒ…å‚æ•°å®šç•Œç¬¦æ˜¯ä¸¤ä¸ª &lt;code>-&lt;/code>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª &lt;code>-&lt;/code>ï¼Œåœ¨ pflag ä¸­ &lt;code>--&lt;/code> å’Œ &lt;code>-&lt;/code> å…·æœ‰ä¸åŒå«ä¹‰ï¼Œè¿™ç‚¹ç¨åä¼šè¿›è¡Œä»‹ç»ã€‚&lt;/p>
&lt;p>&lt;code>ip&lt;/code> æ ‡å¿—çš„é»˜è®¤å‚æ•°ä¸º &lt;code>1234&lt;/code>ï¼Œ&lt;code>port&lt;/code> æ ‡å¿—çš„é»˜è®¤å‚æ•°ä¸º &lt;code>8080&lt;/code>ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šåœ¨æœ‰äº›ç»ˆç«¯ä¸‹æ‰§è¡Œç¨‹åºé€€å‡ºåï¼Œè¿˜ä¼šå¤šæ‰“å°ä¸€è¡Œ &lt;code>exit status 2&lt;/code>ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ç¨‹åºæ²¡æœ‰æ­£å¸¸é€€å‡ºï¼Œè€Œæ˜¯å› ä¸º &lt;code>--help&lt;/code> æ„å›¾å°±æ˜¯ç”¨æ¥æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©ï¼Œæ‰€ä»¥ç¨‹åºåœ¨æ‰“å°ä½¿ç”¨å¸®åŠ©ä¿¡æ¯åï¼Œä¸»åŠ¨è°ƒç”¨ &lt;code>os.Exit(2)&lt;/code> é€€å‡ºäº†ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>é€šè¿‡å¦‚ä¸‹æ–¹å¼ä½¿ç”¨å‘½ä»¤è¡Œç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go --ip &lt;span class="m">1&lt;/span> x y --host localhost a b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">port: &lt;span class="m">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host: &lt;span class="o">{&lt;/span>value:localhost&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NFlag: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NArg: &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Args: &lt;span class="o">[&lt;/span>x y a b&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Arg&lt;span class="o">(&lt;/span>1&lt;span class="o">)&lt;/span>: y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>ip&lt;/code> æ ‡å¿—çš„é»˜è®¤å€¼å·²è¢«å‘½ä»¤è¡Œå‚æ•° &lt;code>1&lt;/code> æ‰€è¦†ç›–ï¼Œç”±äºæ²¡æœ‰ä¼ é€’ &lt;code>port&lt;/code> æ ‡å¿—ï¼Œæ‰€ä»¥æ‰“å°ç»“æœä¸ºé»˜è®¤å€¼ &lt;code>8080&lt;/code>ï¼Œ&lt;code>host&lt;/code> æ ‡å¿—çš„å€¼ä¹Ÿèƒ½å¤Ÿè¢«æ­£å¸¸æ‰“å°ã€‚&lt;/p>
&lt;p>è¿˜æœ‰ 4 ä¸ªéé€‰é¡¹å‚æ•°æ•° &lt;code>x&lt;/code>ã€&lt;code>y&lt;/code>ã€&lt;code>a&lt;/code>ã€&lt;code>b&lt;/code> ä¹Ÿéƒ½è¢« pflag è¯†åˆ«å¹¶è®°å½•äº†ä¸‹æ¥ã€‚è¿™ç‚¹æ¯” flag è¦å¼ºå¤§ï¼Œåœ¨ flag åŒ…ä¸­ï¼Œéé€‰é¡¹å‚æ•°æ•°åªèƒ½å†™åœ¨æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°æœ€åï¼Œ&lt;code>x&lt;/code>ã€&lt;code>y&lt;/code> å‡ºç°åœ¨è¿™é‡Œç¨‹åºæ˜¯ä¼šæŠ¥é”™çš„ã€‚&lt;/p>
&lt;h3 id="è¿›é˜¶ç”¨æ³•">
&lt;a href="#%e8%bf%9b%e9%98%b6%e7%94%a8%e6%b3%95" class="header-anchor">#&lt;/a>
è¿›é˜¶ç”¨æ³•
&lt;/h3>&lt;p>é™¤äº†åƒ flag åŒ…ä¸€æ ·çš„ç”¨æ³•ï¼Œpflag è¿˜æ”¯æŒä¸€äº›ç‹¬æœ‰çš„ç”¨æ³•ï¼Œä»¥ä¸‹æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">host&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">host&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">host&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">h&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">v&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">h&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">host&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Type&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;host&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flagSet&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewFlagSet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ExitOnError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">ip&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IntP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;i&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1234&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for ip&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">boolVar&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BoolVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">boolVar&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;boolVar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for boolVar&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">h&lt;/span> &lt;span class="nx">host&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">VarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;host&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;H&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for host&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SortFlags&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">parseErr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">parseErr&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;è§£æå‘½ä»¤è¡Œå‚æ•°å‡ºé”™ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">parseErr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip: %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;boolVar: %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">boolVar&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;host: %#v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;i: %d, err: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆæˆ‘ä»¬é€šè¿‡ &lt;code>pflag.NewFlagSet&lt;/code> è‡ªå®šä¹‰äº† &lt;code>FlagSet&lt;/code> å¯¹è±¡ &lt;code>flagset&lt;/code>ï¼Œä¹‹åçš„æ ‡å¿—å®šä¹‰å’Œè§£æéƒ½é€šè¿‡ &lt;code>flagset&lt;/code> æ¥å®Œæˆã€‚&lt;/p>
&lt;p>å‰æ–‡ç¤ºä¾‹ä¸­ &lt;code>pflag.Int()&lt;/code> è¿™ç§ç”¨æ³•ï¼Œå®é™…ä¸Šä½¿ç”¨çš„æ˜¯å…¨å±€ &lt;code>FlagSet&lt;/code> å¯¹è±¡ &lt;code>CommandLine&lt;/code>ï¼Œ&lt;code>CommandLine&lt;/code> å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">CommandLine&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">NewFlagSet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">ExitOnError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨åŒæ ·ä½¿ç”¨ä¸‰ç§ä¸åŒæ–¹å¼æ¥å£°æ˜æ ‡å¿—ï¼Œåˆ†åˆ«ä¸º &lt;code>flagset.IntP()&lt;/code>ã€&lt;code>flagset.BoolVarP()&lt;/code>ã€&lt;code>flagset.VarP()&lt;/code>ã€‚ä¸éš¾å‘ç°ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•çš„å‘½åç»“å°¾éƒ½å¤šäº†ä¸€ä¸ª &lt;code>P&lt;/code>ï¼Œå®ƒä»¬çš„èƒ½åŠ›ä¹Ÿå¾—ä»¥å‡çº§ï¼Œä¸‰ä¸ªæ–¹æ³•éƒ½å¤šäº†ä¸€ä¸ª &lt;code>shorthand string&lt;/code> å‚æ•°ï¼ˆ&lt;code>flagset.IntP&lt;/code> çš„ç¬¬ 2 ä¸ªå‚æ•°ï¼Œ&lt;code>flagset.BoolVarP&lt;/code> å’Œ &lt;code>flagset.VarP&lt;/code> çš„ç¬¬ 3 ä¸ªå‚æ•°ï¼‰ç”¨æ¥è®¾ç½®ç®€çŸ­æ ‡å¿—ã€‚&lt;/p>
&lt;p>ä»å£°æ˜æ ‡å¿—çš„æ–¹æ³•åä¸­æˆ‘ä»¬èƒ½å¤Ÿæ€»ç»“å‡ºä¸€äº›è§„å¾‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>pflag.&amp;lt;Type&amp;gt;&lt;/code> ç±»æ–¹æ³•åä¼šå°†æ ‡å¿—å‚æ•°å€¼å­˜å‚¨åœ¨æŒ‡é’ˆä¸­å¹¶è¿”å›ã€‚&lt;/li>
&lt;li>&lt;code>pflag.&amp;lt;Type&amp;gt;Var&lt;/code> ç±»æ–¹æ³•åä¸­åŒ…å« &lt;code>Var&lt;/code> å…³é”®å­—çš„ï¼Œä¼šå°†æ ‡å¿—å‚æ•°å€¼ç»‘å®šåˆ°ç¬¬ä¸€ä¸ªæŒ‡é’ˆç±»å‹çš„å‚æ•°ã€‚&lt;/li>
&lt;li>&lt;code>pflag.&amp;lt;Type&amp;gt;P&lt;/code>ã€&lt;code>pflag.&amp;lt;Type&amp;gt;VarP&lt;/code> ç±»æ–¹æ³•åä»¥ &lt;code>P&lt;/code> ç»“å°¾çš„ï¼Œæ”¯æŒç®€çŸ­æ ‡å¿—ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä¸ªå®Œæ•´æ ‡å¿—åœ¨å‘½ä»¤è¡Œä¼ å‚æ—¶ä½¿ç”¨çš„åˆ†ç•Œç¬¦ä¸º &lt;code>--&lt;/code>ï¼Œè€Œä¸€ä¸ªç®€çŸ­æ ‡å¿—çš„åˆ†ç•Œç¬¦åˆ™ä¸º &lt;code>-&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>flagset.SortFlags = false&lt;/code> ä½œç”¨æ˜¯ç¦æ­¢æ‰“å°å¸®åŠ©ä¿¡æ¯æ—¶å¯¹æ ‡å¿—è¿›è¡Œé‡æ’åºã€‚&lt;/p>
&lt;p>ç¤ºä¾‹æœ€åï¼Œä½¿ç”¨ &lt;code>flagset.GetInt()&lt;/code> è·å–å‚æ•°çš„å€¼ã€‚&lt;/p>
&lt;p>é€šè¿‡ &lt;code>--help/-h&lt;/code> å‚æ•°æŸ¥çœ‹å‘½ä»¤è¡Œç¨‹åºä½¿ç”¨å¸®åŠ©ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go --help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage of test:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -i, --ip int &lt;span class="nb">help&lt;/span> message &lt;span class="k">for&lt;/span> ip &lt;span class="o">(&lt;/span>default 1234&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -b, --boolVar &lt;span class="nb">help&lt;/span> message &lt;span class="k">for&lt;/span> boolVar &lt;span class="o">(&lt;/span>default &lt;span class="nb">true&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -H, --host host &lt;span class="nb">help&lt;/span> message &lt;span class="k">for&lt;/span> host
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pflag: &lt;span class="nb">help&lt;/span> requested
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> status &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ¬¡çš„å¸®åŠ©ä¿¡æ¯ä¸­ï¼Œæ ‡å¿—é¡ºåºæ²¡æœ‰è¢«æ”¹å˜ï¼Œå°±æ˜¯å£°æ˜çš„é¡ºåºã€‚&lt;/p>
&lt;p>æ¯ä¸€ä¸ªæ ‡å¿—éƒ½ä¼šå¯¹åº”ä¸€ä¸ªç®€çŸ­æ ‡å¿—ï¼Œå¦‚ &lt;code>-b&lt;/code> å’Œ &lt;code>--boolVar&lt;/code> æ˜¯ç­‰ä»·çš„ï¼Œå¯ä»¥æ›´åŠ æ–¹ä¾¿çš„è®¾ç½®å‚æ•°ã€‚&lt;/p>
&lt;p>æŒ‡å®šå¦‚ä¸‹å‘½ä»¤è¡Œå‚æ•°è¿è¡Œç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go --ip &lt;span class="m">1&lt;/span> -H localhost --boolVar&lt;span class="o">=&lt;/span>&lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">boolVar: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host: main.host&lt;span class="o">{&lt;/span>value:&lt;span class="s2">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i: 1, err: &amp;lt;nil&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ &lt;code>--ip 1&lt;/code> ä½¿ç”¨å®Œæ•´æ ‡å¿—æŒ‡å®š &lt;code>ip&lt;/code> å‚æ•°å€¼ã€‚&lt;/p>
&lt;p>é€šè¿‡ &lt;code>-H localhost&lt;/code> ä½¿ç”¨ç®€çŸ­æ ‡å¿—æŒ‡å®š &lt;code>host&lt;/code> å‚æ•°å€¼ã€‚&lt;/p>
&lt;p>å¸ƒå°”ç±»å‹çš„æ ‡å¿—æŒ‡å®šå‚æ•° &lt;code>--boolVar=false&lt;/code> éœ€è¦ä½¿ç”¨ç­‰å· &lt;code>=&lt;/code> è€Œéç©ºæ ¼ã€‚&lt;/p>
&lt;h3 id="å‘½ä»¤è¡Œæ ‡å¿—è¯­æ³•">
&lt;a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%a0%87%e5%bf%97%e8%af%ad%e6%b3%95" class="header-anchor">#&lt;/a>
å‘½ä»¤è¡Œæ ‡å¿—è¯­æ³•
&lt;/h3>&lt;p>å‘½ä»¤è¡Œæ ‡å¿—éµå¾ªå¦‚ä¸‹è¯­æ³•ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>è¯­æ³•&lt;/th>
&lt;th>è¯´æ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>--flag&lt;/code>&lt;/td>
&lt;td>é€‚ç”¨äº bool ç±»å‹æ ‡å¿—ï¼Œæˆ–å…·æœ‰ &lt;code>NoOptDefVal&lt;/code> å±æ€§çš„æ ‡å¿—ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>--flag x&lt;/code>&lt;/td>
&lt;td>é€‚ç”¨äºé bool ç±»å‹æ ‡å¿—ï¼Œæˆ–æ²¡æœ‰ &lt;code>NoOptDefVal&lt;/code> å±æ€§çš„æ ‡å¿—ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>--flag=x&lt;/code>&lt;/td>
&lt;td>é€‚ç”¨äº bool ç±»å‹æ ‡å¿—ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>-n 1234&lt;/code>/&lt;code>-n=1234&lt;/code>/&lt;code>-n1234&lt;/code>&lt;/td>
&lt;td>ç®€çŸ­æ ‡å¿—ï¼Œé bool ç±»å‹ä¸”æ²¡æœ‰ &lt;code>NoOptDefVal&lt;/code> å±æ€§ï¼Œä¸‰è€…ç­‰ä»·ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>æ ‡å¿—è§£æåœ¨ç»ˆæ­¢ç¬¦ &lt;code>--&lt;/code> ä¹‹ååœæ­¢ã€‚&lt;/p>
&lt;p>æ•´æ•°æ ‡å¿—æ¥å— 1234ã€0664ã€0x1234ï¼Œå¹¶ä¸”å¯èƒ½ä¸ºè´Ÿæ•°ã€‚&lt;/p>
&lt;p>å¸ƒå°”æ ‡å¿—æ¥å— 1, 0, t, f, true, false, TRUE, FALSE, True, Falseã€‚&lt;/p>
&lt;p>&lt;code>Duration&lt;/code> æ ‡å¿—æ¥å—ä»»ä½•å¯¹ &lt;code>time.ParseDuration&lt;/code> æœ‰æ•ˆçš„è¾“å…¥ã€‚&lt;/p>
&lt;h3 id="æ ‡å¿—å-normalize">
&lt;a href="#%e6%a0%87%e5%bf%97%e5%90%8d-normalize" class="header-anchor">#&lt;/a>
æ ‡å¿—å Normalize
&lt;/h3>&lt;p>æ ‡å‡†åŒ–Normalize&lt;/p>
&lt;p>å€ŸåŠ© &lt;code>pflag.NormalizedName&lt;/code> æˆ‘ä»¬èƒ½å¤Ÿç»™æ ‡å¿—èµ·ä¸€ä¸ªæˆ–å¤šä¸ªåˆ«åã€è§„èŒƒåŒ–æ ‡å¿—åç­‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">normalizeFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FlagSet&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NormalizedName&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// alias
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">switch&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;old-flag-name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;new-flag-name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// --my-flag == --my_flag == --my.flag
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;-&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;_&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">to&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sep&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sep&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">to&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NormalizedName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flagSet&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewFlagSet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ExitOnError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">ip&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IntP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;new-flag-name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;i&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1234&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for new-flag-name&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">myFlag&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IntP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;my-flag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1234&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for my-flag&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetNormalizeFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">normalizeFunc&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flagSet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;å‘½ä»¤è¡Œå‚æ•°è§£æå¤±è´¥ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip: %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;myFlag: %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">myFlag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¦ä½¿ç”¨ &lt;code>pflag.NormalizedName&lt;/code>ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå‡½æ•° &lt;code>normalizeFunc&lt;/code>ï¼Œç„¶åå°†å…¶é€šè¿‡ &lt;code>flagset.SetNormalizeFunc(normalizeFunc)&lt;/code> æ³¨å…¥åˆ° &lt;code>flagset&lt;/code> ä½¿å…¶ç”Ÿæ•ˆã€‚&lt;/p>
&lt;p>åœ¨ &lt;code>normalizeFunc&lt;/code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ç»™ &lt;code>new-flag-name&lt;/code> æ ‡å¿—èµ·äº†ä¸€ä¸ªåˆ«å &lt;code>old-flag-name&lt;/code>ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œè¿˜å¯¹æ ‡å¿—åè¿›è¡Œäº†è§„èŒƒåŒ–å¤„ç†ï¼Œå¸¦æœ‰ &lt;code>-&lt;/code> å’Œ &lt;code>_&lt;/code> åˆ†å‰²ç¬¦çš„æ ‡å¿—åï¼Œä¼šç»Ÿä¸€è§„èŒƒåŒ–æˆä»¥ &lt;code>.&lt;/code> ä½œä¸ºåˆ†éš”ç¬¦çš„æ ‡å¿—åã€‚&lt;/p>
&lt;p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run pflag.go --old-flag-name &lt;span class="m">2&lt;/span> --my-flag &lt;span class="m">200&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">myFlag: &lt;span class="m">200&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go run pflag.go --new-flag-name &lt;span class="m">3&lt;/span> --my_flag &lt;span class="m">300&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip: &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">myFlag: &lt;span class="m">300&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ go run pflag.go --new-flag_name &lt;span class="m">2&lt;/span> --my.flag &lt;span class="m">200&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">myFlag: &lt;span class="m">200&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="nooptdefval">
&lt;a href="#nooptdefval" class="header-anchor">#&lt;/a>
NoOptDefVal
&lt;/h3>&lt;p>&lt;code>NoOptDefVal&lt;/code> æ˜¯ &lt;code>no option default values&lt;/code> çš„ç®€å†™ã€‚&lt;/p>
&lt;p>åˆ›å»ºæ ‡å¿—åï¼Œå¯ä»¥ä¸ºæ ‡å¿—è®¾ç½® &lt;code>NoOptDefVal&lt;/code> å±æ€§ï¼Œå¦‚æœæ ‡å¿—å…·æœ‰ &lt;code>NoOptDefVal&lt;/code> å±æ€§å¹¶ä¸”åœ¨å‘½ä»¤è¡Œä¸Šè®¾ç½®äº†æ ‡å¿—è€Œæ²¡æœ‰å‚æ•°é€‰é¡¹ï¼Œåˆ™æ ‡å¿—å°†è®¾ç½®ä¸º &lt;code>NoOptDefVal&lt;/code> æŒ‡å®šçš„å€¼ã€‚&lt;/p>
&lt;p>å¦‚ä¸‹ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">ip&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IntP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;flagName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1234&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;flagName&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">NoOptDefVal&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;4321&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸åŒå‚æ•°ç»“æœå¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å‘½ä»¤è¡Œå‚æ•°&lt;/th>
&lt;th>ç»“æœå€¼&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>â€“flagname=1357&lt;/td>
&lt;td>ip=1357&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>â€“flagname&lt;/td>
&lt;td>ip=4321&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>[nothing]&lt;/td>
&lt;td>ip=1234&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">ip&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BoolP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;flagName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//pflag.Lookup(&amp;#34;flagName&amp;#34;).NoOptDefVal = &amp;#34;false&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>boolç±»å‹çš„&lt;code>NoOptDefValue&lt;/code>é»˜è®¤å€¼æ˜¯trueï¼Œå¯ä»¥ä¿®æ”¹ä¸ºfalse&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go -f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¼ƒç”¨éšè—æ ‡å¿—">
&lt;a href="#%e5%bc%83%e7%94%a8%e9%9a%90%e8%97%8f%e6%a0%87%e5%bf%97" class="header-anchor">#&lt;/a>
å¼ƒç”¨/éšè—æ ‡å¿—
&lt;/h3>&lt;p>ä½¿ç”¨ &lt;code>flags.MarkDeprecated&lt;/code> å¯ä»¥å¼ƒç”¨ä¸€ä¸ªæ ‡å¿—ï¼Œä½¿ç”¨ &lt;code>flags.MarkShorthandDeprecated&lt;/code> å¯ä»¥å¼ƒç”¨ä¸€ä¸ªç®€çŸ­æ ‡å¿—ï¼Œä½¿ç”¨ &lt;code>flags.MarkHidden&lt;/code> å¯ä»¥éšè—ä¸€ä¸ªæ ‡å¿—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flags&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewFlagSet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ExitOnError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">ip&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IntP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;i&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1234&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for ip&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">boolVar&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BoolVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">boolVar&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;boolVar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for boolVar&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">h&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StringVarP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;host&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;H&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for host&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¼ƒç”¨æ ‡å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MarkDeprecated&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;deprecated&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MarkShorthandDeprecated&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;boolVar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;please use --boolVar only&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// éšè—æ ‡å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MarkHidden&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;host&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;è§£æå‘½ä»¤è¡Œå‡ºé”™äº†ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip: %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;boolVar: %t\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">boolVar&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;host: %+v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage of test:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --boolVar &lt;span class="nb">help&lt;/span> message &lt;span class="k">for&lt;/span> boolVar &lt;span class="o">(&lt;/span>default &lt;span class="nb">true&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pflag: &lt;span class="nb">help&lt;/span> requested
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> status &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»æ‰“å°ç»“æœå¯ä»¥å‘ç°ï¼Œå¼ƒç”¨æ ‡å¿— &lt;code>ip&lt;/code> æ—¶ï¼Œå…¶å¯¹åº”çš„ç®€çŸ­æ ‡å¿— &lt;code>i&lt;/code> ä¹Ÿä¼šè·Ÿç€è¢«å¼ƒç”¨ï¼›å¼ƒç”¨ &lt;code>boolVar&lt;/code> æ‰€å¯¹åº”çš„ç®€çŸ­æ ‡å¿— &lt;code>b&lt;/code> æ—¶ï¼Œ&lt;code>boolVar&lt;/code> æ ‡å¿—ä¼šè¢«ä¿ç•™ï¼›&lt;code>host&lt;/code> æ ‡å¿—åˆ™å®Œå…¨è¢«éšè—ã€‚&lt;/p>
&lt;p>æŒ‡å®šå¦‚ä¸‹å‘½ä»¤è¡Œå‚æ•°è¿è¡Œç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go --ip &lt;span class="m">1&lt;/span> --boolVar&lt;span class="o">=&lt;/span>&lt;span class="nb">false&lt;/span> -H localhost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flag --ip has been deprecated, deprecated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">boolVar: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host: localhost
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰“å°ä¿¡æ¯ä¸­ä¼šæç¤ºç”¨æˆ· &lt;code>ip&lt;/code> æ ‡å¿—å·²ç»å¼ƒç”¨ï¼Œä¸è¿‡ä½¿ç”¨ &lt;code>--ip 1&lt;/code> æŒ‡å®šçš„å‚æ•°å€¼ä¾ç„¶èƒ½å¤Ÿç”Ÿæ•ˆã€‚&lt;/p>
&lt;p>éšè—çš„ &lt;code>host&lt;/code> æ ‡å¿—ä½¿ç”¨ &lt;code>-H localhost&lt;/code> æŒ‡å®šå‚æ•°å€¼åŒæ ·èƒ½å¤Ÿç”Ÿæ•ˆã€‚&lt;/p>
&lt;p>æŒ‡å®šå¦‚ä¸‹å‘½ä»¤è¡Œå‚æ•°è¿è¡Œç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go -i &lt;span class="m">1&lt;/span> -b&lt;span class="o">=&lt;/span>&lt;span class="nb">false&lt;/span> --host localhost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flag --ip has been deprecated, deprecated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Flag shorthand -b has been deprecated, please use --boolVar only
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">boolVar: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host: localhost
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰“å°ä¿¡æ¯ä¸­å¢åŠ äº†ä¸€æ¡ç®€çŸ­æ ‡å¿— &lt;code>-b&lt;/code> å·²è¢«å¼ƒç”¨çš„æç¤ºï¼ŒæŒ‡å®šå‚æ•°å€¼ä¾ç„¶ç”Ÿæ•ˆã€‚&lt;/p>
&lt;p>å¯¹äºå¼ƒç”¨çš„ &lt;code>ip&lt;/code> æ ‡å¿—ï¼Œä½¿ç”¨ç®€çŸ­æ ‡å¿—å½¢å¼ä¼ æƒ¨ &lt;code>-i 1&lt;/code> åŒæ ·ç”Ÿæ•ˆã€‚&lt;/p>
&lt;h3 id="æ”¯æŒ-flag-ç±»å‹">
&lt;a href="#%e6%94%af%e6%8c%81-flag-%e7%b1%bb%e5%9e%8b" class="header-anchor">#&lt;/a>
æ”¯æŒ flag ç±»å‹
&lt;/h3>&lt;p>ç”±äº pflag å¯¹ flag åŒ…å…¼å®¹ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä¸€ä¸ªç¨‹åºä¸­æ··ç”¨äºŒè€…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/spf13/pflag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">ip&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1234&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for ip&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">port&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;help message for port&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddGoFlagSet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pflag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip: %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ip&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;port: %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ï¼Œ&lt;code>ip&lt;/code> æ ‡å¿—æ˜¯ä½¿ç”¨ &lt;code>pflag.Int()&lt;/code> å£°æ˜çš„ï¼Œ&lt;code>port&lt;/code> æ ‡å¿—åˆ™æ˜¯ä½¿ç”¨ &lt;code>flag.Int()&lt;/code> å£°æ˜çš„ã€‚åªéœ€è¦é€šè¿‡ &lt;code>AddGoFlagSet&lt;/code> æ–¹æ³•å°† &lt;code>flag.CommandLine&lt;/code> æ³¨å†Œåˆ° pflag ä¸­ï¼Œé‚£ä¹ˆ pflag å°±å¯ä»¥ä½¿ç”¨ flag ä¸­å£°æ˜çš„æ ‡å¿—é›†åˆäº†ã€‚&lt;/p>
&lt;p>è¿è¡Œç¤ºä¾‹ç»“æœå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go --ip &lt;span class="m">10&lt;/span> --port &lt;span class="m">8000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip: &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">port: &lt;span class="m">8000&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº† Goç¬¬ä¸‰æ–¹æ ‡å¿—åŒ… pflag çš„ç‰¹ç‚¹åŠç”¨æ³•ã€‚&lt;/p>
&lt;p>é¦–å…ˆä»‹ç»äº† pflag çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å£°æ˜æ ‡å¿—ã€è§£æå‘½ä»¤è¡Œå‚æ•°ã€è·å–æ ‡å¿—å€¼ç­‰ã€‚æ¥ç€ä»‹ç»äº† pflag çš„è¿›é˜¶ç”¨æ³•ï¼Œä¾‹å¦‚è‡ªå®šä¹‰ &lt;code>FlagSet&lt;/code>ã€ä½¿ç”¨ &lt;code>pflag.&amp;lt;Type&amp;gt;P&lt;/code> æ–¹æ³•æ¥æ”¯æŒç®€çŸ­æ ‡å¿—ã€‚ä¹‹ååˆå¯¹å‘½ä»¤è¡Œæ ‡å¿—è¯­æ³•è¿›è¡Œäº†è®²è§£ï¼Œå¯¹äºå¸ƒå°”å€¼ã€éå¸ƒå°”å€¼å’Œç®€çŸ­æ ‡å¿—ï¼Œéƒ½æœ‰å„è‡ªä¸åŒçš„è¯­æ³•ã€‚æˆ‘ä»¬è¿˜è®²è§£äº†å¦‚ä½•å€ŸåŠ© &lt;code>pflag.NormalizedName&lt;/code> ç»™æ ‡å¿—èµ·ä¸€ä¸ªæˆ–å¤šä¸ªåˆ«åã€è§„èŒƒåŒ–æ ‡å¿—åã€‚ç„¶åä»‹ç»äº† &lt;code>NoOptDefVal&lt;/code> çš„ä½œç”¨å’Œå¦‚ä½•å¼ƒç”¨/éšè—æ ‡å¿—ã€‚æœ€åé€šè¿‡ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•åœ¨ä¸€ä¸ªç¨‹åºä¸­æ··ç”¨ flag å’Œ pflagã€‚&lt;/p>
&lt;blockquote>
&lt;p>å½©è›‹ï¼šä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œç¤ºä¾‹ä¸­çš„ &lt;code>ip&lt;/code> æ ‡å¿—çš„åç§°å…¶å®ä»£è¡¨çš„æ˜¯ &lt;code>int pointer&lt;/code> è€Œé &lt;code>Internet Protocol Address&lt;/code>ã€‚&lt;code>ip&lt;/code> æ ‡å¿—æºè‡ªå®˜æ–¹ç¤ºä¾‹ï¼Œä¸è¿‡æˆ‘é¡ºåŠ¿è€Œä¸ºåˆå£°æ˜äº† &lt;code>port&lt;/code>ã€&lt;code>host&lt;/code> æ ‡å¿—ï¼Œç®—æ˜¯ä¸€ä¸ªç¨‹åºä¸­çš„è°éŸ³æ¢— :)ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>pflag æºç : &lt;a class="link" href="https://github.com/spf13/pflag" target="_blank" rel="noopener"
>https://github.com/spf13/pflag&lt;/a>&lt;/li>
&lt;li>pflag æ–‡æ¡£: &lt;a class="link" href="https://pkg.go.dev/github.com/spf13/pflag" target="_blank" rel="noopener"
>https://pkg.go.dev/github.com/spf13/pflag&lt;/a>&lt;/li>
&lt;li>ç¨‹åºå‚æ•°è¯­æ³•çº¦å®š: &lt;a class="link" href="https://www.gnu.org/software/libc/manual/html_node/Argument-Syntax.html" target="_blank" rel="noopener"
>https://www.gnu.org/software/libc/manual/html_node/Argument-Syntax.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://jianghushinian.cn/2023/03/27/use-of-go-command-line-parameter-parsing-tool-pflag/" target="_blank" rel="noopener"
>Go å‘½ä»¤è¡Œå‚æ•°è§£æå·¥å…· pflag ä½¿ç”¨&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Goè§£æå‘½ä»¤è¡Œå‚æ•°ä¹‹ç¬¬ä¸‰æ–¹åº“go-flags</title><link>https://arlettebrook.github.io/p/go%E8%A7%A3%E6%9E%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93go-flags/</link><pubDate>Wed, 01 May 2024 21:50:22 +0800</pubDate><guid>https://arlettebrook.github.io/p/go%E8%A7%A3%E6%9E%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93go-flags/</guid><description>&lt;hr>
&lt;h2 id="ç®€ä»‹">
&lt;a href="#%e7%ae%80%e4%bb%8b" class="header-anchor">#&lt;/a>
ç®€ä»‹
&lt;/h2>&lt;p>åœ¨&lt;a class="link" href="https://arlettebrook.github.io/p/go-flag%E5%BA%93%E4%BB%8B%E7%BB%8D/" target="_blank" rel="noopener"
>Go flagåº“ä»‹ç»&lt;/a>ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†&lt;code>flag&lt;/code>åº“ã€‚&lt;code>flag&lt;/code>åº“æ˜¯ç”¨äºè§£æå‘½ä»¤è¡Œé€‰é¡¹çš„æ ‡å‡†åº“ã€‚ä½†æ˜¯&lt;code>flag&lt;/code>æœ‰å‡ ä¸ªç¼ºç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸æ˜¾ç¤ºæ”¯æŒçŸ­é€‰é¡¹ã€‚å½“ç„¶åœ¨&lt;a class="link" href="https://arlettebrook.github.io/p/go-flag%E5%BA%93%E4%BB%8B%E7%BB%8D/" target="_blank" rel="noopener"
>Go flagåº“ä»‹ç»&lt;/a>æ–‡ç« ä¸­ä¹Ÿæåˆ°è¿‡å¯ä»¥é€šè¿‡å°†ä¸¤ä¸ªé€‰é¡¹å…±äº«åŒä¸€ä¸ªå˜é‡è¿‚å›å®ç°ï¼Œä½†å†™èµ·æ¥æ¯”è¾ƒç¹çï¼›&lt;/li>
&lt;li>é€‰é¡¹å˜é‡çš„å®šä¹‰æ¯”è¾ƒç¹çï¼Œæ¯ä¸ªé€‰é¡¹éƒ½éœ€è¦æ ¹æ®ç±»å‹è°ƒç”¨å¯¹åº”çš„&lt;code>Type&lt;/code>æˆ–&lt;code>TypeVar&lt;/code>å‡½æ•°ï¼›&lt;/li>
&lt;li>é»˜è®¤åªæ”¯æŒæœ‰é™çš„æ•°æ®ç±»å‹ï¼Œå½“å‰åªæœ‰åŸºæœ¬ç±»å‹&lt;code>bool/int/uint/string&lt;/code>å’Œ&lt;code>time.Duration&lt;/code>ï¼›&lt;/li>
&lt;/ul>
&lt;p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå‡ºç°äº†ä¸å°‘ç¬¬ä¸‰æ–¹è§£æå‘½ä»¤è¡Œé€‰é¡¹çš„åº“ï¼Œä»Šå¤©çš„ä¸»è§’&lt;a class="link" href="https://github.com/jessevdk/go-flags" target="_blank" rel="noopener"
>&lt;code>go-flags&lt;/code>&lt;/a>å°±æ˜¯å…¶ä¸­ä¸€ä¸ªã€‚ç¬¬ä¸€æ¬¡çœ‹åˆ°&lt;code>go-flags&lt;/code>åº“æ˜¯åœ¨é˜…è¯»&lt;a class="link" href="https://github.com/sosedoff/pgweb" target="_blank" rel="noopener"
>pgweb&lt;/a>æºç çš„æ—¶å€™ã€‚&lt;/p>
&lt;p>&lt;code>go-flags&lt;/code>æä¾›äº†æ¯”æ ‡å‡†åº“&lt;code>flag&lt;/code>æ›´å¤šçš„é€‰é¡¹ã€‚å®ƒåˆ©ç”¨ç»“æ„æ ‡ç­¾ï¼ˆstruct tagï¼‰å’Œåå°„æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿ã€ç®€æ´çš„æ¥å£ã€‚å®ƒé™¤äº†åŸºæœ¬çš„åŠŸèƒ½ï¼Œè¿˜æä¾›äº†ä¸°å¯Œçš„ç‰¹æ€§ï¼š&lt;/p>
&lt;ul>
&lt;li>æ”¯æŒçŸ­é€‰é¡¹ï¼ˆ-vï¼‰å’Œé•¿é€‰é¡¹ï¼ˆâ€“verboseï¼‰ï¼›&lt;/li>
&lt;li>æ”¯æŒçŸ­é€‰é¡¹åˆå†™ï¼Œå¦‚&lt;code>-aux&lt;/code>ï¼›&lt;/li>
&lt;li>åŒä¸€ä¸ªé€‰é¡¹å¯ä»¥è®¾ç½®å¤šä¸ªå€¼ï¼›&lt;/li>
&lt;li>æ”¯æŒæ‰€æœ‰çš„åŸºç¡€ç±»å‹å’Œ map ç±»å‹ï¼Œç”šè‡³æ˜¯å‡½æ•°ï¼›&lt;/li>
&lt;li>æ”¯æŒå‘½åç©ºé—´å’Œé€‰é¡¹ç»„ï¼›&lt;/li>
&lt;li>ç­‰ç­‰ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸Šé¢åªæ˜¯ç²—ç•¥ä»‹ç»äº†&lt;code>go-flags&lt;/code>çš„ç‰¹æ€§ï¼Œä¸‹é¢æˆ‘ä»¬ä¾æ¬¡æ¥ä»‹ç»ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å¿«é€Ÿå¼€å§‹">
&lt;a href="#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b" class="header-anchor">#&lt;/a>
å¿«é€Ÿå¼€å§‹
&lt;/h2>&lt;p>å­¦ä¹ ä»ä½¿ç”¨å¼€å§‹ï¼æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹&lt;code>go-flags&lt;/code>çš„åŸºæœ¬ä½¿ç”¨ã€‚&lt;/p>
&lt;p>ç”±äºæ˜¯ç¬¬ä¸‰æ–¹åº“ï¼Œä½¿ç”¨å‰éœ€è¦å®‰è£…ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/jessevdk/go-flags
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»£ç ä¸­ä½¿ç”¨&lt;code>import&lt;/code>å¯¼å…¥è¯¥åº“ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/jessevdk/go-flags&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®Œæ•´ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/jessevdk/go-flags&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Option&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Verbose&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">bool&lt;/span> &lt;span class="s">`short:&amp;#34;v&amp;#34; long:&amp;#34;verbose&amp;#34; description:&amp;#34;Show verbose debug message&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">opt&lt;/span> &lt;span class="nx">Option&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">parseErr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">parseErr&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">errPtr&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Error&lt;/span> &lt;span class="c1">// æŒ‡é’ˆç±»å‹å®ç°Erroræ¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">As&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parseErr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">errPtr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// æ–­è¨€çš„ç±»å‹è¦æ˜¯æŒ‡é’ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">errPtr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ErrHelp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parseErr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Verbose&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨&lt;code>go-flags&lt;/code>çš„ä¸€èˆ¬æ­¥éª¤ï¼š&lt;/p>
&lt;ul>
&lt;li>å®šä¹‰é€‰é¡¹ç»“æ„ï¼Œåœ¨ç»“æ„æ ‡ç­¾ä¸­è®¾ç½®é€‰é¡¹ä¿¡æ¯ã€‚é€šè¿‡&lt;code>short&lt;/code>å’Œ&lt;code>long&lt;/code>è®¾ç½®çŸ­ã€é•¿é€‰é¡¹åå­—ï¼Œ&lt;code>description&lt;/code>è®¾ç½®å¸®åŠ©ä¿¡æ¯ã€‚å‘½ä»¤è¡Œä¼ å‚æ—¶ï¼ŒçŸ­é€‰é¡¹å‰åŠ &lt;code>-&lt;/code>ï¼Œé•¿é€‰é¡¹å‰åŠ &lt;code>--&lt;/code>ï¼›&lt;/li>
&lt;li>å£°æ˜é€‰é¡¹å˜é‡ï¼›&lt;/li>
&lt;li>è°ƒç”¨&lt;code>go-flags&lt;/code>çš„è§£ææ–¹æ³•è§£æã€‚&lt;/li>
&lt;li>è§£æä¹‹åä¼šè¿”å›ä¸¤ä¸ªå‚æ•°ï¼š
&lt;ul>
&lt;li>ç¬¬ä¸€ä¸ªï¼šå‰©ä½™æœªè§£æé€‰é¡¹ï¼Œæ˜¯stringç±»å‹çš„åˆ‡ç‰‡ï¼Œä¸€èˆ¬å¿½ç•¥ã€‚&lt;/li>
&lt;li>ç¬¬äºŒä¸ªï¼šerrorå¯¹è±¡
&lt;ul>
&lt;li>å¯¹äºå¸®åŠ©ä¿¡æ¯çš„errorå¯¹è±¡æˆ‘ä»¬åº”è¯¥å¿½ç•¥ã€‚å†…éƒ¨ä¼šæ‰“å°è¿™ä¸ªé”™è¯¯ï¼Œé€ æˆé‡å¤ã€‚å…¶ä»–é”™è¯¯æŠ›å‡ºpanicï¼Œå¹¶é€€å‡º&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>flags.Parse()&lt;/code>æ–¹æ³•é»˜è®¤é€‰é¡¹æ˜¯&lt;code>Default = HelpFlag | PrintErrors | PassDoubleDash&lt;/code>:æ‰“å°å¸®åŠ©ä¿¡æ¯ã€æ‰“å°é”™è¯¯ä¿¡æ¯ã€&amp;ndash;åé¢çš„å‚æ•°ä¸è§£æã€‚&lt;/li>
&lt;li>é”™è¯¯ä¿¡æ¯æ˜¯å°è£…åˆ°&lt;code>flags.Error&lt;/code>ç»“æ„ä½“é‡Œé¢çš„&lt;code>ErrorType&lt;/code>ç±»å‹lå­—æ®µé‡Œé¢çš„ã€‚æ‰€ä»¥éœ€è¦æ–­è¨€ä¹‹åå†åˆ¤æ–­ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç¼–è¯‘ã€è¿è¡Œä»£ç ï¼ˆæˆ‘çš„ç¯å¢ƒæ˜¯ Win10 + Git Bashï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go build -o main.exe main.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çŸ­é€‰é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>true&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é•¿é€‰é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exe&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">verbose&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”±äº&lt;code>Verbose&lt;/code>å­—æ®µæ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œæ¯æ¬¡é‡åˆ°&lt;code>-v&lt;/code>æˆ–&lt;code>--verbose&lt;/code>éƒ½ä¼šè¿½åŠ ä¸€ä¸ª&lt;code>true&lt;/code>åˆ°åˆ‡ç‰‡ä¸­ã€‚&lt;/p>
&lt;p>å¤šä¸ªçŸ­é€‰é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe -v -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>&lt;span class="nb">true&lt;/span> true&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¤šä¸ªé•¿é€‰é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe --verbose --verbose
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>&lt;span class="nb">true&lt;/span> true&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çŸ­é€‰é¡¹ + é•¿é€‰é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe -v --verbose -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>&lt;span class="nb">true&lt;/span> &lt;span class="nb">true&lt;/span> true&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çŸ­é€‰é¡¹åˆå†™ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe -vvv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>&lt;span class="nb">true&lt;/span> &lt;span class="nb">true&lt;/span> true&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="åŸºæœ¬ç‰¹æ€§">
&lt;a href="#%e5%9f%ba%e6%9c%ac%e7%89%b9%e6%80%a7" class="header-anchor">#&lt;/a>
åŸºæœ¬ç‰¹æ€§
&lt;/h2>&lt;h3 id="æ”¯æŒä¸°å¯Œçš„æ•°æ®ç±»å‹">
&lt;a href="#%e6%94%af%e6%8c%81%e4%b8%b0%e5%af%8c%e7%9a%84%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b" class="header-anchor">#&lt;/a>
æ”¯æŒä¸°å¯Œçš„æ•°æ®ç±»å‹
&lt;/h3>&lt;p>&lt;code>go-flags&lt;/code>ç›¸æ¯”æ ‡å‡†åº“&lt;code>flag&lt;/code>æ”¯æŒæ›´ä¸°å¯Œçš„æ•°æ®ç±»å‹ï¼š&lt;/p>
&lt;ul>
&lt;li>æ‰€æœ‰çš„åŸºæœ¬ç±»å‹ï¼ˆåŒ…æ‹¬æœ‰ç¬¦å·æ•´æ•°&lt;code>int/int8/int16/int32/int64&lt;/code>ï¼Œæ— ç¬¦å·æ•´æ•°&lt;code>uint/uint8/uint16/uint32/uint64&lt;/code>ï¼Œæµ®ç‚¹æ•°&lt;code>float32/float64&lt;/code>ï¼Œå¸ƒå°”ç±»å‹&lt;code>bool&lt;/code>å’Œå­—ç¬¦ä¸²&lt;code>string&lt;/code>ï¼‰å’Œ&lt;strong>å®ƒä»¬çš„åˆ‡ç‰‡&lt;/strong>ï¼›&lt;/li>
&lt;li>map ç±»å‹ã€‚åªæ”¯æŒé”®ä¸º&lt;code>string&lt;/code>ï¼Œå€¼ä¸ºåŸºç¡€ç±»å‹çš„ mapï¼›&lt;/li>
&lt;li>å‡½æ•°ç±»å‹ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœå­—æ®µæ˜¯åŸºæœ¬ç±»å‹çš„åˆ‡ç‰‡ï¼ŒåŸºæœ¬è§£ææµç¨‹ä¸å¯¹åº”çš„åŸºæœ¬ç±»å‹æ˜¯ä¸€æ ·çš„ã€‚åˆ‡ç‰‡ç±»å‹é€‰é¡¹çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œé‡åˆ°ç›¸åŒçš„é€‰é¡¹æ—¶ï¼Œå€¼ä¼šè¢«è¿½åŠ åˆ°åˆ‡ç‰‡ä¸­ã€‚è€Œéåˆ‡ç‰‡ç±»å‹çš„é€‰é¡¹ï¼Œåå‡ºç°çš„å€¼ä¼šè¦†ç›–å…ˆå‡ºç°çš„å€¼ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/jessevdk/go-flags&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Option&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IntFlag&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`short:&amp;#34;i&amp;#34; long:&amp;#34;int&amp;#34; description:&amp;#34;int flag value&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IntSlice&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="s">`long:&amp;#34;intslice&amp;#34; description:&amp;#34;int slice flag value&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">BoolFlag&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`long:&amp;#34;bool&amp;#34; description:&amp;#34;bool flag value&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">BoolSlice&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">bool&lt;/span> &lt;span class="s">`long:&amp;#34;boolslice&amp;#34; description:&amp;#34;bool slice flag value&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FloatFlag&lt;/span> &lt;span class="kt">float64&lt;/span> &lt;span class="s">`long:&amp;#34;float&amp;#34; description:&amp;#34;float64 flag value&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FloatSlice&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">float64&lt;/span> &lt;span class="s">`long:&amp;#34;floatslice&amp;#34; description:&amp;#34;float64 slice flag value&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StringFlag&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`short:&amp;#34;s&amp;#34; long:&amp;#34;string&amp;#34; description:&amp;#34;string flag value&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StringSlice&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="s">`long:&amp;#34;strslice&amp;#34; description:&amp;#34;string slice flag value&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PtrStringSlice&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="s">`long:&amp;#34;pstrslice&amp;#34; description:&amp;#34;slice of pointer of string flag value&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Call&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="s">`long:&amp;#34;call&amp;#34; description:&amp;#34;callback&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IntMap&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="s">`long:&amp;#34;intmap&amp;#34; description:&amp;#34;A map from string to int&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">opt&lt;/span> &lt;span class="nx">Option&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Call&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;in callback: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">parseErr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">parseErr&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">errPtr&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">As&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parseErr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">errPtr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">parseErr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;int flag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">IntFlag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;int slice flag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">IntSlice&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;bool flag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">BoolFlag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;bool slice flag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">BoolSlice&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;float flag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FloatFlag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;float slice flag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FloatSlice&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;string flag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StringFlag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;string slice flag: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StringSlice&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;slice of pointer of string flag: &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PtrStringSlice&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;\t%d: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PtrStringSlice&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;int map: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">IntMap&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸºæœ¬ç±»å‹å’Œå…¶åˆ‡ç‰‡æ¯”è¾ƒç®€å•ï¼Œå°±ä¸è¿‡å¤šä»‹ç»äº†ã€‚å€¼å¾—ç•™æ„çš„æ˜¯åŸºæœ¬ç±»å‹æŒ‡é’ˆçš„åˆ‡ç‰‡ï¼Œå³ä¸Šé¢çš„&lt;code>PtrStringSlice&lt;/code>å­—æ®µï¼Œç±»å‹ä¸º&lt;code>[]*string&lt;/code>ã€‚ ç”±äºç»“æ„ä¸­å­˜å‚¨çš„æ˜¯å­—ç¬¦ä¸²æŒ‡é’ˆï¼Œ&lt;code>go-flags&lt;/code>åœ¨è§£æè¿‡ç¨‹ä¸­é‡åˆ°è¯¥é€‰é¡¹ä¼šè‡ªåŠ¨åˆ›å»ºå­—ç¬¦ä¸²ï¼Œå°†æŒ‡é’ˆè¿½åŠ åˆ°åˆ‡ç‰‡ä¸­ã€‚&lt;/p>
&lt;p>è¿è¡Œç¨‹åºï¼Œä¼ å…¥&lt;code>--pstrslice&lt;/code>é€‰é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe --pstrslice test1 --pstrslice test2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">slice of pointer of string flag:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0: test1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1: test2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é€‰é¡¹ä¸­å®šä¹‰å‡½æ•°ç±»å‹ã€‚è¯¥å‡½æ•°çš„å”¯ä¸€è¦æ±‚æ˜¯æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°ã€‚è§£æä¸­æ¯æ¬¡é‡åˆ°è¯¥é€‰é¡¹å°±ä¼šä»¥é€‰é¡¹å€¼ä¸ºå‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ ä¸Šé¢ä»£ç ä¸­ï¼Œ&lt;code>Call&lt;/code>å‡½æ•°åªæ˜¯ç®€å•çš„æ‰“å°ä¼ å…¥çš„é€‰é¡¹å€¼ã€‚è¿è¡Œä»£ç ï¼Œä¼ å…¥&lt;code>--call&lt;/code>é€‰é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe --call test1 --call test2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">in callback: test1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">in callback: test2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åï¼Œ&lt;code>go-flags&lt;/code>è¿˜æ”¯æŒ map ç±»å‹ã€‚è™½ç„¶é™åˆ¶é”®å¿…é¡»æ˜¯&lt;code>string&lt;/code>ç±»å‹ï¼Œå€¼å¿…é¡»æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¹Ÿèƒ½å®ç°æ¯”è¾ƒçµæ´»çš„é…ç½®ã€‚ &lt;code>map&lt;/code>ç±»å‹çš„é€‰é¡¹å€¼ä¸­é”®-å€¼é€šè¿‡&lt;code>:&lt;/code>åˆ†éš”ï¼Œå¦‚&lt;code>key:value&lt;/code>ï¼Œå¯è®¾ç½®å¤šä¸ªã€‚è¿è¡Œä»£ç ï¼Œä¼ å…¥&lt;code>--intmap&lt;/code>é€‰é¡¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe --intmap key1:12 --intmap key2:58
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">int map: map&lt;span class="o">[&lt;/span>key1:12 key2:58&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¸¸ç”¨è®¾ç½®">
&lt;a href="#%e5%b8%b8%e7%94%a8%e8%ae%be%e7%bd%ae" class="header-anchor">#&lt;/a>
å¸¸ç”¨è®¾ç½®
&lt;/h3>&lt;p>&lt;code>go-flags&lt;/code>æä¾›äº†éå¸¸å¤šçš„è®¾ç½®é€‰é¡¹ï¼Œå…·ä½“å¯å‚è§&lt;a class="link" href="https://godoc.org/github.com/jessevdk/go-flags" target="_blank" rel="noopener"
>æ–‡æ¡£&lt;/a>ã€‚è¿™é‡Œé‡ç‚¹ä»‹ç»ä¸¤ä¸ª&lt;code>required&lt;/code>å’Œ&lt;code>default&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>required&lt;/code>éç©ºæ—¶ï¼Œè¡¨ç¤ºå¯¹åº”çš„é€‰é¡¹å¿…é¡»è®¾ç½®å€¼ï¼Œå¦åˆ™è§£ææ—¶è¿”å›&lt;code>ErrRequired&lt;/code>é”™è¯¯ã€‚&lt;/p>
&lt;p>&lt;code>default&lt;/code>ç”¨äºè®¾ç½®é€‰é¡¹çš„é»˜è®¤å€¼ã€‚å¦‚æœå·²ç»è®¾ç½®äº†é»˜è®¤å€¼ï¼Œé‚£ä¹ˆ&lt;code>required&lt;/code>æ˜¯å¦è®¾ç½®å¹¶ä¸å½±å“ï¼Œä¹Ÿå°±æ˜¯è¯´å‘½ä»¤è¡Œå‚æ•°ä¸­è¯¥é€‰é¡¹å¯ä»¥æ²¡æœ‰ã€‚&lt;/p>
&lt;p>çœ‹ä¸‹é¢ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/jessevdk/go-flags&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Option&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Required&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`short:&amp;#34;r&amp;#34; long:&amp;#34;required&amp;#34; required:&amp;#34;true&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Default&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`short:&amp;#34;d&amp;#34; long:&amp;#34;default&amp;#34; default:&amp;#34;default&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">opt&lt;/span> &lt;span class="nx">Option&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Parse error:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;required: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Required&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;default: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Default&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºï¼Œä¸ä¼ å…¥&lt;code>default&lt;/code>é€‰é¡¹ï¼Œ&lt;code>Default&lt;/code>å­—æ®µå–é»˜è®¤å€¼ï¼Œä¸ä¼ å…¥&lt;code>required&lt;/code>é€‰é¡¹ï¼Œæ‰§è¡ŒæŠ¥é”™ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe -r required-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">required: required-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe -d default-data -r required-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">required: required-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default: default-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">the required flag &lt;span class="sb">`&lt;/span>/r, /required&lt;span class="s1">&amp;#39; was not specified
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">2020/01/09 18:07:39 Parse error:the required flag `/r, /required&amp;#39;&lt;/span> was not specified
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="é«˜çº§ç‰¹æ€§">
&lt;a href="#%e9%ab%98%e7%ba%a7%e7%89%b9%e6%80%a7" class="header-anchor">#&lt;/a>
é«˜çº§ç‰¹æ€§
&lt;/h2>&lt;h3 id="é€‰é¡¹åˆ†ç»„">
&lt;a href="#%e9%80%89%e9%a1%b9%e5%88%86%e7%bb%84" class="header-anchor">#&lt;/a>
é€‰é¡¹åˆ†ç»„
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/jessevdk/go-flags&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Option&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">GroupBasicOption&lt;/span> &lt;span class="s">`group:&amp;#34;basic&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">GroupSliceOption&lt;/span> &lt;span class="s">`group:&amp;#34;slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">GroupBasicOption&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IntFlag&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`short:&amp;#34;i&amp;#34; long:&amp;#34;intflag&amp;#34; description:&amp;#34;int flag&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">BoolFlag&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`short:&amp;#34;b&amp;#34; long:&amp;#34;boolflag&amp;#34; description:&amp;#34;bool flag&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FloatFlag&lt;/span> &lt;span class="kt">float64&lt;/span> &lt;span class="s">`short:&amp;#34;f&amp;#34; long:&amp;#34;floatflag&amp;#34; description:&amp;#34;float flag&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StringFlag&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`short:&amp;#34;s&amp;#34; long:&amp;#34;stringflag&amp;#34; description:&amp;#34;string flag&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">GroupSliceOption&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IntSlice&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`long:&amp;#34;intslice&amp;#34; description:&amp;#34;int slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">BoolSlice&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`long:&amp;#34;boolslice&amp;#34; description:&amp;#34;bool slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FloatSlice&lt;/span> &lt;span class="kt">float64&lt;/span> &lt;span class="s">`long:&amp;#34;floatslice&amp;#34; description:&amp;#34;float slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StringSlice&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`long:&amp;#34;stringslice&amp;#34; description:&amp;#34;string slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">opt&lt;/span> &lt;span class="nx">Option&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">p&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewParser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Default&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">errPtr&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">As&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">errPtr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬å°†åŸºæœ¬ç±»å‹å’Œå®ƒä»¬çš„åˆ‡ç‰‡ç±»å‹é€‰é¡¹æ‹†åˆ†åˆ°ä¸¤ä¸ªç»“æ„ä½“ä¸­ï¼Œè¿™æ ·å¯ä»¥ä½¿ä»£ç çœ‹èµ·æ¥æ›´æ¸…æ™°è‡ªç„¶ï¼Œç‰¹åˆ«æ˜¯åœ¨ä»£ç é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ã€‚ è¿™æ ·åšè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œæˆ‘ä»¬è¯•è¯•ç”¨&lt;code>--help&lt;/code>è¿è¡Œè¯¥ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go --help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> C:&lt;span class="se">\U&lt;/span>sers&lt;span class="se">\L&lt;/span>enovo&lt;span class="se">\A&lt;/span>ppData&lt;span class="se">\L&lt;/span>ocal&lt;span class="se">\T&lt;/span>emp&lt;span class="se">\g&lt;/span>o-build4141518920&lt;span class="se">\b&lt;/span>001&lt;span class="se">\e&lt;/span>xe&lt;span class="se">\m&lt;/span>ain.exe &lt;span class="o">[&lt;/span>OPTIONS&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">basic:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /i, /intflag: int flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /b, /boolflag bool flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /f, /floatflag: float flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /s, /stringflag: string flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">slice:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /intslice: int slice
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /boolslice bool slice
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /floatslice: float slice
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /stringslice: string slice
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Help Options:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /? Show this &lt;span class="nb">help&lt;/span> message
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /h, /help Show this &lt;span class="nb">help&lt;/span> message
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºçš„å¸®åŠ©ä¿¡æ¯ä¸­ï¼Œä¹Ÿæ˜¯æŒ‰ç…§æˆ‘ä»¬è®¾å®šçš„åˆ†ç»„æ˜¾ç¤ºäº†ï¼Œä¾¿äºæŸ¥çœ‹ã€‚&lt;/p>
&lt;p>&lt;code>group&lt;/code>æ ‡ç­¾å­—æ®µç”¨äºåˆ†ç»„å¹¶å‘½åã€‚å½“åœ¨ç»“æ„ä½“å­—æ®µä¸ŠæŒ‡å®šæ—¶ï¼Œä½¿è¯¥ç»“æ„ä½“å­—æ®µå…·æœ‰ç»™å®šåç§°çš„å•ç‹¬ç»„ï¼ˆå¯é€‰ï¼‰&lt;/p>
&lt;h3 id="å­å‘½ä»¤">
&lt;a href="#%e5%ad%90%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
å­å‘½ä»¤
&lt;/h3>&lt;p>&lt;code>go-flags&lt;/code>æ”¯æŒå­å‘½ä»¤ã€‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ Go å’Œ Git å‘½ä»¤è¡Œç¨‹åºå°±æœ‰å¤§é‡çš„å­å‘½ä»¤ã€‚ä¾‹å¦‚&lt;code>go version&lt;/code>ã€&lt;code>go build&lt;/code>ã€&lt;code>go run&lt;/code>ã€&lt;code>git status&lt;/code>ã€&lt;code>git commit&lt;/code>è¿™äº›å‘½ä»¤ä¸­&lt;code>version/build/run/status/commit&lt;/code>å°±æ˜¯å­å‘½ä»¤ã€‚ ä½¿ç”¨&lt;code>go-flags&lt;/code>å®šä¹‰å­å‘½ä»¤æ¯”è¾ƒç®€å•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strconv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/jessevdk/go-flags&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Option&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">GroupBasicOption&lt;/span> &lt;span class="s">`group:&amp;#34;Basic&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">GroupSliceOption&lt;/span> &lt;span class="s">`group:&amp;#34;Slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MathCommand&lt;/span> &lt;span class="s">`command:&amp;#34;math&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Call&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="s">`long:&amp;#34;call&amp;#34; description:&amp;#34;callback&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">GroupBasicOption&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IntFlag&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`short:&amp;#34;i&amp;#34; long:&amp;#34;intflag&amp;#34; description:&amp;#34;int flag&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">BoolFlag&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`short:&amp;#34;b&amp;#34; long:&amp;#34;boolflag&amp;#34; description:&amp;#34;bool flag&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FloatFlag&lt;/span> &lt;span class="kt">float64&lt;/span> &lt;span class="s">`short:&amp;#34;f&amp;#34; long:&amp;#34;floatflag&amp;#34; description:&amp;#34;float flag&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StringFlag&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`short:&amp;#34;s&amp;#34; long:&amp;#34;stringflag&amp;#34; description:&amp;#34;string flag&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">GroupSliceOption&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">IntSlice&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`long:&amp;#34;intslice&amp;#34; description:&amp;#34;int slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">BoolSlice&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`long:&amp;#34;boolslice&amp;#34; description:&amp;#34;bool slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FloatSlice&lt;/span> &lt;span class="kt">float64&lt;/span> &lt;span class="s">`long:&amp;#34;floatslice&amp;#34; description:&amp;#34;float slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StringSlice&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`long:&amp;#34;stringslice&amp;#34; description:&amp;#34;string slice&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">MathCommand&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Op&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`long:&amp;#34;op&amp;#34; description:&amp;#34;operation to execute&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Result&lt;/span> &lt;span class="kt">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">MathCommand&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ³¨æ„ï¼Œä¸èƒ½ä½¿ç”¨ä¹˜æ³•ç¬¦å·*å’Œé™¤æ³•ç¬¦å·/ï¼Œå®ƒä»¬éƒ½ä¸å¯è¯†åˆ«ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;+&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;-&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;*&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;/&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;invalid op&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">arg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">num&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åªå®ç°äº†åŠ çš„åŠŸèƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">num&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">args&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">opt&lt;/span> &lt;span class="nx">Option&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Call&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//_, errParse := flags.Parse(&amp;amp;opt)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errParse&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewParser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HelpFlag&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PassDoubleDash&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errParse&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">p&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">As&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">errParse&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/*if errors.Is(p.Type, flags.ErrHelp) {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> os.Exit(0)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> }*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ErrHelp&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Message&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Is&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flags&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ErrCommandRequired&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Message&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">errParse&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;The result of %s is %d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MathCommand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MathCommand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Op&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MathCommand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å­å‘½ä»¤å¿…é¡»å®ç°&lt;code>go-flags&lt;/code>å®šä¹‰çš„&lt;code>Commander&lt;/code>æ¥å£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Commander&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>command&lt;/code>ç»“æ„ä½“æ ‡ç­¾å­—æ®µï¼šå½“åœ¨ç»“æ„ä½“å­—æ®µä¸ŠæŒ‡å®šæ—¶ï¼Œä½¿è¯¥ç»“æ„ä½“å­—æ®µå…·æœ‰ç»™å®šåç§°çš„ï¼ˆå­ï¼‰å‘½ä»¤&lt;/p>
&lt;p>è§£æå‘½ä»¤è¡Œæ—¶ï¼Œå¦‚æœé‡åˆ°ä¸æ˜¯ä»¥&lt;code>-&lt;/code>æˆ–&lt;code>--&lt;/code>å¼€å¤´çš„å‚æ•°ï¼Œ&lt;code>go-flags&lt;/code>ä¼šå°è¯•å°†å…¶è§£é‡Šä¸ºå­å‘½ä»¤åã€‚å­å‘½ä»¤çš„åå­—é€šè¿‡åœ¨ç»“æ„æ ‡ç­¾ä¸­ä½¿ç”¨&lt;code>command&lt;/code>æŒ‡å®šã€‚ å­å‘½ä»¤åé¢çš„å‚æ•°éƒ½å°†ä½œä¸ºå­å‘½ä»¤çš„å‚æ•°ï¼Œå­å‘½ä»¤ä¹Ÿå¯ä»¥æœ‰é€‰é¡¹ã€‚&lt;/p>
&lt;p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå¯ä»¥è®¡ç®—ä»»æ„ä¸ªæ•´æ•°çš„åŠ ã€å‡ã€ä¹˜ã€é™¤å­å‘½ä»¤&lt;code>math&lt;/code>ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go math --op + &lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{{&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nb">false&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="o">}&lt;/span> &lt;span class="o">{&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nb">false&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="o">}&lt;/span> &lt;span class="o">{&lt;/span>+ &lt;span class="o">[&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span> 3&lt;span class="o">]&lt;/span> 6&lt;span class="o">}&lt;/span> 0x6809a0&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The result of 1+2+3 is &lt;span class="m">6&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œä¸èƒ½ä½¿ç”¨ä¹˜æ³•ç¬¦å·&lt;code>*&lt;/code>å’Œé™¤æ³•ç¬¦å·&lt;code>/&lt;/code>ï¼Œå®ƒä»¬éƒ½ä¸å¯è¯†åˆ«ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å…¶ä»–">
&lt;a href="#%e5%85%b6%e4%bb%96" class="header-anchor">#&lt;/a>
å…¶ä»–
&lt;/h2>&lt;p>&lt;code>go-flags&lt;/code>åº“è¿˜æœ‰å¾ˆå¤šæœ‰æ„æ€çš„ç‰¹æ€§ï¼Œä¾‹å¦‚æ”¯æŒ Windows é€‰é¡¹æ ¼å¼ï¼ˆ&lt;code>/v&lt;/code>å’Œ&lt;code>/verbose&lt;/code>ï¼‰ã€ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–é»˜è®¤å€¼ã€ä» ini æ–‡ä»¶ä¸­è¯»å–é»˜è®¤è®¾ç½®ç­‰ç­‰ã€‚å¤§å®¶æœ‰å…´è¶£å¯ä»¥è‡ªè¡Œå»ç ”ç©¶~&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://godoc.org/github.com/jessevdk/go-flags" target="_blank" rel="noopener"
>go-flags&lt;/a>GoDoc æ–‡æ¡£&lt;/li>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2020/01/10/godailylib/go-flags/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ go-flags&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Goç¬¬ä¸‰æ–¹logåº“ä¹‹zap</title><link>https://arlettebrook.github.io/p/go%E7%AC%AC%E4%B8%89%E6%96%B9log%E5%BA%93%E4%B9%8Bzap/</link><pubDate>Mon, 29 Apr 2024 12:12:52 +0800</pubDate><guid>https://arlettebrook.github.io/p/go%E7%AC%AC%E4%B8%89%E6%96%B9log%E5%BA%93%E4%B9%8Bzap/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>zap æ˜¯ç”± Uber å…¬å¸å¼€æºçš„ä¸€æ¬¾ Go æ—¥å¿—åº“ï¼Œå°±åƒå®ƒçš„å‘½åä¸€æ ·ï¼Œzap ä»¥å¿«è‘—ç§°ã€‚å®˜æ–¹ GitHub ä»“åº“ä¸­åªç”¨ä¸€å¥è¯æ¥æ¦‚æ‹¬ zapï¼šã€Œåœ¨ Go ä¸­è¿›è¡Œå¿«é€Ÿã€ç»“æ„åŒ–ã€åˆ†çº§çš„æ—¥å¿—è®°å½•ã€ã€‚è¿™å¥è¯ç®€å•æ˜äº†çš„æ¦‚æ‹¬äº† zap çš„æ ¸å¿ƒç‰¹æ€§ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸‹ zap æ—¥å¿—åº“çš„åŸºæœ¬ä½¿ç”¨å’Œé«˜çº§ç‰¹æ€§ï¼Œä»¥åŠå¦‚ä½•åœ¨å®é™…åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œæ¥æé«˜åº”ç”¨ç¨‹åºçš„å¯é æ€§ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="ç‰¹ç‚¹">
&lt;a href="#%e7%89%b9%e7%82%b9" class="header-anchor">#&lt;/a>
ç‰¹ç‚¹
&lt;/h2>&lt;p>zap å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>å¿«ï¼Œéå¸¸å¿«ï¼Œè¿™ä¹Ÿæ˜¯ zap æœ€æ˜¾è‘—çš„ç‰¹ç‚¹ã€‚é€Ÿåº¦å¿«çš„åŸå› æ˜¯ zap é¿å…ä½¿ç”¨ &lt;code>interface{}&lt;/code> å’Œåå°„ï¼Œå¹¶ä¸”ä½¿ç”¨ &lt;code>sync.Pool&lt;/code> å‡å°‘å †å†…å­˜åˆ†é…ã€‚åœ¨ zap é¢å‰ Logrus çš„æ‰§è¡Œé€Ÿåº¦åªæœ‰è¢«åŠæ‰“çš„ä»½ï¼Œä½ å¯ä»¥åœ¨å®˜æ–¹ &lt;a class="link" href="https://github.com/uber-go/zap#performance" target="_blank" rel="noopener"
>GitHub ä»“åº“&lt;/a>ä¸­çœ‹åˆ° zap ä¸ä¸åŒæ—¥å¿—åº“çš„é€Ÿåº¦å¯¹æ¯”ã€‚&lt;/li>
&lt;li>æ”¯æŒç»“æ„åŒ–æ—¥å¿—è®°å½•ã€‚è¿™æ˜¯ä¸€ä¸ªä¼˜ç§€çš„æ—¥å¿—åº“å¿…å¤‡åŠŸèƒ½ã€‚&lt;/li>
&lt;li>æ”¯æŒä¸ƒç§æ—¥å¿—çº§åˆ«ï¼š&lt;code>Debug&lt;/code>ã€&lt;code>Info&lt;/code>ã€&lt;code>Warn&lt;/code>ã€&lt;code>Error&lt;/code>ã€&lt;code>DPanic&lt;/code>ã€&lt;code>Panic&lt;/code>ã€&lt;code>Fatal&lt;/code>ï¼Œå…¶ä¸­ &lt;code>DPanic&lt;/code> æ˜¯æŒ‡åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼ˆ&lt;code>development&lt;/code>ï¼‰è®°å½•æ—¥å¿—åä¼šè¿›è¡Œ &lt;code>panic&lt;/code>ã€‚&lt;/li>
&lt;li>æ”¯æŒè¾“å‡ºè°ƒç”¨å †æ ˆã€‚&lt;/li>
&lt;li>æ”¯æŒ Hooks æœºåˆ¶ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="ä½¿ç”¨">
&lt;a href="#%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
ä½¿ç”¨
&lt;/h2>&lt;h3 id="åŸºæœ¬ä½¿ç”¨">
&lt;a href="#%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
åŸºæœ¬ä½¿ç”¨
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>å…ˆå®‰è£…&lt;code>go get -u go.uber.org/zap&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åŸºæœ¬ä½¿ç”¨å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;code>zap&lt;/code>åº“çš„ä½¿ç”¨ä¸å…¶ä»–çš„æ—¥å¿—åº“éå¸¸ç›¸ä¼¼ã€‚å…ˆåˆ›å»ºä¸€ä¸ª&lt;code>logger&lt;/code>ï¼Œç„¶åè°ƒç”¨å„ä¸ªçº§åˆ«çš„æ–¹æ³•è®°å½•æ—¥å¿—ï¼ˆ&lt;code>Debug/Info/Warn/Error/&lt;/code>ï¼‰ã€‚&lt;code>zap&lt;/code>æä¾›äº†å‡ ä¸ªå¿«é€Ÿåˆ›å»º&lt;code>logger&lt;/code>çš„æ–¹æ³•ï¼Œ&lt;code>zap.NewExample()&lt;/code>ã€&lt;code>zap.NewDevelopment()&lt;/code>ã€&lt;code>zap.NewProduction()&lt;/code>ï¼Œè¿˜æœ‰é«˜åº¦å®šåˆ¶åŒ–çš„åˆ›å»ºæ–¹æ³•&lt;code>zap.New()&lt;/code>ã€‚åˆ›å»ºå‰ 3 ä¸ª&lt;code>logger&lt;/code>æ—¶ï¼Œ&lt;code>zap&lt;/code>ä¼šä½¿ç”¨ä¸€äº›é¢„å®šä¹‰çš„è®¾ç½®ï¼Œå®ƒä»¬çš„ä½¿ç”¨åœºæ™¯ä¹Ÿæœ‰æ‰€ä¸åŒã€‚&lt;code>Example&lt;/code>é€‚åˆç”¨åœ¨æµ‹è¯•ä»£ç ä¸­ï¼Œ&lt;code>Development&lt;/code>åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œ&lt;code>Production&lt;/code>ç”¨åœ¨ç”Ÿæˆç¯å¢ƒã€‚&lt;/p>
&lt;p>&lt;code>zap&lt;/code>åº•å±‚ API å¯ä»¥è®¾ç½®ç¼“å­˜ï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨&lt;code>defer logger.Sync()&lt;/code>å°†ç¼“å­˜åŒæ­¥åˆ°æ–‡ä»¶ä¸­ã€‚åˆ·æ–°ç¼“å­˜ï¼Œç¡®ä¿æ—¥å¿—è¾“å‡ºã€‚&lt;/p>
&lt;p>ç”±äº&lt;code>fmt.Printf&lt;/code>ä¹‹ç±»çš„æ–¹æ³•å¤§é‡ä½¿ç”¨&lt;code>interface{}&lt;/code>å’Œåå°„ï¼Œä¼šæœ‰ä¸å°‘æ€§èƒ½æŸå¤±ï¼Œå¹¶ä¸”å¢åŠ äº†å†…å­˜åˆ†é…çš„é¢‘æ¬¡ã€‚&lt;code>zap&lt;/code>ä¸ºäº†æé«˜æ€§èƒ½ã€å‡å°‘å†…å­˜åˆ†é…æ¬¡æ•°ï¼Œæ²¡æœ‰ä½¿ç”¨åå°„ï¼Œè€Œä¸”é»˜è®¤çš„&lt;code>Logger&lt;/code>åªæ”¯æŒ&lt;strong>å¼ºç±»å‹&lt;/strong>çš„ã€ç»“æ„åŒ–çš„æ—¥å¿—ã€‚å¿…é¡»ä½¿ç”¨&lt;code>zap&lt;/code>æä¾›çš„æ–¹æ³•è®°å½•å­—æ®µã€‚&lt;code>zap&lt;/code>ä¸º Go è¯­è¨€ä¸­æ‰€æœ‰çš„åŸºæœ¬ç±»å‹å’Œå…¶ä»–å¸¸è§ç±»å‹éƒ½æä¾›äº†æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•çš„åç§°ä¹Ÿæ¯”è¾ƒå¥½è®°å¿†ï¼Œ&lt;code>zap.Type&lt;/code>ï¼ˆ&lt;code>Type&lt;/code>ä¸º&lt;code>bool/int/uint/float64/complex64/time.Time/time.Duration/error&lt;/code>ç­‰ï¼‰å°±è¡¨ç¤ºè¯¥ç±»å‹çš„å­—æ®µï¼Œ&lt;code>zap.Typep&lt;/code>ä»¥&lt;code>p&lt;/code>ç»“å°¾è¡¨ç¤ºè¯¥ç±»å‹æŒ‡é’ˆçš„å­—æ®µï¼Œ&lt;code>zap.Types&lt;/code>ä»¥&lt;code>s&lt;/code>ç»“å°¾è¡¨ç¤ºè¯¥ç±»å‹åˆ‡ç‰‡çš„å­—æ®µã€‚å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>zap.Bool(key string, val bool) Field&lt;/code>ï¼š&lt;code>bool&lt;/code>å­—æ®µ&lt;/li>
&lt;li>&lt;code>zap.Boolp(key string, val *bool) Field&lt;/code>ï¼š&lt;code>bool&lt;/code>æŒ‡é’ˆå­—æ®µï¼›&lt;/li>
&lt;li>&lt;code>zap.Bools(key string, val []bool) Field&lt;/code>ï¼š&lt;code>bool&lt;/code>åˆ‡ç‰‡å­—æ®µã€‚&lt;/li>
&lt;/ul>
&lt;p>å½“ç„¶ä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šç±»å‹çš„å­—æ®µï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>zap.Any(key string, value interface{}) Field&lt;/code>ï¼šä»»æ„ç±»å‹çš„å­—æ®µï¼›&lt;/li>
&lt;li>&lt;code>zap.Binary(key string, val []byte) Field&lt;/code>ï¼šäºŒè¿›åˆ¶ä¸²çš„å­—æ®µã€‚&lt;/li>
&lt;/ul>
&lt;p>å½“ç„¶ï¼Œæ¯ä¸ªå­—æ®µéƒ½ç”¨æ–¹æ³•åŒ…ä¸€å±‚ç”¨èµ·æ¥æ¯”è¾ƒç¹çã€‚&lt;code>zap&lt;/code>ä¹Ÿæä¾›äº†ä¾¿æ·çš„æ–¹æ³•&lt;code>SugarLogger&lt;/code>ï¼Œå¯ä»¥ä½¿ç”¨&lt;code>printf&lt;/code>æ ¼å¼ç¬¦çš„æ–¹å¼ã€‚è°ƒç”¨&lt;code>logger.Sugar()&lt;/code>å³å¯åˆ›å»º&lt;code>SugaredLogger&lt;/code>ã€‚&lt;code>SugaredLogger&lt;/code>çš„ä½¿ç”¨æ¯”&lt;code>Logger&lt;/code>ç®€å•ï¼Œåªæ˜¯æ€§èƒ½æ¯”&lt;code>Logger&lt;/code>ä½ 50% å·¦å³ï¼Œå¯ä»¥ç”¨åœ¨éçƒ­ç‚¹å‡½æ•°ä¸­ã€‚è°ƒç”¨&lt;code>SugarLogger&lt;/code>ä»¥&lt;code>f&lt;/code>ç»“å°¾çš„æ–¹æ³•ä¸&lt;code>fmt.Printf&lt;/code>æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå¦‚ä¾‹å­ä¸­çš„&lt;code>Infof&lt;/code>ã€‚åŒæ—¶&lt;code>SugarLogger&lt;/code>è¿˜æ”¯æŒä»¥&lt;code>w&lt;/code>ç»“å°¾çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹å¼ä¸éœ€è¦å…ˆåˆ›å»ºå­—æ®µå¯¹è±¡ï¼Œç›´æ¥å°†å­—æ®µåå’Œå€¼ä¾æ¬¡æ”¾åœ¨å‚æ•°ä¸­å³å¯ï¼Œå¦‚ä¾‹å­ä¸­çš„&lt;code>Infow&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;go.uber.org/zap&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç”Ÿäº§ç¯å¢ƒ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;------ç”Ÿäº§ç¯å¢ƒ------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewProduction&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// åˆ·æ–° bufferï¼Œä¿è¯æ—¥å¿—æœ€ç»ˆä¼šè¢«è¾“å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;https://arlettebrook.github.io/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;production failed to fetch URL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1">// å› ä¸ºæ²¡æœ‰ä½¿ç”¨ interface{} å’Œåå°„æœºåˆ¶ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šå…·ä½“ç±»å‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Duration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;backoff&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¼€å‘ç¯å¢ƒ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;------å¼€å‘ç¯å¢ƒ------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewDevelopment&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;https://arlettebrook.github.io/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Debug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;development failed to fetch URL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Duration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;backoff&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æµ‹è¯•ç¯å¢ƒ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;------æµ‹è¯•ç¯å¢ƒ------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewExample&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;https://arlettebrook.github.io/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;failed to fetch URL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Duration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;backoff&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;------sugaredLogger------&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sugar&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sugar&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sugar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Infow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;failed to fetch URL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;backoff&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sugar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Infof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Failed to fetch URL: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>zap é’ˆå¯¹ç”Ÿäº§ç¯å¢ƒã€å¼€å‘ç¯å¢ƒä»¥åŠæµ‹è¯•ç¯å¢ƒæä¾›äº†ä¸åŒçš„å‡½æ•°æ¥åˆ›å»º &lt;code>Logger&lt;/code> å¯¹è±¡ã€‚&lt;/p>
&lt;p>å¦‚æœæƒ³åœ¨æ—¥å¿—åé¢è¿½åŠ  key-valueï¼Œåˆ™éœ€è¦æ ¹æ® value çš„æ•°æ®ç±»å‹ä½¿ç”¨ &lt;code>zap.String&lt;/code>ã€&lt;code>zap.Int&lt;/code> ç­‰æ–¹æ³•å®ç°ã€‚è¿™ä¸€ç‚¹åœ¨ä½¿ç”¨ä¸Šæ˜¾ç„¶ä¸å¦‚ Logrus ç­‰å…¶ä»–æ—¥å¿—åº“æ¥çš„æ–¹ä¾¿ï¼Œä½†è¿™ä¹Ÿæ˜¯ zap é€Ÿåº¦å¿«çš„åŸå› ä¹‹ä¸€ï¼Œzap å†…éƒ¨å°½é‡é¿å…ä½¿ç”¨ &lt;code>interface{}&lt;/code> å’Œåå°„æ¥æé«˜ä»£ç æ‰§è¡Œæ•ˆç‡ã€‚&lt;/p>
&lt;p>è®°å½•æ—¥å¿—çš„ &lt;code>logger.Xxx&lt;/code> æ–¹æ³•ç­¾åå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">log&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">msg&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fields&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">Field&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ &lt;code>fields&lt;/code> æ˜¯ &lt;code>zapcore.Field&lt;/code> ç±»å‹ï¼Œç”¨æ¥å­˜å‚¨ key-valueï¼Œå¹¶è®°å½• value ç±»å‹ï¼Œä¸ç®¡æ˜¯ &lt;code>zap.String&lt;/code> è¿˜æ˜¯ &lt;code>zap.Int&lt;/code> åº•å±‚éƒ½æ˜¯ &lt;code>zapcore.Field&lt;/code> ç±»å‹æ¥è®°å½•çš„ã€‚zap ä¸ºæ¯ä¸€ç§ Go çš„å†…ç½®ç±»å‹éƒ½å®šä¹‰äº†å¯¹åº”çš„ &lt;code>zap.Xxx&lt;/code> æ–¹æ³•ï¼Œç”šè‡³è¿˜å®ç° &lt;code>zap.Any()&lt;/code> æ¥æ”¯æŒ &lt;code>interface{}&lt;/code>ã€‚&lt;/p>
&lt;p>æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œæ§åˆ¶å°å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="o">------&lt;/span>&lt;span class="nx">ç”Ÿäº§ç¯å¢ƒ&lt;/span>&lt;span class="o">------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;ts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1714375211.8196504&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;caller&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;learn/main.go:18&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;production failed to fe
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">tch URL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;https://arlettebrook.github.io/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;backoff&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">------&lt;/span>&lt;span class="nx">å¼€å‘ç¯å¢ƒ&lt;/span>&lt;span class="o">------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">04&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="nx">T15&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">11.820&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">0800&lt;/span> &lt;span class="nx">DEBUG&lt;/span> &lt;span class="nx">learn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">32&lt;/span> &lt;span class="nx">development&lt;/span> &lt;span class="nx">failed&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">fetch&lt;/span> &lt;span class="nx">URL&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;https://arlettebrook.github.io/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;backoff&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;1s&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">------&lt;/span>&lt;span class="nx">æµ‹è¯•ç¯å¢ƒ&lt;/span>&lt;span class="o">------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;failed to fetch URL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;https://arlettebrook.github.io/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;b
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ackoff&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;1s&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">------&lt;/span>&lt;span class="nx">sugaredLogger&lt;/span>&lt;span class="o">------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;failed to fetch URL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;https://arlettebrook.github.io/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;b
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ackoff&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;1s&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;Failed to fetch URL: https://arlettebrook.github.io/&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œé€šè¿‡ &lt;code>zap.NewProduction()&lt;/code> åˆ›å»ºçš„æ—¥å¿—å¯¹è±¡è¾“å‡ºæ ¼å¼ä¸º JSONï¼Œè€Œé€šè¿‡ &lt;code>zap.NewDevelopment()&lt;/code> åˆ›å»ºçš„æ—¥å¿—å¯¹è±¡è¾“å‡ºæ ¼å¼ä¸º Textï¼Œæ—¥å¿—åé¢è¿½åŠ çš„ key-value ä¼šè¢«è½¬æ¢æˆ JSONã€‚å¹¶ä¸”ï¼Œä¸¤è€…è¾“å‡ºçš„å­—æ®µå†…å®¹ä¹Ÿç•¥æœ‰å·®å¼‚ï¼Œå¦‚ç”Ÿäº§ç¯å¢ƒæ—¥å¿—è¾“å‡ºçš„æ—¶é—´æ ¼å¼ä¸º &lt;code>Unix epoch&lt;/code> åˆ©äºç¨‹åºè§£æï¼Œè€Œå¼€å‘ç¯å¢ƒæ—¥å¿—è¾“å‡ºçš„æ—¶é—´æ ¼å¼ä¸º &lt;code>ISO8601&lt;/code> æ›´åˆ©äºäººç±»é˜…è¯»ã€‚æµ‹è¯•ç¯å¢ƒæ²¡æœ‰æ–‡ä»¶è¡Œå·ã€å †æ ˆè·Ÿè¸ªä¿¡æ¯ä»¥åŠæ—¶é—´ï¼Œæ ¼å¼ä¸ºJSONã€‚å¯¹åº”çš„sugaréƒ½æ˜¯æ˜¯ä¸€æ ·çš„ã€‚&lt;/p>
&lt;p>å¯¼è‡´ä»¥ä¸Šè¿™äº›å·®å¼‚çš„åŸå› æ˜¯é…ç½®ä¸åŒï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ &lt;code>zap.NewProduction&lt;/code> å’Œ &lt;code>zap.NewDevelopment&lt;/code> çš„ä»£ç å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewProduction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">options&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">Option&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">NewProductionConfig&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">options&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewProductionConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Level&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">NewAtomicLevelAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">InfoLevel&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Development&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Sampling&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">SamplingConfig&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Initial&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Thereafter&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Encoding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;json&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncoderConfig&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">NewProductionEncoderConfig&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">OutputPaths&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;stderr&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrorOutputPaths&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;stderr&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewDevelopment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">options&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">Option&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">NewDevelopmentConfig&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">options&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewDevelopmentConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Level&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">NewAtomicLevelAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">DebugLevel&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Development&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Encoding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;console&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncoderConfig&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">NewDevelopmentEncoderConfig&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">OutputPaths&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;stderr&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrorOutputPaths&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;stderr&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œä¸¤è€…åœ¨å®ç°æ€è·¯ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªé…ç½®å¯¹è±¡ &lt;code>zap.Config&lt;/code>ï¼Œç„¶åå†è°ƒç”¨é…ç½®å¯¹è±¡çš„ &lt;code>Build&lt;/code> æ–¹æ³•æ¥æ„å»º &lt;code>Logger&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>zap.Config&lt;/code> å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Level&lt;/span> &lt;span class="nx">AtomicLevel&lt;/span> &lt;span class="s">`json:&amp;#34;level&amp;#34; yaml:&amp;#34;level&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Development&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`json:&amp;#34;development&amp;#34; yaml:&amp;#34;development&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DisableCaller&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`json:&amp;#34;disableCaller&amp;#34; yaml:&amp;#34;disableCaller&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DisableStacktrace&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="s">`json:&amp;#34;disableStacktrace&amp;#34; yaml:&amp;#34;disableStacktrace&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Sampling&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">SamplingConfig&lt;/span> &lt;span class="s">`json:&amp;#34;sampling&amp;#34; yaml:&amp;#34;sampling&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Encoding&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;encoding&amp;#34; yaml:&amp;#34;encoding&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncoderConfig&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EncoderConfig&lt;/span> &lt;span class="s">`json:&amp;#34;encoderConfig&amp;#34; yaml:&amp;#34;encoderConfig&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">OutputPaths&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;outputPaths&amp;#34; yaml:&amp;#34;outputPaths&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrorOutputPaths&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;errorOutputPaths&amp;#34; yaml:&amp;#34;errorOutputPaths&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">InitialFields&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="s">`json:&amp;#34;initialFields&amp;#34; yaml:&amp;#34;initialFields&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¯ä¸ªé…ç½®é¡¹è¯´æ˜å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Level&lt;/code>: æ—¥å¿—çº§åˆ«ã€‚&lt;/li>
&lt;li>&lt;code>Development&lt;/code>: æ˜¯å¦ä¸ºå¼€å‘æ¨¡å¼ã€‚&lt;/li>
&lt;li>&lt;code>DisableCaller&lt;/code>: ç¦ç”¨è°ƒç”¨ä¿¡æ¯ï¼Œå€¼ä¸º &lt;code>true&lt;/code> æ—¶ï¼Œæ—¥å¿—ä¸­å°†ä¸å†æ˜¾ç¤ºè®°å½•æ—¥å¿—æ—¶æ‰€åœ¨çš„å‡½æ•°è°ƒç”¨æ–‡ä»¶åå’Œè¡Œå·ã€‚&lt;/li>
&lt;li>&lt;code>DisableStacktrace&lt;/code>: ç¦ç”¨å †æ ˆè·Ÿè¸ªæ•è·ã€‚&lt;/li>
&lt;li>&lt;code>Sampling&lt;/code>: é‡‡æ ·ç­–ç•¥é…ç½®ï¼Œå•ä½ä¸ºæ¯ç§’ï¼Œä½œç”¨æ˜¯é™åˆ¶æ—¥å¿—åœ¨æ¯ç§’å†…çš„è¾“å‡ºæ•°é‡ï¼Œä»¥æ­¤æ¥é˜²æ­¢å…¨å±€çš„ CPU å’Œ I/O è´Ÿè½½è¿‡é«˜ã€‚&lt;/li>
&lt;li>&lt;code>Encoding&lt;/code>: æŒ‡å®šæ—¥å¿—ç¼–ç å™¨ï¼Œç›®å‰æ”¯æŒ &lt;code>json&lt;/code> å’Œ &lt;code>console&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>EncoderConfig&lt;/code>: ç¼–ç é…ç½®ï¼Œå†³å®šäº†æ—¥å¿—å­—æ®µæ ¼å¼ã€‚&lt;/li>
&lt;li>&lt;code>OutputPaths&lt;/code>: é…ç½®æ—¥å¿—è¾“å‡ºä½ç½®ï¼ŒURLs æˆ–æ–‡ä»¶è·¯å¾„ï¼Œå¯é…ç½®å¤šä¸ªã€‚&lt;/li>
&lt;li>&lt;code>ErrorOutputPaths&lt;/code>: zap åŒ…å†…éƒ¨å‡ºç°é”™è¯¯çš„æ—¥å¿—è¾“å‡ºä½ç½®ï¼ŒURLs æˆ–æ–‡ä»¶è·¯å¾„ï¼Œå¯é…ç½®å¤šä¸ªï¼Œé»˜è®¤ &lt;code>os.Stderr&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>InitialFields&lt;/code>: åˆå§‹åŒ–å­—æ®µé…ç½®ï¼Œè¯¥é…ç½®çš„å­—æ®µä¼šä»¥ç»“æ„åŒ–çš„å½¢å¼æ‰“å°åœ¨æ¯æ¡æ—¥å¿—è¾“å‡ºä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬å†æ¥å¯¹æ¯”ä¸‹ &lt;code>NewProductionEncoderConfig()&lt;/code> å’Œ &lt;code>NewDevelopmentEncoderConfig()&lt;/code> è¿™ä¸¤ä¸ªé…ç½®çš„ä¸åŒï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewProductionEncoderConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EncoderConfig&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EncoderConfig&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TimeKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;ts&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LevelKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">NameKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;logger&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CallerKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;caller&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FunctionKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">OmitKey&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MessageKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StacktraceKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;stacktrace&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LineEnding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultLineEnding&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeLevel&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LowercaseLevelEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EpochTimeEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeDuration&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SecondsDurationEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeCaller&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ShortCallerEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewDevelopmentEncoderConfig&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EncoderConfig&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EncoderConfig&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Keys can be anything except the empty string.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">TimeKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;T&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LevelKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;L&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">NameKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;N&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CallerKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">FunctionKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">OmitKey&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MessageKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;M&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StacktraceKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;S&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LineEnding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultLineEnding&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeLevel&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CapitalLevelEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ISO8601TimeEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeDuration&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StringDurationEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeCaller&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ShortCallerEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹æ¯”æ¥çœ‹ï¼Œä¸¤è€…æœ‰å¾ˆå¤šä¸åŒçš„é…ç½®ï¼Œæ¯”å¦‚ç”Ÿäº§ç¯å¢ƒä¸‹ &lt;code>EncodeTime&lt;/code> å€¼ä¸º &lt;code>zapcore.EpochTimeEncoder&lt;/code>ï¼Œå¼€å‘ç¯å¢ƒä¸‹ &lt;code>EncodeTime&lt;/code> å€¼ä¸º &lt;code>zapcore.ISO8601TimeEncoder&lt;/code>ã€‚è¿™å°±æ˜¯ç”Ÿäº§ç¯å¢ƒæ—¥å¿—è¾“å‡ºçš„æ—¶é—´æ ¼å¼ä¸º &lt;code>Unix epoch&lt;/code> è€Œå¼€å‘ç¯å¢ƒæ—¥å¿—è¾“å‡ºçš„æ—¶é—´æ ¼å¼ä¸º &lt;code>ISO8601&lt;/code> çš„åŸå› ã€‚&lt;/p>
&lt;p>&lt;code>zapcore.EncoderConfig&lt;/code> å…¶ä»–å‡ ä¸ªå¸¸ç”¨çš„é…ç½®é¡¹è¯´æ˜å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>MessageKey&lt;/code>: æ—¥å¿—ä¿¡æ¯çš„é”®åï¼Œé»˜è®¤ &lt;code>msg&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>LevelKey&lt;/code>: æ—¥å¿—çº§åˆ«çš„é”®åï¼Œé»˜è®¤ &lt;code>level&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>TimeKey&lt;/code>: æ—¥å¿—æ—¶é—´çš„é”®åã€‚&lt;/li>
&lt;li>&lt;code>EncodeLevel&lt;/code>: æ—¥å¿—çº§åˆ«çš„æ ¼å¼ï¼Œé»˜è®¤ä¸ºå°å†™ï¼Œå¦‚ &lt;code>info&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>é™¤äº†æä¾› &lt;code>zap.NewProduction()&lt;/code> å’Œ &lt;code>zap.NewDevelopment()&lt;/code> ä¸¤ä¸ªæ„é€ å‡½æ•°å¤–ï¼Œzap è¿˜æä¾›äº† &lt;code>zap.NewExample()&lt;/code> æ¥åˆ›å»ºä¸€ä¸ª &lt;code>Logger&lt;/code> å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨äºæµ‹è¯•ï¼Œè¿™é‡Œå°±ä¸å¤šä»‹ç»äº†ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="è®°å½•å±‚çº§å…³ç³»">
&lt;a href="#%e8%ae%b0%e5%bd%95%e5%b1%82%e7%ba%a7%e5%85%b3%e7%b3%bb" class="header-anchor">#&lt;/a>
è®°å½•å±‚çº§å…³ç³»
&lt;/h3>&lt;p>å‰é¢æˆ‘ä»¬è®°å½•çš„æ—¥å¿—éƒ½æ˜¯ä¸€å±‚ç»“æ„ï¼Œæ²¡æœ‰åµŒå¥—çš„å±‚çº§ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code>zap.Namespace(key string) Field&lt;/code>æ„å»ºä¸€ä¸ª&lt;strong>å‘½åç©ºé—´&lt;/strong>ï¼Œåç»­çš„&lt;code>Field&lt;/code>éƒ½è®°å½•åœ¨æ­¤å‘½åç©ºé—´ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewExample&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tracked some metrics&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Namespace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;metrics&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;counter&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">With&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Namespace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;metrics&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;counter&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tracked some metrics&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;tracked some metrics&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;metrics&amp;#34;&lt;/span>&lt;span class="p">:{&lt;/span>&lt;span class="s">&amp;#34;counter&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;tracked some metrices&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;metrics&amp;#34;&lt;/span>&lt;span class="p">:{&lt;/span>&lt;span class="s">&amp;#34;counter&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šé¢æˆ‘ä»¬æ¼”ç¤ºäº†ä¸¤ç§&lt;code>Namespace&lt;/code>çš„ç”¨æ³•ï¼Œä¸€ç§æ˜¯ç›´æ¥ä½œä¸ºå­—æ®µä¼ å…¥&lt;code>Debug/Info&lt;/code>ç­‰æ–¹æ³•ï¼Œä¸€ç§æ˜¯è°ƒç”¨&lt;code>With()&lt;/code>åˆ›å»ºä¸€ä¸ªæ–°çš„&lt;code>Logger&lt;/code>ï¼Œæ–°çš„&lt;code>Logger&lt;/code>è®°å½•æ—¥å¿—æ—¶æ€»æ˜¯å¸¦ä¸Šé¢„è®¾çš„å­—æ®µã€‚&lt;code>With()&lt;/code>æ–¹æ³•å®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„&lt;code>Logger&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// src/go.uber.org/zap/logger.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">log&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">With&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fields&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">Field&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fields&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">log&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">clone&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">core&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">With&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fields&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é¢„è®¾æ—¥å¿—å­—æ®µ">
&lt;a href="#%e9%a2%84%e8%ae%be%e6%97%a5%e5%bf%97%e5%ad%97%e6%ae%b5" class="header-anchor">#&lt;/a>
é¢„è®¾æ—¥å¿—å­—æ®µ
&lt;/h3>&lt;p>å¦‚æœæ¯æ¡æ—¥å¿—éƒ½è¦è®°å½•ä¸€äº›å…±ç”¨çš„å­—æ®µï¼Œé‚£ä¹ˆä½¿ç”¨&lt;code>zap.Fields(fs ...Field)&lt;/code>åˆ›å»ºçš„é€‰é¡¹ã€‚ä¾‹å¦‚åœ¨æœåŠ¡å™¨æ—¥å¿—ä¸­è®°å½•å¯èƒ½éƒ½éœ€è¦è®°å½•&lt;code>serverId&lt;/code>å’Œ&lt;code>serverName&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewExample&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fields&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;serverId&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">90&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;serverName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;awesome web&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hello world&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;hello world&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;serverId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">90&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;serverName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;awesome web&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸&lt;code>logger.with()&lt;/code>å·®ä¸å¤š&lt;/p>
&lt;h3 id="ç»™è¯­æ³•åŠ ç‚¹ç³–">
&lt;a href="#%e7%bb%99%e8%af%ad%e6%b3%95%e5%8a%a0%e7%82%b9%e7%b3%96" class="header-anchor">#&lt;/a>
ç»™è¯­æ³•åŠ ç‚¹ç³–
&lt;/h3>&lt;p>zap è™½ç„¶é€Ÿåº¦è¶³å¤Ÿå¿«ï¼Œä½†æ˜¯å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦æè‡´çš„æ€§èƒ½ï¼Œè€Œæ˜¯æƒ³è®©ä»£ç å†™èµ·æ¥æ›´çˆ½ä¸€äº›ã€‚zap ä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³æ–¹æ¡ˆ â€”â€” &lt;code>SugaredLogger&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;go.uber.org/zap&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewProduction&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;https://arlettebrook.github.io/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sugar&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sugar&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sugar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Infow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;production failed to fetch URL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;backoff&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sugar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Info&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sugar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Infoln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Infoln&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sugar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Infof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Infof: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ &lt;code>logger.Sugar()&lt;/code> æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ª &lt;code>Logger&lt;/code> å¯¹è±¡è½¬æ¢æˆä¸€ä¸ª &lt;code>SugaredLogger&lt;/code> å¯¹è±¡ã€‚&lt;/p>
&lt;p>&lt;code>SugaredLogger&lt;/code> æä¾›äº†æ›´äººæ€§åŒ–çš„æ¥å£ï¼Œæ—¥å¿—ä¸­è¿½åŠ  key-value æ—¶ä¸åœ¨éœ€è¦ &lt;code>zap.String(&amp;quot;url&amp;quot;, url)&lt;/code> è¿™ç§æ˜¾å¼æŒ‡æ˜ç±»å‹çš„å†™æ³•ï¼Œåªéœ€è¦ä¿è¯ key ä¸º &lt;code>string&lt;/code> ç±»å‹ï¼Œvalue åˆ™å¯ä»¥ä¸ºä»»æ„ç±»å‹ï¼Œèƒ½å¤Ÿå‡å°‘æˆ‘ä»¬ç¼–å†™çš„ä»£ç é‡ã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼Œä¸ºäº†æ»¡è¶³ä¸åŒéœ€æ±‚ï¼Œ&lt;code>SugaredLogger&lt;/code> æä¾›äº†å››ç§æ–¹å¼è¾“å‡ºæ—¥å¿—ï¼š&lt;code>sugar.Xxx&lt;/code>ã€&lt;code>sugar.Xxxw&lt;/code>ã€&lt;code>sugar.Xxxf&lt;/code>ã€&lt;code>sugar.Xxxln&lt;/code>ã€‚&lt;/p>
&lt;p>æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œæ§åˆ¶å°å¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;ts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1714398451.8505704&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;caller&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;learn/main.go:15&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;production failed to fe
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">tch URL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;https://arlettebrook.github.io/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;attempt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;backoff&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;ts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1714398451.8511178&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;caller&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;learn/main.go:20&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;Info&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;ts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1714398451.851623&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;caller&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;learn/main.go:21&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;Infoln&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;ts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1714398451.8516397&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;caller&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;learn/main.go:22&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;Infof: https://arletteb
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">rook.github.io/&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬çŸ¥é“ï¼Œè¿™ç§æ–¹ä¾¿çš„å†™æ³•æ˜¯æœ‰ä¸€å®šä»£ä»·çš„ï¼Œæ‰€ä»¥å¼€å‘ä¸­æ˜¯å¦éœ€è¦ä½¿ç”¨ &lt;code>SugaredLogger&lt;/code> æ¥è®°å½•æ—¥å¿—ï¼Œéœ€è¦æ ¹æ®ç¨‹åºçš„ç‰¹ç‚¹æ¥å†³å®šã€‚&lt;code>SugaredLogger&lt;/code> ä¸ &lt;code>Logger&lt;/code> çš„æ€§èƒ½å¯¹æ¯”åŒæ ·å¯ä»¥åœ¨å®˜æ–¹ &lt;a class="link" href="https://github.com/uber-go/zap#performance" target="_blank" rel="noopener"
>GitHub ä»“åº“&lt;/a>ä¸­çœ‹åˆ°ã€‚&lt;/p>
&lt;h3 id="å®šåˆ¶-logger">
&lt;a href="#%e5%ae%9a%e5%88%b6-logger" class="header-anchor">#&lt;/a>
å®šåˆ¶ Logger
&lt;/h3>&lt;p>é€šè¿‡æŸ¥çœ‹ &lt;code>zap.NewProduction()&lt;/code> å’Œ &lt;code>zap.NewDevelopment()&lt;/code> ä¸¤ä¸ªæ„é€ å‡½æ•°æºç ï¼Œæˆ‘ä»¬çŸ¥é“å¯ä»¥ä½¿ç”¨ &lt;code>zap.Config&lt;/code> å¯¹è±¡çš„ &lt;code>Build&lt;/code> æ–¹æ³•åˆ›å»º &lt;code>Logger&lt;/code> å¯¹è±¡ã€‚é‚£ä¹ˆæˆ‘ä»¬å¾ˆå®¹æ˜“èƒ½å¤Ÿæƒ³åˆ°ï¼Œå¦‚æœè¦å®šåˆ¶ &lt;code>Logger&lt;/code>ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªå®šåˆ¶çš„ &lt;code>zap.Config&lt;/code> å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;go.uber.org/zap&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;go.uber.org/zap/zapcore&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">newCustomLogger&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cfg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Level&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewAtomicLevelAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DebugLevel&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Development&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Encoding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;json&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncoderConfig&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">EncoderConfig&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TimeKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LevelKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">NameKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;logger&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CallerKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// ä¸è®°å½•æ—¥å¿—è°ƒç”¨ä½ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">FunctionKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">OmitKey&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MessageKey&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LineEnding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DefaultLineEnding&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeLevel&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LowercaseLevelEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RFC3339TimeEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeDuration&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SecondsDurationEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">EncodeCaller&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ShortCallerEncoder&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">OutputPaths&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;stdout&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;test.log&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrorOutputPaths&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;error.log&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Build&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">newCustomLogger&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¢åŠ ä¸€ä¸ª skip é€‰é¡¹ï¼Œè§¦å‘ zap å†…éƒ¨ errorï¼Œå°†é”™è¯¯è¾“å‡ºåˆ° error.log
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logger&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithOptions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddCallerSkip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Info msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Error msg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šä»£ç é€šè¿‡ &lt;code>newCustomLogger&lt;/code> å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ &lt;code>Logger&lt;/code>ï¼ŒåŒæ ·é€šè¿‡å…ˆå®šä¹‰ä¸€ä¸ª &lt;code>zap.Config&lt;/code> ç„¶åå†è°ƒç”¨å…¶ &lt;code>Build&lt;/code> æ–¹æ³•æ¥å®ç°ã€‚&lt;/p>
&lt;p>é…ç½®æ—¥å¿—åˆ†åˆ«è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºå’Œ &lt;code>test.log&lt;/code> æ–‡ä»¶ï¼Œæ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œæ§åˆ¶å°å’Œ &lt;code>test.log&lt;/code> éƒ½ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;2023-03-19T19:19:18+08:00&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;Info msg&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;2023-03-19T19:19:18+08:00&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;Error msg&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜é€šè¿‡ &lt;code>logger.WithOptions()&lt;/code> ä¸º &lt;code>Logger&lt;/code> å¯¹è±¡å¢åŠ äº†ä¸€ä¸ªé€‰é¡¹ &lt;code>zap.AddCallerSkip(100)&lt;/code>ï¼Œè¿™ä¸ªé€‰é¡¹çš„ä½œç”¨æ˜¯æŒ‡å®šåœ¨é€šè¿‡è°ƒç”¨æ ˆè·å¾—è¡Œå·æ—¶è·³è¿‡çš„è°ƒç”¨æ·±åº¦ï¼Œå› ä¸ºæˆ‘ä»¬çš„å‡½æ•°è°ƒç”¨æ ˆå¹¶ä¸æ˜¯ 100 å±‚ï¼Œæ‰€ä»¥ä¼šè§¦å‘ zap å†…éƒ¨é”™è¯¯ï¼Œzap ä¼šå°†é”™è¯¯æ—¥å¿—è¾“å‡ºåˆ° &lt;code>ErrorOutputPaths&lt;/code> é…ç½®æŒ‡å®šçš„ä½ç½®ä¸­ï¼Œå³ &lt;code>error.log&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>error.log&lt;/code> å¾—åˆ°çš„é”™è¯¯æ—¥å¿—å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">03&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">19&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">18.438824&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mo">0000&lt;/span> &lt;span class="nx">UTC&lt;/span> &lt;span class="nx">Logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">check&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">failed&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="nx">caller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">03&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">19&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">18.44921&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mo">0000&lt;/span> &lt;span class="nx">UTC&lt;/span> &lt;span class="nx">Logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">check&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">failed&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="nx">caller&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="é€‰é¡¹">
&lt;a href="#%e9%80%89%e9%a1%b9" class="header-anchor">#&lt;/a>
é€‰é¡¹
&lt;/h4>&lt;p>&lt;code>logger.WithOptions()&lt;/code> æ”¯æŒçš„é€‰é¡¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>WrapCore(f func(zapcore.Core) zapcore.Core)&lt;/code>: ä½¿ç”¨ä¸€ä¸ªæ–°çš„ &lt;code>zapcore.Core&lt;/code> æ›¿æ¢æ‰ &lt;code>Logger&lt;/code> å†…éƒ¨åŸæœ‰çš„çš„ &lt;code>zapcore.Core&lt;/code> å±æ€§ã€‚&lt;/li>
&lt;li>&lt;code>Hooks(hooks ...func(zapcore.Entry) error)&lt;/code>: æ³¨å†Œé’©å­å‡½æ•°ï¼Œç”¨æ¥åœ¨æ—¥å¿—æ‰“å°æ—¶åŒæ—¶è°ƒç”¨æ³¨å†Œçš„é’©å­å‡½æ•°ã€‚&lt;/li>
&lt;li>&lt;code>Fields(fs ...Field)&lt;/code>: æ·»åŠ å…¬å…±å­—æ®µã€‚&lt;/li>
&lt;li>&lt;code>ErrorOutput(w zapcore.WriteSyncer)&lt;/code>: æŒ‡å®šæ—¥å¿—ç»„ä»¶å†…éƒ¨å‡ºç°å¼‚å¸¸æ—¶çš„è¾“å‡ºä½ç½®ã€‚&lt;/li>
&lt;li>&lt;code>Development()&lt;/code>: å°†æ—¥å¿—è®°å½•å™¨è®¾ä¸ºå¼€å‘æ¨¡å¼ï¼Œè¿™å°†ä½¿ &lt;code>DPanic&lt;/code> çº§åˆ«æ—¥å¿—è®°å½•é”™è¯¯åæ‰§è¡Œ &lt;code>panic()&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>AddCaller()&lt;/code>: ä¸ &lt;code>WithCaller(true)&lt;/code> ç­‰ä»·ã€‚&lt;/li>
&lt;li>&lt;code>WithCaller(enabled bool)&lt;/code>: æŒ‡å®šæ˜¯å¦åœ¨æ—¥å¿—è¾“å‡ºå†…å®¹ä¸­å¢åŠ è°ƒç”¨ä¿¡æ¯ï¼Œå³æ–‡ä»¶åå’Œè¡Œå·ã€‚&lt;/li>
&lt;li>&lt;code>AddCallerSkip(skip int)&lt;/code>: æŒ‡å®šåœ¨é€šè¿‡è°ƒç”¨æ ˆè·å–æ–‡ä»¶åå’Œè¡Œå·æ—¶è·³è¿‡çš„è°ƒç”¨æ·±åº¦ã€‚&lt;/li>
&lt;li>&lt;code>AddStacktrace(lvl zapcore.LevelEnabler)&lt;/code>: ç”¨æ¥æŒ‡å®šæŸä¸ªæ—¥å¿—çº§åˆ«åŠä»¥ä¸Šçº§åˆ«è¾“å‡ºè°ƒç”¨å †æ ˆã€‚&lt;/li>
&lt;li>&lt;code>IncreaseLevel(lvl zapcore.LevelEnabler)&lt;/code>: æé«˜æ—¥å¿—çº§åˆ«ï¼Œå¦‚æœä¼ å…¥çš„ &lt;code>lvl&lt;/code> æ¯”ç°æœ‰çº§åˆ«ä½ï¼Œåˆ™ä¸ä¼šæ”¹å˜æ—¥å¿—çº§åˆ«ã€‚&lt;/li>
&lt;li>&lt;code>WithFatalHook(hook zapcore.CheckWriteHook)&lt;/code>: å½“å‡ºç° &lt;code>Fatal&lt;/code> çº§åˆ«æ—¥å¿—æ—¶è°ƒç”¨çš„é’©å­å‡½æ•°ã€‚&lt;/li>
&lt;li>&lt;code>WithClock(clock zapcore.Clock)&lt;/code>: æŒ‡å®šæ—¥å¿—è®°å½•å™¨ç”¨æ¥ç¡®å®šå½“å‰æ—¶é—´çš„ &lt;code>zapcore.Clock&lt;/code> å¯¹è±¡ï¼Œé»˜è®¤ä¸º &lt;code>time.Now&lt;/code> çš„ç³»ç»Ÿæ—¶é’Ÿã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;code>NewExample()/NewDevelopment()/NewProduction()&lt;/code>è¿™ 3 ä¸ªå‡½æ•°å¯ä»¥ä¼ å…¥è‹¥å¹²ç±»å‹ä¸º&lt;code>zap.Option&lt;/code>çš„é€‰é¡¹ï¼Œä»è€Œå®šåˆ¶&lt;code>Logger&lt;/code>çš„è¡Œä¸ºã€‚åˆä¸€æ¬¡è§åˆ°äº†&lt;strong>é€‰é¡¹æ¨¡å¼&lt;/strong>ï¼ï¼&lt;/p>
&lt;p>&lt;code>zap&lt;/code>æä¾›äº†ä¸°å¯Œçš„é€‰é¡¹ä¾›æˆ‘ä»¬é€‰æ‹©ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è¾“å‡ºæ–‡ä»¶åå’Œè¡Œå·&lt;/p>
&lt;p>è°ƒç”¨&lt;code>zap.AddCaller()&lt;/code>è¿”å›çš„é€‰é¡¹è®¾ç½®è¾“å‡ºæ–‡ä»¶åå’Œè¡Œå·ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªå‰æï¼Œå¿…é¡»è®¾ç½®é…ç½®å¯¹è±¡&lt;code>Config&lt;/code>ä¸­çš„&lt;code>CallerKey&lt;/code>å­—æ®µã€‚ä¹Ÿå› æ­¤&lt;code>NewExample()&lt;/code>ä¸èƒ½è¾“å‡ºè¿™ä¸ªä¿¡æ¯ï¼ˆå®ƒçš„&lt;code>Config&lt;/code>æ²¡æœ‰è®¾ç½®&lt;code>CallerKey&lt;/code>ï¼‰ã€‚&lt;/p>
&lt;p>&lt;code>AddCaller()&lt;/code>ä¸&lt;code>zap.WithCaller(true)&lt;/code>ç­‰ä»·ã€‚ä¸€èˆ¬ä¸ç”¨&lt;/p>
&lt;p>æœ‰æ—¶æˆ‘ä»¬ç¨å¾®å°è£…äº†ä¸€ä¸‹è®°å½•æ—¥å¿—çš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›è¾“å‡ºçš„æ–‡ä»¶åå’Œè¡Œå·æ˜¯è°ƒç”¨å°è£…å‡½æ•°çš„ä½ç½®ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨&lt;code>zap.AddCallerSkip(skip int)&lt;/code>å‘ä¸Šè·³ 1 å±‚ã€‚å¯èƒ½ä¼šç”¨åˆ°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¾“å‡ºè°ƒç”¨å †æ ˆ&lt;/p>
&lt;p>æœ‰æ—¶å€™åœ¨æŸä¸ªå‡½æ•°å¤„ç†ä¸­é‡åˆ°äº†å¼‚å¸¸æƒ…å†µï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°å¯èƒ½åœ¨å¾ˆå¤šåœ°æ–¹è¢«è°ƒç”¨ã€‚å¦‚æœæˆ‘ä»¬èƒ½è¾“å‡ºæ­¤æ¬¡è°ƒç”¨çš„å †æ ˆï¼Œé‚£ä¹ˆåˆ†æèµ·æ¥å°±ä¼šå¾ˆæ–¹ä¾¿ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code>zap.AddStackTrace(lvl zapcore.LevelEnabler)&lt;/code>è¾¾æˆè¿™ä¸ªç›®çš„ã€‚è¯¥å‡½æ•°æŒ‡å®š&lt;code>lvl&lt;/code>å’Œä¹‹ä¸Šçš„çº§åˆ«éƒ½éœ€è¦è¾“å‡ºè°ƒç”¨å †æ ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;go.uber.org/zap&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;go.uber.org/zap/zapcore&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">f1&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">f2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hello world&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">f2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">msg&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fields&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Field&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">L&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Warn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">msg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fields&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// zap.L()è·å–å…¨å±€logger
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewDevelopment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AddStacktrace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">zapcore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WarnLevel&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReplaceGlobals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// æ›¿æ¢å…¨å±€logger
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">f1&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†&lt;code>zapcore.WarnLevel&lt;/code>ä¼ å…¥&lt;code>AddStacktrace()&lt;/code>ï¼Œä¹‹å&lt;code>Warn()/Error()&lt;/code>ç­‰çº§åˆ«çš„æ—¥å¿—ä¼šè¾“å‡ºå †æ ˆï¼Œ&lt;code>Debug()/Info()&lt;/code>è¿™äº›çº§åˆ«ä¸ä¼šã€‚è¿è¡Œç»“æœï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mo">04&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="nx">T10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">49.798&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">0800&lt;/span> &lt;span class="nx">WARN&lt;/span> &lt;span class="nx">learn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span> &lt;span class="nx">hello&lt;/span> &lt;span class="nx">world&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">f2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">F&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">GoProject&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">learn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">f1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">F&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">GoProject&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">learn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">F&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">GoProject&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">learn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">D&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">Go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">runtime&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">proc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">271&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¾ˆæ¸…æ¥šåœ°çœ‹åˆ°è°ƒç”¨è·¯å¾„ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>åˆ›å»ºè‡ªå®šä¹‰çš„é…ç½®å¯¹è±¡ï¼Œé™¤äº†åœ¨ä»£ç ä¸­æŒ‡å®šé…ç½®å‚æ•°ï¼Œä¹Ÿå¯ä»¥å°†è¿™äº›é…ç½®é¡¹å†™å…¥åˆ° JSON æ–‡ä»¶ä¸­ï¼Œç„¶åé€šè¿‡ &lt;code>json.Unmarshal&lt;/code> çš„æ–¹å¼å°†é…ç½®ç»‘å®šåˆ° &lt;code>zap.Config&lt;/code>ï¼Œå¯ä»¥å‚è€ƒ&lt;a class="link" href="https://pkg.go.dev/go.uber.org/zap#example-package-BasicConfiguration" target="_blank" rel="noopener"
>å®˜æ–¹ç¤ºä¾‹&lt;/a>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rawJSON&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`{
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;level&amp;#34;:&amp;#34;debug&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;encoding&amp;#34;:&amp;#34;json&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;outputPaths&amp;#34;: [&amp;#34;stdout&amp;#34;, &amp;#34;server.log&amp;#34;],
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;errorOutputPaths&amp;#34;: [&amp;#34;stderr&amp;#34;],
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;initialFields&amp;#34;:{&amp;#34;name&amp;#34;:&amp;#34;dj&amp;#34;},
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;encoderConfig&amp;#34;: {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;messageKey&amp;#34;: &amp;#34;message&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;levelKey&amp;#34;: &amp;#34;level&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;levelEncoder&amp;#34;: &amp;#34;lowercase&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> }`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">cfg&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">json&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unmarshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rawJSON&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cfg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Build&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;server start work successfully!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šé¢åˆ›å»ºä¸€ä¸ªè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º&lt;code>stdout&lt;/code>å’Œæ–‡ä»¶&lt;code>server.log&lt;/code>çš„&lt;code>Logger&lt;/code>ã€‚è§‚å¯Ÿè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;server start work successfully!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;dj&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å…¨å±€logger">
&lt;a href="#%e5%85%a8%e5%b1%80logger" class="header-anchor">#&lt;/a>
å…¨å±€&lt;code>Logger&lt;/code>
&lt;/h3>&lt;p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œ&lt;code>zap&lt;/code>æä¾›äº†ä¸¤ä¸ªå…¨å±€çš„&lt;code>Logger&lt;/code>ï¼Œä¸€ä¸ªæ˜¯&lt;code>*zap.Logger&lt;/code>ï¼Œå¯è°ƒç”¨&lt;code>zap.L()&lt;/code>è·å¾—ï¼›å¦ä¸€ä¸ªæ˜¯&lt;code>*zap.SugaredLogger&lt;/code>ï¼Œå¯è°ƒç”¨&lt;code>zap.S()&lt;/code>è·å¾—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¨å±€çš„&lt;code>Logger&lt;/code>é»˜è®¤å¹¶ä¸ä¼šè®°å½•æ—¥å¿—ï¼å®ƒæ˜¯ä¸€ä¸ªæ— å®é™…æ•ˆæœçš„&lt;code>Logger&lt;/code>ã€‚çœ‹æºç :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// go.uber.org/zap/global.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_globalMu&lt;/span> &lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RWMutex&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_globalL&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">NewNop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_globalS&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">_globalL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sugar&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code>ReplaceGlobals(logger *Logger) func()&lt;/code>å°†&lt;code>logger&lt;/code>è®¾ç½®ä¸ºå…¨å±€çš„&lt;code>Logger&lt;/code>ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªæ— å‚å‡½æ•°ï¼Œç”¨äºæ¢å¤å…¨å±€&lt;code>Logger&lt;/code>è®¾ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">L&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;global Logger before&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">S&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;global SugaredLogger before&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewExample&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReplaceGlobals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">L&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;global Logger after&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">S&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;global SugaredLogger after&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;global Logger after&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;global SugaredLogger after&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°åœ¨è°ƒç”¨&lt;code>ReplaceGlobals&lt;/code>ä¹‹å‰è®°å½•çš„æ—¥å¿—å¹¶æ²¡æœ‰è¾“å‡ºã€‚&lt;/p>
&lt;h3 id="ä¸æ ‡å‡†æ—¥å¿—åº“æ­é…ä½¿ç”¨">
&lt;a href="#%e4%b8%8e%e6%a0%87%e5%87%86%e6%97%a5%e5%bf%97%e5%ba%93%e6%90%ad%e9%85%8d%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
ä¸æ ‡å‡†æ—¥å¿—åº“æ­é…ä½¿ç”¨
&lt;/h3>&lt;p>å¦‚æœé¡¹ç›®ä¸€å¼€å§‹ä½¿ç”¨çš„æ˜¯æ ‡å‡†æ—¥å¿—åº“&lt;code>log&lt;/code>ï¼Œåé¢æƒ³è½¬ä¸º&lt;code>zap&lt;/code>ã€‚è¿™æ—¶ä¸å¿…ä¿®æ”¹æ¯ä¸€ä¸ªæ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥è°ƒç”¨&lt;code>zap.NewStdLog(l *Logger) *log.Logger&lt;/code>è¿”å›ä¸€ä¸ªæ ‡å‡†çš„&lt;code>log.Logger&lt;/code>ï¼Œå†…éƒ¨å®é™…ä¸Šå†™å…¥çš„è¿˜æ˜¯æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„&lt;code>zap.Logger&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewExample&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewStdLog&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;standard logger wrapper&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;standard logger wrapper&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¾ˆæ–¹ä¾¿ä¸æ˜¯å—ï¼Ÿæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨&lt;code>NewStdLogAt(l *logger, level zapcore.Level) (*log.Logger, error)&lt;/code>è®©æ ‡å‡†æ¥å£ä»¥&lt;code>level&lt;/code>çº§åˆ«å†™å…¥å†…éƒ¨çš„&lt;code>*zap.Logger&lt;/code>ã€‚&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬åªæ˜¯æƒ³åœ¨ä¸€æ®µä»£ç å†…ä½¿ç”¨æ ‡å‡†æ—¥å¿—åº“&lt;code>log&lt;/code>ï¼Œå…¶å®ƒåœ°æ–¹è¿˜æ˜¯ä½¿ç”¨&lt;code>zap.Logger&lt;/code>ã€‚å¯ä»¥è°ƒç”¨&lt;code>RedirectStdLog(l *Logger) func()&lt;/code>ã€‚å®ƒä¼šè¿”å›ä¸€ä¸ªæ— å‚å‡½æ•°æ¢å¤è®¾ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewExample&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">undo&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">zap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">RedirectStdLog&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;redirected standard library&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">undo&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;restored standard library&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœ‹å‰åè¾“å‡ºå˜åŒ–ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;msg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s">&amp;#34;redirected standard library&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2020&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mo">04&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">24&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">58&lt;/span> &lt;span class="nx">restored&lt;/span> &lt;span class="nx">standard&lt;/span> &lt;span class="nx">library&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶&lt;code>RedirectStdLog&lt;/code>ä¹Ÿæœ‰ä¸€ä¸ªå¯¹åº”çš„&lt;code>RedirectStdLogAt&lt;/code>ä»¥ç‰¹å®šçš„çº§åˆ«è°ƒç”¨å†…éƒ¨çš„&lt;code>*zap.Logger&lt;/code>æ–¹æ³•ã€‚&lt;/p>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2020/04/23/godailylib/zap/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ zap&lt;/a>&lt;/li>
&lt;li>zap æºç : &lt;a class="link" href="https://github.com/uber-go/zap" target="_blank" rel="noopener"
>https://github.com/uber-go/zap&lt;/a>&lt;/li>
&lt;li>zap æ–‡æ¡£: &lt;a class="link" href="https://pkg.go.dev/go.uber.org/zap" target="_blank" rel="noopener"
>https://pkg.go.dev/go.uber.org/zap&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://jianghushinian.cn/2023/03/19/use-of-zap-in-go-third-party-log-library/" target="_blank" rel="noopener"
>Go ç¬¬ä¸‰æ–¹ log åº“ä¹‹ zap ä½¿ç”¨&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://jianghushinian.cn/2023/04/16/how-to-wrap-a-more-user-friendly-logging-package-based-on-zap/" target="_blank" rel="noopener"
>å¦‚ä½•åŸºäº zap å°è£…ä¸€ä¸ªæ›´å¥½ç”¨çš„æ—¥å¿—åº“&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Go modulesè¯¦è§£</title><link>https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/</link><pubDate>Sun, 28 Apr 2024 10:57:17 +0800</pubDate><guid>https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/</guid><description>&lt;hr>
&lt;h2 id="æ¦‚è¿°">
&lt;a href="#%e6%a6%82%e8%bf%b0" class="header-anchor">#&lt;/a>
æ¦‚è¿°
&lt;/h2>&lt;p>å¤§å¤šæ•°è¯­è¨€éƒ½æœ‰â€œä¾èµ–â€ã€â€œåŒ…â€ç­‰æ¦‚å¿µï¼Œ&lt;code>Go&lt;/code>è¯­è¨€çš„ä¾èµ–å¤„ç†ç»å†äº†å‡ æ¬¡å˜é©ã€‚&lt;/p>
&lt;p>æœ€æ—©çš„æ—¶å€™ï¼Œ&lt;code>Go&lt;/code>æ‰€ä¾èµ–çš„æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åº“éƒ½æ”¾åœ¨&lt;code>GOPATH&lt;/code>è¿™ä¸ªç›®å½•ä¸‹é¢ã€‚ä»&lt;code>v1.5&lt;/code>å¼€å§‹å¼•å…¥&lt;code>vendor&lt;/code>æ¨¡å¼ï¼Œå¦‚æœé¡¹ç›®ç›®å½•ä¸‹æœ‰&lt;code>vendor&lt;/code>ç›®å½•ï¼Œé‚£ä¹ˆ&lt;code>go&lt;/code>å·¥å…·é“¾ä¼šä¼˜å…ˆä½¿ç”¨&lt;code>vendor&lt;/code>å†…çš„åŒ…è¿›è¡Œç¼–è¯‘ã€æµ‹è¯•ç­‰ã€‚&lt;/p>
&lt;p>ä»&lt;code>v1.11&lt;/code>å¼€å§‹ï¼Œå¼•å…¥äº†&lt;code>Go Modules&lt;/code> ä½œä¸ºä¾èµ–è§£å†³æ–¹æ¡ˆï¼Œåˆ°&lt;code>v1.14&lt;/code>å®£å¸ƒ&lt;code>Go Modules&lt;/code>å·²ç»å¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œåˆ°&lt;code>v1.16&lt;/code>ç‰ˆæœ¬å¼€å§‹&lt;code>Go Module&lt;/code>é»˜è®¤å¼€å¯ã€‚&lt;/p>
&lt;h3 id="ä»€ä¹ˆæ˜¯-go-modules">
&lt;a href="#%e4%bb%80%e4%b9%88%e6%98%af-go-modules" class="header-anchor">#&lt;/a>
ä»€ä¹ˆæ˜¯ Go Modules
&lt;/h3>&lt;p>Go modules æ˜¯ Go è¯­è¨€çš„ä¾èµ–è§£å†³æ–¹æ¡ˆï¼Œå‘å¸ƒäº Go1.11ï¼Œæˆé•¿äº Go1.12ï¼Œä¸°å¯Œäº Go1.13ï¼Œæ­£å¼äº Go1.14 æ¨èåœ¨ç”Ÿäº§ä¸Šä½¿ç”¨ã€‚&lt;/p>
&lt;p>Go Modulesä½¿å¾—Goè¯­è¨€å¼€å‘è€…èƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°ç®¡ç†ä»£ç åŒ…åŠå…¶ç‰ˆæœ¬ï¼Œå¹¶èƒ½å¤Ÿä¸ç°æœ‰çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼ˆå¦‚Gitã€SVNç­‰ï¼‰é›†æˆä½¿ç”¨ã€‚&lt;/p>
&lt;p>åœ¨ä¼ ç»Ÿçš„GOPATHæ¨¡å¼ä¸­ï¼Œæ‰€æœ‰Goä»£ç éƒ½å¿…é¡»ä½äºä¸€ä¸ªå…¨å±€çš„GOPATHè·¯å¾„ä¹‹ä¸‹ï¼Œè¿™ä½¿å¾—åœ¨ä¸åŒé¡¹ç›®ä¸­ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ä¾èµ–åŒ…å˜å¾—éå¸¸å›°éš¾ã€‚ç„¶è€Œï¼Œåœ¨Go Modulesæ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½å¯ä»¥ç‹¬ç«‹ç®¡ç†è‡ªå·±çš„ä¾èµ–å…³ç³»ï¼Œå…·æœ‰æ›´å¥½çš„å…¼å®¹æ€§ã€‚å½“ä½¿ç”¨Go Modulesæ¨¡å¼åï¼Œé¡¹ç›®ä¸­ä¼šè‡ªåŠ¨åˆ›å»ºgo.modæ–‡ä»¶ï¼Œå…¶ä¸­è®°å½•äº†é¡¹ç›®æ‰€ä¾èµ–çš„æ¨¡å—åŠå…¶ç‰ˆæœ¬ä¿¡æ¯ã€‚&lt;strong>go.modæ˜¯Goè¯­è¨€é¡¹ç›®ä¸­çš„æ¨¡å—æ–‡ä»¶&lt;/strong>ï¼Œç”¨äºç®¡ç†é¡¹ç›®çš„ä¾èµ–å…³ç³»å’Œç‰ˆæœ¬ä¿¡æ¯ã€‚&lt;/p>
&lt;p>Go Modulesä¹Ÿæ”¯æŒè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼Œè¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥æŒ‡å®šä¾èµ–åŒ…çš„ç‰ˆæœ¬èŒƒå›´ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¾èµ–æœ€æ–°çš„ç‰ˆæœ¬ã€‚è¿™ç§çµæ´»æ€§æœ‰åŠ©äºç¡®ä¿é¡¹ç›®çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/p>
&lt;p>Go moudles ç›®å‰é›†æˆåœ¨ Go çš„å·¥å…·é“¾ä¸­ï¼Œåªè¦å®‰è£…äº† Goï¼Œè‡ªç„¶è€Œç„¶ä¹Ÿå°±å¯ä»¥ä½¿ç”¨ Go moudles äº†ï¼Œè€Œ Go modules çš„å‡ºç°ä¹Ÿè§£å†³äº†åœ¨ Go1.11 å‰çš„å‡ ä¸ªå¸¸è§äº‰è®®é—®é¢˜ï¼š&lt;/p>
&lt;ul>
&lt;li>Go è¯­è¨€é•¿ä¹…ä»¥æ¥çš„ä¾èµ–ç®¡ç†é—®é¢˜ã€‚&lt;/li>
&lt;li>â€œæ·˜æ±°â€ç°æœ‰çš„ &lt;code>GOPATH&lt;/code> çš„ä½¿ç”¨æ¨¡å¼ã€‚&lt;/li>
&lt;li>ç»Ÿä¸€ç¤¾åŒºä¸­çš„å…¶å®ƒçš„ä¾èµ–ç®¡ç†å·¥å…·ï¼ˆæä¾›è¿ç§»åŠŸèƒ½ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¼˜åŠ¿&lt;/p>
&lt;ul>
&lt;li>é¦–å…ˆï¼Œç ”å‘è€…èƒ½å¤Ÿåœ¨ä»»ä½•ç›®å½•ä¸‹å·¥ä½œï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨GOPATHæŒ‡å®šçš„ç›®å½•ã€‚&lt;/li>
&lt;li>å¯ä»¥å®‰è£…ä¾èµ–åŒ…çš„æŒ‡å®šç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯åªèƒ½ä»masteråˆ†æ”¯å®‰è£…æœ€æ–°çš„ç‰ˆæœ¬ã€‚&lt;/li>
&lt;li>å¯ä»¥å¯¼å…¥åŒä¸€ä¸ªä¾èµ–åŒ…çš„å¤šä¸ªç‰ˆæœ¬ã€‚å½“æˆ‘ä»¬è€é¡¹ç›®ä½¿ç”¨è€ç‰ˆæœ¬ï¼Œæ–°é¡¹ç›®ä½¿ç”¨æ–°ç‰ˆæœ¬æ—¶ä¼šéå¸¸æœ‰ç”¨ã€‚&lt;/li>
&lt;li>è¦æœ‰ä¸€ä¸ªèƒ½å¤Ÿç½—åˆ—å½“å‰é¡¹ç›®æ‰€ä¾èµ–åŒ…çš„åˆ—è¡¨ã€‚è¿™ä¸ªçš„å¥½å¤„æ˜¯å½“æˆ‘ä»¬å‘å¸ƒé¡¹ç›®æ—¶ä¸ç”¨åŒæ—¶å‘å¸ƒæ‰€ä¾èµ–çš„åŒ…ã€‚Goèƒ½å¤Ÿæ ¹æ®è¯¥æ–‡ä»¶è‡ªåŠ¨ä¸‹è½½å¯¹åº”çš„åŒ…ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="go-pathä»‹ç»">
&lt;a href="#go-path%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
GO PATHä»‹ç»
&lt;/h2>&lt;p>å®‰è£…å¥½goå¼€å‘ç¯å¢ƒä¹‹åï¼Œå¯ä»¥è¿è¡Œ&lt;code>go env&lt;/code>æŸ¥çœ‹goè¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡ã€‚è¦ä¿®æ”¹è¿™äº›ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥é€šè¿‡é…ç½®ç¯å¢ƒå˜é‡æ¥è¦†ç›–é»˜è®¤å€¼(è¦†ç›–äº†å°±ä¸èƒ½é€šè¿‡å‘½ä»¤è®¾ç½®)ï¼Œå¦‚ä¸´æ—¶è®¾ç½®&lt;code>export GO111MODULE=on&lt;/code>ã€‚æˆ–è€…é€šè¿‡å‘½ä»¤&lt;code>go env -w key=value&lt;/code>ï¼Œå¦‚&lt;code>go env -w GO111MODULE=on&lt;/code>ã€‚é€šè¿‡å‘½ä»¤ä¿®æ”¹çš„ç¯å¢ƒå˜é‡ä¿å­˜åœ¨&lt;code>GOENV&lt;/code>è¿™ä¸ªç¯å¢ƒå˜é‡æŒ‡å‘çš„æ–‡ä»¶ã€‚&lt;/p>
&lt;p>æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ç¯å¢ƒå˜é‡ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>GOROOT&lt;/strong>ï¼šGolang å®‰è£…ç›®å½•çš„è·¯å¾„ï¼ŒåŒ…å«ç¼–è¯‘å™¨ç¨‹åºå’Œç³»ç»ŸåŒ…ï¼Œä¹Ÿå¯ä»¥æ”¾ç½®ä¸‰æ–¹åŒ…ï¼ˆä¸æ¨èï¼‰ã€‚æ–°ç‰ˆæœ¬å·²ç»ä¸éœ€è¦é…ç½®è¿™ä¸ªç¯å¢ƒå˜é‡äº†ï¼Œå®‰è£…äº†goä¼šè‡ªåŠ¨æ¨æ–­å‡ºè¯¥å˜é‡çš„å€¼ã€‚å¦‚æœå®‰è£…ä¹‹åç¯å¢ƒå˜é‡ä¸­æ²¡æœ‰&lt;code>$GORROOT/bin&lt;/code>,éœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼Œè¿™æ ·æ‰èƒ½ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œgoç¼–è¯‘ç¨‹åºã€‚&lt;/li>
&lt;li>&lt;strong>GOPATH&lt;/strong>ï¼šè¯¥å·¥ä½œç›®å½•ï¼Œæ”¾ç½®ç¼–è¯‘åäºŒè¿›åˆ¶å’Œ import åŒ…æ—¶çš„æœç´¢è·¯å¾„ï¼Œä¸€èˆ¬æœ‰ä¸‰ä¸ªç›®å½•: binã€pkgã€srcã€‚å¹¶ä¸”è¯¥ç¯å¢ƒå˜é‡å¿…é¡»æ‰‹åŠ¨è®¾ç½®ã€‚
&lt;ul>
&lt;li>binï¼šç”¨æ¥å­˜æ”¾ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚å¼•å…¥Go modulesä¹‹åç”¨äºå­˜æ”¾&lt;code>get install&lt;/code>å®‰è£…çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/li>
&lt;li>pkgï¼šå­˜å‚¨é¢„ç¼–è¯‘çš„ç›®æ ‡æ–‡ä»¶ï¼Œä»¥åŠ å¿«ç¨‹åºçš„åç»­ç¼–è¯‘é€Ÿåº¦ã€‚å¼•å…¥Go modulesä¹‹åç”¨äºå­˜æ”¾ç¬¬ä¸‰æ–¹åŒ…ã€‚&lt;/li>
&lt;li>srcï¼šå­˜å‚¨æ‰€æœ‰.goæ–‡ä»¶æˆ–æºä»£ç ã€‚åœ¨ç¼–å†™ Go åº”ç”¨ç¨‹åºï¼Œç¨‹åºåŒ…å’Œåº“æ—¶ï¼Œä¸€èˆ¬ä¼šä»¥&lt;code>$GOPATH/src/github.com/foo/bar&lt;/code>çš„è·¯å¾„è¿›è¡Œå­˜æ”¾ã€‚å¼•å…¥Go modulesä¹‹åç”¨ä¸€èˆ¬ä¸ç”¨ï¼Œgoé¡¹ç›®å¯ä»¥æ”¾åœ¨ä»»æ„ç›®å½•ä¸­ï¼Œä¸åœ¨æ˜¯&lt;code>$GOPATH/src&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>å› æ­¤åœ¨ä½¿ç”¨ GOPATH æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å°†åº”ç”¨ä»£ç å­˜æ”¾åœ¨å›ºå®šçš„&lt;code>$GOPATH/src&lt;/code>ç›®å½•ä¸‹ï¼Œå¹¶ä¸”å¦‚æœæ‰§è¡Œgo getæ¥æ‹‰å–å¤–éƒ¨ä¾èµ–ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…åˆ°&lt;code>$GOPATH&lt;/code>ç›®å½•ä¸‹ã€‚&lt;/p>
&lt;h3 id="gopathæ¨¡å¼çš„å¼Šç«¯">
&lt;a href="#gopath%e6%a8%a1%e5%bc%8f%e7%9a%84%e5%bc%8a%e7%ab%af" class="header-anchor">#&lt;/a>
GOPATHæ¨¡å¼çš„å¼Šç«¯
&lt;/h3>&lt;p>åœ¨ GOPATH çš„ &lt;code>$GOPATH/src&lt;/code> ä¸‹è¿›è¡Œ &lt;code>.go&lt;/code> æ–‡ä»¶æˆ–æºä»£ç çš„å­˜å‚¨ï¼Œæˆ‘ä»¬å¯ä»¥ç§°å…¶ä¸º GOPATH çš„æ¨¡å¼ï¼Œè¿™ä¸ªæ¨¡å¼æ‹¥æœ‰ä¸€äº›å¼Šç«¯ã€‚&lt;/p>
&lt;ul>
&lt;li>A. &lt;strong>æ— ç‰ˆæœ¬æ§åˆ¶æ¦‚å¿µ&lt;/strong>. åœ¨æ‰§è¡Œgo getçš„æ—¶å€™ï¼Œä½ æ— æ³•ä¼ è¾¾ä»»ä½•çš„ç‰ˆæœ¬ä¿¡æ¯çš„æœŸæœ›ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¹Ÿæ— æ³•çŸ¥é“è‡ªå·±å½“å‰æ›´æ–°çš„æ˜¯å“ªä¸€ä¸ªç‰ˆæœ¬ï¼Œä¹Ÿæ— æ³•é€šè¿‡æŒ‡å®šæ¥æ‹‰å–è‡ªå·±æ‰€æœŸæœ›çš„å…·ä½“ç‰ˆæœ¬ã€‚&lt;/li>
&lt;li>B.&lt;strong>æ— æ³•åŒæ­¥ä¸€è‡´ç¬¬ä¸‰æ–¹ç‰ˆæœ¬å·&lt;/strong>. åœ¨è¿è¡Œ Go åº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼Œä½ æ— æ³•ä¿è¯å…¶å®ƒäººä¸ä½ æ‰€æœŸæœ›ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“æ˜¯ç›¸åŒçš„ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨é¡¹ç›®ä¾èµ–åº“çš„ç®¡ç†ä¸Šï¼Œä½ æ— æ³•ä¿è¯æ‰€æœ‰äººçš„ä¾èµ–ç‰ˆæœ¬éƒ½ä¸€è‡´ã€‚&lt;/li>
&lt;li>C.&lt;strong>æ— æ³•æŒ‡å®šå½“å‰é¡¹ç›®å¼•ç”¨çš„ç¬¬ä¸‰æ–¹ç‰ˆæœ¬å·&lt;/strong>. ä½ æ²¡åŠæ³•å¤„ç† v1ã€v2ã€v3 ç­‰ç­‰ä¸åŒç‰ˆæœ¬çš„å¼•ç”¨é—®é¢˜ï¼Œå› ä¸º GOPATH æ¨¡å¼ä¸‹çš„å¯¼å…¥è·¯å¾„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯github.com/foo/barã€‚&lt;/li>
&lt;/ul>
&lt;p>Go è¯­è¨€å®˜æ–¹ä» Go1.11 èµ·å¼€å§‹æ¨è¿› Go modulesï¼ˆå‰èº«vgoï¼ŒçŸ¥é“å³å¯ï¼Œä¸éœ€è¦æ·±å…¥äº†è§£ï¼‰ï¼ŒGo1.13 èµ·ä¸å†æ¨èä½¿ç”¨ GOPATH çš„ä½¿ç”¨æ¨¡å¼ï¼ŒGo modules ä¹Ÿæ¸è¶‹ç¨³å®šï¼Œå› æ­¤æ–°é¡¹ç›®ä¹Ÿæ²¡æœ‰å¿…è¦ç»§ç»­ä½¿ç”¨GOPATHæ¨¡å¼ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="go-module-è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ">
&lt;a href="#go-module-%e8%af%ad%e4%b9%89%e5%8c%96%e7%89%88%e6%9c%ac%e8%a7%84%e8%8c%83" class="header-anchor">#&lt;/a>
Go Module è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ
&lt;/h2>&lt;p>Go Module çš„è®¾è®¡é‡‡ç”¨äº†è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼Œè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒéå¸¸æµè¡Œä¸”å…·æœ‰æŒ‡å¯¼æ„ä¹‰ï¼Œæœ¬æ–‡å°±æ¥èŠèŠè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒçš„è®¾è®¡å’Œåœ¨ Go ä¸­çš„åº”ç”¨ã€‚&lt;/p>
&lt;h3 id="è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ">
&lt;a href="#%e8%af%ad%e4%b9%89%e5%8c%96%e7%89%88%e6%9c%ac%e8%a7%84%e8%8c%83" class="header-anchor">#&lt;/a>
è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ
&lt;/h3>&lt;p>è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼ˆSemVerï¼‰æ˜¯ç”± Gravatars åˆ›åŠè€…å…¼ GitHub å…±åŒåˆ›åŠè€… Tom Preston-Werner æ‰€å»ºç«‹ï¼Œæ—¨åœ¨è§£å†³ &lt;a class="link" href="https://hwikizh.cyou/wiki/Dependency_hell" target="_blank" rel="noopener"
>&lt;code>ä¾èµ–åœ°ç‹±&lt;/code>&lt;/a> é—®é¢˜ã€‚&lt;/p>
&lt;p>å®ƒæ¸…æ¥šæ˜äº†çš„è§„å®šäº†ç‰ˆæœ¬æ ¼å¼ã€ç‰ˆæœ¬å·é€’å¢è§„ï¼š&lt;/p>
&lt;p>&lt;strong>ç‰ˆæœ¬æ ¼å¼&lt;/strong>ï¼šé‡‡ç”¨ X.Y.Z çš„æ ¼å¼ï¼ŒX æ˜¯ä¸»ç‰ˆæœ¬å·ã€Y æ˜¯æ¬¡ç‰ˆæœ¬å·ã€è€Œ Z ä¸ºä¿®è®¢å·ï¼ˆå³ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼‰ï¼Œå…¶ä¸­ Xã€Y å’Œ Z ä¸ºéè´Ÿçš„æ•´æ•°ï¼Œä¸”ç¦æ­¢åœ¨æ•°å­—å‰æ–¹è¡¥é›¶ã€‚&lt;/p>
&lt;p>&lt;strong>ç‰ˆæœ¬å·é€’å¢è§„åˆ™ï¼š&lt;/strong>&lt;/p>
&lt;p>ä¸»ç‰ˆæœ¬å·ï¼šå½“åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ã€‚&lt;/p>
&lt;p>æ¬¡ç‰ˆæœ¬å·ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢åŠä¿®æ”¹ã€‚&lt;/p>
&lt;p>ä¿®è®¢å·ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œ&lt;code>å…ˆè¡Œç‰ˆæœ¬å·&lt;/code> åŠ &lt;code>ç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯&lt;/code> å¯ä»¥åŠ åˆ° &lt;code>ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·&lt;/code> çš„åé¢ï¼Œä½œä¸ºå»¶ä¼¸ã€‚&lt;/p>
&lt;p>å®Œæ•´ç‰ˆæœ¬æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/index.assets/image-20240428181429712.png"
width="594"
height="393"
srcset="https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/index.assets/image-20240428181429712_hu4e93c4fe90e112c1b95a6a33697eab15_28580_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/index.assets/image-20240428181429712_hu4e93c4fe90e112c1b95a6a33697eab15_28580_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ç‰ˆæœ¬æ ¼å¼"
class="gallery-image"
data-flex-grow="151"
data-flex-basis="362px"
>&lt;/p>
&lt;p>å…ˆè¡Œç‰ˆæœ¬å·å¯ä»¥æœ‰å¤šä¸ªï¼Œå¦‚ç¬¬ä¸€ä¸ªä¸ºUTCæ—¶é—´ï¼Œç¬¬äºŒä¸ªä¸ºæäº¤çš„å“ˆå¸Œå€¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v4&lt;/span>&lt;span class="mf">.0.1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.20210109023952&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">943e75&lt;/span>&lt;span class="nx">fe5223&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">incompatible&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">v0&lt;/span>&lt;span class="mf">.0.0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20240416160154&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">fe59bbe5cc7f&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ç‰ˆæœ¬å·æ ¸å¿ƒéƒ¨åˆ† X.Y.Z æ˜¯å¿…é¡»çš„ï¼Œä½¿ç”¨ &lt;code>.&lt;/code> è¿æ¥ï¼Œå…ˆè¡Œç‰ˆæœ¬å·å’Œç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯æ˜¯å¯é€‰çš„ï¼Œå…ˆè¡Œç‰ˆæœ¬å·é€šè¿‡ &lt;code>-&lt;/code> ä¸æ ¸å¿ƒéƒ¨åˆ†è¿æ¥ï¼Œç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯é€šè¿‡ &lt;code>+&lt;/code> ä¸æ ¸å¿ƒéƒ¨åˆ†æˆ–å…ˆè¡Œç‰ˆæœ¬å·è¿æ¥ã€‚&lt;/p>
&lt;p>åˆæ³•çš„å‡ ç§ç‰ˆæœ¬å·æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·&lt;/li>
&lt;li>ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·-å…ˆè¡Œç‰ˆæœ¬å·&lt;/li>
&lt;li>ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·+ç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯&lt;/li>
&lt;li>ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·-å…ˆè¡Œç‰ˆæœ¬å·+ç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯&lt;/li>
&lt;/ol>
&lt;p>ä¸»ç‰ˆæœ¬å·å¿…é¡»åœ¨æœ‰ä»»ä½•ä¸å…¼å®¹çš„ä¿®æ”¹è¢«åŠ å…¥å…¬å…± API æ—¶é€’å¢ã€‚æ¯å½“ä¸»ç‰ˆæœ¬å·é€’å¢æ—¶ï¼Œæ¬¡ç‰ˆæœ¬å·å’Œä¿®è®¢å·å¿…é¡»å½’é›¶ã€‚&lt;/p>
&lt;p>æ¬¡ç‰ˆæœ¬å·å¿…é¡»åœ¨æœ‰å‘ä¸‹å…¼å®¹çš„æ–°åŠŸèƒ½å‡ºç°æˆ–æœ‰æ”¹è¿›æ—¶é€’å¢ï¼Œæˆ–åœ¨ä»»ä½•å…¬å…± API çš„åŠŸèƒ½è¢«æ ‡è®°ä¸ºå¼ƒç”¨æ—¶ä¹Ÿå¿…é¡»é€’å¢ã€‚æ¯å½“æ¬¡ç‰ˆæœ¬å·é€’å¢æ—¶ï¼Œä¿®è®¢å·å¿…é¡»å½’é›¶ã€‚&lt;/p>
&lt;p>ä¿®è®¢å·å¿…é¡»åœ¨åªåšäº†å‘ä¸‹å…¼å®¹çš„ä¿®æ­£æ—¶æ‰é€’å¢ã€‚è¿™é‡Œçš„ä¿®æ­£æŒ‡çš„æ˜¯é’ˆå¯¹ä¸æ­£ç¡®ç»“æœè€Œè¿›è¡Œçš„å†…éƒ¨ä¿®æ”¹ã€‚&lt;/p>
&lt;p>å­˜åœ¨å…ˆè¡Œç‰ˆæœ¬å·ï¼Œæ„å‘³ç€å½“å‰ç‰ˆæœ¬ä¸å¤Ÿç¨³å®šï¼Œä¸”å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚å…ˆè¡Œç‰ˆæœ¬å·æ˜¯ä¸€è¿ä¸²ä»¥ &lt;code>.&lt;/code> åˆ†éš”çš„æ ‡è¯†ç¬¦ï¼Œç”± ASCII å­—æ¯æ•°å­—å’Œè¿æ¥å· &lt;code>[0-9A-Za-z-]&lt;/code> ç»„æˆï¼Œç¦æ­¢å‡ºç°ç©ºç™½ç¬¦ï¼Œæ•°å­—ç±»å‹åˆ™ç¦æ­¢åœ¨å‰æ–¹è¡¥é›¶ã€‚åˆæ³•ç¤ºä¾‹ï¼š1.0.0-alphaã€1.0.0-alpha.1ã€1.0.0-0.3.7ã€1.0.0-x.7.z.92ã€‚&lt;/p>
&lt;p>ç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯æ ‡å¿—ç¬¦è§„æ ¼ä¸å…ˆè¡Œç‰ˆæœ¬å·åŸºæœ¬ç›¸åŒï¼Œç•¥æœ‰å·®å¼‚çš„æ˜¯æ•°å­—ç±»å‹å‰æ–¹å…è®¸è¡¥é›¶ã€‚åˆæ³•ç¤ºä¾‹ï¼š1.0.0-alpha+001ã€1.0.0+20130313144700ã€1.0.0-beta+exp.sha.5114f85ã€‚&lt;/p>
&lt;p>é™¤äº†ä¸Šé¢å‡ ç‚¹è¯´æ˜ï¼Œè¿˜éœ€è¦é¢å¤–å…³æ³¨ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p>
&lt;ol>
&lt;li>æ ‡è®°ç‰ˆæœ¬å·çš„è½¯ä»¶å‘è¡Œåï¼Œç¦æ­¢æ”¹å˜è¯¥ç‰ˆæœ¬è½¯ä»¶çš„å†…å®¹ã€‚ä»»ä½•ä¿®æ”¹éƒ½å¿…é¡»ä»¥æ–°ç‰ˆæœ¬å‘è¡Œã€‚&lt;/li>
&lt;li>ä¸»ç‰ˆæœ¬å·ä¸ºé›¶ï¼ˆ0.y.zï¼‰çš„è½¯ä»¶å¤„äºå¼€å‘åˆå§‹é˜¶æ®µï¼Œä¸€åˆ‡éƒ½å¯èƒ½éšæ—¶è¢«æ”¹å˜ã€‚è¿™æ ·çš„å…¬å…± API ä¸åº”è¯¥è¢«è§†ä¸ºç¨³å®šç‰ˆã€‚&lt;/li>
&lt;li>1.0.0 çš„ç‰ˆæœ¬å·ç”¨äºç•Œå®šå…¬å…± API çš„å½¢æˆã€‚è¿™ä¸€ç‰ˆæœ¬ä¹‹åæ‰€æœ‰çš„ç‰ˆæœ¬å·æ›´æ–°éƒ½åŸºäºå…¬å…± API åŠå…¶ä¿®æ”¹å†…å®¹ã€‚&lt;/li>
&lt;li>ç¤¾åŒºä¸­è¿˜å­˜åœ¨ä¸€ä¸ªä¸æˆæ–‡çš„è§„å®šï¼Œå¯¹äºæ¬¡ç‰ˆæœ¬å·ï¼Œå¶æ•°ä¸ºç¨³å®šç‰ˆæœ¬ï¼Œå¥‡æ•°ä¸ºå¼€å‘ç‰ˆæœ¬ã€‚å½“ç„¶ä¸æ˜¯æ‰€æœ‰é¡¹ç›®éƒ½è¿™æ ·è®¾è®¡ã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒå¯èƒ½é‡åˆ°çš„é—®é¢˜">
&lt;a href="#%e4%bd%bf%e7%94%a8%e8%af%ad%e4%b9%89%e5%8c%96%e7%89%88%e6%9c%ac%e8%a7%84%e8%8c%83%e5%8f%af%e8%83%bd%e9%81%87%e5%88%b0%e7%9a%84%e9%97%ae%e9%a2%98" class="header-anchor">#&lt;/a>
ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒå¯èƒ½é‡åˆ°çš„é—®é¢˜
&lt;/h3>&lt;p>åœ¨ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½äººä¸ºæˆ–ç¨‹åºç¼–å†™é”™è¯¯å¯¼è‡´å‡ºç°å¦‚ä¸‹å‡ ç§å¯é¢„è§çš„é—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ä¸‡ä¸€ä¸å°å¿ƒæŠŠä¸€ä¸ªä¸å…¼å®¹çš„æ”¹ç‰ˆå½“æˆäº†æ¬¡ç‰ˆæœ¬å·å‘è¡Œäº†è¯¥æ€ä¹ˆåŠï¼Ÿ&lt;/p>
&lt;p>ä¸€æ—¦å‘ç°è‡ªå·±ç ´åäº†è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶çš„è§„èŒƒï¼Œå°±è¦ä¿®æ­£è¿™ä¸ªé—®é¢˜ï¼Œå¹¶å‘è¡Œä¸€ä¸ªæ–°çš„æ¬¡ç‰ˆæœ¬å·æ¥æ›´æ­£è¿™ä¸ªé—®é¢˜å¹¶ä¸”æ¢å¤å‘ä¸‹å…¼å®¹ã€‚å³ä½¿æ˜¯è¿™ç§æƒ…å†µï¼Œä¹Ÿä¸èƒ½å»ä¿®æ”¹å·²å‘è¡Œçš„ç‰ˆæœ¬ã€‚å¯ä»¥çš„è¯ï¼Œå°†æœ‰é—®é¢˜çš„ç‰ˆæœ¬å·è®°å½•åˆ°æ–‡æ¡£ä¸­ï¼Œå‘Šè¯‰ä½¿ç”¨è€…é—®é¢˜æ‰€åœ¨ï¼Œè®©ä»–ä»¬èƒ½å¤Ÿæ„è¯†åˆ°è¿™æ˜¯æœ‰é—®é¢˜çš„ç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šä¸åˆ°ä¸‡ä¸å¾—å·²ï¼Œä¸è¦ä¹Ÿä¸èƒ½å»ä¿®æ”¹å·²å‘è¡Œçš„ç‰ˆæœ¬ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœæˆ‘å˜æ›´äº†å…¬å…± API ä½†æ— æ„ä¸­æœªéµå¾ªç‰ˆæœ¬å·çš„æ”¹åŠ¨æ€ä¹ˆåŠå‘¢ï¼Ÿï¼ˆæ„å³åœ¨ä¿®è®¢ç­‰çº§çš„å‘å¸ƒä¸­ï¼Œè¯¯å°†é‡å¤§ä¸”ä¸å…¼å®¹çš„æ”¹å˜åŠ åˆ°ä»£ç ä¹‹ä¸­ï¼‰&lt;/p>
&lt;p>è‡ªè¡Œåšæœ€ä½³çš„åˆ¤æ–­ã€‚å¦‚æœä½ æœ‰åºå¤§çš„ä½¿ç”¨è€…ç¾¤åœ¨ä¾ç…§å…¬å…± API çš„æ„å›¾è€Œå˜æ›´è¡Œä¸ºåä¼šå¤§å—å½±å“ï¼Œé‚£ä¹ˆæœ€å¥½åšä¸€æ¬¡ä¸»ç‰ˆæœ¬çš„å‘å¸ƒï¼Œå³ä½¿ä¸¥æ ¼æ¥è¯´è¿™ä¸ªä¿®å¤ä»…æ˜¯ä¿®è®¢ç­‰çº§çš„å‘å¸ƒã€‚è®°ä½ï¼Œè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶å°±æ˜¯é€è¿‡ç‰ˆæœ¬å·çš„æ”¹å˜æ¥ä¼ è¾¾æ„ä¹‰ã€‚è‹¥è¿™äº›æ”¹å˜å¯¹ä½ çš„ä½¿ç”¨è€…æ˜¯é‡è¦çš„ï¼Œé‚£å°±é€è¿‡ç‰ˆæœ¬å·æ¥å‘ä»–ä»¬è¯´æ˜ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>v1.2.3&lt;/code> æ˜¯ä¸€ä¸ªè¯­ä¹‰åŒ–ç‰ˆæœ¬å·å—ï¼Ÿ&lt;/p>
&lt;p>&lt;code>v1.2.3&lt;/code> å¹¶ä¸æ˜¯çš„ä¸€ä¸ªè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬å·ã€‚ä½†æ˜¯ï¼Œåœ¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ä¹‹å‰å¢åŠ å‰ç¼€ &lt;code>v&lt;/code> æ˜¯ç”¨æ¥è¡¨ç¤ºç‰ˆæœ¬å·çš„å¸¸ç”¨åšæ³•ã€‚åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œå°† &lt;code>version&lt;/code> ç¼©å†™ä¸º &lt;code>v&lt;/code> æ˜¯å¾ˆå¸¸è§çš„ã€‚æ¯”å¦‚ï¼š&lt;code>git tag v1.2.3 -m &amp;quot;Release version 1.2.3&amp;quot;&lt;/code> ä¸­ï¼Œ&lt;code>v1.2.3&lt;/code> è¡¨ç¤ºæ ‡ç­¾åç§°ï¼Œè€Œ &lt;code>1.2.3&lt;/code> æ˜¯è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ã€‚go modulesçš„æ¨¡å—ç‰ˆæœ¬ä¹Ÿæ˜¯åœ¨å‰é¢åŠ &lt;code>v&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="å¦‚ä½•éªŒè¯è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒæ­£ç¡®æ€§">
&lt;a href="#%e5%a6%82%e4%bd%95%e9%aa%8c%e8%af%81%e8%af%ad%e4%b9%89%e5%8c%96%e7%89%88%e6%9c%ac%e8%a7%84%e8%8c%83%e6%ad%a3%e7%a1%ae%e6%80%a7" class="header-anchor">#&lt;/a>
å¦‚ä½•éªŒè¯è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒæ­£ç¡®æ€§
&lt;/h3>&lt;p>å®˜æ–¹æä¾›äº†ä¸¤ä¸ªæ­£åˆ™å¯ä»¥æ£€æŸ¥è¯­ä¹‰åŒ–ç‰ˆæœ¬å·çš„æ­£ç¡®æ€§ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ”¯æŒæŒ‰ç»„åç§°æå–åŒ¹é…ç»“æœ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">^(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="nx">P&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">major&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="nx">P&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">minor&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="nx">P&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">patch&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="nx">P&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">prerelease&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="nx">P&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">buildmetadata&lt;/span>&lt;span class="p">&amp;gt;[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="p">.[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="err">?$&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Go è¯­è¨€ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;encoding/json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;regexp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">version&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;0.1.2-alpha+001&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pattern&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">regexp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MustCompile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`^(?P&amp;lt;major&amp;gt;0|[1-9]\d*)\.(?P&amp;lt;minor&amp;gt;0|[1-9]\d*)\.(?P&amp;lt;patch&amp;gt;0|[1-9]\d*)(?:-(?P&amp;lt;prerelease&amp;gt;(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?P&amp;lt;buildmetadata&amp;gt;[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">pattern&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FindStringSubmatch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">version&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">pattern&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SubexpNames&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">m&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">json&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MarshalIndent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">{
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#34;buildmetadata&amp;#34;: &amp;#34;001&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#34;major&amp;#34;: &amp;#34;0&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#34;minor&amp;#34;: &amp;#34;1&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#34;patch&amp;#34;: &amp;#34;2&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#34;prerelease&amp;#34;: &amp;#34;alpha&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> &amp;#34;version&amp;#34;: &amp;#34;0.1.2-alpha+001&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ”¯æŒæŒ‰ç¼–å·æå–åŒ¹é…ç»“æœ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">^(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="p">.(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">|[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="p">.[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">zA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Z&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="err">?$&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Go è¯­è¨€ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;regexp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">version&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;0.1.2-alpha+001&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pattern&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">regexp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MustCompile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">`^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">pattern&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FindStringSubmatch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">version&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d -&amp;gt; %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">0 -&amp;gt; 0.1.2-alpha+001
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">1 -&amp;gt; 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">2 -&amp;gt; 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">3 -&amp;gt; 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">4 -&amp;gt; alpha
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">5 -&amp;gt; 001
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="go-modulesç‰ˆæœ¬è®¾è®¡">
&lt;a href="#go-modules%e7%89%88%e6%9c%ac%e8%ae%be%e8%ae%a1" class="header-anchor">#&lt;/a>
Go Modulesç‰ˆæœ¬è®¾è®¡
&lt;/h3>&lt;h4 id="ä¾èµ–åœ°ç‹±">
&lt;a href="#%e4%be%9d%e8%b5%96%e5%9c%b0%e7%8b%b1" class="header-anchor">#&lt;/a>
ä¾èµ–åœ°ç‹±
&lt;/h4>&lt;p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æ—©æœŸ Go ä¾èµ–åŒ…å­˜åœ¨çš„ä¾èµ–åœ°ç‹±é—®é¢˜ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/index.assets/image-20240428182831893.png"
width="1097"
height="513"
srcset="https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/index.assets/image-20240428182831893_hu10246893e1c443d1187588789017c05f_64039_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/index.assets/image-20240428182831893_hu10246893e1c443d1187588789017c05f_64039_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ä¾èµ–åœ°ç‹±"
class="gallery-image"
data-flex-grow="213"
data-flex-basis="513px"
>&lt;/p>
&lt;p>é¦–å…ˆå­˜åœ¨ä¸¤ä¸ªåŒ… &lt;code>pkg1&lt;/code> å’Œ &lt;code>pkg2&lt;/code>ï¼Œåˆ†åˆ«ä¾èµ– &lt;code>pkg3&lt;/code> çš„ &lt;code>v1.0.0&lt;/code> ç‰ˆæœ¬å’Œ &lt;code>v2.0.0&lt;/code> ç‰ˆæœ¬ï¼Œç°åœ¨æˆ‘ä»¬å¼€å‘ä¸€ä¸ª &lt;code>app&lt;/code> åŒ…ï¼Œå®ƒä¾èµ– &lt;code>pkg1&lt;/code> å’Œ &lt;code>pkg2&lt;/code>ï¼Œé‚£ä¹ˆæ­¤æ—¶ç”±äº &lt;code>app&lt;/code> åŒ…åªå…è®¸åŒ…å«ä¸€ä¸ª &lt;code>pkg3&lt;/code> ä¾èµ–ï¼Œæ‰€ä»¥ Go æ„å»ºå·¥å…·æ— æ³•æŠ‰æ‹©åº”è¯¥ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„ &lt;code>pkg3&lt;/code>ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ä¾èµ–åœ°ç‹±é—®é¢˜ã€‚&lt;/p>
&lt;h4 id="è¯­ä¹‰å¯¼å…¥ç‰ˆæœ¬">
&lt;a href="#%e8%af%ad%e4%b9%89%e5%af%bc%e5%85%a5%e7%89%88%e6%9c%ac" class="header-anchor">#&lt;/a>
è¯­ä¹‰å¯¼å…¥ç‰ˆæœ¬
&lt;/h4>&lt;p>ä¸ºäº†è§£å†³ä¾èµ–åœ°ç‹±é—®é¢˜ï¼ŒGo åœ¨ 1.11 ç‰ˆæœ¬æ—¶å¼•å…¥å’Œ Go Modulesï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/index.assets/image-20240428183011710.png"
width="1096"
height="499"
srcset="https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/index.assets/image-20240428183011710_hu26cf2410430fcf457ac5158230a0c061_64758_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/go-modules%E8%AF%A6%E8%A7%A3/index.assets/image-20240428183011710_hu26cf2410430fcf457ac5158230a0c061_64758_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Go Modules"
class="gallery-image"
data-flex-grow="219"
data-flex-basis="527px"
>&lt;/p>
&lt;p>Go Module è§£å†³é—®é¢˜çš„æ–¹å¼æ˜¯ï¼ŒæŠŠ &lt;code>pkg3&lt;/code> çš„ &lt;code>v1.0.0&lt;/code> ç‰ˆæœ¬å’Œ &lt;code>v2.0.0&lt;/code> ç‰ˆæœ¬å½“ä½œä¸¤ä¸ªä¸åŒçš„åŒ…ï¼Œè¿™æ ·ä¹Ÿå°±å…è®¸äº† &lt;code>app&lt;/code> åŒ…èƒ½å¤ŸåŒæ—¶åŒ…å«å¤šä¸ªä¸åŒç‰ˆæœ¬çš„ &lt;code>pkg3&lt;/code>ã€‚&lt;/p>
&lt;p>åœ¨ä½¿ç”¨æ—¶ï¼Œéœ€è¦åœ¨åŒ…çš„å¯¼å…¥è·¯å¾„ä¸ŠåŠ ä¸ŠåŒ…çš„ä¸»ç‰ˆæœ¬å·ã€‚è¿™é‡Œä»¥ &lt;a class="link" href="https://github.com/go-micro/go-micro" target="_blank" rel="noopener"
>&lt;code>go-micro&lt;/code>&lt;/a> åŒ…ä½¿ç”¨ä¸ºä¾‹ï¼Œå±•ç¤ºä¸‹ Go Module è¯­ä¹‰å¯¼å…¥ç‰ˆæœ¬çš„ç”¨æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;go-micro.dev/v4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// create a new service
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">service&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">micro&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewService&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">micro&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;helloworld&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// initialise flags
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Init&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// start the service
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°å¯¼å…¥è·¯å¾„ä¸º &lt;code>&amp;quot;go-micro.dev/v4&amp;quot;&lt;/code>ï¼Œå…¶ä¸­ &lt;code>v4&lt;/code> å°±ä»£è¡¨äº†éœ€è¦å¼•å…¥ &lt;code>go-micro&lt;/code> çš„ &lt;code>v4.y.z&lt;/code> ç‰ˆæœ¬ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="go-modulesåŸºæœ¬ä½¿ç”¨">
&lt;a href="#go-modules%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
Go ModulesåŸºæœ¬ä½¿ç”¨
&lt;/h2>&lt;h3 id="go-modulesç›¸å…³å‘½ä»¤">
&lt;a href="#go-modules%e7%9b%b8%e5%85%b3%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
go modulesç›¸å…³å‘½ä»¤
&lt;/h3>&lt;p>åœ¨ Go modules ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œæ“ä½œï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å‘½ä»¤&lt;/th>
&lt;th>ä»‹ç»&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>go mod init &amp;lt;project&amp;gt;&lt;/code>&lt;/td>
&lt;td>åˆå§‹åŒ–é¡¹ç›®ä¾èµ–ï¼Œç”Ÿæˆgo.modæ¨¡å—æ–‡ä»¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>go mod download&lt;/code>&lt;/td>
&lt;td>æ ¹æ®go.modæ–‡ä»¶ä¸‹è½½ä¾èµ–&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>go mod tidy&lt;/code>&lt;/td>
&lt;td>æ¯”å¯¹é¡¹ç›®æ–‡ä»¶ä¸­å¼•å…¥çš„ä¾èµ–ä¸go.modè¿›è¡Œæ¯”å¯¹,æ•´ç†æ¨¡å—æ–‡ä»¶ï¼Œå»é™¤æ²¡æœ‰ç”¨åˆ°çš„ä¾èµ–&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>go mod graph&lt;/code>&lt;/td>
&lt;td>è¾“å‡ºä¾èµ–å…³ç³»å›¾ã€æŸ¥çœ‹ç°æœ‰çš„ä¾èµ–ç»“æ„&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>go mod edit&lt;/code>&lt;/td>
&lt;td>ç¼–è¾‘go.modæ–‡ä»¶&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>go mod vendor&lt;/code>&lt;/td>
&lt;td>å°†é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–å¯¼å‡ºè‡³vendorç›®å½•&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>go mod verify&lt;/code>&lt;/td>
&lt;td>æ£€éªŒä¸€ä¸ªä¾èµ–åŒ…æ˜¯å¦è¢«ç¯¡æ”¹è¿‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>go mod why&lt;/code>&lt;/td>
&lt;td>è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦æŸä¸ªä¾èµ–&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="go-moduleså‚æ•°é…ç½®">
&lt;a href="#go-modules%e5%8f%82%e6%95%b0%e9%85%8d%e7%bd%ae" class="header-anchor">#&lt;/a>
go moduleså‚æ•°é…ç½®
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>GO111MODULE&lt;/strong>&lt;/p>
&lt;p>Goè¯­è¨€æä¾›äº† GO111MODULE è¿™ä¸ªç¯å¢ƒå˜é‡æ¥ä½œä¸º Go modules çš„å¼€å…³ï¼Œå…¶å…è®¸è®¾ç½®ä»¥ä¸‹å‚æ•°ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å‚æ•°&lt;/th>
&lt;th>è¯´æ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>auto&lt;/td>
&lt;td>åªè¦é¡¹ç›®åŒ…å«äº† go.mod æ–‡ä»¶çš„è¯å¯ç”¨ Go modulesï¼Œç›®å‰åœ¨ Go1.11 è‡³ Go1.14 ä¸­ä»ç„¶æ˜¯é»˜è®¤å€¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>on&lt;/td>
&lt;td>å¯ç”¨ Go modulesï¼Œæ¨èè®¾ç½®ï¼Œå°†ä¼šæ˜¯Go1.16ç‰ˆæœ¬ä¹‹åçš„é»˜è®¤å€¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>off&lt;/td>
&lt;td>ç¦ç”¨ Go modulesï¼Œä¸æ¨èè®¾ç½®ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä½ å¯èƒ½ä¼šç•™æ„åˆ° GO111MODULE è¿™ä¸ªåå­—æ¯”è¾ƒâ€œå¥‡ç‰¹â€ï¼Œå®é™…ä¸Šåœ¨ Go è¯­è¨€ä¸­ç»å¸¸ä¼šæœ‰è¿™ç±»é˜¶æ®µæ€§çš„å˜é‡ï¼Œ GO111MODULE è¿™ä¸ªå‘½åä»£è¡¨ç€Goè¯­è¨€åœ¨ 1.11 ç‰ˆæœ¬æ·»åŠ çš„ã€‚åç»­ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå»æ‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>GOPROXY&lt;/strong>&lt;/p>
&lt;p>è¿™ä¸ªç¯å¢ƒå˜é‡ä¸»è¦æ˜¯ç”¨äºè®¾ç½® Go æ¨¡å—ä»£ç†ï¼ˆGo module proxyï¼‰ï¼Œå…¶ä½œç”¨æ˜¯ç”¨äºä½¿ Go åœ¨åç»­æ‹‰å–æ¨¡å—ç‰ˆæœ¬æ—¶èƒ½å¤Ÿè„±ç¦»ä¼ ç»Ÿçš„ VCSï¼ˆç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¦‚githubï¼Œå°±æ˜¯æºåœ°å€ä¸‹è½½ï¼‰ æ–¹å¼ï¼Œç›´æ¥é€šè¿‡é•œåƒç«™ç‚¹æ¥&lt;strong>å¿«é€Ÿæ‹‰å–&lt;/strong>ã€‚å€¼ä¸º&lt;code>off&lt;/code>è¡¨ç¤ºç¦æ­¢æ¨¡å—ä»£ç†ã€‚&lt;/p>
&lt;p>è®¾ç½®&lt;code>GOPROXY&lt;/code>å¯ä»¥&lt;strong>åŠ é€Ÿæ¨¡å—ä¸‹è½½&lt;/strong>ï¼Œ&lt;strong>ç¡®ä¿æ„å»ºç¡®å®šæ€§&lt;/strong>ï¼ˆæä¾›ç¨³å®šçš„æ„å»ºç‰ˆæœ¬ï¼‰ï¼Œ&lt;strong>æé«˜å®‰å…¨æ€§&lt;/strong>ï¼Œ&lt;strong>ç¡®ä¿æ¨¡å—å§‹ç»ˆå¯ç”¨&lt;/strong>ã€‚&lt;/p>
&lt;p>GOPROXY çš„é»˜è®¤å€¼æ˜¯ï¼š&lt;code>https://proxy.golang.org,direct&lt;/code>ï¼Œç”±äºæŸäº›åŸå› å›½å†…æ— æ³•æ­£å¸¸è®¿é—®è¯¥åœ°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸éœ€è¦é…ç½®ä¸€ä¸ªå¯è®¿é—®çš„åœ°å€ã€‚ç›®å‰å›½å†…ç¤¾åŒºä½¿ç”¨æ¯”è¾ƒå¤šçš„æœ‰ä¸¤ä¸ª &lt;a class="link" href="https://goproxy.cn" target="_blank" rel="noopener"
>https://goproxy.cn&lt;/a>å’Œ &lt;a class="link" href="https://goproxy.io" target="_blank" rel="noopener"
>https://goproxy.io&lt;/a>ï¼Œå½“ç„¶å¦‚æœä½ çš„å…¬å¸æœ‰æä¾›GOPROXYåœ°å€é‚£ä¹ˆå°±ç›´æ¥ä½¿ç”¨ã€‚å¹¶ä¸”ä¿®æ”¹çš„ä»£ç†ï¼Œé€šè¿‡&lt;code>go get&lt;/code>å‘½ä»¤ä¸‹è½½è‡ªå·±çš„å…¬å…±æ¨¡å—ï¼Œä¹Ÿä¼šåŒæ­¥åˆ° &lt;a class="link" href="https://pkg.go.dev/" target="_blank" rel="noopener"
>https://pkg.go.dev/&lt;/a>ã€‚&lt;/p>
&lt;p>è®¾ç½®GOPAROXYçš„å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">go env -w &lt;span class="nv">GOPROXY&lt;/span>&lt;span class="o">=&lt;/span>https://goproxy.cn,direct
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>GOPROXY å…è®¸è®¾ç½®å¤šä¸ªä»£ç†åœ°å€ï¼Œå¤šä¸ªåœ°å€ä¹‹é—´éœ€ä½¿ç”¨è‹±æ–‡é€—å· â€œ,â€ åˆ†éš”ã€‚æœ€åçš„ â€œdirectâ€ æ˜¯ä¸€ä¸ªç‰¹æ®ŠæŒ‡ç¤ºç¬¦ï¼Œç”¨äºæŒ‡ç¤º Go å›æºåˆ°æºåœ°å€å»æŠ“å–ï¼ˆæ¯”å¦‚ GitHub ç­‰ï¼‰ã€‚å½“é…ç½®æœ‰å¤šä¸ªä»£ç†åœ°å€æ—¶ï¼Œå¦‚æœç¬¬ä¸€ä¸ªä»£ç†åœ°å€è¿”å› 404 æˆ– 410 é”™è¯¯æ—¶ï¼ŒGo ä¼šè‡ªåŠ¨å°è¯•ä¸‹ä¸€ä¸ªä»£ç†åœ°å€ï¼Œå½“é‡è§ â€œdirectâ€ æ—¶è§¦å‘å›æºï¼Œä¹Ÿå°±æ˜¯&lt;strong>å›åˆ°æºåœ°å€&lt;/strong>å»æŠ“å–ã€‚å°±æ˜¯ä»£ç†å¤±è´¥ä¹‹åç”¨ä¼ ç»Ÿæ–¹å¼ï¼ˆæºåœ°å€ä¸‹è½½æ¨¡å—ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>GOPRIVATE&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>GONOPROXY/GONOSUMDB/GOPRIVATE&lt;/p>
&lt;p>è¿™ä¸‰ä¸ªç¯å¢ƒå˜é‡éƒ½æ˜¯ç”¨åœ¨å½“å‰é¡¹ç›®ä¾èµ–äº†ç§æœ‰æ¨¡å—ï¼Œä¾‹å¦‚åƒæ˜¯ä½ å…¬å¸çš„ç§æœ‰ git ä»“åº“ï¼Œåˆæˆ–æ˜¯ github ä¸­çš„ç§æœ‰åº“ï¼Œéƒ½æ˜¯å±äºç§æœ‰æ¨¡å—ï¼Œéƒ½æ˜¯è¦è¿›è¡Œè®¾ç½®çš„ï¼Œå¦åˆ™ä¼šæ‹‰å–å¤±è´¥ã€‚&lt;/p>
&lt;p>æ›´ç»†è‡´æ¥è®²ï¼Œå°±æ˜¯ä¾èµ–äº†ç”± GOPROXY æŒ‡å®šçš„ Go æ¨¡å—ä»£ç†æˆ–ç”± GOSUMDB æŒ‡å®š Go checksum database éƒ½æ— æ³•è®¿é—®åˆ°çš„æ¨¡å—æ—¶çš„åœºæ™¯ã€‚&lt;/p>
&lt;p>è€Œä¸€èˆ¬å»ºè®®ç›´æ¥è®¾ç½® GOPRIVATEï¼Œå®ƒçš„å€¼å°†ä½œä¸º GONOPROXY å’Œ GONOSUMDB çš„é»˜è®¤å€¼ï¼Œæ‰€ä»¥å»ºè®®çš„æœ€ä½³å§¿åŠ¿æ˜¯ç›´æ¥ä½¿ç”¨ GOPRIVATEã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>è®¾ç½®äº†GOPROXY ä¹‹åï¼Œgo å‘½ä»¤å°±ä¼šä»é…ç½®çš„ä»£ç†åœ°å€æ‹‰å–å’Œæ ¡éªŒä¾èµ–åŒ…ã€‚å½“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¼•å…¥äº†éå…¬å¼€çš„åŒ…ï¼ˆå…¬å¸å†…éƒ¨gitä»“åº“æˆ– github ç§æœ‰ä»“åº“ç­‰ï¼‰ï¼Œæ­¤æ—¶ä¾¿æ— æ³•æ­£å¸¸ä»ä»£ç†æ‹‰å–åˆ°è¿™äº›éå…¬å¼€çš„ä¾èµ–åŒ…ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦é…ç½® GOPRIVATE ç¯å¢ƒå˜é‡ã€‚GOPRIVATEç”¨æ¥å‘Šè¯‰ go å‘½ä»¤å“ªäº›ä»“åº“å±äºç§æœ‰ä»“åº“ï¼Œä¸å¿…é€šè¿‡ä»£ç†æœåŠ¡å™¨æ‹‰å–å’Œæ ¡éªŒã€‚&lt;/p>
&lt;p>GOPRIVATE çš„å€¼ä¹Ÿå¯ä»¥è®¾ç½®å¤šä¸ªï¼Œå¤šä¸ªåœ°å€ä¹‹é—´ä½¿ç”¨è‹±æ–‡é€—å· â€œ,â€ åˆ†éš”ã€‚æˆ‘ä»¬é€šå¸¸ä¼šæŠŠè‡ªå·±å…¬å¸å†…éƒ¨çš„ä»£ç ä»“åº“è®¾ç½®åˆ° GOPRIVATE ä¸­ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go env -w &lt;span class="nv">GOPRIVATE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;git.example.com,github.com/arlettebrook/demo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®¾ç½®åï¼Œå‰ç¼€ä¸º git.xxx.com å’Œ github.com/arlettebrook/demoçš„æ¨¡å—éƒ½ä¼šè¢«è®¤ä¸ºæ˜¯ç§æœ‰æ¨¡å—ã€‚&lt;/p>
&lt;p>å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½é‡æ–°è®¾ç½®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨é€šé…ç¬¦ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go env -w &lt;span class="nv">GOPRIVATE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;*.example.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·å­è®¾ç½®çš„è¯ï¼Œæ‰€æœ‰æ¨¡å—è·¯å¾„ä¸º example.com çš„å­åŸŸåï¼ˆä¾‹å¦‚ï¼šgit.example.comï¼‰éƒ½å°†ä¸ç»è¿‡ Go module proxy å’Œ Go checksum databaseï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒ…æ‹¬ example.com æœ¬èº«ã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼Œå¦‚æœå…¬å¸å†…éƒ¨è‡ªå»ºäº† GOPROXY æœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® &lt;code>GONOPROXY=none&lt;/code>ï¼Œå…è®¸é€šå†…éƒ¨ä»£ç†æ‹‰å–ç§æœ‰ä»“åº“çš„åŒ…ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="go-modulesæ¨¡å—æ–‡ä»¶">
&lt;a href="#go-modules%e6%a8%a1%e5%9d%97%e6%96%87%e4%bb%b6" class="header-anchor">#&lt;/a>
go modulesæ¨¡å—æ–‡ä»¶
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>åˆè¯†åŒ–é¡¹ç›®&lt;/p>
&lt;p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹è¿è¡Œ&lt;code>go mod init &amp;lt;project&amp;gt;&lt;/code>ï¼Œå¦‚&lt;code>go mod init github.com/arlettebrook/demo&lt;/code>ï¼Œ&lt;code>demo&lt;/code>æ˜¯é¡¹ç›®åï¼Œ&lt;code>github.com/arlettebrook/demo&lt;/code>æ˜¯æ¨¡å—å¯¼å…¥è·¯å¾„ï¼Œå½“å¯¼å…¥çš„æ—¶å€™ï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰ï¼Œä¼šå»è¯¥è·¯å¾„ä¸‹è½½ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>go.mod æ–‡ä»¶&lt;/strong>&lt;/p>
&lt;p>åœ¨åˆå§‹åŒ–é¡¹ç›®æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ª go.mod æ–‡ä»¶ï¼Œæ˜¯å¯ç”¨äº† Go modules é¡¹ç›®æ‰€å¿…é¡»çš„æœ€é‡è¦çš„æ ‡è¯†ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ GO111MODULE å€¼ä¸º auto æ—¶çš„è¯†åˆ«æ ‡è¯†ï¼Œå®ƒæè¿°äº†å½“å‰é¡¹ç›®ï¼ˆä¹Ÿå°±æ˜¯å½“å‰æ¨¡å—ï¼‰çš„å…ƒä¿¡æ¯ï¼Œæ¯ä¸€è¡Œéƒ½ä»¥ä¸€ä¸ªåŠ¨è¯å¼€å¤´ã€‚&lt;/p>
&lt;p>&lt;strong>ç¤ºä¾‹æ–‡ä»¶&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span> &lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">arlettebrook&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">demo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">go&lt;/span> &lt;span class="mf">1.22.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">require&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">apple&lt;/span> &lt;span class="nx">v0&lt;/span>&lt;span class="mf">.1.2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">banana&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="mf">.2.3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">banana&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">v2&lt;/span> &lt;span class="nx">v2&lt;/span>&lt;span class="mf">.3.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pear&lt;/span> &lt;span class="c1">// indirect
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">strawberry&lt;/span> &lt;span class="c1">// incompatible
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">exclude&lt;/span> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">banana&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="mf">.2.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">replace&lt;/span> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">apple&lt;/span> &lt;span class="nx">v0&lt;/span>&lt;span class="mf">.1.2&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">fried&lt;/span> &lt;span class="nx">v0&lt;/span>&lt;span class="mf">.1.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">replace&lt;/span> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">banana&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">fish&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>è¯´æ˜&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>module&lt;/strong>ï¼šç”¨äºå®šä¹‰å½“å‰é¡¹ç›®çš„æ¨¡å—è·¯å¾„ã€‚&lt;/li>
&lt;li>&lt;strong>go&lt;/strong>ï¼šç”¨äºæ ‡è¯†å½“å‰æ¨¡å—çš„ Go è¯­è¨€ç‰ˆæœ¬ï¼Œå€¼ä¸ºåˆå§‹åŒ–æ¨¡å—æ—¶çš„ç‰ˆæœ¬ï¼Œç›®å‰æ¥çœ‹è¿˜åªæ˜¯ä¸ªæ ‡è¯†ä½œç”¨ã€‚&lt;/li>
&lt;li>&lt;strong>require&lt;/strong>ï¼šç”¨äºè®¾ç½®ä¸€ä¸ªç‰¹å®šçš„æ¨¡å—ç‰ˆæœ¬ã€‚&lt;/li>
&lt;li>&lt;strong>exclude&lt;/strong>ï¼šç”¨äºä»ä½¿ç”¨ä¸­æ’é™¤ä¸€ä¸ªç‰¹å®šçš„æ¨¡å—ç‰ˆæœ¬ã€‚&lt;/li>
&lt;li>&lt;strong>replace&lt;/strong>ï¼šç”¨äºå°†ä¸€ä¸ªæ¨¡å—ç‰ˆæœ¬æ›¿æ¢ä¸ºå¦å¤–ä¸€ä¸ªæ¨¡å—ç‰ˆæœ¬ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦å¤–ä½ ä¼šå‘ç° &lt;code>example.com/pear&lt;/code> çš„åé¢ä¼šæœ‰ä¸€ä¸ª indirect æ ‡è¯†ï¼Œindirect æ ‡è¯†è¡¨ç¤ºè¯¥æ¨¡å—ä¸ºé—´æ¥ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯åœ¨å½“å‰åº”ç”¨ç¨‹åºä¸­çš„ import è¯­å¥ä¸­ï¼Œå¹¶æ²¡æœ‰å‘ç°è¿™ä¸ªæ¨¡å—çš„æ˜ç¡®å¼•ç”¨ï¼Œæœ‰å¯èƒ½æ˜¯ä½ å…ˆæ‰‹åŠ¨ go get æ‹‰å–ä¸‹æ¥çš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä½ æ‰€ä¾èµ–çš„æ¨¡å—æ‰€ä¾èµ–çš„ï¼Œæƒ…å†µæœ‰å¥½å‡ ç§ã€‚incompatibleï¼šä¸å…¼å®¹çš„&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>go.sum æ–‡ä»¶&lt;/strong>&lt;/p>
&lt;p>åœ¨ç¬¬ä¸€æ¬¡æ‹‰å–æ¨¡å—ä¾èµ–åï¼Œä¼šå‘ç°å¤šå‡ºäº†ä¸€ä¸ª go.sum æ–‡ä»¶ï¼Œå…¶è¯¦ç»†ç½—åˆ—äº†å½“å‰é¡¹ç›®ç›´æ¥æˆ–é—´æ¥ä¾èµ–çš„æ‰€æœ‰æ¨¡å—ç‰ˆæœ¬ï¼Œå¹¶å†™æ˜äº†é‚£äº›æ¨¡å—ç‰ˆæœ¬çš„ SHA-256 å“ˆå¸Œå€¼ä»¥å¤‡ Go åœ¨ä»Šåçš„æ“ä½œä¸­ä¿è¯é¡¹ç›®æ‰€ä¾èµ–çš„é‚£äº›æ¨¡å—ç‰ˆæœ¬ä¸ä¼šè¢«ç¯¡æ”¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cobra&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="mf">.8.0&lt;/span> &lt;span class="nx">h1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="nx">aJaZx1B85qltLMc546zn58BxxfZdR&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">W22ej9CFoEf0&lt;/span>&lt;span class="p">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cobra&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="mf">.8.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mod&lt;/span> &lt;span class="nx">h1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">WXLWApfZ71AjXPya3WOlMsY9yMs7YeiHhFVlvLyhcho&lt;/span>&lt;span class="p">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pflag&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="mf">.0.5&lt;/span> &lt;span class="nx">h1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">iy&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">VFUOCP1a&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="nx">yFto&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">drg2CJ5u0yRoB7fZw3DKv&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">JXA&lt;/span>&lt;span class="p">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pflag&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="mf">.0.5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mod&lt;/span> &lt;span class="nx">h1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">McXfInJRrz4CZXVZOBLb0bTZqETkiAhM9Iw0y3An2Bg&lt;/span>&lt;span class="p">=&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ¨¡å—è·¯å¾„å¯èƒ½æœ‰å¦‚ä¸‹ä¸¤ç§ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cobra&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="mf">.8.0&lt;/span> &lt;span class="nx">h1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="nx">aJaZx1B85qltLMc546zn58BxxfZdR&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">W22ej9CFoEf0&lt;/span>&lt;span class="p">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">cobra&lt;/span> &lt;span class="nx">v1&lt;/span>&lt;span class="mf">.8.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mod&lt;/span> &lt;span class="nx">h1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">WXLWApfZ71AjXPya3WOlMsY9yMs7YeiHhFVlvLyhcho&lt;/span>&lt;span class="p">=&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>h1 hash æ˜¯ Go modules å°†ç›®æ ‡æ¨¡å—ç‰ˆæœ¬çš„ zip æ–‡ä»¶å¼€åŒ…åï¼Œé’ˆå¯¹æ‰€æœ‰åŒ…å†…æ–‡ä»¶ä¾æ¬¡è¿›è¡Œ hashï¼Œç„¶åå†æŠŠå®ƒä»¬çš„ hash ç»“æœæŒ‰ç…§å›ºå®šæ ¼å¼å’Œç®—æ³•ç»„æˆæ€»çš„ hash å€¼ã€‚&lt;/p>
&lt;p>è€Œ h1 hash å’Œ go.mod hash ä¸¤è€…ï¼Œè¦ä¸å°±æ˜¯åŒæ—¶å­˜åœ¨ï¼Œè¦ä¸å°±æ˜¯åªå­˜åœ¨ go.mod hashã€‚é‚£ä»€ä¹ˆæƒ…å†µä¸‹ä¼šä¸å­˜åœ¨ h1 hash å‘¢ï¼Œå°±æ˜¯å½“ Go è®¤ä¸ºè‚¯å®šç”¨ä¸åˆ°æŸä¸ªæ¨¡å—ç‰ˆæœ¬çš„æ—¶å€™å°±ä¼šçœç•¥å®ƒçš„ h1 hashï¼Œå°±ä¼šå‡ºç°ä¸å­˜åœ¨ h1 hashï¼Œåªå­˜åœ¨ go.mod hash çš„æƒ…å†µã€‚&lt;/p>
&lt;p>&lt;code>go.mod&lt;/code>å’Œ&lt;code>go.sum&lt;/code>éƒ½åº”è¯¥è¢«æäº¤åˆ°gitä»“åº“ä¸­å»ã€‚å½“åˆ«äººä½¿ç”¨ä½ çš„é¡¹ç›®æ—¶ï¼Œmodä¿è¯ä¾èµ–ç‰ˆæœ¬ä¸€ç›´ï¼Œsumä¿è¯ä¾èµ–ä¸è¢«ç¯¡æ”¹ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="go-modulesæ¨¡å—ä¸‹è½½">
&lt;a href="#go-modules%e6%a8%a1%e5%9d%97%e4%b8%8b%e8%bd%bd" class="header-anchor">#&lt;/a>
go modulesæ¨¡å—ä¸‹è½½
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>æˆ‘ä»¬ä¸‹è½½ã€æ·»åŠ æ¨¡å—ä½¿ç”¨&lt;code>go get -u &amp;lt;module path&amp;gt;&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é»˜è®¤ä¸‹è½½ã€æ·»åŠ æœ€æ–°ç‰ˆæœ¬ï¼Œé¦–å…ˆä¼šæ£€æŸ¥æœ¬åœ°ï¼ˆpkgï¼šå…¨å±€æ¨¡å—ç¼“å­˜ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œæ²¡æœ‰ï¼Œåœ¨å»ä¸‹è½½ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨é¡¹ç›®ä¸­ä¸‹è½½ä¼šè‡ªåŠ¨æ·»åŠ åˆ°&lt;code>go.mod&lt;/code>æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-u&lt;/code>é€‰é¡¹ä¼šæ›´æ–°æ¨¡å—çš„ä¾èµ–åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæ¨èåŠ ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿˜å¯ä»¥æŒ‡å®šä¸‹è½½ç‰ˆæœ¬&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å‘½ä»¤&lt;/th>
&lt;th>ä½œç”¨&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>go get golang.org/x/text@latest&lt;/td>
&lt;td>æ‹‰å–æœ€æ–°çš„ç‰ˆæœ¬ï¼Œè‹¥å­˜åœ¨tagï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨ã€‚å¯ä»¥çœç•¥ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>go get golang.org/x/text@master&lt;/td>
&lt;td>æ‹‰å– master åˆ†æ”¯çš„æœ€æ–° commitã€‚@branch&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>go get &lt;a class="link" href="mailto:golang.org/x/text@v0.3.2" >golang.org/x/text@v0.3.2&lt;/a>&lt;/td>
&lt;td>æ‹‰å– tag ä¸º v0.3.2 çš„ commitã€‚@versionï¼Œversionå¿…é¡»æ»¡è¶³è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒä¸”å‰é¢åŠ vã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>go get golang.org/x/text@342b2e&lt;/td>
&lt;td>æ‹‰å– hash ä¸º 342b231 çš„ commitï¼Œæœ€ç»ˆä¼šè¢«è½¬æ¢ä¸º v0.3.2ã€‚@commit&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>go get golang.org/x/text/v2&lt;/td>
&lt;td>ä¸‹è½½ä¸»ç‰ˆæœ¬å·ä¸º2çš„æœ€æ–°ç‰ˆ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;li>
&lt;p>æœ€æ–°ç‰ˆæœ¬çš„é€‰æ‹©&lt;/p>
&lt;p>åˆ†ä¸¤ç§æƒ…å†µ&lt;/p>
&lt;ol>
&lt;li>æœ€æ–°ç‰ˆæœ¬æœ‰å‘å¸ƒtagsï¼šå°±ä»¥å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œversionä¸€èˆ¬ä¸º&lt;code>æ ‡ç­¾å&lt;/code>ï¼Œå¦‚&lt;code>v2.1.2&lt;/code>&lt;/li>
&lt;li>æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰å‘å¸ƒtags:å°±ä»¥æäº¤çš„æœ€æ–°ç‰ˆæœ¬ï¼Œversionä¸€èˆ¬ä¸º&lt;code>å·²å‘å¸ƒæ ‡ç­¾-æœ€æ–°æäº¤æ—¥æœŸ-æœ€æ–°æäº¤å“ˆå¸Œ+ç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯&lt;/code>ï¼Œç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯ä¸€èˆ¬æ²¡æœ‰ã€‚å¦‚&lt;code>v2.1.2-20240416160154-fe59bbe5cc7f&lt;/code>ï¼Œå¦‚æœä¸€æ¬¡tagsä¹Ÿæ²¡æœ‰å‘å¸ƒï¼Œç‰ˆæœ¬å·åˆ™ä¸ºv0.0.0ï¼Œå¦‚&lt;code>v0.0.0-20240416160154-fe59bbe5cc7f&lt;/code>&lt;/li>
&lt;li>å­æ¨¡å—åŒç†&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;h4 id="go-moduleså…¨å±€ç¼“å­˜">
&lt;a href="#go-modules%e5%85%a8%e5%b1%80%e7%bc%93%e5%ad%98" class="header-anchor">#&lt;/a>
go moduleså…¨å±€ç¼“å­˜
&lt;/h4>&lt;p>Go module ä¼šæŠŠä¸‹è½½åˆ°æœ¬åœ°çš„ä¾èµ–åŒ…ä¼šä»¥ç±»ä¼¼ä¸‹é¢çš„å½¢å¼ä¿å­˜åœ¨ &lt;code>$GOPATH/pkg/mod&lt;/code>ç›®å½•ä¸‹ï¼Œæ¯ä¸ªä¾èµ–åŒ…éƒ½ä¼šå¸¦æœ‰ç‰ˆæœ¬å·è¿›è¡ŒåŒºåˆ†ï¼Œè¿™æ ·å°±å…è®¸åœ¨æœ¬åœ°å­˜åœ¨åŒä¸€ä¸ªåŒ…çš„å¤šä¸ªä¸åŒç‰ˆæœ¬ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">mod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">cache&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">golang&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">org&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">google&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">golang&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">org&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â”œâ”€â”€&lt;/span> &lt;span class="nx">gopkg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæƒ³æ¸…é™¤æ‰€æœ‰æœ¬åœ°å·²ç¼“å­˜çš„ä¾èµ–åŒ…æ•°æ®ï¼Œå¯ä»¥æ‰§è¡Œ &lt;code>go clean -modcache&lt;/code> å‘½ä»¤ã€‚&lt;/p>
&lt;h3 id="go-modulesæ¨¡å—å¯¼å…¥">
&lt;a href="#go-modules%e6%a8%a1%e5%9d%97%e5%af%bc%e5%85%a5" class="header-anchor">#&lt;/a>
go modulesæ¨¡å—å¯¼å…¥
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>goæ¨¡å—å¯¼å…¥ç”¨&lt;code>import &amp;quot;æ¨¡å—è·¯å¾„&amp;quot;&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“å¯¼å…¥å¤šä¸ªæ¨¡å—çš„æ—¶å€™ç”¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;path/filepath&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åˆ«åå¯¼å…¥ç”¨&lt;code>import åˆ«å &amp;quot;æ¨¡å—è·¯å¾„&amp;quot;&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nx">f&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ç‚¹å¯¼å…¥ç”¨&lt;code>import . &amp;quot;æ¨¡å—è·¯å¾„&amp;quot;&lt;/code>&lt;/p>
&lt;p>ç‚¹å¯¼å…¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¼å…¥æ–¹å¼ï¼Œå®ƒå°†åŒ…ä¸­çš„æ‰€æœ‰å…¬å…±æ ‡è¯†ç¬¦ï¼ˆå‡½æ•°ã€å˜é‡ã€ç±»å‹ç­‰ï¼‰æå‡åˆ°å½“å‰æ–‡ä»¶çš„å‘½åç©ºé—´ä¸­ï¼Œè¿™æ ·åœ¨ä»£ç ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ ‡è¯†ç¬¦ï¼Œè€Œä¸éœ€è¦åŠ ä¸ŠåŒ…åå‰ç¼€ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼å¯èƒ½ä¼šå¯¼è‡´å‘½åå†²çªå’Œä»£ç å¯è¯»æ€§ä¸‹é™ï¼Œå› æ­¤ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç©ºå¯¼å…¥ç”¨&lt;code>import _ &amp;quot;æ¨¡å—è·¯å¾„&amp;quot;&lt;/code>&lt;/p>
&lt;p>ç©ºå¯¼å…¥é€šå¸¸ç”¨äºåˆå§‹åŒ–åŒ…ä¸­çš„å˜é‡æˆ–è€…æ‰§è¡ŒåŒ…ä¸­çš„åˆå§‹åŒ–å‡½æ•°ï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨è¯¥åŒ…ä¸­çš„å…¶ä»–æ ‡è¯†ç¬¦ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ³¨æ„äº‹é¡¹&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å½“æ¨¡å—çš„ä¸»ç‰ˆæœ¬å·ä¸º0æˆ–1çš„æ—¶å€™çœç•¥äº†ä¸»ç‰ˆæœ¬æ ‡è¯†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å½“ä¸»ç‰ˆæœ¬å·ä¸º2åŠä»¥ä¸Šæ—¶ï¼Œä¸èƒ½çœç•¥ä¸»ç‰ˆæœ¬æ ‡è¯†ã€‚å¦åˆ™ä¼šå‡ºç°å†²çªã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸»ç‰ˆæœ¬æ ‡è¯†åªèƒ½ä¸º&lt;code>/vä¸»ç‰ˆæœ¬å·&lt;/code>ï¼Œä¸èƒ½ç”¨&lt;code>@version&lt;/code>ï¼Œä¸€èˆ¬ä½¿ç”¨ä¸»ç‰ˆæœ¬çš„æœ€æ–°ç‰ˆï¼Œè¿™ä¸è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒæœ‰å…³ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/jordan-wright/email&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/jordan-wright/email/v4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¸ºä»€ä¹ˆå¿½ç•¥ v0 å’Œ v1 çš„ä¸»ç‰ˆæœ¬å·&lt;/p>
&lt;p>è¿˜æ˜¯ä¸è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒæœ‰å…³ï¼Œv0å±äºå¼€å‘åˆå§‹é˜¶æ®µï¼Œå…¶å…¬å…±apiä¸è¢«è§†ä¸ºç¨³å®šç‰ˆï¼Œå½“ç‰ˆæœ¬åˆ°è¾¾v1ï¼Œå…¶å…¬å…±apiåŸºæœ¬ç¡®å®šï¼Œåœ¨æ­¤ä¹‹åå¦‚æœä¸å‡ºç°ä¸å…¼å®¹apiçš„ä¿®æ”¹ï¼Œæ˜¯ä¸ä¼šä¿®æ”¹ä¸»ç‰ˆæœ¬å·çš„ã€‚åç»­çš„æ¬¡ç‰ˆæœ¬ã€ä¿®è®¢å·ä¼šå‘ä¸‹å…¼å®¹ã€‚è¿™æ˜¯å®˜æ–¹æ‰€é¼“åŠ±çš„ã€‚å½“apiåšäº†ä¸å…¼å®¹çš„ä¿®æ”¹ï¼Œä¸»ç‰ˆæœ¬å·å°±ä¼šä¿®æ”¹ã€‚&lt;strong>ä¸ºäº†ä¸å‡ºç°å†²çªå°±ä¼šåŠ ä¸Šä¸»ç‰ˆæœ¬æ ‡è¯†&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="gopkginä»‹ç»">
&lt;a href="#gopkgin%e4%bb%8b%e7%bb%8d" class="header-anchor">#&lt;/a>
gopkg.inä»‹ç»
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>&lt;code>gopkg.in&lt;/code>æ˜¯æ—§goåŒ…ç®¡ç†å·¥å…·ä¸­çš„ä¸€ä¸ªï¼Œå¹¶ä¸æ˜¯å®˜æ–¹åŒ…ç®¡ç†å·¥å…·ã€‚ä½œç”¨æ˜¯ä¸‹è½½æ—¶é‡å®šå‘åˆ°ç›¸åº”githubä»“åº“ã€‚ä¼˜ç‚¹æ˜¯ï¼š URL æ›´å¹²å‡€ã€æ›´çŸ­ã€å¯¼å…¥è·¯å¾„ç¨³å®šã€æ˜“äºä½¿ç”¨ã€æ”¯æŒç‰ˆæœ¬æ§åˆ¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æµè§ˆå™¨æ‰“å¼€é“¾æ¥ï¼Œä¼šæä¾›å¯¹åº”åŒ…çš„godocåœ¨çº¿é“¾æ¥ä»¥åŠgithubä»“åº“é“¾æ¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>gopkg.in/ini.v1&lt;/code>å¯¹åº”githubä»“åº“ä¸º&lt;code>githu.com/go-ini/ini&lt;/code>ï¼Œå½“æ²¡æœ‰æŒ‡å®šç”¨æˆ·åæ—¶ï¼Œç”¨æˆ·åé»˜è®¤ä¸º&lt;code>go-åŒ…å&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">gopkg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">in&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">v3&lt;/span> &lt;span class="err">â†’&lt;/span> &lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">go&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nf">pkg&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">branch&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">tag&lt;/span> &lt;span class="nx">v3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">or&lt;/span> &lt;span class="nx">v3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">M&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">gopkg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">in&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pkg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">v3&lt;/span> &lt;span class="err">â†’&lt;/span> &lt;span class="nx">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nf">pkg&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">branch&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">tag&lt;/span> &lt;span class="nx">v3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">or&lt;/span> &lt;span class="nx">v3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">N&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">M&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ç‰ˆæœ¬æ§åˆ¶ç”¨&lt;code>.vNumber&lt;/code>è¡¨ç¤º.ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸&lt;code>go modules&lt;/code>çš„åŒºåˆ«ï¼š&lt;/p>
&lt;ul>
&lt;li>v1&lt;code>gopkg.in&lt;/code>å¿…é¡»æŒ‡å®šã€‚&lt;code>go mod&lt;/code>ä¸ç”¨ã€‚&lt;/li>
&lt;li>&lt;code>gopkg.in&lt;/code>åˆ†éš”ç¬¦æ˜¯&lt;code>.&lt;/code>ï¼ˆ&lt;code>go mod&lt;/code>æ˜¯&lt;code>/&lt;/code>ï¼‰ã€‚&lt;/li>
&lt;li>v0ä¸ºå¼€å‘ç‰ˆã€ä¸ç¨³å®šç‰ˆï¼Œä¸æŒ‡å®šé»˜è®¤ä¸ºå¼€å‘ç‰ˆï¼Œ&lt;code>go mod&lt;/code>ä¸æŒ‡å®šé»˜è®¤ä¸ºv0æˆ–v1ã€‚&lt;/li>
&lt;li>&lt;code>gopkg.in&lt;/code>ä¸»ç‰ˆæœ¬ä¸º1å°±è¦æŒ‡å®šä¸»ç‰ˆæœ¬æ ‡è¯†ã€‚&lt;code>go mod&lt;/code>ä¸»ç‰ˆæœ¬ä¸º2æ‰éœ€è¦æŒ‡å®šã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¦‚ä½•è®©&lt;code>gopkg.in&lt;/code>æ”¶å½•è‡ªå·±çš„æ¨¡å—ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸&lt;code>go mod&lt;/code>ä¸€æ ·ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨&lt;code>go get&lt;/code>ä¸‹è½½å·²ç»å­˜åœ¨çš„ç‰ˆæœ¬ä»“åº“æ—¶ï¼Œä¼šè‡ªåŠ¨åŒæ­¥åˆ°åœ¨çº¿çš„&lt;a class="link" href="https://pkg.go.dev/" target="_blank" rel="noopener"
>godoc&lt;/a>ä¸­ã€‚&lt;/li>
&lt;li>å»ºè®®ä»“åº“åä¸ç”¨æˆ·åå…³ç³»æ˜¯&lt;code>pkg&lt;/code>ä¸&lt;code>go-pkg&lt;/code>ï¼Œæ¨è&lt;code>gopkg.in&lt;/code>ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨githubä»“åº“è·¯å¾„ã€‚&lt;/li>
&lt;li>å…¶ä»–æƒ…å†µå¯ä»¥ä½¿ç”¨&lt;code>go mod&lt;/code>ã€‚å¹¶é€šè¿‡åƒ &lt;code>proxy.golang.org&lt;/code> è¿™æ ·çš„ä»£ç†æœåŠ¡å™¨æ¥åˆ†å‘ä½ çš„æ¨¡å—ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>gopkg.in&lt;/code>ç‰ˆæœ¬æ§åˆ¶åŒæ ·éµå¾ª[è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶](#Go Module è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ)ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>è‡³æ­¤æˆ‘ä»¬å¤§è‡´ä»‹ç»äº† Go modules çš„å‰ä¸–ä»Šç”Ÿã€è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒä»¥åŠåŸºæœ¬ä½¿ç”¨ã€‚&lt;/p>
&lt;p>Go modules çš„æˆé•¿å’Œå‘å±•ç»å†äº†ä¸€å®šçš„è¿‡ç¨‹ï¼Œå¦‚æœä½ æ˜¯åˆšæ¥è§¦çš„è¯»è€…ï¼Œç›´æ¥åŸºäº Go modules çš„é¡¹ç›®å¼€å§‹å³å¯ï¼Œå¦‚æœæ—¢æœ‰è€é¡¹ç›®ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™è€ƒè™‘åˆ‡æ¢è¿‡æ¥äº†ï¼ŒGo1.14èµ·å·²ç»å‡†å¤‡å°±ç»ªï¼Œå¹¶æ¨èä½ ä½¿ç”¨ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;blockquote>
&lt;ol>
&lt;li>&lt;a class="link" href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener"
>https://semver.org/lang/zh-CN/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://jianghushinian.cn/2023/01/01/Go-Module-%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC%E8%A7%84%E8%8C%83/" target="_blank" rel="noopener"
>Go Module è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/u011069013/article/details/110114319" target="_blank" rel="noopener"
>Go Modulesè¯¦è§£&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://juejin.cn/post/7149869713688887326" target="_blank" rel="noopener"
>Go moduleè¯¦ç»†ä»‹ç»&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>æ·±å…¥æ¢ç©¶ Go log æ ‡å‡†åº“</title><link>https://arlettebrook.github.io/p/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%A9%B6-go-log-%E6%A0%87%E5%87%86%E5%BA%93/</link><pubDate>Sat, 27 Apr 2024 16:54:38 +0800</pubDate><guid>https://arlettebrook.github.io/p/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%A9%B6-go-log-%E6%A0%87%E5%87%86%E5%BA%93/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>Go è¯­è¨€æ ‡å‡†åº“ä¸­çš„ log åŒ…è®¾è®¡ç®€æ´æ˜äº†ï¼Œæ˜“äºä¸Šæ‰‹ï¼Œå¯ä»¥è½»æ¾è®°å½•ç¨‹åºè¿è¡Œæ—¶çš„ä¿¡æ¯ã€è°ƒè¯•é”™è¯¯ä»¥åŠè·Ÿè¸ªä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­çš„é—®é¢˜ç­‰ã€‚ä½¿ç”¨ log åŒ…æ— éœ€ç¹ççš„é…ç½®å³å¯ç›´æ¥ä½¿ç”¨ã€‚æœ¬æ–‡æ—¨åœ¨æ·±å…¥æ¢ç©¶ log åŒ…çš„ä½¿ç”¨å’ŒåŸç†ï¼Œå¸®åŠ©è¯»è€…æ›´å¥½åœ°äº†è§£å’ŒæŒæ¡å®ƒã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="ä½¿ç”¨">
&lt;a href="#%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
ä½¿ç”¨
&lt;/h2>&lt;p>å…ˆæ¥çœ‹ä¸€ä¸ª log åŒ…çš„ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Print&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Printf: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;print&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Println&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fatal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fatalf: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fatal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fatalln&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Panic&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panicf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Panicf: %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;panic&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Panicln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Panicln&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡è®¾ä»¥ä¸Šä»£ç å­˜æ”¾åœ¨ &lt;code>main.go&lt;/code> ä¸­ï¼Œé€šè¿‡ &lt;code>go run main.go&lt;/code> æ‰§è¡Œä»£ç å°†ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023/03/08 22:33:22 Print
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023/03/08 22:33:22 Printf: print
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023/03/08 22:33:22 Println
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023/03/08 22:33:22 Fatal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> status &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šç¤ºä¾‹ä»£ç ä¸­ä½¿ç”¨ log åŒ…æä¾›çš„ 9 ä¸ªå‡½æ•°åˆ†åˆ«å¯¹æ—¥å¿—è¿›è¡Œè¾“å‡ºï¼Œæœ€ç»ˆå¾—åˆ° 4 æ¡æ‰“å°æ—¥å¿—ã€‚æˆ‘ä»¬æ¥åˆ†æä¸‹æ¯ä¸ªæ—¥å¿—å‡½æ•°çš„ä½œç”¨ï¼Œæ¥çœ‹çœ‹ä¸ºä»€ä¹ˆå‡ºç°è¿™æ ·çš„ç»“æœã€‚&lt;/p>
&lt;p>log åŒ…æä¾›äº† 3 ç±»å…±è®¡ 9 ç§æ–¹æ³•æ¥è¾“å‡ºæ—¥å¿—å†…å®¹ã€‚&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å‡½æ•°å&lt;/th>
&lt;th>ä½œç”¨&lt;/th>
&lt;th>ä½¿ç”¨ç¤ºä¾‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Print&lt;/td>
&lt;td>æ‰“å°æ—¥å¿—&lt;/td>
&lt;td>log.Print(â€œPrintâ€)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Printf&lt;/td>
&lt;td>æ‰“å°æ ¼å¼åŒ–æ—¥å¿—&lt;/td>
&lt;td>log.Printf(â€œPrintf: %sâ€, â€œprintâ€)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Println&lt;/td>
&lt;td>æ‰“å°æ—¥å¿—å¹¶æ¢è¡Œ&lt;/td>
&lt;td>log.Println(â€œPrintlnâ€)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Panic&lt;/td>
&lt;td>æ‰“å°æ—¥å¿—åæ‰§è¡Œ panic(s)ï¼ˆs ä¸ºæ—¥å¿—å†…å®¹ï¼‰&lt;/td>
&lt;td>log.Panic(â€œPanicâ€)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Panicf&lt;/td>
&lt;td>æ‰“å°æ ¼å¼åŒ–æ—¥å¿—åæ‰§è¡Œ panic(s)&lt;/td>
&lt;td>log.Panicf(â€œPanicf: %sâ€, â€œpanicâ€)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Panicln&lt;/td>
&lt;td>æ‰“å°æ—¥å¿—å¹¶æ¢è¡Œåæ‰§è¡Œ panic(s)&lt;/td>
&lt;td>log.Panicln(â€œPaniclnâ€)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Fatal&lt;/td>
&lt;td>æ‰“å°æ—¥å¿—åæ‰§è¡Œ os.Exit(1)&lt;/td>
&lt;td>log.Fatal(â€œFatalâ€)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Fatalf&lt;/td>
&lt;td>æ‰“å°æ ¼å¼åŒ–æ—¥å¿—åæ‰§è¡Œ os.Exit(1)&lt;/td>
&lt;td>log.Fatalf(â€œFatalf: %sâ€, â€œfatalâ€)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Fatalln&lt;/td>
&lt;td>æ‰“å°æ—¥å¿—å¹¶æ¢è¡Œåæ‰§è¡Œ os.Exit(1)&lt;/td>
&lt;td>log.Panicln(â€œPaniclnâ€)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>å®é™…ä¸ŠlogåŒ…æ¯æ‰“å°ä¸€å¥æ—¥å¿—ï¼Œéƒ½ä¼šæ¢è¡Œï¼Œæ— è®ºæœ‰æ²¡æœ‰&lt;code>ln&lt;/code>æˆ–è€…&lt;code>\n&lt;/code>ã€‚&lt;/p>
&lt;p>æ ¹æ®ä»¥ä¸Šè¡¨æ ¼è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œlog åŒ…åœ¨æ‰§è¡Œ &lt;code>log.Fatal(&amp;quot;Fatal&amp;quot;)&lt;/code> æ—¶ï¼Œç¨‹åºæ‰“å°å®Œæ—¥å¿—å°±é€šè¿‡ &lt;code>os.Exit(1)&lt;/code> é€€å‡ºäº†ã€‚è¿™ä¹Ÿå°±å¯ä»¥è§£é‡Šä¸Šé¢çš„ç¤ºä¾‹ç¨‹åºï¼Œä¸ºä»€ä¹ˆæ‰“å°äº† 9 æ¬¡æ—¥å¿—ï¼Œå´åªè¾“å‡ºäº† 4 æ¡æ—¥å¿—ï¼Œå¹¶ä¸”æœ€åç¨‹åºé€€å‡ºç ä¸º 1 äº†ã€‚&lt;/p>
&lt;p>ä»¥ä¸Šæ˜¯ log åŒ…æœ€åŸºæœ¬çš„ä½¿ç”¨æ–¹å¼ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¯¹æ—¥å¿—è¾“å‡ºåšä¸€äº›å®šåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>log.New&lt;/code> åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ &lt;code>logger&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;[Debug] - &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Lshortfile&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>log.New&lt;/code> å‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ç”¨æ¥æŒ‡å®šï¼šæ—¥å¿—è¾“å‡ºä½ç½®ï¼ˆä¸€ä¸ª &lt;code>io.Writer&lt;/code> å¯¹è±¡ï¼‰ã€æ—¥å¿—å‰ç¼€ï¼ˆå­—ç¬¦ä¸²ï¼Œæ¯æ¬¡æ‰“å°æ—¥å¿—éƒ½ä¼šè·Ÿéšè¾“å‡ºï¼‰ã€æ—¥å¿—å±æ€§ï¼ˆå®šä¹‰å¥½çš„å¸¸é‡ï¼Œç¨åä¼šè¯¦ç»†è®²è§£ï¼‰ã€‚&lt;/p>
&lt;p>ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;[Debug] - &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Lshortfile&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;custom logger&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¤ºä¾‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Debug&lt;span class="o">]&lt;/span> - main.go:10: custom logger
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼ŒæŒ‡å®šæ—¥å¿—è¾“å‡ºåˆ° &lt;code>os.Stdout&lt;/code>ï¼Œå³æ ‡å‡†è¾“å‡ºï¼›æ—¥å¿—å‰ç¼€ &lt;code>[Debug] -&lt;/code> ä¼šè‡ªåŠ¨è¢«åŠ å…¥åˆ°æ¯è¡Œæ—¥å¿—çš„è¡Œé¦–ï¼›è¿™æ¡æ—¥å¿—æ²¡æœ‰æ‰“å°å½“å‰æ—¶é—´ï¼Œè€Œæ˜¯æ‰“å°äº†æ–‡ä»¶åå’Œè¡Œå·ï¼Œè¿™æ˜¯ &lt;code>log.Lshortfile&lt;/code> æ—¥å¿—å±æ€§çš„ä½œç”¨ã€‚&lt;/p>
&lt;p>æ—¥å¿—å±æ€§å¯é€‰é¡¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å±æ€§&lt;/th>
&lt;th>è¯´æ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Ldate&lt;/td>
&lt;td>å½“å‰æ—¶åŒºçš„æ—¥æœŸï¼Œæ ¼å¼ï¼š2009/01/23&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ltime&lt;/td>
&lt;td>å½“å‰æ—¶åŒºçš„æ—¶é—´ï¼Œæ ¼å¼ï¼š01:23:23&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Lmicroseconds&lt;/td>
&lt;td>å½“å‰æ—¶åŒºçš„æ—¶é—´ï¼Œæ ¼å¼ï¼š01:23:23.123123ï¼Œç²¾ç¡®åˆ°å¾®å¦™&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Llongfile&lt;/td>
&lt;td>å…¨æ–‡ä»¶åå’Œè¡Œå·ï¼Œæ ¼å¼ï¼š/a/b/c/d.go:23&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Lshortfile&lt;/td>
&lt;td>å½“å‰æ–‡ä»¶åå’Œè¡Œå·ï¼Œæ ¼å¼ï¼šd.go:23ï¼Œä¼šè¦†ç›– Llongfile&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LUTC&lt;/td>
&lt;td>ä½¿ç”¨ UTC è€Œéæœ¬åœ°æ—¶åŒºï¼Œæ¨èæ—¥å¿—å…¨éƒ¨ä½¿ç”¨ UTC æ—¶é—´&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Lmsgprefix&lt;/td>
&lt;td>å°† &lt;code>prefix&lt;/code> å†…å®¹ä»è¡Œé¦–ç§»åŠ¨åˆ°æ—¥å¿—å†…å®¹å‰é¢&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LstdFlags&lt;/td>
&lt;td>æ ‡å‡† logger å¯¹è±¡çš„åˆå§‹å€¼ï¼ˆç­‰äºï¼š`Ldate&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>è¿™äº›å±æ€§éƒ½æ˜¯é¢„å®šä¹‰å¥½çš„å¸¸é‡ï¼Œä¸èƒ½ä¿®æ”¹ï¼Œå¯ä»¥é€šè¿‡ &lt;code>|&lt;/code> è¿ç®—ç¬¦ç»„åˆä½¿ç”¨ï¼ˆå¦‚ï¼š&lt;code>log.Ldate|log.Ltime|log.Lshortfile&lt;/code>ï¼‰ã€‚&lt;/p>
&lt;p>ä½¿ç”¨ &lt;code>log.New&lt;/code> å‡½æ•°åˆ›å»º &lt;code>logger&lt;/code> å¯¹è±¡ä»¥åï¼Œä¾ç„¶å¯ä»¥é€šè¿‡ &lt;code>logger&lt;/code> å¯¹è±¡çš„&lt;strong>æ–¹æ³•&lt;/strong>ä¿®æ”¹å…¶å±æ€§å€¼ï¼ˆé»˜è®¤çš„logä¹ŸåŒæ ·æœ‰ä¸‹åˆ—åŒå&lt;strong>å‡½æ•°&lt;/strong>ï¼‰ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ–¹æ³•&lt;/th>
&lt;th>ä½œç”¨&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>SetOutput&lt;/td>
&lt;td>è®¾ç½®æ—¥å¿—è¾“å‡ºä½ç½®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SetPrefix&lt;/td>
&lt;td>è®¾ç½®æ—¥å¿—è¾“å‡ºå‰ç¼€&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SetFlags&lt;/td>
&lt;td>è®¾ç½®æ—¥å¿—å±æ€§&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ›´åŠ å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å‡†å¤‡æ—¥å¿—æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logFile&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;demo.log&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">logFile&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆå§‹åŒ–æ—¥å¿—å¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">logFile&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;[Debug] - &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Lshortfile&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Lmsgprefix&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Print&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Println&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä¿®æ”¹æ—¥å¿—é…ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetOutput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetPrefix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;[Info] - &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFlags&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ldate&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Ltime&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LUTC&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Print&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Println&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œå¾—åˆ° &lt;code>demo.log&lt;/code> æ—¥å¿—å†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">main.go:15: &lt;span class="o">[&lt;/span>Debug&lt;span class="o">]&lt;/span> - Print
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">main.go:16: &lt;span class="o">[&lt;/span>Debug&lt;span class="o">]&lt;/span> - Println
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ§åˆ¶å°è¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Info&lt;span class="o">]&lt;/span> - 2023/03/11 01:24:56 Print
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Info&lt;span class="o">]&lt;/span> - 2023/03/11 01:24:56 Println
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œåœ¨ &lt;code>demo.log&lt;/code> æ—¥å¿—å†…å®¹ä¸­ï¼Œå› ä¸ºæŒ‡å®šäº† &lt;code>log.Lmsgprefix&lt;/code> å±æ€§ï¼Œæ‰€ä»¥æ—¥å¿—å‰ç¼€ &lt;code>[Debug] -&lt;/code> è¢«ç§»åŠ¨åˆ°äº†æ—¥å¿—å†…å®¹å‰é¢ï¼Œè€Œéè¡Œé¦–ã€‚&lt;/p>
&lt;p>å› ä¸ºåç»­é€šè¿‡ &lt;code>logger.SetXXX&lt;/code> å¯¹ &lt;code>logger&lt;/code> å¯¹è±¡çš„å±æ€§è¿›è¡Œäº†åŠ¨æ€ä¿®æ”¹ï¼Œæ‰€ä»¥æœ€åä¸¤æ¡æ—¥å¿—è¾“å‡ºåˆ°ç³»ç»Ÿçš„æ ‡å‡†è¾“å‡ºã€‚&lt;/p>
&lt;p>ä»¥ä¸Šï¼ŒåŸºæœ¬æ¶µç›–äº† log åŒ…çš„æ‰€æœ‰å¸¸ç”¨åŠŸèƒ½ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡èµ°è¯»æºç çš„æ–¹å¼æ¥æ›´æ·±å…¥çš„äº†è§£ log åŒ…äº†ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æºç ">
&lt;a href="#%e6%ba%90%e7%a0%81" class="header-anchor">#&lt;/a>
æºç 
&lt;/h2>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šæœ¬æ–‡ä»¥ &lt;a class="link" href="https://github.com/golang/go/tree/go1.19.4/src/log" target="_blank" rel="noopener"
>Go 1.19.4 æºç &lt;/a>ä¸ºä¾‹ï¼Œå…¶ä»–ç‰ˆæœ¬å¯èƒ½å­˜åœ¨å·®å¼‚ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>Go æ ‡å‡†åº“çš„ log åŒ…ä»£ç é‡éå¸¸å°‘ï¼Œç®—ä¸Šæ³¨é‡Šä¹Ÿæ‰ 400+ è¡Œï¼Œéå¸¸é€‚åˆåˆå­¦è€…é˜…è¯»å­¦ä¹ ã€‚&lt;/p>
&lt;p>åœ¨ä¸Šé¢ä»‹ç»çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ log åŒ…æä¾›çš„ 9 ä¸ªå…¬å¼€å‡½æ•°å¯¹æ—¥å¿—è¿›è¡Œè¾“å‡ºï¼Œå¹¶é€šè¿‡è¡¨æ ¼çš„å½¢å¼åˆ†åˆ«ä»‹ç»äº†å‡½æ•°çš„ä½œç”¨å’Œä½¿ç”¨ç¤ºä¾‹ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™å‡ ä¸ªå‡½æ•°æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">atomic&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadInt32&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isDiscard&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">atomic&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadInt32&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isDiscard&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">atomic&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadInt32&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isDiscard&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Panicf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Panicln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œè¿™äº›å‡½æ•°ä»£ç ä¸»é€»è¾‘åŸºæœ¬ä¸€è‡´ï¼Œéƒ½æ˜¯é€šè¿‡ &lt;code>std.Output&lt;/code> è¾“å‡ºæ—¥å¿—ã€‚ä¸åŒçš„æ˜¯ï¼Œ&lt;code>PrintX&lt;/code> è¾“å‡ºæ—¥å¿—åç¨‹åºå°±æ‰§è¡Œç»“æŸäº†ï¼›&lt;code>Fatal&lt;/code> è¾“å‡ºæ—¥å¿—åä¼šæ‰§è¡Œ &lt;code>os.Exit(1)&lt;/code>ï¼›è€Œ &lt;code>Panic&lt;/code> è¾“å‡ºæ—¥å¿—åä¼šæ‰§è¡Œ &lt;code>panic(s)&lt;/code>ã€‚&lt;/p>
&lt;p>é‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯è¦ææ¸…æ¥šè¿™ä¸ª &lt;code>std&lt;/code> å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒçš„ &lt;code>Output&lt;/code> æ–¹æ³•æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ &lt;code>std&lt;/code> æ˜¯ä»€ä¹ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">std&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">LstdFlags&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">out&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">prefix&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flag&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">out&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">out&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">prefix&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">prefix&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">out&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Discard&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isDiscard&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œ&lt;code>std&lt;/code> å…¶å®å°±æ˜¯ä½¿ç”¨ &lt;code>New&lt;/code> åˆ›å»ºçš„ä¸€ä¸ª &lt;code>Logger&lt;/code> å¯¹è±¡ï¼Œæ—¥å¿—è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œæ—¥å¿—å‰ç¼€ä¸ºç©ºï¼Œæ—¥å¿—å±æ€§ä¸º &lt;code>LstdFlags&lt;/code>ã€‚&lt;/p>
&lt;p>è¿™è·Ÿæˆ‘ä»¬ä¸Šé¢è®²çš„è‡ªå®šä¹‰æ—¥å¿—å¯¹è±¡ &lt;code>logger := log.New(os.Stdout, &amp;quot;[Debug] - &amp;quot;, log.Lshortfile)&lt;/code> æ–¹å¼å¦‚å‡ºä¸€è¾™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬é€šè¿‡ &lt;code>log.Print(&amp;quot;Print&amp;quot;)&lt;/code> æ‰“å°æ—¥å¿—æ—¶ï¼Œå…¶å®ä½¿ç”¨çš„æ˜¯ log åŒ…å†…éƒ¨å·²ç»å®šä¹‰å¥½çš„ &lt;code>Logger&lt;/code> å¯¹è±¡ã€‚&lt;/p>
&lt;p>&lt;code>Logger&lt;/code> å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Logger&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mu&lt;/span> &lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Mutex&lt;/span> &lt;span class="c1">// é”ï¼Œä¿è¯å¹¶å‘æƒ…å†µä¸‹å¯¹å…¶å±æ€§æ“ä½œæ˜¯åŸå­æ€§çš„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">prefix&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="c1">// æ—¥å¿—å‰ç¼€ï¼Œå³ Lmsgprefix å‚æ•°å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">flag&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="c1">// æ—¥å¿—å±æ€§ï¼Œç”¨æ¥æ§åˆ¶æ—¥å¿—è¾“å‡ºæ ¼å¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">out&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span> &lt;span class="c1">// æ—¥å¿—è¾“å‡ºä½ç½®ï¼Œå®ç°äº† io.Writer æ¥å£å³å¯ï¼Œå¦‚ æ–‡ä»¶ã€os.Stderr
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">buf&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">byte&lt;/span> &lt;span class="c1">// å­˜å‚¨æ—¥å¿—è¾“å‡ºå†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">isDiscard&lt;/span> &lt;span class="kt">int32&lt;/span> &lt;span class="c1">// å½“ out = io.Discard æ˜¯ï¼Œæ­¤å€¼ä¸º 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ï¼Œ&lt;code>flag&lt;/code> å’Œ &lt;code>isDiscard&lt;/code> è¿™ä¸¤ä¸ªå±æ€§æœ‰å¿…è¦è¿›ä¸€æ­¥è§£é‡Šä¸‹ã€‚&lt;/p>
&lt;p>é¦–å…ˆæ˜¯ &lt;code>flag&lt;/code> ç”¨æ¥è®°å½•æ—¥å¿—å±æ€§ï¼Œå…¶åˆæ³•å€¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Ldate&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="kc">iota&lt;/span> &lt;span class="c1">// the date in the local time zone: 2009/01/23
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Ltime&lt;/span> &lt;span class="c1">// the time in the local time zone: 01:23:23
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Lmicroseconds&lt;/span> &lt;span class="c1">// microsecond resolution: 01:23:23.123123. assumes Ltime.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Llongfile&lt;/span> &lt;span class="c1">// full file name and line number: /a/b/c/d.go:23
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Lshortfile&lt;/span> &lt;span class="c1">// final file name element and line number: d.go:23. overrides Llongfile
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">LUTC&lt;/span> &lt;span class="c1">// if Ldate or Ltime is set, use UTC rather than the local time zone
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Lmsgprefix&lt;/span> &lt;span class="c1">// move the &amp;#34;prefix&amp;#34; from the beginning of the line to before the message
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">LstdFlags&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">Ldate&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">Ltime&lt;/span> &lt;span class="c1">// initial values for the standard logger
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…·ä½“å«ä¹‰æˆ‘å°±ä¸å†ä¸€ä¸€è§£é‡Šäº†ï¼Œå‰æ–‡çš„è¡¨æ ¼å·²ç»å†™çš„å¾ˆè¯¦ç»†äº†ã€‚&lt;/p>
&lt;p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œåœ¨å®šä¹‰å¸¸é‡æ—¶ï¼Œå·§å¦™çš„ä½¿ç”¨äº†å·¦ç§»è¿ç®—ç¬¦ &lt;code>1 &amp;lt;&amp;lt; iota&lt;/code>ï¼Œä½¿å¾—å¸¸é‡çš„å€¼å‘ˆç° 1ã€2ã€4ã€8â€¦ è¿™æ ·çš„é€’å¢æ•ˆæœã€‚å…¶å®æ˜¯ä¸ºäº†ä½è¿ç®—æ–¹ä¾¿ï¼Œé€šè¿‡å¯¹å±æ€§è¿›è¡Œä½è¿ç®—ï¼Œæ¥å†³å®šè¾“å‡ºå†…å®¹ï¼Œå…¶æœ¬è´¨ä¸Šè·ŸåŸºäºä½è¿ç®—çš„æƒé™ç®¡ç†æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨ &lt;code>log.New&lt;/code> æ–°å»º &lt;code>Logger&lt;/code> å¯¹è±¡æ—¶å¯ä»¥æ”¯æŒ &lt;code>log.Ldate|log.Ltime|log.Lshortfile&lt;/code> è¿™ç§å½¢å¼è®¾ç½®å¤šä¸ªå±æ€§ã€‚&lt;/p>
&lt;p>&lt;code>std&lt;/code> å¯¹è±¡çš„å±æ€§åˆå§‹å€¼ &lt;code>LstdFlags&lt;/code> ä¹Ÿæ˜¯åœ¨è¿™é‡Œå®šä¹‰çš„ã€‚&lt;/p>
&lt;p>å…¶æ¬¡è¿˜æœ‰ä¸€ä¸ªå±æ€§ &lt;code>isDiscard&lt;/code>ï¼Œæ˜¯ç”¨æ¥ä¸¢å¼ƒæ—¥å¿—çš„ã€‚åœ¨ä¸Šé¢ä»‹ç» &lt;code>PrintX&lt;/code> å‡½æ•°å®šä¹‰æ—¶ï¼Œåœ¨è¾“å‡ºæ—¥å¿—å‰æœ‰ä¸€ä¸ª &lt;code>if atomic.LoadInt32(&amp;amp;std.isDiscard) != 0&lt;/code> çš„åˆ¤æ–­ï¼Œå¦‚æœç»“æœä¸ºçœŸï¼Œåˆ™ç›´æ¥ &lt;code>return&lt;/code> ä¸è®°å½•æ—¥å¿—ã€‚&lt;/p>
&lt;p>åœ¨ Go æ ‡å‡†åº“çš„ &lt;code>io&lt;/code> åŒ…é‡Œï¼Œæœ‰ä¸€ä¸ª &lt;code>io.Discard&lt;/code> å¯¹è±¡ï¼Œ&lt;code>io.Discard&lt;/code> å®ç°äº† &lt;code>io.Writer&lt;/code>ï¼Œå®ƒæ‰§è¡Œ Write æ“ä½œåä¸ä¼šäº§ç”Ÿä»»ä½•å®é™…çš„æ•ˆæœï¼Œæ˜¯ä¸€ä¸ªç”¨äºä¸¢å¼ƒæ•°æ®çš„å¯¹è±¡ã€‚æ¯”å¦‚æœ‰æ—¶å€™æˆ‘ä»¬ä¸åœ¨æ„æ•°æ®å†…å®¹ï¼Œä½†å¯èƒ½å­˜åœ¨æ•°æ®ä¸è¯»å‡ºæ¥å°±æ— æ³•å…³é—­è¿æ¥çš„æƒ…å†µï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ &lt;code>io.Copy(io.Discard, io.Reader)&lt;/code> å°†æ•°æ®å†™å…¥ &lt;code>io.Discard&lt;/code> å®ç°ä¸¢å¼ƒæ•°æ®çš„æ•ˆæœã€‚&lt;/p>
&lt;p>ä½¿ç”¨ &lt;code>New&lt;/code> åˆ›å»º &lt;code>Logger&lt;/code> å¯¹è±¡æ—¶ï¼Œå¦‚æœ &lt;code>out == io.Discard&lt;/code> åˆ™ &lt;code>l.isDiscard&lt;/code> çš„å€¼ä¼šè¢«ç½®ä¸º &lt;code>1&lt;/code>ï¼Œæ‰€ä»¥ä½¿ç”¨ &lt;code>PrintX&lt;/code> å‡½æ•°è®°å½•çš„æ—¥å¿—å°†ä¼šè¢«ä¸¢å¼ƒï¼Œè€Œ &lt;code>isDiscard&lt;/code> å±æ€§ä¹‹æ‰€ä»¥æ˜¯ &lt;code>int32&lt;/code> ç±»å‹è€Œä¸æ˜¯ &lt;code>bool&lt;/code>ï¼Œæ˜¯å› ä¸ºæ–¹ä¾¿åŸå­æ“ä½œã€‚&lt;/p>
&lt;p>ç°åœ¨ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥æ¥çœ‹ &lt;code>std.Output&lt;/code> çš„å®ç°äº†ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">calldepth&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">now&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// è·å–å½“å‰æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">var&lt;/span> &lt;span class="nx">file&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">line&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åŠ é”ï¼Œä¿è¯å¹¶å‘å®‰å…¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é€šè¿‡ä½è¿ç®—æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦è·å–æ–‡ä»¶åå’Œè¡Œå·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Lshortfile&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">Llongfile&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¿è¡Œ runtime.Caller è·å–æ–‡ä»¶åå’Œè¡Œå·æ¯”è¾ƒè€—æ—¶ï¼Œæ‰€ä»¥å…ˆé‡Šæ”¾é”
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">ok&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">line&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ok&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Caller&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">calldepth&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">ok&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;???&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">line&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è·å–åˆ°æ–‡ä»¶è¡Œå·åå†æ¬¡åŠ é”ï¼Œä¿è¯ä¸‹é¢ä»£ç å¹¶å‘å®‰å…¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¸…ç©ºä¸Šæ¬¡ç¼“å­˜çš„å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ ¼å¼åŒ–æ—¥å¿—å¤´ä¿¡æ¯ï¼ˆå¦‚ï¼šæ—¥æœŸæ—¶é—´ã€æ–‡ä»¶åå’Œè¡Œå·ã€å‰ç¼€ï¼‰å¹¶å†™å…¥ buf
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">formatHeader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">line&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¿½åŠ æ—¥å¿—å†…å®¹åˆ° buf
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä¿è¯è¾“å‡ºæ—¥å¿—ä»¥ \n ç»“å°¾
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è°ƒç”¨ Logger å¯¹è±¡çš„ out å±æ€§çš„ Write æ–¹æ³•è¾“å‡ºæ—¥å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Output&lt;/code> æ–¹æ³•ä»£ç å¹¶ä¸å¤šï¼ŒåŸºæœ¬é€»è¾‘ä¹Ÿæ¯”è¾ƒæ¸…æ™°ï¼Œé¦–å…ˆæ ¹æ®æ—¥å¿—å±æ€§æ¥å†³å®šæ˜¯å¦éœ€è¦è·å–æ–‡ä»¶åå’Œè¡Œå·ï¼Œå› ä¸ºè°ƒç”¨ &lt;code>runtime.Caller&lt;/code> æ˜¯ä¸€ä¸ªè€—æ—¶æ“ä½œï¼Œå¼€é”€æ¯”è¾ƒå¤§ï¼Œä¸ºäº†å¢åŠ å¹¶å‘æ€§ï¼Œæš‚æ—¶å°†é”é‡Šæ”¾ï¼Œè·å–åˆ°æ–‡ä»¶åå’Œè¡Œå·åå†é‡æ–°åŠ é”ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥å°±æ˜¯å‡†å¤‡æ—¥å¿—è¾“å‡ºå†…å®¹äº†ï¼Œé¦–å…ˆæ¸…ç©º &lt;code>buf&lt;/code> ä¸­ä¿ç•™çš„ä¸Šæ¬¡æ—¥å¿—ä¿¡æ¯ï¼Œç„¶åé€šè¿‡ &lt;code>formatHeader&lt;/code> æ–¹æ³•æ ¼å¼åŒ–æ—¥å¿—å¤´ä¿¡æ¯ï¼Œæ¥ç€æŠŠæ—¥å¿—å†…å®¹ä¹Ÿè¿½åŠ åˆ° &lt;code>buf&lt;/code> ä¸­ï¼Œåœ¨è¿™ä¹‹åæœ‰ä¸€ä¸ªä¿è¯è¾“å‡ºæ—¥å¿—ä»¥ &lt;code>\n&lt;/code> ç»“å°¾çš„é€»è¾‘ï¼Œæ¥ä¿è¯è¾“å‡ºçš„æ—¥å¿—éƒ½æ˜¯å•ç‹¬ä¸€è¡Œçš„ã€‚ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œåœ¨å‰æ–‡çš„ log åŒ…ä½¿ç”¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ &lt;code>Print&lt;/code> å’Œ &lt;code>Println&lt;/code> ä¸¤ä¸ªæ–¹æ³•æ—¶ï¼Œæœ€ç»ˆæ—¥å¿—è¾“å‡ºæ•ˆæœå¹¶æ— å·®åˆ«ï¼Œä½¿ç”¨ &lt;code>Print&lt;/code> æ‰“å°æ—¥å¿—ä¹Ÿä¼šæ¢è¡Œï¼Œå…¶å®å°±æ˜¯è¿™é‡Œçš„é€»è¾‘å†³å®šçš„ã€‚&lt;/p>
&lt;p>æœ€åï¼Œé€šè¿‡è°ƒç”¨ &lt;code>l.out.Write&lt;/code> æ–¹æ³•ï¼Œå°† &lt;code>buf&lt;/code> å†…å®¹è¾“å‡ºã€‚&lt;/p>
&lt;blockquote>
&lt;ul>
&lt;li>
&lt;p>&lt;code>func Caller(skip int) (pc uintptr, file string, line int, ok bool)&lt;/code>&lt;/p>
&lt;ul>
&lt;li>å½“skipä¸º0æ—¶ï¼Œè·å–è°ƒç”¨è¯¥å‡½æ•°çš„å‡½æ•°ä¿¡æ¯ï¼Œè¿”å›å€¼åŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨ï¼ˆ&lt;code>pc&lt;/code>ï¼šprogram counteræ ˆå¸§çš„å…¥å£åœ°å€ï¼‰ã€&lt;code>file&lt;/code>è°ƒç”¨å‡½æ•°æ‰€åœ¨æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€&lt;code>line&lt;/code>è°ƒç”¨è¡Œå·ï¼Œ&lt;code>ok&lt;/code>æ˜¯å¦è·å–æˆåŠŸ&lt;/li>
&lt;li>å½“skipä¸º1æ—¶ï¼Œè·å–è°ƒç”¨è¯¥å‡½æ•°çš„è°ƒç”¨å‡½æ•°çš„ä¿¡æ¯ï¼Œè¿”å›å€¼åŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨ï¼ˆpcï¼šprogram counteræ ˆå¸§çš„å…¥å£åœ°å€ï¼‰ã€è°ƒç”¨å‡½æ•°æ‰€åœ¨æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€è°ƒç”¨è¡Œå·ï¼Œæ˜¯å¦è·å–æˆåŠŸ&lt;/li>
&lt;li>ä»¥æ­¤ç±»æ¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>func FuncForPC(pc uintptr) *Func&lt;/code>&lt;/p>
&lt;ul>
&lt;li>æ ¹æ®&lt;code>pc&lt;/code>è·å–è°ƒç”¨å‡½æ•°å¯¹è±¡ï¼Œ&lt;code>name&lt;/code>å±æ€§å¯ä»¥è·å–è°ƒç”¨å‡½æ•°å.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>func CallersFrames(callers []uintptr) *Frames&lt;/code>&lt;/p>
&lt;ul>
&lt;li>æ ¹æ®pcå­—èŠ‚åˆ‡ç‰‡è·å–è°ƒç”¨æ ˆå¸§ã€‚&lt;code>next()&lt;/code>æ–¹æ³•è·å–æ ˆå¸§ã€‚ç„¶åé€šè¿‡æ ˆå¸§å¯ä»¥è·å–å‡½æ•°åï¼Œå‡½æ•°æ‰€åœ¨æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚è°ƒç”¨è¡Œå·ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">frames&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CallersFrames&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">uintptr&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">pc&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// éå†æ ˆå¸§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">frame&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">more&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">frames&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">more&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;å‡½æ•°å: %s, æ–‡ä»¶: %s, è¡Œå·: %d\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">frame&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Function&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">frame&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">File&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">frame&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Line&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>æˆ‘ä»¬æ¥çœ‹ä¸‹ç”¨æ¥æ ¼å¼åŒ–æ—¥å¿—å¤´ä¿¡æ¯çš„ &lt;code>formatHeader&lt;/code> æ–¹æ³•æ˜¯å¦‚ä½•å®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">formatHeader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">[]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">line&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¦‚æœæ²¡æœ‰è®¾ç½® Lmsgprefix å±æ€§ï¼Œå°†æ—¥å¿—å‰ç¼€å†…å®¹è®¾ç½®åˆ°è¡Œé¦–
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Lmsgprefix&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prefix&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ¤æ–­æ˜¯å¦è®¾ç½®äº†æ—¥æœŸæ—¶é—´ç›¸å…³çš„å±æ€§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Ldate&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">Ltime&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">Lmicroseconds&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ˜¯å¦è®¾ç½® UTC æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">LUTC&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">UTC&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ˜¯å¦è®¾ç½®æ—¥æœŸ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Ldate&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">month&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">day&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Date&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sc">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">month&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sc">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">day&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sc">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ˜¯å¦è®¾ç½®æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Ltime&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">Lmicroseconds&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hour&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">min&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sec&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Clock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">hour&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sc">&amp;#39;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">min&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sc">&amp;#39;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sec&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Lmicroseconds&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sc">&amp;#39;.&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Nanosecond&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1e3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sc">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ˜¯å¦è®¾ç½®æ–‡ä»¶åå’Œè¡Œå·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Lshortfile&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">Llongfile&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Lshortfile&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">short&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="sc">&amp;#39;/&amp;#39;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">short&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">short&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sc">&amp;#39;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">line&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;: &amp;#34;&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¦‚æœè®¾ç½®äº† Lmsgprefix å±æ€§ï¼Œå°†æ—¥å¿—å‰ç¼€å†…å®¹æ”¾åˆ°æ—¥å¿—å¤´ä¿¡æ¯æœ€åï¼Œä¹Ÿå°±æ˜¯ç´§æŒ¨ç€æ—¥å¿—å†…å®¹å‰é¢
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Lmsgprefix&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prefix&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>formatHeader&lt;/code> æ–¹æ³•æ˜¯ log åŒ…é‡Œé¢ä»£ç é‡æœ€å¤šçš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¸»è¦é€šè¿‡æŒ‰ä½ä¸ï¼ˆ&amp;amp;ï¼‰æ¥è®¡ç®—æ˜¯å¦è®¾ç½®äº†æŸä¸ªæ—¥å¿—å±æ€§ï¼Œç„¶åæ ¹æ®æ—¥å¿—å±æ€§æ¥æ ¼å¼åŒ–å¤´ä¿¡æ¯ã€‚&lt;/p>
&lt;p>å…¶ä¸­å¤šæ¬¡è°ƒç”¨ &lt;code>itoa&lt;/code> å‡½æ•°ï¼Œ&lt;code>itoa&lt;/code> é¡¾åæ€ä¹‰ï¼Œå°† &lt;code>int&lt;/code> è½¬æ¢æˆ &lt;code>ASCII&lt;/code> ç ï¼Œ&lt;code>itoa&lt;/code> å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">[]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">wid&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Assemble decimal in reverse order.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">var&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">byte&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">bp&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">wid&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wid&lt;/span>&lt;span class="o">--&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">q&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">bp&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;0&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">q&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">bp&lt;/span>&lt;span class="o">--&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">q&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// i &amp;lt; 10
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">bp&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;0&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">bp&lt;/span>&lt;span class="p">:]&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‡½æ•°çŸ­å°ç²¾æ‚ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œ&lt;code>buf&lt;/code> ç”¨æ¥ä¿å­˜è½¬æ¢åçš„å†…å®¹ï¼Œ&lt;code>i&lt;/code> å°±æ˜¯å¸¦è½¬æ¢çš„å€¼ï¼Œæ¯”å¦‚ &lt;code>year&lt;/code>ã€&lt;code>month&lt;/code> ç­‰ï¼Œ&lt;code>wid&lt;/code> è¡¨ç¤ºè½¬æ¢å &lt;code>ASCII&lt;/code> ç å­—ç¬¦ä¸²å®½åº¦ï¼Œå¦‚æœä¼ è¿›æ¥çš„ &lt;code>i&lt;/code> å®½åº¦ä¸å¤Ÿï¼Œåˆ™å‰é¢è¡¥é›¶ã€‚æ¯”å¦‚ä¼ å…¥ &lt;code>itoa(&amp;amp;b, 12, 3)&lt;/code>ï¼Œæœ€ç»ˆè¾“å‡ºå­—ç¬¦ä¸²ä¸º &lt;code>012&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>'0'+i&lt;/code>ä¼šéšå¼è§¦å‘å­—ç¬¦å’ŒASCIIä¹‹é—´çš„è½¬æ¢ï¼Œ0çš„ASCIIç æ˜¯48ï¼ŒåŠ 0~9å°±æ˜¯å¯¹åº”0~9çš„ASCIIç ï¼Œè¶…è¿‡57å°±æ˜¯åˆ«çš„å­—ç¬¦ã€‚&lt;/p>
&lt;p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»ç†æ¸…äº† &lt;code>log.Print(&amp;quot;Print&amp;quot;)&lt;/code> æ˜¯å¦‚ä½•æ‰“å°ä¸€æ¡æ—¥å¿—çš„ï¼Œå…¶å‡½æ•°è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%A9%B6-go-log-%E6%A0%87%E5%87%86%E5%BA%93/index.assets/image-20240427181422728.png"
width="1099"
height="250"
srcset="https://arlettebrook.github.io/p/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%A9%B6-go-log-%E6%A0%87%E5%87%86%E5%BA%93/index.assets/image-20240427181422728_hud48500becb6283a595555b2655488062_37387_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/%E6%B7%B1%E5%85%A5%E6%8E%A2%E7%A9%B6-go-log-%E6%A0%87%E5%87%86%E5%BA%93/index.assets/image-20240427181422728_hud48500becb6283a595555b2655488062_37387_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="è°ƒç”¨æµç¨‹"
class="gallery-image"
data-flex-grow="439"
data-flex-basis="1055px"
>&lt;/p>
&lt;p>ä¸Šé¢æˆ‘ä»¬è®²è§£äº†ä½¿ç”¨ log åŒ…ä¸­é»˜è®¤çš„ &lt;code>std&lt;/code> è¿™ä¸ª &lt;code>Logger&lt;/code> å¯¹è±¡æ‰“å°æ—¥å¿—çš„è°ƒç”¨æµç¨‹ã€‚å½“æˆ‘ä»¬ä½¿ç”¨è‡ªå®šä¹‰çš„ &lt;code>Logger&lt;/code> å¯¹è±¡ï¼ˆ&lt;code>logger := log.New(os.Stdout, &amp;quot;[Debug] - &amp;quot;, log.Lshortfile)&lt;/code>ï¼‰æ¥æ‰“å°æ—¥å¿—æ—¶ï¼Œè°ƒç”¨çš„ &lt;code>loggger.Print&lt;/code> æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œä¸æ˜¯ &lt;code>log.Print&lt;/code> è¿™ä¸ªåŒ…çº§åˆ«çš„å‡½æ•°ï¼Œæ‰€ä»¥å…¶å® &lt;code>Logger&lt;/code> ç»“æ„ä½“ä¹Ÿå®ç°äº† 9 ç§è¾“å‡ºæ—¥å¿—æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">atomic&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadInt32&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isDiscard&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">atomic&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadInt32&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isDiscard&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">atomic&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadInt32&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isDiscard&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fatalln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Panicf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">format&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Panicln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprintln&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ 9 ä¸ªæ–¹æ³•è·Ÿ log åŒ…çº§åˆ«çš„å‡½æ•°ä¸€ä¸€å¯¹åº”ï¼Œç”¨äºè‡ªå®šä¹‰ &lt;code>Logger&lt;/code> å¯¹è±¡ã€‚&lt;/p>
&lt;p>æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹ï¼Œåœ¨è¿™äº›æ–¹æ³•å†…éƒ¨ï¼Œè°ƒç”¨ &lt;code>l.Output(2, s)&lt;/code> æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•° &lt;code>calldepth&lt;/code> ä¼ é€’çš„æ˜¯ 2ï¼Œè¿™è·Ÿ &lt;code>runtime.Caller(calldepth)&lt;/code> å‡½æ•°å†…éƒ¨å®ç°æœ‰å…³ï¼Œ&lt;code>runtime.Caller&lt;/code> å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Caller&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">skip&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">pc&lt;/span> &lt;span class="kt">uintptr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">file&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">line&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ok&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>runtime.Caller&lt;/code> è¿”å›å½“å‰ Goroutine çš„æ ˆä¸Šçš„å‡½æ•°è°ƒç”¨ä¿¡æ¯ï¼ˆç¨‹åºè®¡æ•°å™¨ã€æ–‡ä»¶ä¿¡æ¯ã€è¡Œå·ï¼‰ï¼Œå…¶å‚æ•° &lt;code>skip&lt;/code> è¡¨ç¤ºå½“å‰å‘ä¸Šå±‚çš„æ ˆå¸§æ•°ï¼Œ0 ä»£è¡¨å½“å‰å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ &lt;code>runtime.Caller&lt;/code> çš„å‡½æ•°ï¼Œ1 ä»£è¡¨ä¸Šä¸€å±‚è°ƒç”¨è€…ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p>
&lt;p>å› ä¸ºå‡½æ•°è°ƒç”¨é“¾ä¸º &lt;code>main.go -&amp;gt; log.Print -&amp;gt; std.Output -&amp;gt; runtime.Caller&lt;/code>ï¼Œæ‰€ä»¥ &lt;code>skip&lt;/code> å€¼å³ä¸º 2ï¼š&lt;/p>
&lt;ul>
&lt;li>0: è¡¨ç¤º &lt;code>std.Output&lt;/code> ä¸­è°ƒç”¨ &lt;code>runtime.Caller&lt;/code> æ‰€åœ¨çš„æºç æ–‡ä»¶å’Œè¡Œå·ã€‚&lt;/li>
&lt;li>1: è¡¨ç¤º &lt;code>log.Print&lt;/code> ä¸­è°ƒç”¨ &lt;code>std.Output&lt;/code> æ‰€åœ¨çš„æºç æ–‡ä»¶å’Œè¡Œå·ã€‚&lt;/li>
&lt;li>2: è¡¨ç¤º &lt;code>main.go&lt;/code> ä¸­è°ƒç”¨ &lt;code>log.Print&lt;/code> æ‰€åœ¨çš„æºç æ–‡ä»¶å’Œè¡Œå·ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™æ ·å½“ä»£ç å‡ºç°é—®é¢˜æ—¶ï¼Œå°±èƒ½æ ¹æ®æ—¥å¿—ä¸­è®°å½•çš„å‡½æ•°è°ƒç”¨æ ˆæ¥æ‰¾åˆ°æŠ¥é”™çš„æºç ä½ç½®äº†ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œå‰æ–‡ä»‹ç»è¿‡ä¸‰ä¸ªè®¾ç½® &lt;code>Logger&lt;/code> å¯¹è±¡å±æ€§çš„æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ &lt;code>SetOutput&lt;/code>ã€&lt;code>SetPrefix&lt;/code>ã€&lt;code>SetFlags&lt;/code>ï¼Œå…¶å®è¿™ä¸‰ä¸ªæ–¹æ³•å„è‡ªè¿˜æœ‰ä¸ä¹‹å¯¹åº”çš„è·å–ç›¸åº”å±æ€§çš„æ–¹æ³•ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Flags&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SetFlags&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">flag&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flag&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flag&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Prefix&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prefix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SetPrefix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">prefix&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prefix&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">prefix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Writer&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">out&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SetOutput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">out&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">w&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isDiscard&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">int32&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">w&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Discard&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isDiscard&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">atomic&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StoreInt32&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isDiscard&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">isDiscard&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶å®å°±æ˜¯é’ˆå¯¹æ¯ä¸ªç§æœ‰å±æ€§ï¼Œå®šä¹‰äº† &lt;code>getter&lt;/code>ã€&lt;code>setter&lt;/code> æ–¹æ³•ï¼Œå¹¶ä¸”æ¯ä¸ªæ–¹æ³•å†…éƒ¨ä¸ºäº†ä¿è¯å¹¶å‘å®‰å…¨ï¼Œéƒ½è¿›è¡Œäº†åŠ é”æ“ä½œã€‚&lt;/p>
&lt;p>å½“ç„¶ï¼Œlog åŒ…çº§åˆ«çš„å‡½æ•°ï¼Œä¹Ÿå°‘ä¸äº†è¿™å‡ ä¸ªåŠŸèƒ½ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">std&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">SetOutput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetOutput&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Flags&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Flags&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">SetFlags&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">flag&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetFlags&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Prefix&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Prefix&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">SetPrefix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">prefix&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SetPrefix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">prefix&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Writer&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Writer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">calldepth&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">std&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Output&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">calldepth&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// +1 for this frame.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è‡³æ­¤ï¼Œlog åŒ…çš„å…¨éƒ¨ä»£ç æˆ‘ä»¬å°±ä¸€èµ·èµ°è¯»å®Œæˆäº†ã€‚&lt;/p>
&lt;p>æ€»ç»“ä¸€ä¸‹ï¼šlog åŒ…ä¸»è¦è®¾è®¡äº† &lt;code>Logger&lt;/code> å¯¹è±¡å’Œå…¶æ–¹æ³•ï¼Œå¹¶ä¸”ä¸ºäº†å¼€ç®±å³ç”¨ï¼Œåœ¨åŒ…çº§åˆ«åˆå¯¹å¤–æä¾›äº†é»˜è®¤çš„ &lt;code>Logger&lt;/code> å¯¹è±¡ &lt;code>std&lt;/code> å’Œä¸€äº›åŒ…çº§åˆ«çš„å¯¹å¤–å‡½æ•°ã€‚&lt;code>Logger&lt;/code> å¯¹è±¡çš„æ–¹æ³•ï¼Œå’ŒåŒ…çº§åˆ«çš„å‡½æ•°åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œç­¾åä¸€æ ·ï¼Œè¿™æ ·å°±å¤§å¤§é™ä½äº†ä½¿ç”¨éš¾åº¦ã€‚å¹¶ä¸”logåŒ…æ˜¯å¹¶å‘å®‰å…¨çš„ã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨å»ºè®®">
&lt;a href="#%e4%bd%bf%e7%94%a8%e5%bb%ba%e8%ae%ae" class="header-anchor">#&lt;/a>
ä½¿ç”¨å»ºè®®
&lt;/h2>&lt;p>å…³äº log åŒ…çš„ä½¿ç”¨ï¼Œæˆ‘è¿˜æœ‰å‡ æ¡å»ºè®®åˆ†äº«ç»™ä½ ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>log é»˜è®¤ä¸æ”¯æŒ &lt;code>Debug&lt;/code>ã€&lt;code>Info&lt;/code>ã€&lt;code>Warn&lt;/code> ç­‰æ›´ç»†ç²’åº¦çº§åˆ«çš„æ—¥å¿—è¾“å‡ºæ–¹æ³•ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºå¤šä¸ª &lt;code>Logger&lt;/code> å¯¹è±¡çš„æ–¹å¼æ¥å®ç°ï¼Œåªéœ€è¦ç»™æ¯ä¸ª &lt;code>Logger&lt;/code> å¯¹è±¡æŒ‡å®šä¸åŒçš„æ—¥å¿—å‰ç¼€å³å¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">loggerDebug&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;[Debug]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LstdFlags&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">loggerInfo&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;[Info]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LstdFlags&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">loggerWarn&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;[Warn]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LstdFlags&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">loggerError&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;[Error]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LstdFlags&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>log åŒ…ä½œä¸º Go æ ‡å‡†åº“ï¼Œä»…æ”¯æŒæ—¥å¿—çš„åŸºæœ¬åŠŸèƒ½ï¼Œä¸æ”¯æŒè®°å½•ç»“æ„åŒ–æ—¥å¿—ã€æ—¥å¿—åˆ‡å‰²ã€Hook ç­‰é«˜çº§åŠŸèƒ½ï¼Œæ‰€ä»¥æ›´é€‚åˆå°å‹é¡¹ç›®ä½¿ç”¨ï¼Œæ¯”å¦‚ä¸€ä¸ªå•æ–‡ä»¶çš„è„šæœ¬ã€‚å¯¹äºä¸­å¤§å‹é¡¹ç›®ï¼Œåˆ™æ¨èä½¿ç”¨ä¸€äº›ä¸»æµçš„ç¬¬ä¸‰æ–¹æ—¥å¿—åº“ï¼Œå¦‚ &lt;a class="link" href="https://github.com/sirupsen/logrus" target="_blank" rel="noopener"
>logrus&lt;/a>ã€&lt;a class="link" href="https://github.com/uber-go/zap" target="_blank" rel="noopener"
>zap&lt;/a>ã€&lt;a class="link" href="https://github.com/golang/glog" target="_blank" rel="noopener"
>glog&lt;/a> ç­‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦å¤–ï¼Œå¦‚æœä½ å¯¹ Go æ ‡å‡†æ—¥å¿—åº“æœ‰æ‰€æœŸå¾…ï¼ŒGo å®˜æ–¹è¿˜æ‰“é€ äº†å¦ä¸€ä¸ªæ—¥å¿—åº“ &lt;a class="link" href="https://github.com/golang/exp/tree/master/slog" target="_blank" rel="noopener"
>slog&lt;/a> ç°å·²è¿›å…¥å®éªŒé˜¶æ®µï¼Œå¦‚æœé¡¹ç›®å‘å±•é¡ºåˆ©ï¼Œå°†å¯èƒ½æˆä¸º log åŒ…çš„æ›¿ä»£å“ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡æˆ‘ä¸è¯»è€…ä¸€èµ·æ·±å…¥æ¢ç©¶äº† Go log æ ‡å‡†åº“ï¼Œé¦–å…ˆå‘å¤§å®¶ä»‹ç»äº† log åŒ…å¦‚ä½•ä½¿ç”¨ï¼Œæ¥ç€åˆå¸¦é¢†å¤§å®¶ä¸€èµ·èµ°è¯»äº† log åŒ…çš„æºç ï¼Œæœ€åæˆ‘ä¹Ÿç»™å‡ºäº†ä¸€äº›è‡ªå·±å¯¹ log åŒ…çš„ä½¿ç”¨å»ºè®®ã€‚&lt;/p>
&lt;blockquote>
&lt;p>å‚è€ƒï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://github.com/golang/go/tree/go1.19.4/src/log" target="_blank" rel="noopener"
>Go log æºç &lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2020/02/07/godailylib/log/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ log&lt;/a>&lt;/li>
&lt;li>æ¬è¿è‡ª&lt;a class="link" href="https://jianghushinian.cn/2023/03/11/dive-into-the-go-log-standard-library/" target="_blank" rel="noopener"
>æ·±å…¥æ¢ç©¶ Go log æ ‡å‡†åº“&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote></description></item><item><title>Goå¸¸è§è®¾è®¡æ¨¡å¼ï¼šé€‰é¡¹æ¨¡å¼</title><link>https://arlettebrook.github.io/p/go%E5%B8%B8%E8%A7%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%80%89%E9%A1%B9%E6%A8%A1%E5%BC%8F/</link><pubDate>Thu, 25 Apr 2024 23:22:54 +0800</pubDate><guid>https://arlettebrook.github.io/p/go%E5%B8%B8%E8%A7%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%80%89%E9%A1%B9%E6%A8%A1%E5%BC%8F/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>åœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œæœ‰äº›åœºæ™¯æ˜¯æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°çš„ï¼Œè½¯ä»¶è¡Œä¸šçš„å…ˆè¡Œè€…ä»¬å¸®æˆ‘ä»¬æ€»ç»“äº†ä¸€äº›è§£å†³å¸¸è§åœºæ™¯ç¼–ç é—®é¢˜çš„æœ€ä½³å®è·µï¼Œäºæ˜¯å°±æœ‰äº†è®¾è®¡æ¨¡å¼ã€‚é€‰é¡¹æ¨¡å¼åœ¨ Go è¯­è¨€å¼€å‘ä¸­ä¼šç»å¸¸ç”¨åˆ°ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹é€‰é¡¹æ¨¡å¼çš„åº”ç”¨ã€‚&lt;/p>
&lt;p>ç†Ÿæ‚‰ Python å¼€å‘çš„åŒå­¦éƒ½çŸ¥é“ï¼ŒPython æœ‰é»˜è®¤å‚æ•°çš„å­˜åœ¨ï¼Œä½¿å¾—æˆ‘ä»¬åœ¨å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ¥é€‰æ‹©æ€§çš„è¦†ç›–æŸäº›é»˜è®¤å‚æ•°ï¼Œä»¥æ­¤æ¥å†³å®šå¦‚ä½•å®ä¾‹åŒ–å¯¹è±¡ã€‚å½“ä¸€ä¸ªå¯¹è±¡æœ‰å¤šä¸ªé»˜è®¤å‚æ•°æ—¶ï¼Œè¿™ä¸ªç‰¹æ€§éå¸¸å¥½ç”¨ï¼Œèƒ½å¤Ÿä¼˜é›…çš„ç®€åŒ–ä»£ç ã€‚&lt;/p>
&lt;p>è€Œ Go è¯­è¨€ä»è¯­æ³•ä¸Šæ˜¯ä¸æ”¯æŒé»˜è®¤å‚æ•°çš„ï¼Œæ‰€ä»¥ä¸ºäº†å®ç°æ—¢èƒ½é€šè¿‡é»˜è®¤å‚æ•°åˆ›å»ºå¯¹è±¡ï¼Œåˆèƒ½é€šè¿‡ä¼ é€’è‡ªå®šä¹‰å‚æ•°åˆ›å»ºå¯¹è±¡ï¼Œæˆ‘ä»¬å°±éœ€è¦é€šè¿‡ä¸€äº›ç¼–ç¨‹æŠ€å·§æ¥å®ç°ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="é€šè¿‡å¤šæ„é€ å‡½æ•°å®ç°">
&lt;a href="#%e9%80%9a%e8%bf%87%e5%a4%9a%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e5%ae%9e%e7%8e%b0" class="header-anchor">#&lt;/a>
é€šè¿‡å¤šæ„é€ å‡½æ•°å®ç°
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultAddr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultPort&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Server&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewServer&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Server&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">defaultAddr&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">defaultPort&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewServerWithOptions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">addr&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">port&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Server&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">addr&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">port&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewServer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewServerWithOptions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">8001&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// &amp;amp;{127.0.0.1 8000}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// &amp;amp;{localhost 8001}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæˆ‘ä»¬ä¸º &lt;code>Server&lt;/code> ç»“æ„ä½“å®ç°äº†ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œå…¶ä¸­ &lt;code>NewServer&lt;/code> æ— éœ€ä¼ é€’å‚æ•°å³å¯ç›´æ¥è¿”å› &lt;code>Server&lt;/code> å¯¹è±¡ï¼Œ&lt;code>NewServerWithOptions&lt;/code> åˆ™éœ€è¦ä¼ é€’ &lt;code>addr&lt;/code> å’Œ &lt;code>port&lt;/code> ä¸¤ä¸ªå‚æ•°æ¥æ„é€  &lt;code>Server&lt;/code> å¯¹è±¡ã€‚å½“æˆ‘ä»¬æ— éœ€å¯¹ &lt;code>Server&lt;/code> è¿›è¡Œå®šåˆ¶ï¼Œé€šè¿‡é»˜è®¤å‚æ•°åˆ›å»ºçš„å¯¹è±¡å³å¯æ»¡è¶³éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>NewServer&lt;/code> æ¥ç”Ÿæˆå¯¹è±¡ï¼ˆ&lt;code>s1&lt;/code>ï¼‰ï¼Œè€Œå½“æˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œå®šåˆ¶æ—¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ &lt;code>NewServerWithOptions&lt;/code> æ¥ç”Ÿæˆå¯¹è±¡ï¼ˆ&lt;code>s2&lt;/code>ï¼‰ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="é€šè¿‡é»˜è®¤å‚æ•°é€‰é¡¹å®ç°">
&lt;a href="#%e9%80%9a%e8%bf%87%e9%bb%98%e8%ae%a4%e5%8f%82%e6%95%b0%e9%80%89%e9%a1%b9%e5%ae%9e%e7%8e%b0" class="header-anchor">#&lt;/a>
é€šè¿‡é»˜è®¤å‚æ•°é€‰é¡¹å®ç°
&lt;/h2>&lt;p>å¦å¤–ä¸€ç§å®ç°é»˜è®¤å‚æ•°çš„æ–¹æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè¦ç”Ÿæˆçš„ç»“æ„ä½“å¯¹è±¡å®šä¹‰ä¸€ä¸ªé€‰é¡¹ç»“æ„ä½“ï¼Œç”¨æ¥ç”Ÿæˆè¦åˆ›å»ºå¯¹è±¡çš„é»˜è®¤å‚æ•°ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultAddr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultPort&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Server&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ServerOptions&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewServerOptions&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ServerOptions&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ServerOptions&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">defaultAddr&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">defaultPort&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewServerWithOptions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opts&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ServerOptions&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Server&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">opts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Addr&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">opts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Port&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewServerWithOptions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">NewServerOptions&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewServerWithOptions&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ServerOptions&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8001&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// &amp;amp;{127.0.0.1 8000}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// &amp;amp;{localhost 8001}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬ä¸º &lt;code>Server&lt;/code> ç»“æ„ä½“ä¸“é—¨å®ç°äº†ä¸€ä¸ª &lt;code>ServerOptions&lt;/code> ç”¨æ¥ç”Ÿæˆé»˜è®¤å‚æ•°ï¼Œè°ƒç”¨ &lt;code>NewServerOptions&lt;/code> å‡½æ•°å³å¯è·å¾—é»˜è®¤å‚æ•°é…ç½®ï¼Œæ„é€ å‡½æ•° &lt;code>NewServerWithOptions&lt;/code> æ¥æ”¶ä¸€ä¸ª &lt;code>*ServerOptions&lt;/code> ç±»å‹ä½œä¸ºå‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†è°ƒç”¨ &lt;code>NewServerOptions&lt;/code> å‡½æ•°çš„è¿”å›å€¼ä¼ é€’ç»™ &lt;code>NewServerWithOptions&lt;/code> æ¥å®ç°é€šè¿‡é»˜è®¤å‚æ•°ç”Ÿæˆå¯¹è±¡ï¼ˆ&lt;code>s1&lt;/code>ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ‰‹åŠ¨æ„é€  &lt;code>ServerOptions&lt;/code> é…ç½®æ¥ç”Ÿæˆå®šåˆ¶å¯¹è±¡ï¼ˆ&lt;code>s2&lt;/code>ï¼‰ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="é€šè¿‡é€‰é¡¹æ¨¡å¼å®ç°">
&lt;a href="#%e9%80%9a%e8%bf%87%e9%80%89%e9%a1%b9%e6%a8%a1%e5%bc%8f%e5%ae%9e%e7%8e%b0" class="header-anchor">#&lt;/a>
é€šè¿‡é€‰é¡¹æ¨¡å¼å®ç°
&lt;/h2>&lt;p>ä»¥ä¸Šä¸¤ç§æ–¹å¼è™½ç„¶éƒ½èƒ½å¤Ÿå®ŒæˆåŠŸèƒ½ï¼Œä½†å®ç°ä¸Šå´éƒ½ä¸å¤Ÿä¼˜é›…ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹å¦‚ä½•é€šè¿‡é€‰é¡¹æ¨¡å¼æ›´ä¼˜é›…çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultAddr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;127.0.0.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultPort&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Server&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ServerOptions&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ServerOption&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ServerOptions&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">FuncServerOption&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">f&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ServerOptions&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">fo&lt;/span> &lt;span class="nx">FuncServerOption&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">option&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ServerOptions&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">option&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">WithAddr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">addr&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">ServerOption&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">FuncServerOption&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">f&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">options&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ServerOptions&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">options&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Addr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">addr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">WithPort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">port&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">ServerOption&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">FuncServerOption&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">f&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">options&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ServerOptions&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">options&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">port&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewServer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opts&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">ServerOption&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">options&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ServerOptions&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">defaultAddr&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">defaultPort&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">opt&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">opts&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">options&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Server&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Addr&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">options&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Addr&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">options&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Port&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s1&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewServer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewServer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">WithAddr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">WithPort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8001&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s3&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewServer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">WithPort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8001&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// &amp;amp;{127.0.0.1 8000}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// &amp;amp;{localhost 8001}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// &amp;amp;{127.0.0.1 8001}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹ä¸€çœ‹ï¼Œæˆ‘ä»¬çš„ä»£ç å¤æ‚äº†å¾ˆå¤šï¼Œä½†å…¶å®éƒ½æ˜¯å®šä¹‰ä¸Šçš„å¤æ‚ï¼Œè°ƒç”¨æ„é€ å‡½æ•°ç”Ÿæˆå¯¹è±¡çš„ä»£ç å¤æ‚åº¦æ˜¯æ²¡æœ‰æ”¹å˜çš„ã€‚&lt;/p>
&lt;p>åœ¨è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº† &lt;code>ServerOptions&lt;/code> ç»“æ„ä½“ç”¨æ¥é…ç½®é»˜è®¤å‚æ•°ï¼Œå› ä¸ºè¿™é‡Œ &lt;code>Addr&lt;/code> å’Œ &lt;code>Port&lt;/code> éƒ½æœ‰é»˜è®¤å‚æ•°ï¼Œæ‰€ä»¥ &lt;code>ServerOptions&lt;/code> çš„å®šä¹‰å’Œ &lt;code>Server&lt;/code> å®šä¹‰æ˜¯ä¸€æ ·çš„ï¼Œä½†æœ‰ä¸€å®šå¤æ‚æ€§çš„ç»“æ„ä½“ä¸­å¯èƒ½ä¼šæœ‰äº›å‚æ•°æ²¡æœ‰é»˜è®¤å‚æ•°ï¼Œå¿…é¡»è®©ç”¨æˆ·æ¥é…ç½®ï¼Œè¿™æ—¶ &lt;code>ServerOptions&lt;/code> çš„å­—æ®µå°±ä¼šå°‘ä¸€äº›ï¼Œå¤§å®¶å¯ä»¥æŒ‰éœ€å®šä¹‰ã€‚&lt;/p>
&lt;p>åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸€ä¸ª &lt;code>ServerOption&lt;/code> æ¥å£å’Œå®ç°äº†æ­¤æ¥å£çš„ &lt;code>FuncServerOption&lt;/code> ç»“æ„ä½“ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯è®©æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡ &lt;code>apply&lt;/code> æ–¹æ³•ä¸º &lt;code>ServerOptions&lt;/code> ç»“æ„ä½“å•ç‹¬é…ç½®æŸé¡¹å‚æ•°ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥åˆ†åˆ«ä¸ºæ¯ä¸ªé»˜è®¤å‚æ•°éƒ½å®šä¹‰ä¸€ä¸ª &lt;code>WithXXX&lt;/code> å‡½æ•°ç”¨æ¥é…ç½®å‚æ•°ï¼Œå¦‚è¿™é‡Œå®šä¹‰çš„ &lt;code>WithAddr&lt;/code> å’Œ &lt;code>WithPort&lt;/code> ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥é€šè¿‡è°ƒç”¨ &lt;code>WithXXX&lt;/code> å‡½æ•°æ¥å®šåˆ¶éœ€è¦è¦†ç›–çš„é»˜è®¤å‚æ•°ã€‚&lt;/p>
&lt;p>æ­¤æ—¶é»˜è®¤å‚æ•°å®šä¹‰åœ¨æ„é€ å‡½æ•° &lt;code>NewServer&lt;/code> ä¸­ï¼Œæ„é€ å‡½æ•°çš„æ¥æ”¶ä¸€ä¸ªä¸å®šé•¿å‚æ•°ï¼Œç±»å‹ä¸º &lt;code>ServerOption&lt;/code>ï¼Œåœ¨æ„é€ å‡½æ•°å†…éƒ¨é€šè¿‡ä¸€ä¸ª &lt;code>for&lt;/code> å¾ªç¯è°ƒç”¨æ¯ä¸ªä¼ è¿›æ¥çš„ &lt;code>ServerOption&lt;/code> å¯¹è±¡çš„ &lt;code>apply&lt;/code> æ–¹æ³•ï¼Œå°†ç”¨æˆ·é…ç½®çš„å‚æ•°ä¾æ¬¡èµ‹å€¼ç»™æ„é€ å‡½æ•°å†…éƒ¨çš„é»˜è®¤å‚æ•°å¯¹è±¡ &lt;code>options&lt;/code> ä¸­ï¼Œä»¥æ­¤æ¥æ›¿æ¢é»˜è®¤å‚æ•°ï¼Œ&lt;code>for&lt;/code> å¾ªç¯æ‰§è¡Œå®Œæˆåï¼Œå¾—åˆ°çš„ &lt;code>options&lt;/code> å¯¹è±¡å°†æ˜¯æœ€ç»ˆé…ç½®ï¼Œå°†å…¶å±æ€§ä¾æ¬¡èµ‹å€¼ç»™ &lt;code>Server&lt;/code> å³å¯ç”Ÿæˆæ–°çš„å¯¹è±¡ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>é€šè¿‡ &lt;code>s2&lt;/code> å’Œ &lt;code>s3&lt;/code> çš„æ‰“å°ç»“æœå¯ä»¥å‘ç°ï¼Œä½¿ç”¨é€‰é¡¹æ¨¡å¼å®ç°çš„æ„é€ å‡½æ•°æ›´åŠ çµæ´»ï¼Œç›¸è¾ƒäºå‰ä¸¤ç§å®ç°ï¼Œé€‰é¡¹æ¨¡å¼ä¸­æˆ‘ä»¬å¯ä»¥è‡ªç”±çš„æ›´æ”¹å…¶ä¸­ä»»æ„ä¸€é¡¹æˆ–å¤šé¡¹é»˜è®¤é…ç½®ã€‚&lt;/p>
&lt;p>è™½ç„¶é€‰é¡¹æ¨¡å¼ç¡®å®ä¼šå¤šå†™ä¸€äº›ä»£ç ï¼Œä½†å¤šæ•°æƒ…å†µä¸‹è¿™æ˜¯å€¼å¾—çš„ï¼ŒGoogle çš„ &lt;code>gRPC&lt;/code> æ¡†æ¶ Go è¯­è¨€å®ç°ä¸­åˆ›å»º &lt;code>gRPC&lt;/code> server çš„æ„é€ å‡½æ•° &lt;a class="link" href="https://github.com/grpc/grpc-go/blob/master/server.go#L561" target="_blank" rel="noopener"
>&lt;code>NewServer&lt;/code>&lt;/a> å°±ä½¿ç”¨äº†é€‰é¡¹æ¨¡å¼ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹ä¸‹å…¶æºç çš„å®ç°æ€æƒ³å…¶å®å’Œè¿™é‡Œçš„ç¤ºä¾‹ç¨‹åºå¦‚å‡ºä¸€è¾™ã€‚&lt;/p>
&lt;p>å¸Œæœ›ä»Šå¤©çš„åˆ†äº«èƒ½å¤Ÿç»™ä½ å¸¦æ¥ä¸€ç‚¹å¸®åŠ©ã€‚&lt;/p>
&lt;blockquote>
&lt;p>åŸæ–‡åœ°å€ï¼š&lt;a class="link" href="https://jianghushinian.cn/2021/12/12/Golang-%E5%B8%B8%E8%A7%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E9%80%89%E9%A1%B9%E6%A8%A1%E5%BC%8F/" target="_blank" rel="noopener"
>Go å¸¸è§è®¾è®¡æ¨¡å¼ä¹‹é€‰é¡¹æ¨¡å¼&lt;/a>&lt;/p>
&lt;/blockquote></description></item><item><title>Goå¸¸è§è®¾è®¡æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼</title><link>https://arlettebrook.github.io/p/go%E5%B8%B8%E8%A7%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</link><pubDate>Thu, 25 Apr 2024 18:00:25 +0800</pubDate><guid>https://arlettebrook.github.io/p/go%E5%B8%B8%E8%A7%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</guid><description>&lt;hr>
&lt;blockquote>
&lt;p>&lt;strong>å•ä¾‹æ¨¡å¼&lt;/strong>æ˜¯è®¾è®¡æ¨¡å¼ä¸­æœ€ç®€å•çš„ä¸€ç§æ¨¡å¼ï¼Œå•ä¾‹æ¨¡å¼èƒ½å¤Ÿç¡®ä¿æ— è®ºå¯¹è±¡è¢«å®ä¾‹åŒ–å¤šå°‘æ¬¡ï¼Œå…¨å±€éƒ½&lt;strong>åªæœ‰ä¸€ä¸ª&lt;/strong>å®ä¾‹å­˜åœ¨ã€‚æ ¹æ®å•ä¾‹æ¨¡å¼çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åº”ç”¨åˆ°å…¨å±€å”¯ä¸€æ€§é…ç½®ã€æ•°æ®åº“è¿æ¥å¯¹è±¡ã€æ–‡ä»¶è®¿é—®å¯¹è±¡ç­‰ã€‚Go è¯­è¨€æœ‰å¤šç§æ–¹å¼å¯ä»¥å®ç°å•ä¾‹æ¨¡å¼ï¼Œæˆ‘ä»¬ä»Šå¤©å°±æ¥ä¸€èµ·å­¦ä¹ ä¸‹ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="é¥¿æ±‰å¼">
&lt;a href="#%e9%a5%bf%e6%b1%89%e5%bc%8f" class="header-anchor">#&lt;/a>
é¥¿æ±‰å¼
&lt;/h2>&lt;p>é¥¿æ±‰å¼å®ç°å•ä¾‹æ¨¡å¼éå¸¸ç®€å•ï¼Œç›´æ¥çœ‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Singleton&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">instance&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Singleton&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">GetSingleton&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Singleton&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">instance&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>singleton&lt;/code> åŒ…åœ¨è¢«å¯¼å…¥æ—¶ä¼šè‡ªåŠ¨åˆå§‹åŒ– &lt;code>instance&lt;/code> å®ä¾‹ï¼Œä½¿ç”¨æ—¶é€šè¿‡è°ƒç”¨ &lt;code>singleton.GetSingleton()&lt;/code> å‡½æ•°å³å¯è·å¾— &lt;code>Singleton&lt;/code> è¿™ä¸ªç»“æ„ä½“çš„å•ä¾‹å¯¹è±¡ã€‚&lt;/p>
&lt;p>ç”±äºå•ä¾‹å¯¹è±¡æ˜¯åœ¨åŒ…åŠ è½½æ—¶ç«‹å³è¢«åˆ›å»ºå‡ºæ¥ï¼Œæ‰€ä»¥ä¹Ÿå°±æœ‰äº†è¿™ä¸ªå½¢è±¡çš„åç§°å«ä½œé¥¿æ±‰å¼ã€‚ä¸ä¹‹å¯¹åº”çš„å¦ä¸€ç§å®ç°æ–¹å¼å«ä½œæ‡’æ±‰å¼ï¼Œå½“å®ä¾‹è¢«ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰ä¼šè¢«åˆ›å»ºã€‚&lt;/p>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡é¥¿æ±‰å¼å®ç°å•ä¾‹æ¨¡å¼å¦‚æ­¤ç®€å•ï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹ä»ä¸è¢«æ¨èä½¿ç”¨ï¼Œå› ä¸ºå¦‚æœå•ä¾‹å®ä¾‹åŒ–æ—¶åˆå§‹åŒ–å†…å®¹è¿‡å¤šï¼Œå¯èƒ½é€ æˆç¨‹åºåŠ è½½ç”¨æ—¶è¾ƒé•¿ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ‡’æ±‰å¼">
&lt;a href="#%e6%87%92%e6%b1%89%e5%bc%8f" class="header-anchor">#&lt;/a>
æ‡’æ±‰å¼
&lt;/h2>&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸‹å¦‚ä½•é€šè¿‡æ‡’æ±‰å¼å®ç°å•ä¾‹æ¨¡å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Singleton&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">instance&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">GetSingleton&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Singleton&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">instance&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">instance&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Singleton&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">instance&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸è¾ƒäºé¥¿æ±‰å¼çš„å®ç°ï¼Œæˆ‘ä»¬æŠŠå®ä¾‹åŒ– &lt;code>Singleton&lt;/code> ç»“æ„ä½“éƒ¨åˆ†çš„ä»£ç ç§»åˆ°äº† &lt;code>GetSingleton()&lt;/code> å‡½æ•°å†…éƒ¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±å°†å¯¹è±¡å®ä¾‹åŒ–çš„æ­¥éª¤å»¶è¿Ÿåˆ°äº† &lt;code>GetSingleton()&lt;/code> è¢«ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ã€‚&lt;/p>
&lt;p>é€šè¿‡ &lt;code>instance == nil&lt;/code> çš„åˆ¤æ–­æ¥å®ç°å•ä¾‹å¹¶ä¸ååˆ†å¯é ï¼Œå½“æœ‰å¤šä¸ª &lt;code>goroutine&lt;/code> åŒæ—¶è°ƒç”¨ &lt;code>GetSingleton()&lt;/code> æ—¶æ— æ³•ä¿è¯å¹¶å‘å®‰å…¨ã€‚&lt;/p>
&lt;h3 id="æ”¯æŒå¹¶å‘çš„å•ä¾‹">
&lt;a href="#%e6%94%af%e6%8c%81%e5%b9%b6%e5%8f%91%e7%9a%84%e5%8d%95%e4%be%8b" class="header-anchor">#&lt;/a>
æ”¯æŒå¹¶å‘çš„å•ä¾‹
&lt;/h3>&lt;p>å¦‚æœä½ ç”¨ Go è¯­è¨€å†™è¿‡å¹¶å‘ç¼–ç¨‹ï¼Œé‚£ä¹ˆåº”è¯¥å¯ä»¥å¾ˆå¿«æƒ³åˆ°è§£å†³æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼å¹¶å‘å®‰å…¨é—®é¢˜çš„æ–¹æ¡ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;sync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Singleton&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">instance&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">mu&lt;/span> &lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Mutex&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">GetSingleton&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Singleton&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">instance&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">instance&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Singleton&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">instance&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å¯¹ä»£ç çš„ä¸»è¦ä¿®æ”¹å°±æ˜¯åœ¨ &lt;code>GetSingleton()&lt;/code> å‡½æ•°æœ€å¼€å§‹åŠ äº†å¦‚ä¸‹ä¸¤è¡Œä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">defer&lt;/span> &lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡åŠ é”çš„æœºåˆ¶ï¼Œå°±å¯ä»¥ä¿è¯è¿™ä¸ªå®ç°å•ä¾‹æ¨¡å¼çš„å‡½æ•°æ˜¯å¹¶å‘å®‰å…¨çš„ã€‚&lt;/p>
&lt;p>ä¸è¿‡è¿™æ ·ä¹Ÿæœ‰äº›é—®é¢˜ï¼Œå› ä¸ºç”¨äº†é”æœºåˆ¶ï¼Œæ¯æ¬¡è°ƒç”¨ &lt;code>GetSingleton()&lt;/code> æ—¶ç¨‹åºéƒ½ä¼šè¿›è¡ŒåŠ é”ã€è§£é”çš„æ­¥éª¤ï¼Œè¿™æ ·ä¼šå¯¼è‡´ç¨‹åºæ€§èƒ½çš„ä¸‹é™ã€‚&lt;/p>
&lt;h3 id="åŒé‡é”å®š">
&lt;a href="#%e5%8f%8c%e9%87%8d%e9%94%81%e5%ae%9a" class="header-anchor">#&lt;/a>
åŒé‡é”å®š
&lt;/h3>&lt;p>åŠ é”å¯¼è‡´ç¨‹åºæ€§èƒ½ä¸‹é™ï¼Œä½†æˆ‘ä»¬åˆä¸å¾—ä¸ç”¨é”æ¥ä¿è¯ç¨‹åºçš„å¹¶å‘å®‰å…¨ï¼Œäºæ˜¯æœ‰äººæƒ³å‡ºäº†åŒé‡é”å®šï¼ˆ&lt;code>Double-Check Locking&lt;/code>ï¼‰çš„æ–¹æ¡ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;sync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Singleton&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">instance&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">mu&lt;/span> &lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Mutex&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">GetSingleton&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Singleton&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">instance&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">instance&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">instance&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Singleton&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">instance&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰€è°“çš„åŒé‡é”å®šå®é™…ä¸Šå°±æ˜¯åœ¨ç¨‹åºåŠ é”å‰åˆåŠ äº†ä¸€å±‚ &lt;code>instance == nil&lt;/code> åˆ¤æ–­ï¼Œè¿™æ ·å°±å…¼é¡¾äº†æ€§èƒ½å’Œå®‰å…¨ä¸¤ä¸ªæ–¹é¢ã€‚&lt;/p>
&lt;p>ä¸è¿‡è¿™æ®µä»£ç çœ‹èµ·æ¥æœ‰äº›å¥‡æ€ªï¼Œæ—¢ç„¶å¤–å±‚å·²ç»åˆ¤æ–­äº† &lt;code>instance == nil&lt;/code>ï¼ŒåŠ é”åå´åˆè¿›è¡Œäº†ç¬¬äºŒæ¬¡ &lt;code>instance == nil&lt;/code> åˆ¤æ–­ã€‚å…¶å®å¤–å±‚çš„ &lt;code>instance == nil&lt;/code> åˆ¤æ–­æ˜¯ä¸ºäº†æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œå› ä¸ºå¦‚æœ &lt;code>instance&lt;/code> å·²ç»å­˜åœ¨ï¼Œåˆ™æ— éœ€è¿›å…¥ &lt;code>if&lt;/code> é€»è¾‘ï¼Œç¨‹åºç›´æ¥è¿”å› &lt;code>instance&lt;/code> å³å¯ã€‚è¿™æ ·å°±å…å»äº†åŸæ¥æ¯æ¬¡è°ƒç”¨ &lt;code>GetSingleton()&lt;/code> éƒ½ä¸Šé”çš„æ“ä½œï¼Œå°†åŠ é”çš„ç²’åº¦æ›´åŠ ç²¾ç»†åŒ–ã€‚è€Œå†…å±‚çš„ &lt;code>instance == nil&lt;/code> åˆ¤æ–­åˆ™æ˜¯è€ƒè™‘äº†å¹¶å‘å®‰å…¨ï¼Œåœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¤šä¸ª &lt;code>goroutine&lt;/code> åŒæ—¶èµ°åˆ°äº†åŠ é”è¿™ä¸€æ­¥ï¼Œå†…å±‚åˆ¤æ–­å°±èµ·åˆ°ä½œç”¨äº†ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="gopher-æƒ¯ç”¨æ–¹æ¡ˆ">
&lt;a href="#gopher-%e6%83%af%e7%94%a8%e6%96%b9%e6%a1%88" class="header-anchor">#&lt;/a>
Gopher æƒ¯ç”¨æ–¹æ¡ˆ
&lt;/h2>&lt;blockquote>
&lt;p>gopheråŸæ„åœ°é¼ ï¼Œåœ¨golang çš„ä¸–ç•Œé‡Œè§£é‡Šä¸º&lt;strong>åœ°é“çš„goç¨‹åºå‘˜&lt;/strong>ã€‚åœ¨å…¶ä»–è¯­è¨€çš„ä¸–ç•Œé‡Œä¹Ÿæœ‰PHPerï¼ŒPythonicçš„è¯´æ³•ï¼Œåè€ŒJavaæ˜¯ä¸ªä¾‹å¤–ã€‚è™½ç„¶ä¹Ÿæœ‰Javaerä¹‹ç±»çš„è¯´æ³•ï¼Œä½†ä¼¼ä¹å¹¶ä¸è¢«è®¤å¯ã€‚è€Œ&lt;strong>åœ°é“&lt;/strong>æˆ–è€…è¯´&lt;strong>é“åœ°&lt;/strong>ï¼Œè¯´çš„æ˜¯gopherå†™çš„ä»£ç æ— ä¸é€éœ²å‡ºgoçš„ç‹¬ç‰¹æ°”æ¯ï¼Œæ¯”å¦‚é¡¹ç›®ç»“æ„ã€å‘½åæ–¹å¼ã€ä»£ç æ ¼å¼ã€ç¼–ç é£æ ¼ã€æ„å»ºæ–¹å¼ç­‰ç­‰ã€‚ç”¨gopherçš„è¯è¯´ï¼Œç”¨goç¼–å†™ä»£ç å°±åƒæ˜¯åœ¨ç”»ä¸€å¹…ä¸­å›½å±±æ°´ç”»ï¼Œæˆå“ç¾ä¸èƒœæ”¶ï¼Œå¿ƒæ—·ç¥æ€¡ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>è™½ç„¶æˆ‘ä»¬é€šè¿‡åŒé‡é”å®šæœºåˆ¶å…¼é¡¾å’Œæ€§èƒ½å’Œå¹¶å‘å®‰å…¨ï¼Œä½†ä»£ç æœ‰äº›ä¸‘é™‹ï¼Œä¸ç¬¦åˆå¹¿å¤§ Gopher çš„æœŸå¾…ã€‚å¥½åœ¨ Go è¯­è¨€åœ¨ &lt;code>sync&lt;/code> åŒ…ä¸­æä¾›äº† &lt;code>Once&lt;/code> æœºåˆ¶èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´åŠ ä¼˜é›…çš„ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;sync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Singleton&lt;/span> &lt;span class="kd">struct&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">instance&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">once&lt;/span> &lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Once&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">GetSingleton&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Singleton&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">once&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Do&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">instance&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Singleton&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">instance&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Once&lt;/code> æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œåœ¨æ‰§è¡Œ &lt;code>Do&lt;/code> æ–¹æ³•çš„å†…éƒ¨é€šè¿‡ &lt;code>atomic&lt;/code> æ“ä½œå’ŒåŠ é”æœºåˆ¶æ¥ä¿è¯å¹¶å‘å®‰å…¨ï¼Œä¸” &lt;code>once.Do&lt;/code> èƒ½å¤Ÿä¿è¯å¤šä¸ª &lt;code>goroutine&lt;/code> åŒæ—¶æ‰§è¡Œæ—¶ &lt;code>&amp;amp;singleton{}&lt;/code> åªè¢«åˆ›å»ºä¸€æ¬¡ã€‚&lt;/p>
&lt;p>å…¶å® &lt;code>Once&lt;/code> å¹¶ä¸ç¥ç§˜ï¼Œå…¶å†…éƒ¨å®ç°è·Ÿä¸Šé¢ä½¿ç”¨çš„åŒé‡é”å®šæœºåˆ¶éå¸¸ç±»ä¼¼ï¼Œåªä¸è¿‡æŠŠ &lt;code>instance == nil&lt;/code> æ¢æˆäº† &lt;code>atomic&lt;/code> æ“ä½œï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹ä¸‹å…¶å¯¹åº”æºç ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>ä»¥ä¸Šå°±æ˜¯ Go è¯­è¨€ä¸­å®ç°å•ä¾‹æ¨¡å¼çš„å‡ ç§å¸¸ç”¨å¥—è·¯ï¼Œç»è¿‡å¯¹æ¯”å¯ä»¥å¾—å‡ºç»“è®ºï¼Œæœ€æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨ &lt;code>once.Do&lt;/code> æ¥å®ç°ï¼Œ&lt;code>sync.Once&lt;/code> åŒ…å¸®æˆ‘ä»¬éšè—äº†éƒ¨åˆ†ç»†èŠ‚ï¼Œå´å¯ä»¥è®©ä»£ç å¯è¯»æ€§å¾—åˆ°å¾ˆå¤§æå‡ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://www.cnblogs.com/laud/p/gopher.html" target="_blank" rel="noopener"
>ä¸ä¸€æ ·çš„goè¯­è¨€-gopher&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://jianghushinian.cn/2022/03/04/Golang-%E5%B8%B8%E8%A7%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" target="_blank" rel="noopener"
>Go å¸¸è§è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>Goè°ƒç”¨å¤–éƒ¨å‘½ä»¤os/execåº“ä»‹ç»</title><link>https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/</link><pubDate>Wed, 24 Apr 2024 23:41:31 +0800</pubDate><guid>https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/</guid><description>&lt;hr>
&lt;h2 id="å¼•å­">
&lt;a href="#%e5%bc%95%e5%ad%90" class="header-anchor">#&lt;/a>
å¼•å­
&lt;/h2>&lt;p>åœ¨å·¥ä½œä¸­ï¼Œæˆ‘æ—¶ä¸æ—¶åœ°ä¼šéœ€è¦åœ¨Goä¸­è°ƒç”¨å¤–éƒ¨å‘½ä»¤ã€‚å‰æ®µæ—¶é—´æˆ‘åšäº†ä¸€ä¸ªå·¥å…·ï¼Œåœ¨é’‰é’‰ç¾¤ä¸­æ·»åŠ äº†ä¸€ä¸ªæœºå™¨äººï¼Œ@è¿™ä¸ªæœºå™¨äººå¯ä»¥è®©å®ƒæ‰§è¡Œä¸€äº›å†™å¥½çš„è„šæœ¬ç¨‹åºå®ŒæˆæŒ‡å®šçš„ä»»åŠ¡ã€‚æœºå™¨äººå€’æ˜¯ä¸éš¾ï¼Œç…§ç€é’‰é’‰å¼€å‘è€…æ–‡æ¡£æ·»åŠ å¥½æœºå™¨äººï¼Œç„¶å@è¿™ä¸ªæœºå™¨äººå°±ä¼šå‘ä¸€ä¸ªä½ æŒ‡å®šçš„æœåŠ¡å™¨å‘é€ä¸€ä¸ªPOSTè¯·æ±‚ï¼Œè¯·æ±‚ä¸­ä¼šé™„å¸¦æ–‡æœ¬æ¶ˆæ¯ã€‚æ‰€ä»¥æˆ‘è¦åšçš„å°±æ˜¯æ­ä¸€ä¸ªWebæœåŠ¡å™¨ï¼Œå¯ä»¥ç”¨goåŸç”Ÿçš„net/httpåŒ…ï¼Œä¹Ÿå¯ä»¥ç”¨gin/fasthttp/fiberè¿™äº›Webæ¡†æ¶ã€‚æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œæ£€æŸ¥é™„å¸¦æ–‡æœ¬ä¸­çš„å…³é”®å­—å»è°ƒç”¨å¯¹åº”çš„ç¨‹åºï¼Œç„¶åè¿”å›ç»“æœã€‚&lt;/p>
&lt;p>goæ ‡å‡†åº“ä¸­çš„os/execåŒ…å¯¹è°ƒç”¨å¤–éƒ¨ç¨‹åºæä¾›äº†æ”¯æŒï¼Œæœ¬æ–‡è¯¦ç»†ä»‹ç»os/execçš„ä½¿ç”¨å§¿åŠ¿ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="è¿è¡Œå‘½ä»¤">
&lt;a href="#%e8%bf%90%e8%a1%8c%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
è¿è¡Œå‘½ä»¤
&lt;/h2>&lt;p>Linuxä¸­æœ‰ä¸ª&lt;code>cal&lt;/code>å‘½ä»¤ï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºæŒ‡å®šå¹´ã€æœˆçš„æ—¥å†ï¼Œå¦‚æœä¸æŒ‡å®šå¹´ã€æœˆï¼Œé»˜è®¤ä¸ºå½“å‰æ—¶é—´å¯¹åº”çš„å¹´æœˆã€‚å¦‚æœä½¿ç”¨çš„æ˜¯Windowsï¼Œæ¨èå®‰è£…msys2ï¼Œè¿™ä¸ªè½¯ä»¶åŒ…å«äº†ç»å¤§å¤šæ•°çš„Linuxå¸¸ç”¨å‘½ä»¤ã€‚&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235145370.png"
width="508"
height="714"
srcset="https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235145370_hube3381562c708eec75f7ef34fbf2fa5a_102162_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235145370_hube3381562c708eec75f7ef34fbf2fa5a_102162_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240424235145370"
class="gallery-image"
data-flex-grow="71"
data-flex-basis="170px"
>&lt;/p>
&lt;p>é‚£ä¹ˆï¼Œåœ¨Goä»£ç ä¸­æ€ä¹ˆè°ƒç”¨è¿™ä¸ªå‘½ä»¤å‘¢ï¼Ÿå…¶å®ä¹Ÿå¾ˆç®€å•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆï¼Œæˆ‘ä»¬è°ƒç”¨&lt;code>exec.Command&lt;/code>ä¼ å…¥å‘½ä»¤åï¼Œåˆ›å»ºä¸€ä¸ªå‘½ä»¤å¯¹è±¡&lt;code>exec.Cmd&lt;/code>ã€‚æ¥ç€è°ƒç”¨è¯¥å‘½ä»¤å¯¹è±¡çš„&lt;code>Run()&lt;/code>æ–¹æ³•è¿è¡Œå®ƒã€‚&lt;/p>
&lt;p>å¦‚æœä½ å®é™…è¿è¡Œäº†ï¼Œä½ ä¼šå‘ç°ä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿï¼Œå“ˆå“ˆã€‚äº‹å®ä¸Šï¼Œä½¿ç”¨os/execæ‰§è¡Œå‘½ä»¤ï¼Œæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯é»˜è®¤ä¼šè¢«ä¸¢å¼ƒã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ˜¾ç¤ºè¾“å‡º">
&lt;a href="#%e6%98%be%e7%a4%ba%e8%be%93%e5%87%ba" class="header-anchor">#&lt;/a>
æ˜¾ç¤ºè¾“å‡º
&lt;/h2>&lt;p>&lt;code>exec.Cmd&lt;/code>å¯¹è±¡æœ‰ä¸¤ä¸ªå­—æ®µ&lt;code>Stdout&lt;/code>å’Œ&lt;code>Stderr&lt;/code>ï¼Œç±»å‹çš†ä¸º&lt;code>io.Writer&lt;/code>ã€‚æˆ‘ä»¬å¯ä»¥å°†ä»»æ„å®ç°äº†&lt;code>io.Writer&lt;/code>æ¥å£çš„ç±»å‹å®ä¾‹èµ‹ç»™è¿™ä¸¤ä¸ªå­—æ®µï¼Œç»§è€Œå®ç°æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯çš„é‡å®šå‘ã€‚&lt;code>io.Writer&lt;/code>æ¥å£åœ¨ Go æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“ä¸­éšå¤„å¯è§ï¼Œä¾‹å¦‚&lt;code>*os.File&lt;/code>ã€&lt;code>*bytes.Buffer&lt;/code>ã€&lt;code>net.Conn&lt;/code>ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ã€å†…å­˜ç¼“å­˜ç”šè‡³å‘é€åˆ°ç½‘ç»œä¸­ã€‚&lt;/p>
&lt;h3 id="æ˜¾ç¤ºåˆ°æ ‡å‡†è¾“å‡º">
&lt;a href="#%e6%98%be%e7%a4%ba%e5%88%b0%e6%a0%87%e5%87%86%e8%be%93%e5%87%ba" class="header-anchor">#&lt;/a>
æ˜¾ç¤ºåˆ°æ ‡å‡†è¾“å‡º
&lt;/h3>&lt;p>å°†&lt;code>exec.Cmd&lt;/code>å¯¹è±¡çš„&lt;code>Stdout&lt;/code>å’Œ&lt;code>Stderr&lt;/code>è¿™ä¸¤ä¸ªå­—æ®µéƒ½è®¾ç½®ä¸º&lt;code>os.Stdout&lt;/code>ï¼Œé‚£ä¹ˆè¾“å‡ºå†…å®¹éƒ½å°†æ˜¾ç¤ºåˆ°æ ‡å‡†è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºã€‚æˆ‘åœ¨git bashè¿è¡Œï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235225378.png"
width="382"
height="319"
srcset="https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235225378_hu31e809d703e74fc17059636a2a115931_49980_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235225378_hu31e809d703e74fc17059636a2a115931_49980_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240424235225378"
class="gallery-image"
data-flex-grow="119"
data-flex-basis="287px"
>&lt;/p>
&lt;p>è¾“å‡ºäº†ä¸­æ–‡ï¼Œæ£€æŸ¥ä¸€ä¸‹ç¯å¢ƒå˜é‡LANGçš„å€¼ï¼Œæœç„¶æ˜¯&lt;code>zh_CN.UTF-8&lt;/code>ã€‚å¦‚æœæƒ³è¾“å‡ºè‹±æ–‡ï¼Œå¯ä»¥å°†ç¯å¢ƒå˜é‡LANGè®¾ç½®ä¸º&lt;code>en_US.UTF-8&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$LANG&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zh_CN.UTF-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>en_US.UTF-8 go run main.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¾—åˆ°è¾“å‡ºï¼š&lt;/p>
&lt;p>&lt;img src="https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235319897.png"
width="596"
height="315"
srcset="https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235319897_hu0800ee0bb4962a236c252d9b19d905cf_57376_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235319897_hu0800ee0bb4962a236c252d9b19d905cf_57376_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240424235319897"
class="gallery-image"
data-flex-grow="189"
data-flex-basis="454px"
>&lt;/p>
&lt;h3 id="è¾“å‡ºåˆ°æ–‡ä»¶">
&lt;a href="#%e8%be%93%e5%87%ba%e5%88%b0%e6%96%87%e4%bb%b6" class="header-anchor">#&lt;/a>
è¾“å‡ºåˆ°æ–‡ä»¶
&lt;/h3>&lt;p>æ‰“å¼€æˆ–åˆ›å»ºæ–‡ä»¶ï¼Œç„¶åå°†æ–‡ä»¶å¥æŸ„èµ‹ç»™&lt;code>exec.Cmd&lt;/code>å¯¹è±¡çš„&lt;code>Stdout&lt;/code>å’Œ&lt;code>Stderr&lt;/code>è¿™ä¸¤ä¸ªå­—æ®µå³å¯å®ç°è¾“å‡ºåˆ°æ–‡ä»¶çš„åŠŸèƒ½ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OpenFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;out.txt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">O_WRONLY&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">O_CREATE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ModePerm&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;os.OpenFile() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">f&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">f&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>os.OpenFile&lt;/code>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼ŒæŒ‡å®š&lt;code>os.O_CREATE&lt;/code>æ ‡å¿—è®©æ“ä½œç³»ç»Ÿåœ¨æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªï¼Œè¿”å›è¯¥æ–‡ä»¶å¯¹è±¡&lt;code>*os.File&lt;/code>ã€‚&lt;code>*os.File&lt;/code>å®ç°äº†&lt;code>io.Writer&lt;/code>æ¥å£ã€‚&lt;/p>
&lt;p>è¿è¡Œç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cat out.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> November &lt;span class="m">2022&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Su Mo Tu We Th Fr Sa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">4&lt;/span> &lt;span class="m">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">6&lt;/span> &lt;span class="m">7&lt;/span> &lt;span class="m">8&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">13&lt;/span> &lt;span class="m">14&lt;/span> &lt;span class="m">15&lt;/span> &lt;span class="m">16&lt;/span> &lt;span class="m">17&lt;/span> &lt;span class="m">18&lt;/span> &lt;span class="m">19&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">20&lt;/span> &lt;span class="m">21&lt;/span> &lt;span class="m">22&lt;/span> &lt;span class="m">23&lt;/span> &lt;span class="m">24&lt;/span> &lt;span class="m">25&lt;/span> &lt;span class="m">26&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">27&lt;/span> &lt;span class="m">28&lt;/span> &lt;span class="m">29&lt;/span> &lt;span class="m">30&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å‘é€åˆ°ç½‘ç»œ">
&lt;a href="#%e5%8f%91%e9%80%81%e5%88%b0%e7%bd%91%e7%bb%9c" class="header-anchor">#&lt;/a>
å‘é€åˆ°ç½‘ç»œ
&lt;/h3>&lt;p>ç°åœ¨æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªæ—¥å†æœåŠ¡ï¼Œæ¥æ”¶å¹´ã€æœˆä¿¡æ¯ï¼Œè¿”å›è¯¥æœˆçš„æ—¥å†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">cal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">year&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">URL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">month&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">URL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;month&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cal&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">month&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">year&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">w&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">w&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/cal&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cal&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ListenAndServe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8080&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œä¸ºäº†ç®€å•ï¼Œé”™è¯¯å¤„ç†éƒ½çœç•¥äº†ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œyearå’Œmonthå‚æ•°éƒ½éœ€è¦åšåˆæ³•æ€§æ ¡éªŒã€‚&lt;code>exec.Command&lt;/code>å‡½æ•°æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å¯å˜å‚æ•°ä½œä¸ºå‘½ä»¤çš„å‚æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">arg&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Cmd&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235532199.png"
width="857"
height="820"
srcset="https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235532199_hua5f23be303f0a3bcae8948fd87547a77_167340_480x0_resize_box_3.png 480w, https://arlettebrook.github.io/p/go%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4os/exec%E5%BA%93%E4%BB%8B%E7%BB%8D/index.assets/image-20240424235532199_hua5f23be303f0a3bcae8948fd87547a77_167340_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="image-20240424235532199"
class="gallery-image"
data-flex-grow="104"
data-flex-basis="250px"
>&lt;/p>
&lt;h3 id="ä¿å­˜åˆ°å†…å­˜å¯¹è±¡ä¸­">
&lt;a href="#%e4%bf%9d%e5%ad%98%e5%88%b0%e5%86%85%e5%ad%98%e5%af%b9%e8%b1%a1%e4%b8%ad" class="header-anchor">#&lt;/a>
ä¿å­˜åˆ°å†…å­˜å¯¹è±¡ä¸­
&lt;/h3>&lt;p>&lt;code>*bytes.Buffer&lt;/code>åŒæ ·ä¹Ÿå®ç°äº†&lt;code>io.Writer&lt;/code>æ¥å£ï¼Œæ•…å¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª&lt;code>*bytes.Buffer&lt;/code>å¯¹è±¡ï¼Œå¹¶å°†å…¶èµ‹ç»™&lt;code>exec.Cmd&lt;/code>çš„&lt;code>Stdout&lt;/code>å’Œ&lt;code>Stderr&lt;/code>è¿™ä¸¤ä¸ªå­—æ®µï¼Œé‚£ä¹ˆå‘½ä»¤æ‰§è¡Œä¹‹åï¼Œè¯¥&lt;code>*bytes.Buffer&lt;/code>å¯¹è±¡ä¸­ä¿å­˜çš„å°±æ˜¯å‘½ä»¤çš„è¾“å‡ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">buf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">buf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> November &lt;span class="m">2022&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Su Mo Tu We Th Fr Sa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">4&lt;/span> &lt;span class="m">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">6&lt;/span> &lt;span class="m">7&lt;/span> &lt;span class="m">8&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">13&lt;/span> &lt;span class="m">14&lt;/span> &lt;span class="m">15&lt;/span> &lt;span class="m">16&lt;/span> &lt;span class="m">17&lt;/span> &lt;span class="m">18&lt;/span> &lt;span class="m">19&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">20&lt;/span> &lt;span class="m">21&lt;/span> &lt;span class="m">22&lt;/span> &lt;span class="m">23&lt;/span> &lt;span class="m">24&lt;/span> &lt;span class="m">25&lt;/span> &lt;span class="m">26&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">27&lt;/span> &lt;span class="m">28&lt;/span> &lt;span class="m">29&lt;/span> &lt;span class="m">30&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œå‘½ä»¤ï¼Œç„¶åå¾—åˆ°è¾“å‡ºçš„å­—ç¬¦ä¸²æˆ–å­—èŠ‚åˆ‡ç‰‡è¿™ç§æ¨¡å¼æ˜¯å¦‚æ­¤çš„æ™®éï¼Œå¹¶ä¸”ä½¿ç”¨ä¾¿åˆ©ï¼Œ&lt;code>os/exec&lt;/code>åŒ…æä¾›äº†ä¸€ä¸ªä¾¿æ·æ–¹æ³•ï¼š&lt;code>CombinedOutput&lt;/code>ã€‚&lt;/p>
&lt;h3 id="è¾“å‡ºåˆ°å¤šä¸ªç›®çš„åœ°">
&lt;a href="#%e8%be%93%e5%87%ba%e5%88%b0%e5%a4%9a%e4%b8%aa%e7%9b%ae%e7%9a%84%e5%9c%b0" class="header-anchor">#&lt;/a>
è¾“å‡ºåˆ°å¤šä¸ªç›®çš„åœ°
&lt;/h3>&lt;p>æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½è¾“å‡ºåˆ°æ–‡ä»¶å’Œç½‘ç»œï¼ŒåŒæ—¶ä¿å­˜åˆ°å†…å­˜å¯¹è±¡ã€‚ä½¿ç”¨goæä¾›çš„&lt;code>io.MultiWriter&lt;/code>å¯ä»¥å¾ˆå®¹æ˜“å®ç°è¿™ä¸ªéœ€æ±‚ã€‚&lt;code>io.MultiWriter&lt;/code>å¾ˆæ–¹ä¾¿åœ°å°†å¤šä¸ª&lt;code>io.Writer&lt;/code>è½¬ä¸ºä¸€ä¸ª&lt;code>io.Writer&lt;/code>ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸Šé¢çš„webç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">cal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">year&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">URL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;year&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">month&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">URL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;month&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OpenFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;out.txt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">O_CREATE&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">O_WRONLY&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ModePerm&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">buf&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mw&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">MultiWriter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">buf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cal&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">month&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">year&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">mw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">mw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è°ƒç”¨&lt;code>io.MultiWriter&lt;/code>å°†å¤šä¸ª&lt;code>io.Writer&lt;/code>æ•´åˆæˆä¸€ä¸ª&lt;code>io.Writer&lt;/code>ï¼Œç„¶åå°†cmdå¯¹è±¡çš„&lt;code>Stdout&lt;/code>å’Œ&lt;code>Stderr&lt;/code>éƒ½èµ‹å€¼ä¸ºè¿™ä¸ª&lt;code>io.Writer&lt;/code>ã€‚è¿™æ ·ï¼Œå‘½ä»¤è¿è¡Œæ—¶äº§å‡ºçš„è¾“å‡ºä¼šåˆ†åˆ«é€å¾€&lt;code>http.ResponseWriter&lt;/code>ã€&lt;code>*os.File&lt;/code>ä»¥åŠ&lt;code>*bytes.Buffer&lt;/code>ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="è¿è¡Œå‘½ä»¤è·å–è¾“å‡º">
&lt;a href="#%e8%bf%90%e8%a1%8c%e5%91%bd%e4%bb%a4%e8%8e%b7%e5%8f%96%e8%be%93%e5%87%ba" class="header-anchor">#&lt;/a>
è¿è¡Œå‘½ä»¤ï¼Œè·å–è¾“å‡º
&lt;/h2>&lt;p>å‰é¢æåˆ°ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦è¿è¡Œå‘½ä»¤ï¼Œè¿”å›è¾“å‡ºã€‚&lt;code>exec.Cmd&lt;/code>å¯¹è±¡æä¾›äº†ä¸€ä¸ªä¾¿æ·æ–¹æ³•ï¼š&lt;code>CombinedOutput()&lt;/code>ã€‚è¯¥æ–¹æ³•è¿è¡Œå‘½ä»¤ï¼Œå°†è¾“å‡ºå†…å®¹ä»¥ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡è¿”å›ä¾¿äºåç»­å¤„ç†ã€‚æ‰€ä»¥ï¼Œä¸Šé¢è·å–è¾“å‡ºçš„ç¨‹åºå¯ä»¥ç®€åŒ–ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">output&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CombinedOutput&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">output&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>So easy!&lt;/p>
&lt;p>&lt;code>CombinedOutput()&lt;/code>æ–¹æ³•çš„å®ç°å¾ˆç®€å•ï¼Œå…ˆå°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°&lt;code>*bytes.Buffer&lt;/code>å¯¹è±¡ï¼Œç„¶åè¿è¡Œç¨‹åºï¼Œæœ€åè¿”å›è¯¥å¯¹è±¡ä¸­çš„å­—èŠ‚åˆ‡ç‰‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Cmd&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">CombinedOutput&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;exec: Stdout already set&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;exec: Stderr already set&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Buffer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Bytes&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>CombinedOutput&lt;/code>æ–¹æ³•å‰å‡ è¡Œåˆ¤æ–­è¡¨æ˜ï¼Œ&lt;code>Stdout&lt;/code>å’Œ&lt;code>Stderr&lt;/code>å¿…é¡»æ˜¯æœªè®¾ç½®çŠ¶æ€ã€‚è¿™å…¶å®å¾ˆå¥½ç†è§£ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœå·²ç»æ‰“ç®—ä½¿ç”¨&lt;code>CombinedOutput&lt;/code>æ–¹æ³•è·å–è¾“å‡ºå†…å®¹ï¼Œä¸ä¼šå†è‡ªæ‰¾éº»çƒ¦åœ°å†å»è®¾ç½®&lt;code>Stdout&lt;/code>å’Œ&lt;code>Stderr&lt;/code>å­—æ®µäº†ã€‚&lt;/p>
&lt;p>ä¸&lt;code>CombinedOutput&lt;/code>ç±»ä¼¼çš„è¿˜æœ‰&lt;code>Output&lt;/code>æ–¹æ³•ï¼ŒåŒºåˆ«æ˜¯&lt;code>Output&lt;/code>åªä¼šè¿”å›è¿è¡Œå‘½ä»¤äº§å‡ºçš„æ ‡å‡†è¾“å‡ºå†…å®¹ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="åˆ†åˆ«è·å–æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯">
&lt;a href="#%e5%88%86%e5%88%ab%e8%8e%b7%e5%8f%96%e6%a0%87%e5%87%86%e8%be%93%e5%87%ba%e5%92%8c%e6%a0%87%e5%87%86%e9%94%99%e8%af%af" class="header-anchor">#&lt;/a>
åˆ†åˆ«è·å–æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯
&lt;/h2>&lt;p>åˆ›å»ºä¸¤ä¸ª&lt;code>*bytes.Buffer&lt;/code>å¯¹è±¡ï¼Œåˆ†åˆ«èµ‹ç»™&lt;code>exec.Cmd&lt;/code>å¯¹è±¡çš„&lt;code>Stdout&lt;/code>å’Œ&lt;code>Stderr&lt;/code>è¿™ä¸¤ä¸ªå­—æ®µï¼Œç„¶åè¿è¡Œå‘½ä»¤å³å¯åˆ†åˆ«è·å–æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cal&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;15&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;2012&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">stderr&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Buffer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">stdout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stderr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">stderr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;output:\n%s\nerror:\n%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">stdout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">stderr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="æ ‡å‡†è¾“å…¥">
&lt;a href="#%e6%a0%87%e5%87%86%e8%be%93%e5%85%a5" class="header-anchor">#&lt;/a>
æ ‡å‡†è¾“å…¥
&lt;/h2>&lt;p>&lt;code>exec.Cmd&lt;/code>å¯¹è±¡æœ‰ä¸€ä¸ªç±»å‹ä¸º&lt;code>io.Reader&lt;/code>çš„å­—æ®µ&lt;code>Stdin&lt;/code>ã€‚å‘½ä»¤è¿è¡Œæ—¶ä¼šä»è¿™ä¸ª&lt;code>io.Reader&lt;/code>è¯»å–è¾“å…¥ã€‚å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cat&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdin&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBufferString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hello\nworld&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä¸å¸¦å‚æ•°è¿è¡Œ&lt;code>cat&lt;/code>å‘½ä»¤ï¼Œåˆ™è¿›å…¥äº¤äº’æ¨¡å¼ï¼Œ&lt;code>cat&lt;/code>æŒ‰è¡Œè¯»å–è¾“å…¥ï¼Œå¹¶ä¸”åŸæ ·å‘é€åˆ°è¾“å‡ºã€‚&lt;/p>
&lt;p>å†æ¥çœ‹ä¸€ä¸ªå¤æ‚ç‚¹çš„ä¾‹å­ã€‚Goæ ‡å‡†åº“ä¸­&lt;code>compress/bzip2&lt;/code>åŒ…åªæä¾›è§£å‹æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰å‹ç¼©æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Linuxå‘½ä»¤&lt;code>bzip2&lt;/code>å®ç°å‹ç¼©ã€‚&lt;code>bzip2&lt;/code>ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–æ•°æ®ï¼Œå°†å…¶å‹ç¼©ï¼Œå¹¶å‘é€åˆ°æ ‡å‡†è¾“å‡ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">bzipCompress&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">out&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Buffer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;bzip2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;-9&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdin&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">out&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Bytes&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚æ•°&lt;code>-c&lt;/code>è¡¨ç¤ºå‹ç¼©ï¼Œ&lt;code>-9&lt;/code>è¡¨ç¤ºå‹ç¼©ç­‰çº§ï¼Œ9ä¸ºæœ€é«˜ã€‚ä¸ºäº†éªŒè¯å‡½æ•°çš„æ­£ç¡®æ€§ï¼Œå†™ä¸ªç®€å•çš„ç¨‹åºï¼Œå…ˆå‹ç¼©&amp;quot;hello world&amp;quot;å­—ç¬¦ä¸²ï¼Œç„¶åè§£å‹ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å¾—åˆ°åŸæ¥çš„å­—ç¬¦ä¸²ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hello world&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">compressed&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">bzipCompress&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">bzip2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewReader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">compressed&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">decompressed&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ioutil&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadAll&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">decompressed&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç¨‹åºï¼Œè¾“å‡º&amp;quot;hello world&amp;quot;ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="ç¯å¢ƒå˜é‡">
&lt;a href="#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f" class="header-anchor">#&lt;/a>
ç¯å¢ƒå˜é‡
&lt;/h2>&lt;p>ç¯å¢ƒå˜é‡å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¾®è°ƒç¨‹åºçš„è¡Œä¸ºï¼Œå½“ç„¶è¿™éœ€è¦ç¨‹åºçš„æ”¯æŒã€‚ä¾‹å¦‚ï¼Œè®¾ç½®&lt;code>ENV=production&lt;/code>ä¼šæŠ‘åˆ¶è°ƒè¯•æ—¥å¿—çš„è¾“å‡ºã€‚æ¯ä¸ªç¯å¢ƒå˜é‡éƒ½æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ã€‚&lt;code>exec.Cmd&lt;/code>å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªç±»å‹ä¸º&lt;code>[]string&lt;/code>çš„å­—æ®µ&lt;code>Env&lt;/code>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹å®ƒæ¥è¾¾åˆ°æ§åˆ¶å‘½ä»¤è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡çš„ç›®çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os/exec&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;bash&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;./test.sh&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nameEnv&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;NAME=darjun&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ageEnv&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;AGE=18&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newEnv&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Environ&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">nameEnv&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ageEnv&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Env&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">newEnv&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">out&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CombinedOutput&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatalf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;cmd.Run() failed: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">out&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šé¢ä»£ç è·å–ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œç„¶ååˆæ·»åŠ äº†ä¸¤ä¸ªç¯å¢ƒå˜é‡&lt;code>NAME&lt;/code>å’Œ&lt;code>AGE&lt;/code>ã€‚æœ€åä½¿ç”¨&lt;code>bash&lt;/code>è¿è¡Œè„šæœ¬&lt;code>test.sh&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$NAME&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$GOPATH&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¨‹åºè¿è¡Œç»“æœï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">darjun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">D:&lt;span class="se">\w&lt;/span>orkspace&lt;span class="se">\c&lt;/span>ode&lt;span class="se">\g&lt;/span>o
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="æ£€æŸ¥å‘½ä»¤æ˜¯å¦å­˜åœ¨">
&lt;a href="#%e6%a3%80%e6%9f%a5%e5%91%bd%e4%bb%a4%e6%98%af%e5%90%a6%e5%ad%98%e5%9c%a8" class="header-anchor">#&lt;/a>
æ£€æŸ¥å‘½ä»¤æ˜¯å¦å­˜åœ¨
&lt;/h2>&lt;p>ä¸€èˆ¬åœ¨è¿è¡Œå‘½ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬é€šè¿‡å¸Œæœ›èƒ½æ£€æŸ¥è¦è¿è¡Œçš„å‘½ä»¤æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥è¿è¡Œï¼Œå¦åˆ™æç¤ºç”¨æˆ·å®‰è£…æ­¤å‘½ä»¤ã€‚&lt;code>os/exec&lt;/code>åŒ…æä¾›äº†å‡½æ•°&lt;code>LookPath&lt;/code>å¯ä»¥è·å–å‘½ä»¤æ‰€åœ¨ç›®å½•ï¼Œå¦‚æœå‘½ä»¤ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ä¸€ä¸ªerrorã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LookPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ls&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;no cmd ls: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;find ls in path:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LookPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;not-exist&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;no cmd not-exist: %v\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;find not-exist in path:%s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find ls in path:C:&lt;span class="se">\P&lt;/span>rogram Files&lt;span class="se">\G&lt;/span>it&lt;span class="se">\u&lt;/span>sr&lt;span class="se">\b&lt;/span>in&lt;span class="se">\l&lt;/span>s.exe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">no cmd not-exist: exec: &lt;span class="s2">&amp;#34;not-exist&amp;#34;&lt;/span>: executable file not found in %PATH%
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="å°è£…">
&lt;a href="#%e5%b0%81%e8%a3%85" class="header-anchor">#&lt;/a>
å°è£…
&lt;/h2>&lt;p>æ‰§è¡Œå¤–éƒ¨å‘½ä»¤çš„æµç¨‹æ¯”è¾ƒå›ºå®šï¼š&lt;/p>
&lt;ul>
&lt;li>è°ƒç”¨&lt;code>exec.Command()&lt;/code>åˆ›å»ºå‘½ä»¤å¯¹è±¡ï¼›&lt;/li>
&lt;li>è°ƒç”¨&lt;code>Cmd.Run()&lt;/code>æ‰§è¡Œå‘½ä»¤&lt;/li>
&lt;/ul>
&lt;p>å¯ä»¥è‡ªå·±å°è£…æˆä¸€ä¸ªå·¥å…·åŒ…ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ€»ç»“">
&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor">#&lt;/a>
æ€»ç»“
&lt;/h2>&lt;p>æœ¬æ–‡ä»‹ç»äº†ä½¿ç”¨&lt;code>os/exec&lt;/code>è¿™ä¸ªæ ‡å‡†åº“è°ƒç”¨å¤–éƒ¨å‘½ä»¤çš„å„ç§å§¿åŠ¿ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;ol>
&lt;li>Advanced command execution in go with os/exec: &lt;a class="link" href="https://https//blog.kowalczyk.info/article/wOYk/advanced-command-execution-in-go-with-osexec.html" target="_blank" rel="noopener"
>https://blog.kowalczyk.info/article/wOYk/advanced-command-execution-in-go-with-osexec.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2022/11/01/godailylib/osexec/" target="_blank" rel="noopener"
>Goä¸­è°ƒç”¨å¤–éƒ¨å‘½ä»¤çš„å‡ ç§å§¿åŠ¿&lt;/a>æ¬è¿è‡ªè¯¥ç¯‡æ–‡ç« ã€‚&lt;/li>
&lt;/ol></description></item><item><title>Go-homediråº“ä»‹ç»</title><link>https://arlettebrook.github.io/p/go-homedir%E5%BA%93%E4%BB%8B%E7%BB%8D/</link><pubDate>Wed, 24 Apr 2024 22:47:45 +0800</pubDate><guid>https://arlettebrook.github.io/p/go-homedir%E5%BA%93%E4%BB%8B%E7%BB%8D/</guid><description>&lt;hr>
&lt;h2 id="ç®€ä»‹">
&lt;a href="#%e7%ae%80%e4%bb%8b" class="header-anchor">#&lt;/a>
ç®€ä»‹
&lt;/h2>&lt;p>ä»Šå¤©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå¾ˆå°ï¼Œå¾ˆå®ç”¨çš„åº“&lt;a class="link" href="https://github.com/mitchellh/go-homedir" target="_blank" rel="noopener"
>go-homedir&lt;/a>ã€‚é¡¾åæ€ä¹‰ï¼Œ&lt;code>go-homedir&lt;/code>ç”¨æ¥è·å–ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚ å®é™…ä¸Šï¼Œä½¿ç”¨æ ‡å‡†åº“&lt;code>os/user&lt;/code>æˆ–è€…&lt;code>os.UserHomeDir()&lt;/code>æˆ‘ä»¬ä¹Ÿå¯ä»¥å¾—åˆ°è¿™ä¸ªä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os/user&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Current&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Home dir:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">u&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HomeDir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦&lt;code>go-homedir&lt;/code>åº“ï¼Ÿ&lt;/p>
&lt;p>åœ¨ Darwin ç³»ç»Ÿä¸Šï¼Œæ ‡å‡†åº“&lt;code>os/user&lt;/code>çš„ä½¿ç”¨éœ€è¦ cgoã€‚æ‰€ä»¥ï¼Œä»»ä½•ä½¿ç”¨&lt;code>os/user&lt;/code>çš„ä»£ç éƒ½ä¸èƒ½äº¤å‰ç¼–è¯‘ã€‚ ä½†æ˜¯ï¼Œå¤§å¤šæ•°äººä½¿ç”¨&lt;code>os/user&lt;/code>çš„ç›®çš„ä»…ä»…åªæ˜¯æƒ³è·å–ä¸»ç›®å½•ã€‚å› æ­¤ï¼Œ&lt;code>go-homedir&lt;/code>åº“å‡ºç°äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">UserHomeDir&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">env&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">enverr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;HOME&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;$HOME&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GOOS&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;windows&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">env&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">enverr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;USERPROFILE&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;%userprofile%&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;plan9&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">env&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">enverr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;home&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;$home&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">env&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// On some geese the home directory is not always defined.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">switch&lt;/span> &lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GOOS&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;android&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;/sdcard&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;ios&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">enverr&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; is not defined&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿˜æœ‰å°±æ˜¯å®˜æ–¹çš„åº“ä¹Ÿåªæ˜¯ä»ç¯å¢ƒå˜é‡ä¸­è·å–ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œæ²¡æœ‰è€ƒè™‘&lt;code>$HOME&lt;/code>ä¸å­˜åœ¨çš„æƒ…å†µã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>&lt;code>go-homedir&lt;/code>æ˜¯ç¬¬ä¸‰æ–¹åŒ…ï¼Œä½¿ç”¨å‰éœ€è¦å…ˆå®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go get -u github.com/mitchellh/go-homedir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨éå¸¸ç®€å•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/mitchellh/go-homedir&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">homedir&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Dir&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Home dir:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dir&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;~/golang/src&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">expandedDir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">homedir&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Expand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Expand of %s is: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">expandedDir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>go-homedir&lt;/code>æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Dir&lt;/code>ï¼šè·å–ç”¨æˆ·ä¸»ç›®å½•ï¼›&lt;/li>
&lt;li>&lt;code>Expand&lt;/code>ï¼šå°†è·¯å¾„ä¸­çš„ç¬¬ä¸€ä¸ª&lt;code>~&lt;/code>æ‰©å±•æˆç”¨æˆ·ä¸»ç›®å½•ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="é«˜çº§ç”¨æ³•">
&lt;a href="#%e9%ab%98%e7%ba%a7%e7%94%a8%e6%b3%95" class="header-anchor">#&lt;/a>
é«˜çº§ç”¨æ³•
&lt;/h2>&lt;p>ç”±äº&lt;code>Dir&lt;/code>çš„è°ƒç”¨å¯èƒ½æ¶‰åŠä¸€äº›ç³»ç»Ÿè°ƒç”¨å’Œå¤–éƒ¨æ‰§è¡Œå‘½ä»¤ï¼Œå¤šæ¬¡è°ƒç”¨è´¹æ€§èƒ½ã€‚æ‰€ä»¥&lt;code>go-homedir&lt;/code>æä¾›äº†ç¼“å­˜çš„åŠŸèƒ½ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼“å­˜æ˜¯å¼€å¯çš„ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†&lt;code>DisableCache&lt;/code>è®¾ç½®ä¸º&lt;code>true&lt;/code>æ¥å…³é—­å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/mitchellh/go-homedir&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">homedir&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DisableCache&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="nx">å…³é—­äº†ç¼“å­˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">homedir&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Dir&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Home dir:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ç¼“å­˜æ—¶ï¼Œå¦‚æœç¨‹åºè¿è¡Œä¸­ä¿®æ”¹äº†ä¸»ç›®å½•ï¼Œå†æ¬¡è°ƒç”¨&lt;code>Dir&lt;/code>è¿˜æ˜¯è¿”å›ä¹‹å‰çš„ç›®å½•ã€‚å¦‚æœéœ€è¦è·å–æœ€æ–°çš„ä¸»ç›®å½•ï¼Œå¯ä»¥å…ˆè°ƒç”¨&lt;code>Reset&lt;/code>æ¸…é™¤ç¼“å­˜ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å®ç°">
&lt;a href="#%e5%ae%9e%e7%8e%b0" class="header-anchor">#&lt;/a>
å®ç°
&lt;/h2>&lt;p>&lt;code>go-homedir&lt;/code>æºç åªæœ‰ä¸€ä¸ªæ–‡ä»¶&lt;a class="link" href="https://github.com/mitchellh/go-homedir/blob/master/homedir.go" target="_blank" rel="noopener"
>homedir.go&lt;/a>ï¼Œä»Šå¤©æˆ‘ä»¬å¤§æ¦‚çœ‹ä¸€ä¸‹&lt;code>Dir&lt;/code>çš„å®ç°ï¼Œå»æ‰ç¼“å­˜ç›¸å…³ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Dir&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">result&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GOOS&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;windows&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">dirWindows&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Unix-like system, so just assume Unix
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">dirUnix&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ¤æ–­å½“å‰çš„ç³»ç»Ÿæ˜¯&lt;code>windows&lt;/code>è¿˜æ˜¯ç±» Unixï¼Œåˆ†åˆ«è°ƒç”¨ä¸åŒçš„æ–¹æ³•ã€‚å…ˆçœ‹ windows çš„ï¼Œæ¯”è¾ƒç®€å•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">dirWindows&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// First prefer the HOME environmental variable
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">home&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;HOME&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">home&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">home&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Prefer standard environment variable USERPROFILE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">home&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;USERPROFILE&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">home&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">home&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">drive&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;HOMEDRIVE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;HOMEPATH&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">home&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">drive&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">drive&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">path&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;HOMEDRIVE, HOMEPATH, or USERPROFILE are blank&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">home&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµç¨‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>è¯»å–ç¯å¢ƒå˜é‡&lt;code>HOME&lt;/code>ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¿”å›è¿™ä¸ªå€¼ï¼›&lt;/li>
&lt;li>è¯»å–ç¯å¢ƒå˜é‡&lt;code>USERPROFILE&lt;/code>ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¿”å›è¿™ä¸ªå€¼ï¼›&lt;/li>
&lt;li>è¯»å–ç¯å¢ƒå˜é‡&lt;code>HOMEDRIVE&lt;/code>å’Œ&lt;code>HOMEPATH&lt;/code>ï¼Œå¦‚æœä¸¤è€…éƒ½ä¸ä¸ºç©ºï¼Œæ‹¼æ¥è¿™ä¸¤ä¸ªå€¼è¿”å›ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç±» Unix ç³»ç»Ÿçš„å®ç°ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">dirUnix&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">homeEnv&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="s">&amp;#34;HOME&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GOOS&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;plan9&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// On plan9, env vars are lowercase.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">homeEnv&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;home&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// First prefer the HOME environmental variable
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">home&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">homeEnv&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">home&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">home&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">stdout&lt;/span> &lt;span class="nx">bytes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Buffer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// If that fails, try OS specific commands
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GOOS&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;darwin&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;sh&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">`dscl -q . -read /Users/&amp;#34;$(whoami)&amp;#34; NFSHomeDirectory | sed &amp;#39;s/^[^ ]*: //&amp;#39;`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">stdout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">result&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">TrimSpace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stdout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">result&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;getent&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;passwd&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getuid&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">stdout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// If the error is ErrNotFound, we ignore it. Otherwise, return it.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ErrNotFound&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">passwd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">TrimSpace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stdout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">());&lt;/span> &lt;span class="nx">passwd&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// username:password:uid:gid:gecos:home:shell
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">passwdParts&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SplitN&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">passwd&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">passwdParts&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">passwdParts&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// If all else fails, try the shell
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">stdout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Reset&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">exec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;sh&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;cd &amp;amp;&amp;amp; pwd&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Stdout&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">stdout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">cmd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">result&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">TrimSpace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">stdout&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">result&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;blank output when reading home directory&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµç¨‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>å…ˆè¯»å–ç¯å¢ƒå˜é‡&lt;code>HOME&lt;/code>ï¼ˆæ³¨æ„ plan9 ç³»ç»Ÿä¸Šä¸º&lt;code>home&lt;/code>ï¼‰ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¿”å›è¿™ä¸ªå€¼ï¼›&lt;/li>
&lt;li>ä½¿ç”¨&lt;code>getnet&lt;/code>å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿçš„æ•°æ®åº“ä¸­çš„ç›¸å…³è®°å½•ï¼Œæˆ‘ä»¬çŸ¥é“&lt;code>passwd&lt;/code>æ–‡ä»¶ä¸­å­˜å‚¨äº†ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚ä½¿ç”¨&lt;code>getent&lt;/code>å‘½ä»¤æŸ¥çœ‹&lt;code>passwd&lt;/code>ä¸­å½“å‰ç”¨æˆ·çš„é‚£æ¡è®°å½•ï¼Œç„¶åä»ä¸­æ‰¾åˆ°ä¸»ç›®å½•éƒ¨åˆ†è¿”å›ï¼›&lt;/li>
&lt;li>å¦‚æœä¸Šä¸€ä¸ªæ­¥éª¤å¤±è´¥äº†ï¼Œæˆ‘ä»¬çŸ¥é“&lt;code>cd&lt;/code>åä¸åŠ å‚æ•°æ˜¯ç›´æ¥åˆ‡æ¢åˆ°ç”¨æˆ·ä¸»ç›®å½•çš„ï¼Œè€Œ&lt;code>pwd&lt;/code>å¯ä»¥æ˜¾ç¤ºå½“å‰ç›®å½•ã€‚é‚£ä¹ˆå°±å¯ä»¥ç»“åˆè¿™ä¸¤ä¸ªå‘½ä»¤è¿”å›ä¸»ç›®å½•ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>è¿™é‡Œåˆ†ææºç å¹¶ä¸æ˜¯è¡¨ç¤ºä½¿ç”¨ä»»ä½•åº“éƒ½è¦ç†Ÿæ‚‰å®ƒçš„æºç ï¼Œæ¯•ç«Ÿä½¿ç”¨åº“å°±æ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å‘ã€‚&lt;/strong> &lt;strong>ä½†æ˜¯æºç æ˜¯æˆ‘ä»¬å­¦ä¹ å’Œæé«˜çš„ä¸€ä¸ªéå¸¸é‡è¦çš„é€”å¾„ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨åº“é‡åˆ°é—®é¢˜çš„æ—¶å€™ä¹Ÿè¦æœ‰èƒ½åŠ›ä»æ–‡æ¡£æˆ–ç”šè‡³æºç ä¸­æŸ¥æ‰¾åŸå› ã€‚&lt;/strong>&lt;/p>
&lt;hr>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://github.com/mitchellh/go-homedir" target="_blank" rel="noopener"
>home-dir&lt;/a> GitHub ä»“åº“&lt;/li>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2020/01/14/godailylib/go-homedir/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ go-homedir&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>Gitå¸¸ç”¨å‘½ä»¤</title><link>https://arlettebrook.github.io/p/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</link><pubDate>Mon, 22 Apr 2024 22:18:17 +0800</pubDate><guid>https://arlettebrook.github.io/p/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</guid><description>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šè¦å­¦ä¼šä½¿ç”¨-h &amp;ndash;helpé€‰é¡¹ï¼ŒæŸ¥çœ‹å‘½ä»¤ï¼Œçœ‹ä¸æ‡‚åœ¨æŸ¥é˜…ã€‚&lt;code>git help &amp;lt;command&amp;gt;&lt;/code>å¯è¿›å…¥å®˜æ–¹æ–‡æ¡£ã€‚&lt;strong>Git&lt;/strong>&lt;a class="link" href="https://www.liaoxuefeng.com/wiki/896043488029600" target="_blank" rel="noopener"
>å…¥é—¨å‚è€ƒ&lt;/a>ã€‚ä»¥ä¸‹å¸¸ç”¨å‘½ä»¤ä¸ªäººæ”¶é›†æ€»ç»“ã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;h2 id="gitç®€å•å‘½ä»¤">
&lt;a href="#git%e7%ae%80%e5%8d%95%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
gitç®€å•å‘½ä»¤
&lt;/h2>&lt;h3 id="git-init">
&lt;a href="#git-init" class="header-anchor">#&lt;/a>
git init
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git init &amp;lt;directory&amp;gt;&lt;/code>åœ¨æŒ‡å®šçš„â½¬å½•ä¸‹åˆ›å»ºâ¼€ä¸ªç©ºçš„git repoã€‚ä¸å¸¦å‚æ•°å°†åœ¨å½“å‰â½¬å½•ä¸‹åˆ›å»ºâ¼€ä¸ªgit repoã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="git-clone">
&lt;a href="#git-clone" class="header-anchor">#&lt;/a>
git clone
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git clone &amp;lt;repo&amp;gt;&lt;/code>å…‹éš†â¼€ä¸ªæŒ‡å®šrepoåˆ°æœ¬åœ°ã€‚æŒ‡å®šçš„repoå¯ä»¥æ˜¯æœ¬åœ°â½‚ä»¶ç³»ç»Ÿæˆ–è€…ç”±HTTPæˆ–SSHæŒ‡å®šçš„è¿œç¨‹è·¯å¾„ã€‚&lt;/li>
&lt;li>&lt;code>git clone -b &amp;lt;branch&amp;gt; &amp;lt;repo&amp;gt;&lt;/code>å…‹éš†æŒ‡å®šä»“åº“çš„åˆ†æ”¯&lt;/li>
&lt;li>&lt;code>git clone --recursive &amp;lt;repo&amp;gt;&lt;/code>é€’å½’åœ°å…‹éš†ï¼Œå…‹éš†å¸¦æœ‰å­æ¨¡å—çš„ä»“åº“
&lt;ul>
&lt;li>&lt;code>git clone --recurse-submodules &amp;lt;repository_url&amp;gt;&lt;/code>åŒç†&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¯ç»„åˆä½¿ç”¨&lt;/li>
&lt;/ul>
&lt;h3 id="git-add">
&lt;a href="#git-add" class="header-anchor">#&lt;/a>
git add
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git add &amp;lt;directory&amp;gt;&lt;/code>å°†æŒ‡å®šâ½¬å½•çš„æ‰€æœ‰ä¿®æ”¹åŠ â¼Šåˆ°ä¸‹â¼€æ¬¡ commitä¸­ã€‚æŠŠ&lt;code>&amp;lt;directory&amp;gt;&lt;/code>æ›¿æ¢æˆ&lt;code>&amp;lt;file&amp;gt;&lt;/code>å°†æ·»åŠ æŒ‡å®šâ½‚ä»¶çš„ä¿®æ”¹ã€‚&lt;/li>
&lt;li>&lt;code>git add *&lt;/code>ã€&lt;code>git add .&lt;/code>ã€&lt;code>git add -A&lt;/code>ä¸‰æ¡å‘½ä»¤ä½†æ˜¯ä¸€æ ·çš„ï¼Œå°†æ‰€ä»¥ä¿®æ”¹æäº¤åˆ°æš‚å­˜åŒºã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="git-commit">
&lt;a href="#git-commit" class="header-anchor">#&lt;/a>
git commit
&lt;/h3>&lt;ul>
&lt;li>è¿™ä¸ªå‘½ä»¤é€šå¸¸å¸¦&lt;code>-m&lt;/code>é€‰é¡¹&lt;code>git commit -m &amp;quot;&amp;lt;message&amp;gt;&amp;quot;&lt;/code>æäº¤æš‚å­˜åŒºçš„ä¿®æ”¹ï¼Œä½¿â½¤æŒ‡å®šçš„ &lt;code>&amp;lt;message&amp;gt;&lt;/code>ä½œä¸ºæäº¤ä¿¡æ¯ï¼Œâ½½ä¸æ˜¯æ‰“å¼€â½‚æœ¬ç¼–è¾‘å™¨è¾“â¼Šæäº¤ä¿¡æ¯ã€‚&lt;/li>
&lt;li>&lt;code>git commit -m &amp;lt;message&amp;gt; --amend&lt;/code>å°†å½“å‰stagedä¿®æ”¹åˆå¹¶åˆ°æœ€è¿‘â¼€æ¬¡çš„commitä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="git-status">
&lt;a href="#git-status" class="header-anchor">#&lt;/a>
git status
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git status&lt;/code>æ˜¾ç¤ºå“ªäº›â½‚ä»¶å·²è¢«stagedã€ä»¥åŠæœªè·Ÿè¸ª(untracked)ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="git-reflog">
&lt;a href="#git-reflog" class="header-anchor">#&lt;/a>
git reflog
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git reflog&lt;/code>æ˜¾ç¤ºæœ¬åœ°repoçš„æ‰€æœ‰commitâ½‡å¿—ã€‚&lt;/li>
&lt;li>ä¸&lt;code>git log&lt;/code>çš„åŒºåˆ«
&lt;ol>
&lt;li>&lt;code>log&lt;/code>é¡¹ç›®çš„æäº¤å†å²ï¼Œ&lt;code>reflog&lt;/code>æœ¬åœ°ä»“åº“çš„&lt;strong>å¼•ç”¨&lt;/strong>æäº¤æ—¥å¿—ã€‚&lt;/li>
&lt;li>å¼•ç”¨ä¼šä¿ç•™æ‰€ä»¥çš„æäº¤å†å²ï¼Œå¦‚ä½•é‡ç½®çš„å†å²ã€‚ä¸»è¦ç›®çš„æ˜¯æä¾›ä¸€ä¸ªå®‰å…¨ç½‘ï¼Œä»¥ä¾¿åœ¨è¯¯æ“ä½œï¼ˆå¦‚é”™è¯¯çš„ &lt;code>git reset&lt;/code>ï¼‰åå¯ä»¥æ¢å¤ä¸¢å¤±çš„æäº¤æˆ–åˆ†æ”¯ã€‚&lt;/li>
&lt;li>&lt;code>git log&lt;/code> çš„è¾“å‡ºæ˜¯æ°¸ä¹…æ€§çš„ï¼Œè€Œ &lt;code>reflog&lt;/code> ä¼šåœ¨ä¸€æ®µæ—¶é—´åè‡ªåŠ¨è¿‡æœŸï¼ˆé»˜è®¤æ˜¯ 30 å¤©ï¼‰ï¼Œä»¥èŠ‚çœç©ºé—´ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-rm">
&lt;a href="#git-rm" class="header-anchor">#&lt;/a>
git rm
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git rm fileName&lt;/code>åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶ã€‚
&lt;ul>
&lt;li>ä¸&lt;code>rm fileName&lt;/code>çš„åŒºåˆ«ã€‚
&lt;ol>
&lt;li>&lt;code>git rm&lt;/code>ä¸èƒ½åˆ é™¤æœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼Œ&lt;/li>
&lt;li>&lt;code>git rm&lt;/code>åˆ é™¤ä¹‹åç›´æ¥åˆ°æš‚å­˜åŒºï¼Œè€Œ&lt;code>rm&lt;/code>æ˜¯åˆ°å·¥ä½œåŒº&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ³¨æ„åˆ é™¤ä¹‹åéƒ½éœ€è¦æäº¤æ“ä½œã€‚&lt;/li>
&lt;li>æ’¤é”€æ“ä½œä¸ç”¨è®°ï¼Œgitéƒ½ä¼šæœ‰æç¤º&lt;/li>
&lt;/ul>
&lt;h3 id="git-switch">
&lt;a href="#git-switch" class="header-anchor">#&lt;/a>
git switch
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>è¯¥å‘½ä»¤é€‚ç”¨äºç‰¹å®šgitç‰ˆæœ¬ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git switch &amp;lt;branch&amp;gt;&lt;/code>åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œ&lt;/p>
&lt;ul>
&lt;li>&lt;code>git checkout &amp;lt;branch&amp;gt;&lt;/code>åŒç†ï¼Œä½†è¿™ä¸ªéƒ½é€‚ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git switch -c &amp;lt;branch&amp;gt;&lt;/code>åˆ›å»ºå¹¶åˆ‡æ¢æŒ‡å®šåˆ†æ”¯&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-branch">
&lt;a href="#git-branch" class="header-anchor">#&lt;/a>
git branch
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;code>git branch&lt;/code>æ˜¾ç¤ºæœ¬åœ°repoçš„æ‰€æœ‰åˆ†â½€ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>-v&lt;/code>æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯&lt;/li>
&lt;li>å¸¦&lt;code>*&lt;/code>çš„ä¸ºå½“å‰åˆ†æ”¯&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git branch -r&lt;/code>æ˜¾ç¤ºè¿œç¨‹ä»“åº“çš„æ‰€ä»¥åˆ†æ”¯ã€‚&lt;/p>
&lt;ul>
&lt;li>å¯ä»¥ä½¿ç”¨&lt;code>git checkout &amp;lt;branch&amp;gt;&lt;/code>æ£€å‡ºè¿œç¨‹åˆ†æ”¯ï¼Œå¯ä»¥çœç•¥&lt;code>origin/&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git branch -a&lt;/code>æ˜¾ç¤ºæœ¬åœ°å’Œè¿œç¨‹çš„æ‰€æœ‰åˆ†æ”¯&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git branch -m &amp;lt;old_branch_name&amp;gt; &amp;lt;new_branch_name&amp;gt;&lt;/code>é‡å‘½ååˆ†æ”¯&lt;/p>
&lt;ul>
&lt;li>æ–°åˆ†æ”¯åå·²ç»å­˜åœ¨ï¼Œ &lt;code>-M&lt;/code> å¼ºåˆ¶é‡å‘½åã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git branch &amp;lt;name&amp;gt;&lt;/code>åˆ›å»ºæŒ‡å®šåˆ†æ”¯&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git branch -D &amp;lt;branch&amp;gt;&lt;/code>å¼ºåˆ¶åˆ é™¤æŒ‡å®šåˆ†æ”¯ï¼Œæ— è®ºæ˜¯å¦åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git branch -d &amp;lt;branch&amp;gt;&lt;/code>åˆ é™¤æŒ‡å®šçš„åˆ†æ”¯ï¼Œå¦‚æœæ²¡æœ‰åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼Œgitä¼šé˜»æ­¢æ“ä½œã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-merge">
&lt;a href="#git-merge" class="header-anchor">#&lt;/a>
git merge
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git merge &amp;lt;branch&amp;gt;&lt;/code>åˆå¹¶æŒ‡å®šåˆ†æ”¯ã€‚å°†æŒ‡å®š&lt;code>&amp;lt;branch&amp;gt;&lt;/code>åˆ†â½€åˆå¹¶åˆ°å½“å‰åˆ†â½€ã€‚
&lt;ul>
&lt;li>æ˜¯åœ¨å½“å‰åˆ†æ”¯åˆå¹¶æŒ‡å®šåˆ†æ”¯ã€‚&lt;/li>
&lt;li>åˆå¹¶åˆ†æ”¯å¯èƒ½ä¼šå‡ºç°å†²çªã€‚è¦è§£å†³å†²çªä¹‹åæ‰èƒ½åˆå¹¶ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git merge --abort&lt;/code>æ”¾å¼ƒæœ¬æ¬¡åˆå¹¶&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="gitä¸€èˆ¬å‘½ä»¤">
&lt;a href="#git%e4%b8%80%e8%88%ac%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
gitä¸€èˆ¬å‘½ä»¤
&lt;/h2>&lt;h3 id="git-revert">
&lt;a href="#git-revert" class="header-anchor">#&lt;/a>
git revert
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git revert &amp;lt;commit&amp;gt; &lt;/code>å¯¹æŒ‡å®š&lt;code>&amp;lt;commit&amp;gt;&lt;/code>åˆ›å»ºâ¼€ä¸ªundoçš„commitï¼Œå¹¶åº”â½¤åˆ°å½“å‰åˆ†â½€ã€‚å°±æ˜¯æ’¤é”€æŒ‡å®šçš„æäº¤å¹¶ä¿ç•™è®°å½•
&lt;ul>
&lt;li>æ•ˆæœï¼šæ’¤é”€æŒ‡å®šçš„æäº¤ï¼Œå›åˆ°äº†æ’¤é”€æäº¤çš„æ˜¯ä¸Šä¸ªç‰ˆæœ¬ï¼Œ&lt;strong>ä¿ç•™äº†æ’¤é”€å†å²&lt;/strong>ã€‚&lt;strong>ä¼šæ‰“å¼€ç¼–è¾‘å™¨æ˜¾ç¤ºå…·ä½“æ•ˆæœ&lt;/strong>&lt;/li>
&lt;li>ä¸€èˆ¬ä¸ç”¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-reset">
&lt;a href="#git-reset" class="header-anchor">#&lt;/a>
git reset
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;code>git reset &amp;lt;commit&amp;gt;&lt;/code>&lt;strong>é‡ç½®&lt;/strong>åˆ°æŒ‡å®šçš„æäº¤ï¼Œä¸ä¼šä¿ç•™commitå†å²ã€‚å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¼šå˜æˆæœªè·Ÿè¸ªã€‚&lt;code>--hard&lt;/code>é€‰é¡¹å®Œå…¨é‡ç½®åˆ°æŒ‡å®šæäº¤ã€‚æœªè·Ÿè¸ªçš„é‡ç½®ä¸äº†ã€‚é‡ç½®å†å²å¯ä»¥é€šè¿‡&lt;code>git reflog&lt;/code>æŸ¥çœ‹ï¼Œåˆ©ç”¨è¿™ä¸ªå¯ä»¥é‡ç½®å·²ç»é‡ç½®çš„ç‰ˆæœ¬åº“ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;lt;commit&amp;gt;&lt;/code>å¯ä»¥æ˜¯ï¼š
&lt;ul>
&lt;li>&lt;code>HEAD&lt;/code>è¡¨ç¤ºæœ€æ–°çš„æäº¤æˆ–è€…è¿™ä¸ª&lt;strong>ç‰ˆæœ¬åº“&lt;/strong>ï¼ŒHEAD^ã€HEAD~1ä¸Šä¸Šæ¬¡æäº¤æˆ–è€…ä¸Šä¸ªç‰ˆæœ¬&lt;/li>
&lt;li>æˆ–è€…ä½¿ç”¨&lt;code>commit_hash&lt;/code>ï¼Œæäº¤çš„å“ˆå¸Œå€¼å¯ä»¥ä½¿ç”¨&lt;code>git log&lt;/code>æŸ¥çœ‹ï¼Œåªéœ€è¦å‰å‡ ä½å°±è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git reset&lt;/code>ï¼ˆé‡ç½®åˆ°æœ€æ–°çš„æäº¤ï¼‰ç§»é™¤æ‰€æœ‰æš‚å­˜åŒºã€å·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œåˆ°æœªè·Ÿè¸ªã€‚è¿™äº›å‘½ä»¤å…¶å®çœç•¥äº†&lt;code>HEAD&lt;/code>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>git reset --hard&lt;/code> é‡ç½®åˆ°æœ€æ–°çš„æäº¤ï¼Œåˆ é™¤å·¥ä½œåŒºå’Œæš‚å­˜åŒº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git reset &amp;lt;file&amp;gt;&lt;/code>å°†&lt;code>&amp;lt;file&amp;gt;&lt;/code>ä»æš‚å­˜åŒºç§»é™¤ï¼Œä½†ä¿æŒâ¼¯ä½œåŒºä¸å˜ã€‚æ­¤æ“ä½œä¸ä¼šä¿®æ”¹â¼¯ä½œåŒºçš„ä»»ä½•â½‚ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-restore">
&lt;a href="#git-restore" class="header-anchor">#&lt;/a>
git restore
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git restore &amp;lt;file&amp;gt;...&lt;/code>æ’¤é”€å¯¹å·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œæ˜¯å¯¹ä»¥è·Ÿè¸ªçš„æ–‡ä»¶å½“æœªæ·»åŠ åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ã€‚å¤šä¸ªæ–‡ä»¶ç”¨ç©ºæ ¼åˆ†å¼€ã€‚
&lt;ul>
&lt;li>&lt;code>git checkout -- &amp;lt;file&amp;gt;...&lt;/code>åŒç†ï¼Œ&lt;code>--&lt;/code>å¯ä»¥çœç•¥&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git restore --staged &amp;lt;file&amp;gt;...&lt;/code>æ’¤é”€å¯¹æš‚å­˜åŒºçš„ä¿®æ”¹åˆ°æœªè·Ÿè¸ªã€‚é’ˆå¯¹æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ã€‚
&lt;ul>
&lt;li>&lt;code>git reset HEAD &amp;lt;file&amp;gt;...&lt;/code>åŒç†ï¼Œ&lt;code>HEAD&lt;/code>å¯ä»¥çœç•¥ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å…·ä½“ç”¨å“ªä¸€ä¸ªï¼Œgitéƒ½ä¼šæœ‰æç¤ºï¼Œä¸ç”¨è®°ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="git-checkout">
&lt;a href="#git-checkout" class="header-anchor">#&lt;/a>
git checkout
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;code>git checkout &amp;lt;branch&amp;gt;&lt;/code>åˆ‡æ¢åˆ°æŒ‡å®šçš„åˆ†æ”¯&lt;/p>
&lt;ul>
&lt;li>å¦‚æœåˆ†æ”¯ä¸ºè¿œç¨‹åˆ†æ”¯ï¼Œåˆ™æ£€å‡ºè¿œç¨‹åˆ†æ”¯&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git checkout -b &amp;lt;new-branch&amp;gt;&lt;/code>åˆ‡æ¢å¹¶åˆ›å»ºæŒ‡å®šçš„åˆ†æ”¯&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git checkout &amp;lt;file&amp;gt;&lt;/code>æ’¤é”€å·¥ä½œåŒºçš„ä¿®æ”¹&lt;/p>
&lt;ul>
&lt;li>&lt;code>git restore &amp;lt;file&amp;gt;&lt;/code>åŒç†&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git checkout &amp;lt;commit&amp;gt;&lt;/code>æ ¹æ®æŒ‡å®šçš„æäº¤åˆ›å»ºä¸€ä¸ªåˆ†æ”¯,å¤„äºæ¸¸ç¦»æ€ã€‚ä¸€èˆ¬ä¸ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git checkout -b &amp;lt;local_branch_name&amp;gt; origin/&amp;lt;remote_branch_name&amp;gt;&lt;/code>åˆ‡æ¢åˆ°è¿œç¨‹åˆ†æ”¯&lt;/p>
&lt;ul>
&lt;li>&lt;code>git checkout &amp;lt;branch&amp;gt;&lt;/code>å·®ä¸å¤šï¼Œå¯ä»¥ä½¿ç”¨&lt;code>git fetch origin&lt;/code>è·å–ä»“åº“æ‰€ä»¥ä¿¡æ¯ï¼Œåœ¨æ£€å‡ºåˆ†æ”¯ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git checkout -&lt;/code>åˆ‡æ¢åˆ°å‰ä¸€ä¸ªåˆ†æ”¯ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-remote">
&lt;a href="#git-remote" class="header-anchor">#&lt;/a>
git remote
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>ç”¨æ¥ç®¡ç†è¿œç¨‹ä»“åº“åˆ—è¡¨ï¼Œ&lt;code>origin&lt;/code>ä¸ºè¿œç¨‹ä»“åº“çš„é»˜è®¤åˆ«åã€‚è¿™äº›è¿œç«¯ä»“åº“çš„ä¿¡æ¯éƒ½è¢«ä¿å­˜åœ¨&lt;code>./git/config&lt;/code> æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git remote&lt;/code>åˆ—å‡ºæ‰€æœ‰å·²é…ç½®çš„è¿œç¨‹ä»“åº“çš„ä¿¡æ¯ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>-v&lt;/code>æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git remote add &amp;lt;remote_name&amp;gt; &amp;lt;remote_url&amp;gt;&lt;/code>æ·»åŠ è¿œç¨‹ä»“åº“&lt;/p>
&lt;ul>
&lt;li>æ·»åŠ â¼€ä¸ªæ–°çš„è¿œç¨‹è¿æ¥ã€‚æ·»åŠ åå¯ä½¿â½¤ &lt;code>&amp;lt;name&amp;gt;&lt;/code>ä½œä¸ºæŒ‡å®š&lt;code>&amp;lt;url&amp;gt;&lt;/code>è¿œç¨‹è¿æ¥çš„åç§°ã€‚&lt;/li>
&lt;li>åªæœ‰é…ç½®äº†è¿™ä¸ªæ‰èƒ½æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚&lt;/li>
&lt;li>&lt;code>git remote rename &amp;lt;old_name&amp;gt; &amp;lt;new_name&amp;gt;&lt;/code>é‡å‘½åè¿œç¨‹ä»“åº“ã€‚&lt;/li>
&lt;li>&lt;code>git remote set-url &amp;lt;remote_name&amp;gt; &amp;lt;new_url&amp;gt;&lt;/code>ä¿®æ”¹è¿œç¨‹ä»“åº“çš„urlã€‚&lt;/li>
&lt;li>&lt;code>git remote remove &amp;lt;remote_name&amp;gt;&lt;/code>æˆ–&lt;code>git remote rm &amp;lt;remote_name&amp;gt;&lt;/code>åˆ é™¤è¿œç¨‹ä»“åº“ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git remote show &amp;lt;remote_name&amp;gt;&lt;/code>æ˜¾ç¤ºè¿œç¨‹ä»“åº“çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ URLã€è·Ÿè¸ªçš„åˆ†æ”¯ç­‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¡¥å……å¦‚ä½•åˆ›å»ºè¿œç¨‹ä»“åº“&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åˆ›å»ºè¿œç¨‹ä»“åº“å¯ä»¥å…ˆåœ¨githubä¸Šåˆ›å»ºå¥½ï¼Œç„¶ååœ¨æœ¬åœ°pullä¸‹æ¥ï¼Œåœ¨è¿›è¡Œä¿®æ”¹åpushä¸Šå»ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯ä»¥å»ºä¸€ä¸ª&lt;strong>ç©ºç™½ä»“åº“&lt;/strong>ï¼Œåœ¨æœ¬åœ°pushä¸Šå»ï¼Œä½†éœ€è¦è¿›è¡Œç»‘å®šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git remote add origin https://github.com/username/null-project.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git branch -M main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push -u origin main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;h3 id="gjit-push">
&lt;a href="#gjit-push" class="header-anchor">#&lt;/a>
gjit push
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>å°†æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git push &amp;lt;remote_repository&amp;gt; &amp;lt;æœ¬åœ°åˆ†æ”¯å&amp;gt;:&amp;lt;è¿œç¨‹åˆ†æ”¯å&amp;gt;&lt;/code>æ¨é€æœ¬åœ°åˆ†æ”¯åˆ°æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ã€‚å¦‚æœè¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºã€‚&lt;code>:&lt;/code>å‰åä¸èƒ½æœ‰ç©ºæ ¼ã€‚&lt;/p>
&lt;ul>
&lt;li>å½“åˆ†æ”¯åŒåï¼Œå¯ä»¥ç®€å†™æˆ&lt;code>git push &amp;lt;remote_repository&amp;gt; &amp;lt;æœ¬åœ°åˆ†æ”¯å&amp;gt;&lt;/code>&lt;/li>
&lt;li>æœæ— æ³•æäº¤çš„è¯æ‰§è¡Œï¼Œ&lt;code>-f&lt;/code>ã€&lt;code>--force&lt;/code>é€‰é¡¹å¼ºåˆ¶æ¨é€ï¼Œä¸€èˆ¬ä¸ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git push -u &amp;lt;remote_repository&amp;gt; &amp;lt;æœ¬åœ°åˆ†æ”¯å&amp;gt;&lt;/code>è®¾ç½®é»˜è®¤æ¨é€åˆ†æ”¯ã€‚&lt;/p>
&lt;ul>
&lt;li>ä½œç”¨ï¼šè¿™æ ·è®¾ç½®ä»¥åï¼Œæ¨é€åˆ°è¿œç¨‹ä»“åº“å¯ä»¥ç®€å†™æˆ&lt;code>git push&lt;/code>
&lt;ul>
&lt;li>&lt;code>git push&lt;/code> ä»£æ›¿ &lt;code>git push origin master&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>-u&lt;/code>æ˜¯&lt;code>--set-upstream&lt;/code>çš„çŸ­å½¢å¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git push &amp;lt;remote_repository&amp;gt; -d &amp;lt;è¿œç¨‹åˆ†æ”¯å&amp;gt;&lt;/code>åˆ é™¤è¿œç¨‹åˆ†æ”¯ ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>--delete&lt;/code>é•¿é€‰é¡¹ã€‚&lt;/li>
&lt;li>&lt;code>git push origin :test&lt;/code>åŒç†ï¼Œæ²¡æœ‰å†™æœ¬åœ°åˆ†æ”¯ï¼Œå°±æ˜¯åˆ é™¤è¿œç¨‹åˆ†æ”¯ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git push &amp;lt;remote&amp;gt; &amp;lt;tagname&amp;gt;&lt;/code>æ¨é€æŒ‡å®šæ ‡ç­¾åˆ°æŒ‡å®šè¿œç¨‹ä»“åº“ï¼Œä¸€èˆ¬ä¸º`origin``&lt;/p>
&lt;/li>
&lt;li>
&lt;p>``git push &lt;remote> &amp;ndash;tags`æ¨é€æ‰€ç”¨æ ‡ç­¾åˆ°è¿œç¨‹&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-pull">
&lt;a href="#git-pull" class="header-anchor">#&lt;/a>
git pull
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git pull &amp;lt;remote_repository&amp;gt; &amp;lt;è¿œç¨‹åˆ†æ”¯å&amp;gt;:&amp;lt;æœ¬åœ°åˆ†æ”¯å&amp;gt;&lt;/code>ä»è¿œç¨‹ä»“åº“æ‹‰å–æœ€æ–°ä»£ç åˆ°æœ¬åœ°ä»“åº“ã€‚
&lt;ul>
&lt;li>&lt;code>git pull&lt;/code>ä¼šæ‹‰å–å¹¶åˆå¹¶ï¼Œå‡ºç°å†²çªè¦è§£å†³ä¹‹åæ‰èƒ½åˆå¹¶ã€‚&lt;/li>
&lt;li>&lt;code>git fetch&lt;/code>è·å–å½“å‰è¿œç¨‹ä»“åº“çš„æœ€æ–°ä¿¡æ¯ï¼Œä¸ä¼šåˆå¹¶ã€‚&lt;/li>
&lt;li>é€šå¸¸å¯ä»¥ç®€å†™æˆ&lt;code>git pull&lt;/code>,è¿œç¨‹ä»“åº“é»˜è®¤æ˜¯&lt;code>origin&lt;/code>ï¼Œåˆ†æ”¯é»˜è®¤æ˜¯å½“å‰åˆ†æ”¯ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git pull --rebase&amp;lt;remote&amp;gt;&lt;/code> æŠ“å–è¿œç¨‹åˆ†â½€ï¼Œå¹¶ä»¥rebaseæ¨¡å¼å¹¶â¼Šæœ¬åœ°repoâ½½ä¸æ˜¯mergeã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="git-fetch">
&lt;a href="#git-fetch" class="header-anchor">#&lt;/a>
git fetch
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git fetch origin&lt;/code>è·å–è¿œç¨‹ä»“åº“æœ€æ–°çš„æ›´æ”¹ã€‚ä¸ä¼šåˆå¹¶ã€‚é»˜è®¤ä»“åº“æ˜¯&lt;code>origin&lt;/code>ï¼Œåˆ†æ”¯æ˜¯å½“å‰åˆ†æ”¯ï¼Œè¿™é‡Œå¯ä»¥çœç•¥&lt;code>origin&lt;/code>
&lt;ul>
&lt;li>&lt;code>git fetch origin &amp;lt;branch&amp;gt;&lt;/code>è·å–ç‰¹å®šåˆ†æ”¯çš„æ›´æ”¹.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git fetch --all&lt;/code>è·å–æ‰€ç”¨ä»“åº“è¿œç¨‹ä»“åº“çš„æœ€æ–°æ›´æ”¹ã€‚&lt;/li>
&lt;li>ä¸&lt;code>git pull&lt;/code>çš„åŒºåˆ«
&lt;ol>
&lt;li>éƒ½ä¼šè·å–è¿œç¨‹ä»“åº“æœ€æ–°çš„æ›´æ”¹ã€‚&lt;/li>
&lt;li>ä½†æ˜¯fetchä¸ä¼šåˆå¹¶ï¼Œè€Œpullä¼šåˆå¹¶ã€‚å¯ä»¥ç†è§£ä¸º&lt;code>git pull&lt;/code> æ˜¯ &lt;code>git fetch&lt;/code> å’Œ &lt;code>git merge&lt;/code> çš„ç»„åˆ&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>è·å–æœ€æ–°æ›´æ”¹ä¹‹åå¯ä»¥ï¼š
&lt;ol>
&lt;li>&lt;code>git checkout &amp;lt;branch&amp;gt;&lt;/code>æ£€å‡ºæŒ‡å®šåˆ†æ”¯ï¼Œå¦‚æœåŠ &lt;code>origin&lt;/code>è¦è¿™æ ·&lt;code>git checkout -b &amp;lt;branch&amp;gt; origin/&amp;lt;branch&amp;gt;&lt;/code>&lt;/li>
&lt;li>&lt;code>git merge origin/master&lt;/code>åˆå¹¶è¿œç¨‹ master åˆ†æ”¯çš„æ›´æ”¹åˆ°å½“å‰çš„åˆ†æ”¯&lt;/li>
&lt;li>&lt;code>git rebase origin/master&lt;/code>ä½¿ç”¨ rebase æ¥æ•´åˆæ›´æ”¹ï¼ˆè¿™å¯èƒ½ä¼šæ”¹å˜æäº¤å†å²ï¼‰&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-stash">
&lt;a href="#git-stash" class="header-anchor">#&lt;/a>
git stash
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git stash&lt;/code>ä¿å­˜å·¥ä½œåŒºã€æš‚å­˜åŒºï¼Œå¯ä»¥åˆ‡æ¢åˆ†æ”¯å»å®Œæˆåˆ«çš„ä»»åŠ¡ã€‚ä¸ä¿å­˜ä¿®æ”¹ï¼Œæœªæäº¤çš„ä¿®æ”¹ä¼šé”™ä¹±åˆ°åˆ«çš„åˆ†æ”¯ã€‚å¹¶ä¸”åªèƒ½ä¿å­˜å·²è¿½è¸ªçš„æ–‡ä»¶ã€‚&lt;/li>
&lt;li>&lt;code>git stash list&lt;/code>æŸ¥çœ‹ä¿å­˜çš„å·¥ä½œåŒºä»¥åŠæš‚å­˜åŒºã€‚&lt;/li>
&lt;li>&lt;code>git stash apply&lt;/code>æ¢å¤ä¿å­˜çš„å·¥ä½œåŒºä»¥åŠæš‚å­˜åŒºã€‚
&lt;ul>
&lt;li>è¿™ä¸ªå‘½ä»¤æ‰§è¡Œä¹‹åä¸ä¼šåˆ é™¤å­˜å‚¨çš„å·¥ä½œåŒºä»¥åŠæš‚å­˜åŒºã€‚&lt;/li>
&lt;li>è¦ç”¨&lt;code>git stash drop&lt;/code>æ‰èƒ½åˆ é™¤ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git stash pop&lt;/code>æ¢å¤å¹¶åˆ é™¤ä¿å­˜çš„å·¥ä½œåŒºä»¥åŠæš‚å­˜åŒºã€‚&lt;/li>
&lt;li>é»˜è®¤éƒ½æ˜¯ä¿å­˜ã€æ¢å¤ç¬¬ä¸€ä¸ªstashå³&lt;code>stash@{0}&lt;/code>ã€‚è‹¥è¦æŒ‡å®šç¬¬å‡ ä¸ªåœ¨åé¢åŠ &lt;code>stash@{num}&lt;/code>ã€‚
&lt;ul>
&lt;li>å¦‚æ¢å¤ç¬¬äºŒä¸ªstashï¼š&lt;code>git stash pop stash@{1}&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ¯ä¸ªåˆ†æ”¯å…±ç”¨ä¸€ä¸ªstashã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="git-tag">
&lt;a href="#git-tag" class="header-anchor">#&lt;/a>
git tag
&lt;/h3>&lt;ul>
&lt;li>ä½œç”¨ï¼šç”¨äºæ ‡è®°é¡¹ç›®çš„ç‰ˆæœ¬å‘å¸ƒæˆ–é‡è¦çš„é‡Œç¨‹ç¢‘ã€‚&lt;/li>
&lt;li>åˆ†ç±»
&lt;ol>
&lt;li>&lt;code>git tag &amp;lt;tagname&amp;gt; &amp;lt;commit ID&amp;gt;&lt;/code>è½»é‡æ ‡ç­¾
&lt;ul>
&lt;li>&lt;code>git tag vn.n.n&lt;/code>æ‰“æ ‡ç­¾ï¼Œ&lt;code>n.n.n&lt;/code>è¡¨ç¤ºå¯¹åº”çš„ç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬å·å‰é¢ä¸€èˆ¬åŠ &lt;code>v&lt;/code>ï¼Œéµå¾ªä¸€å®šçš„å‘½åè§„èŒƒï¼Œå¦‚&lt;code>v1.0.1&lt;/code>ã€‚
&lt;ul>
&lt;li>é»˜è®¤æ˜¯æ‰“åœ¨æœ€æ–°çš„ä¸€æ¬¡æäº¤ã€‚&lt;/li>
&lt;li>åé¢è·Ÿæäº¤çš„å“ˆå¸Œå€¼å¯ä»¥æŒ‡å®šç»™é‚£æ¬¡æäº¤æ‰“æ ‡ç­¾ã€‚å¦‚&lt;code>git tag v0.9.0 f52c633&lt;/code>ã€‚
&lt;ul>
&lt;li>å“ˆå¸Œå€¼å¯ä»¥é€šè¿‡&lt;code>git log&lt;/code>æŸ¥çœ‹&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git tag -a &amp;lt;tagname&amp;gt; -m &amp;quot;&amp;lt;tag message&amp;gt;&amp;quot; &amp;lt;commit ID&amp;gt;&lt;/code>é™„æ³¨æ ‡ç­¾
&lt;ol>
&lt;li>å¦‚&lt;code>git tag -a v0.1 -m &amp;quot;version 0.1 released&amp;quot; 1094adb&lt;/code>&lt;/li>
&lt;li>æ¨èidçœç•¥é»˜è®¤æœ€æ–°æäº¤ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>æŸ¥çœ‹æ ‡ç­¾
&lt;ol>
&lt;li>&lt;code>git tag&lt;/code>æ˜¾ç¤ºæ‰€æœ‰çš„æœ¬åœ°tagåˆ—è¡¨ï¼ŒæŒ‰ç…§å­—æ¯é¡ºåºæ’åºã€‚å¦‚æœtagæ•°é‡è¾ƒå¤šï¼Œå¯èƒ½ä¼šæ˜¾ç¤ºä¸å…¨ã€‚çœç•¥é€‰é¡¹&lt;code>-l&lt;/code>ã€&lt;code>--list&lt;/code>&lt;/li>
&lt;li>&lt;code>git show &amp;lt;tagname&amp;gt;&lt;/code>æ˜¾ç¤ºæŒ‡å®štagçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æäº¤çš„ä½œè€…ã€æäº¤æ—¶é—´ã€æäº¤ä¿¡æ¯ç­‰ã€‚&lt;/li>
&lt;li>&lt;code>git tag -n&lt;/code>ï¼šæ˜¾ç¤ºtagåˆ—è¡¨ï¼Œå¹¶åŒæ—¶æ˜¾ç¤ºæ¯ä¸ªtagå¯¹åº”çš„æäº¤ä¿¡æ¯ã€‚&lt;/li>
&lt;li>&lt;code>git ls-remote --tags origin&lt;/code>ï¼šæ˜¾ç¤ºè¿œç¨‹ä»“åº“ä¸­çš„æ‰€æœ‰tagä¿¡æ¯ã€‚æ›´æ¨èè¿™ç§ã€‚
&lt;ol>
&lt;li>æˆ–è€…å…ˆ&lt;code>git fetch&lt;/code>è·å–æœ€æ–°çš„æ›´æ”¹ï¼Œç„¶å&lt;code>git tag&lt;/code>æ£€å‡ºæ‰€æœ‰æ ‡ç­¾ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>åˆ é™¤æ ‡ç­¾
&lt;ol>
&lt;li>&lt;code>git tag -d &amp;lt;tagname&amp;gt;&lt;/code>åˆ é™¤æœ¬åœ°æ ‡ç­¾&lt;/li>
&lt;li>åˆ é™¤è¿œç¨‹æ ‡ç­¾ï¼šé¦–å…ˆéœ€è¦åœ¨æœ¬åœ°åˆ é™¤æ ‡ç­¾ï¼Œç„¶åæ¨é€åˆ°è¿œç¨‹ä»“åº“ &lt;code>git push origin :refs/tags/&amp;lt;tagname&amp;gt;&lt;/code>
&lt;ol>
&lt;li>è¿œç¨‹æ ‡ç­¾æ˜¯&lt;code>refs/tags/v0.0.1&lt;/code>è¿™æ ·å­˜åœ¨çš„ï¼Œè·Ÿåˆ é™¤è¿œç¨‹åˆ†æ”¯å·®ä¸å¤šã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>æ ‡ç­¾ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½ç›´æ¥ä¿®æ”¹,å¦‚æœéœ€è¦ä¿®æ”¹æ ‡ç­¾ï¼Œé€šå¸¸éœ€è¦åˆ é™¤åŸæ ‡ç­¾ï¼Œå¹¶é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°æ ‡ç­¾ã€‚&lt;/li>
&lt;li>æ¨é€æ ‡ç­¾
&lt;ol>
&lt;li>æ‰“çš„æ ‡ç­¾ä¸ä¼šè‡ªåŠ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œéœ€è¦æ‰‹åŠ¨æ¨é€ã€‚&lt;/li>
&lt;li>&lt;code>git push &amp;lt;remote&amp;gt; &amp;lt;tagname&amp;gt;&lt;/code>æ¨é€æŒ‡å®šæ ‡ç­¾åˆ°æŒ‡å®šè¿œç¨‹ä»“åº“ï¼Œä¸€èˆ¬ä¸º&lt;code>origin&lt;/code>&lt;/li>
&lt;li>&lt;code>git push &amp;lt;remote&amp;gt; --tags&lt;/code>æ¨é€æ‰€ç”¨æ ‡ç­¾åˆ°è¿œç¨‹&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="gitå¤æ‚å‘½ä»¤">
&lt;a href="#git%e5%a4%8d%e6%9d%82%e5%91%bd%e4%bb%a4" class="header-anchor">#&lt;/a>
gitå¤æ‚å‘½ä»¤
&lt;/h2>&lt;h3 id="git-log">
&lt;a href="#git-log" class="header-anchor">#&lt;/a>
git log
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git log&lt;/code>ä»¥ç¼ºçœæ ¼å¼æ˜¾ç¤ºå…¨éƒ¨commitå†å²ã€‚æ›´å¤šâ¾ƒå®šä¹‰å‚æ•°è¯·å‚è€ƒåç»­éƒ¨åˆ†ã€‚&lt;code>q&lt;/code>é€€å‡ºï¼Œ&lt;code>ç©ºæ ¼&lt;/code>ä¸‹ä¸€é¡µï¼Œ&lt;code>h&lt;/code>æŸ¥çœ‹å¸®åŠ©
&lt;ul>
&lt;li>&lt;code>git log --stat&lt;/code>ï¼šæ˜¾ç¤ºè¯¦ç»†çš„commitå†å²ã€‚&lt;/li>
&lt;li>&lt;code>git log -&amp;lt;limit&amp;gt;&lt;/code>é™åˆ¶logçš„æ˜¾ç¤ºæ•°é‡ã€‚ä¾‹å¦‚ï¼šâ€git log -5â€ä»…æ˜¾ç¤ºæœ€æ–°5æ¡commitã€‚&lt;/li>
&lt;li>&lt;code>git log --oneline&lt;/code>æ¯â¾æ˜¾ç¤ºâ¼€æ¡commitï¼Œç®€åŒ–ä¿¡æ¯ã€‚ä¸&lt;code>--pretty=oneline&lt;/code>ç­‰æ•ˆ&lt;/li>
&lt;li>&lt;code>git log --author= &amp;quot;&amp;lt;pattern&amp;gt;&amp;quot;&lt;/code>æŒ‰æäº¤è€…åå­—æœç´¢å¹¶æ˜¾ç¤ºcommitã€‚&lt;/li>
&lt;li>&lt;code>git log --grep= &amp;quot;&amp;lt;pattern&amp;gt;&amp;quot;&lt;/code>æŒ‰æŒ‡å®šå†…å®¹æœç´¢å¹¶æ˜¾ç¤ºcommitã€‚&lt;/li>
&lt;li>&lt;code>git log &amp;lt;since&amp;gt;..&amp;lt;until&amp;gt;&lt;/code>æ˜¾ç¤ºæŒ‡å®šèŒƒå›´çš„commitã€‚èŒƒå›´å‚æ•°å¯ä»¥æ˜¯commit IDã€åˆ†â½€åç§°ã€HEADæˆ–ä»»æ„ç›¸å¯¹ä½ç½®ã€‚&lt;/li>
&lt;li>&lt;code>git log -- &amp;lt;file&amp;gt;&lt;/code>ä»…æ˜¾ç¤ºåŒ…å«æŒ‡å®šâ½‚ä»¶ä¿®æ”¹çš„commitã€‚&lt;/li>
&lt;li>&lt;code>git log --graph&lt;/code>ä½¿â½¤&amp;ndash;graphå‚æ•°æ˜¾ç¤ºå›¾å½¢åŒ–çš„branchä¿¡æ¯ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-diff">
&lt;a href="#git-diff" class="header-anchor">#&lt;/a>
git diff
&lt;/h3>&lt;ul>
&lt;li>&lt;code>git diff&lt;/code>â½è¾ƒâ¼¯ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¿®æ”¹ã€‚&lt;/li>
&lt;li>&lt;code>git diff HEAD&lt;/code>â½è¾ƒâ¼¯ä½œåŒºå’Œä¸Šâ¼€æ¬¡commitåçš„ä¿®æ”¹ã€‚
&lt;ul>
&lt;li>HEADæŒ‡å‘å½“å‰åˆ†æ”¯æœ€æ–°çš„commitç‰ˆæœ¬åº“&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git diff --cached&lt;/code>â½è¾ƒæš‚å­˜åŒºå’Œä¸Šâ¼€æ¬¡commitåçš„ä¿®æ”¹ã€‚&lt;/li>
&lt;li>&lt;code>git diff --stashed&lt;/code>æŸ¥çœ‹æš‚å­˜åŒºä¸æœ€æ–°æäº¤çš„å·®å¼‚ï¼Œä¸ä¸Šé¢ä¸€æ ·&lt;/li>
&lt;li>&lt;code>git diff &amp;lt;commit1&amp;gt; &amp;lt;commit2&amp;gt;&lt;/code>æŸ¥çœ‹ä¸¤ä¸ªæäº¤ä¹‹é—´çš„å·®å¼‚ã€‚&lt;/li>
&lt;li>&lt;code>git diff &amp;lt;filename&amp;gt;&lt;/code>åé¢æŒ‡å®šæ–‡ä»¶ï¼ŒåªæŸ¥çœ‹è¯¥æ–‡ä»¶çš„ä¿®æ”¹æƒ…å†µï¼Œæ²¡æœ‰å‚æ•°æŸ¥è¯¢å…¨éƒ¨&lt;/li>
&lt;li>ç”¨&lt;code>git diff HEAD -- readme.txt&lt;/code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç‰ˆæœ¬åº“å’Œå·¥ä½œåŒºé‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ«&lt;/li>
&lt;/ul>
&lt;h3 id="git-config">
&lt;a href="#git-config" class="header-anchor">#&lt;/a>
git config
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>ä½œç”¨ï¼šé€šè¿‡&lt;code>git config&lt;/code>å‘½ä»¤é…ç½®gitçš„é…ç½®æ–‡ä»¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>gité…ç½®æ–‡ä»¶çº§åˆ«åˆ†ä¸ºï¼š&lt;/p>
&lt;ol>
&lt;li>ä»“åº“çº§åˆ« &lt;code>--local&lt;/code> ã€ä¼˜å…ˆçº§æœ€é«˜ã€‘ã€‚æ–‡ä»¶æ‰€åœ¨ä½ç½®ä»“åº“ä¸‹çš„&lt;code>.git/config&lt;/code>&lt;/li>
&lt;li>å½“å‰ç”¨æˆ·çº§åˆ« &lt;code>--global&lt;/code>ã€ä¼˜å…ˆçº§æ¬¡ä¹‹ã€‘&lt;strong>ä¸€èˆ¬é…ç½®å®ƒ&lt;/strong>ã€‚æ–‡ä»¶æ‰€åœ¨ä½ç½®ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„&lt;code>.gitconfig&lt;/code>&lt;/li>
&lt;li>ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·çº§åˆ« &lt;code>--system&lt;/code>ã€ä¼˜å…ˆçº§æœ€ä½ã€‘ã€‚æ–‡ä»¶æ‰€åœ¨ä½ç½®gitå®‰è£…ç›®å½•ä¸‹çš„&lt;code> ./etc/gitconfig&lt;/code>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-l&lt;/code>ã€&lt;code>--list&lt;/code>æŸ¥çœ‹é…ç½®ã€‚&lt;strong>å¸¸ç”¨&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;code>git config -l&lt;/code>æŸ¥çœ‹æ‰€æœ‰çš„é…ç½®ä¿¡æ¯ï¼Œä¾æ¬¡æ˜¯ç³»ç»Ÿçº§åˆ«ã€ç”¨æˆ·çº§åˆ«ã€ä»“åº“çº§åˆ«&lt;/li>
&lt;li>&lt;code>git config --local -l&lt;/code> æŸ¥çœ‹ä»“åº“çº§åˆ«é…ç½®ã€‚å¿…é¡»è¦è¿›å…¥åˆ°å…·ä½“çš„ç›®å½•ä¸‹ã€‚&lt;/li>
&lt;li>&lt;code>git config --global -l&lt;/code> æŸ¥çœ‹å½“å‰ç”¨æˆ·é…ç½®&lt;/li>
&lt;li>&lt;code>git config --system -l&lt;/code> æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·é…ç½®&lt;/li>
&lt;li>å¯ä»¥ä¸&lt;code>--show-origin&lt;/code> æ˜¾ç¤ºæ–‡ä»¶ä½ç½®ï¼Œ&lt;code>--show-scope&lt;/code>æ˜¾ç¤ºæ–‡ä»¶çº§åˆ«&lt;strong>ç»„åˆä½¿ç”¨&lt;/strong>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-e&lt;/code>ã€&lt;code>--edit&lt;/code>æ‰“å¼€ç¼–è¾‘å™¨ç¼–è¾‘&lt;strong>æŒ‡å®šçº§åˆ«&lt;/strong>çš„é…ç½®æ–‡ä»¶ï¼Œæ²¡æœ‰æŒ‡å®šé»˜è®¤ä»“åº“çº§åˆ«ï¼Œä¼šä½¿ç”¨é»˜è®¤ç¼–è¾‘å™¨æ‰“å¼€ç¼–è¾‘ã€‚å®‰è£…çš„æ—¶å€™è®¾ç½®çš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ·»åŠ é…ç½®ã€ä¿®æ”¹é…ç½®ï¼šç›´æ¥é…ç½®å¯¹åº”çš„é…ç½®å‚æ•°å°±è¡Œã€‚ä¸€èˆ¬é…ç½®ç”¨æˆ·çº§åˆ«å°±è¡Œã€‚çœç•¥äº†&lt;code>--add&lt;/code>é€‰é¡¹ã€‚æ²¡æœ‰æŒ‡å®šçº§åˆ«ï¼Œé»˜è®¤ä»“åº“åŸºæœ¬ã€‚å¸¸ç”¨çš„æ·»åŠ é…ç½®å‘½ä»¤:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ç”¨æˆ·é‚®ç®±å’Œç”¨æˆ·åã€‚å®‰è£…gitä¹‹å&lt;strong>å¿…è®¾ç½®çš„é…ç½®&lt;/strong>&lt;/p>
&lt;p>&lt;code>git config --global user.email &amp;quot;Your mail&amp;quot;&lt;/code>&lt;/p>
&lt;p>&lt;code>git config --global user.name &amp;quot;Your name&amp;quot;&lt;/code>&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰é…ç½®ï¼Œåœ¨æäº¤ä»£ç æ—¶ä¼šæœ‰å¦‚ä¸‹é”™è¯¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xxx@DESKTOP-MD21325 MINGW64 /d/test/test &lt;span class="o">(&lt;/span>master&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git commit -m &lt;span class="s2">&amp;#34;feature: add readme&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Author identity unknown
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*** Please tell me who you are.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git config --global user.email &lt;span class="s2">&amp;#34;you@example.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git config --global user.name &lt;span class="s2">&amp;#34;Your Name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">to &lt;span class="nb">set&lt;/span> your account&lt;span class="s1">&amp;#39;s default identity.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Omit --global to set the identity only in this repository.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">fatal: unable to auto-detect email address (got &amp;#39;&lt;/span>xxx@DESKTOP-MD21325.&lt;span class="o">(&lt;/span>none&lt;span class="o">)&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è®¾ç½®è‡ªå·±çš„ä»£ç†ã€‚ç½‘é€Ÿæ…¢&lt;strong>å¿…è®¾ç½®çš„é…ç½®&lt;/strong>&lt;/p>
&lt;p>&lt;code>git config --global http.proxy &amp;quot;http://proxy_ip:port&amp;quot;&lt;/code>&lt;/p>
&lt;p>&lt;code>git config --global https.proxy &amp;quot;https://proxy_ip:port&amp;quot;&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>--unset&lt;/code>å–æ¶ˆé…ç½®ï¼Œæ³¨æ„è¦æŒ‡å®šå–æ¶ˆçš„é…ç½®çº§åˆ«ã€‚å¸¸ç”¨å–æ¶ˆé…ç½®å‘½ä»¤ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å–æ¶ˆä»£ç†é…ç½®&lt;/p>
&lt;p>&lt;code>git config --global --unset http.proxy&lt;/code>&lt;/p>
&lt;p>&lt;code>git config --global --unset https.proxy&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>--get&lt;/code>æŸ¥çœ‹æŒ‡å®šçº§åˆ«ã€æŒ‡å®šé…ç½®é¡¹çš„é…ç½®ï¼Œé»˜è®¤ä»“åº“çº§åˆ«ã€‚å¦‚ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æŸ¥çœ‹ä»£ç†é…ç½®&lt;/p>
&lt;p>&lt;code>git config --global --get http.proxy&lt;/code>&lt;/p>
&lt;p>&lt;code>git config --global --get https.proxy&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git config --global alias.&amp;lt;alias-name&amp;gt; &amp;lt;git-command&amp;gt;&lt;/code>é…ç½®â¼€ä¸ªgitå‘½ä»¤çš„å¿«æ·â½…å¼ã€‚ä¾‹å¦‚ï¼šé…ç½®â€alias.glog log &amp;ndash;graph &amp;ndash;onelineâ€ä½¿â€git glogâ€ç›¸å½“äºâ€git log &amp;ndash;graph &amp;ndash;onelineâ€.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git config --global core.editor &amp;lt;editor&amp;gt;&lt;/code>é…ç½®â½‚æœ¬ç¼–è¾‘å™¨ï¼Œä¾‹å¦‚viï¼Œåœ¨å¿…è¦æ—¶â¾ƒåŠ¨æ‰“å¼€æ­¤â½‚æœ¬ç¼–è¾‘å™¨ã€‚å®‰è£…çš„æ—¶å€™ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤ç¼–è¾‘å™¨ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-submodule">
&lt;a href="#git-submodule" class="header-anchor">#&lt;/a>
git submodule
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;code>git submodule init&lt;/code>åˆå§‹åŒ–å­æ¨¡å—ï¼Œå°†å­æ¨¡å—çš„é…ç½®ä¿¡æ¯å­˜å‚¨åœ¨çˆ¶ä»“åº“ä¸­ã€‚&lt;/p>
&lt;ul>
&lt;li>é€šå¸¸æ‰§è¡Œä¹‹åå†æ‰§è¡Œæ›´æ–°å­æ¨¡å—ä½¿ç”¨ï¼Œå¦‚å…‹éš†å¸¦æœ‰å­æ¨¡å—çš„ä»“åº“ï¼Œæ²¡æœ‰åŠ &lt;code>--recursive&lt;/code>ï¼Œæ˜¯ä¸ä¼šå…‹éš†å­æ¨¡å—çš„&lt;/li>
&lt;li>åˆå§‹åŒ–å­æ¨¡å—ä¹‹åï¼Œæ‰§è¡Œæ›´æ–°å­æ¨¡å—å°±ä¼šæ ¹æ®é…ç½®ä¿¡æ¯ä¸‹è½½å­æ¨¡å—&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git submodule update&lt;/code>æ ¹æ®çˆ¶ä»“åº“å­æ¨¡å—çš„é…ç½®ä¿¡æ¯æ›´æ–°å­æ¨¡å—ï¼Œå¦‚æœæ²¡æœ‰åˆå§‹åŒ–å­æ¨¡å—å¯ä»¥åŠ å‚æ•°&lt;code>--init&lt;/code>ï¼Œä¼šä¸‹è½½ä¸çˆ¶é¡¹ç›®ç»‘å®šç‰ˆæœ¬çš„å­æ¨¡å—ï¼Œè‹¥è¦æ›´æ–°åŠ &lt;code>--remote&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;code>--init&lt;/code>åˆè¯†åŒ–å­æ¨¡å—&lt;/li>
&lt;li>&lt;code>--recursive&lt;/code>ä¼šé€’å½’ä¸‹è½½å­æ¨¡å—çš„å­æ¨¡å—&lt;/li>
&lt;li>&lt;code>--remote&lt;/code>æ ¹æ®å­æ¨¡å—è¿œç¨‹ä»“åº“çš„é…ç½®ä¿¡æ¯æ›´æ–°å­æ¨¡å—ï¼Œä¼šä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„å­æ¨¡å—
&lt;ul>
&lt;li>æ³¨æ„æ›´æ–°ä¹‹åè¦æäº¤æ›´æ–°çš„ç‰ˆæœ¬ï¼Œå¦åˆ™å½“åœ¨æ‰§è¡Œæ›´æ–°å‘½ä»¤æ²¡æœ‰åŠ &lt;code>--remote&lt;/code>æ—¶ä¼šé€€å›ä¸çˆ¶ä»“åº“ç»‘å®šçš„ç‰ˆæœ¬&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>git submodule add &amp;lt;repository&amp;gt; &amp;lt;path&amp;gt;&lt;/code>æ·»åŠ å­æ¨¡å—ã€‚å…¶ä¸­ï¼Œ&lt;code>&amp;lt;repository&amp;gt;&lt;/code>æ˜¯å­æ¨¡å—çš„è¿œç¨‹ä»“åº“åœ°å€ï¼Œ&lt;code>&amp;lt;path&amp;gt;&lt;/code>æ˜¯å­æ¨¡å—åœ¨ä¸»é¡¹ç›®ä¸­çš„è·¯å¾„ã€‚&lt;/p>
&lt;ul>
&lt;li>å­æ¨¡å—å¯ä»¥å½“æ­£å¸¸ä»“åº“ä½¿ç”¨ã€‚åˆ›å»ºæ—¶&lt;code>&amp;lt;path&amp;gt;&lt;/code>è·¯å¾„ä¸èƒ½å­˜åœ¨æ–‡ä»¶ï¼Œæ›´å…‹éš†å·®ä¸å¤šã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="git-subtree">
&lt;a href="#git-subtree" class="header-anchor">#&lt;/a>
git subtree
&lt;/h3>&lt;ul>
&lt;li>ä½œç”¨ï¼šå°†ä¸€ä¸ªä»“åº“ä¸­çš„ç›®å½•ä½œä¸ºå¦ä¸€ä¸ªä»“åº“ï¼Œå¯ä»¥æŒ‡å®šåˆ†æ”¯&lt;/li>
&lt;li>ç”¨é€”ï¼šæ­å»ºé¡¹ç›®ç½‘ç«™æ—¶ï¼Œå°†é¡¹ç›®ç½‘ç«™èµ„æºæ¨é€åˆ°gh-pagesåˆ†æ”¯ä¸Š
&lt;ul>
&lt;li>&lt;code>git subtree push --prefix=dist origin gh-pages&lt;/code>å°†ç›®å½•æ·»åŠ åˆ°&lt;code>gh-pages&lt;/code>åˆ†æ”¯ä¸Šï¼Œ&lt;code>dist&lt;/code>ä¸ºé¡¹ç›®ç½‘ç«™çš„ç›®å½•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git subtree push --prefix=&amp;lt;prefix&amp;gt; &amp;lt;repository&amp;gt; &amp;lt;branch&amp;gt;&lt;/code>å°†å­ç›®å½•çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚å®ƒä¼šå°†å½“å‰ä»“åº“ä¸­å­ç›®å½•çš„ä¿®æ”¹æ¨é€åˆ°æŒ‡å®šçš„è¿œç¨‹ä»“åº“å’Œåˆ†æ”¯ä¸­ã€‚
&lt;ul>
&lt;li>æ³¨æ„ï¼šä»¥è¿™ç§æ¨é€çš„æ–¹å¼æ·»åŠ çš„&lt;code>subtree&lt;/code>ä¸èƒ½æ‰§è¡Œ&lt;code>subtree pull&lt;/code>å‘½ä»¤ï¼Œåªæœ‰é€šè¿‡&lt;code>subtree add&lt;/code>æ·»åŠ çš„&lt;strong>æ‰èƒ½éƒ½æ‰§è¡Œ&lt;/strong>ï¼Œä½†èƒ½å¤Ÿæ‰§è¡Œ&lt;code>subtree push&lt;/code>å‘½ä»¤&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>git subtree pull --prefix=&amp;lt;prefix&amp;gt; &amp;lt;repository&amp;gt; &amp;lt;branch&amp;gt;&lt;/code>è¿™ä¸ªå‘½ä»¤ç”¨äºä»è¿œç¨‹ä»“åº“æ›´æ–°å­ç›®å½•çš„å†…å®¹ã€‚å®ƒä¼šæ‹‰å–è¿œç¨‹ä»“åº“çš„æœ€æ–°ä»£ç ï¼Œå¹¶æ›´æ–°åˆ°å½“å‰ä»“åº“çš„å­ç›®å½•ä¸­ã€‚&lt;/li>
&lt;li>&lt;code>git subtree add --prefix=&amp;lt;prefix&amp;gt; &amp;lt;repository&amp;gt; &amp;lt;branch&amp;gt;&lt;/code>è¿™ä¸ªå‘½ä»¤ç”¨äºå°†è¿œç¨‹ä»“åº“çš„å†…å®¹ä½œä¸ºå­ç›®å½•æ·»åŠ åˆ°å½“å‰ä»“åº“ä¸­ã€‚&lt;code>&amp;lt;prefix&amp;gt;&lt;/code>æ˜¯å­ç›®å½•çš„åç§°ï¼Œ&lt;code>&amp;lt;repository&amp;gt;&lt;/code>æ˜¯è¿œç¨‹ä»“åº“çš„åœ°å€ï¼Œ&lt;code>&amp;lt;branch&amp;gt;&lt;/code>æ˜¯è¦åˆå¹¶çš„åˆ†æ”¯ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="git-rebase">
&lt;a href="#git-rebase" class="header-anchor">#&lt;/a>
git rebase
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>ä½œç”¨ï¼šrebaseç¿»è¯‘æˆå˜åŸºï¼Œé¡¾åæ€ä¹‰ï¼šæ”¹å˜åŸºå‡†ç‚¹ã€‚å¯ä»¥ä½¿æäº¤å†å²æ›´åŠ æ¸…æ™°å’Œçº¿æ€§ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åŸå› ï¼šé€šè¿‡åˆå¹¶ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯ï¼Œæäº¤å†å²ä¼šå¾ˆé”™ä¹±ã€‚è€Œé€šè¿‡å˜åŸºï¼Œä¼šä½¿å¾—æäº¤å†å²æ›´åŠ æ•´æ´å’Œå¯è¯»ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚ä½•å®ç°ï¼šå°±æ˜¯ä¿®æ”¹åˆ›å»ºåˆ†æ”¯çš„èµ·ç‚¹ï¼ˆåŸºå‡†ç‚¹ï¼‰ï¼Œåˆ°æœ€æ–°çš„æäº¤ã€‚èµ·ç‚¹å˜äº†ï¼Œæäº¤å†å²å°±ç®€åŒ–äº†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‘½ä»¤ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>git rebase &amp;lt;base&amp;gt;&lt;/code>åŸºäº&lt;code>&amp;lt;base&amp;gt;&lt;/code>å¯¹å½“å‰åˆ†â½€è¿›â¾rebase&lt;code>ã€‚&amp;lt;base&amp;gt;&lt;/code>å¯ä»¥æ˜¯commitã€åˆ†â½€åç§°ã€tagæˆ–ç›¸å¯¹äºHEADçš„commitã€‚&lt;/li>
&lt;li>&lt;code>git rebase -i &amp;lt;base&amp;gt;&lt;/code>ä»¥äº¤äº’æ¨¡å¼å¯¹å½“å‰åˆ†â½€åšrebaseã€‚&lt;/li>
&lt;li>rebaseçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°å†²çªï¼Œè§£å†³å†²çªä¹‹åéœ€è¦ä½¿ç”¨&lt;code>git add&lt;/code>å‘½ä»¤å°†è§£å†³å†²çªåçš„æ–‡ä»¶æ ‡è®°ä¸ºå·²è§£å†³ï¼Œç„¶åï¼Œä½¿ç”¨&lt;code>git rebase --continue&lt;/code>å‘½ä»¤ç»§ç»­rebaseè¿‡ç¨‹ã€‚Gitä¼šå°è¯•ç»§ç»­åº”ç”¨å‰©ä½™çš„æäº¤ã€‚å¦‚æœå†æ¬¡å‡ºç°å†²çªï¼Œä½ éœ€è¦é‡å¤ä¸Šè¿°è§£å†³å†²çªå’Œç»§ç»­rebaseçš„æ­¥éª¤ã€‚&lt;/li>
&lt;li>å¦‚æœåœ¨rebaseè¿‡ç¨‹ä¸­å‡ºç°äº†é—®é¢˜ï¼Œæˆ–è€…ä½ å†³å®šæ”¾å¼ƒrebaseæ“ä½œï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>git rebase --abort&lt;/code>å‘½ä»¤æ¥æ’¤é”€æ•´ä¸ªrebaseæ“ä½œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>git rebaseçš„æ³¨æ„äº‹é¡¹&lt;/p>
&lt;ul>
&lt;li>&lt;strong>é¿å…å¯¹å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„æäº¤æ‰§è¡Œrebaseæ“ä½œ&lt;/strong>ï¼šè¿™å¯èƒ½ä¼šå¯¼è‡´æäº¤å†å²çš„ä¸ä¸€è‡´ï¼Œç»™å…¶ä»–åä½œè€…å¸¦æ¥å›°æ‰°ã€‚&lt;/li>
&lt;li>&lt;strong>ä¿æŒå·¥ä½œç›®å½•å¹²å‡€&lt;/strong>ï¼šåœ¨æ‰§è¡Œrebaseä¹‹å‰ï¼Œç¡®ä¿ä½ çš„å·¥ä½œç›®å½•ä¸­æ²¡æœ‰æœªæäº¤çš„æ›´æ”¹ã€‚&lt;/li>
&lt;li>&lt;strong>è°¨æ…ä½¿ç”¨&lt;/strong>ï¼šç”±äºrebaseä¼šæ”¹å˜æäº¤å†å²ï¼Œå› æ­¤åœ¨ä¸ä»–äººå…±äº«åˆ†æ”¯æ—¶è¦ç‰¹åˆ«å°å¿ƒã€‚é€šå¸¸ï¼Œåœ¨å…¬å…±åˆ†æ”¯ä¸Šåº”è¯¥ä½¿ç”¨mergeè€Œä¸æ˜¯rebaseã€‚&lt;/li>
&lt;/ul>
&lt;p>é€šè¿‡æŒæ¡git rebaseçš„ç”¨æ³•å’Œæ³¨æ„äº‹é¡¹ï¼Œä½ å¯ä»¥æ›´æœ‰æ•ˆåœ°ç®¡ç†ä½ çš„Gitä»“åº“ï¼Œä¿æŒä»£ç çš„æ¸…æ™°å’Œæ•´æ´ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>â€‹&lt;/p>
&lt;hr>
&lt;h2 id="æ‰©å±•">
&lt;a href="#%e6%89%a9%e5%b1%95" class="header-anchor">#&lt;/a>
æ‰©å±•
&lt;/h2>&lt;h3 id="gitignoreæ–‡ä»¶">
&lt;a href="#gitignore%e6%96%87%e4%bb%b6" class="header-anchor">#&lt;/a>
.gitignoreæ–‡ä»¶
&lt;/h3>&lt;p>Gitæä¾›äº†&lt;code>.gitignore&lt;/code>æ–‡ä»¶ï¼Œç”¨äºæŒ‡å®šå“ªäº›æ–‡ä»¶æˆ–ç›®å½•åº”è¯¥è¢«Gitå¿½ç•¥ï¼Œä¸çº³å…¥ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ã€‚&lt;code>.gitignore&lt;/code>æ–‡ä»¶æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥åŒ…å«ä¸€äº›ç®€å•çš„è§„åˆ™ï¼ŒæŒ‡å®šåº”è¯¥å¿½ç•¥å“ªäº›æ–‡ä»¶æˆ–ç›®å½•ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›.gitignoreæ–‡ä»¶çš„ç¤ºä¾‹è§„åˆ™ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å¿½ç•¥æ‰€æœ‰ä»¥.tmpç»“å°¾çš„æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">*.tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¿½ç•¥æ‰€æœ‰çš„logæ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">*.log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¿½ç•¥æ‰€æœ‰çš„.ideaç›®å½•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">.idea/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¿½ç•¥æ‰€æœ‰çš„buildç›®å½•åŠå…¶å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">build/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¿½ç•¥æ ¹ç›®å½•ä¸‹çš„config.jsonæ–‡ä»¶ï¼Œä½†ä¸å¿½ç•¥å­ç›®å½•ä¸­çš„config.jsonæ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/config.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¿½ç•¥æ‰€æœ‰çš„node_modulesç›®å½•åŠå…¶å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">node_modules/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¿½ç•¥æ‰€æœ‰çš„DS_Storeæ–‡ä»¶ï¼ˆMac OS Xç³»ç»Ÿä¸­çš„æ–‡ä»¶ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">.DS_Store
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>å¯ä»¥å°†è¿™äº›è§„åˆ™å†™å…¥.gitignoreæ–‡ä»¶ä¸­ï¼Œå¹¶å°†è¯¥æ–‡ä»¶æ·»åŠ åˆ°Gitä»“åº“ä¸­ï¼Œä»¥ä½¿Gitå¿½ç•¥è¿™äº›æ–‡ä»¶æˆ–ç›®å½•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿æŸäº›æ–‡ä»¶æˆ–ç›®å½•å·²ç»è¢«æ·»åŠ åˆ°Gitä»“åº“ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹.gitignoreæ–‡ä»¶æ¥è®©Gitå¿½ç•¥å®ƒä»¬ï¼Œä½†éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰èƒ½ä½¿.gitignoreæ–‡ä»¶ç”Ÿæ•ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git rm -r --cached .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;update .gitignore&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™äº›å‘½ä»¤ä¼šåˆ é™¤Gitç¼“å­˜ä¸­å·²ç»æ·»åŠ çš„æ–‡ä»¶ï¼Œç„¶åé‡æ–°æ·»åŠ æ–‡ä»¶å¹¶æäº¤æ›´æ”¹ï¼Œä»¥ä½¿.gitignoreæ–‡ä»¶ç”Ÿæ•ˆã€‚&lt;/p>
&lt;p>&lt;strong>æ€»ç»“ï¼š&lt;/strong>&lt;/p>
&lt;p>å½“Gitæ‰§è¡Œæäº¤æ“ä½œæ—¶ï¼Œå®ƒä¼šæ£€æŸ¥.gitignoreæ–‡ä»¶ä¸­åˆ—å‡ºçš„æ–‡ä»¶å’Œç›®å½•ï¼Œå¹¶å°†å®ƒä»¬ä»æäº¤ä¸­æ’é™¤ã€‚è¿™æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸ºæœ‰äº›æ–‡ä»¶æˆ–ç›®å½•ä¸åº”è¯¥è¢«çº³å…¥ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œä¾‹å¦‚ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ã€ä¸´æ—¶æ–‡ä»¶ç­‰ã€‚&lt;/p>
&lt;p>.gitignoreæ–‡ä»¶çš„è¯­æ³•æ˜¯åŸºäºæ¨¡å¼åŒ¹é…çš„ï¼Œå…¶ä¸­çš„ç‰¹æ®Šå­—ç¬¦æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>*ï¼šåŒ¹é…ä»»æ„å­—ç¬¦ï¼Œä½†ä¸åŒ…æ‹¬è·¯å¾„åˆ†éš”ç¬¦ï¼ˆ/ï¼‰ã€‚&lt;/li>
&lt;li>?ï¼šåŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œä½†ä¸åŒ…æ‹¬è·¯å¾„åˆ†éš”ç¬¦ï¼ˆ/ï¼‰ã€‚&lt;/li>
&lt;li>/ï¼šè·¯å¾„åˆ†éš”ç¬¦ï¼Œç”¨äºæŒ‡å®šç›®å½•ã€‚&lt;/li>
&lt;li>!ï¼šç”¨äºå¦å®šæ¨¡å¼ï¼Œå³ä¸å¿½ç•¥æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¯ä»¥åœ¨.gitignoreæ–‡ä»¶ä¸­ä½¿ç”¨é€šé…ç¬¦ã€è·¯å¾„ã€æ³¨é‡Šç­‰è¯­æ³•ï¼Œä»¥æ›´ç²¾ç¡®åœ°æŒ‡å®šéœ€è¦å¿½ç•¥çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚åŒæ—¶ï¼Œå¯ä»¥åœ¨ä»“åº“çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.gitignoreæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨å­ç›®å½•ä¸­åˆ›å»ºç‹¬ç«‹çš„.gitignoreæ–‡ä»¶ã€‚&lt;/p>
&lt;hr>
&lt;h3 id="gitè´¦æˆ·è®¤è¯">
&lt;a href="#git%e8%b4%a6%e6%88%b7%e8%ae%a4%e8%af%81" class="header-anchor">#&lt;/a>
gitè´¦æˆ·è®¤è¯
&lt;/h3>&lt;ul>
&lt;li>å½“æˆ‘ä»¬å¯¹è¿œç¨‹ä»“åº“å°±è¡Œä¿®æ”¹æ—¶ï¼Œéœ€è¦å¯¹åº”çš„æƒé™ï¼Œä¸æ˜¯ä»€ä¹ˆäººéƒ½èƒ½å¤Ÿä¿®æ”¹ä»“åº“ã€‚åªæœ‰é€šè¿‡äº†gitè´¦æˆ·è®¤è¯ï¼Œæ‰èƒ½ä¿®æ”¹å¯¹åº”çš„ä»“åº“ã€‚&lt;/li>
&lt;li>å¸¸è§gitè´¦æˆ·è®¤è¯çš„æ–¹å¼ï¼š
&lt;ul>
&lt;li>&lt;strong>SSHç§˜é’¥è®¤è¯&lt;/strong>
&lt;ul>
&lt;li>è¿™æ˜¯Gitä¸­æœ€å¸¸è§çš„è®¤è¯æ–¹å¼ä¹‹ä¸€ã€‚ç”¨æˆ·é¦–å…ˆç”Ÿæˆä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œç„¶åå°†&lt;strong>å…¬é’¥&lt;/strong>æ·»åŠ åˆ°GitæœåŠ¡å™¨ä¸Šçš„ç”¨æˆ·å¸æˆ·ä¸­ã€‚å½“ç”¨æˆ·å°è¯•ä¸GitæœåŠ¡å™¨è¿›è¡Œé€šä¿¡æ—¶ï¼ŒGitå°†ä½¿ç”¨ç§é’¥è¿›è¡Œèº«ä»½éªŒè¯ã€‚è¿™ç§æ–¹å¼ç›¸å¯¹å®‰å…¨ï¼Œå› ä¸ºç§é’¥æ˜¯ä¿å­˜åœ¨ç”¨æˆ·æœ¬åœ°æœºå™¨ä¸Šçš„ï¼Œä¸ä¼šè¢«ä¼ è¾“åˆ°GitæœåŠ¡å™¨ã€‚&lt;/li>
&lt;li>ç§˜é’¥ç”Ÿæˆå‘½ä»¤ï¼šbashä¸­è¿è¡Œ&lt;code>ssh-keygen&lt;/code>,ä¸€ç›´å›è½¦å°±è¡Œï¼Œç§˜é’¥ä½ç½®ï¼šä¸»ç›®å½•ä¸‹çš„&lt;code>.ssh&lt;/code>ç›®å½•&lt;/li>
&lt;li>å…¬é’¥è®¾ç½®ä½ç½®ï¼šgithubè´¦æˆ·&lt;code>Settings&lt;/code>-&amp;gt;&lt;code>SSH and GPG keys&lt;/code>-&amp;gt;&lt;code>New SSH key&lt;/code>å°†å…¬é’¥å¤åˆ¶ç²˜è´´ä¿å­˜å°±è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>HTTPSè®¤è¯&lt;/strong>
&lt;ul>
&lt;li>åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œç”¨æˆ·éœ€è¦æä¾›&lt;strong>ç”¨æˆ·å&lt;/strong>å’Œ&lt;strong>å¯†ç &lt;/strong>è¿›è¡Œèº«ä»½éªŒè¯ã€‚ç”¨æˆ·éœ€è¦åœ¨GitæœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªç”¨æˆ·å¸æˆ·ï¼Œå¹¶å°†å…¶å…³è”åˆ°æœ¬åœ°çš„Gitä»“åº“ä¸­ã€‚å½“ç”¨æˆ·æ‰§è¡Œéœ€è¦èº«ä»½éªŒè¯çš„æ“ä½œæ—¶ï¼ŒGitä¼šè¦æ±‚è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚è¿™ç§æ–¹å¼ç›¸å¯¹ç®€å•ï¼Œé€‚ç”¨äºä¸ªäººé¡¹ç›®æˆ–å°å‹å›¢é˜Ÿã€‚&lt;/li>
&lt;li>è®¾ç½®ä½ç½®ï¼šåœ¨ä½¿ç”¨Gitè¿›è¡Œæ“ä½œæ—¶ï¼Œå¦‚pushæˆ–pullï¼Œç³»ç»Ÿä¼šæç¤ºä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œèº«ä»½éªŒè¯ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>è®¿é—®ä»¤ç‰Œï¼ˆPersonal Access Tokenï¼‰è®¤è¯&lt;/strong>ï¼šä¸å¸¸ç”¨
&lt;ul>
&lt;li>è®¿é—®ä»¤ç‰Œæä¾›äº†ä¸€ç§æ›´å®‰å…¨ã€æ›´çµæ´»çš„èº«ä»½éªŒè¯æ–¹å¼ï¼Œå› ä¸ºå®ƒå¯ä»¥é™åˆ¶ä»¤ç‰Œçš„ä½¿ç”¨æƒé™ï¼Œå¹¶ä¸”å¯ä»¥éšæ—¶æ’¤é”€æˆ–é‡æ–°ç”Ÿæˆä»¤ç‰Œã€‚&lt;/li>
&lt;li>è®¾ç½®ä½ç½®ï¼šgithubè´¦æˆ·&lt;code>Settings&lt;/code>-&amp;gt;&lt;code>Developer Settings&lt;/code>-&amp;gt;&lt;code>Personal access tokens&lt;/code>-&amp;gt;&lt;code>Tokens (classic)&lt;/code>-&amp;gt;&lt;code>Generate new token&lt;/code>ï¼Œç„¶åæ ¹æ®è‡ªå·±çš„éœ€æ±‚è®¾ç½®tokençš„æƒé™ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="ssh-keygen">
&lt;a href="#ssh-keygen" class="header-anchor">#&lt;/a>
ssh-keygen
&lt;/h4>&lt;p>&lt;code>ssh-keygen&lt;/code>å‘½ä»¤æ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆã€ç®¡ç†å’Œè½¬æ¢SSHè®¤è¯å¯†é’¥çš„å·¥å…·ã€‚å®ƒæ”¯æŒRSAå’ŒDSAä¸¤ç§è®¤è¯å¯†é’¥ç±»å‹ï¼Œå¹¶ä¸”æä¾›äº†å¤šç§é€‰é¡¹å’Œå‚æ•°ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚&lt;/p>
&lt;p>ä½¿ç”¨&lt;code>ssh-keygen&lt;/code>å‘½ä»¤ï¼Œä½ å¯ä»¥ç”Ÿæˆæ–°çš„å¯†é’¥å¯¹ï¼ŒæŒ‡å®šå¯†é’¥çš„é•¿åº¦ã€ç±»å‹ä»¥åŠä¿å­˜çš„æ–‡ä»¶åã€‚ç”Ÿæˆçš„ç§é’¥å°†ä¿å­˜åœ¨æœ¬åœ°ï¼Œè€Œå…¬é’¥åˆ™ç”¨äºåœ¨SSHæœåŠ¡å™¨ä¸Šè¿›è¡Œèº«ä»½éªŒè¯ã€‚&lt;/p>
&lt;p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„&lt;code>ssh-keygen&lt;/code>å‘½ä»¤é€‰é¡¹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>-t&lt;/code>ï¼šæŒ‡å®šè¦åˆ›å»ºçš„å¯†é’¥ç±»å‹ï¼Œé»˜è®¤ä¸ºRSAã€‚&lt;/li>
&lt;li>&lt;code>-b&lt;/code>ï¼šæŒ‡å®šå¯†é’¥é•¿åº¦ï¼ˆä»¥ä½ä¸ºå•ä½ï¼‰ã€‚å¯¹äºRSAå¯†é’¥ï¼Œæœ€å°è¦æ±‚æ˜¯768ä½ï¼Œé»˜è®¤æ˜¯2048ä½ã€‚å¯¹äºDSAå¯†é’¥ï¼Œé•¿åº¦å¿…é¡»æ˜¯1024ä½ï¼ˆæ ¹æ®FIPS 1862æ ‡å‡†è§„å®šï¼‰ã€‚&lt;/li>
&lt;li>&lt;code>-f&lt;/code>ï¼šæŒ‡å®šç”¨äºä¿å­˜å¯†é’¥çš„æ–‡ä»¶åã€‚å¦‚æœä¸æŒ‡å®šï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼&lt;code>id_rsa&lt;/code>ï¼ˆå¯¹äºç§é’¥ï¼‰å’Œ&lt;code>id_rsa.pub&lt;/code>ï¼ˆå¯¹äºå…¬é’¥ï¼‰ã€‚&lt;/li>
&lt;li>&lt;code>-C&lt;/code>ï¼šæä¾›ä¸€ä¸ªæ–°æ³¨é‡Šï¼Œé€šå¸¸ç”¨äºæ ‡è¯†å¯†é’¥çš„ç”¨é€”æˆ–æ‰€æœ‰è€…ã€‚&lt;/li>
&lt;li>&lt;code>-P&lt;/code> å’Œ &lt;code>-N&lt;/code>ï¼šåˆ†åˆ«ç”¨äºæä¾›æ—§å¯†ç å’Œæ–°å¯†ç ï¼Œä»¥ä¿æŠ¤ç§é’¥æ–‡ä»¶ã€‚å¦‚æœç•™ç©ºï¼Œåˆ™è¡¨ç¤ºä¸éœ€è¦å¯†ç ã€‚&lt;/li>
&lt;/ul>
&lt;p>åœ¨ç”Ÿæˆå¯†é’¥å¯¹åï¼Œä½ å¯ä»¥å°†å…¬é’¥å¤åˆ¶åˆ°éœ€è¦è®¿é—®çš„SSHæœåŠ¡å™¨ä¸Šï¼Œé€šå¸¸æ˜¯å°†å…¬é’¥å†…å®¹è¿½åŠ åˆ°æœåŠ¡å™¨çš„&lt;code>~/.ssh/authorized_keys&lt;/code>æ–‡ä»¶ä¸­ã€‚è¿™æ ·ï¼Œå½“ä½ ä½¿ç”¨SSHå®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨æ—¶ï¼Œå®¢æˆ·ç«¯å°†ä½¿ç”¨ç§é’¥è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¦‚æœéªŒè¯æˆåŠŸï¼Œä½ å°†èƒ½å¤Ÿæ— éœ€è¾“å…¥å¯†ç å³å¯ç™»å½•åˆ°æœåŠ¡å™¨ã€‚&lt;/p>
&lt;p>è¯·æ³¨æ„ï¼Œç§é’¥çš„å®‰å…¨æ€§è‡³å…³é‡è¦ã€‚ç§é’¥åº”è¯¥å¦¥å–„ä¿ç®¡ï¼Œå¹¶ä¸”ä¸åº”è¯¥ä¸å…¶ä»–äººå…±äº«ã€‚åŒæ—¶ï¼Œå®šæœŸæ›´æ¢å¯†é’¥å¯¹ä¹Ÿæ˜¯ä¿æŒå®‰å…¨æ€§çš„å¥½ä¹ æƒ¯ã€‚&lt;/p>
&lt;p>é™¤äº†ç”Ÿæˆå’Œç®¡ç†å¯†é’¥å¯¹ï¼Œ&lt;code>ssh-keygen&lt;/code>è¿˜æä¾›äº†å…¶ä»–åŠŸèƒ½ï¼Œå¦‚è½¬æ¢å¯†é’¥æ ¼å¼ã€è¯»å–å¯†é’¥æ–‡ä»¶ç­‰ã€‚ä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹&lt;code>ssh-keygen&lt;/code>çš„å¸®åŠ©æ–‡æ¡£æˆ–æ‰‹å†Œé¡µï¼ˆé€šè¿‡è¿è¡Œ&lt;code>man ssh-keygen&lt;/code>å‘½ä»¤ï¼‰æ¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯å’Œç”¨æ³•ç¤ºä¾‹ã€‚&lt;/p></description></item><item><title>Go flagåº“ä»‹ç»</title><link>https://arlettebrook.github.io/p/go-flag%E5%BA%93%E4%BB%8B%E7%BB%8D/</link><pubDate>Mon, 22 Apr 2024 18:02:17 +0800</pubDate><guid>https://arlettebrook.github.io/p/go-flag%E5%BA%93%E4%BB%8B%E7%BB%8D/</guid><description>&lt;h2 id="ç®€ä»‹">
&lt;a href="#%e7%ae%80%e4%bb%8b" class="header-anchor">#&lt;/a>
ç®€ä»‹
&lt;/h2>&lt;p>&lt;code>flag&lt;/code>ç”¨äºè§£æå‘½ä»¤è¡Œé€‰é¡¹ã€‚æœ‰è¿‡ç±» Unix ç³»ç»Ÿä½¿ç”¨ç»éªŒçš„ç«¥é‹å¯¹å‘½ä»¤è¡Œé€‰é¡¹åº”è¯¥ä¸é™Œç”Ÿã€‚ä¾‹å¦‚å‘½ä»¤&lt;code>ls -al&lt;/code>åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•çš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶ä¸­&lt;code>-al&lt;/code>å°±æ˜¯å‘½ä»¤è¡Œé€‰é¡¹ã€‚&lt;/p>
&lt;p>å‘½ä»¤è¡Œé€‰é¡¹åœ¨å®é™…å¼€å‘ä¸­å¾ˆå¸¸ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å†™å·¥å…·çš„æ—¶å€™ã€‚&lt;/p>
&lt;ul>
&lt;li>æŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œå¦‚&lt;code>redis-server ./redis.conf&lt;/code>ä»¥å½“å‰ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶&lt;code>redis.conf&lt;/code>å¯åŠ¨ Redis æœåŠ¡å™¨ï¼›&lt;/li>
&lt;li>è‡ªå®šä¹‰æŸäº›å‚æ•°ï¼Œå¦‚&lt;code>python -m SimpleHTTPServer 8080&lt;/code>å¯åŠ¨ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œç›‘å¬ 8080 ç«¯å£ã€‚å¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ç›‘å¬ 8000 ç«¯å£ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨
&lt;/h2>&lt;p>å­¦ä¹ ä¸€ä¸ªåº“çš„ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹&lt;code>flag&lt;/code>åº“çš„åŸºæœ¬ä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">intflag&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">boolflag&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stringflag&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IntVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">intflag&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;intflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;int flag value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BoolVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">boolflag&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;boolflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;bool flag value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StringVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">stringflag&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;stringflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;default&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;string flag value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;int flag:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">intflag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;bool flag:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">boolflag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;string flag:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">stringflag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å…ˆç¼–è¯‘ç¨‹åºï¼Œç„¶åè¿è¡Œï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯ Win10 + Git Bashï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go build -o main.exe main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe -intflag &lt;span class="m">12&lt;/span> -boolflag &lt;span class="m">1&lt;/span> -stringflag &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">int flag: &lt;span class="m">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bool flag: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">string flag: &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä¸è®¾ç½®æŸä¸ªé€‰é¡¹ï¼Œç›¸åº”å˜é‡ä¼šå–é»˜è®¤å€¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe -intflag &lt;span class="m">12&lt;/span> -boolflag &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">int flag: &lt;span class="m">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bool flag: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">string flag: default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰è®¾ç½®çš„é€‰é¡¹&lt;code>stringflag&lt;/code>ä¸ºé»˜è®¤å€¼&lt;code>default&lt;/code>ã€‚&lt;/p>
&lt;p>è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨&lt;code>go run&lt;/code>ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šå…ˆç¼–è¯‘ç¨‹åºç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå°†å‘½ä»¤è¡Œä¸­çš„å…¶å®ƒé€‰é¡¹ä¼ ç»™è¿™ä¸ªç¨‹åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">go run main.go -intflag &lt;span class="m">12&lt;/span> -boolflag &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥ä½¿ç”¨&lt;code>-h&lt;/code>æ˜¾ç¤ºé€‰é¡¹å¸®åŠ©ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage of D:&lt;span class="se">\c&lt;/span>ode&lt;span class="se">\g&lt;/span>olang&lt;span class="se">\s&lt;/span>rc&lt;span class="se">\g&lt;/span>ithub.com&lt;span class="se">\d&lt;/span>arjun&lt;span class="se">\c&lt;/span>md&lt;span class="se">\f&lt;/span>lag&lt;span class="se">\m&lt;/span>ain.exe:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -boolflag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bool flag value
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -intflag int
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> int flag value
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -stringflag string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> string flag value &lt;span class="o">(&lt;/span>default &lt;span class="s2">&amp;#34;default&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ€»ç»“ä¸€ä¸‹ï¼Œä½¿ç”¨&lt;code>flag&lt;/code>åº“çš„ä¸€èˆ¬æ­¥éª¤ï¼š&lt;/p>
&lt;ul>
&lt;li>å®šä¹‰ä¸€äº›å…¨å±€å˜é‡å­˜å‚¨é€‰é¡¹çš„å€¼ï¼Œå¦‚è¿™é‡Œçš„&lt;code>intflag/boolflag/stringflag&lt;/code>ï¼›&lt;/li>
&lt;li>åœ¨&lt;code>init&lt;/code>æ–¹æ³•ä¸­ä½¿ç”¨&lt;code>flag.TypeVar&lt;/code>æ–¹æ³•å®šä¹‰é€‰é¡¹ï¼Œè¿™é‡Œçš„&lt;code>Type&lt;/code>å¯ä»¥ä¸ºåŸºæœ¬ç±»å‹&lt;code>Int/Uint/Float64/Bool&lt;/code>ï¼Œè¿˜å¯ä»¥æ˜¯æ—¶é—´é—´éš”&lt;code>time.Duration&lt;/code>ã€‚å®šä¹‰æ—¶ä¼ å…¥å˜é‡çš„åœ°å€ã€é€‰é¡¹åã€é»˜è®¤å€¼å’Œå¸®åŠ©ä¿¡æ¯ï¼›&lt;/li>
&lt;li>åœ¨&lt;code>main&lt;/code>æ–¹æ³•ä¸­è°ƒç”¨&lt;code>flag.Parse&lt;/code>ä»&lt;code>os.Args[1:]&lt;/code>ä¸­è§£æé€‰é¡¹ã€‚å› ä¸º&lt;code>os.Args[0]&lt;/code>ä¸ºå¯æ‰§è¡Œç¨‹åºè·¯å¾„ï¼Œä¼šè¢«å‰”é™¤ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ³¨æ„ç‚¹ï¼š&lt;/p>
&lt;p>&lt;code>flag.Parse&lt;/code>æ–¹æ³•å¿…é¡»åœ¨æ‰€æœ‰é€‰é¡¹éƒ½å®šä¹‰ä¹‹åè°ƒç”¨ï¼Œä¸”&lt;code>flag.Parse&lt;/code>è°ƒç”¨ä¹‹åä¸èƒ½å†å®šä¹‰é€‰é¡¹ã€‚å¦‚æœæŒ‰ç…§å‰é¢çš„æ­¥éª¤ï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°é—®é¢˜ã€‚ å› ä¸º&lt;code>init&lt;/code>åœ¨æ‰€æœ‰ä»£ç ä¹‹å‰æ‰§è¡Œï¼Œå°†é€‰é¡¹å®šä¹‰éƒ½æ”¾åœ¨&lt;code>init&lt;/code>ä¸­ï¼Œ&lt;code>main&lt;/code>å‡½æ•°ä¸­æ‰§è¡Œ&lt;code>flag.Parse&lt;/code>æ—¶æ‰€æœ‰é€‰é¡¹éƒ½å·²ç»å®šä¹‰äº†ã€‚&lt;/p>
&lt;h2 id="é€‰é¡¹æ ¼å¼">
&lt;a href="#%e9%80%89%e9%a1%b9%e6%a0%bc%e5%bc%8f" class="header-anchor">#&lt;/a>
é€‰é¡¹æ ¼å¼
&lt;/h2>&lt;p>&lt;code>flag&lt;/code>åº“æ”¯æŒä¸‰ç§å‘½ä»¤è¡Œé€‰é¡¹æ ¼å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">-flag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-flag&lt;span class="o">=&lt;/span>x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-flag x
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>-&lt;/code>å’Œ&lt;code>--&lt;/code>éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚æœ‰äº›åº“ä½¿ç”¨&lt;code>-&lt;/code>è¡¨ç¤ºçŸ­é€‰é¡¹ï¼Œ&lt;code>--&lt;/code>è¡¨ç¤ºé•¿é€‰é¡¹ã€‚ç›¸å¯¹è€Œè¨€ï¼Œ&lt;code>flag&lt;/code>ä½¿ç”¨èµ·æ¥æ›´ç®€å•ã€‚&lt;/p>
&lt;p>ç¬¬ä¸€ç§å½¢å¼åªæ”¯æŒå¸ƒå°”ç±»å‹çš„é€‰é¡¹ï¼Œå‡ºç°å³ä¸º&lt;code>true&lt;/code>ï¼Œä¸å‡ºç°ä¸ºé»˜è®¤å€¼ã€‚ ç¬¬ä¸‰ç§å½¢å¼ä¸æ”¯æŒå¸ƒå°”ç±»å‹çš„é€‰é¡¹ã€‚å› ä¸ºè¿™ç§å½¢å¼çš„å¸ƒå°”é€‰é¡¹åœ¨ç±» Unix ç³»ç»Ÿä¸­å¯èƒ½ä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºã€‚çœ‹ä¸‹é¢çš„å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cmd -x *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ï¼Œ&lt;code>*&lt;/code>æ˜¯ shell é€šé…ç¬¦ã€‚å¦‚æœæœ‰åå­—ä¸º 0ã€falseçš„æ–‡ä»¶ï¼Œå¸ƒå°”é€‰é¡¹&lt;code>-x&lt;/code>å°†ä¼šå–&lt;code>false&lt;/code>ã€‚åä¹‹ï¼Œå¸ƒå°”é€‰é¡¹&lt;code>-x&lt;/code>å°†ä¼šå–&lt;code>true&lt;/code>ã€‚è€Œä¸”è¿™ä¸ªé€‰é¡¹æ¶ˆè€—äº†ä¸€ä¸ªå‚æ•°ã€‚ å¦‚æœè¦æ˜¾ç¤ºè®¾ç½®ä¸€ä¸ªå¸ƒå°”é€‰é¡¹ä¸º&lt;code>false&lt;/code>ï¼Œåªèƒ½ä½¿ç”¨&lt;code>-flag=false&lt;/code>è¿™ç§å½¢å¼ã€‚&lt;/p>
&lt;p>é‡åˆ°ç¬¬ä¸€ä¸ªéé€‰é¡¹å‚æ•°ï¼ˆå³ä¸æ˜¯ä»¥&lt;code>-&lt;/code>å’Œ&lt;code>--&lt;/code>å¼€å¤´çš„ï¼‰æˆ–ç»ˆæ­¢ç¬¦&lt;code>--&lt;/code>ï¼Œè§£æåœæ­¢ã€‚è¿è¡Œä¸‹é¢ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe noflag -intflag &lt;span class="m">12&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†ä¼šè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">int flag: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bool flag: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">string flag: default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› ä¸ºè§£æé‡åˆ°&lt;code>noflag&lt;/code>å°±åœæ­¢äº†ï¼Œåé¢çš„é€‰é¡¹&lt;code>-intflag&lt;/code>æ²¡æœ‰è¢«è§£æåˆ°ã€‚æ‰€ä»¥æ‰€æœ‰é€‰é¡¹éƒ½å–çš„é»˜è®¤å€¼ã€‚&lt;/p>
&lt;p>è¿è¡Œä¸‹é¢çš„ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe -intflag &lt;span class="m">12&lt;/span> -- -boolflag&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†ä¼šè¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">int flag: &lt;span class="m">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bool flag: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">string flag: default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆè§£æäº†é€‰é¡¹&lt;code>intflag&lt;/code>ï¼Œè®¾ç½®å…¶å€¼ä¸º 12ã€‚é‡åˆ°&lt;code>--&lt;/code>åè§£æç»ˆæ­¢äº†ï¼Œåé¢çš„&lt;code>--boolflag=true&lt;/code>æ²¡æœ‰è¢«è§£æåˆ°ï¼Œæ‰€ä»¥&lt;code>boolflag&lt;/code>é€‰é¡¹å–é»˜è®¤å€¼&lt;code>false&lt;/code>ã€‚&lt;/p>
&lt;p>è§£æç»ˆæ­¢ä¹‹åå¦‚æœè¿˜æœ‰å‘½ä»¤è¡Œå‚æ•°ï¼Œ&lt;code>flag&lt;/code>åº“ä¼šå­˜å‚¨ä¸‹æ¥ï¼Œé€šè¿‡&lt;code>flag.Args&lt;/code>æ–¹æ³•è¿”å›è¿™äº›å‚æ•°çš„åˆ‡ç‰‡ã€‚ å¯ä»¥é€šè¿‡&lt;code>flag.NArg&lt;/code>æ–¹æ³•è·å–æœªè§£æçš„å‚æ•°æ•°é‡ï¼Œ&lt;code>flag.Arg(i)&lt;/code>è®¿é—®ä½ç½®&lt;code>i&lt;/code>ï¼ˆä» 0 å¼€å§‹ï¼‰ä¸Šçš„å‚æ•°ã€‚ é€‰é¡¹ä¸ªæ•°ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨&lt;code>flag.NFlag&lt;/code>æ–¹æ³•è·å–ã€‚&lt;/p>
&lt;p>ç¨ç¨ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Args&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Non-Flag Argument Count:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NArg&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NArg&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Argument %d: %s\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Arg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Flag Count:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NFlag&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¯‘è¿è¡Œè¯¥ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go build -o main.exe main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe -intflag &lt;span class="m">12&lt;/span> -- -stringflag &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>-stringflag test&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Non-Flag Argument Count: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Argument 0: -stringflag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Argument 1: &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è§£æé‡åˆ°&lt;code>--&lt;/code>ç»ˆæ­¢åï¼Œå‰©ä½™å‚æ•°&lt;code>-stringflag test&lt;/code>ä¿å­˜åœ¨&lt;code>flag&lt;/code>ä¸­ï¼Œå¯ä»¥é€šè¿‡&lt;code>Args/NArg/Arg&lt;/code>ç­‰æ–¹æ³•è®¿é—®ã€‚&lt;/p>
&lt;p>æ•´æ•°é€‰é¡¹å€¼å¯ä»¥æ¥å— 1234ï¼ˆåè¿›åˆ¶ï¼‰ã€0664ï¼ˆå…«è¿›åˆ¶ï¼‰å’Œ 0x1234ï¼ˆåå…­è¿›åˆ¶ï¼‰çš„å½¢å¼ï¼Œå¹¶ä¸”å¯ä»¥æ˜¯è´Ÿæ•°ã€‚å®é™…ä¸Š&lt;code>flag&lt;/code>åœ¨å†…éƒ¨ä½¿ç”¨&lt;code>strconv.ParseInt&lt;/code>æ–¹æ³•å°†å­—ç¬¦ä¸²è§£ææˆ&lt;code>int&lt;/code>ã€‚ æ‰€ä»¥ç†è®ºä¸Šï¼Œ&lt;code>ParseInt&lt;/code>æ¥å—çš„æ ¼å¼éƒ½å¯ä»¥ã€‚&lt;/p>
&lt;p>å¸ƒå°”ç±»å‹çš„é€‰é¡¹å€¼å¯ä»¥ä¸ºï¼š&lt;/p>
&lt;ul>
&lt;li>å–å€¼ä¸º&lt;code>true&lt;/code>çš„ï¼š1ã€tã€Tã€trueã€TRUEã€Trueï¼›&lt;/li>
&lt;li>å–å€¼ä¸º&lt;code>false&lt;/code>çš„ï¼š0ã€fã€Fã€falseã€FALSEã€Falseã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="å¦ä¸€ç§å®šä¹‰é€‰é¡¹çš„æ–¹å¼">
&lt;a href="#%e5%8f%a6%e4%b8%80%e7%a7%8d%e5%ae%9a%e4%b9%89%e9%80%89%e9%a1%b9%e7%9a%84%e6%96%b9%e5%bc%8f" class="header-anchor">#&lt;/a>
å¦ä¸€ç§å®šä¹‰é€‰é¡¹çš„æ–¹å¼
&lt;/h2>&lt;p>ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ä½¿ç”¨&lt;code>flag.TypeVar&lt;/code>å®šä¹‰é€‰é¡¹ï¼Œè¿™ç§æ–¹å¼éœ€è¦æˆ‘ä»¬å…ˆå®šä¹‰å˜é‡ï¼Œç„¶åå˜é‡çš„åœ°å€ã€‚ è¿˜æœ‰ä¸€ç§æ–¹å¼ï¼Œè°ƒç”¨&lt;code>flag.Type&lt;/code>ï¼ˆå…¶ä¸­&lt;code>Type&lt;/code>å¯ä»¥ä¸º&lt;code>Int/Uint/Bool/Float64/String/Duration&lt;/code>ç­‰ï¼‰ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ†é…å˜é‡ï¼Œè¿”å›è¯¥å˜é‡çš„åœ°å€ã€‚ç”¨æ³•ä¸å‰ä¸€ç§æ–¹å¼ç±»ä¼¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">intflag&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">boolflag&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stringflag&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">intflag&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;intflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;int flag value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">boolflag&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Bool&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;boolflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;bool flag value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">stringflag&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;stringflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;default&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;string flag value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;int flag:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">intflag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;bool flag:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">boolflag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;string flag:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">stringflag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¯‘å¹¶è¿è¡Œç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go build -o main.exe main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe -intflag &lt;span class="m">12&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">int flag: &lt;span class="m">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bool flag: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">string flag: default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é™¤äº†ä½¿ç”¨æ—¶éœ€è¦è§£å¼•ç”¨ï¼Œå…¶å®ƒä¸å‰ä¸€ç§æ–¹å¼åŸºæœ¬ç›¸åŒã€‚&lt;/p>
&lt;h2 id="é«˜çº§ç”¨æ³•">
&lt;a href="#%e9%ab%98%e7%ba%a7%e7%94%a8%e6%b3%95" class="header-anchor">#&lt;/a>
é«˜çº§ç”¨æ³•
&lt;/h2>&lt;h3 id="å®šä¹‰çŸ­é€‰é¡¹">
&lt;a href="#%e5%ae%9a%e4%b9%89%e7%9f%ad%e9%80%89%e9%a1%b9" class="header-anchor">#&lt;/a>
å®šä¹‰çŸ­é€‰é¡¹
&lt;/h3>&lt;p>&lt;code>flag&lt;/code>åº“å¹¶æ²¡æœ‰æ˜¾ç¤ºæ”¯æŒçŸ­é€‰é¡¹ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç»™æŸä¸ªç›¸åŒçš„å˜é‡è®¾ç½®ä¸åŒçš„é€‰é¡¹æ¥å®ç°ã€‚å³ä¸¤ä¸ªé€‰é¡¹å…±äº«åŒä¸€ä¸ªå˜é‡ã€‚ ç”±äºåˆå§‹åŒ–é¡ºåºä¸ç¡®å®šï¼Œå¿…é¡»ä¿è¯å®ƒä»¬æ‹¥æœ‰ç›¸åŒçš„é»˜è®¤å€¼ã€‚å¦åˆ™ä¸ä¼ è¯¥é€‰é¡¹æ—¶ï¼Œè¡Œä¸ºæ˜¯ä¸ç¡®å®šçš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">logLevel&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultLogLevel&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;DEBUG&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">usage&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;set log level value&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StringVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logLevel&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;log_type&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">defaultLogLevel&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">usage&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StringVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">logLevel&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;l&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">defaultLogLevel&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">usage&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;(shorthand)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;log level:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">logLevel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¯‘ã€è¿è¡Œç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go build -o main.exe main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe -log_type WARNING
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe -l WARNING
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨é•¿ã€çŸ­é€‰é¡¹å‡è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">log level: WARNING
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ä¼ å…¥è¯¥é€‰é¡¹ï¼Œè¾“å‡ºé»˜è®¤å€¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">log level: DEBUG
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è§£ææ—¶é—´é—´éš”">
&lt;a href="#%e8%a7%a3%e6%9e%90%e6%97%b6%e9%97%b4%e9%97%b4%e9%9a%94" class="header-anchor">#&lt;/a>
è§£ææ—¶é—´é—´éš”
&lt;/h3>&lt;p>é™¤äº†èƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹ä½œä¸ºé€‰é¡¹ï¼Œ&lt;code>flag&lt;/code>åº“è¿˜æ”¯æŒ&lt;code>time.Duration&lt;/code>ç±»å‹ï¼Œå³æ—¶é—´é—´éš”ã€‚æ—¶é—´é—´éš”æ”¯æŒçš„æ ¼å¼éå¸¸ä¹‹å¤šï¼Œä¾‹å¦‚&amp;quot;300ms&amp;quot;ã€&amp;quot;-1.5h&amp;quot;ã€â€œ2h45m&amp;quot;ç­‰ç­‰ç­‰ç­‰ã€‚ æ—¶é—´å•ä½å¯ä»¥æ˜¯ ns/us/ms/s/m/h/day ç­‰ã€‚å®é™…ä¸Š&lt;code>flag&lt;/code>å†…éƒ¨ä¼šè°ƒç”¨&lt;code>time.ParseDuration&lt;/code>ã€‚å…·ä½“æ”¯æŒçš„æ ¼å¼å¯ä»¥å‚è§&lt;a class="link" href="https://golang.org/pkg/time/#ParseDuration" target="_blank" rel="noopener"
>time&lt;/a>ï¼ˆéœ€fqï¼‰åº“çš„æ–‡æ¡£ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">period&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Duration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DurationVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">period&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;period&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;sleep period&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Sleeping for %v...&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">period&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">period&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®ä¼ å…¥çš„å‘½ä»¤è¡Œé€‰é¡¹&lt;code>period&lt;/code>ï¼Œç¨‹åºç¡çœ ç›¸åº”çš„æ—¶é—´ï¼Œé»˜è®¤ 1 ç§’ã€‚ç¼–è¯‘ã€è¿è¡Œç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go build -o main.exe main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sleeping &lt;span class="k">for&lt;/span> 1s...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe -period 1m30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sleeping &lt;span class="k">for&lt;/span> 1m30s...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è‡ªå®šä¹‰é€‰é¡¹">
&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e9%80%89%e9%a1%b9" class="header-anchor">#&lt;/a>
è‡ªå®šä¹‰é€‰é¡¹
&lt;/h3>&lt;p>é™¤äº†ä½¿ç”¨&lt;code>flag&lt;/code>åº“æä¾›çš„é€‰é¡¹ç±»å‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰é€‰é¡¹ç±»å‹ã€‚æˆ‘ä»¬åˆ†æä¸€ä¸‹æ ‡å‡†åº“ä¸­æä¾›çš„æ¡ˆä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;errors&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">interval&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Duration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">interval&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">interval&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;interval flag already set&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dt&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;,&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">duration&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseDuration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">duration&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">intervalFlag&lt;/span> &lt;span class="nx">interval&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Var&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">intervalFlag&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;deltaT&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;comma-seperated list of intervals to use between events&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">intervalFlag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ–°ç±»å‹ï¼Œè¿™é‡Œå®šä¹‰ç±»å‹&lt;code>interval&lt;/code>ã€‚&lt;/p>
&lt;p>æ–°ç±»å‹å¿…é¡»å®ç°&lt;code>flag.Value&lt;/code>æ¥å£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// src/flag/flag.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Value&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">String&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­&lt;code>String&lt;/code>æ–¹æ³•æ ¼å¼åŒ–è¯¥ç±»å‹çš„å€¼ï¼Œ&lt;code>flag.Parse&lt;/code>æ–¹æ³•åœ¨æ‰§è¡Œæ—¶é‡åˆ°è‡ªå®šä¹‰ç±»å‹çš„é€‰é¡¹ä¼šå°†é€‰é¡¹å€¼ä½œä¸ºå‚æ•°è°ƒç”¨è¯¥ç±»å‹å˜é‡çš„&lt;code>Set&lt;/code>æ–¹æ³•ã€‚ è¿™é‡Œå°†ä»¥&lt;code>,&lt;/code>åˆ†éš”çš„æ—¶é—´é—´éš”è§£æå‡ºæ¥å­˜å…¥ä¸€ä¸ªåˆ‡ç‰‡ä¸­ã€‚&lt;/p>
&lt;p>è‡ªå®šä¹‰ç±»å‹é€‰é¡¹çš„å®šä¹‰å¿…é¡»ä½¿ç”¨&lt;code>flag.Var&lt;/code>æ–¹æ³•ã€‚&lt;/p>
&lt;p>ç¼–è¯‘ã€æ‰§è¡Œç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ go build -o main.exe main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe -deltaT 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>30s&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./main.exe -deltaT 30s,1m,1m30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>30s 1m0s 1m30s&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæŒ‡å®šçš„é€‰é¡¹å€¼éæ³•ï¼Œ&lt;code>Set&lt;/code>æ–¹æ³•è¿”å›ä¸€ä¸ª&lt;code>error&lt;/code>ç±»å‹çš„å€¼ï¼Œ&lt;code>Parse&lt;/code>æ‰§è¡Œç»ˆæ­¢ï¼Œæ‰“å°é”™è¯¯å’Œä½¿ç”¨å¸®åŠ©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ./main.exe -deltaT 30x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">invalid value &lt;span class="s2">&amp;#34;30x&amp;#34;&lt;/span> &lt;span class="k">for&lt;/span> flag -deltaT: time: unknown unit x in duration 30x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage of D:&lt;span class="se">\c&lt;/span>ode&lt;span class="se">\g&lt;/span>olang&lt;span class="se">\s&lt;/span>rc&lt;span class="se">\g&lt;/span>ithub.com&lt;span class="se">\d&lt;/span>arjun&lt;span class="se">\g&lt;/span>o-daily-lib&lt;span class="se">\f&lt;/span>lag&lt;span class="se">\s&lt;/span>elf-defined&lt;span class="se">\m&lt;/span>ain.exe:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -deltaT value
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> comma-seperated list of intervals to use between events
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è§£æç¨‹åºä¸­çš„å­—ç¬¦ä¸²">
&lt;a href="#%e8%a7%a3%e6%9e%90%e7%a8%8b%e5%ba%8f%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e4%b8%b2" class="header-anchor">#&lt;/a>
è§£æç¨‹åºä¸­çš„å­—ç¬¦ä¸²
&lt;/h3>&lt;p>æœ‰æ—¶å€™é€‰é¡¹å¹¶ä¸æ˜¯é€šè¿‡å‘½ä»¤è¡Œä¼ é€’çš„ã€‚ä¾‹å¦‚ï¼Œä»é…ç½®è¡¨ä¸­è¯»å–æˆ–ç¨‹åºç”Ÿæˆçš„ã€‚è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨&lt;code>flag.FlagSet&lt;/code>ç»“æ„çš„ç›¸å…³æ–¹æ³•æ¥è§£æè¿™äº›é€‰é¡¹ã€‚&lt;/p>
&lt;p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å‰é¢è°ƒç”¨çš„&lt;code>flag&lt;/code>åº“çš„æ–¹æ³•ï¼Œéƒ½ä¼šé—´æ¥è°ƒç”¨&lt;code>FlagSet&lt;/code>ç»“æ„çš„æ–¹æ³•ã€‚&lt;code>flag&lt;/code>åº“ä¸­å®šä¹‰äº†ä¸€ä¸ª&lt;code>FlagSet&lt;/code>ç±»å‹çš„å…¨å±€å˜é‡&lt;code>CommandLine&lt;/code>ä¸“é—¨ç”¨äºè§£æå‘½ä»¤è¡Œé€‰é¡¹ã€‚ å‰é¢è°ƒç”¨çš„&lt;code>flag&lt;/code>åº“çš„æ–¹æ³•åªæ˜¯ä¸ºäº†æä¾›ä¾¿åˆ©ï¼Œå®ƒä»¬å†…éƒ¨éƒ½æ˜¯è°ƒç”¨çš„&lt;code>CommandLine&lt;/code>çš„ç›¸åº”æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// src/flag/flag.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">CommandLine&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">NewFlagSet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">ExitOnError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">IntVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">p&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">usage&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Var&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">newIntValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">p&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">usage&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">usage&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">usage&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NFlag&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">actual&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Arg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Arg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NArg&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">CommandLine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±åˆ›å»º&lt;code>FlagSet&lt;/code>ç±»å‹å˜é‡æ¥è§£æé€‰é¡¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;flag&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">args&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;-intflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;12&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;-stringflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">intflag&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">boolflag&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">stringflag&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fs&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewFlagSet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;MyFlagSet&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ContinueOnError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IntVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">intflag&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;intflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;int flag value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BoolVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">boolflag&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;boolflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;bool flag value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">StringVar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">stringflag&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;stringflag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;default&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;string flag value&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;int flag:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">intflag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;bool flag:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">boolflag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;string flag:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">stringflag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>NewFlagSet&lt;/code>æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç¨‹åºåç§°ï¼Œè¾“å‡ºå¸®åŠ©æˆ–å‡ºé”™æ—¶ä¼šæ˜¾ç¤ºè¯¥ä¿¡æ¯ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è§£æå‡ºé”™æ—¶å¦‚ä½•å¤„ç†ï¼Œæœ‰å‡ ä¸ªé€‰é¡¹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>ContinueOnError&lt;/code>ï¼šå‘ç”Ÿé”™è¯¯åç»§ç»­è§£æï¼Œ&lt;code>CommandLine&lt;/code>å°±æ˜¯ä½¿ç”¨è¿™ä¸ªé€‰é¡¹ï¼›&lt;/li>
&lt;li>&lt;code>ExitOnError&lt;/code>ï¼šå‡ºé”™æ—¶è°ƒç”¨&lt;code>os.Exit(2)&lt;/code>é€€å‡ºç¨‹åºï¼›&lt;/li>
&lt;li>&lt;code>PanicOnError&lt;/code>ï¼šå‡ºé”™æ—¶äº§ç”Ÿ panicã€‚&lt;/li>
&lt;/ul>
&lt;p>éšä¾¿çœ‹ä¸€çœ¼&lt;code>flag&lt;/code>åº“ä¸­çš„ç›¸å…³ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// src/flag/flag.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">FlagSet&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arguments&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">f&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">parsed&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">f&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">args&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">arguments&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">seen&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">f&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">parseOne&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">seen&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="nx">f&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">errorHandling&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">ContinueOnError&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">ExitOnError&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nx">PanicOnError&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ç›´æ¥ä½¿ç”¨&lt;code>flag&lt;/code>åº“çš„æ–¹æ³•æœ‰ä¸€ç‚¹ä¸åŒï¼Œ&lt;code>FlagSet&lt;/code>è°ƒç”¨&lt;code>Parse&lt;/code>æ–¹æ³•æ—¶éœ€è¦æ˜¾ç¤ºä¼ å…¥å­—ç¬¦ä¸²åˆ‡ç‰‡ä½œä¸ºå‚æ•°ã€‚å› ä¸º&lt;code>flag.Parse&lt;/code>åœ¨å†…éƒ¨è°ƒç”¨äº†&lt;code>CommandLine.Parse(os.Args[1:])&lt;/code>ã€‚ ç¤ºä¾‹ä»£ç éƒ½æ”¾åœ¨&lt;a class="link" href="https://github.com/darjun/go-daily-lib" target="_blank" rel="noopener"
>GitHub&lt;/a>ä¸Šäº†ã€‚&lt;/p>
&lt;h2 id="å‚è€ƒ">
&lt;a href="#%e5%8f%82%e8%80%83" class="header-anchor">#&lt;/a>
å‚è€ƒ
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://golang.org/pkg/flag/" target="_blank" rel="noopener"
>flag&lt;/a>åº“æ–‡æ¡£&lt;/li>
&lt;li>&lt;a class="link" href="https://darjun.github.io/2020/01/10/godailylib/flag/" target="_blank" rel="noopener"
>Go æ¯æ—¥ä¸€åº“ä¹‹ flag&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://jianghushinian.cn/2023/03/26/dive-into-the-go-flag-standard-library/" target="_blank" rel="noopener"
>æ·±å…¥æ¢ç©¶ Go flag æ ‡å‡†åº“&lt;/a>é™„æºç åˆ†æ&lt;/li>
&lt;/ol></description></item><item><title>åŸºäºHugoå’Œgh-pageså¿«é€Ÿæ­å»ºé™æ€ç½‘ç«™</title><link>https://arlettebrook.github.io/p/%E5%9F%BA%E4%BA%8Ehugo%E5%92%8Cgh-pages%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/</link><pubDate>Mon, 22 Apr 2024 16:12:26 +0800</pubDate><guid>https://arlettebrook.github.io/p/%E5%9F%BA%E4%BA%8Ehugo%E5%92%8Cgh-pages%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/</guid><description>&lt;img src="https://arlettebrook.github.io/p/%E5%9F%BA%E4%BA%8Ehugo%E5%92%8Cgh-pages%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/hugo.jpg" alt="Featured image of post åŸºäºHugoå’Œgh-pageså¿«é€Ÿæ­å»ºé™æ€ç½‘ç«™" />&lt;h2 id="é™æ€ç½‘é¡µç”Ÿæˆå™¨">
&lt;a href="#%e9%9d%99%e6%80%81%e7%bd%91%e9%a1%b5%e7%94%9f%e6%88%90%e5%99%a8" class="header-anchor">#&lt;/a>
é™æ€ç½‘é¡µç”Ÿæˆå™¨
&lt;/h2>&lt;p>æ— è®ºæ‚¨éœ€è¦æ­å»ºä¸ªäººåšå®¢è¿˜æ˜¯ä¸ºæ‚¨çš„é¡¹ç›®åˆ›å»ºæ–‡æ¡£ï¼Œé™æ€ç½‘é¡µç”Ÿæˆå™¨ï¼ˆstatic site generatorï¼‰éƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚æ— éœ€æœåŠ¡å™¨ã€æ•°æ®åº“ï¼Œåªè¦ä½ ç†Ÿæ‚‰ Markdownï¼Œå–œæ¬¢GitHubï¼Œä½¿ç”¨ç”Ÿæˆå™¨åˆ›å»ºé™æ€ HTML æ–‡ä»¶ï¼Œç„¶åæ¨é€åˆ° &lt;a class="link" href="https://pages.github.com/" target="_blank" rel="noopener"
>GitHub Pages&lt;/a> ç­‰å…è´¹æœåŠ¡å³å¯ã€‚&lt;/p>
&lt;h3 id="å¸¸è§çš„é™æ€ç½‘é¡µç”Ÿæˆå™¨">
&lt;a href="#%e5%b8%b8%e8%a7%81%e7%9a%84%e9%9d%99%e6%80%81%e7%bd%91%e9%a1%b5%e7%94%9f%e6%88%90%e5%99%a8" class="header-anchor">#&lt;/a>
å¸¸è§çš„é™æ€ç½‘é¡µç”Ÿæˆå™¨
&lt;/h3>&lt;ul>
&lt;li>Hugoæ˜¯ç”±Goè¯­è¨€å®ç°çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ã€‚ç®€å•ã€æ˜“ç”¨ã€é«˜æ•ˆã€æ˜“æ‰©å±•ã€å¿«é€Ÿéƒ¨ç½²ã€‚&lt;/li>
&lt;li>jekyll æ˜¯ä¸€ä¸ªé™æ€ç½‘é¡µã€åšå®¢ç”Ÿæˆå™¨&lt;/li>
&lt;li>vuepressæ˜¯åŸºäº Vue çš„é™æ€ç½‘é¡µç”Ÿæˆå™¨&lt;/li>
&lt;li>Hexo æ˜¯ä¸€ä¸ªç”±Nodejsé©±åŠ¨çš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>å‚è€ƒï¼š&lt;a class="link" href="https://github.com/collections/static-site-generators" target="_blank" rel="noopener"
>é™æ€ç½‘é¡µç”Ÿæˆå™¨&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h2 id="å¿«é€Ÿä½¿ç”¨hugoæ­å»ºä¸ªäººåšå®¢ç«™ç‚¹">
&lt;a href="#%e5%bf%ab%e9%80%9f%e4%bd%bf%e7%94%a8hugo%e6%90%ad%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2%e7%ab%99%e7%82%b9" class="header-anchor">#&lt;/a>
å¿«é€Ÿä½¿ç”¨Hugoæ­å»ºä¸ªäººåšå®¢ç«™ç‚¹
&lt;/h2>&lt;h3 id="å®‰è£…hugo">
&lt;a href="#%e5%ae%89%e8%a3%85hugo" class="header-anchor">#&lt;/a>
å®‰è£…Hugo
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>æ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿï¼Œä¸‹è½½å·²ç»æ„å»ºå¥½çš„HugoäºŒè¿›åˆ¶æ–‡ä»¶&lt;a class="link" href="https://github.com/gohugoio/hugo/releases/latest" target="_blank" rel="noopener"
>å®˜æ–¹åœ°å€&lt;/a>&lt;/p>
&lt;ul>
&lt;li>å®˜æ–¹æ¨èä¸‹è½½æ‰©å±•ç‰ˆï¼Œæ”¯æŒçš„åŠŸèƒ½æ›´å¤š&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è§£å‹ä¹‹åï¼Œå°†hugoå¯æ‰§è¡Œæ–‡ä»¶åŠ å…¥åˆ°PATHç¯å¢ƒå˜é‡ä¸­ï¼Œå³å¯ä½¿ç”¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo version &lt;span class="c1"># æŸ¥çœ‹ç‰ˆæœ¬ï¼Œæ‰©å±•ç‰ˆå«è¿™ä¸ªextendedæ ‡ç­¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo -h &lt;span class="c1"># æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo subcommand -h &lt;span class="c1"># è·å–å­å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="ä½¿ç”¨hugo">
&lt;a href="#%e4%bd%bf%e7%94%a8hugo" class="header-anchor">#&lt;/a>
ä½¿ç”¨Hugo
&lt;/h3>&lt;blockquote>
&lt;p>hugoéœ€è¦é…åˆgitä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”å®˜æ–¹æ¨èä½¿ç”¨bashä½œä¸ºç»ˆç«¯&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>åˆ›å»ºé¡¹ç›®å¹¶å®‰è£…ä¸»é¢˜hugo-theme-stack&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo new site quickstart &lt;span class="c1"># åˆ›å»ºç›®å½•ç»“æ„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> quickstart
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git submodule add https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack &lt;span class="c1"># å®‰è£…ä¸»é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ·»åŠ å†…å®¹å¹¶ä½¿ç”¨å®‰è£…ä¸»é¢˜çš„é»˜è®¤é…ç½®&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨å®‰è£…ä¸»é¢˜çš„å®ä¾‹è¿›è¡Œå¿«é€Ÿæ·»åŠ å†…å®¹
&lt;ul>
&lt;li>åªéœ€è¦è¿›å…¥ä¸»é¢˜æ–‡ä»¶ä¸­çš„&lt;code>exampleSite&lt;/code>ä¸­çš„&lt;code>content&lt;/code>æ‹·è´åˆ°&lt;code>quickstart&lt;/code>æ ¹ç›®å½•ä¸­&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>åŒç†ï¼Œåœ¨ä¸»é¢˜æ–‡ä»¶ä¸­çš„&lt;code>exampleSite&lt;/code>ä¸­çš„&lt;code>hugo.yaml&lt;/code>æ‹·è´åˆ°&lt;code>quickstart&lt;/code>æ ¹ç›®å½•ä¸­ï¼Œé‡å‘½åä¸º,å¹¶åˆ é™¤&lt;code>hugo.toml&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æœ€åè¿è¡Œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo server &lt;span class="c1"># æœ¬åœ°å¯åŠ¨ä¸€ä¸ªhttpæœåŠ¡å™¨ï¼Œä¾¿äºå¼€å‘å’Œæµ‹è¯•ç«™ç‚¹ï¼Œé»˜è®¤çƒ­æ›´æ–°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo server --navigateToChanged &lt;span class="c1"># è‡ªåŠ¨é‡å®šå‘ï¼šç¼–è¾‘å†…å®¹æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨é‡å®šå‘åˆ°ä¸Šæ¬¡ä¿®æ”¹çš„é¡µé¢&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¼šä½¿ç”¨åˆ°çš„å‘½ä»¤&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo new content post/fist-post.md &lt;span class="c1"># ä¼šåœ¨contentç›®å½•ä¸‹åˆ›å»ºpost/fist-post.mdæ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ‰§è¡Œå®Œåï¼Œä¼šåœ¨content/postç›®å½•è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªMarkDownæ ¼å¼çš„first.mdæ–‡ä»¶ï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">date&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;2015-01-08T08:36:54-07:00&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">draft&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Fist Post&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># draft é»˜è®¤ä¸ºtrueï¼Œæ„å»ºç½‘ç«™æ—¶ä¸ä¼šæ„å»ºè¯¥æ–‡æ¡£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è¦æ„å»ºè‰ç¨¿æ–‡æ¡£å¯ä»¥ç”¨-Dæˆ–--buildDraftsé€‰é¡¹å¯åŠ¨æœåŠ¡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hugo server -D
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># title é»˜è®¤ä¸ºæ–‡ä»¶åé¦–å­—æ¯å¤§å†™&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ„å»ºå‘½ä»¤&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œè¿è¡Œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>hugo&lt;/code>å‘½ä»¤ä¼šæ„å»ºç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œä¼šå°†æ–‡ä»¶å‘å¸ƒé¡¹ç›®çš„&lt;code>public&lt;/code>ç›®å½•ä¸‹&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¦å°†ç«™ç‚¹å‘å¸ƒåˆ°å…¶ä»–ç›®å½•ï¼Œè¯·ä½¿ç”¨è¯¥æ ‡å¿—&lt;code>--destination&lt;/code>æˆ–åœ¨ç«™ç‚¹é…ç½®ä¸­è®¾ç½®&lt;code>publishDir&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šæ¯æ¬¡æ„å»ºä¸ä¼šæ¸…ç©ºpublicç›®å½•ï¼Œåªä¼šè¦†ç›–æ—§å†…å®¹ã€‚&lt;/p>
&lt;p>è¿™æ ·åšæ˜¯ä¸ºäº†é˜²æ­¢ï¼Œæ„å»ºä¹‹ååœ¨publicæ·»åŠ çš„æ–‡ä»¶è¢«åˆ é™¤&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>è‰ç¨¿ã€æœªæ¥å’Œè¿‡æœŸå†…å®¹&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Hugo å…è®¸åœ¨å†…å®¹çš„å‰é¢è®¾ç½®&lt;code>draft&lt;/code>ã€&lt;code>date&lt;/code>ã€&lt;code>publishDate&lt;/code>å’Œ&lt;code>expiryDate&lt;/code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHugo åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¸ä¼šå‘å¸ƒå†…å®¹ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å…¶&lt;code>draft&lt;/code>å€¼ä¸º&lt;code>true&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ˜¯&lt;code>date&lt;/code>åœ¨æœªæ¥&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ˜¯&lt;code>publishDate&lt;/code>åœ¨æœªæ¥&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å·²ç»&lt;code>expiryDate&lt;/code>è¿‡å»äº†&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸‹é¢çš„è¡Œä¸ºå¯ä»¥å–æ¶ˆ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo --buildDrafts &lt;span class="c1"># or -D&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo --buildExpired &lt;span class="c1"># or -E&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo --buildFuture &lt;span class="c1"># or -F&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šå½“è¿™æ ·æ„å»ºä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤ä¸æœŸæœ›æ„å»ºçš„æ–‡ä»¶ï¼Œåœ¨æ¨é€ç«™ç‚¹&lt;/p>
&lt;p>å¦åˆ™å½“æ¨é€åˆ°è¿œç¨‹ä¼šå‡ºç°&lt;strong>æ„å¤–&lt;/strong>çš„å†…å®¹&lt;/p>
&lt;p>æ‰€ä»¥å»ºè®®è¿è¡Œä¸Šé¢çš„å‘½ä»¤ä¹‹åï¼Œå‰æpublicä¸­æ²¡æœ‰æ‰‹åŠ¨æ·»åŠ çš„æ–‡ä»¶ï¼Œåœ¨æ„å»ºä¹‹å‰æ‰‹åŠ¨æ¸…ç©º&lt;code>public&lt;/code>ç›®å½•ï¼Œé˜²æ­¢å‡ºç°è‰ç¨¿ã€è¿‡æœŸå’Œæœªæ¥çš„å†…å®¹&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æœ€åå°†publicä¸­çš„æ‰€ä»¥æ–‡ä»¶æ¨é€åˆ°é™æ€ç½‘ç«™æ‰˜ç®¡å¹³å°å³å¯&lt;/p>
&lt;ul>
&lt;li>ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æ›´å¤šå†…å®¹å‚è€ƒï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://www.gohugo.org/post/coderzh-hugo/" target="_blank" rel="noopener"
>ä½¿ç”¨hugoæ­å»ºä¸ªäººåšå®¢ç«™ç‚¹&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.linsnow.cn/p/join-hugo-and-stack/" target="_blank" rel="noopener"
>ï¼ˆ1ï¼‰å¸¦ç€Stackä¸»é¢˜å…¥å‘Hugo&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.linsnow.cn/p/deploy-hugo/" target="_blank" rel="noopener"
>ï¼ˆ2ï¼‰éƒ¨ç½²ä½ çš„Hugoåšå®¢&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.linsnow.cn/p/modify-hugo/" target="_blank" rel="noopener"
>ï¼ˆ3ï¼‰Stackä¸»é¢˜çš„è‡ªå®šä¹‰&lt;/a>
&lt;ol>
&lt;li>è‡ªå®šä¹‰ä¸»é¢˜æ·»åŠ äº†&lt;code>assets/scss&lt;/code>ã€&lt;code>layouts/_default/&lt;/code>ã€&lt;code>layouts/index.html&lt;/code>,ä¸ç”¨äº†åˆ äº†å°±è¡Œ&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;h3 id="ç›®å½•ç»“æ„">
&lt;a href="#%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84" class="header-anchor">#&lt;/a>
ç›®å½•ç»“æ„
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;code>archetypes&lt;/code>ç›®å½•åŒ…å«æ–°å†…å®¹çš„æ¨¡æ¿&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç›®å½•ä¸‹çš„&lt;code>default.md&lt;/code>ç”±æ ‡è®°ï¼ˆmarkdownï¼‰å’Œå†…å®¹æ ¼å¼&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å†…å®¹æ ¼å¼ï¼š&amp;mdash;yaml&amp;mdash;ã€+++toml+++ã€{json}&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--- &lt;span class="c1"># +++/{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">date: &lt;span class="s1">&amp;#39;{{ .Date }}&amp;#39;&lt;/span> &lt;span class="c1"># yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">draft: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">title: &lt;span class="s1">&amp;#39;{{ replace .File.ContentBaseName `-` ` ` | title }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- &lt;span class="c1"># +++/{&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å½“è¿è¡Œ&lt;code>hugo new content post/my-first-post.md&lt;/code>å‘½ä»¤æ—¶ä¼šæ ¹æ®&lt;code>default.md&lt;/code>åˆ›å»ºå†…å®¹æ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">date: &lt;span class="s2">&amp;#34;2023-08-24T11:49:46-07:00&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">draft: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">title: My First Post
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¯ä»¥åˆ›å»ºæ–°å†…å®¹çš„æ¨¡ç‰ˆ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">archetypes/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ default.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ post.md
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>è‹¥è¿è¡Œ&lt;code>hugo new content post/my-first-post.md&lt;/code>æŸ¥æ‰¾æ¨¡ç‰ˆçš„é¡ºåº
&lt;ul>
&lt;li>archetypes/post.md&lt;/li>
&lt;li>archetypes/default.md&lt;/li>
&lt;li>themes/my-theme/archetypes/post.md&lt;/li>
&lt;li>themes/my-theme/archetypes/default.md&lt;/li>
&lt;li>å¦‚æœè¿™äº›éƒ½ä¸å­˜åœ¨ï¼ŒHugo å°†ä½¿ç”¨å†…ç½®çš„é»˜è®¤åŸå‹&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>assets&lt;/code>ç›®å½•åŒ…å«é€šå¸¸é€šè¿‡èµ„äº§ç®¡é“ä¼ é€’çš„å…¨å±€èµ„æºï¼ŒåŒ…æ‹¬å›¾åƒã€CSSã€Sassã€JavaScript å’Œ TypeScript ç­‰èµ„æºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>config&lt;/code>ç›®å½•åŒ…å«ç«™ç‚¹é…ç½®ï¼Œå¯èƒ½åˆ†ä¸ºå¤šä¸ªå­ç›®å½•å’Œæ–‡ä»¶ã€‚å¯¹äºå…·æœ‰æœ€å°‘é…ç½®çš„é¡¹ç›®æˆ–ä¸éœ€è¦åœ¨ä¸åŒç¯å¢ƒä¸­è¡¨ç°ä¸åŒçš„é¡¹ç›®ï¼Œ&lt;code>hugo.toml&lt;/code>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­å‘½åçš„å•ä¸ªé…ç½®æ–‡ä»¶å°±è¶³å¤Ÿäº†&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>content&lt;/code>ç›®å½•åŒ…å«æ„æˆç«™ç‚¹å†…å®¹çš„æ ‡è®°æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ Markdownï¼‰å’Œé¡µé¢èµ„æºã€‚&lt;/p>
&lt;ul>
&lt;li>å¯¹åº”&lt;code>stack&lt;/code>ä¸»é¢˜ï¼š
&lt;ul>
&lt;li>&lt;code>post&lt;/code>&lt;strong>å­˜æ”¾å‘å¸ƒçš„æ–‡ç« æ ¼å¼md&lt;/strong>&lt;/li>
&lt;li>&lt;code>page&lt;/code>&lt;strong>å­˜æ”¾å¯¼èˆªåŒºåŸŸçš„mdæ ¼å¼é…ç½®&lt;/strong>
&lt;ul>
&lt;li>ä¸åŒçš„è¯­è¨€ç»“å°¾ç”¨.en.mdç­‰è¡¨ç¤º&lt;/li>
&lt;li>æ ¹æ®æ¨¡ç‰ˆè¿›è¡Œä¿®æ”¹å³å¯ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œæ²¡æœ‰çš„&lt;strong>éœ€è¦è‡ªå·±è¡¥å……å’Œä¿®æ”¹æ–‡ä»¶å†…å®¹&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>categories&lt;/code>&lt;strong>å­˜æ”¾ç±»åˆ«çš„mdæ ¼å¼é…ç½®&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>data&lt;/code>ç›®å½•åŒ…å«å¢å¼ºå†…å®¹ã€é…ç½®ã€æœ¬åœ°åŒ–å’Œå¯¼èˆªçš„æ•°æ®æ–‡ä»¶ï¼ˆJSONã€TOMLã€YAML æˆ– XMLï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>i18n&lt;/code>ç›®å½•åŒ…å«å¤šè¯­è¨€ç«™ç‚¹çš„ç¿»è¯‘è¡¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>content&lt;/code>ç›®å½•åŒ…å«å°†å†…å®¹ã€æ•°æ®å’Œèµ„æºè½¬æ¢ä¸ºå®Œæ•´ç½‘ç«™çš„æ¨¡æ¿ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>public&lt;/code>ç›®å½•åŒ…å«è¿è¡Œ&lt;code>hugo&lt;/code>æˆ–&lt;code>hugo server&lt;/code>å‘½ä»¤æ—¶ç”Ÿæˆçš„å·²å‘å¸ƒç½‘ç«™ã€‚ Hugo æ ¹æ®éœ€è¦é‡æ–°åˆ›å»ºè¯¥ç›®å½•åŠå…¶å†…å®¹&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>resources&lt;/code>ç›®å½•åŒ…å« Hugo èµ„äº§ç®¡é“çš„ç¼“å­˜è¾“å‡ºï¼Œè¿™äº›è¾“å‡ºæ˜¯åœ¨è¿è¡Œ&lt;code>hugo&lt;/code>æˆ–&lt;code>hugo server&lt;/code>å‘½ä»¤æ—¶ç”Ÿæˆçš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤ç¼“å­˜ç›®å½•åŒ…æ‹¬ CSS å’Œå›¾åƒã€‚ Hugo æ ¹æ®éœ€è¦é‡æ–°åˆ›å»ºè¯¥ç›®å½•åŠå…¶å†…å®¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>static&lt;/code>ç›®å½•åŒ…å«åœ¨æ‚¨æ„å»ºç«™ç‚¹æ—¶å°†å¤åˆ¶åˆ°å…¬å…±ç›®å½•çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š&lt;code>favicon.ico&lt;/code>ã€&lt;code>robots.txt&lt;/code>å’Œ éªŒè¯ç«™ç‚¹æ‰€æœ‰æƒçš„æ–‡ä»¶.ä¸assetså·®ä¸å¤š&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>themes&lt;/code>ç›®å½•åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª&lt;a class="link" href="https://gohugo.io/getting-started/glossary/#theme" target="_blank" rel="noopener"
>ä¸»é¢˜&lt;/a>ï¼Œæ¯ä¸ªä¸»é¢˜éƒ½ä½äºå…¶è‡ªå·±çš„å­ç›®å½•ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è”åˆæ–‡ä»¶ç³»ç»Ÿï¼š&lt;/p>
&lt;ul>
&lt;li>è¿™æ ·ç†è§£ï¼šå®‰è£…çš„ä¸»é¢˜é‡Œé¢åŒæ ·æœ‰è‡ªå·±ç«™ç‚¹çš„ç›®å½•ç»“æ„ï¼Œhugoæ„å»ºæ—¶ä¼šå°†ä¸»é¢˜é‡Œé¢çš„æ–‡ä»¶æŒ‚è½½åˆ°ç«™ç‚¹ï¼Œä¼˜å…ˆçº§æ˜¯&lt;strong>ç«™ç‚¹çš„é«˜&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="é…ç½®æ–‡ä»¶">
&lt;a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="header-anchor">#&lt;/a>
é…ç½®æ–‡ä»¶
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>hugoæ”¯æŒä¸‰ç§é…ç½®æ–‡ä»¶&lt;code>hugo.tomal&lt;/code>ã€&lt;code>hugo.yaml&lt;/code>ã€&lt;code>hugo.json&lt;/code>ï¼Œå–œæ¬¢ç”¨é‚£ä¸ªå°±ç”¨é‚£ä¸ªã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ¯ç§æ–‡ä»¶æ ¼å¼çš„è§„èŒƒï¼š&lt;a class="link" href="https://toml.io/en/latest" target="_blank" rel="noopener"
>TOML&lt;/a>ã€&lt;a class="link" href="https://yaml.org/spec/" target="_blank" rel="noopener"
>YAML&lt;/a>å’Œ&lt;a class="link" href="https://datatracker.ietf.org/doc/html/rfc7159" target="_blank" rel="noopener"
>JSON&lt;/a>ã€‚&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>é…ç½®æ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ªï¼Œå¯ä»¥æ”¾åˆ°configç›®å½•ä¸‹ï¼Œé»˜è®¤éƒ½æ˜¯ä½¿ç”¨hugoå¼€å¤´çš„æ–‡ä»¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŒ‡å®šé…ç½®æ–‡ä»¶æ„å»º&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo server --config other.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo --config a.toml,b.yaml,c.json &lt;span class="c1"># å¯ä»¥æŒ‡å®šå¤šä¸ªï¼Œå·¦è¾¹çš„ä¼˜å…ˆçº§é«˜&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ›´å¤šå†…å®¹&lt;a class="link" href="https://gohugo.io/getting-started/configuration/" target="_blank" rel="noopener"
>é…ç½®å‚è€ƒ&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>é¢å¤–çš„ä¸€äº›å…³äºé…ç½®æ–‡ä»¶çš„æ€»ç»“&lt;/p>
&lt;ul>
&lt;li>é»˜è®¤è¯­è¨€ä¿®æ”¹ä¸ºzh-cnï¼Œæ„å‘³ç€&lt;code>index.md&lt;/code>è¡¨ç¤ºä¸­æ–‡ï¼Œ&lt;code>index.zh-cn.md&lt;/code>ä¹Ÿè¡¨ç¤ºä¸­æ–‡ï¼Œæ­¤æ—¶çš„è‹±æ–‡è¦ç”¨&lt;code>index.en.md&lt;/code>è¡¨ç¤º&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æ›´å¤šå†…å®¹å‚è€ƒï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://gohugo.io/documentation/" target="_blank" rel="noopener"
>Hugoå®˜æ–¹æ–‡æ¡£&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.gohugo.org/" target="_blank" rel="noopener"
>Hugoä¸­æ–‡æ–‡æ¡£&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://themes.gohugo.io/" target="_blank" rel="noopener"
>Hugo theme&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;h3 id="æ–‡ç« è¯„è®º">
&lt;a href="#%e6%96%87%e7%ab%a0%e8%af%84%e8%ae%ba" class="header-anchor">#&lt;/a>
æ–‡ç« è¯„è®º
&lt;/h3>&lt;p>ä½¿ç”¨&lt;a class="link" href="https://waline.js.org/guide/get-started/" target="_blank" rel="noopener"
>Waline&lt;/a>ï¼Œå…¶æ•™ç¨‹å¾ˆå®Œæ•´ã€‚&lt;/p>
&lt;p>æ ¹æ®Walineæ•™ç¨‹ä»å¤´å®Œæˆåˆ°ä½¿ç”¨&lt;a class="link" href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample" target="_blank" rel="noopener"
>Vercel&lt;/a>éƒ¨ç½²å®Œæˆã€‚&lt;/p>
&lt;p>æœ€ååœ¨&lt;code>config.yaml&lt;/code>ä¸­çš„walineçš„serverURLç»™ä¸Šä½ çš„VercelæœåŠ¡å™¨åœ°å€ã€‚&lt;/p>
&lt;p>ä»¥åŠå¼€å¯è¯„è®ºï¼Œæœ€åwalineè¿˜å¯ä»¥é…ç½®è¯„è®ºé€šçŸ¥æ¸ é“ã€‚&lt;/p>
&lt;ul>
&lt;li>å°†cloudflareè§£æçš„åŸŸåç»‘å®šåˆ°vercel&lt;a class="link" href="https://vercel.com/docs/integrations/external-platforms/cloudflare" target="_blank" rel="noopener"
>æ–‡æ¡£&lt;/a>
&lt;ul>
&lt;li>æ¦‚æ‹¬ï¼šæ·»åŠ ä¸€æ¡CNAMEè®°å½•å€¼ä¸ºcname.vercel-dns.comï¼Œå¼€å¯ä»£ç†ï¼Œå°†SSL/TLSä¿®æ”¹ä¸ºå®Œå…¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å°†cloudflareè§£æçš„åŸŸåç»‘å®šåˆ°github-pages&lt;a class="link" href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site" target="_blank" rel="noopener"
>æ–‡æ¡£&lt;/a>
&lt;ul>
&lt;li>æ¦‚æ‹¬ï¼šæ·»åŠ ä¸€æ¡å­åŸŸï¼Œç±»å‹CNAMEè®°å½•å€¼ä¸ºusername.github.ioï¼Œå¼€å¯ä»£ç†ï¼Œå°†SSL/TLSä¿®æ”¹ä¸ºå®Œå…¨,usernameä¸ºä½ çš„ç”¨æˆ·å&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ›´å¤šå†…å®¹è¯·æŸ¥é˜…æ–‡æ¡£&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">comments&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">waline&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">waline&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">serverURL&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">url&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">zh-cn&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">pageview&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copyright&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">emoji&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">https://unpkg.com/@waline/emojis@1.0.1/weibo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">requiredMeta&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">email&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">locale&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">admin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ğŸ‘»Hi!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">placeholder&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ğŸ‰ç•™ä¸‹ä½ çš„è„šå°...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æœç´¢å¼•æ“ä¼˜åŒ–seo">
&lt;a href="#%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e%e4%bc%98%e5%8c%96seo" class="header-anchor">#&lt;/a>
æœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰
&lt;/h3>&lt;p>æœ¬ç½‘ç«™ä½¿ç”¨Hugoæ­å»ºï¼Œè€Œä¸”ä½¿ç”¨çš„stackä¸»é¢˜æ”¯æŒè‡ªåŠ¨ç”ŸæˆåŸºäºOpen Graphåè®®ï¼ˆOGåè®®ï¼‰çš„æ ‡ç­¾ï¼Œæ­¤å¤„è®°å½•ä¸€ä¸‹å¦‚ä½•åœ¨Hugoæ­å»ºçš„ç½‘ç«™ä¸­åšæœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰ã€‚&lt;/p>
&lt;p>ç›®çš„ï¼šæå‡ç½‘ç«™åœ¨æœç´¢å¼•æ“ä¸­çš„æ’å&lt;/p>
&lt;p>Open Graphï¼ˆå¼€æ”¾å›¾è°±ï¼‰åè®®ï¼Œç®€ç§°OGåè®®ï¼Œæ˜¯Facebookåœ¨2010å¹´å…¬å¸ƒçš„ä¸€é¡¹åè®®ï¼Œç”¨æ¥æ ‡è®°ç½‘é¡µå†…å®¹ã€‚ç®€å•æ¥è®²ï¼ŒOGåè®®å°±æ˜¯åµŒåœ¨ç½‘é¡µå¤´éƒ¨çš„ä¸€äº›æ ‡ç­¾ï¼Œè¿™äº›æ ‡ç­¾æ ‡è®°äº†ç½‘é¡µçš„æ ‡é¢˜ã€æè¿°ç­‰ç‰¹å¾ï¼Œä½¿å¾—ç½‘é¡µæˆä¸ºä¸€ä¸ªâ€œå¯Œåª’ä½“å¯¹è±¡â€ï¼Œå¯ä»¥è¢«å…¶ä»–ç¤¾äº¤ç½‘ç«™å¼•ç”¨ã€‚&lt;/p>
&lt;p>å¾ˆå¤šæœç´¢å¼•æ“éƒ½æ”¯æŒOGåè®®ï¼Œåœ¨ç½‘é¡µä¸­ä½¿ç”¨OGåè®®çš„æ ‡ç­¾ï¼Œå°±æ›´æœ‰åˆ©äºæå‡æˆ‘ä»¬çš„ç½‘é¡µåœ¨æœç´¢å¼•æ“ä¸­çš„æ’åã€‚&lt;/p>
&lt;p>OGåè®®çš„æ ‡ç­¾åœ¨ç½‘é¡µä¸­é€šå¸¸è¡¨ç¤ºä¸ºç±»ä¼¼ä¸‹é¢æ‰€ç¤ºçš„æ ¼å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:title&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;The Rock&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:type&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;video.movie&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:url&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://www.imdb.com/title/tt0117500/&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:image&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://ia.media-imdb.com/images/rock.jpg&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;og:url&amp;#39;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;https://arlettebrook.github.io/search/&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;og:site_name&amp;#39;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;Arlettebrook&amp;amp;#39;s blog&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;og:type&amp;#39;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;article&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;article:section&amp;#39;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;P
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">age&amp;#39;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;twitter:title&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;æœç´¢&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;twitter:site&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;@arlettebrook&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;twitter:creator&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;@arlettebrook&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;twitter:title&amp;#34;&lt;/span> &lt;span class="na">co&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ntent&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;æœç´¢&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;twitter:description&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">link&lt;/span> &lt;span class="na">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;alternate&amp;#34;&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;application/js
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">on&amp;#34;&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://arlettebrook.github.io/search/index.json&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">link&lt;/span> &lt;span class="na">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;shortcut icon&amp;#34;&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/img/favicon.ico&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>stackä¸»é¢˜æä¾›äº†å¯¹OGåè®®çš„æ”¯æŒï¼Œåªéœ€è¦åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹çš„&lt;code>config/_default/params.en.yaml&lt;/code>å’Œ&lt;code>config/_default/params.zh-cn.yaml&lt;/code>é…ç½®æ–‡ä»¶ä¸­å¼€å¯å³å¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">opengraph&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">twitter&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Your Twitter username&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">site&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arlettebrook&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Available values: summary, summary_large_image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">card&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">summary_large_image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·ï¼ŒHugoåœ¨ç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç«™æ—¶å°±ä¼šåœ¨ç½‘é¡µHTMLæ–‡ä»¶ä¸­è‡ªåŠ¨åµŒå…¥OGæ ‡ç­¾ã€‚&lt;/p>
&lt;h4 id="è°·æ­Œæœç´¢ä¼˜åŒ–">
&lt;a href="#%e8%b0%b7%e6%ad%8c%e6%90%9c%e7%b4%a2%e4%bc%98%e5%8c%96" class="header-anchor">#&lt;/a>
è°·æ­Œæœç´¢ä¼˜åŒ–
&lt;/h4>&lt;p>åœ¨å°†æˆ‘ä»¬çš„ç«™ç‚¹ä¿¡æ¯æäº¤ç»™è°·æ­Œæ—¶ï¼Œè°·æ­Œéœ€è¦éªŒè¯æˆ‘ä»¬å¯¹ç½‘ç«™çš„æ‰€æœ‰æƒã€‚éªŒè¯æ–¹å¼æœ‰å¥½å‡ ç§ï¼Œä¾‹å¦‚&lt;/p>
&lt;ul>
&lt;li>åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹æ”¾ä¸€ä¸ªè°·æ­Œç”Ÿæˆçš„éªŒè¯æ–‡ä»¶&lt;/li>
&lt;li>åœ¨ç½‘é¡µHTMLæ–‡ä»¶å¤´éƒ¨åµŒå…¥è°·æ­Œç”Ÿæˆçš„ç‰¹å®šæ ‡ç­¾&lt;/li>
&lt;li>ä½¿ç”¨è°·æ­Œåˆ†æçš„Tracking IDï¼ˆæˆ–è€…Measurement IDï¼‰&lt;/li>
&lt;/ul>
&lt;p>ç”±äºstackä¸»é¢˜é›†æˆäº†å¯¹è°·æ­Œåˆ†æçš„æ”¯æŒï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰ç§éªŒè¯æ–¹å¼ã€‚&lt;/p>
&lt;h5 id="å¼€å¯è°·æ­Œåˆ†æ">
&lt;a href="#%e5%bc%80%e5%90%af%e8%b0%b7%e6%ad%8c%e5%88%86%e6%9e%90" class="header-anchor">#&lt;/a>
å¼€å¯è°·æ­Œåˆ†æ
&lt;/h5>&lt;p>&lt;a class="link" href="https://analytics.google.com/analytics/web/provision/#/provision" target="_blank" rel="noopener"
>è°·æ­Œåˆ†æ&lt;/a>ï¼ˆGoogle Analyticsï¼‰æ˜¯ä¸€ä¸ªåˆ†æç½‘ç«™æµé‡çš„å·¥å…·ï¼Œç”¨å®ƒå¯ä»¥ç»Ÿè®¡ç½‘ç«™çš„è®¿é—®é‡ç­‰ä¿¡æ¯ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é¦–å…ˆå‰å¾€è°·æ­Œåˆ†æå®˜ç½‘æ³¨å†Œè°·æ­Œåˆ†æçš„è´¦å·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨å·²æœ‰çš„è°·æ­Œè´¦å·ç™»å½•ã€‚ç°åœ¨çš„è°·æ­Œåˆ†æä¸€èˆ¬æ˜¯è°·æ­Œåˆ†æ4ï¼ˆGoogle Analytics 4ï¼‰ï¼Œä½¿ç”¨Measurement IDè€Œéä¹‹å‰çš„Tracking IDæ¥è·Ÿè¸ªç½‘ç«™ã€‚&lt;/p>
&lt;p>å‚è€ƒï¼š&lt;a class="link" href="https://www.yundianseo.com/how-to-use-google-analytics/" target="_blank" rel="noopener"
>è°·æ­Œåˆ†æï¼ˆGoogle Analyticsï¼‰æœ€æ–°ä½¿ç”¨æ•™ç¨‹&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è·å–Measurement IDã€‚å…·ä½“å¯å‚è§è°·æ­Œåˆ†æçš„&lt;a class="link" href="https://support.google.com/analytics/answer/9539598" target="_blank" rel="noopener"
>å¸®åŠ©æ–‡æ¡£&lt;/a>ã€‚ä¸‹é¢æ˜¯å…·ä½“æ“ä½œï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨ç”¨æˆ·é¦–é¡µæ‰¾åˆ°â€œAdminâ€œé€‰é¡¹ï¼Œæ–°å»ºä¸€ä¸ªâ€œPropertyâ€ï¼ŒæŒ‰ç…§è¯´æ˜å¡«å…¥å¿…è¦çš„ä¿¡æ¯ã€‚&lt;/li>
&lt;li>ç„¶åç‚¹å‡»â€œPropertyâ€è¿™ä¸€åˆ—ä¸­çš„â€œData Streamsâ€é€‰é¡¹ã€‚&lt;/li>
&lt;li>ç‚¹å‡»â€œAdd streamâ€ï¼Œé€‰æ‹©â€œWebâ€ï¼Œå¡«å…¥ä½ çš„ç½‘ç«™åŸŸåå’Œç½‘ç«™åå­—ã€‚&lt;/li>
&lt;li>å†åœ¨â€œPropertyâ€é¡µé¢ç‚¹å‡»åˆšæ·»åŠ çš„streamï¼Œå°±èƒ½çœ‹åˆ°ä¸€ä¸ªä»¥â€œG-â€å¼€å¤´çš„Measurement IDã€‚è®°å½•ä¸‹ä½ çš„ç½‘ç«™çš„Measurement IDã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹çš„&lt;code>config/_default/config.yaml&lt;/code>é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°â€œgoogleAnalytics&amp;quot;é…ç½®é¡¹ï¼Œå¡«å…¥ä½ çš„Measurement IDã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">GA&lt;/span> &lt;span class="nx">Tracking&lt;/span> &lt;span class="nx">ID&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">googleAnalytics&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">G&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">measuremntID&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h5 id="æäº¤ç«™ç‚¹åœ°å›¾">
&lt;a href="#%e6%8f%90%e4%ba%a4%e7%ab%99%e7%82%b9%e5%9c%b0%e5%9b%be" class="header-anchor">#&lt;/a>
æäº¤ç«™ç‚¹åœ°å›¾
&lt;/h5>&lt;p>ç«™ç‚¹åœ°å›¾ï¼ˆSite Mapï¼‰æ˜¯ä¸€ä¸ªå­˜å‚¨æœ‰ç«™ç‚¹ç½‘é¡µä¿¡æ¯çš„XMLæ•°æ®æ–‡ä»¶ï¼Œé€šå¸¸å‘½åä¸º&lt;code>sitemap.xml&lt;/code>ï¼Œå°†å®ƒæäº¤ç»™æœç´¢å¼•æ“ï¼Œæœç´¢å¼•æ“å°†å¯ä»¥è·å–æˆ‘ä»¬ç½‘ç«™çš„ç½‘é¡µä¿¡æ¯ã€‚&lt;/p>
&lt;p>Hugoä¼šåœ¨ç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç«™æ—¶åœ¨&lt;code>public&lt;/code>æ–‡ä»¶å¤¹ä¸‹è‡ªåŠ¨ç”Ÿæˆ&lt;code>sitemap.xml&lt;/code>æ–‡ä»¶ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬æŠŠç«™ç‚¹åœ°å›¾æäº¤åˆ°è°·æ­Œæœç´¢ï¼Œå…·ä½“è¯´æ˜å¯å‚è§è°·æ­Œç«™é•¿é¡µé¢çš„&lt;a class="link" href="https://developers.google.com/search/docs/beginner/get-started" target="_blank" rel="noopener"
>è¯´æ˜&lt;/a>ï¼Œä¸‹é¢æ˜¯å…·ä½“æ“ä½œï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ç™»å½•è°·æ­Œæœç´¢æ§åˆ¶å°ï¼ˆGoogle Search Consoleï¼‰https://search.google.com/search-consoleï¼Œå¯ä»¥ä½¿ç”¨åœ¨è°·æ­Œåˆ†ææ³¨å†Œçš„è´¦å·ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç‚¹å‡»å·¦ä¸Šè§’çš„â€œAdd propertyâ€ï¼Œé€‰æ‹©å³ä¾§çš„â€œURL prefixâ€æ–¹å¼ï¼Œè¾“å…¥ä»¥httpså¼€å¤´çš„ç½‘ç«™ç½‘å€ã€‚åœ¨éªŒè¯æ‰€æœ‰æƒçš„é€‰é¡¹ä¸­é€‰æ‹©â€œGoogle Analyticsâ€ï¼Œç‚¹å‡»éªŒè¯ã€‚å¦‚æœä½ åœ¨ä¸Šä¸€æ­¥å¼€å¯è°·æ­Œåˆ†æåä½¿ç”¨Hugoé‡æ–°éƒ¨ç½²äº†ç½‘ç«™çš„è¯ï¼Œå°±å¯ä»¥ç›´æ¥éªŒè¯é€šè¿‡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æäº¤ç«™ç‚¹åœ°å›¾æ–‡ä»¶&lt;code>sitemap.xml&lt;/code>ã€‚åœ¨å·¦ä¾§èœå•æ ç‚¹å‡»â€œSitemapsâ€é€‰é¡¹ï¼Œç„¶ååœ¨æ·»åŠ ç«™ç‚¹åœ°å›¾çš„é¡µé¢å¡«å…¥&lt;code>sitemap.xml&lt;/code>æ‰€åœ¨çš„URLã€‚ä¾‹å¦‚å¯¹äºæœ¬ç«™ï¼Œç”±äºæ˜¯åŒè¯­ç«™ç‚¹ï¼ŒHugoåœ¨éƒ¨ç½²ç½‘ç«™æ—¶ä¼šç”Ÿæˆ3ä¸ª&lt;code>sitemap.xml&lt;/code>æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯&lt;code>/public/sitemap.xml&lt;/code>ã€&lt;code>/public/zh-cn/sitemap.xml&lt;/code>ä»¥åŠ&lt;code>/public/en/sitemap.xml&lt;/code>ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼Œæ·»åŠ sitemapæ—¶ä¸è¦æ¼äº†è·¯å¾„å¼€å¤´çš„æ–œæ &lt;code>/&lt;/code>ï¼Œå³ä½¿ç½‘ç«™åŸŸååé¢å·²ç»æœ‰ä¸€ä¸ªæ–œæ äº†ï¼Œä¹Ÿä¸èƒ½çœç•¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æäº¤æˆåŠŸä¹‹åâ€œstatusâ€ä¼šæ˜¾ç¤ºâ€œsuccessâ€ã€‚&lt;/p>
&lt;p>Hugoç”Ÿæˆçš„3ä¸ªç«™ç‚¹åœ°å›¾ä¸­ï¼Œ&lt;code>/public/sitemap.xml&lt;/code>ä¸­çš„å†…å®¹å…¶å®æ˜¯æŒ‡å‘&lt;code>/public/zh-cn/sitemap.xml&lt;/code>å’Œ&lt;code>/public/en/sitemap.xml&lt;/code>çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªæäº¤ä¸€ä¸ª&lt;code>/public/sitemap.xml&lt;/code>å°±å¯ä»¥ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>ä¸€èˆ¬åœ¨ç«™ç‚¹åœ°å›¾æˆåŠŸæäº¤ä¹‹åå¤§çº¦1åˆ°2å¤©åï¼Œå°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„ç½‘ç«™å·²ç»è¢«è°·æ­Œæ”¶å½•äº†ã€‚å¯ä»¥åœ¨è°·æ­Œæœç´¢æ¡†ä¸­è¾“å…¥&lt;code>site:xxx.com&lt;/code>æ¥æŸ¥çœ‹æŸä¸ªç½‘ç«™æ˜¯å¦è¢«è°·æ­Œæœç´¢æ”¶å½•ã€‚&lt;/p>
&lt;h4 id="ç™¾åº¦æœç´¢ä¼˜åŒ–">
&lt;a href="#%e7%99%be%e5%ba%a6%e6%90%9c%e7%b4%a2%e4%bc%98%e5%8c%96" class="header-anchor">#&lt;/a>
ç™¾åº¦æœç´¢ä¼˜åŒ–
&lt;/h4>&lt;p>é’ˆå¯¹ç™¾åº¦æœç´¢çš„ä¼˜åŒ–æ˜¯åœ¨&lt;a class="link" href="https://ziyuan.baidu.com/" target="_blank" rel="noopener"
>ç™¾åº¦èµ„æºæœç´¢å¹³å°&lt;/a>ä¸Šå®Œæˆçš„ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å‰å¾€&lt;a class="link" href="https://ziyuan.baidu.com/" target="_blank" rel="noopener"
>ç™¾åº¦èµ„æºæœç´¢å¹³å°&lt;/a>ï¼Œç™»å½•ç™¾åº¦è´¦å·ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç‚¹å‡»â€œé“¾æ¥æäº¤â€ï¼Œç„¶åç‚¹å‡»&amp;quot;æ·»åŠ ç«™ç‚¹&amp;quot;ã€‚è¾“å…¥ä½ çš„ç½‘ç«™åŸŸåï¼ŒåŒæ ·éœ€è¦éªŒè¯ç«™ç‚¹çš„æ‰€æœ‰æƒï¼Œè¿™é‡Œé€‰æ‹©ä¸‹è½½éªŒè¯æ–‡ä»¶ï¼Œç„¶åæŠŠéªŒè¯æ–‡ä»¶æ”¾åœ¨ç½‘ç«™&lt;code>static&lt;/code>æ–‡ä»¶å¤¹å†…ï¼Œåœ¨ä¸Šä¼ åˆ°Githubã€‚æœ€åç‚¹å‡»â€œéªŒè¯â€å³å¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç„¶åç‚¹å‡»å·¦ä¾§èœå•æ â€œèµ„æºæäº¤â€ä¸­çš„â€œæ™®é€šæ”¶å½•â€ï¼Œåœ¨èµ„æºæäº¤çš„é¡µé¢ä¸‹é€‰æ‹©â€œsitemapâ€ï¼Œè¾“å…¥&lt;code>sitemap.xml&lt;/code>æ‰€åœ¨çš„URLå°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;p>ä¸è¿‡åœ¨ç™¾åº¦æäº¤sitemapæœ‰ä¸¤ä¸ªé™åˆ¶ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸å…è®¸æäº¤ç´¢å¼•å‹sitemap&lt;/li>
&lt;li>å¯¹æ–°è´¦å·æ¯å¤©åªå…è®¸æäº¤ä¸€ä¸ªsitemapæ–‡ä»¶&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="å…¶ä»–å¹³å°æ”¶å½•">
&lt;a href="#%e5%85%b6%e4%bb%96%e5%b9%b3%e5%8f%b0%e6%94%b6%e5%bd%95" class="header-anchor">#&lt;/a>
å…¶ä»–å¹³å°æ”¶å½•
&lt;/h4>&lt;p>å…¶ä»–å¹³å°æ”¶å½•å°±ä¸ä»”ç»†è®²è§£äº†ï¼Œæä¾›ä¸€ä¸‹é“¾æ¥ä¾›å¤§å®¶å‚è€ƒã€‚éƒ½å·®ä¸å¤šä¸€æ ·çš„éªŒè¯æ–¹å¼ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æœç‹—æ”¶å½•&lt;/p>
&lt;p>æœç‹—æ”¶å½•ä¸æ”¯æŒç«™ç‚¹åœ°å›¾æäº¤ï¼Œéœ€è¦ä½ åˆ—å‡ºæ‰€æœ‰çš„urlæ‰¹é‡æäº¤ï¼Œæ¯æ¬¡æäº¤20æ¡ï¼Œæ‰€ä»¥æ²¡æœ‰å…¶ä»–å¹³å°é‚£ä¹ˆæ™ºèƒ½ã€‚æ¯æ¬¡æ–°åŠ æ–°çš„ç½‘é¡µè¿˜éœ€è¦è‡ªå·±ä¸»åŠ¨æäº¤ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="https://zhanzhang.sogou.com/index.php/sitelink/index" target="_blank" rel="noopener"
>æœç‹—æœç´¢èµ„æºå¹³å°&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Bingæ”¶å½•&lt;/p>
&lt;p>&lt;a class="link" href="https://www.bing.com/webmasters/home" target="_blank" rel="noopener"
>Microsoft Bing Webmaster Tools&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>360æäº¤å…¥å£ï¼š &lt;a class="link" href="https://info.so.com/site_submit.html" target="_blank" rel="noopener"
>https://info.so.com/site_submit.html&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Backdata æœç´¢å¼•æ“ç½‘å€æäº¤å…¥å£ï¼š &lt;a class="link" href="https://backdata.net/submit-site.html" target="_blank" rel="noopener"
>https://backdata.net/submit-site.html&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>å‚è€ƒï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://jinli.io/p/%e4%b8%aa%e4%ba%ba%e7%bd%91%e7%ab%99%e7%9a%84%e5%bb%ba%e7%ab%8b%e8%bf%87%e7%a8%8b%e5%9b%9b%e7%bd%91%e7%ab%99%e7%9a%84%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e%e4%bc%98%e5%8c%96seo/" target="_blank" rel="noopener"
>ä¸ªäººç½‘ç«™çš„å»ºç«‹è¿‡ç¨‹ï¼ˆå››ï¼‰ï¼šç½‘ç«™çš„æœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://zhuanlan.zhihu.com/p/597182079" target="_blank" rel="noopener"
>ä»é›¶å¼€å§‹æ­å»ºä¸ªäººåšå®¢ç½‘ç«™ç³»åˆ— äº”ã€è®©æœç´¢å¼•æ“æ”¶å½•ä½ çš„ä¸ªäººåšå®¢ç½‘ç«™&lt;/a>&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;h2 id="é¢å¤–çš„ä¸€äº›çŸ¥è¯†">
&lt;a href="#%e9%a2%9d%e5%a4%96%e7%9a%84%e4%b8%80%e4%ba%9b%e7%9f%a5%e8%af%86" class="header-anchor">#&lt;/a>
é¢å¤–çš„ä¸€äº›çŸ¥è¯†
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>&lt;code>gh-pages&lt;/code> æ˜¯GitHub æ‰€æä¾›çš„ä¸€ä¸ªæœåŠ¡ï¼Œç®€å•æ¥è®²å°±æ˜¯å¯ä»¥è®©ä½ ä¸ç”¨èŠ±é’±ä¹Ÿå¯ä»¥éƒ¨ç½²ä¸€ä¸ªé™æ€ç½‘é¡µä½œä¸ºå±•ç¤ºç”¨ï¼Œå› æ­¤å¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆæ¥è®²å°±éå¸¸æ–¹ä¾¿è€Œä¸”å¾ˆå®ç”¨ï¼Œä½†æ˜¯éƒ¨ç½²æ–¹å¼æœ‰å¾ˆå¤šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>gh-pages&lt;/code>æ˜¯&lt;code>github-pages&lt;/code>çš„ç¼©å†™ï¼Œå¯ä»¥ç”¨äºä¸ªäººåšå®¢å’Œé¡¹ç›®ä»‹ç»çš„ç½‘ç«™æœåŠ¡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>gh-pages&lt;/code>ä¹Ÿæ˜¯githubç‰¹æ®Šçš„åˆ†æ”¯ï¼Œç”¨æ¥å­˜æ”¾ç½‘ç«™ç›¸å…³çš„ä¸€äº›èµ„æºï¼Œé€šå¸¸ç½‘ç«™åœ°å€ä¸º&lt;code>username.github.io/ä»“åº“å&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é¡¹ç›®åä¸&lt;code>username.github.io&lt;/code>ä¸€æ ·çš„è¯ï¼Œå¯ä»¥çœç•¥ä»“åº“åï¼Œè·Ÿgithubä¸ªäººèµ„æ–™é¡µé¢ä¸€æ ·ï¼Œæ‰€ä»¥è¿™ä¸ªä»“åº“æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä»“åº“ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨å¼€å¯gh-pagesæœåŠ¡ã€‚åˆ«çš„éœ€è¦æ‰‹åŠ¨ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>è™½ç„¶gh-pages æ˜¯å±äºå…è´¹çš„æœåŠ¡ï¼ŒåŸºæœ¬ä¸Šåªè¦ä½ æŒæœ‰GitHub å¸å·å°±å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒåŸºæœ¬ä¸Šæœ‰å‡ ä¸ªé‡ç‚¹å¯ä»¥ç¨å¾®æ³¨æ„ä¸€ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>åªèƒ½æ”¾ç½®çº¯é™æ€ç½‘é¡µï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰åç«¯çš„ç½‘é¡µï¼Œä¾‹å¦‚PHPã€Node.jsã€Python ç­‰ç­‰ï¼Œåªèƒ½æ˜¯çº¯HTMLã€CSSã€JavaScript ç­‰ç­‰ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰è¿ç®—èƒ½åŠ›ã€‚&lt;/li>
&lt;li>gh-pages æ˜¯ä»¥å‚¨å­˜åº“ä¸ºå•ä½ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå‚¨å­˜åº“éƒ½å¯ä»¥æœ‰ä¸€ä¸ªgh-pages åˆ†æ”¯ï¼Œä½†æ˜¯æ¯ä¸ªå‚¨å­˜åº“åªèƒ½æœ‰ä¸€ä¸ªgh-pages åˆ†æ”¯ï¼Œå› æ­¤å¦‚æœä½ æƒ³è¦éƒ¨ç½²å¤šä¸ªç½‘é¡µï¼Œé‚£ä¹ˆä½ å°±éœ€è¦å»ºç«‹å¤šä¸ªå‚¨å­˜åº“ã€‚&lt;/li>
&lt;li>gh-pages çš„å®¹é‡æ˜¯æœ‰é™åˆ¶çš„ï¼Œæ¯ä¸ªå‚¨å­˜åº“çš„å®¹é‡æ˜¯1GBï¼Œå¦‚æœä½ çš„ç½‘é¡µè¶…è¿‡è¿™ä¸ªå®¹é‡ï¼Œé‚£ä¹ˆå°±æ— æ³•éƒ¨ç½²ã€‚&lt;/li>
&lt;li>gh-pages çš„æµé‡ä¸ºæ¯æœˆ100GB&lt;/li>
&lt;li>gh-pages æ¯å°æ—¶åªèƒ½éƒ¨ç½²10 æ¬¡ï¼Œå¦‚æœæ˜¯ä½¿ç”¨è‡ªå·±å†™çš„GitHub Actions å°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼ˆæ¯•ç«Ÿè¦èŠ±é’±ï¼‰ã€‚&lt;/li>
&lt;li>å…è´¹çš„ssh å‡­è¯&lt;/li>
&lt;li>é¢„è®¾çš„ç½‘åŸŸæ˜¯&lt;code>https://&amp;lt;username&amp;gt;.github.io/&amp;lt;repository&amp;gt;&lt;/code>ï¼Œå¦‚æœä½ æƒ³è¦ä½¿ç”¨è‡ªå·±çš„ç½‘åŸŸï¼Œé‚£ä¹ˆä½ å°±éœ€è¦èŠ±é’±è´­ä¹°ç½‘åŸŸï¼Œå¹¶ä¸”è®¾å®šDNS&lt;/li>
&lt;/ul>
&lt;p>æœ€åè¦ç¨å¾®æ³¨æ„ä¸€ä¸‹gh-pages è™½ç„¶æ˜¯å…è´¹æä¾›çš„é™æ€ç½‘é¡µæ‰˜ç®¡æœåŠ¡ï¼Œä½†æ˜¯å®ƒå¹¶ä¸èƒ½æ‹¿æ¥ä½œä¸ºå•†ä¸šç”¨é€”æˆ–æ˜¯è¿æ³•ç”¨é€”ï¼Œå¦åˆ™ä½ çš„å¸å·å¯èƒ½ä¼šè¢«å°é”&lt;/p>
&lt;p>ç®€å•è¯´ä¸€ä¸‹å¦‚ä½•æŸ¥çœ‹ä¸€ä¸ªä»“åº“æ˜¯å¦å¯ç”¨&lt;code>gh-pages&lt;/code>ï¼šè¿›å…¥é¡¹ç›®settings-pagesæŸ¥çœ‹å³å¯ï¼Œæœ‰ç»¿è‰²é’©å°±å¯åŠ¨æˆåŠŸï¼Œæ²¡æœ‰éœ€è¦æŒ‡å®šåˆ†æ”¯å’Œæ ¹ç›®å½•ï¼Œä¿å­˜ï¼Œç¨ç­‰ä¸€ä¼šå°±è¡Œã€‚&lt;/p>
&lt;h3 id="ç”¨gh-pagesåˆ†æ”¯å±•ç¤ºè‡ªå·±çš„é¡¹ç›®">
&lt;a href="#%e7%94%a8gh-pages%e5%88%86%e6%94%af%e5%b1%95%e7%a4%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e9%a1%b9%e7%9b%ae" class="header-anchor">#&lt;/a>
ç”¨gh-pagesåˆ†æ”¯å±•ç¤ºè‡ªå·±çš„é¡¹ç›®
&lt;/h3>&lt;p>æˆ‘ä»¬åªéœ€è¦å°†ç½‘é¡µèµ„æºä¸Šä¼ è‡³gh-pagesåˆ†æ”¯å³å¯&lt;/p>
&lt;p>æ­å»ºé¡¹ç›®ç½‘ç«™ï¼šå°†é¡¹ç›®ç½‘ç«™èµ„æºæ¨é€åˆ°gh-pagesåˆ†æ”¯ä¸Š,é™æ€èµ„æºå¿…é¡»æäº¤äº†æ‰ä¼šæˆåŠŸ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git subtree push --prefix&lt;span class="o">=&lt;/span>dist origin gh-pages &lt;span class="c1"># distä¸ºé¡¹ç›®ç½‘ç«™çš„ç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‹‰å–æŒ‡å®šåˆ†æ”¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git fetch origin &lt;span class="c1"># è·å–originä»“åº“çš„ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git checkout -b aaa origin/aaa &lt;span class="c1"># åˆ›å»ºå¹¶æ£€å‡ºåˆ†æ”¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># git cloneä¹‹åä¹Ÿä¹Ÿå¯ä»¥æ£€å‡ºåˆ†æ”¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git checkout gh-page &lt;span class="c1"># å¤±è´¥ç”¨ä¸Šé¢åŠæ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åœ¨git clone çš„æ—¶å€™å¯ä»¥æŒ‡å®šåˆ†æ”¯-bé€‰é¡¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone -b url
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœè¦é¡¹ç›®ä¸­ä¸å«è‡ªå·±ç½‘ç«™çš„æºç ï¼Œå¯ä»¥å¿½ç•¥publicç›®å½•ï¼Œå°†publicç›®å½•åˆ›å»ºä¸ºä¸€ä¸ªç§æœ‰ä»“åº“çš„å­ç›®å½•ï¼Œç„¶åå°†å­ç›®å½•ä½œä¸ºï¼Œé¡¹ç›®çš„gh-pagesåˆ†æ”¯ã€‚&lt;/p>
&lt;h3 id="é€šè¿‡github-actionsè‡ªåŠ¨éƒ¨ç½²gh-pages">
&lt;a href="#%e9%80%9a%e8%bf%87github-actions%e8%87%aa%e5%8a%a8%e9%83%a8%e7%bd%b2gh-pages" class="header-anchor">#&lt;/a>
é€šè¿‡GitHub Actionsè‡ªåŠ¨éƒ¨ç½²gh-pages
&lt;/h3>&lt;blockquote>
&lt;p>ç®€å•ä»‹ç»ä¸€ä¸‹GitHub Actions:&lt;/p>
&lt;ol>
&lt;li>GitHub Actionsæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥å…·ã€‚&lt;/li>
&lt;li>å¯ä»¥å®ç°è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•ã€å’Œéƒ¨ç½²é¡¹ç›®ã€‚&lt;/li>
&lt;li>å®šä¹‰è‡ªåŠ¨åŒ–è¿‡ç¨‹æ˜¯é€šè¿‡ç¼–å†™&lt;code>workflows&lt;/code>ï¼ˆå·¥ä½œæµï¼‰å®ç°çš„ï¼Œæ ¼å¼æ˜¯&lt;code>yaml&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;ol>
&lt;li>
&lt;p>æ¨é€éƒ¨ç½²çš„github-pageséœ€è¦gitè´¦æˆ·è®¤è¯ï¼Œæ–¹å¼æ˜¯SSHç§˜é’¥è®¤è¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰€ä»¥éœ€è¦è®¾ç½®sshç§˜é’¥ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ç”Ÿæˆç§˜é’¥ï¼šåœ¨bashä¸­è¿è¡Œ&lt;code>ssh-keygen&lt;/code>,ç§˜é’¥ç±»å‹é»˜è®¤ä¸º&lt;code>rsa&lt;/code>ã€‚å¯ä»¥ç»™è¿™ä¸ªç§˜é’¥è®¾ç½®å¤‡æ³¨åŠ &lt;code>-C&lt;/code>é€‰é¡¹ï¼Œå‚æ•°ä¸€èˆ¬ä¸ºæ‹¥æœ‰è€…é‚®ç®±ï¼Œä¸€ç›´å›è½¦å°±è¡Œã€‚ç§˜é’¥ä¿å­˜ä½ç½®ï¼šé»˜è®¤ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„&lt;code>.ssh&lt;/code>ã€‚å…¬é’¥å°±æ˜¯&lt;code>id_rsa.pub&lt;/code>&lt;/p>
&lt;ol>
&lt;li>å»ºè®®å°†ç”Ÿæˆçš„è¿™ä¸ªç§˜é’¥å¯¹ä¸&lt;strong>æœ¬æœºè®¤è¯&lt;/strong>çš„sshç§˜é’¥å¯¹åˆ†å¼€ï¼Œä¿å­˜åˆ°å¦å¤–çš„ä¸€ä¸ªåœ°æ–¹ã€‚å›è½¦çš„æ—¶å€™ä¿®æ”¹ä½ç½®å°±è¡Œã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>è®¾ç½®å…¬é’¥ï¼š&lt;/p>
&lt;ol>
&lt;li>githubè´¦æˆ·&lt;code>Settings&lt;/code>-&amp;gt;&lt;code>SSH and GPG keys&lt;/code>-&amp;gt;&lt;code>New SSH key&lt;/code>å°†å…¬é’¥å¤åˆ¶ç²˜è´´ä¿å­˜å°±è¡Œã€‚è¿™ç§æ–¹å¼ï¼Œåªæœ‰æœ‰ç§é’¥ï¼Œå°±èƒ½æ“ä½œæ‰€æœ‰ä»“åº“ï¼Œä¸æ¨èä½¿ç”¨ã€‚&lt;/li>
&lt;li>(è‡ªåŠ¨æ„å»ºä¹‹å)&lt;strong>é€‰æ‹©&lt;/strong>è¦æ¨é€çš„ä»“åº“&lt;code>Settings&lt;/code>-&amp;gt;&lt;code>Deploy keys&lt;/code>-&amp;gt;&lt;code>Add deploy key&lt;/code>å°†å…¬é’¥å¤åˆ¶ç²˜è´´ä¿å­˜å°±è¡Œã€‚titleéšæ„ã€‚æ³¨æ„å‹¾é€‰&lt;strong>Allow write access&lt;/strong>ã€‚åªé’ˆå¯¹è¯¥ä»“åº“æœ‰æƒé™ã€‚æ¨èä½¿ç”¨ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>è®¾ç½®ç§é’¥ï¼š&lt;/p>
&lt;ol>
&lt;li>è¿›å…¥Actionsæ‰€åœ¨çš„ä»“åº“&lt;code>Settings&lt;/code>-&amp;gt;&lt;code>Secrets and variables&lt;/code>-&amp;gt;&lt;code>Actions&lt;/code>-&amp;gt;&lt;code>New repository secret&lt;/code>ã€‚ç§˜é’¥åç§°ä¸º&lt;code>ACTIONS_DEPLOY_KEY&lt;/code>ï¼Œå€¼ä¸ºç§é’¥&lt;code>id_rsa&lt;/code>çš„æ–‡ä»¶å†…å®¹ã€‚æœ€åä¿å­˜å°±è¡Œã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>æ·»åŠ workflowsé…ç½®æ–‡ä»¶&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åœ¨æ„å»ºä»“åº“çš„æ ¹ç›®å½•ä¸‹åˆ›å»º&lt;code>.github/workflows&lt;/code>ç›®å½•ï¼Œç„¶ååˆ›å»º&lt;code>auto-deploy-gh-pages.yaml&lt;/code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy github pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">main&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># main æ›´æ–°è§¦å‘&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Allows you to run this workflow manually from the Actions tab&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">workflow_dispatch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">auto-deploy-github-pages&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Checkout code&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># clone submodules&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">fetch-depth&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># å…‹éš†æ‰€æœ‰å†å²ä¿¡æ¯&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0.125.4&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Hugo ç‰ˆæœ¬&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># hugoæ’ä»¶ç‰ˆ Stackä¸»é¢˜ å¿…é¡»å¯ç”¨&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Cache resources&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># ç¼“å­˜ resource æ–‡ä»¶åŠ å¿«ç”Ÿæˆé€Ÿåº¦&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/cache@v4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">resources&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># æ£€æŸ¥ç…§ç‰‡æ–‡ä»¶å˜åŒ–&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ runner.os }}-hugocache-${{ hashFiles(&amp;#39;content/**/*&amp;#39;) }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restore-keys&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ runner.os }}-hugocache-&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># ç”Ÿæˆç½‘é¡µ åˆ é™¤æ— ç”¨ resource æ–‡ä»¶ å‰Šå‡ç©ºè¡Œ&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo --minify --gc&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># éƒ¨ç½²åˆ° GitHub Page&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># å¦‚æœåœ¨åŒä¸€ä¸ªä»“åº“ä¸‹ä½¿ç”¨è¯·ä½¿ç”¨ github_token å¹¶æ³¨é‡Š deploy_key&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># github_token: ${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.ACTIONS_DEPLOY_KEY }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># å¦‚æœåœ¨åŒä¸€ä¸ªä»“åº“è¯·æ³¨é‡Š&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">external_repository&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">arlettebrook/arlettebrook.github.io&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># ä½ çš„ GitHub page ä»“åº“ example/example.github.io&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">main&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># é»˜è®¤gh-pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># cname: blog.trojan123.top # è‡ªå®šä¹‰åŸŸå&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./public&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;github-actions[bot]&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user_email&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;github-actions[bot]@users.noreply.github.com&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># full_commit_message: ${{ github.event.head_commit.message }} # ä¸å¸¦æäº¤å“ˆå¸Œ&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># full_commit_message: Deploy from ${{ github.repository }}@${{ github.sha }} ğŸš€&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">commit_message&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ github.event.head_commit.message }}ğŸš€&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># å¸¦æäº¤å“ˆå¸Œ&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># full_commit_message: Deploy from ${{ github.repository }}@${{ github.sha }}ğŸš€ ${{ github.event.head_commit.message }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ³¨æ„&lt;/strong>ä½ è¦å°†&lt;code>external_repository&lt;/code>é¡¹é‡Œçš„&lt;code>arlettebrook/arlettebrook.github.io&lt;/code>æ”¹ä¸ºä½ è¦æ¨é€çš„ä»“åº“ã€‚&lt;code>cname&lt;/code>ä¸ºä½ ç»‘å®šçš„è‡ªå®šä¹‰åŸŸåã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>å¿½ç•¥ä¸å¿…è¦çš„æ–‡ä»¶&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åœ¨æ„å»ºé¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º&lt;code>.gitignore&lt;/code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">public
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">assets/jsconfig.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.hugo_build.lock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>æœ€åå°†æ„å»ºé¡¹ç›®æ¨é€åˆ°è¿œç¨‹å°±è¡Œï¼Œè¿™æ ·æ¯æ¬¡æ¨é€æ„å»ºé¡¹ç›®çš„mainåˆ†æ”¯åˆ°è¿œç¨‹ï¼Œå°±ä¼šè‡ªåŠ¨æ„å»ºå¹¶æ¨é€åˆ°æŒ‡å®šä»“åº“ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŸ¥çœ‹æ˜¯å¦æ„å»ºæˆåŠŸï¼šè¿›å…¥æ„å»ºé¡¹ç›®çš„Actionsé€‰é¡¹é‡Œé¢å³å¯æŸ¥çœ‹ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>å‚è€ƒï¼š&lt;a class="link" href="https://blog.linsnow.cn/p/deploy-hugo/" target="_blank" rel="noopener"
>ï¼ˆ2ï¼‰éƒ¨ç½²ä½ çš„Hugoåšå®¢&lt;/a>&lt;/p>
&lt;/blockquote></description></item><item><title>å½’æ¡£</title><link>https://arlettebrook.github.io/archives/</link><pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate><guid>https://arlettebrook.github.io/archives/</guid><description/></item><item><title>æ ‡ç­¾</title><link>https://arlettebrook.github.io/tags/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://arlettebrook.github.io/tags/</guid><description/></item><item><title>å…³äº</title><link>https://arlettebrook.github.io/%E5%85%B3%E4%BA%8E/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://arlettebrook.github.io/%E5%85%B3%E4%BA%8E/</guid><description>&lt;p>&lt;a class="link" href="https://github.com/Arlettebrook/arlettebrook" target="_blank" rel="noopener"
>&lt;img src="https://arlettebrook.github.io/icon/Bottom_up.svg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;p>
&lt;a href='https://github.com/Arlettebrook/arlettebrook'>&lt;img src="https://github.com/Arlettebrook/arlettebrook/blob/main/icon/Olaf.gif?raw=true" width="100px" alt="Olaf" />&lt;/a>&lt;a href="https://github.com/arlettebrook">&lt;img src="https://readme-typing-svg.herokuapp.com?font=Fira+Code&amp;pause=1000&amp;width=435&amp;lines=Hi+there+%F0%9F%91%8B%2C+I+am+Arlettebrook." alt="Typing SVG" />&lt;/a>
&lt;/p>
&lt;div align='center'>&lt;a href='https://github.com/Arlettebrook/arlettebrook' >&lt;img width="70%" alt="Github Image" src="https://arlettebrook.github.io/icon/git-header.svg" >&lt;/a>&lt;/div>
&lt;p>&lt;a href='https://github.com/Arlettebrook/arlettebrook'>&lt;img src='https://badges.frapsoft.com/os/v2/open-source.svg?v=103' alt="Open Source" />&lt;/a>&lt;/p>
&lt;div align='center'>
&lt;b>&lt;i>Awesome-github-profiles&lt;/i>&lt;br/>&lt;br/>
&lt;i>Config files for your GitHub profile.&lt;/i>&lt;br>&lt;br/>
&lt;i>List of GitHub profiles that have awesome customisation, that you can use for inspiration.&lt;/i>&lt;/b>
&lt;/div>
&lt;hr>
&lt;div>
&lt;a href='https://github.com/arlettebrook'>
&lt;img src="https://github.com/Arlettebrook/arlettebrook/blob/main/icon/header_.png?raw=true"> &lt;/a>
&lt;/div>
&lt;p align='center'>
&lt;a href='https://github.com/Arlettebrook/arlettebrook'>&lt;img src="https://arlettebrook.github.io/icon/GITHey.gif" width="50px" alt="Olaf" />&lt;/a>
&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/lowlighter/metrics" target="_blank" rel="noopener"
>&lt;img src="https://raw.githubusercontent.com/arlettebrook/arlettebrook/main/github-metrics.svg"
loading="lazy"
alt="Stats"
>&lt;/a>&lt;/p>
&lt;p align="center">
&lt;a href='https://github.com/arlettebrook'>
&lt;img src="https://github-readme-stats.vercel.app/api?username=arlettebrook&amp;show_icons=true&amp;theme=onedark&amp;show=reviews,discussions_started,discussions_answered,prs_merged,prs_merged_percentage&amp;PAT_1"> &lt;/a>
&lt;/p>
&lt;div align='center'>
&lt;a href='https://github.com/arlettebrook/arlettebrook'>
&lt;img src='https://github-readme-stats.vercel.app/api/wakatime?username=Arlettebrook&amp;layout=donut-vertical&amp;theme=panda'>
&lt;/a>
&lt;/div>
&lt;div align='center'>
&lt;img src='https://github-readme-stats.vercel.app/api/top-langs/?username=arlettebrook&amp;langs_count=6&amp;layout=compact&amp;theme=nord&amp;PAT_1'>
&lt;/div>
&lt;table align="center" border="0" cellspacing="5" cellpadding="0">
&lt;tr>
&lt;td>
&lt;a href='https://github.com/arlettebrook/arlettebrook'>
&lt;img src='https://github-readme-stats.vercel.app/api/pin/?username=arlettebrook&amp;repo=arlettebrook&amp;show_owner=true&amp;theme=buefy&amp;PAT_1'>
&lt;/a>
&lt;/td>
&lt;td>
&lt;a href='https://github.com/arlettebrook/autoCheck-in'>
&lt;img src='https://github-readme-stats.vercel.app/api/pin/?username=arlettebrook&amp;repo=autoCheck-in&amp;show_owner=true&amp;theme=buefy&amp;PAT_1'>
&lt;/a>
&lt;/td>
&lt;/tr>
&lt;!-- æ·»åŠ æ›´å¤šå›¾ç‰‡é“¾æ¥ -->
&lt;tr>
&lt;td>
&lt;a href='https://github.com/arlettebrook/arlettebrook.github.io'>
&lt;img src='https://github-readme-stats.vercel.app/api/pin/?username=arlettebrook&amp;repo=arlettebrook.github.io&amp;show_owner=true&amp;theme=buefy&amp;PAT_1'>
&lt;/a>
&lt;/td>
&lt;td>
&lt;a href='https://github.com/arlettebrook/null'>
&lt;img src='https://github-readme-stats.vercel.app/api/pin/?username=arlettebrook&amp;repo=null&amp;show_owner=true&amp;theme=buefy&amp;PAT_1'>
&lt;/a>
&lt;/td>
&lt;/tr>
&lt;/table>
&lt;ul>
&lt;li>ğŸ“« &lt;strong>How to reach me:&lt;/strong>
&lt;ul>
&lt;li>&lt;strong>Email: &lt;a class="link" href="mailto:arlettebrook@foxmail.com" >arlettebrook@foxmail.com&lt;/a>&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;div align='center'>
&lt;b>&lt;i>Awesome-github-profiles&lt;/i>&lt;br/>&lt;br/>
&lt;i>If you liked my profile, you can Star â­ the repo and if you want to use this template you can Fork it and can use.&lt;/i>&lt;br>
&lt;i>Would you ike to meet me?&lt;/i>&lt;/br>&lt;br/>
&lt;i>If you want to contribute to any of my repositories, feel free to submit PRs, issues and email me. Pick a slot if you'd like to meet me and chat about proposals and ideas - but make sure to describe the agenda.&lt;/i>&lt;/b>&lt;br/>
&lt;/div>
&lt;blockquote>
&lt;p>&lt;a href='https://github.com/Arlettebrook/arlettebrook'>&lt;img src="https://arlettebrook.github.io/icon/Minion.gif" width="50px" alt="Olaf" />&lt;/a>&lt;strong>è¿™é‡Œæœ‰æ›´å¤šå…³äºä¸ªäººèµ„æ–™çš„æ¨¡æ¿ï¼Œå¯ä»¥è‡ªç”±æŒ‘é€‰è‡ªå·±å–œæ¬¢çš„å…ƒç´ ï¼ŒåŠ å…¥åˆ°è‡ªå·±çš„profileä¸­ã€‚å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œæ„Ÿè°¢ç»™&lt;a class="link" href="https://github.com/Arlettebrook/arlettebrook" target="_blank" rel="noopener"
>æœ¬ä»“åº“&lt;/a>ã€&lt;a class="link" href="https://github.com/EddieHubCommunity/awesome-github-profiles" target="_blank" rel="noopener"
>æ¨¡æ¿ä»“åº“&lt;/a>ä¸€é¢—å¿ƒâ­ã€‚&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;details>
&lt;summary>More profile templates and api&lt;/summary>
&lt;p align='center'>
&lt;b>&lt;a href='./profileTemplates.md'>More profile Templates&lt;/a>&lt;/b>&lt;br/>
&lt;b>&lt;a href='https://github.com/rzashakeri/beautify-github-profile'>rzashakeri/beautify-github-profile&lt;/a>&lt;/b>&lt;br/>
&lt;b>&lt;a href='https://github.com/abhisheknaiidu/awesome-github-profile-readme'>abhisheknaiidu/awesome-github-profile-readme&lt;/a>&lt;/b>&lt;br/>
&lt;/p>
&lt;!-- DO NOT EDIT THIS SECTION -->
&lt;!-- START_SECTION:data-section -->
&lt;/details>
&lt;hr>
&lt;h2 id="star-history">
&lt;a href="#star-history" class="header-anchor">#&lt;/a>
Star History
&lt;/h2>&lt;p>&lt;a class="link" href="https://github.com/arlettebrook" target="_blank" rel="noopener"
>&lt;img src="https://api.star-history.com/svg?repos=Arlettebrook/autoCheck-in,Arlettebrook/arlettebrook&amp;amp;type=Date"
loading="lazy"
alt="Star History Chart"
>&lt;/a>&lt;/p>
&lt;hr>
&lt;blockquote>
&lt;p>å…è´£å£°æ˜: æœ¬äººæ‰€æœ‰ä»“åº“é¡¹ç›®ä¸­æ‰€æ¶‰åŠçš„ä»»ä½•è§£é”å’Œè§£å¯†åˆ†æè„šæœ¬ï¼Œä»…ç”¨äºæµ‹è¯•å’Œå­¦ä¹ ç ”ç©¶ï¼Œä¸ä¿è¯å…¶åˆæ³•æ€§ï¼Œå‡†ç¡®æ€§ï¼Œå®Œæ•´æ€§å’Œæœ‰æ•ˆæ€§ï¼Œè¯·æ ¹æ®æƒ…å†µè‡ªè¡Œåˆ¤æ–­ã€‚è¯·å‹¿å°†æœ¬é¡¹ç›®çš„ä»»ä½•å†…å®¹ç”¨äºå•†ä¸šæˆ–éæ³•é€”å¾„ï¼Œå¦åˆ™åæœç”±ä½¿ç”¨è€…è‡ªè´Ÿã€‚å¦‚æœæ‚¨è®¤ä¸ºè¯¥é¡¹ç›®çš„å†…å®¹å¯èƒ½æ¶‰å«Œä¾µçŠ¯å…¶æƒåˆ©ï¼Œè¯·ä¸æˆ‘è”ç³»ï¼Œæˆ‘ä¼šå°½å¿«åˆ é™¤æ–‡ä»¶ã€‚å¦‚æœæ‚¨ä½¿ç”¨æˆ–å¤åˆ¶äº†æœ¬äººä»“åº“é¡¹ç›®ä¸­çš„ä»»ä½•å†…å®¹ï¼Œåˆ™è§†ä¸ºæ‚¨å·²æ¥å—æ­¤å…è´£å£°æ˜ã€‚ æœé›†æ•´ç†è‡ªå„ä½å¤§ä½¬ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>Thanks for visiting :heart:&lt;/p>
&lt;p align="center">
&lt;a href='https://github.com/Arlettebrook/arlettebrook'>
&lt;img src="https://profile-counter.glitch.me/arlettebrook/count.svg">
&lt;a/>
&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/Arlettebrook/arlettebrook" target="_blank" rel="noopener"
>&lt;img src="https://arlettebrook.github.io/icon/Bottom_down.svg"
loading="lazy"
>&lt;/a>&lt;/p>
&lt;!--
**arlettebrook/arlettebrook** is a âœ¨ _special_ âœ¨ repository because its `README.md` (this file) appears on your GitHub profile.
Here are some ideas to get you started:
- ğŸ”­ Iâ€™m currently working on ...
- ğŸŒ± Iâ€™m currently learning ...
- ğŸ‘¯ Iâ€™m looking to collaborate on ...
- ğŸ¤” Iâ€™m looking for help with ...
- ğŸ’¬ Ask me about ...
- ğŸ“« How to reach me: ...
- ğŸ˜„ Pronouns: ...
- âš¡ Fun fact: ...
--></description></item><item><title>é“¾æ¥</title><link>https://arlettebrook.github.io/%E9%93%BE%E6%8E%A5/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://arlettebrook.github.io/%E9%93%BE%E6%8E%A5/</guid><description>&lt;p>To use this feature, add &lt;code>links&lt;/code> section to frontmatter.&lt;/p>
&lt;p>This page&amp;rsquo;s frontmatter:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">links&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitHub&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitHub is the world&amp;#39;s largest software development platform.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">website&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://github.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TypeScript&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">website&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://www.typescriptlang.org&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ts-logo-128.jpg&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>image&lt;/code> field accepts both local and external images.&lt;/p></description></item><item><title>æœç´¢</title><link>https://arlettebrook.github.io/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://arlettebrook.github.io/search/</guid><description/></item></channel></rss>